/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var t={7526:(e,t)=>{"use strict";t.byteLength=function(e){var t=s(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,o=s(e),a=o[0],l=o[1],c=new i(function(e,t,n){return 3*(t+n)/4-n}(0,a,l)),u=0,p=l>0?a-4:a;for(n=0;n<p;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;return 2===l&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,c[u++]=255&t),1===l&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t),c},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],a=16383,s=0,c=r-i;s<c;s+=a)o.push(l(e,s,s+a>c?c:s+a));return 1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),o.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)n[a]=o[a],r[o.charCodeAt(a)]=a;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,r){for(var i,o,a=[],s=t;s<r;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},973:(e,t)=>{"use strict";function n(e){var t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}t.INT_BITS=32,t.INT_MAX=2147483647,t.INT_MIN=-1<<31,t.sign=function(e){return(e>0)-(e<0)},t.abs=function(e){var t=e>>31;return(e^t)-t},t.min=function(e,t){return t^(e^t)&-(e<t)},t.max=function(e,t){return e^(e^t)&-(e<t)},t.isPow2=function(e){return!(e&e-1||!e)},t.log2=function(e){var t,n;return t=(e>65535)<<4,t|=n=((e>>>=t)>255)<<3,t|=n=((e>>>=n)>15)<<2,(t|=n=((e>>>=n)>3)<<1)|(e>>>=n)>>1},t.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},t.popCount=function(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},t.countTrailingZeros=n,t.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,1+(e|=e>>>16)},t.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},t.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var r=new Array(256);!function(e){for(var t=0;t<256;++t){var n=t,r=t,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--i;e[t]=r<<i&255}}(r),t.reverse=function(e){return r[255&e]<<24|r[e>>>8&255]<<16|r[e>>>16&255]<<8|r[e>>>24&255]},t.interleave2=function(e,t){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))<<1},t.deinterleave2=function(e,t){return(e=65535&((e=16711935&((e=252645135&((e=858993459&((e=e>>>t&1431655765)|e>>>1))|e>>>2))|e>>>4))|e>>>16))<<16>>16},t.interleave3=function(e,t,n){return e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2),(e|=(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},t.deinterleave3=function(e,t){return(e=1023&((e=4278190335&((e=251719695&((e=3272356035&((e=e>>>t&1227133513)|e>>>2))|e>>>4))|e>>>8))|e>>>16))<<22>>22},t.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>n(e)+1}},8287:(e,t,n)=>{"use strict";const r=n(7526),i=n(251),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.hp=l,t.IS=50;const a=2147483647;function s(e){if(e>a)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return p(e)}return c(e,t,n)}function c(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|f(e,t);let r=s(n);const i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(X(e,Uint8Array)){const t=new Uint8Array(e);return h(t.buffer,t.byteOffset,t.byteLength)}return d(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(X(e,ArrayBuffer)||e&&X(e.buffer,ArrayBuffer))return h(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(X(e,SharedArrayBuffer)||e&&X(e.buffer,SharedArrayBuffer)))return h(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return l.from(r,t,n);const i=function(e){if(l.isBuffer(e)){const t=0|m(e.length),n=s(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||Y(e.length)?s(0):d(e):"Buffer"===e.type&&Array.isArray(e.data)?d(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function p(e){return u(e),s(e<0?0:0|m(e))}function d(e){const t=e.length<0?0:0|m(e.length),n=s(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function h(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,l.prototype),r}function m(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function f(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||X(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(e).length;default:if(i)return r?-1:H(e).length;t=(""+t).toLowerCase(),i=!0}}function g(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,n);case"utf8":case"utf-8":return I(this,t,n);case"ascii":return j(this,t,n);case"latin1":case"binary":return A(this,t,n);case"base64":return E(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function y(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function _(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),Y(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=l.from(t,r)),l.isBuffer(t))return 0===t.length?-1:v(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):v(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,n,r,i){let o,a=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){let r=-1;for(o=n;o<s;o++)if(c(e,o)===c(t,-1===r?0:o-r)){if(-1===r&&(r=o),o-r+1===l)return r*a}else-1!==r&&(o-=o-r),r=-1}else for(n+l>s&&(n=s-l),o=n;o>=0;o--){let n=!0;for(let r=0;r<l;r++)if(c(e,o+r)!==c(t,r)){n=!1;break}if(n)return o}return-1}function b(e,t,n,r){n=Number(n)||0;const i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;const o=t.length;let a;for(r>o/2&&(r=o/2),a=0;a<r;++a){const r=parseInt(t.substr(2*a,2),16);if(Y(r))return a;e[n+a]=r}return a}function w(e,t,n,r){return K(H(t,e.length-n),e,n,r)}function x(e,t,n,r){return K(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function S(e,t,n,r){return K(W(t),e,n,r)}function T(e,t,n,r){return K(function(e,t){let n,r,i;const o=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function E(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function I(e,t,n){n=Math.min(e.length,n);const r=[];let i=t;for(;i<n;){const t=e[i];let o=null,a=t>239?4:t>223?3:t>191?2:1;if(i+a<=n){let n,r,s,l;switch(a){case 1:t<128&&(o=t);break;case 2:n=e[i+1],128==(192&n)&&(l=(31&t)<<6|63&n,l>127&&(o=l));break;case 3:n=e[i+1],r=e[i+2],128==(192&n)&&128==(192&r)&&(l=(15&t)<<12|(63&n)<<6|63&r,l>2047&&(l<55296||l>57343)&&(o=l));break;case 4:n=e[i+1],r=e[i+2],s=e[i+3],128==(192&n)&&128==(192&r)&&128==(192&s)&&(l=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&s,l>65535&&l<1114112&&(o=l))}}null===o?(o=65533,a=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=a}return function(e){const t=e.length;if(t<=k)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=k));return n}(r)}l.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,n){return c(e,t,n)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,n){return function(e,t,n){return u(e),e<=0?s(e):void 0!==t?"string"==typeof n?s(e).fill(t,n):s(e).fill(t):s(e)}(e,t,n)},l.allocUnsafe=function(e){return p(e)},l.allocUnsafeSlow=function(e){return p(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(X(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),X(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=l.allocUnsafe(t);let i=0;for(n=0;n<e.length;++n){let t=e[n];if(X(t,Uint8Array))i+t.length>r.length?(l.isBuffer(t)||(t=l.from(t)),t.copy(r,i)):Uint8Array.prototype.set.call(r,t,i);else{if(!l.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,i)}i+=t.length}return r},l.byteLength=f,l.prototype._isBuffer=!0,l.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)y(this,t,t+1);return this},l.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},l.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},l.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?I(this,0,e):g.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){let e="";const n=t.IS;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},o&&(l.prototype[o]=l.prototype.inspect),l.prototype.compare=function(e,t,n,r,i){if(X(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;let o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0);const s=Math.min(o,a),c=this.slice(r,i),u=e.slice(t,n);for(let e=0;e<s;++e)if(c[e]!==u[e]){o=c[e],a=u[e];break}return o<a?-1:a<o?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return _(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return _(this,e,t,n,!1)},l.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let o=!1;for(;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":case"latin1":case"binary":return x(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const k=4096;function j(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function A(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function C(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let i="";for(let r=t;r<n;++r)i+=J[e[r]];return i}function O(e,t,n){const r=e.slice(t,n);let i="";for(let e=0;e<r.length-1;e+=2)i+=String.fromCharCode(r[e]+256*r[e+1]);return i}function M(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function N(e,t,n,r,i,o){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function R(e,t,n,r,i){G(t,r,i,e,n,7);let o=Number(t&BigInt(4294967295));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,n}function P(e,t,n,r,i){G(t,r,i,e,n,7);let o=Number(t&BigInt(4294967295));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=a,a>>=8,e[n+2]=a,a>>=8,e[n+1]=a,a>>=8,e[n]=a,n+8}function D(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(e,t,n,r,o){return t=+t,n>>>=0,o||D(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function F(e,t,n,r,o){return t=+t,n>>>=0,o||D(e,0,n,8),i.write(e,t,n,r,52,8),n+8}l.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,l.prototype),r},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return r},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);let r=this[e+--t],i=1;for(;t>0&&(i*=256);)r+=this[e+--t]*i;return r},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readBigUInt64LE=Q((function(e){z(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||$(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))})),l.prototype.readBigUInt64BE=Q((function(e){z(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||$(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),l.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},l.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||M(e,t,this.length);let r=t,i=1,o=this[e+--r];for(;r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||M(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){e>>>=0,t||M(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readBigInt64LE=Q((function(e){z(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||$(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),l.prototype.readBigInt64BE=Q((function(e){z(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||$(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),l.prototype.readFloatLE=function(e,t){return e>>>=0,t||M(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||M(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||M(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||M(e,8,this.length),i.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||N(this,e,t,n,Math.pow(2,8*n)-1,0);let i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||N(this,e,t,n,Math.pow(2,8*n)-1,0);let i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigUInt64LE=Q((function(e,t=0){return R(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeBigUInt64BE=Q((function(e,t=0){return P(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);N(this,e,t,n,r-1,-r)}let i=0,o=1,a=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/o|0)-a&255;return t+n},l.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);N(this,e,t,n,r-1,-r)}let i=n-1,o=1,a=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/o|0)-a&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||N(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigInt64LE=Q((function(e,t=0){return R(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeBigInt64BE=Q((function(e,t=0){return P(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeFloatLE=function(e,t,n){return L(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return L(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return F(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return F(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,r){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},l.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{const o=l.isBuffer(e)?e:l.from(e,r),a=o.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=o[i%a]}return this};const B={};function U(e,t,n){B[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function V(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function G(e,t,n,r,i,o){if(e>n||e<t){const r="bigint"==typeof t?"n":"";let i;throw i=o>3?0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(o+1)}${r}`:`>= -(2${r} ** ${8*(o+1)-1}${r}) and < 2 ** ${8*(o+1)-1}${r}`:`>= ${t}${r} and <= ${n}${r}`,new B.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,n){z(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||$(t,e.length-(n+1))}(r,i,o)}function z(e,t){if("number"!=typeof e)throw new B.ERR_INVALID_ARG_TYPE(t,"number",e)}function $(e,t,n){if(Math.floor(e)!==e)throw z(e,n),new B.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new B.ERR_BUFFER_OUT_OF_BOUNDS;throw new B.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}U("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),U("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),U("ERR_OUT_OF_RANGE",(function(e,t,n){let r=`The value of "${e}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=V(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=V(i)),i+="n"),r+=` It must be ${t}. Received ${i}`,r}),RangeError);const q=/[^+/0-9A-Za-z-_]/g;function H(e,t){let n;t=t||1/0;const r=e.length;let i=null;const o=[];for(let a=0;a<r;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function W(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(q,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function K(e,t,n,r){let i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function X(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Y(e){return e!=e}const J=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)t[r+i]=e[n]+e[i]}return t}();function Q(e){return"undefined"==typeof BigInt?Z:e}function Z(){throw new Error("BigInt not supported")}},8075:(e,t,n)=>{"use strict";var r=n(453),i=n(487),o=i(r("String.prototype.indexOf"));e.exports=function(e,t){var n=r(e,!!t);return"function"==typeof n&&o(e,".prototype.")>-1?i(n):n}},487:(e,t,n)=>{"use strict";var r=n(6743),i=n(453),o=n(6897),a=n(9675),s=i("%Function.prototype.apply%"),l=i("%Function.prototype.call%"),c=i("%Reflect.apply%",!0)||r.call(l,s),u=n(655),p=i("%Math.max%");e.exports=function(e){if("function"!=typeof e)throw new a("a function is required");var t=c(r,l,arguments);return o(t,1+p(0,e.length-(arguments.length-1)),!0)};var d=function(){return c(r,s,arguments)};u?u(e.exports,"apply",{value:d}):e.exports.apply=d},1017:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(1601),i=n.n(r),o=n(6314),a=n.n(o)()(i());a.push([e.id,':root,[data-bs-theme=light]{--bs-blue: #0d6efd;--bs-indigo: #6610f2;--bs-purple: #6f42c1;--bs-pink: #d63384;--bs-red: #dc3545;--bs-orange: #fd7e14;--bs-yellow: #ffc107;--bs-green: #198754;--bs-teal: #20c997;--bs-cyan: #0dcaf0;--bs-black: #000;--bs-white: #fff;--bs-gray: #6c757d;--bs-gray-dark: #343a40;--bs-gray-100: #f8f9fa;--bs-gray-200: #e9ecef;--bs-gray-300: #dee2e6;--bs-gray-400: #ced4da;--bs-gray-500: #adb5bd;--bs-gray-600: #6c757d;--bs-gray-700: #495057;--bs-gray-800: #343a40;--bs-gray-900: #212529;--bs-primary: #E6E6FA;--bs-secondary: #6c757d;--bs-success: #198754;--bs-info: #0dcaf0;--bs-warning: #ffc107;--bs-danger: #ADD8E6;--bs-light: #f8f9fa;--bs-dark: #212529;--bs-primary-rgb: 230, 230, 250;--bs-secondary-rgb: 108, 117, 125;--bs-success-rgb: 25, 135, 84;--bs-info-rgb: 13, 202, 240;--bs-warning-rgb: 255, 193, 7;--bs-danger-rgb: 173, 216, 230;--bs-light-rgb: 248, 249, 250;--bs-dark-rgb: 33, 37, 41;--bs-primary-text-emphasis: #052c65;--bs-secondary-text-emphasis: #2b2f32;--bs-success-text-emphasis: #0a3622;--bs-info-text-emphasis: #055160;--bs-warning-text-emphasis: #664d03;--bs-danger-text-emphasis: #58151c;--bs-light-text-emphasis: #495057;--bs-dark-text-emphasis: #495057;--bs-primary-bg-subtle: #cfe2ff;--bs-secondary-bg-subtle: #e2e3e5;--bs-success-bg-subtle: #d1e7dd;--bs-info-bg-subtle: #cff4fc;--bs-warning-bg-subtle: #fff3cd;--bs-danger-bg-subtle: #f8d7da;--bs-light-bg-subtle: #fcfcfd;--bs-dark-bg-subtle: #ced4da;--bs-primary-border-subtle: #9ec5fe;--bs-secondary-border-subtle: #c4c8cb;--bs-success-border-subtle: #a3cfbb;--bs-info-border-subtle: #9eeaf9;--bs-warning-border-subtle: #ffe69c;--bs-danger-border-subtle: #f1aeb5;--bs-light-border-subtle: #e9ecef;--bs-dark-border-subtle: #adb5bd;--bs-white-rgb: 255, 255, 255;--bs-black-rgb: 0, 0, 0;--bs-font-sans-serif: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", "Noto Sans", "Liberation Sans", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";--bs-font-monospace: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;--bs-gradient: linear-gradient(180deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0));--bs-body-font-family: var(--bs-font-sans-serif);--bs-body-font-size:1rem;--bs-body-font-weight: 400;--bs-body-line-height: 1.5;--bs-body-color: #212529;--bs-body-color-rgb: 33, 37, 41;--bs-body-bg: #fff;--bs-body-bg-rgb: 255, 255, 255;--bs-emphasis-color: #000;--bs-emphasis-color-rgb: 0, 0, 0;--bs-secondary-color: rgba(33, 37, 41, 0.75);--bs-secondary-color-rgb: 33, 37, 41;--bs-secondary-bg: #e9ecef;--bs-secondary-bg-rgb: 233, 236, 239;--bs-tertiary-color: rgba(33, 37, 41, 0.5);--bs-tertiary-color-rgb: 33, 37, 41;--bs-tertiary-bg: #f8f9fa;--bs-tertiary-bg-rgb: 248, 249, 250;--bs-heading-color: inherit;--bs-link-color: #0d6efd;--bs-link-color-rgb: 13, 110, 253;--bs-link-decoration: underline;--bs-link-hover-color: #0a58ca;--bs-link-hover-color-rgb: 10, 88, 202;--bs-code-color: #d63384;--bs-highlight-color: #212529;--bs-highlight-bg: #fff3cd;--bs-border-width: 1px;--bs-border-style: solid;--bs-border-color: #dee2e6;--bs-border-color-translucent: rgba(0, 0, 0, 0.175);--bs-border-radius: 0.375rem;--bs-border-radius-sm: 0.25rem;--bs-border-radius-lg: 0.5rem;--bs-border-radius-xl: 1rem;--bs-border-radius-xxl: 2rem;--bs-border-radius-2xl: var(--bs-border-radius-xxl);--bs-border-radius-pill: 50rem;--bs-box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);--bs-box-shadow-sm: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);--bs-box-shadow-lg: 0 1rem 3rem rgba(0, 0, 0, 0.175);--bs-box-shadow-inset: inset 0 1px 2px rgba(0, 0, 0, 0.075);--bs-focus-ring-width: 0.25rem;--bs-focus-ring-opacity: 0.25;--bs-focus-ring-color: rgba(13, 110, 253, 0.25);--bs-form-valid-color: #198754;--bs-form-valid-border-color: #198754;--bs-form-invalid-color: #dc3545;--bs-form-invalid-border-color: #dc3545}[data-bs-theme=dark]{color-scheme:dark;--bs-body-color: #dee2e6;--bs-body-color-rgb: 222, 226, 230;--bs-body-bg: #212529;--bs-body-bg-rgb: 33, 37, 41;--bs-emphasis-color: #fff;--bs-emphasis-color-rgb: 255, 255, 255;--bs-secondary-color: rgba(222, 226, 230, 0.75);--bs-secondary-color-rgb: 222, 226, 230;--bs-secondary-bg: #343a40;--bs-secondary-bg-rgb: 52, 58, 64;--bs-tertiary-color: rgba(222, 226, 230, 0.5);--bs-tertiary-color-rgb: 222, 226, 230;--bs-tertiary-bg: #2b3035;--bs-tertiary-bg-rgb: 43, 48, 53;--bs-primary-text-emphasis: #6ea8fe;--bs-secondary-text-emphasis: #a7acb1;--bs-success-text-emphasis: #75b798;--bs-info-text-emphasis: #6edff6;--bs-warning-text-emphasis: #ffda6a;--bs-danger-text-emphasis: #ea868f;--bs-light-text-emphasis: #f8f9fa;--bs-dark-text-emphasis: #dee2e6;--bs-primary-bg-subtle: #031633;--bs-secondary-bg-subtle: #161719;--bs-success-bg-subtle: #051b11;--bs-info-bg-subtle: #032830;--bs-warning-bg-subtle: #332701;--bs-danger-bg-subtle: #2c0b0e;--bs-light-bg-subtle: #343a40;--bs-dark-bg-subtle: #1a1d20;--bs-primary-border-subtle: #084298;--bs-secondary-border-subtle: #41464b;--bs-success-border-subtle: #0f5132;--bs-info-border-subtle: #087990;--bs-warning-border-subtle: #997404;--bs-danger-border-subtle: #842029;--bs-light-border-subtle: #495057;--bs-dark-border-subtle: #343a40;--bs-heading-color: inherit;--bs-link-color: #6ea8fe;--bs-link-hover-color: #8bb9fe;--bs-link-color-rgb: 110, 168, 254;--bs-link-hover-color-rgb: 139, 185, 254;--bs-code-color: #e685b5;--bs-highlight-color: #dee2e6;--bs-highlight-bg: #664d03;--bs-border-color: #495057;--bs-border-color-translucent: rgba(255, 255, 255, 0.15);--bs-form-valid-color: #75b798;--bs-form-valid-border-color: #75b798;--bs-form-invalid-color: #ea868f;--bs-form-invalid-border-color: #ea868f}*,*::before,*::after{box-sizing:border-box}@media(prefers-reduced-motion: no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:var(--bs-body-font-family);font-size:var(--bs-body-font-size);font-weight:var(--bs-body-font-weight);line-height:var(--bs-body-line-height);color:var(--bs-body-color);text-align:var(--bs-body-text-align);background-color:var(--bs-body-bg);-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:rgba(0,0,0,0)}hr{margin:1rem 0;color:inherit;border:0;border-top:var(--bs-border-width) solid;opacity:.25}h6,h5,h4,h3,h2,h1{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2;color:var(--bs-heading-color)}h1{font-size:calc(1.375rem + 1.5vw)}@media(min-width: 1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + 0.9vw)}@media(min-width: 1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + 0.6vw)}@media(min-width: 1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + 0.3vw)}@media(min-width: 1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[title]{text-decoration:underline dotted;cursor:help;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}ol,ul,dl{margin-top:0;margin-bottom:1rem}ol ol,ul ul,ol ul,ul ol{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:0.875em}mark{padding:.1875em;color:var(--bs-highlight-color);background-color:var(--bs-highlight-bg)}sub,sup{position:relative;font-size:0.75em;line-height:0;vertical-align:baseline}sub{bottom:-0.25em}sup{top:-0.5em}a{color:rgba(var(--bs-link-color-rgb), var(--bs-link-opacity, 1));text-decoration:underline}a:hover{--bs-link-color-rgb: var(--bs-link-hover-color-rgb)}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}pre,code,kbd,samp{font-family:var(--bs-font-monospace);font-size:1em}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:0.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:0.875em;color:var(--bs-code-color);word-wrap:break-word}a>code{color:inherit}kbd{padding:.1875rem .375rem;font-size:0.875em;color:var(--bs-body-bg);background-color:var(--bs-body-color);border-radius:.25rem}kbd kbd{padding:0;font-size:1em}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:var(--bs-secondary-color);text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}thead,tbody,tfoot,tr,td,th{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}input,button,select,optgroup,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]:not([type=date]):not([type=datetime-local]):not([type=month]):not([type=week]):not([type=time])::-webkit-calendar-picker-indicator{display:none !important}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button}button:not(:disabled),[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + 0.3vw);line-height:inherit}@media(min-width: 1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-text,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none !important}.clearfix::after{display:block;clear:both;content:""}.text-bg-primary{color:#000 !important;background-color:RGBA(var(--bs-primary-rgb), var(--bs-bg-opacity, 1)) !important}.text-bg-secondary{color:#fff !important;background-color:RGBA(var(--bs-secondary-rgb), var(--bs-bg-opacity, 1)) !important}.text-bg-success{color:#fff !important;background-color:RGBA(var(--bs-success-rgb), var(--bs-bg-opacity, 1)) !important}.text-bg-info{color:#000 !important;background-color:RGBA(var(--bs-info-rgb), var(--bs-bg-opacity, 1)) !important}.text-bg-warning{color:#000 !important;background-color:RGBA(var(--bs-warning-rgb), var(--bs-bg-opacity, 1)) !important}.text-bg-danger{color:#000 !important;background-color:RGBA(var(--bs-danger-rgb), var(--bs-bg-opacity, 1)) !important}.text-bg-light{color:#000 !important;background-color:RGBA(var(--bs-light-rgb), var(--bs-bg-opacity, 1)) !important}.text-bg-dark{color:#fff !important;background-color:RGBA(var(--bs-dark-rgb), var(--bs-bg-opacity, 1)) !important}.link-primary{color:RGBA(var(--bs-primary-rgb), var(--bs-link-opacity, 1)) !important;text-decoration-color:RGBA(var(--bs-primary-rgb), var(--bs-link-underline-opacity, 1)) !important}.link-primary:hover,.link-primary:focus{color:RGBA(235, 235, 251, var(--bs-link-opacity, 1)) !important;text-decoration-color:RGBA(235, 235, 251, var(--bs-link-underline-opacity, 1)) !important}.link-secondary{color:RGBA(var(--bs-secondary-rgb), var(--bs-link-opacity, 1)) !important;text-decoration-color:RGBA(var(--bs-secondary-rgb), var(--bs-link-underline-opacity, 1)) !important}.link-secondary:hover,.link-secondary:focus{color:RGBA(86, 94, 100, var(--bs-link-opacity, 1)) !important;text-decoration-color:RGBA(86, 94, 100, var(--bs-link-underline-opacity, 1)) !important}.link-success{color:RGBA(var(--bs-success-rgb), var(--bs-link-opacity, 1)) !important;text-decoration-color:RGBA(var(--bs-success-rgb), var(--bs-link-underline-opacity, 1)) !important}.link-success:hover,.link-success:focus{color:RGBA(20, 108, 67, var(--bs-link-opacity, 1)) !important;text-decoration-color:RGBA(20, 108, 67, var(--bs-link-underline-opacity, 1)) !important}.link-info{color:RGBA(var(--bs-info-rgb), var(--bs-link-opacity, 1)) !important;text-decoration-color:RGBA(var(--bs-info-rgb), var(--bs-link-underline-opacity, 1)) !important}.link-info:hover,.link-info:focus{color:RGBA(61, 213, 243, var(--bs-link-opacity, 1)) !important;text-decoration-color:RGBA(61, 213, 243, var(--bs-link-underline-opacity, 1)) !important}.link-warning{color:RGBA(var(--bs-warning-rgb), var(--bs-link-opacity, 1)) !important;text-decoration-color:RGBA(var(--bs-warning-rgb), var(--bs-link-underline-opacity, 1)) !important}.link-warning:hover,.link-warning:focus{color:RGBA(255, 205, 57, var(--bs-link-opacity, 1)) !important;text-decoration-color:RGBA(255, 205, 57, var(--bs-link-underline-opacity, 1)) !important}.link-danger{color:RGBA(var(--bs-danger-rgb), var(--bs-link-opacity, 1)) !important;text-decoration-color:RGBA(var(--bs-danger-rgb), var(--bs-link-underline-opacity, 1)) !important}.link-danger:hover,.link-danger:focus{color:RGBA(189, 224, 235, var(--bs-link-opacity, 1)) !important;text-decoration-color:RGBA(189, 224, 235, var(--bs-link-underline-opacity, 1)) !important}.link-light{color:RGBA(var(--bs-light-rgb), var(--bs-link-opacity, 1)) !important;text-decoration-color:RGBA(var(--bs-light-rgb), var(--bs-link-underline-opacity, 1)) !important}.link-light:hover,.link-light:focus{color:RGBA(249, 250, 251, var(--bs-link-opacity, 1)) !important;text-decoration-color:RGBA(249, 250, 251, var(--bs-link-underline-opacity, 1)) !important}.link-dark{color:RGBA(var(--bs-dark-rgb), var(--bs-link-opacity, 1)) !important;text-decoration-color:RGBA(var(--bs-dark-rgb), var(--bs-link-underline-opacity, 1)) !important}.link-dark:hover,.link-dark:focus{color:RGBA(26, 30, 33, var(--bs-link-opacity, 1)) !important;text-decoration-color:RGBA(26, 30, 33, var(--bs-link-underline-opacity, 1)) !important}.link-body-emphasis{color:RGBA(var(--bs-emphasis-color-rgb), var(--bs-link-opacity, 1)) !important;text-decoration-color:RGBA(var(--bs-emphasis-color-rgb), var(--bs-link-underline-opacity, 1)) !important}.link-body-emphasis:hover,.link-body-emphasis:focus{color:RGBA(var(--bs-emphasis-color-rgb), var(--bs-link-opacity, 0.75)) !important;text-decoration-color:RGBA(var(--bs-emphasis-color-rgb), var(--bs-link-underline-opacity, 0.75)) !important}.focus-ring:focus{outline:0;box-shadow:var(--bs-focus-ring-x, 0) var(--bs-focus-ring-y, 0) var(--bs-focus-ring-blur, 0) var(--bs-focus-ring-width) var(--bs-focus-ring-color)}.icon-link{display:inline-flex;gap:.375rem;align-items:center;text-decoration-color:rgba(var(--bs-link-color-rgb), var(--bs-link-opacity, 0.5));text-underline-offset:.25em;backface-visibility:hidden}.icon-link>.bi{flex-shrink:0;width:1em;height:1em;fill:currentcolor;transition:.2s ease-in-out transform}@media(prefers-reduced-motion: reduce){.icon-link>.bi{transition:none}}.icon-link-hover:hover>.bi,.icon-link-hover:focus-visible>.bi{transform:var(--bs-icon-link-transform, translate3d(0.25em, 0, 0))}.ratio{position:relative;width:100%}.ratio::before{display:block;padding-top:var(--bs-aspect-ratio);content:""}.ratio>*{position:absolute;top:0;left:0;width:100%;height:100%}.ratio-1x1{--bs-aspect-ratio: 100%}.ratio-4x3{--bs-aspect-ratio: 75%}.ratio-16x9{--bs-aspect-ratio: 56.25%}.ratio-21x9{--bs-aspect-ratio: 42.8571428571%}.fixed-top{position:fixed;top:0;right:0;left:0;z-index:1030}.fixed-bottom{position:fixed;right:0;bottom:0;left:0;z-index:1030}.sticky-top{position:sticky;top:0;z-index:1020}.sticky-bottom{position:sticky;bottom:0;z-index:1020}@media(min-width: 576px){.sticky-sm-top{position:sticky;top:0;z-index:1020}.sticky-sm-bottom{position:sticky;bottom:0;z-index:1020}}@media(min-width: 768px){.sticky-md-top{position:sticky;top:0;z-index:1020}.sticky-md-bottom{position:sticky;bottom:0;z-index:1020}}@media(min-width: 992px){.sticky-lg-top{position:sticky;top:0;z-index:1020}.sticky-lg-bottom{position:sticky;bottom:0;z-index:1020}}@media(min-width: 1200px){.sticky-xl-top{position:sticky;top:0;z-index:1020}.sticky-xl-bottom{position:sticky;bottom:0;z-index:1020}}@media(min-width: 1400px){.sticky-xxl-top{position:sticky;top:0;z-index:1020}.sticky-xxl-bottom{position:sticky;bottom:0;z-index:1020}}.hstack{display:flex;flex-direction:row;align-items:center;align-self:stretch}.vstack{display:flex;flex:1 1 auto;flex-direction:column;align-self:stretch}.visually-hidden,.visually-hidden-focusable:not(:focus):not(:focus-within){width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important}.visually-hidden:not(caption),.visually-hidden-focusable:not(:focus):not(:focus-within):not(caption){position:absolute !important}.stretched-link::after{position:absolute;top:0;right:0;bottom:0;left:0;z-index:1;content:""}.text-truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.vr{display:inline-block;align-self:stretch;width:var(--bs-border-width);min-height:1em;background-color:currentcolor;opacity:.25}.btn{--bs-btn-padding-x: 0.75rem;--bs-btn-padding-y: 0.375rem;--bs-btn-font-family: ;--bs-btn-font-size:1rem;--bs-btn-font-weight: 400;--bs-btn-line-height: 1.5;--bs-btn-color: var(--bs-body-color);--bs-btn-bg: transparent;--bs-btn-border-width: var(--bs-border-width);--bs-btn-border-color: transparent;--bs-btn-border-radius: var(--bs-border-radius);--bs-btn-hover-border-color: transparent;--bs-btn-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.15), 0 1px 1px rgba(0, 0, 0, 0.075);--bs-btn-disabled-opacity: 0.65;--bs-btn-focus-box-shadow: 0 0 0 0.25rem rgba(var(--bs-btn-focus-shadow-rgb), .5);display:inline-block;padding:var(--bs-btn-padding-y) var(--bs-btn-padding-x);font-family:var(--bs-btn-font-family);font-size:var(--bs-btn-font-size);font-weight:var(--bs-btn-font-weight);line-height:var(--bs-btn-line-height);color:var(--bs-btn-color);text-align:center;text-decoration:none;vertical-align:middle;cursor:pointer;user-select:none;border:var(--bs-btn-border-width) solid var(--bs-btn-border-color);border-radius:var(--bs-btn-border-radius);background-color:var(--bs-btn-bg);transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion: reduce){.btn{transition:none}}.btn:hover{color:var(--bs-btn-hover-color);background-color:var(--bs-btn-hover-bg);border-color:var(--bs-btn-hover-border-color)}.btn-check+.btn:hover{color:var(--bs-btn-color);background-color:var(--bs-btn-bg);border-color:var(--bs-btn-border-color)}.btn:focus-visible{color:var(--bs-btn-hover-color);background-color:var(--bs-btn-hover-bg);border-color:var(--bs-btn-hover-border-color);outline:0;box-shadow:var(--bs-btn-focus-box-shadow)}.btn-check:focus-visible+.btn{border-color:var(--bs-btn-hover-border-color);outline:0;box-shadow:var(--bs-btn-focus-box-shadow)}.btn-check:checked+.btn,:not(.btn-check)+.btn:active,.btn:first-child:active,.btn.active,.btn.show{color:var(--bs-btn-active-color);background-color:var(--bs-btn-active-bg);border-color:var(--bs-btn-active-border-color)}.btn-check:checked+.btn:focus-visible,:not(.btn-check)+.btn:active:focus-visible,.btn:first-child:active:focus-visible,.btn.active:focus-visible,.btn.show:focus-visible{box-shadow:var(--bs-btn-focus-box-shadow)}.btn-check:checked:focus-visible+.btn{box-shadow:var(--bs-btn-focus-box-shadow)}.btn:disabled,.btn.disabled,fieldset:disabled .btn{color:var(--bs-btn-disabled-color);pointer-events:none;background-color:var(--bs-btn-disabled-bg);border-color:var(--bs-btn-disabled-border-color);opacity:var(--bs-btn-disabled-opacity)}.btn-primary{--bs-btn-color: #000;--bs-btn-bg: #E6E6FA;--bs-btn-border-color: #E6E6FA;--bs-btn-hover-color: #000;--bs-btn-hover-bg: #eaeafb;--bs-btn-hover-border-color: #e9e9fb;--bs-btn-focus-shadow-rgb: 196, 196, 213;--bs-btn-active-color: #000;--bs-btn-active-bg: #ebebfb;--bs-btn-active-border-color: #e9e9fb;--bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color: #000;--bs-btn-disabled-bg: #E6E6FA;--bs-btn-disabled-border-color: #E6E6FA}.btn-secondary{--bs-btn-color: #fff;--bs-btn-bg: #6c757d;--bs-btn-border-color: #6c757d;--bs-btn-hover-color: #fff;--bs-btn-hover-bg: #5c636a;--bs-btn-hover-border-color: #565e64;--bs-btn-focus-shadow-rgb: 130, 138, 145;--bs-btn-active-color: #fff;--bs-btn-active-bg: #565e64;--bs-btn-active-border-color: #51585e;--bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color: #fff;--bs-btn-disabled-bg: #6c757d;--bs-btn-disabled-border-color: #6c757d}.btn-success{--bs-btn-color: #fff;--bs-btn-bg: #198754;--bs-btn-border-color: #198754;--bs-btn-hover-color: #fff;--bs-btn-hover-bg: #157347;--bs-btn-hover-border-color: #146c43;--bs-btn-focus-shadow-rgb: 60, 153, 110;--bs-btn-active-color: #fff;--bs-btn-active-bg: #146c43;--bs-btn-active-border-color: #13653f;--bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color: #fff;--bs-btn-disabled-bg: #198754;--bs-btn-disabled-border-color: #198754}.btn-info{--bs-btn-color: #000;--bs-btn-bg: #0dcaf0;--bs-btn-border-color: #0dcaf0;--bs-btn-hover-color: #000;--bs-btn-hover-bg: #31d2f2;--bs-btn-hover-border-color: #25cff2;--bs-btn-focus-shadow-rgb: 11, 172, 204;--bs-btn-active-color: #000;--bs-btn-active-bg: #3dd5f3;--bs-btn-active-border-color: #25cff2;--bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color: #000;--bs-btn-disabled-bg: #0dcaf0;--bs-btn-disabled-border-color: #0dcaf0}.btn-warning{--bs-btn-color: #000;--bs-btn-bg: #ffc107;--bs-btn-border-color: #ffc107;--bs-btn-hover-color: #000;--bs-btn-hover-bg: #ffca2c;--bs-btn-hover-border-color: #ffc720;--bs-btn-focus-shadow-rgb: 217, 164, 6;--bs-btn-active-color: #000;--bs-btn-active-bg: #ffcd39;--bs-btn-active-border-color: #ffc720;--bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color: #000;--bs-btn-disabled-bg: #ffc107;--bs-btn-disabled-border-color: #ffc107}.btn-danger{--bs-btn-color: #000;--bs-btn-bg: #ADD8E6;--bs-btn-border-color: #ADD8E6;--bs-btn-hover-color: #000;--bs-btn-hover-bg: #b9deea;--bs-btn-hover-border-color: #b5dce9;--bs-btn-focus-shadow-rgb: 147, 184, 196;--bs-btn-active-color: #000;--bs-btn-active-bg: #bde0eb;--bs-btn-active-border-color: #b5dce9;--bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color: #000;--bs-btn-disabled-bg: #ADD8E6;--bs-btn-disabled-border-color: #ADD8E6}.btn-light{--bs-btn-color: #000;--bs-btn-bg: #f8f9fa;--bs-btn-border-color: #f8f9fa;--bs-btn-hover-color: #000;--bs-btn-hover-bg: #d3d4d5;--bs-btn-hover-border-color: #c6c7c8;--bs-btn-focus-shadow-rgb: 211, 212, 213;--bs-btn-active-color: #000;--bs-btn-active-bg: #c6c7c8;--bs-btn-active-border-color: #babbbc;--bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color: #000;--bs-btn-disabled-bg: #f8f9fa;--bs-btn-disabled-border-color: #f8f9fa}.btn-dark{--bs-btn-color: #fff;--bs-btn-bg: #212529;--bs-btn-border-color: #212529;--bs-btn-hover-color: #fff;--bs-btn-hover-bg: #424649;--bs-btn-hover-border-color: #373b3e;--bs-btn-focus-shadow-rgb: 66, 70, 73;--bs-btn-active-color: #fff;--bs-btn-active-bg: #4d5154;--bs-btn-active-border-color: #373b3e;--bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color: #fff;--bs-btn-disabled-bg: #212529;--bs-btn-disabled-border-color: #212529}.btn-outline-primary{--bs-btn-color: #E6E6FA;--bs-btn-border-color: #E6E6FA;--bs-btn-hover-color: #000;--bs-btn-hover-bg: #E6E6FA;--bs-btn-hover-border-color: #E6E6FA;--bs-btn-focus-shadow-rgb: 230, 230, 250;--bs-btn-active-color: #000;--bs-btn-active-bg: #E6E6FA;--bs-btn-active-border-color: #E6E6FA;--bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color: #E6E6FA;--bs-btn-disabled-bg: transparent;--bs-btn-disabled-border-color: #E6E6FA;--bs-gradient: none}.btn-outline-secondary{--bs-btn-color: #6c757d;--bs-btn-border-color: #6c757d;--bs-btn-hover-color: #fff;--bs-btn-hover-bg: #6c757d;--bs-btn-hover-border-color: #6c757d;--bs-btn-focus-shadow-rgb: 108, 117, 125;--bs-btn-active-color: #fff;--bs-btn-active-bg: #6c757d;--bs-btn-active-border-color: #6c757d;--bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color: #6c757d;--bs-btn-disabled-bg: transparent;--bs-btn-disabled-border-color: #6c757d;--bs-gradient: none}.btn-outline-success{--bs-btn-color: #198754;--bs-btn-border-color: #198754;--bs-btn-hover-color: #fff;--bs-btn-hover-bg: #198754;--bs-btn-hover-border-color: #198754;--bs-btn-focus-shadow-rgb: 25, 135, 84;--bs-btn-active-color: #fff;--bs-btn-active-bg: #198754;--bs-btn-active-border-color: #198754;--bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color: #198754;--bs-btn-disabled-bg: transparent;--bs-btn-disabled-border-color: #198754;--bs-gradient: none}.btn-outline-info{--bs-btn-color: #0dcaf0;--bs-btn-border-color: #0dcaf0;--bs-btn-hover-color: #000;--bs-btn-hover-bg: #0dcaf0;--bs-btn-hover-border-color: #0dcaf0;--bs-btn-focus-shadow-rgb: 13, 202, 240;--bs-btn-active-color: #000;--bs-btn-active-bg: #0dcaf0;--bs-btn-active-border-color: #0dcaf0;--bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color: #0dcaf0;--bs-btn-disabled-bg: transparent;--bs-btn-disabled-border-color: #0dcaf0;--bs-gradient: none}.btn-outline-warning{--bs-btn-color: #ffc107;--bs-btn-border-color: #ffc107;--bs-btn-hover-color: #000;--bs-btn-hover-bg: #ffc107;--bs-btn-hover-border-color: #ffc107;--bs-btn-focus-shadow-rgb: 255, 193, 7;--bs-btn-active-color: #000;--bs-btn-active-bg: #ffc107;--bs-btn-active-border-color: #ffc107;--bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color: #ffc107;--bs-btn-disabled-bg: transparent;--bs-btn-disabled-border-color: #ffc107;--bs-gradient: none}.btn-outline-danger{--bs-btn-color: #ADD8E6;--bs-btn-border-color: #ADD8E6;--bs-btn-hover-color: #000;--bs-btn-hover-bg: #ADD8E6;--bs-btn-hover-border-color: #ADD8E6;--bs-btn-focus-shadow-rgb: 173, 216, 230;--bs-btn-active-color: #000;--bs-btn-active-bg: #ADD8E6;--bs-btn-active-border-color: #ADD8E6;--bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color: #ADD8E6;--bs-btn-disabled-bg: transparent;--bs-btn-disabled-border-color: #ADD8E6;--bs-gradient: none}.btn-outline-light{--bs-btn-color: #f8f9fa;--bs-btn-border-color: #f8f9fa;--bs-btn-hover-color: #000;--bs-btn-hover-bg: #f8f9fa;--bs-btn-hover-border-color: #f8f9fa;--bs-btn-focus-shadow-rgb: 248, 249, 250;--bs-btn-active-color: #000;--bs-btn-active-bg: #f8f9fa;--bs-btn-active-border-color: #f8f9fa;--bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color: #f8f9fa;--bs-btn-disabled-bg: transparent;--bs-btn-disabled-border-color: #f8f9fa;--bs-gradient: none}.btn-outline-dark{--bs-btn-color: #212529;--bs-btn-border-color: #212529;--bs-btn-hover-color: #fff;--bs-btn-hover-bg: #212529;--bs-btn-hover-border-color: #212529;--bs-btn-focus-shadow-rgb: 33, 37, 41;--bs-btn-active-color: #fff;--bs-btn-active-bg: #212529;--bs-btn-active-border-color: #212529;--bs-btn-active-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);--bs-btn-disabled-color: #212529;--bs-btn-disabled-bg: transparent;--bs-btn-disabled-border-color: #212529;--bs-gradient: none}.btn-link{--bs-btn-font-weight: 400;--bs-btn-color: var(--bs-link-color);--bs-btn-bg: transparent;--bs-btn-border-color: transparent;--bs-btn-hover-color: var(--bs-link-hover-color);--bs-btn-hover-border-color: transparent;--bs-btn-active-color: var(--bs-link-hover-color);--bs-btn-active-border-color: transparent;--bs-btn-disabled-color: #6c757d;--bs-btn-disabled-border-color: transparent;--bs-btn-box-shadow: 0 0 0 #000;--bs-btn-focus-shadow-rgb: 49, 132, 253;text-decoration:underline}.btn-link:focus-visible{color:var(--bs-btn-color)}.btn-link:hover{color:var(--bs-btn-hover-color)}.btn-lg{--bs-btn-padding-y: 0.5rem;--bs-btn-padding-x: 1rem;--bs-btn-font-size:1.25rem;--bs-btn-border-radius: var(--bs-border-radius-lg)}.btn-sm{--bs-btn-padding-y: 0.25rem;--bs-btn-padding-x: 0.5rem;--bs-btn-font-size:0.875rem;--bs-btn-border-radius: var(--bs-border-radius-sm)}.badge{--bs-badge-padding-x: 0.65em;--bs-badge-padding-y: 0.35em;--bs-badge-font-size:0.75em;--bs-badge-font-weight: 700;--bs-badge-color: #fff;--bs-badge-border-radius: var(--bs-border-radius);display:inline-block;padding:var(--bs-badge-padding-y) var(--bs-badge-padding-x);font-size:var(--bs-badge-font-size);font-weight:var(--bs-badge-font-weight);line-height:1;color:var(--bs-badge-color);text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:var(--bs-badge-border-radius)}.badge:empty{display:none}.btn .badge{position:relative;top:-1px}.img-fluid{max-width:100%;height:auto}.img-thumbnail{padding:.25rem;background-color:var(--bs-body-bg);border:var(--bs-border-width) solid var(--bs-border-color);border-radius:var(--bs-border-radius);max-width:100%;height:auto}.figure{display:inline-block}.figure-img{margin-bottom:.5rem;line-height:1}.figure-caption{font-size:0.875em;color:var(--bs-secondary-color)}.container,.container-fluid,.container-xxl,.container-xl,.container-lg,.container-md,.container-sm{--bs-gutter-x: 1.5rem;--bs-gutter-y: 0;width:100%;padding-right:calc(var(--bs-gutter-x)*.5);padding-left:calc(var(--bs-gutter-x)*.5);margin-right:auto;margin-left:auto}@media(min-width: 576px){.container-sm,.container{max-width:540px}}@media(min-width: 768px){.container-md,.container-sm,.container{max-width:720px}}@media(min-width: 992px){.container-lg,.container-md,.container-sm,.container{max-width:960px}}@media(min-width: 1200px){.container-xl,.container-lg,.container-md,.container-sm,.container{max-width:1140px}}@media(min-width: 1400px){.container-xxl,.container-xl,.container-lg,.container-md,.container-sm,.container{max-width:1320px}}.card{--bs-card-spacer-y: 1rem;--bs-card-spacer-x: 1rem;--bs-card-title-spacer-y: 0.5rem;--bs-card-title-color: ;--bs-card-subtitle-color: ;--bs-card-border-width: var(--bs-border-width);--bs-card-border-color: var(--bs-border-color-translucent);--bs-card-border-radius: var(--bs-border-radius);--bs-card-box-shadow: ;--bs-card-inner-border-radius: calc(var(--bs-border-radius) - (var(--bs-border-width)));--bs-card-cap-padding-y: 0.5rem;--bs-card-cap-padding-x: 1rem;--bs-card-cap-bg: rgba(var(--bs-body-color-rgb), 0.03);--bs-card-cap-color: ;--bs-card-height: ;--bs-card-color: ;--bs-card-bg: var(--bs-body-bg);--bs-card-img-overlay-padding: 1rem;--bs-card-group-margin: 0.75rem;position:relative;display:flex;flex-direction:column;min-width:0;height:var(--bs-card-height);color:var(--bs-body-color);word-wrap:break-word;background-color:var(--bs-card-bg);background-clip:border-box;border:var(--bs-card-border-width) solid var(--bs-card-border-color);border-radius:var(--bs-card-border-radius)}.card>hr{margin-right:0;margin-left:0}.card>.list-group{border-top:inherit;border-bottom:inherit}.card>.list-group:first-child{border-top-width:0;border-top-left-radius:var(--bs-card-inner-border-radius);border-top-right-radius:var(--bs-card-inner-border-radius)}.card>.list-group:last-child{border-bottom-width:0;border-bottom-right-radius:var(--bs-card-inner-border-radius);border-bottom-left-radius:var(--bs-card-inner-border-radius)}.card>.card-header+.list-group,.card>.list-group+.card-footer{border-top:0}.card-body{flex:1 1 auto;padding:var(--bs-card-spacer-y) var(--bs-card-spacer-x);color:var(--bs-card-color)}.card-title{margin-bottom:var(--bs-card-title-spacer-y);color:var(--bs-card-title-color)}.card-subtitle{margin-top:calc(-0.5*var(--bs-card-title-spacer-y));margin-bottom:0;color:var(--bs-card-subtitle-color)}.card-text:last-child{margin-bottom:0}.card-link+.card-link{margin-left:var(--bs-card-spacer-x)}.card-header{padding:var(--bs-card-cap-padding-y) var(--bs-card-cap-padding-x);margin-bottom:0;color:var(--bs-card-cap-color);background-color:var(--bs-card-cap-bg);border-bottom:var(--bs-card-border-width) solid var(--bs-card-border-color)}.card-header:first-child{border-radius:var(--bs-card-inner-border-radius) var(--bs-card-inner-border-radius) 0 0}.card-footer{padding:var(--bs-card-cap-padding-y) var(--bs-card-cap-padding-x);color:var(--bs-card-cap-color);background-color:var(--bs-card-cap-bg);border-top:var(--bs-card-border-width) solid var(--bs-card-border-color)}.card-footer:last-child{border-radius:0 0 var(--bs-card-inner-border-radius) var(--bs-card-inner-border-radius)}.card-header-tabs{margin-right:calc(-0.5*var(--bs-card-cap-padding-x));margin-bottom:calc(-1*var(--bs-card-cap-padding-y));margin-left:calc(-0.5*var(--bs-card-cap-padding-x));border-bottom:0}.card-header-tabs .nav-link.active{background-color:var(--bs-card-bg);border-bottom-color:var(--bs-card-bg)}.card-header-pills{margin-right:calc(-0.5*var(--bs-card-cap-padding-x));margin-left:calc(-0.5*var(--bs-card-cap-padding-x))}.card-img-overlay{position:absolute;top:0;right:0;bottom:0;left:0;padding:var(--bs-card-img-overlay-padding);border-radius:var(--bs-card-inner-border-radius)}.card-img,.card-img-top,.card-img-bottom{width:100%}.card-img,.card-img-top{border-top-left-radius:var(--bs-card-inner-border-radius);border-top-right-radius:var(--bs-card-inner-border-radius)}.card-img,.card-img-bottom{border-bottom-right-radius:var(--bs-card-inner-border-radius);border-bottom-left-radius:var(--bs-card-inner-border-radius)}.card-group>.card{margin-bottom:var(--bs-card-group-margin)}@media(min-width: 576px){.card-group{display:flex;flex-flow:row wrap}.card-group>.card{flex:1 0 0%;margin-bottom:0}.card-group>.card+.card{margin-left:0;border-left:0}.card-group>.card:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.card-group>.card:not(:last-child) .card-img-top,.card-group>.card:not(:last-child) .card-header{border-top-right-radius:0}.card-group>.card:not(:last-child) .card-img-bottom,.card-group>.card:not(:last-child) .card-footer{border-bottom-right-radius:0}.card-group>.card:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.card-group>.card:not(:first-child) .card-img-top,.card-group>.card:not(:first-child) .card-header{border-top-left-radius:0}.card-group>.card:not(:first-child) .card-img-bottom,.card-group>.card:not(:first-child) .card-footer{border-bottom-left-radius:0}}.align-baseline{vertical-align:baseline !important}.align-top{vertical-align:top !important}.align-middle{vertical-align:middle !important}.align-bottom{vertical-align:bottom !important}.align-text-bottom{vertical-align:text-bottom !important}.align-text-top{vertical-align:text-top !important}.float-start{float:left !important}.float-end{float:right !important}.float-none{float:none !important}.object-fit-contain{object-fit:contain !important}.object-fit-cover{object-fit:cover !important}.object-fit-fill{object-fit:fill !important}.object-fit-scale{object-fit:scale-down !important}.object-fit-none{object-fit:none !important}.opacity-0{opacity:0 !important}.opacity-25{opacity:.25 !important}.opacity-50{opacity:.5 !important}.opacity-75{opacity:.75 !important}.opacity-100{opacity:1 !important}.overflow-auto{overflow:auto !important}.overflow-hidden{overflow:hidden !important}.overflow-visible{overflow:visible !important}.overflow-scroll{overflow:scroll !important}.overflow-x-auto{overflow-x:auto !important}.overflow-x-hidden{overflow-x:hidden !important}.overflow-x-visible{overflow-x:visible !important}.overflow-x-scroll{overflow-x:scroll !important}.overflow-y-auto{overflow-y:auto !important}.overflow-y-hidden{overflow-y:hidden !important}.overflow-y-visible{overflow-y:visible !important}.overflow-y-scroll{overflow-y:scroll !important}.d-inline{display:inline !important}.d-inline-block{display:inline-block !important}.d-block{display:block !important}.d-grid{display:grid !important}.d-inline-grid{display:inline-grid !important}.d-table{display:table !important}.d-table-row{display:table-row !important}.d-table-cell{display:table-cell !important}.d-flex{display:flex !important}.d-inline-flex{display:inline-flex !important}.d-none{display:none !important}.shadow{box-shadow:var(--bs-box-shadow) !important}.shadow-sm{box-shadow:var(--bs-box-shadow-sm) !important}.shadow-lg{box-shadow:var(--bs-box-shadow-lg) !important}.shadow-none{box-shadow:none !important}.focus-ring-primary{--bs-focus-ring-color: rgba(var(--bs-primary-rgb), var(--bs-focus-ring-opacity))}.focus-ring-secondary{--bs-focus-ring-color: rgba(var(--bs-secondary-rgb), var(--bs-focus-ring-opacity))}.focus-ring-success{--bs-focus-ring-color: rgba(var(--bs-success-rgb), var(--bs-focus-ring-opacity))}.focus-ring-info{--bs-focus-ring-color: rgba(var(--bs-info-rgb), var(--bs-focus-ring-opacity))}.focus-ring-warning{--bs-focus-ring-color: rgba(var(--bs-warning-rgb), var(--bs-focus-ring-opacity))}.focus-ring-danger{--bs-focus-ring-color: rgba(var(--bs-danger-rgb), var(--bs-focus-ring-opacity))}.focus-ring-light{--bs-focus-ring-color: rgba(var(--bs-light-rgb), var(--bs-focus-ring-opacity))}.focus-ring-dark{--bs-focus-ring-color: rgba(var(--bs-dark-rgb), var(--bs-focus-ring-opacity))}.position-static{position:static !important}.position-relative{position:relative !important}.position-absolute{position:absolute !important}.position-fixed{position:fixed !important}.position-sticky{position:sticky !important}.top-0{top:0 !important}.top-50{top:50% !important}.top-100{top:100% !important}.bottom-0{bottom:0 !important}.bottom-50{bottom:50% !important}.bottom-100{bottom:100% !important}.start-0{left:0 !important}.start-50{left:50% !important}.start-100{left:100% !important}.end-0{right:0 !important}.end-50{right:50% !important}.end-100{right:100% !important}.translate-middle{transform:translate(-50%, -50%) !important}.translate-middle-x{transform:translateX(-50%) !important}.translate-middle-y{transform:translateY(-50%) !important}.border{border:var(--bs-border-width) var(--bs-border-style) var(--bs-border-color) !important}.border-0{border:0 !important}.border-top{border-top:var(--bs-border-width) var(--bs-border-style) var(--bs-border-color) !important}.border-top-0{border-top:0 !important}.border-end{border-right:var(--bs-border-width) var(--bs-border-style) var(--bs-border-color) !important}.border-end-0{border-right:0 !important}.border-bottom{border-bottom:var(--bs-border-width) var(--bs-border-style) var(--bs-border-color) !important}.border-bottom-0{border-bottom:0 !important}.border-start{border-left:var(--bs-border-width) var(--bs-border-style) var(--bs-border-color) !important}.border-start-0{border-left:0 !important}.border-primary{--bs-border-opacity: 1;border-color:rgba(var(--bs-primary-rgb), var(--bs-border-opacity)) !important}.border-secondary{--bs-border-opacity: 1;border-color:rgba(var(--bs-secondary-rgb), var(--bs-border-opacity)) !important}.border-success{--bs-border-opacity: 1;border-color:rgba(var(--bs-success-rgb), var(--bs-border-opacity)) !important}.border-info{--bs-border-opacity: 1;border-color:rgba(var(--bs-info-rgb), var(--bs-border-opacity)) !important}.border-warning{--bs-border-opacity: 1;border-color:rgba(var(--bs-warning-rgb), var(--bs-border-opacity)) !important}.border-danger{--bs-border-opacity: 1;border-color:rgba(var(--bs-danger-rgb), var(--bs-border-opacity)) !important}.border-light{--bs-border-opacity: 1;border-color:rgba(var(--bs-light-rgb), var(--bs-border-opacity)) !important}.border-dark{--bs-border-opacity: 1;border-color:rgba(var(--bs-dark-rgb), var(--bs-border-opacity)) !important}.border-black{--bs-border-opacity: 1;border-color:rgba(var(--bs-black-rgb), var(--bs-border-opacity)) !important}.border-white{--bs-border-opacity: 1;border-color:rgba(var(--bs-white-rgb), var(--bs-border-opacity)) !important}.border-primary-subtle{border-color:var(--bs-primary-border-subtle) !important}.border-secondary-subtle{border-color:var(--bs-secondary-border-subtle) !important}.border-success-subtle{border-color:var(--bs-success-border-subtle) !important}.border-info-subtle{border-color:var(--bs-info-border-subtle) !important}.border-warning-subtle{border-color:var(--bs-warning-border-subtle) !important}.border-danger-subtle{border-color:var(--bs-danger-border-subtle) !important}.border-light-subtle{border-color:var(--bs-light-border-subtle) !important}.border-dark-subtle{border-color:var(--bs-dark-border-subtle) !important}.border-1{border-width:1px !important}.border-2{border-width:2px !important}.border-3{border-width:3px !important}.border-4{border-width:4px !important}.border-5{border-width:5px !important}.border-opacity-10{--bs-border-opacity: 0.1}.border-opacity-25{--bs-border-opacity: 0.25}.border-opacity-50{--bs-border-opacity: 0.5}.border-opacity-75{--bs-border-opacity: 0.75}.border-opacity-100{--bs-border-opacity: 1}.w-25{width:25% !important}.w-50{width:50% !important}.w-75{width:75% !important}.w-100{width:100% !important}.w-auto{width:auto !important}.mw-100{max-width:100% !important}.vw-100{width:100vw !important}.min-vw-100{min-width:100vw !important}.h-25{height:25% !important}.h-50{height:50% !important}.h-75{height:75% !important}.h-100{height:100% !important}.h-auto{height:auto !important}.mh-100{max-height:100% !important}.vh-100{height:100vh !important}.min-vh-100{min-height:100vh !important}.flex-fill{flex:1 1 auto !important}.flex-row{flex-direction:row !important}.flex-column{flex-direction:column !important}.flex-row-reverse{flex-direction:row-reverse !important}.flex-column-reverse{flex-direction:column-reverse !important}.flex-grow-0{flex-grow:0 !important}.flex-grow-1{flex-grow:1 !important}.flex-shrink-0{flex-shrink:0 !important}.flex-shrink-1{flex-shrink:1 !important}.flex-wrap{flex-wrap:wrap !important}.flex-nowrap{flex-wrap:nowrap !important}.flex-wrap-reverse{flex-wrap:wrap-reverse !important}.justify-content-start{justify-content:flex-start !important}.justify-content-end{justify-content:flex-end !important}.justify-content-center{justify-content:center !important}.justify-content-between{justify-content:space-between !important}.justify-content-around{justify-content:space-around !important}.justify-content-evenly{justify-content:space-evenly !important}.align-items-start{align-items:flex-start !important}.align-items-end{align-items:flex-end !important}.align-items-center{align-items:center !important}.align-items-baseline{align-items:baseline !important}.align-items-stretch{align-items:stretch !important}.align-content-start{align-content:flex-start !important}.align-content-end{align-content:flex-end !important}.align-content-center{align-content:center !important}.align-content-between{align-content:space-between !important}.align-content-around{align-content:space-around !important}.align-content-stretch{align-content:stretch !important}.align-self-auto{align-self:auto !important}.align-self-start{align-self:flex-start !important}.align-self-end{align-self:flex-end !important}.align-self-center{align-self:center !important}.align-self-baseline{align-self:baseline !important}.align-self-stretch{align-self:stretch !important}.order-first{order:-1 !important}.order-0{order:0 !important}.order-1{order:1 !important}.order-2{order:2 !important}.order-3{order:3 !important}.order-4{order:4 !important}.order-5{order:5 !important}.order-last{order:6 !important}.m-0{margin:0 !important}.m-1{margin:.25rem !important}.m-2{margin:.5rem !important}.m-3{margin:1rem !important}.m-4{margin:1.5rem !important}.m-5{margin:3rem !important}.m-auto{margin:auto !important}.mx-0{margin-right:0 !important;margin-left:0 !important}.mx-1{margin-right:.25rem !important;margin-left:.25rem !important}.mx-2{margin-right:.5rem !important;margin-left:.5rem !important}.mx-3{margin-right:1rem !important;margin-left:1rem !important}.mx-4{margin-right:1.5rem !important;margin-left:1.5rem !important}.mx-5{margin-right:3rem !important;margin-left:3rem !important}.mx-auto{margin-right:auto !important;margin-left:auto !important}.my-0{margin-top:0 !important;margin-bottom:0 !important}.my-1{margin-top:.25rem !important;margin-bottom:.25rem !important}.my-2{margin-top:.5rem !important;margin-bottom:.5rem !important}.my-3{margin-top:1rem !important;margin-bottom:1rem !important}.my-4{margin-top:1.5rem !important;margin-bottom:1.5rem !important}.my-5{margin-top:3rem !important;margin-bottom:3rem !important}.my-auto{margin-top:auto !important;margin-bottom:auto !important}.mt-0{margin-top:0 !important}.mt-1{margin-top:.25rem !important}.mt-2{margin-top:.5rem !important}.mt-3{margin-top:1rem !important}.mt-4{margin-top:1.5rem !important}.mt-5{margin-top:3rem !important}.mt-auto{margin-top:auto !important}.me-0{margin-right:0 !important}.me-1{margin-right:.25rem !important}.me-2{margin-right:.5rem !important}.me-3{margin-right:1rem !important}.me-4{margin-right:1.5rem !important}.me-5{margin-right:3rem !important}.me-auto{margin-right:auto !important}.mb-0{margin-bottom:0 !important}.mb-1{margin-bottom:.25rem !important}.mb-2{margin-bottom:.5rem !important}.mb-3{margin-bottom:1rem !important}.mb-4{margin-bottom:1.5rem !important}.mb-5{margin-bottom:3rem !important}.mb-auto{margin-bottom:auto !important}.ms-0{margin-left:0 !important}.ms-1{margin-left:.25rem !important}.ms-2{margin-left:.5rem !important}.ms-3{margin-left:1rem !important}.ms-4{margin-left:1.5rem !important}.ms-5{margin-left:3rem !important}.ms-auto{margin-left:auto !important}.p-0{padding:0 !important}.p-1{padding:.25rem !important}.p-2{padding:.5rem !important}.p-3{padding:1rem !important}.p-4{padding:1.5rem !important}.p-5{padding:3rem !important}.px-0{padding-right:0 !important;padding-left:0 !important}.px-1{padding-right:.25rem !important;padding-left:.25rem !important}.px-2{padding-right:.5rem !important;padding-left:.5rem !important}.px-3{padding-right:1rem !important;padding-left:1rem !important}.px-4{padding-right:1.5rem !important;padding-left:1.5rem !important}.px-5{padding-right:3rem !important;padding-left:3rem !important}.py-0{padding-top:0 !important;padding-bottom:0 !important}.py-1{padding-top:.25rem !important;padding-bottom:.25rem !important}.py-2{padding-top:.5rem !important;padding-bottom:.5rem !important}.py-3{padding-top:1rem !important;padding-bottom:1rem !important}.py-4{padding-top:1.5rem !important;padding-bottom:1.5rem !important}.py-5{padding-top:3rem !important;padding-bottom:3rem !important}.pt-0{padding-top:0 !important}.pt-1{padding-top:.25rem !important}.pt-2{padding-top:.5rem !important}.pt-3{padding-top:1rem !important}.pt-4{padding-top:1.5rem !important}.pt-5{padding-top:3rem !important}.pe-0{padding-right:0 !important}.pe-1{padding-right:.25rem !important}.pe-2{padding-right:.5rem !important}.pe-3{padding-right:1rem !important}.pe-4{padding-right:1.5rem !important}.pe-5{padding-right:3rem !important}.pb-0{padding-bottom:0 !important}.pb-1{padding-bottom:.25rem !important}.pb-2{padding-bottom:.5rem !important}.pb-3{padding-bottom:1rem !important}.pb-4{padding-bottom:1.5rem !important}.pb-5{padding-bottom:3rem !important}.ps-0{padding-left:0 !important}.ps-1{padding-left:.25rem !important}.ps-2{padding-left:.5rem !important}.ps-3{padding-left:1rem !important}.ps-4{padding-left:1.5rem !important}.ps-5{padding-left:3rem !important}.gap-0{gap:0 !important}.gap-1{gap:.25rem !important}.gap-2{gap:.5rem !important}.gap-3{gap:1rem !important}.gap-4{gap:1.5rem !important}.gap-5{gap:3rem !important}.row-gap-0{row-gap:0 !important}.row-gap-1{row-gap:.25rem !important}.row-gap-2{row-gap:.5rem !important}.row-gap-3{row-gap:1rem !important}.row-gap-4{row-gap:1.5rem !important}.row-gap-5{row-gap:3rem !important}.column-gap-0{column-gap:0 !important}.column-gap-1{column-gap:.25rem !important}.column-gap-2{column-gap:.5rem !important}.column-gap-3{column-gap:1rem !important}.column-gap-4{column-gap:1.5rem !important}.column-gap-5{column-gap:3rem !important}.font-monospace{font-family:var(--bs-font-monospace) !important}.fs-1{font-size:calc(1.375rem + 1.5vw) !important}.fs-2{font-size:calc(1.325rem + 0.9vw) !important}.fs-3{font-size:calc(1.3rem + 0.6vw) !important}.fs-4{font-size:calc(1.275rem + 0.3vw) !important}.fs-5{font-size:1.25rem !important}.fs-6{font-size:1rem !important}.fst-italic{font-style:italic !important}.fst-normal{font-style:normal !important}.fw-lighter{font-weight:lighter !important}.fw-light{font-weight:300 !important}.fw-normal{font-weight:400 !important}.fw-medium{font-weight:500 !important}.fw-semibold{font-weight:600 !important}.fw-bold{font-weight:700 !important}.fw-bolder{font-weight:bolder !important}.lh-1{line-height:1 !important}.lh-sm{line-height:1.25 !important}.lh-base{line-height:1.5 !important}.lh-lg{line-height:2 !important}.text-start{text-align:left !important}.text-end{text-align:right !important}.text-center{text-align:center !important}.text-decoration-none{text-decoration:none !important}.text-decoration-underline{text-decoration:underline !important}.text-decoration-line-through{text-decoration:line-through !important}.text-lowercase{text-transform:lowercase !important}.text-uppercase{text-transform:uppercase !important}.text-capitalize{text-transform:capitalize !important}.text-wrap{white-space:normal !important}.text-nowrap{white-space:nowrap !important}.text-break{word-wrap:break-word !important;word-break:break-word !important}.text-primary{--bs-text-opacity: 1;color:rgba(var(--bs-primary-rgb), var(--bs-text-opacity)) !important}.text-secondary{--bs-text-opacity: 1;color:rgba(var(--bs-secondary-rgb), var(--bs-text-opacity)) !important}.text-success{--bs-text-opacity: 1;color:rgba(var(--bs-success-rgb), var(--bs-text-opacity)) !important}.text-info{--bs-text-opacity: 1;color:rgba(var(--bs-info-rgb), var(--bs-text-opacity)) !important}.text-warning{--bs-text-opacity: 1;color:rgba(var(--bs-warning-rgb), var(--bs-text-opacity)) !important}.text-danger{--bs-text-opacity: 1;color:rgba(var(--bs-danger-rgb), var(--bs-text-opacity)) !important}.text-light{--bs-text-opacity: 1;color:rgba(var(--bs-light-rgb), var(--bs-text-opacity)) !important}.text-dark{--bs-text-opacity: 1;color:rgba(var(--bs-dark-rgb), var(--bs-text-opacity)) !important}.text-black{--bs-text-opacity: 1;color:rgba(var(--bs-black-rgb), var(--bs-text-opacity)) !important}.text-white{--bs-text-opacity: 1;color:rgba(var(--bs-white-rgb), var(--bs-text-opacity)) !important}.text-body{--bs-text-opacity: 1;color:rgba(var(--bs-body-color-rgb), var(--bs-text-opacity)) !important}.text-muted{--bs-text-opacity: 1;color:var(--bs-secondary-color) !important}.text-black-50{--bs-text-opacity: 1;color:rgba(0,0,0,.5) !important}.text-white-50{--bs-text-opacity: 1;color:rgba(255,255,255,.5) !important}.text-body-secondary{--bs-text-opacity: 1;color:var(--bs-secondary-color) !important}.text-body-tertiary{--bs-text-opacity: 1;color:var(--bs-tertiary-color) !important}.text-body-emphasis{--bs-text-opacity: 1;color:var(--bs-emphasis-color) !important}.text-reset{--bs-text-opacity: 1;color:inherit !important}.text-opacity-25{--bs-text-opacity: 0.25}.text-opacity-50{--bs-text-opacity: 0.5}.text-opacity-75{--bs-text-opacity: 0.75}.text-opacity-100{--bs-text-opacity: 1}.text-primary-emphasis{color:var(--bs-primary-text-emphasis) !important}.text-secondary-emphasis{color:var(--bs-secondary-text-emphasis) !important}.text-success-emphasis{color:var(--bs-success-text-emphasis) !important}.text-info-emphasis{color:var(--bs-info-text-emphasis) !important}.text-warning-emphasis{color:var(--bs-warning-text-emphasis) !important}.text-danger-emphasis{color:var(--bs-danger-text-emphasis) !important}.text-light-emphasis{color:var(--bs-light-text-emphasis) !important}.text-dark-emphasis{color:var(--bs-dark-text-emphasis) !important}.link-opacity-10{--bs-link-opacity: 0.1}.link-opacity-10-hover:hover{--bs-link-opacity: 0.1}.link-opacity-25{--bs-link-opacity: 0.25}.link-opacity-25-hover:hover{--bs-link-opacity: 0.25}.link-opacity-50{--bs-link-opacity: 0.5}.link-opacity-50-hover:hover{--bs-link-opacity: 0.5}.link-opacity-75{--bs-link-opacity: 0.75}.link-opacity-75-hover:hover{--bs-link-opacity: 0.75}.link-opacity-100{--bs-link-opacity: 1}.link-opacity-100-hover:hover{--bs-link-opacity: 1}.link-offset-1{text-underline-offset:.125em !important}.link-offset-1-hover:hover{text-underline-offset:.125em !important}.link-offset-2{text-underline-offset:.25em !important}.link-offset-2-hover:hover{text-underline-offset:.25em !important}.link-offset-3{text-underline-offset:.375em !important}.link-offset-3-hover:hover{text-underline-offset:.375em !important}.link-underline-primary{--bs-link-underline-opacity: 1;text-decoration-color:rgba(var(--bs-primary-rgb), var(--bs-link-underline-opacity)) !important}.link-underline-secondary{--bs-link-underline-opacity: 1;text-decoration-color:rgba(var(--bs-secondary-rgb), var(--bs-link-underline-opacity)) !important}.link-underline-success{--bs-link-underline-opacity: 1;text-decoration-color:rgba(var(--bs-success-rgb), var(--bs-link-underline-opacity)) !important}.link-underline-info{--bs-link-underline-opacity: 1;text-decoration-color:rgba(var(--bs-info-rgb), var(--bs-link-underline-opacity)) !important}.link-underline-warning{--bs-link-underline-opacity: 1;text-decoration-color:rgba(var(--bs-warning-rgb), var(--bs-link-underline-opacity)) !important}.link-underline-danger{--bs-link-underline-opacity: 1;text-decoration-color:rgba(var(--bs-danger-rgb), var(--bs-link-underline-opacity)) !important}.link-underline-light{--bs-link-underline-opacity: 1;text-decoration-color:rgba(var(--bs-light-rgb), var(--bs-link-underline-opacity)) !important}.link-underline-dark{--bs-link-underline-opacity: 1;text-decoration-color:rgba(var(--bs-dark-rgb), var(--bs-link-underline-opacity)) !important}.link-underline{--bs-link-underline-opacity: 1;text-decoration-color:rgba(var(--bs-link-color-rgb), var(--bs-link-underline-opacity, 1)) !important}.link-underline-opacity-0{--bs-link-underline-opacity: 0}.link-underline-opacity-0-hover:hover{--bs-link-underline-opacity: 0}.link-underline-opacity-10{--bs-link-underline-opacity: 0.1}.link-underline-opacity-10-hover:hover{--bs-link-underline-opacity: 0.1}.link-underline-opacity-25{--bs-link-underline-opacity: 0.25}.link-underline-opacity-25-hover:hover{--bs-link-underline-opacity: 0.25}.link-underline-opacity-50{--bs-link-underline-opacity: 0.5}.link-underline-opacity-50-hover:hover{--bs-link-underline-opacity: 0.5}.link-underline-opacity-75{--bs-link-underline-opacity: 0.75}.link-underline-opacity-75-hover:hover{--bs-link-underline-opacity: 0.75}.link-underline-opacity-100{--bs-link-underline-opacity: 1}.link-underline-opacity-100-hover:hover{--bs-link-underline-opacity: 1}.bg-primary{--bs-bg-opacity: 1;background-color:rgba(var(--bs-primary-rgb), var(--bs-bg-opacity)) !important}.bg-secondary{--bs-bg-opacity: 1;background-color:rgba(var(--bs-secondary-rgb), var(--bs-bg-opacity)) !important}.bg-success{--bs-bg-opacity: 1;background-color:rgba(var(--bs-success-rgb), var(--bs-bg-opacity)) !important}.bg-info{--bs-bg-opacity: 1;background-color:rgba(var(--bs-info-rgb), var(--bs-bg-opacity)) !important}.bg-warning{--bs-bg-opacity: 1;background-color:rgba(var(--bs-warning-rgb), var(--bs-bg-opacity)) !important}.bg-danger{--bs-bg-opacity: 1;background-color:rgba(var(--bs-danger-rgb), var(--bs-bg-opacity)) !important}.bg-light{--bs-bg-opacity: 1;background-color:rgba(var(--bs-light-rgb), var(--bs-bg-opacity)) !important}.bg-dark{--bs-bg-opacity: 1;background-color:rgba(var(--bs-dark-rgb), var(--bs-bg-opacity)) !important}.bg-black{--bs-bg-opacity: 1;background-color:rgba(var(--bs-black-rgb), var(--bs-bg-opacity)) !important}.bg-white{--bs-bg-opacity: 1;background-color:rgba(var(--bs-white-rgb), var(--bs-bg-opacity)) !important}.bg-body{--bs-bg-opacity: 1;background-color:rgba(var(--bs-body-bg-rgb), var(--bs-bg-opacity)) !important}.bg-transparent{--bs-bg-opacity: 1;background-color:rgba(0,0,0,0) !important}.bg-body-secondary{--bs-bg-opacity: 1;background-color:rgba(var(--bs-secondary-bg-rgb), var(--bs-bg-opacity)) !important}.bg-body-tertiary{--bs-bg-opacity: 1;background-color:rgba(var(--bs-tertiary-bg-rgb), var(--bs-bg-opacity)) !important}.bg-opacity-10{--bs-bg-opacity: 0.1}.bg-opacity-25{--bs-bg-opacity: 0.25}.bg-opacity-50{--bs-bg-opacity: 0.5}.bg-opacity-75{--bs-bg-opacity: 0.75}.bg-opacity-100{--bs-bg-opacity: 1}.bg-primary-subtle{background-color:var(--bs-primary-bg-subtle) !important}.bg-secondary-subtle{background-color:var(--bs-secondary-bg-subtle) !important}.bg-success-subtle{background-color:var(--bs-success-bg-subtle) !important}.bg-info-subtle{background-color:var(--bs-info-bg-subtle) !important}.bg-warning-subtle{background-color:var(--bs-warning-bg-subtle) !important}.bg-danger-subtle{background-color:var(--bs-danger-bg-subtle) !important}.bg-light-subtle{background-color:var(--bs-light-bg-subtle) !important}.bg-dark-subtle{background-color:var(--bs-dark-bg-subtle) !important}.bg-gradient{background-image:var(--bs-gradient) !important}.user-select-all{user-select:all !important}.user-select-auto{user-select:auto !important}.user-select-none{user-select:none !important}.pe-none{pointer-events:none !important}.pe-auto{pointer-events:auto !important}.rounded{border-radius:var(--bs-border-radius) !important}.rounded-0{border-radius:0 !important}.rounded-1{border-radius:var(--bs-border-radius-sm) !important}.rounded-2{border-radius:var(--bs-border-radius) !important}.rounded-3{border-radius:var(--bs-border-radius-lg) !important}.rounded-4{border-radius:var(--bs-border-radius-xl) !important}.rounded-5{border-radius:var(--bs-border-radius-xxl) !important}.rounded-circle{border-radius:50% !important}.rounded-pill{border-radius:var(--bs-border-radius-pill) !important}.rounded-top{border-top-left-radius:var(--bs-border-radius) !important;border-top-right-radius:var(--bs-border-radius) !important}.rounded-top-0{border-top-left-radius:0 !important;border-top-right-radius:0 !important}.rounded-top-1{border-top-left-radius:var(--bs-border-radius-sm) !important;border-top-right-radius:var(--bs-border-radius-sm) !important}.rounded-top-2{border-top-left-radius:var(--bs-border-radius) !important;border-top-right-radius:var(--bs-border-radius) !important}.rounded-top-3{border-top-left-radius:var(--bs-border-radius-lg) !important;border-top-right-radius:var(--bs-border-radius-lg) !important}.rounded-top-4{border-top-left-radius:var(--bs-border-radius-xl) !important;border-top-right-radius:var(--bs-border-radius-xl) !important}.rounded-top-5{border-top-left-radius:var(--bs-border-radius-xxl) !important;border-top-right-radius:var(--bs-border-radius-xxl) !important}.rounded-top-circle{border-top-left-radius:50% !important;border-top-right-radius:50% !important}.rounded-top-pill{border-top-left-radius:var(--bs-border-radius-pill) !important;border-top-right-radius:var(--bs-border-radius-pill) !important}.rounded-end{border-top-right-radius:var(--bs-border-radius) !important;border-bottom-right-radius:var(--bs-border-radius) !important}.rounded-end-0{border-top-right-radius:0 !important;border-bottom-right-radius:0 !important}.rounded-end-1{border-top-right-radius:var(--bs-border-radius-sm) !important;border-bottom-right-radius:var(--bs-border-radius-sm) !important}.rounded-end-2{border-top-right-radius:var(--bs-border-radius) !important;border-bottom-right-radius:var(--bs-border-radius) !important}.rounded-end-3{border-top-right-radius:var(--bs-border-radius-lg) !important;border-bottom-right-radius:var(--bs-border-radius-lg) !important}.rounded-end-4{border-top-right-radius:var(--bs-border-radius-xl) !important;border-bottom-right-radius:var(--bs-border-radius-xl) !important}.rounded-end-5{border-top-right-radius:var(--bs-border-radius-xxl) !important;border-bottom-right-radius:var(--bs-border-radius-xxl) !important}.rounded-end-circle{border-top-right-radius:50% !important;border-bottom-right-radius:50% !important}.rounded-end-pill{border-top-right-radius:var(--bs-border-radius-pill) !important;border-bottom-right-radius:var(--bs-border-radius-pill) !important}.rounded-bottom{border-bottom-right-radius:var(--bs-border-radius) !important;border-bottom-left-radius:var(--bs-border-radius) !important}.rounded-bottom-0{border-bottom-right-radius:0 !important;border-bottom-left-radius:0 !important}.rounded-bottom-1{border-bottom-right-radius:var(--bs-border-radius-sm) !important;border-bottom-left-radius:var(--bs-border-radius-sm) !important}.rounded-bottom-2{border-bottom-right-radius:var(--bs-border-radius) !important;border-bottom-left-radius:var(--bs-border-radius) !important}.rounded-bottom-3{border-bottom-right-radius:var(--bs-border-radius-lg) !important;border-bottom-left-radius:var(--bs-border-radius-lg) !important}.rounded-bottom-4{border-bottom-right-radius:var(--bs-border-radius-xl) !important;border-bottom-left-radius:var(--bs-border-radius-xl) !important}.rounded-bottom-5{border-bottom-right-radius:var(--bs-border-radius-xxl) !important;border-bottom-left-radius:var(--bs-border-radius-xxl) !important}.rounded-bottom-circle{border-bottom-right-radius:50% !important;border-bottom-left-radius:50% !important}.rounded-bottom-pill{border-bottom-right-radius:var(--bs-border-radius-pill) !important;border-bottom-left-radius:var(--bs-border-radius-pill) !important}.rounded-start{border-bottom-left-radius:var(--bs-border-radius) !important;border-top-left-radius:var(--bs-border-radius) !important}.rounded-start-0{border-bottom-left-radius:0 !important;border-top-left-radius:0 !important}.rounded-start-1{border-bottom-left-radius:var(--bs-border-radius-sm) !important;border-top-left-radius:var(--bs-border-radius-sm) !important}.rounded-start-2{border-bottom-left-radius:var(--bs-border-radius) !important;border-top-left-radius:var(--bs-border-radius) !important}.rounded-start-3{border-bottom-left-radius:var(--bs-border-radius-lg) !important;border-top-left-radius:var(--bs-border-radius-lg) !important}.rounded-start-4{border-bottom-left-radius:var(--bs-border-radius-xl) !important;border-top-left-radius:var(--bs-border-radius-xl) !important}.rounded-start-5{border-bottom-left-radius:var(--bs-border-radius-xxl) !important;border-top-left-radius:var(--bs-border-radius-xxl) !important}.rounded-start-circle{border-bottom-left-radius:50% !important;border-top-left-radius:50% !important}.rounded-start-pill{border-bottom-left-radius:var(--bs-border-radius-pill) !important;border-top-left-radius:var(--bs-border-radius-pill) !important}.visible{visibility:visible !important}.invisible{visibility:hidden !important}.z-n1{z-index:-1 !important}.z-0{z-index:0 !important}.z-1{z-index:1 !important}.z-2{z-index:2 !important}.z-3{z-index:3 !important}@media(min-width: 576px){.float-sm-start{float:left !important}.float-sm-end{float:right !important}.float-sm-none{float:none !important}.object-fit-sm-contain{object-fit:contain !important}.object-fit-sm-cover{object-fit:cover !important}.object-fit-sm-fill{object-fit:fill !important}.object-fit-sm-scale{object-fit:scale-down !important}.object-fit-sm-none{object-fit:none !important}.d-sm-inline{display:inline !important}.d-sm-inline-block{display:inline-block !important}.d-sm-block{display:block !important}.d-sm-grid{display:grid !important}.d-sm-inline-grid{display:inline-grid !important}.d-sm-table{display:table !important}.d-sm-table-row{display:table-row !important}.d-sm-table-cell{display:table-cell !important}.d-sm-flex{display:flex !important}.d-sm-inline-flex{display:inline-flex !important}.d-sm-none{display:none !important}.flex-sm-fill{flex:1 1 auto !important}.flex-sm-row{flex-direction:row !important}.flex-sm-column{flex-direction:column !important}.flex-sm-row-reverse{flex-direction:row-reverse !important}.flex-sm-column-reverse{flex-direction:column-reverse !important}.flex-sm-grow-0{flex-grow:0 !important}.flex-sm-grow-1{flex-grow:1 !important}.flex-sm-shrink-0{flex-shrink:0 !important}.flex-sm-shrink-1{flex-shrink:1 !important}.flex-sm-wrap{flex-wrap:wrap !important}.flex-sm-nowrap{flex-wrap:nowrap !important}.flex-sm-wrap-reverse{flex-wrap:wrap-reverse !important}.justify-content-sm-start{justify-content:flex-start !important}.justify-content-sm-end{justify-content:flex-end !important}.justify-content-sm-center{justify-content:center !important}.justify-content-sm-between{justify-content:space-between !important}.justify-content-sm-around{justify-content:space-around !important}.justify-content-sm-evenly{justify-content:space-evenly !important}.align-items-sm-start{align-items:flex-start !important}.align-items-sm-end{align-items:flex-end !important}.align-items-sm-center{align-items:center !important}.align-items-sm-baseline{align-items:baseline !important}.align-items-sm-stretch{align-items:stretch !important}.align-content-sm-start{align-content:flex-start !important}.align-content-sm-end{align-content:flex-end !important}.align-content-sm-center{align-content:center !important}.align-content-sm-between{align-content:space-between !important}.align-content-sm-around{align-content:space-around !important}.align-content-sm-stretch{align-content:stretch !important}.align-self-sm-auto{align-self:auto !important}.align-self-sm-start{align-self:flex-start !important}.align-self-sm-end{align-self:flex-end !important}.align-self-sm-center{align-self:center !important}.align-self-sm-baseline{align-self:baseline !important}.align-self-sm-stretch{align-self:stretch !important}.order-sm-first{order:-1 !important}.order-sm-0{order:0 !important}.order-sm-1{order:1 !important}.order-sm-2{order:2 !important}.order-sm-3{order:3 !important}.order-sm-4{order:4 !important}.order-sm-5{order:5 !important}.order-sm-last{order:6 !important}.m-sm-0{margin:0 !important}.m-sm-1{margin:.25rem !important}.m-sm-2{margin:.5rem !important}.m-sm-3{margin:1rem !important}.m-sm-4{margin:1.5rem !important}.m-sm-5{margin:3rem !important}.m-sm-auto{margin:auto !important}.mx-sm-0{margin-right:0 !important;margin-left:0 !important}.mx-sm-1{margin-right:.25rem !important;margin-left:.25rem !important}.mx-sm-2{margin-right:.5rem !important;margin-left:.5rem !important}.mx-sm-3{margin-right:1rem !important;margin-left:1rem !important}.mx-sm-4{margin-right:1.5rem !important;margin-left:1.5rem !important}.mx-sm-5{margin-right:3rem !important;margin-left:3rem !important}.mx-sm-auto{margin-right:auto !important;margin-left:auto !important}.my-sm-0{margin-top:0 !important;margin-bottom:0 !important}.my-sm-1{margin-top:.25rem !important;margin-bottom:.25rem !important}.my-sm-2{margin-top:.5rem !important;margin-bottom:.5rem !important}.my-sm-3{margin-top:1rem !important;margin-bottom:1rem !important}.my-sm-4{margin-top:1.5rem !important;margin-bottom:1.5rem !important}.my-sm-5{margin-top:3rem !important;margin-bottom:3rem !important}.my-sm-auto{margin-top:auto !important;margin-bottom:auto !important}.mt-sm-0{margin-top:0 !important}.mt-sm-1{margin-top:.25rem !important}.mt-sm-2{margin-top:.5rem !important}.mt-sm-3{margin-top:1rem !important}.mt-sm-4{margin-top:1.5rem !important}.mt-sm-5{margin-top:3rem !important}.mt-sm-auto{margin-top:auto !important}.me-sm-0{margin-right:0 !important}.me-sm-1{margin-right:.25rem !important}.me-sm-2{margin-right:.5rem !important}.me-sm-3{margin-right:1rem !important}.me-sm-4{margin-right:1.5rem !important}.me-sm-5{margin-right:3rem !important}.me-sm-auto{margin-right:auto !important}.mb-sm-0{margin-bottom:0 !important}.mb-sm-1{margin-bottom:.25rem !important}.mb-sm-2{margin-bottom:.5rem !important}.mb-sm-3{margin-bottom:1rem !important}.mb-sm-4{margin-bottom:1.5rem !important}.mb-sm-5{margin-bottom:3rem !important}.mb-sm-auto{margin-bottom:auto !important}.ms-sm-0{margin-left:0 !important}.ms-sm-1{margin-left:.25rem !important}.ms-sm-2{margin-left:.5rem !important}.ms-sm-3{margin-left:1rem !important}.ms-sm-4{margin-left:1.5rem !important}.ms-sm-5{margin-left:3rem !important}.ms-sm-auto{margin-left:auto !important}.p-sm-0{padding:0 !important}.p-sm-1{padding:.25rem !important}.p-sm-2{padding:.5rem !important}.p-sm-3{padding:1rem !important}.p-sm-4{padding:1.5rem !important}.p-sm-5{padding:3rem !important}.px-sm-0{padding-right:0 !important;padding-left:0 !important}.px-sm-1{padding-right:.25rem !important;padding-left:.25rem !important}.px-sm-2{padding-right:.5rem !important;padding-left:.5rem !important}.px-sm-3{padding-right:1rem !important;padding-left:1rem !important}.px-sm-4{padding-right:1.5rem !important;padding-left:1.5rem !important}.px-sm-5{padding-right:3rem !important;padding-left:3rem !important}.py-sm-0{padding-top:0 !important;padding-bottom:0 !important}.py-sm-1{padding-top:.25rem !important;padding-bottom:.25rem !important}.py-sm-2{padding-top:.5rem !important;padding-bottom:.5rem !important}.py-sm-3{padding-top:1rem !important;padding-bottom:1rem !important}.py-sm-4{padding-top:1.5rem !important;padding-bottom:1.5rem !important}.py-sm-5{padding-top:3rem !important;padding-bottom:3rem !important}.pt-sm-0{padding-top:0 !important}.pt-sm-1{padding-top:.25rem !important}.pt-sm-2{padding-top:.5rem !important}.pt-sm-3{padding-top:1rem !important}.pt-sm-4{padding-top:1.5rem !important}.pt-sm-5{padding-top:3rem !important}.pe-sm-0{padding-right:0 !important}.pe-sm-1{padding-right:.25rem !important}.pe-sm-2{padding-right:.5rem !important}.pe-sm-3{padding-right:1rem !important}.pe-sm-4{padding-right:1.5rem !important}.pe-sm-5{padding-right:3rem !important}.pb-sm-0{padding-bottom:0 !important}.pb-sm-1{padding-bottom:.25rem !important}.pb-sm-2{padding-bottom:.5rem !important}.pb-sm-3{padding-bottom:1rem !important}.pb-sm-4{padding-bottom:1.5rem !important}.pb-sm-5{padding-bottom:3rem !important}.ps-sm-0{padding-left:0 !important}.ps-sm-1{padding-left:.25rem !important}.ps-sm-2{padding-left:.5rem !important}.ps-sm-3{padding-left:1rem !important}.ps-sm-4{padding-left:1.5rem !important}.ps-sm-5{padding-left:3rem !important}.gap-sm-0{gap:0 !important}.gap-sm-1{gap:.25rem !important}.gap-sm-2{gap:.5rem !important}.gap-sm-3{gap:1rem !important}.gap-sm-4{gap:1.5rem !important}.gap-sm-5{gap:3rem !important}.row-gap-sm-0{row-gap:0 !important}.row-gap-sm-1{row-gap:.25rem !important}.row-gap-sm-2{row-gap:.5rem !important}.row-gap-sm-3{row-gap:1rem !important}.row-gap-sm-4{row-gap:1.5rem !important}.row-gap-sm-5{row-gap:3rem !important}.column-gap-sm-0{column-gap:0 !important}.column-gap-sm-1{column-gap:.25rem !important}.column-gap-sm-2{column-gap:.5rem !important}.column-gap-sm-3{column-gap:1rem !important}.column-gap-sm-4{column-gap:1.5rem !important}.column-gap-sm-5{column-gap:3rem !important}.text-sm-start{text-align:left !important}.text-sm-end{text-align:right !important}.text-sm-center{text-align:center !important}}@media(min-width: 768px){.float-md-start{float:left !important}.float-md-end{float:right !important}.float-md-none{float:none !important}.object-fit-md-contain{object-fit:contain !important}.object-fit-md-cover{object-fit:cover !important}.object-fit-md-fill{object-fit:fill !important}.object-fit-md-scale{object-fit:scale-down !important}.object-fit-md-none{object-fit:none !important}.d-md-inline{display:inline !important}.d-md-inline-block{display:inline-block !important}.d-md-block{display:block !important}.d-md-grid{display:grid !important}.d-md-inline-grid{display:inline-grid !important}.d-md-table{display:table !important}.d-md-table-row{display:table-row !important}.d-md-table-cell{display:table-cell !important}.d-md-flex{display:flex !important}.d-md-inline-flex{display:inline-flex !important}.d-md-none{display:none !important}.flex-md-fill{flex:1 1 auto !important}.flex-md-row{flex-direction:row !important}.flex-md-column{flex-direction:column !important}.flex-md-row-reverse{flex-direction:row-reverse !important}.flex-md-column-reverse{flex-direction:column-reverse !important}.flex-md-grow-0{flex-grow:0 !important}.flex-md-grow-1{flex-grow:1 !important}.flex-md-shrink-0{flex-shrink:0 !important}.flex-md-shrink-1{flex-shrink:1 !important}.flex-md-wrap{flex-wrap:wrap !important}.flex-md-nowrap{flex-wrap:nowrap !important}.flex-md-wrap-reverse{flex-wrap:wrap-reverse !important}.justify-content-md-start{justify-content:flex-start !important}.justify-content-md-end{justify-content:flex-end !important}.justify-content-md-center{justify-content:center !important}.justify-content-md-between{justify-content:space-between !important}.justify-content-md-around{justify-content:space-around !important}.justify-content-md-evenly{justify-content:space-evenly !important}.align-items-md-start{align-items:flex-start !important}.align-items-md-end{align-items:flex-end !important}.align-items-md-center{align-items:center !important}.align-items-md-baseline{align-items:baseline !important}.align-items-md-stretch{align-items:stretch !important}.align-content-md-start{align-content:flex-start !important}.align-content-md-end{align-content:flex-end !important}.align-content-md-center{align-content:center !important}.align-content-md-between{align-content:space-between !important}.align-content-md-around{align-content:space-around !important}.align-content-md-stretch{align-content:stretch !important}.align-self-md-auto{align-self:auto !important}.align-self-md-start{align-self:flex-start !important}.align-self-md-end{align-self:flex-end !important}.align-self-md-center{align-self:center !important}.align-self-md-baseline{align-self:baseline !important}.align-self-md-stretch{align-self:stretch !important}.order-md-first{order:-1 !important}.order-md-0{order:0 !important}.order-md-1{order:1 !important}.order-md-2{order:2 !important}.order-md-3{order:3 !important}.order-md-4{order:4 !important}.order-md-5{order:5 !important}.order-md-last{order:6 !important}.m-md-0{margin:0 !important}.m-md-1{margin:.25rem !important}.m-md-2{margin:.5rem !important}.m-md-3{margin:1rem !important}.m-md-4{margin:1.5rem !important}.m-md-5{margin:3rem !important}.m-md-auto{margin:auto !important}.mx-md-0{margin-right:0 !important;margin-left:0 !important}.mx-md-1{margin-right:.25rem !important;margin-left:.25rem !important}.mx-md-2{margin-right:.5rem !important;margin-left:.5rem !important}.mx-md-3{margin-right:1rem !important;margin-left:1rem !important}.mx-md-4{margin-right:1.5rem !important;margin-left:1.5rem !important}.mx-md-5{margin-right:3rem !important;margin-left:3rem !important}.mx-md-auto{margin-right:auto !important;margin-left:auto !important}.my-md-0{margin-top:0 !important;margin-bottom:0 !important}.my-md-1{margin-top:.25rem !important;margin-bottom:.25rem !important}.my-md-2{margin-top:.5rem !important;margin-bottom:.5rem !important}.my-md-3{margin-top:1rem !important;margin-bottom:1rem !important}.my-md-4{margin-top:1.5rem !important;margin-bottom:1.5rem !important}.my-md-5{margin-top:3rem !important;margin-bottom:3rem !important}.my-md-auto{margin-top:auto !important;margin-bottom:auto !important}.mt-md-0{margin-top:0 !important}.mt-md-1{margin-top:.25rem !important}.mt-md-2{margin-top:.5rem !important}.mt-md-3{margin-top:1rem !important}.mt-md-4{margin-top:1.5rem !important}.mt-md-5{margin-top:3rem !important}.mt-md-auto{margin-top:auto !important}.me-md-0{margin-right:0 !important}.me-md-1{margin-right:.25rem !important}.me-md-2{margin-right:.5rem !important}.me-md-3{margin-right:1rem !important}.me-md-4{margin-right:1.5rem !important}.me-md-5{margin-right:3rem !important}.me-md-auto{margin-right:auto !important}.mb-md-0{margin-bottom:0 !important}.mb-md-1{margin-bottom:.25rem !important}.mb-md-2{margin-bottom:.5rem !important}.mb-md-3{margin-bottom:1rem !important}.mb-md-4{margin-bottom:1.5rem !important}.mb-md-5{margin-bottom:3rem !important}.mb-md-auto{margin-bottom:auto !important}.ms-md-0{margin-left:0 !important}.ms-md-1{margin-left:.25rem !important}.ms-md-2{margin-left:.5rem !important}.ms-md-3{margin-left:1rem !important}.ms-md-4{margin-left:1.5rem !important}.ms-md-5{margin-left:3rem !important}.ms-md-auto{margin-left:auto !important}.p-md-0{padding:0 !important}.p-md-1{padding:.25rem !important}.p-md-2{padding:.5rem !important}.p-md-3{padding:1rem !important}.p-md-4{padding:1.5rem !important}.p-md-5{padding:3rem !important}.px-md-0{padding-right:0 !important;padding-left:0 !important}.px-md-1{padding-right:.25rem !important;padding-left:.25rem !important}.px-md-2{padding-right:.5rem !important;padding-left:.5rem !important}.px-md-3{padding-right:1rem !important;padding-left:1rem !important}.px-md-4{padding-right:1.5rem !important;padding-left:1.5rem !important}.px-md-5{padding-right:3rem !important;padding-left:3rem !important}.py-md-0{padding-top:0 !important;padding-bottom:0 !important}.py-md-1{padding-top:.25rem !important;padding-bottom:.25rem !important}.py-md-2{padding-top:.5rem !important;padding-bottom:.5rem !important}.py-md-3{padding-top:1rem !important;padding-bottom:1rem !important}.py-md-4{padding-top:1.5rem !important;padding-bottom:1.5rem !important}.py-md-5{padding-top:3rem !important;padding-bottom:3rem !important}.pt-md-0{padding-top:0 !important}.pt-md-1{padding-top:.25rem !important}.pt-md-2{padding-top:.5rem !important}.pt-md-3{padding-top:1rem !important}.pt-md-4{padding-top:1.5rem !important}.pt-md-5{padding-top:3rem !important}.pe-md-0{padding-right:0 !important}.pe-md-1{padding-right:.25rem !important}.pe-md-2{padding-right:.5rem !important}.pe-md-3{padding-right:1rem !important}.pe-md-4{padding-right:1.5rem !important}.pe-md-5{padding-right:3rem !important}.pb-md-0{padding-bottom:0 !important}.pb-md-1{padding-bottom:.25rem !important}.pb-md-2{padding-bottom:.5rem !important}.pb-md-3{padding-bottom:1rem !important}.pb-md-4{padding-bottom:1.5rem !important}.pb-md-5{padding-bottom:3rem !important}.ps-md-0{padding-left:0 !important}.ps-md-1{padding-left:.25rem !important}.ps-md-2{padding-left:.5rem !important}.ps-md-3{padding-left:1rem !important}.ps-md-4{padding-left:1.5rem !important}.ps-md-5{padding-left:3rem !important}.gap-md-0{gap:0 !important}.gap-md-1{gap:.25rem !important}.gap-md-2{gap:.5rem !important}.gap-md-3{gap:1rem !important}.gap-md-4{gap:1.5rem !important}.gap-md-5{gap:3rem !important}.row-gap-md-0{row-gap:0 !important}.row-gap-md-1{row-gap:.25rem !important}.row-gap-md-2{row-gap:.5rem !important}.row-gap-md-3{row-gap:1rem !important}.row-gap-md-4{row-gap:1.5rem !important}.row-gap-md-5{row-gap:3rem !important}.column-gap-md-0{column-gap:0 !important}.column-gap-md-1{column-gap:.25rem !important}.column-gap-md-2{column-gap:.5rem !important}.column-gap-md-3{column-gap:1rem !important}.column-gap-md-4{column-gap:1.5rem !important}.column-gap-md-5{column-gap:3rem !important}.text-md-start{text-align:left !important}.text-md-end{text-align:right !important}.text-md-center{text-align:center !important}}@media(min-width: 992px){.float-lg-start{float:left !important}.float-lg-end{float:right !important}.float-lg-none{float:none !important}.object-fit-lg-contain{object-fit:contain !important}.object-fit-lg-cover{object-fit:cover !important}.object-fit-lg-fill{object-fit:fill !important}.object-fit-lg-scale{object-fit:scale-down !important}.object-fit-lg-none{object-fit:none !important}.d-lg-inline{display:inline !important}.d-lg-inline-block{display:inline-block !important}.d-lg-block{display:block !important}.d-lg-grid{display:grid !important}.d-lg-inline-grid{display:inline-grid !important}.d-lg-table{display:table !important}.d-lg-table-row{display:table-row !important}.d-lg-table-cell{display:table-cell !important}.d-lg-flex{display:flex !important}.d-lg-inline-flex{display:inline-flex !important}.d-lg-none{display:none !important}.flex-lg-fill{flex:1 1 auto !important}.flex-lg-row{flex-direction:row !important}.flex-lg-column{flex-direction:column !important}.flex-lg-row-reverse{flex-direction:row-reverse !important}.flex-lg-column-reverse{flex-direction:column-reverse !important}.flex-lg-grow-0{flex-grow:0 !important}.flex-lg-grow-1{flex-grow:1 !important}.flex-lg-shrink-0{flex-shrink:0 !important}.flex-lg-shrink-1{flex-shrink:1 !important}.flex-lg-wrap{flex-wrap:wrap !important}.flex-lg-nowrap{flex-wrap:nowrap !important}.flex-lg-wrap-reverse{flex-wrap:wrap-reverse !important}.justify-content-lg-start{justify-content:flex-start !important}.justify-content-lg-end{justify-content:flex-end !important}.justify-content-lg-center{justify-content:center !important}.justify-content-lg-between{justify-content:space-between !important}.justify-content-lg-around{justify-content:space-around !important}.justify-content-lg-evenly{justify-content:space-evenly !important}.align-items-lg-start{align-items:flex-start !important}.align-items-lg-end{align-items:flex-end !important}.align-items-lg-center{align-items:center !important}.align-items-lg-baseline{align-items:baseline !important}.align-items-lg-stretch{align-items:stretch !important}.align-content-lg-start{align-content:flex-start !important}.align-content-lg-end{align-content:flex-end !important}.align-content-lg-center{align-content:center !important}.align-content-lg-between{align-content:space-between !important}.align-content-lg-around{align-content:space-around !important}.align-content-lg-stretch{align-content:stretch !important}.align-self-lg-auto{align-self:auto !important}.align-self-lg-start{align-self:flex-start !important}.align-self-lg-end{align-self:flex-end !important}.align-self-lg-center{align-self:center !important}.align-self-lg-baseline{align-self:baseline !important}.align-self-lg-stretch{align-self:stretch !important}.order-lg-first{order:-1 !important}.order-lg-0{order:0 !important}.order-lg-1{order:1 !important}.order-lg-2{order:2 !important}.order-lg-3{order:3 !important}.order-lg-4{order:4 !important}.order-lg-5{order:5 !important}.order-lg-last{order:6 !important}.m-lg-0{margin:0 !important}.m-lg-1{margin:.25rem !important}.m-lg-2{margin:.5rem !important}.m-lg-3{margin:1rem !important}.m-lg-4{margin:1.5rem !important}.m-lg-5{margin:3rem !important}.m-lg-auto{margin:auto !important}.mx-lg-0{margin-right:0 !important;margin-left:0 !important}.mx-lg-1{margin-right:.25rem !important;margin-left:.25rem !important}.mx-lg-2{margin-right:.5rem !important;margin-left:.5rem !important}.mx-lg-3{margin-right:1rem !important;margin-left:1rem !important}.mx-lg-4{margin-right:1.5rem !important;margin-left:1.5rem !important}.mx-lg-5{margin-right:3rem !important;margin-left:3rem !important}.mx-lg-auto{margin-right:auto !important;margin-left:auto !important}.my-lg-0{margin-top:0 !important;margin-bottom:0 !important}.my-lg-1{margin-top:.25rem !important;margin-bottom:.25rem !important}.my-lg-2{margin-top:.5rem !important;margin-bottom:.5rem !important}.my-lg-3{margin-top:1rem !important;margin-bottom:1rem !important}.my-lg-4{margin-top:1.5rem !important;margin-bottom:1.5rem !important}.my-lg-5{margin-top:3rem !important;margin-bottom:3rem !important}.my-lg-auto{margin-top:auto !important;margin-bottom:auto !important}.mt-lg-0{margin-top:0 !important}.mt-lg-1{margin-top:.25rem !important}.mt-lg-2{margin-top:.5rem !important}.mt-lg-3{margin-top:1rem !important}.mt-lg-4{margin-top:1.5rem !important}.mt-lg-5{margin-top:3rem !important}.mt-lg-auto{margin-top:auto !important}.me-lg-0{margin-right:0 !important}.me-lg-1{margin-right:.25rem !important}.me-lg-2{margin-right:.5rem !important}.me-lg-3{margin-right:1rem !important}.me-lg-4{margin-right:1.5rem !important}.me-lg-5{margin-right:3rem !important}.me-lg-auto{margin-right:auto !important}.mb-lg-0{margin-bottom:0 !important}.mb-lg-1{margin-bottom:.25rem !important}.mb-lg-2{margin-bottom:.5rem !important}.mb-lg-3{margin-bottom:1rem !important}.mb-lg-4{margin-bottom:1.5rem !important}.mb-lg-5{margin-bottom:3rem !important}.mb-lg-auto{margin-bottom:auto !important}.ms-lg-0{margin-left:0 !important}.ms-lg-1{margin-left:.25rem !important}.ms-lg-2{margin-left:.5rem !important}.ms-lg-3{margin-left:1rem !important}.ms-lg-4{margin-left:1.5rem !important}.ms-lg-5{margin-left:3rem !important}.ms-lg-auto{margin-left:auto !important}.p-lg-0{padding:0 !important}.p-lg-1{padding:.25rem !important}.p-lg-2{padding:.5rem !important}.p-lg-3{padding:1rem !important}.p-lg-4{padding:1.5rem !important}.p-lg-5{padding:3rem !important}.px-lg-0{padding-right:0 !important;padding-left:0 !important}.px-lg-1{padding-right:.25rem !important;padding-left:.25rem !important}.px-lg-2{padding-right:.5rem !important;padding-left:.5rem !important}.px-lg-3{padding-right:1rem !important;padding-left:1rem !important}.px-lg-4{padding-right:1.5rem !important;padding-left:1.5rem !important}.px-lg-5{padding-right:3rem !important;padding-left:3rem !important}.py-lg-0{padding-top:0 !important;padding-bottom:0 !important}.py-lg-1{padding-top:.25rem !important;padding-bottom:.25rem !important}.py-lg-2{padding-top:.5rem !important;padding-bottom:.5rem !important}.py-lg-3{padding-top:1rem !important;padding-bottom:1rem !important}.py-lg-4{padding-top:1.5rem !important;padding-bottom:1.5rem !important}.py-lg-5{padding-top:3rem !important;padding-bottom:3rem !important}.pt-lg-0{padding-top:0 !important}.pt-lg-1{padding-top:.25rem !important}.pt-lg-2{padding-top:.5rem !important}.pt-lg-3{padding-top:1rem !important}.pt-lg-4{padding-top:1.5rem !important}.pt-lg-5{padding-top:3rem !important}.pe-lg-0{padding-right:0 !important}.pe-lg-1{padding-right:.25rem !important}.pe-lg-2{padding-right:.5rem !important}.pe-lg-3{padding-right:1rem !important}.pe-lg-4{padding-right:1.5rem !important}.pe-lg-5{padding-right:3rem !important}.pb-lg-0{padding-bottom:0 !important}.pb-lg-1{padding-bottom:.25rem !important}.pb-lg-2{padding-bottom:.5rem !important}.pb-lg-3{padding-bottom:1rem !important}.pb-lg-4{padding-bottom:1.5rem !important}.pb-lg-5{padding-bottom:3rem !important}.ps-lg-0{padding-left:0 !important}.ps-lg-1{padding-left:.25rem !important}.ps-lg-2{padding-left:.5rem !important}.ps-lg-3{padding-left:1rem !important}.ps-lg-4{padding-left:1.5rem !important}.ps-lg-5{padding-left:3rem !important}.gap-lg-0{gap:0 !important}.gap-lg-1{gap:.25rem !important}.gap-lg-2{gap:.5rem !important}.gap-lg-3{gap:1rem !important}.gap-lg-4{gap:1.5rem !important}.gap-lg-5{gap:3rem !important}.row-gap-lg-0{row-gap:0 !important}.row-gap-lg-1{row-gap:.25rem !important}.row-gap-lg-2{row-gap:.5rem !important}.row-gap-lg-3{row-gap:1rem !important}.row-gap-lg-4{row-gap:1.5rem !important}.row-gap-lg-5{row-gap:3rem !important}.column-gap-lg-0{column-gap:0 !important}.column-gap-lg-1{column-gap:.25rem !important}.column-gap-lg-2{column-gap:.5rem !important}.column-gap-lg-3{column-gap:1rem !important}.column-gap-lg-4{column-gap:1.5rem !important}.column-gap-lg-5{column-gap:3rem !important}.text-lg-start{text-align:left !important}.text-lg-end{text-align:right !important}.text-lg-center{text-align:center !important}}@media(min-width: 1200px){.float-xl-start{float:left !important}.float-xl-end{float:right !important}.float-xl-none{float:none !important}.object-fit-xl-contain{object-fit:contain !important}.object-fit-xl-cover{object-fit:cover !important}.object-fit-xl-fill{object-fit:fill !important}.object-fit-xl-scale{object-fit:scale-down !important}.object-fit-xl-none{object-fit:none !important}.d-xl-inline{display:inline !important}.d-xl-inline-block{display:inline-block !important}.d-xl-block{display:block !important}.d-xl-grid{display:grid !important}.d-xl-inline-grid{display:inline-grid !important}.d-xl-table{display:table !important}.d-xl-table-row{display:table-row !important}.d-xl-table-cell{display:table-cell !important}.d-xl-flex{display:flex !important}.d-xl-inline-flex{display:inline-flex !important}.d-xl-none{display:none !important}.flex-xl-fill{flex:1 1 auto !important}.flex-xl-row{flex-direction:row !important}.flex-xl-column{flex-direction:column !important}.flex-xl-row-reverse{flex-direction:row-reverse !important}.flex-xl-column-reverse{flex-direction:column-reverse !important}.flex-xl-grow-0{flex-grow:0 !important}.flex-xl-grow-1{flex-grow:1 !important}.flex-xl-shrink-0{flex-shrink:0 !important}.flex-xl-shrink-1{flex-shrink:1 !important}.flex-xl-wrap{flex-wrap:wrap !important}.flex-xl-nowrap{flex-wrap:nowrap !important}.flex-xl-wrap-reverse{flex-wrap:wrap-reverse !important}.justify-content-xl-start{justify-content:flex-start !important}.justify-content-xl-end{justify-content:flex-end !important}.justify-content-xl-center{justify-content:center !important}.justify-content-xl-between{justify-content:space-between !important}.justify-content-xl-around{justify-content:space-around !important}.justify-content-xl-evenly{justify-content:space-evenly !important}.align-items-xl-start{align-items:flex-start !important}.align-items-xl-end{align-items:flex-end !important}.align-items-xl-center{align-items:center !important}.align-items-xl-baseline{align-items:baseline !important}.align-items-xl-stretch{align-items:stretch !important}.align-content-xl-start{align-content:flex-start !important}.align-content-xl-end{align-content:flex-end !important}.align-content-xl-center{align-content:center !important}.align-content-xl-between{align-content:space-between !important}.align-content-xl-around{align-content:space-around !important}.align-content-xl-stretch{align-content:stretch !important}.align-self-xl-auto{align-self:auto !important}.align-self-xl-start{align-self:flex-start !important}.align-self-xl-end{align-self:flex-end !important}.align-self-xl-center{align-self:center !important}.align-self-xl-baseline{align-self:baseline !important}.align-self-xl-stretch{align-self:stretch !important}.order-xl-first{order:-1 !important}.order-xl-0{order:0 !important}.order-xl-1{order:1 !important}.order-xl-2{order:2 !important}.order-xl-3{order:3 !important}.order-xl-4{order:4 !important}.order-xl-5{order:5 !important}.order-xl-last{order:6 !important}.m-xl-0{margin:0 !important}.m-xl-1{margin:.25rem !important}.m-xl-2{margin:.5rem !important}.m-xl-3{margin:1rem !important}.m-xl-4{margin:1.5rem !important}.m-xl-5{margin:3rem !important}.m-xl-auto{margin:auto !important}.mx-xl-0{margin-right:0 !important;margin-left:0 !important}.mx-xl-1{margin-right:.25rem !important;margin-left:.25rem !important}.mx-xl-2{margin-right:.5rem !important;margin-left:.5rem !important}.mx-xl-3{margin-right:1rem !important;margin-left:1rem !important}.mx-xl-4{margin-right:1.5rem !important;margin-left:1.5rem !important}.mx-xl-5{margin-right:3rem !important;margin-left:3rem !important}.mx-xl-auto{margin-right:auto !important;margin-left:auto !important}.my-xl-0{margin-top:0 !important;margin-bottom:0 !important}.my-xl-1{margin-top:.25rem !important;margin-bottom:.25rem !important}.my-xl-2{margin-top:.5rem !important;margin-bottom:.5rem !important}.my-xl-3{margin-top:1rem !important;margin-bottom:1rem !important}.my-xl-4{margin-top:1.5rem !important;margin-bottom:1.5rem !important}.my-xl-5{margin-top:3rem !important;margin-bottom:3rem !important}.my-xl-auto{margin-top:auto !important;margin-bottom:auto !important}.mt-xl-0{margin-top:0 !important}.mt-xl-1{margin-top:.25rem !important}.mt-xl-2{margin-top:.5rem !important}.mt-xl-3{margin-top:1rem !important}.mt-xl-4{margin-top:1.5rem !important}.mt-xl-5{margin-top:3rem !important}.mt-xl-auto{margin-top:auto !important}.me-xl-0{margin-right:0 !important}.me-xl-1{margin-right:.25rem !important}.me-xl-2{margin-right:.5rem !important}.me-xl-3{margin-right:1rem !important}.me-xl-4{margin-right:1.5rem !important}.me-xl-5{margin-right:3rem !important}.me-xl-auto{margin-right:auto !important}.mb-xl-0{margin-bottom:0 !important}.mb-xl-1{margin-bottom:.25rem !important}.mb-xl-2{margin-bottom:.5rem !important}.mb-xl-3{margin-bottom:1rem !important}.mb-xl-4{margin-bottom:1.5rem !important}.mb-xl-5{margin-bottom:3rem !important}.mb-xl-auto{margin-bottom:auto !important}.ms-xl-0{margin-left:0 !important}.ms-xl-1{margin-left:.25rem !important}.ms-xl-2{margin-left:.5rem !important}.ms-xl-3{margin-left:1rem !important}.ms-xl-4{margin-left:1.5rem !important}.ms-xl-5{margin-left:3rem !important}.ms-xl-auto{margin-left:auto !important}.p-xl-0{padding:0 !important}.p-xl-1{padding:.25rem !important}.p-xl-2{padding:.5rem !important}.p-xl-3{padding:1rem !important}.p-xl-4{padding:1.5rem !important}.p-xl-5{padding:3rem !important}.px-xl-0{padding-right:0 !important;padding-left:0 !important}.px-xl-1{padding-right:.25rem !important;padding-left:.25rem !important}.px-xl-2{padding-right:.5rem !important;padding-left:.5rem !important}.px-xl-3{padding-right:1rem !important;padding-left:1rem !important}.px-xl-4{padding-right:1.5rem !important;padding-left:1.5rem !important}.px-xl-5{padding-right:3rem !important;padding-left:3rem !important}.py-xl-0{padding-top:0 !important;padding-bottom:0 !important}.py-xl-1{padding-top:.25rem !important;padding-bottom:.25rem !important}.py-xl-2{padding-top:.5rem !important;padding-bottom:.5rem !important}.py-xl-3{padding-top:1rem !important;padding-bottom:1rem !important}.py-xl-4{padding-top:1.5rem !important;padding-bottom:1.5rem !important}.py-xl-5{padding-top:3rem !important;padding-bottom:3rem !important}.pt-xl-0{padding-top:0 !important}.pt-xl-1{padding-top:.25rem !important}.pt-xl-2{padding-top:.5rem !important}.pt-xl-3{padding-top:1rem !important}.pt-xl-4{padding-top:1.5rem !important}.pt-xl-5{padding-top:3rem !important}.pe-xl-0{padding-right:0 !important}.pe-xl-1{padding-right:.25rem !important}.pe-xl-2{padding-right:.5rem !important}.pe-xl-3{padding-right:1rem !important}.pe-xl-4{padding-right:1.5rem !important}.pe-xl-5{padding-right:3rem !important}.pb-xl-0{padding-bottom:0 !important}.pb-xl-1{padding-bottom:.25rem !important}.pb-xl-2{padding-bottom:.5rem !important}.pb-xl-3{padding-bottom:1rem !important}.pb-xl-4{padding-bottom:1.5rem !important}.pb-xl-5{padding-bottom:3rem !important}.ps-xl-0{padding-left:0 !important}.ps-xl-1{padding-left:.25rem !important}.ps-xl-2{padding-left:.5rem !important}.ps-xl-3{padding-left:1rem !important}.ps-xl-4{padding-left:1.5rem !important}.ps-xl-5{padding-left:3rem !important}.gap-xl-0{gap:0 !important}.gap-xl-1{gap:.25rem !important}.gap-xl-2{gap:.5rem !important}.gap-xl-3{gap:1rem !important}.gap-xl-4{gap:1.5rem !important}.gap-xl-5{gap:3rem !important}.row-gap-xl-0{row-gap:0 !important}.row-gap-xl-1{row-gap:.25rem !important}.row-gap-xl-2{row-gap:.5rem !important}.row-gap-xl-3{row-gap:1rem !important}.row-gap-xl-4{row-gap:1.5rem !important}.row-gap-xl-5{row-gap:3rem !important}.column-gap-xl-0{column-gap:0 !important}.column-gap-xl-1{column-gap:.25rem !important}.column-gap-xl-2{column-gap:.5rem !important}.column-gap-xl-3{column-gap:1rem !important}.column-gap-xl-4{column-gap:1.5rem !important}.column-gap-xl-5{column-gap:3rem !important}.text-xl-start{text-align:left !important}.text-xl-end{text-align:right !important}.text-xl-center{text-align:center !important}}@media(min-width: 1400px){.float-xxl-start{float:left !important}.float-xxl-end{float:right !important}.float-xxl-none{float:none !important}.object-fit-xxl-contain{object-fit:contain !important}.object-fit-xxl-cover{object-fit:cover !important}.object-fit-xxl-fill{object-fit:fill !important}.object-fit-xxl-scale{object-fit:scale-down !important}.object-fit-xxl-none{object-fit:none !important}.d-xxl-inline{display:inline !important}.d-xxl-inline-block{display:inline-block !important}.d-xxl-block{display:block !important}.d-xxl-grid{display:grid !important}.d-xxl-inline-grid{display:inline-grid !important}.d-xxl-table{display:table !important}.d-xxl-table-row{display:table-row !important}.d-xxl-table-cell{display:table-cell !important}.d-xxl-flex{display:flex !important}.d-xxl-inline-flex{display:inline-flex !important}.d-xxl-none{display:none !important}.flex-xxl-fill{flex:1 1 auto !important}.flex-xxl-row{flex-direction:row !important}.flex-xxl-column{flex-direction:column !important}.flex-xxl-row-reverse{flex-direction:row-reverse !important}.flex-xxl-column-reverse{flex-direction:column-reverse !important}.flex-xxl-grow-0{flex-grow:0 !important}.flex-xxl-grow-1{flex-grow:1 !important}.flex-xxl-shrink-0{flex-shrink:0 !important}.flex-xxl-shrink-1{flex-shrink:1 !important}.flex-xxl-wrap{flex-wrap:wrap !important}.flex-xxl-nowrap{flex-wrap:nowrap !important}.flex-xxl-wrap-reverse{flex-wrap:wrap-reverse !important}.justify-content-xxl-start{justify-content:flex-start !important}.justify-content-xxl-end{justify-content:flex-end !important}.justify-content-xxl-center{justify-content:center !important}.justify-content-xxl-between{justify-content:space-between !important}.justify-content-xxl-around{justify-content:space-around !important}.justify-content-xxl-evenly{justify-content:space-evenly !important}.align-items-xxl-start{align-items:flex-start !important}.align-items-xxl-end{align-items:flex-end !important}.align-items-xxl-center{align-items:center !important}.align-items-xxl-baseline{align-items:baseline !important}.align-items-xxl-stretch{align-items:stretch !important}.align-content-xxl-start{align-content:flex-start !important}.align-content-xxl-end{align-content:flex-end !important}.align-content-xxl-center{align-content:center !important}.align-content-xxl-between{align-content:space-between !important}.align-content-xxl-around{align-content:space-around !important}.align-content-xxl-stretch{align-content:stretch !important}.align-self-xxl-auto{align-self:auto !important}.align-self-xxl-start{align-self:flex-start !important}.align-self-xxl-end{align-self:flex-end !important}.align-self-xxl-center{align-self:center !important}.align-self-xxl-baseline{align-self:baseline !important}.align-self-xxl-stretch{align-self:stretch !important}.order-xxl-first{order:-1 !important}.order-xxl-0{order:0 !important}.order-xxl-1{order:1 !important}.order-xxl-2{order:2 !important}.order-xxl-3{order:3 !important}.order-xxl-4{order:4 !important}.order-xxl-5{order:5 !important}.order-xxl-last{order:6 !important}.m-xxl-0{margin:0 !important}.m-xxl-1{margin:.25rem !important}.m-xxl-2{margin:.5rem !important}.m-xxl-3{margin:1rem !important}.m-xxl-4{margin:1.5rem !important}.m-xxl-5{margin:3rem !important}.m-xxl-auto{margin:auto !important}.mx-xxl-0{margin-right:0 !important;margin-left:0 !important}.mx-xxl-1{margin-right:.25rem !important;margin-left:.25rem !important}.mx-xxl-2{margin-right:.5rem !important;margin-left:.5rem !important}.mx-xxl-3{margin-right:1rem !important;margin-left:1rem !important}.mx-xxl-4{margin-right:1.5rem !important;margin-left:1.5rem !important}.mx-xxl-5{margin-right:3rem !important;margin-left:3rem !important}.mx-xxl-auto{margin-right:auto !important;margin-left:auto !important}.my-xxl-0{margin-top:0 !important;margin-bottom:0 !important}.my-xxl-1{margin-top:.25rem !important;margin-bottom:.25rem !important}.my-xxl-2{margin-top:.5rem !important;margin-bottom:.5rem !important}.my-xxl-3{margin-top:1rem !important;margin-bottom:1rem !important}.my-xxl-4{margin-top:1.5rem !important;margin-bottom:1.5rem !important}.my-xxl-5{margin-top:3rem !important;margin-bottom:3rem !important}.my-xxl-auto{margin-top:auto !important;margin-bottom:auto !important}.mt-xxl-0{margin-top:0 !important}.mt-xxl-1{margin-top:.25rem !important}.mt-xxl-2{margin-top:.5rem !important}.mt-xxl-3{margin-top:1rem !important}.mt-xxl-4{margin-top:1.5rem !important}.mt-xxl-5{margin-top:3rem !important}.mt-xxl-auto{margin-top:auto !important}.me-xxl-0{margin-right:0 !important}.me-xxl-1{margin-right:.25rem !important}.me-xxl-2{margin-right:.5rem !important}.me-xxl-3{margin-right:1rem !important}.me-xxl-4{margin-right:1.5rem !important}.me-xxl-5{margin-right:3rem !important}.me-xxl-auto{margin-right:auto !important}.mb-xxl-0{margin-bottom:0 !important}.mb-xxl-1{margin-bottom:.25rem !important}.mb-xxl-2{margin-bottom:.5rem !important}.mb-xxl-3{margin-bottom:1rem !important}.mb-xxl-4{margin-bottom:1.5rem !important}.mb-xxl-5{margin-bottom:3rem !important}.mb-xxl-auto{margin-bottom:auto !important}.ms-xxl-0{margin-left:0 !important}.ms-xxl-1{margin-left:.25rem !important}.ms-xxl-2{margin-left:.5rem !important}.ms-xxl-3{margin-left:1rem !important}.ms-xxl-4{margin-left:1.5rem !important}.ms-xxl-5{margin-left:3rem !important}.ms-xxl-auto{margin-left:auto !important}.p-xxl-0{padding:0 !important}.p-xxl-1{padding:.25rem !important}.p-xxl-2{padding:.5rem !important}.p-xxl-3{padding:1rem !important}.p-xxl-4{padding:1.5rem !important}.p-xxl-5{padding:3rem !important}.px-xxl-0{padding-right:0 !important;padding-left:0 !important}.px-xxl-1{padding-right:.25rem !important;padding-left:.25rem !important}.px-xxl-2{padding-right:.5rem !important;padding-left:.5rem !important}.px-xxl-3{padding-right:1rem !important;padding-left:1rem !important}.px-xxl-4{padding-right:1.5rem !important;padding-left:1.5rem !important}.px-xxl-5{padding-right:3rem !important;padding-left:3rem !important}.py-xxl-0{padding-top:0 !important;padding-bottom:0 !important}.py-xxl-1{padding-top:.25rem !important;padding-bottom:.25rem !important}.py-xxl-2{padding-top:.5rem !important;padding-bottom:.5rem !important}.py-xxl-3{padding-top:1rem !important;padding-bottom:1rem !important}.py-xxl-4{padding-top:1.5rem !important;padding-bottom:1.5rem !important}.py-xxl-5{padding-top:3rem !important;padding-bottom:3rem !important}.pt-xxl-0{padding-top:0 !important}.pt-xxl-1{padding-top:.25rem !important}.pt-xxl-2{padding-top:.5rem !important}.pt-xxl-3{padding-top:1rem !important}.pt-xxl-4{padding-top:1.5rem !important}.pt-xxl-5{padding-top:3rem !important}.pe-xxl-0{padding-right:0 !important}.pe-xxl-1{padding-right:.25rem !important}.pe-xxl-2{padding-right:.5rem !important}.pe-xxl-3{padding-right:1rem !important}.pe-xxl-4{padding-right:1.5rem !important}.pe-xxl-5{padding-right:3rem !important}.pb-xxl-0{padding-bottom:0 !important}.pb-xxl-1{padding-bottom:.25rem !important}.pb-xxl-2{padding-bottom:.5rem !important}.pb-xxl-3{padding-bottom:1rem !important}.pb-xxl-4{padding-bottom:1.5rem !important}.pb-xxl-5{padding-bottom:3rem !important}.ps-xxl-0{padding-left:0 !important}.ps-xxl-1{padding-left:.25rem !important}.ps-xxl-2{padding-left:.5rem !important}.ps-xxl-3{padding-left:1rem !important}.ps-xxl-4{padding-left:1.5rem !important}.ps-xxl-5{padding-left:3rem !important}.gap-xxl-0{gap:0 !important}.gap-xxl-1{gap:.25rem !important}.gap-xxl-2{gap:.5rem !important}.gap-xxl-3{gap:1rem !important}.gap-xxl-4{gap:1.5rem !important}.gap-xxl-5{gap:3rem !important}.row-gap-xxl-0{row-gap:0 !important}.row-gap-xxl-1{row-gap:.25rem !important}.row-gap-xxl-2{row-gap:.5rem !important}.row-gap-xxl-3{row-gap:1rem !important}.row-gap-xxl-4{row-gap:1.5rem !important}.row-gap-xxl-5{row-gap:3rem !important}.column-gap-xxl-0{column-gap:0 !important}.column-gap-xxl-1{column-gap:.25rem !important}.column-gap-xxl-2{column-gap:.5rem !important}.column-gap-xxl-3{column-gap:1rem !important}.column-gap-xxl-4{column-gap:1.5rem !important}.column-gap-xxl-5{column-gap:3rem !important}.text-xxl-start{text-align:left !important}.text-xxl-end{text-align:right !important}.text-xxl-center{text-align:center !important}}@media(min-width: 1200px){.fs-1{font-size:2.5rem !important}.fs-2{font-size:2rem !important}.fs-3{font-size:1.75rem !important}.fs-4{font-size:1.5rem !important}}@media print{.d-print-inline{display:inline !important}.d-print-inline-block{display:inline-block !important}.d-print-block{display:block !important}.d-print-grid{display:grid !important}.d-print-inline-grid{display:inline-grid !important}.d-print-table{display:table !important}.d-print-table-row{display:table-row !important}.d-print-table-cell{display:table-cell !important}.d-print-flex{display:flex !important}.d-print-inline-flex{display:inline-flex !important}.d-print-none{display:none !important}}',""]);const s=a},1540:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(1601),i=n.n(r),o=n(6314),a=n.n(o)()(i());a.push([e.id,'.active-button{\n    background-color: #D3D3D3; /* Even Darker Grey */\n    transform: scale(0.98); /* Slightly scale down when pressed */\n    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2); /* Add some shadow on active */\n  }\n\n\n\n/* More */\n    /* Styling the container */\n    /* padding: 15px; */\n    .top-right {\n    position: fixed;\n    top: 0px;\n    right: 0px;\n    justify-content: space-around;\n    background-color: #f1f1f1;\n    border-radius: 0px;\n    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\n    display: flex;\n    align-items: center;\n    /* overflow: scroll; */\n    overflow: hidden;\n}\n\n/* Styling the input field */\n.top-right input[type="text"] {\n    padding: 5px;\n    margin-right: 10px;\n    border-radius: 4px;\n    border: 1px solid #ccc;\n}\n\n/* Styling the buttons */\n.top-right button {\n    background-color: #4CAF50; /* Green background */\n    color: white;\n    border: none;\n    padding: 8px 10px;\n    border-radius: 4px;\n    cursor: pointer;\n    margin-left: 5px;\n    display: flex;\n    align-items: center;\n}\n\n.top-right button:hover {\n    background-color: #45a049;\n}\n\n/* Adjusting sign out button */\n.signout-btn {\n    background-color: #f44336; /* Red background */\n}\n\n.signout-btn:hover {\n    background-color: #d32f2f;\n}\n\n/* Icon styling */\n.login-icon {\n    margin-right: 5px;\n}\n\n.btnThumbsActive{\n    background-color: #c0c0c0!important;\n}\n.btnThumbs-notDisabled{\n    /* background-color: #e0e0e0;; */\n}\n\n.btnThumbs-disabled{\n    /* background-color: #b0b0b0!important;; */\n}\n\n.btnThumbs-notDisabled:hover{\n    background-color: #d0d0d0;\n    cursor: pointer;\n}\n\n.btnThumbs{\n    flex: 1 1 0px;\n}\n\n.divOfLevelInfo{\n    overflow-x: show; \n    white-space: nowrap; \n    text-align: center; \n    justify-content:center;\n    display: flex;\n    row-gap: 5px;\n    flex-wrap: wrap;\n}\n.divOfLevelInfo>span{\n    flex: 51%;\n}\n@keyframes bounce {\n    0%, 20%, 50%, 80%, 100% { transform: scale(1); }\n    40% { transform: scale(1.05); }\n    60% { transform: scale(1.03); }\n    }\n.divGalleryLevelInfo {\n    /* transition: transform 0.3s ease; */\n    transition: box-shadow 0.3s ease, transform 0.3s ease;\n    cursor: pointer;\n\n}\n.divGalleryLevelInfo:hover {\n    transform: translateY(-5px);\n    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);\n    /* transform: scale(1.05); */\n    /* animation: bounce 0.5s; */\n    /* border: 2px solid #000; */\n}\n\n.bottom-panel {\n    background-color: #f8f9fa;\n    padding: 10px 20px;\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-top: 1px solid #dee2e6;\n}\n.arrow {\n    cursor: pointer;\n    font-size: 24px;\n    color: #007bff;\n    margin: 0 20px; /* Margin to space arrows from text */\n    transition: color 0.3s;\n}\n\n.arrow-enabled>.arrow:hover {\n    color: #0056b3; /* Darker on hover */\n}\n\n.arrow-disabled>.arrow{\n    color: #6c757d; /* Grey */\n    cursor: auto;;\n}\n\n#allItems{\n    width: 100%;\n    /* height: 100%; */\n    position: absolute;\n    top: 0;\n    left: 0;\n    /* display: grid; */\n    display: flex;\n    flex-wrap: wrap;\n    /* gap: 10px; */\n    grid-column-gap: 50px;\n    /* grid-column-start: 50px; */\n    align-items: center;\n    justify-content: center;\n    /* grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); */\n    grid-template-columns: repeat(auto-fill, 212.5px);\n}\n\n.qs_checkbox{\n    min-width: 100%;\n}',""]);const s=a},6314:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,i,o){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(a[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);r&&a[u[0]]||(void 0!==o&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=o),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),t.push(u))}},t}},1601:e=>{"use strict";e.exports=function(e){return e[1]}},9543:(e,t,n)=>{"use strict";var r=n(3644);function i(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}e.exports=function(e){var t=new i;t.pre=e.pre,t.body=e.body,t.post=e.post;var n=e.args.slice(0);t.argTypes=n;for(var o=0;o<n.length;++o){var a=n[o];if("array"===a||"object"==typeof a&&a.blockIndices){if(t.argTypes[o]="array",t.arrayArgs.push(o),t.arrayBlockIndices.push(a.blockIndices?a.blockIndices:0),t.shimArgs.push("array"+o),o<t.pre.args.length&&t.pre.args[o].count>0)throw new Error("cwise: pre() block may not reference array args");if(o<t.post.args.length&&t.post.args[o].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===a)t.scalarArgs.push(o),t.shimArgs.push("scalar"+o);else if("index"===a){if(t.indexArgs.push(o),o<t.pre.args.length&&t.pre.args[o].count>0)throw new Error("cwise: pre() block may not reference array index");if(o<t.body.args.length&&t.body.args[o].lvalue)throw new Error("cwise: body() block may not write to array index");if(o<t.post.args.length&&t.post.args[o].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===a){if(t.shapeArgs.push(o),o<t.pre.args.length&&t.pre.args[o].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(o<t.body.args.length&&t.body.args[o].lvalue)throw new Error("cwise: body() block may not write to array shape");if(o<t.post.args.length&&t.post.args[o].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof a||!a.offset)throw new Error("cwise: Unknown argument type "+n[o]);t.argTypes[o]="offset",t.offsetArgs.push({array:a.array,offset:a.offset}),t.offsetArgIndex.push(o)}}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>n.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>n.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>n.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,r(t)}},2121:(e,t,n)=>{"use strict";var r=n(7887);function i(e,t,n){var r,i,o=e.length,a=t.arrayArgs.length,s=t.indexArgs.length>0,l=[],c=[],u=0,p=0;for(r=0;r<o;++r)c.push(["i",r,"=0"].join(""));for(i=0;i<a;++i)for(r=0;r<o;++r)p=u,u=e[r],0===r?c.push(["d",i,"s",r,"=t",i,"p",u].join("")):c.push(["d",i,"s",r,"=(t",i,"p",u,"-s",p,"*t",i,"p",p,")"].join(""));for(c.length>0&&l.push("var "+c.join(",")),r=o-1;r>=0;--r)u=e[r],l.push(["for(i",r,"=0;i",r,"<s",u,";++i",r,"){"].join(""));for(l.push(n),r=0;r<o;++r){for(p=u,u=e[r],i=0;i<a;++i)l.push(["p",i,"+=d",i,"s",r].join(""));s&&(r>0&&l.push(["index[",p,"]-=s",p].join("")),l.push(["++index[",u,"]"].join(""))),l.push("}")}return l.join("\n")}function o(e,t,n){for(var r=e.body,i=[],o=[],a=0;a<e.args.length;++a){var s=e.args[a];if(!(s.count<=0)){var l=new RegExp(s.name,"g"),c="",u=t.arrayArgs.indexOf(a);switch(t.argTypes[a]){case"offset":var p=t.offsetArgIndex.indexOf(a);u=t.offsetArgs[p].array,c="+q"+p;case"array":c="p"+u+c;var d="l"+a,h="a"+u;if(0===t.arrayBlockIndices[u])1===s.count?"generic"===n[u]?s.lvalue?(i.push(["var ",d,"=",h,".get(",c,")"].join("")),r=r.replace(l,d),o.push([h,".set(",c,",",d,")"].join(""))):r=r.replace(l,[h,".get(",c,")"].join("")):r=r.replace(l,[h,"[",c,"]"].join("")):"generic"===n[u]?(i.push(["var ",d,"=",h,".get(",c,")"].join("")),r=r.replace(l,d),s.lvalue&&o.push([h,".set(",c,",",d,")"].join(""))):(i.push(["var ",d,"=",h,"[",c,"]"].join("")),r=r.replace(l,d),s.lvalue&&o.push([h,"[",c,"]=",d].join("")));else{for(var m=[s.name],f=[c],g=0;g<Math.abs(t.arrayBlockIndices[u]);g++)m.push("\\s*\\[([^\\]]+)\\]"),f.push("$"+(g+1)+"*t"+u+"b"+g);if(l=new RegExp(m.join(""),"g"),c=f.join("+"),"generic"===n[u])throw new Error("cwise: Generic arrays not supported in combination with blocks!");r=r.replace(l,[h,"[",c,"]"].join(""))}break;case"scalar":r=r.replace(l,"Y"+t.scalarArgs.indexOf(a));break;case"index":r=r.replace(l,"index");break;case"shape":r=r.replace(l,"shape")}}}return[i.join("\n"),r,o.join("\n")].join("\n").trim()}function a(e){for(var t=new Array(e.length),n=!0,r=0;r<e.length;++r){var i=e[r],o=i.match(/\d+/);o=o?o[0]:"",0===i.charAt(0)?t[r]="u"+i.charAt(1)+o:t[r]=i.charAt(0)+o,r>0&&(n=n&&t[r]===t[r-1])}return n?t[0]:t.join("")}e.exports=function(e,t){for(var n=t[1].length-Math.abs(e.arrayBlockIndices[0])|0,s=new Array(e.arrayArgs.length),l=new Array(e.arrayArgs.length),c=0;c<e.arrayArgs.length;++c)l[c]=t[2*c],s[c]=t[2*c+1];var u=[],p=[],d=[],h=[],m=[];for(c=0;c<e.arrayArgs.length;++c){e.arrayBlockIndices[c]<0?(d.push(0),h.push(n),u.push(n),p.push(n+e.arrayBlockIndices[c])):(d.push(e.arrayBlockIndices[c]),h.push(e.arrayBlockIndices[c]+n),u.push(0),p.push(e.arrayBlockIndices[c]));for(var f=[],g=0;g<s[c].length;g++)d[c]<=s[c][g]&&s[c][g]<h[c]&&f.push(s[c][g]-d[c]);m.push(f)}var y=["SS"],_=["'use strict'"],v=[];for(g=0;g<n;++g)v.push(["s",g,"=SS[",g,"]"].join(""));for(c=0;c<e.arrayArgs.length;++c){for(y.push("a"+c),y.push("t"+c),y.push("p"+c),g=0;g<n;++g)v.push(["t",c,"p",g,"=t",c,"[",d[c]+g,"]"].join(""));for(g=0;g<Math.abs(e.arrayBlockIndices[c]);++g)v.push(["t",c,"b",g,"=t",c,"[",u[c]+g,"]"].join(""))}for(c=0;c<e.scalarArgs.length;++c)y.push("Y"+c);if(e.shapeArgs.length>0&&v.push("shape=SS.slice(0)"),e.indexArgs.length>0){var b=new Array(n);for(c=0;c<n;++c)b[c]="0";v.push(["index=[",b.join(","),"]"].join(""))}for(c=0;c<e.offsetArgs.length;++c){var w=e.offsetArgs[c],x=[];for(g=0;g<w.offset.length;++g)0!==w.offset[g]&&(1===w.offset[g]?x.push(["t",w.array,"p",g].join("")):x.push([w.offset[g],"*t",w.array,"p",g].join("")));0===x.length?v.push("q"+c+"=0"):v.push(["q",c,"=",x.join("+")].join(""))}var S=r([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));for((v=v.concat(S)).length>0&&_.push("var "+v.join(",")),c=0;c<e.arrayArgs.length;++c)_.push("p"+c+"|=0");e.pre.body.length>3&&_.push(o(e.pre,e,l));var T=o(e.body,e,l),E=function(e){for(var t=0,n=e[0].length;t<n;){for(var r=1;r<e.length;++r)if(e[r][t]!==e[0][t])return t;++t}return t}(m);E<n?_.push(function(e,t,n,r){for(var o=t.length,a=n.arrayArgs.length,s=n.blockSize,l=n.indexArgs.length>0,c=[],u=0;u<a;++u)c.push(["var offset",u,"=p",u].join(""));for(u=e;u<o;++u)c.push(["for(var j"+u+"=SS[",t[u],"]|0;j",u,">0;){"].join("")),c.push(["if(j",u,"<",s,"){"].join("")),c.push(["s",t[u],"=j",u].join("")),c.push(["j",u,"=0"].join("")),c.push(["}else{s",t[u],"=",s].join("")),c.push(["j",u,"-=",s,"}"].join("")),l&&c.push(["index[",t[u],"]=j",u].join(""));for(u=0;u<a;++u){for(var p=["offset"+u],d=e;d<o;++d)p.push(["j",d,"*t",u,"p",t[d]].join(""));c.push(["p",u,"=(",p.join("+"),")"].join(""))}for(c.push(i(t,n,r)),u=e;u<o;++u)c.push("}");return c.join("\n")}(E,m[0],e,T)):_.push(i(m[0],e,T)),e.post.body.length>3&&_.push(o(e.post,e,l)),e.debug&&console.log("-----Generated cwise routine for ",t,":\n"+_.join("\n")+"\n----------");var I=[e.funcName||"unnamed","_cwise_loop_",s[0].join("s"),"m",E,a(l)].join("");return new Function(["function ",I,"(",y.join(","),"){",_.join("\n"),"} return ",I].join(""))()}},3644:(e,t,n)=>{"use strict";var r=n(2121);e.exports=function(e){var t=["'use strict'","var CACHED={}"],n=[],i=e.funcName+"_cwise_thunk";t.push(["return function ",i,"(",e.shimArgs.join(","),"){"].join(""));for(var o=[],a=[],s=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[0]),e.arrayBlockIndices[0]<0?","+e.arrayBlockIndices[0]+")":")"].join("")],l=[],c=[],u=0;u<e.arrayArgs.length;++u){var p=e.arrayArgs[u];n.push(["t",p,"=array",p,".dtype,","r",p,"=array",p,".order"].join("")),o.push("t"+p),o.push("r"+p),a.push("t"+p),a.push("r"+p+".join()"),s.push("array"+p+".data"),s.push("array"+p+".stride"),s.push("array"+p+".offset|0"),u>0&&(l.push("array"+e.arrayArgs[0]+".shape.length===array"+p+".shape.length+"+(Math.abs(e.arrayBlockIndices[0])-Math.abs(e.arrayBlockIndices[u]))),c.push("array"+e.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[0])+"]===array"+p+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[u])+"]"))}for(e.arrayArgs.length>1&&(t.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),t.push("for(var shapeIndex=array"+e.arrayArgs[0]+".shape.length-"+Math.abs(e.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),t.push("if (!("+c.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),t.push("}")),u=0;u<e.scalarArgs.length;++u)s.push("scalar"+e.scalarArgs[u]);return n.push(["type=[",a.join(","),"].join()"].join("")),n.push("proc=CACHED[type]"),t.push("var "+n.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",o.join(","),"])}","return proc(",s.join(","),")}"].join("")),e.debug&&console.log("-----Generated thunk:\n"+t.join("\n")+"\n----------"),new Function("compile",t.join("\n"))(r.bind(void 0,e))}},2086:(e,t,n)=>{"use strict";var r=n(7263),i=n(7887),o=0;function a(e,t,n){this.name=e,this.lvalue=t,this.rvalue=n,this.count=0}function s(e,t,n,r){this.body=e,this.args=t,this.thisVars=n,this.localVars=r}e.exports=function(e){for(var t=["(",e,")()"].join(""),l=r.parse(t,{range:!0}),c="_inline_"+o+++"_",u=function(e){for(var t=e.body[0].expression.callee.params,n=new Array(t.length),r=0;r<t.length;++r)n[r]=t[r].name;return n}(l),p=new Array(u.length),d=0;d<u.length;++d)p[d]=new a([c,"arg",d,"_"].join(""),!1,!1);for(var h=new Array(t.length),m=(d=0,t.length);d<m;++d)h[d]=t.charAt(d);var f,g=[],y=[];function _(e,t){for(var n=e.range[0],r=e.range[1],i=n+1;i<r;++i)h[i]="";h[n]=t}return function e(t,r){if(t.parent=r,"MemberExpression"===t.type)t.computed?(e(t.object,t),e(t.property,t)):"ThisExpression"===t.object.type?_(t,(v="this_"+t.property.name.replace(/\_/g,"__"),y.push(v),v)):e(t.object,t);else{if("ThisExpression"===t.type)throw new Error("cwise-parser: Computed this is not allowed");if("Identifier"===t.type){var i=t.name,o=u.indexOf(i);if(o>=0){var a=p[o],s=function(e){return"AssignmentExpression"===e.parent.type&&e.parent.left===e?"="===e.parent.operator?1:3:"UpdateExpression"===e.parent.type?3:2}(t);1&s&&(a.lvalue=!0),2&s&&(a.rvalue=!0),++a.count,_(t,a.name)}else(function(e){if("eval"===e)throw new Error("cwise-parser: eval() not allowed");return"undefined"!=typeof window?e in window:void 0!==n.g?e in n.g:"undefined"!=typeof self&&e in self})(i)||_(t,function(e){var t=c+e.replace(/\_/g,"__");return g.push(t),t}(i))}else if("Literal"===t.type)"string"==typeof t.value&&_(t,"'"+t.value.replace(/\_/g,"\\_").replace(/\'/g,"'")+"'");else{if("WithStatement"===t.type)throw new Error("cwise-parser: with() statements not allowed");for(var l=Object.keys(t),d=0,h=l.length;d<h;++d)if("parent"!==l[d]){var m=t[l[d]];if(m)if(m instanceof Array)for(var f=0;f<m.length;++f)m[f]&&"string"==typeof m[f].type&&e(m[f],t);else"string"==typeof m.type&&e(m,t)}}}var v}(l.body[0].expression.callee.body,void 0),i(g),i(y),new s((f=l.body[0].expression.callee.body,h.slice(f.range[0],f.range[1]).join("")),p,y,g)}},1713:(e,t,n)=>{"use strict";var r=n(2086),i=n(9543),o=["args","body"],a=["pre","post","printCode","funcName","blockSize"];e.exports=function(e){for(var t in e)o.indexOf(t)<0&&a.indexOf(t)<0&&console.warn("cwise: Unknown argument '"+t+"' passed to expression compiler");for(var n=0;n<o.length;++n)if(!e[o[n]])throw new Error("cwise: Missing argument: "+o[n]);return i({args:e.args,pre:r(e.pre||function(){}),body:r(e.body),post:r(e.post||function(){}),debug:!!e.printCode,funcName:e.funcName||e.body.name||"cwise",blockSize:e.blockSize||64})}},41:(e,t,n)=>{"use strict";var r=n(655),i=n(8068),o=n(9675),a=n(5795);e.exports=function(e,t,n){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new o("`obj` must be an object or a function`");if("string"!=typeof t&&"symbol"!=typeof t)throw new o("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new o("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new o("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new o("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new o("`loose`, if provided, must be a boolean");var s=arguments.length>3?arguments[3]:null,l=arguments.length>4?arguments[4]:null,c=arguments.length>5?arguments[5]:null,u=arguments.length>6&&arguments[6],p=!!a&&a(e,t);if(r)r(e,t,{configurable:null===c&&p?p.configurable:!c,enumerable:null===s&&p?p.enumerable:!s,value:n,writable:null===l&&p?p.writable:!l});else{if(!u&&(s||l||c))throw new i("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");e[t]=n}}},5343:e=>{"use strict";function t(e,n,r){var i=0|e[r];if(i<=0)return[];var o,a=new Array(i);if(r===e.length-1)for(o=0;o<i;++o)a[o]=n;else for(o=0;o<i;++o)a[o]=t(e,n,r+1);return a}e.exports=function(e,n){switch(void 0===n&&(n=0),typeof e){case"number":if(e>0)return function(e,t){var n,r;for(n=new Array(e),r=0;r<e;++r)n[r]=t;return n}(0|e,n);break;case"object":if("number"==typeof e.length)return t(e,n,0)}return[]}},655:(e,t,n)=>{"use strict";var r=n(453)("%Object.defineProperty%",!0)||!1;if(r)try{r({},"a",{value:1})}catch(e){r=!1}e.exports=r},1237:e=>{"use strict";e.exports=EvalError},9383:e=>{"use strict";e.exports=Error},9290:e=>{"use strict";e.exports=RangeError},9538:e=>{"use strict";e.exports=ReferenceError},8068:e=>{"use strict";e.exports=SyntaxError},9675:e=>{"use strict";e.exports=TypeError},5345:e=>{"use strict";e.exports=URIError},7263:function(e,t){var n,r;!function(){"use strict";n=function(e){var t,n,r,i,o,a,s,l,c,u,p,d,h,m,f,g,y,_;function v(e,t){if(!e)throw new Error("ASSERT: "+t)}function b(e){return e>=48&&e<=57}function w(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function x(e){return"01234567".indexOf(e)>=0}function S(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function T(e){return 10===e||13===e||8232===e||8233===e}function E(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&s.NonAsciiIdentifierStart.test(String.fromCharCode(e))}function I(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&s.NonAsciiIdentifierPart.test(String.fromCharCode(e))}function k(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function j(e){return"eval"===e||"arguments"===e}function A(e){if(u&&k(e))return!0;switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}}function C(e,t,n,r,i){var o;v("number"==typeof n,"Comment must have valid position"),y.lastCommentStart>=n||(y.lastCommentStart=n,o={type:e,value:t},_.range&&(o.range=[n,r]),_.loc&&(o.loc=i),_.comments.push(o),_.attachComment&&(_.leadingComments.push(o),_.trailingComments.push(o)))}function O(e){var t,n,r,i;for(t=p-e,n={start:{line:d,column:p-h-e}};p<m;)if(r=c.charCodeAt(p),++p,T(r))return _.comments&&(i=c.slice(t+e,p-1),n.end={line:d,column:p-h-1},C("Line",i,t,p-1,n)),13===r&&10===c.charCodeAt(p)&&++p,++d,void(h=p);_.comments&&(i=c.slice(t+e,p),n.end={line:d,column:p-h},C("Line",i,t,p,n))}function M(){var e,t,n,r;for(_.comments&&(e=p-2,t={start:{line:d,column:p-h-2}});p<m;)if(T(n=c.charCodeAt(p)))13===n&&10===c.charCodeAt(p+1)&&++p,++d,++p,h=p,p>=m&&K({},a.UnexpectedToken,"ILLEGAL");else if(42===n){if(47===c.charCodeAt(p+1))return++p,++p,void(_.comments&&(r=c.slice(e+2,p-2),t.end={line:d,column:p-h},C("Block",r,e,p,t)));++p}else++p;K({},a.UnexpectedToken,"ILLEGAL")}function N(){var e,t;for(t=0===p;p<m;)if(S(e=c.charCodeAt(p)))++p;else if(T(e))++p,13===e&&10===c.charCodeAt(p)&&++p,++d,h=p,t=!0;else if(47===e)if(47===(e=c.charCodeAt(p+1)))++p,++p,O(2),t=!0;else{if(42!==e)break;++p,++p,M()}else if(t&&45===e){if(45!==c.charCodeAt(p+1)||62!==c.charCodeAt(p+2))break;p+=3,O(3)}else{if(60!==e)break;if("!--"!==c.slice(p+1,p+4))break;++p,++p,++p,++p,O(4)}}function R(e){var t,n,r,i=0;for(n="u"===e?4:2,t=0;t<n;++t){if(!(p<m&&w(c[p])))return"";r=c[p++],i=16*i+"0123456789abcdef".indexOf(r.toLowerCase())}return String.fromCharCode(i)}function P(){var e,t;for(e=c.charCodeAt(p++),t=String.fromCharCode(e),92===e&&(117!==c.charCodeAt(p)&&K({},a.UnexpectedToken,"ILLEGAL"),++p,(e=R("u"))&&"\\"!==e&&E(e.charCodeAt(0))||K({},a.UnexpectedToken,"ILLEGAL"),t=e);p<m&&I(e=c.charCodeAt(p));)++p,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==c.charCodeAt(p)&&K({},a.UnexpectedToken,"ILLEGAL"),++p,(e=R("u"))&&"\\"!==e&&I(e.charCodeAt(0))||K({},a.UnexpectedToken,"ILLEGAL"),t+=e);return t}function D(){var e,t;for(e=p++;p<m;){if(92===(t=c.charCodeAt(p)))return p=e,P();if(!I(t))break;++p}return c.slice(e,p)}function L(){var e,n,r,i,o=p,s=c.charCodeAt(p),l=c[p];switch(s){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++p,_.tokenize&&(40===s?_.openParenToken=_.tokens.length:123===s&&(_.openCurlyToken=_.tokens.length)),{type:t.Punctuator,value:String.fromCharCode(s),lineNumber:d,lineStart:h,start:o,end:p};default:if(61===(e=c.charCodeAt(p+1)))switch(s){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return p+=2,{type:t.Punctuator,value:String.fromCharCode(s)+String.fromCharCode(e),lineNumber:d,lineStart:h,start:o,end:p};case 33:case 61:return p+=2,61===c.charCodeAt(p)&&++p,{type:t.Punctuator,value:c.slice(o,p),lineNumber:d,lineStart:h,start:o,end:p}}}return">>>="===(i=c.substr(p,4))?(p+=4,{type:t.Punctuator,value:i,lineNumber:d,lineStart:h,start:o,end:p}):">>>"===(r=i.substr(0,3))||"<<="===r||">>="===r?(p+=3,{type:t.Punctuator,value:r,lineNumber:d,lineStart:h,start:o,end:p}):l===(n=r.substr(0,2))[1]&&"+-<>&|".indexOf(l)>=0||"=>"===n?(p+=2,{type:t.Punctuator,value:n,lineNumber:d,lineStart:h,start:o,end:p}):"<>=!+-*%&|^/".indexOf(l)>=0?(++p,{type:t.Punctuator,value:l,lineNumber:d,lineStart:h,start:o,end:p}):void K({},a.UnexpectedToken,"ILLEGAL")}function F(){var e,n,r;if(v(b((r=c[p]).charCodeAt(0))||"."===r,"Numeric literal must start with a decimal digit or a decimal point"),n=p,e="","."!==r){if(e=c[p++],r=c[p],"0"===e){if("x"===r||"X"===r)return++p,function(e){for(var n="";p<m&&w(c[p]);)n+=c[p++];return 0===n.length&&K({},a.UnexpectedToken,"ILLEGAL"),E(c.charCodeAt(p))&&K({},a.UnexpectedToken,"ILLEGAL"),{type:t.NumericLiteral,value:parseInt("0x"+n,16),lineNumber:d,lineStart:h,start:e,end:p}}(n);if(x(r)&&function(){var e,t;for(e=p+1;e<m;++e){if("8"===(t=c[e])||"9"===t)return!1;if(!x(t))return!0}return!0}())return function(e){for(var n="0"+c[p++];p<m&&x(c[p]);)n+=c[p++];return(E(c.charCodeAt(p))||b(c.charCodeAt(p)))&&K({},a.UnexpectedToken,"ILLEGAL"),{type:t.NumericLiteral,value:parseInt(n,8),octal:!0,lineNumber:d,lineStart:h,start:e,end:p}}(n)}for(;b(c.charCodeAt(p));)e+=c[p++];r=c[p]}if("."===r){for(e+=c[p++];b(c.charCodeAt(p));)e+=c[p++];r=c[p]}if("e"===r||"E"===r)if(e+=c[p++],"+"!==(r=c[p])&&"-"!==r||(e+=c[p++]),b(c.charCodeAt(p)))for(;b(c.charCodeAt(p));)e+=c[p++];else K({},a.UnexpectedToken,"ILLEGAL");return E(c.charCodeAt(p))&&K({},a.UnexpectedToken,"ILLEGAL"),{type:t.NumericLiteral,value:parseFloat(e),lineNumber:d,lineStart:h,start:n,end:p}}function B(){var e,n,r,i;return g=null,N(),e=p,n=function(){var e,t,n,r;for(v("/"===(e=c[p]),"Regular expression literal must start with a slash"),t=c[p++],n=!1,r=!1;p<m;)if(t+=e=c[p++],"\\"===e)T((e=c[p++]).charCodeAt(0))&&K({},a.UnterminatedRegExp),t+=e;else if(T(e.charCodeAt(0)))K({},a.UnterminatedRegExp);else if(n)"]"===e&&(n=!1);else{if("/"===e){r=!0;break}"["===e&&(n=!0)}return r||K({},a.UnterminatedRegExp),{value:t.substr(1,t.length-2),literal:t}}(),r=function(){var e,t,n,r;for(t="",n="";p<m&&I((e=c[p]).charCodeAt(0));)if(++p,"\\"===e&&p<m)if("u"===(e=c[p])){if(r=++p,e=R("u"))for(n+=e,t+="\\u";r<p;++r)t+=c[r];else p=r,n+="u",t+="\\u";X({},a.UnexpectedToken,"ILLEGAL")}else t+="\\",X({},a.UnexpectedToken,"ILLEGAL");else n+=e,t+=e;return{value:n,literal:t}}(),i=function(e,t){var n;try{n=new RegExp(e,t)}catch(e){K({},a.InvalidRegExp)}return n}(n.value,r.value),_.tokenize?{type:t.RegularExpression,value:i,lineNumber:d,lineStart:h,start:e,end:p}:{literal:n.literal+r.literal,value:i,start:e,end:p}}function U(){var e,t,n,r;return N(),e=p,t={start:{line:d,column:p-h}},n=B(),t.end={line:d,column:p-h},_.tokenize||(_.tokens.length>0&&(r=_.tokens[_.tokens.length-1]).range[0]===e&&"Punctuator"===r.type&&("/"!==r.value&&"/="!==r.value||_.tokens.pop()),_.tokens.push({type:"RegularExpression",value:n.literal,range:[e,p],loc:t})),n}function V(){var e,n,i;return N(),p>=m?{type:t.EOF,lineNumber:d,lineStart:h,start:p,end:p}:E(e=c.charCodeAt(p))?(n=p,{type:1===(i=92===c.charCodeAt(p)?P():D()).length?t.Identifier:A(i)?t.Keyword:"null"===i?t.NullLiteral:"true"===i||"false"===i?t.BooleanLiteral:t.Identifier,value:i,lineNumber:d,lineStart:h,start:n,end:p}):40===e||41===e||59===e?L():39===e||34===e?function(){var e,n,r,i,o,s,l,u,f="",g=!1;for(l=d,u=h,v("'"===(e=c[p])||'"'===e,"String literal must starts with a quote"),n=p,++p;p<m;){if((r=c[p++])===e){e="";break}if("\\"===r)if((r=c[p++])&&T(r.charCodeAt(0)))++d,"\r"===r&&"\n"===c[p]&&++p,h=p;else switch(r){case"u":case"x":s=p,(o=R(r))?f+=o:(p=s,f+=r);break;case"n":f+="\n";break;case"r":f+="\r";break;case"t":f+="\t";break;case"b":f+="\b";break;case"f":f+="\f";break;case"v":f+="\v";break;default:x(r)?(0!==(i="01234567".indexOf(r))&&(g=!0),p<m&&x(c[p])&&(g=!0,i=8*i+"01234567".indexOf(c[p++]),"0123".indexOf(r)>=0&&p<m&&x(c[p])&&(i=8*i+"01234567".indexOf(c[p++]))),f+=String.fromCharCode(i)):f+=r}else{if(T(r.charCodeAt(0)))break;f+=r}}return""!==e&&K({},a.UnexpectedToken,"ILLEGAL"),{type:t.StringLiteral,value:f,octal:g,startLineNumber:l,startLineStart:u,lineNumber:d,lineStart:h,start:n,end:p}}():46===e?b(c.charCodeAt(p+1))?F():L():b(e)?F():_.tokenize&&47===e?function(){var e,t;if(!(e=_.tokens[_.tokens.length-1]))return U();if("Punctuator"===e.type){if("]"===e.value)return L();if(")"===e.value)return!(t=_.tokens[_.openParenToken-1])||"Keyword"!==t.type||"if"!==t.value&&"while"!==t.value&&"for"!==t.value&&"with"!==t.value?L():U();if("}"===e.value){if(_.tokens[_.openCurlyToken-3]&&"Keyword"===_.tokens[_.openCurlyToken-3].type){if(!(t=_.tokens[_.openCurlyToken-4]))return L()}else{if(!_.tokens[_.openCurlyToken-4]||"Keyword"!==_.tokens[_.openCurlyToken-4].type)return L();if(!(t=_.tokens[_.openCurlyToken-5]))return U()}return r.indexOf(t.value)>=0?L():U()}return U()}return"Keyword"===e.type&&"this"!==e.value?U():L()}():L()}function G(){var e,r,i;return N(),e={start:{line:d,column:p-h}},r=V(),e.end={line:d,column:p-h},r.type!==t.EOF&&(i=c.slice(r.start,r.end),_.tokens.push({type:n[r.type],value:i,range:[r.start,r.end],loc:e})),r}function z(){var e;return p=(e=g).end,d=e.lineNumber,h=e.lineStart,g=void 0!==_.tokens?G():V(),p=e.end,d=e.lineNumber,h=e.lineStart,e}function $(){var e,t,n;e=p,t=d,n=h,g=void 0!==_.tokens?G():V(),p=e,d=t,h=n}function q(e,t){this.line=e,this.column=t}function H(e,t,n,r){this.start=new q(e,t),this.end=new q(n,r)}function W(){var e,t,n,r;return e=p,t=d,n=h,N(),r=d!==t,p=e,d=t,h=n,r}function K(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(function(e,t){return v(t<r.length,"Message reference must be in range"),r[t]}));throw"number"==typeof e.lineNumber?((n=new Error("Line "+e.lineNumber+": "+i)).index=e.start,n.lineNumber=e.lineNumber,n.column=e.start-h+1):((n=new Error("Line "+d+": "+i)).index=p,n.lineNumber=d,n.column=p-h+1),n.description=i,n}function X(){try{K.apply(null,arguments)}catch(e){if(!_.errors)throw e;_.errors.push(e)}}function Y(e){if(e.type===t.EOF&&K(e,a.UnexpectedEOS),e.type===t.NumericLiteral&&K(e,a.UnexpectedNumber),e.type===t.StringLiteral&&K(e,a.UnexpectedString),e.type===t.Identifier&&K(e,a.UnexpectedIdentifier),e.type===t.Keyword){if(function(e){switch(e){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}(e.value))K(e,a.UnexpectedReserved);else if(u&&k(e.value))return void X(e,a.StrictReservedWord);K(e,a.UnexpectedToken,e.value)}K(e,a.UnexpectedToken,e.value)}function J(e){var n=z();n.type===t.Punctuator&&n.value===e||Y(n)}function Q(e){var n=z();n.type===t.Keyword&&n.value===e||Y(n)}function Z(e){return g.type===t.Punctuator&&g.value===e}function ee(e){return g.type===t.Keyword&&g.value===e}function te(){var e,n=p,r=d,i=h,o=g;if(59===c.charCodeAt(p)||Z(";"))z();else{if(e=d,N(),d!==e)return p=n,d=r,h=i,void(g=o);g.type===t.EOF||Z("}")||Y(g)}}function ne(e){return e.type===i.Identifier||e.type===i.MemberExpression}function re(e,t){var n,r,i;return n=u,i=g,r=Ie(),t&&u&&j(e[0].name)&&X(t,a.StrictParamName),u=n,f.markEnd(f.createFunctionExpression(null,e,[],r),i)}function ie(){var e,n;return n=g,(e=z()).type===t.StringLiteral||e.type===t.NumericLiteral?(u&&e.octal&&X(e,a.StrictOctalLiteral),f.markEnd(f.createLiteral(e),n)):f.markEnd(f.createIdentifier(e.value),n)}function oe(){var e,n,r,i,o,s;return s=g,(e=g).type===t.Identifier?(r=ie(),"get"!==e.value||Z(":")?"set"!==e.value||Z(":")?(J(":"),i=ge(),f.markEnd(f.createProperty("init",r,i),s)):(n=ie(),J("("),(e=g).type!==t.Identifier?(J(")"),X(e,a.UnexpectedToken,e.value),i=re([])):(o=[ve()],J(")"),i=re(o,e)),f.markEnd(f.createProperty("set",n,i),s)):(n=ie(),J("("),J(")"),i=re([]),f.markEnd(f.createProperty("get",n,i),s))):e.type!==t.EOF&&e.type!==t.Punctuator?(n=ie(),J(":"),i=ge(),f.markEnd(f.createProperty("init",n,i),s)):void Y(e)}function ae(){var e,n,r,s;if(Z("("))return function(){var e;return J("("),e=ye(),J(")"),e}();if(Z("["))return function(){var e,t=[];for(e=g,J("[");!Z("]");)Z(",")?(z(),t.push(null)):(t.push(ge()),Z("]")||J(","));return z(),f.markEnd(f.createArrayExpression(t),e)}();if(Z("{"))return function(){var e,t,n,r,s,l=[],c={},p=String;for(s=g,J("{");!Z("}");)t=(e=oe()).key.type===i.Identifier?e.key.name:p(e.key.value),r="init"===e.kind?o.Data:"get"===e.kind?o.Get:o.Set,n="$"+t,Object.prototype.hasOwnProperty.call(c,n)?(c[n]===o.Data?u&&r===o.Data?X({},a.StrictDuplicateProperty):r!==o.Data&&X({},a.AccessorDataProperty):r===o.Data?X({},a.AccessorDataProperty):c[n]&r&&X({},a.AccessorGetSet),c[n]|=r):c[n]=r,l.push(e),Z("}")||J(",");return J("}"),f.markEnd(f.createObjectExpression(l),s)}();if(e=g.type,s=g,e===t.Identifier)r=f.createIdentifier(z().value);else if(e===t.StringLiteral||e===t.NumericLiteral)u&&g.octal&&X(g,a.StrictOctalLiteral),r=f.createLiteral(z());else if(e===t.Keyword){if(ee("function"))return function(){var e,t,n,r,i,o,s,l,c=null,p=[];return l=g,Q("function"),Z("(")||(e=g,c=ve(),u?j(e.value)&&X(e,a.StrictFunctionName):j(e.value)?(n=e,r=a.StrictFunctionName):k(e.value)&&(n=e,r=a.StrictReservedWord)),p=(i=ke(n)).params,t=i.stricted,n=i.firstRestricted,i.message&&(r=i.message),s=u,o=Ie(),u&&n&&K(n,r),u&&t&&X(t,r),u=s,f.markEnd(f.createFunctionExpression(c,p,[],o),l)}();ee("this")?(z(),r=f.createThisExpression()):Y(z())}else e===t.BooleanLiteral?((n=z()).value="true"===n.value,r=f.createLiteral(n)):e===t.NullLiteral?((n=z()).value=null,r=f.createLiteral(n)):Z("/")||Z("/=")?(r=void 0!==_.tokens?f.createLiteral(U()):f.createLiteral(B()),$()):Y(z());return f.markEnd(r,s)}function se(){var e=[];if(J("("),!Z(")"))for(;p<m&&(e.push(ge()),!Z(")"));)J(",");return J(")"),e}function le(){var e,n;return n=g,function(e){return e.type===t.Identifier||e.type===t.Keyword||e.type===t.BooleanLiteral||e.type===t.NullLiteral}(e=z())||Y(e),f.markEnd(f.createIdentifier(e.value),n)}function ce(){return J("."),le()}function ue(){var e;return J("["),e=ye(),J("]"),e}function pe(){var e,t,n;return n=g,Q("new"),e=function(){var e,t,n;for(v(y.allowIn,"callee of new expression always allow in keyword."),n=g,e=ee("new")?pe():ae();Z(".")||Z("[");)Z("[")?(t=ue(),e=f.createMemberExpression("[",e,t)):(t=ce(),e=f.createMemberExpression(".",e,t)),f.markEnd(e,n);return e}(),t=Z("(")?se():[],f.markEnd(f.createNewExpression(e,t),n)}function de(){var e,n,r=g;return e=function(){var e,t,n,r,i=y.allowIn;for(r=g,y.allowIn=!0,e=ee("new")?pe():ae();;){if(Z("."))n=ce(),e=f.createMemberExpression(".",e,n);else if(Z("("))t=se(),e=f.createCallExpression(e,t);else{if(!Z("["))break;n=ue(),e=f.createMemberExpression("[",e,n)}f.markEnd(e,r)}return y.allowIn=i,e}(),g.type===t.Punctuator&&(!Z("++")&&!Z("--")||W()||(u&&e.type===i.Identifier&&j(e.name)&&X({},a.StrictLHSPostfix),ne(e)||X({},a.InvalidLHSInAssignment),n=z(),e=f.markEnd(f.createPostfixExpression(n.value,e),r))),e}function he(){var e,n,r;return g.type!==t.Punctuator&&g.type!==t.Keyword?n=de():Z("++")||Z("--")?(r=g,e=z(),n=he(),u&&n.type===i.Identifier&&j(n.name)&&X({},a.StrictLHSPrefix),ne(n)||X({},a.InvalidLHSInAssignment),n=f.createUnaryExpression(e.value,n),n=f.markEnd(n,r)):Z("+")||Z("-")||Z("~")||Z("!")?(r=g,e=z(),n=he(),n=f.createUnaryExpression(e.value,n),n=f.markEnd(n,r)):ee("delete")||ee("void")||ee("typeof")?(r=g,e=z(),n=he(),n=f.createUnaryExpression(e.value,n),n=f.markEnd(n,r),u&&"delete"===n.operator&&n.argument.type===i.Identifier&&X({},a.StrictDelete)):n=de(),n}function me(e,n){var r=0;if(e.type!==t.Punctuator&&e.type!==t.Keyword)return 0;switch(e.value){case"||":r=1;break;case"&&":r=2;break;case"|":r=3;break;case"^":r=4;break;case"&":r=5;break;case"==":case"!=":case"===":case"!==":r=6;break;case"<":case">":case"<=":case">=":case"instanceof":r=7;break;case"in":r=n?7:0;break;case"<<":case">>":case">>>":r=8;break;case"+":case"-":r=9;break;case"*":case"/":case"%":r=11}return r}function fe(){var e,t,n,r,i;return i=g,e=function(){var e,t,n,r,i,o,a,s,l,c;if(e=g,l=he(),0===(i=me(r=g,y.allowIn)))return l;for(r.prec=i,z(),t=[e,g],o=[l,r,a=he()];(i=me(g,y.allowIn))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)a=o.pop(),s=o.pop().value,l=o.pop(),n=f.createBinaryExpression(s,l,a),t.pop(),e=t[t.length-1],f.markEnd(n,e),o.push(n);(r=z()).prec=i,o.push(r),t.push(g),n=he(),o.push(n)}for(n=o[c=o.length-1],t.pop();c>1;)n=f.createBinaryExpression(o[c-1].value,o[c-2],n),c-=2,e=t.pop(),f.markEnd(n,e);return n}(),Z("?")&&(z(),t=y.allowIn,y.allowIn=!0,n=ge(),y.allowIn=t,J(":"),r=ge(),e=f.createConditionalExpression(e,n,r),f.markEnd(e,i)),e}function ge(){var e,n,r,o,s,l;return e=g,s=g,o=n=fe(),g.type===t.Punctuator&&("="===(l=g.value)||"*="===l||"/="===l||"%="===l||"+="===l||"-="===l||"<<="===l||">>="===l||">>>="===l||"&="===l||"^="===l||"|="===l)&&(ne(n)||X({},a.InvalidLHSInAssignment),u&&n.type===i.Identifier&&j(n.name)&&X(e,a.StrictLHSAssignment),e=z(),r=ge(),o=f.markEnd(f.createAssignmentExpression(e.value,n,r),s)),o}function ye(){var e,t=g;if(e=ge(),Z(",")){for(e=f.createSequenceExpression([e]);p<m&&Z(",");)z(),e.expressions.push(ge());f.markEnd(e,t)}return e}function _e(){var e,t;return t=g,J("{"),e=function(){for(var e,t=[];p<m&&!Z("}")&&void 0!==(e=Ae());)t.push(e);return t}(),J("}"),f.markEnd(f.createBlockStatement(e),t)}function ve(){var e,n;return n=g,(e=z()).type!==t.Identifier&&Y(e),f.markEnd(f.createIdentifier(e.value),n)}function be(e){var t,n,r=null;return n=g,t=ve(),u&&j(t.name)&&X({},a.StrictVarName),"const"===e?(J("="),r=ge()):Z("=")&&(z(),r=ge()),f.markEnd(f.createVariableDeclarator(t,r),n)}function we(e){var t=[];do{if(t.push(be(e)),!Z(","))break;z()}while(p<m);return t}function xe(){var e,t,n,r,i,o,s,l,c,u,p=y.allowIn;return e=t=n=null,Q("for"),J("("),Z(";")?z():(ee("var")||ee("let")?(y.allowIn=!1,u=g,l=z(),c=we(),e=f.markEnd(f.createVariableDeclaration(c,l.value),u),y.allowIn=p,1===e.declarations.length&&ee("in")&&(z(),r=e,i=ye(),e=null)):(y.allowIn=!1,e=ye(),y.allowIn=p,ee("in")&&(ne(e)||X({},a.InvalidLHSInForIn),z(),r=e,i=ye(),e=null)),void 0===r&&J(";")),void 0===r&&(Z(";")||(t=ye()),J(";"),Z(")")||(n=ye())),J(")"),s=y.inIteration,y.inIteration=!0,o=Ee(),y.inIteration=s,void 0===r?f.createForStatement(e,t,n,o):f.createForInStatement(r,i,o)}function Se(){var e,t,n,r=[];for(n=g,ee("default")?(z(),e=null):(Q("case"),e=ye()),J(":");p<m&&!(Z("}")||ee("default")||ee("case"));)t=Ee(),r.push(t);return f.markEnd(f.createSwitchCase(e,r),n)}function Te(){var e,t,n,r,i=[],o=null;return Q("try"),e=_e(),ee("catch")&&i.push((r=g,Q("catch"),J("("),Z(")")&&Y(g),t=ve(),u&&j(t.name)&&X({},a.StrictCatchVariable),J(")"),n=_e(),f.markEnd(f.createCatchClause(t,n),r))),ee("finally")&&(z(),o=_e()),0!==i.length||o||K({},a.NoCatchOrFinally),f.createTryStatement(e,[],i,o)}function Ee(){var e,n,r,o,s,l,d,h,_,v=g.type;if(v===t.EOF&&Y(g),v===t.Punctuator&&"{"===g.value)return _e();if(o=g,v===t.Punctuator)switch(g.value){case";":return f.markEnd((J(";"),f.createEmptyStatement()),o);case"(":return f.markEnd(function(){var e=ye();return te(),f.createExpressionStatement(e)}(),o)}if(v===t.Keyword)switch(g.value){case"break":return f.markEnd(function(){var e,n=null;return Q("break"),59===c.charCodeAt(p)?(z(),y.inIteration||y.inSwitch||K({},a.IllegalBreak),f.createBreakStatement(null)):W()?(y.inIteration||y.inSwitch||K({},a.IllegalBreak),f.createBreakStatement(null)):(g.type===t.Identifier&&(e="$"+(n=ve()).name,Object.prototype.hasOwnProperty.call(y.labelSet,e)||K({},a.UnknownLabel,n.name)),te(),null!==n||y.inIteration||y.inSwitch||K({},a.IllegalBreak),f.createBreakStatement(n))}(),o);case"continue":return f.markEnd(function(){var e,n=null;return Q("continue"),59===c.charCodeAt(p)?(z(),y.inIteration||K({},a.IllegalContinue),f.createContinueStatement(null)):W()?(y.inIteration||K({},a.IllegalContinue),f.createContinueStatement(null)):(g.type===t.Identifier&&(e="$"+(n=ve()).name,Object.prototype.hasOwnProperty.call(y.labelSet,e)||K({},a.UnknownLabel,n.name)),te(),null!==n||y.inIteration||K({},a.IllegalContinue),f.createContinueStatement(n))}(),o);case"debugger":return f.markEnd((Q("debugger"),te(),f.createDebuggerStatement()),o);case"do":return f.markEnd((Q("do"),_=y.inIteration,y.inIteration=!0,d=Ee(),y.inIteration=_,Q("while"),J("("),h=ye(),J(")"),Z(";")&&z(),f.createDoWhileStatement(d,h)),o);case"for":return f.markEnd(xe(),o);case"function":return f.markEnd(je(),o);case"if":return f.markEnd(function(){var e,t,n;return Q("if"),J("("),e=ye(),J(")"),t=Ee(),ee("else")?(z(),n=Ee()):n=null,f.createIfStatement(e,t,n)}(),o);case"return":return f.markEnd((l=null,Q("return"),y.inFunctionBody||X({},a.IllegalReturn),32===c.charCodeAt(p)&&E(c.charCodeAt(p+1))?(l=ye(),te(),f.createReturnStatement(l)):W()?f.createReturnStatement(null):(Z(";")||Z("}")||g.type===t.EOF||(l=ye()),te(),f.createReturnStatement(l))),o);case"switch":return f.markEnd(function(){var e,t,n,r,i;if(Q("switch"),J("("),e=ye(),J(")"),J("{"),t=[],Z("}"))return z(),f.createSwitchStatement(e,t);for(r=y.inSwitch,y.inSwitch=!0,i=!1;p<m&&!Z("}");)null===(n=Se()).test&&(i&&K({},a.MultipleDefaultsInSwitch),i=!0),t.push(n);return y.inSwitch=r,J("}"),f.createSwitchStatement(e,t)}(),o);case"throw":return f.markEnd(function(){var e;return Q("throw"),W()&&K({},a.NewlineAfterThrow),e=ye(),te(),f.createThrowStatement(e)}(),o);case"try":return f.markEnd(Te(),o);case"var":return f.markEnd((Q("var"),s=we(),te(),f.createVariableDeclaration(s,"var")),o);case"while":return f.markEnd(function(){var e,t,n;return Q("while"),J("("),e=ye(),J(")"),n=y.inIteration,y.inIteration=!0,t=Ee(),y.inIteration=n,f.createWhileStatement(e,t)}(),o);case"with":return f.markEnd(function(){var e,t;return u&&(N(),X({},a.StrictModeWith)),Q("with"),J("("),e=ye(),J(")"),t=Ee(),f.createWithStatement(e,t)}(),o)}return(e=ye()).type===i.Identifier&&Z(":")?(z(),r="$"+e.name,Object.prototype.hasOwnProperty.call(y.labelSet,r)&&K({},a.Redeclaration,"Label",e.name),y.labelSet[r]=!0,n=Ee(),delete y.labelSet[r],f.markEnd(f.createLabeledStatement(e,n),o)):(te(),f.markEnd(f.createExpressionStatement(e),o))}function Ie(){var e,n,r,o,s,l,d,h,_=[];for(h=g,J("{");p<m&&g.type===t.StringLiteral&&(n=g,e=Ae(),_.push(e),e.expression.type===i.Literal);)"use strict"===c.slice(n.start+1,n.end-1)?(u=!0,r&&X(r,a.StrictOctalLiteral)):!r&&n.octal&&(r=n);for(o=y.labelSet,s=y.inIteration,l=y.inSwitch,d=y.inFunctionBody,y.labelSet={},y.inIteration=!1,y.inSwitch=!1,y.inFunctionBody=!0;p<m&&!Z("}")&&void 0!==(e=Ae());)_.push(e);return J("}"),y.labelSet=o,y.inIteration=s,y.inSwitch=l,y.inFunctionBody=d,f.markEnd(f.createBlockStatement(_),h)}function ke(e){var t,n,r,i,o,s,l=[];if(J("("),!Z(")"))for(i={};p<m&&(n=g,t=ve(),o="$"+n.value,u?(j(n.value)&&(r=n,s=a.StrictParamName),Object.prototype.hasOwnProperty.call(i,o)&&(r=n,s=a.StrictParamDupe)):e||(j(n.value)?(e=n,s=a.StrictParamName):k(n.value)?(e=n,s=a.StrictReservedWord):Object.prototype.hasOwnProperty.call(i,o)&&(e=n,s=a.StrictParamDupe)),l.push(t),i[o]=!0,!Z(")"));)J(",");return J(")"),{params:l,stricted:r,firstRestricted:e,message:s}}function je(){var e,t,n,r,i,o,s,l,c,p;return c=g,Q("function"),n=g,e=ve(),u?j(n.value)&&X(n,a.StrictFunctionName):j(n.value)?(o=n,s=a.StrictFunctionName):k(n.value)&&(o=n,s=a.StrictReservedWord),p=(i=ke(o)).params,r=i.stricted,o=i.firstRestricted,i.message&&(s=i.message),l=u,t=Ie(),u&&o&&K(o,s),u&&r&&X(r,s),u=l,f.markEnd(f.createFunctionDeclaration(e,p,[],t),c)}function Ae(){if(g.type===t.Keyword)switch(g.value){case"const":case"let":return e=g.value,r=g,Q(e),n=we(e),te(),f.markEnd(f.createVariableDeclaration(n,e),r);case"function":return je();default:return Ee()}var e,n,r;if(g.type!==t.EOF)return Ee()}function Ce(){var e,n;return N(),$(),n=g,u=!1,e=function(){for(var e,n,r,o=[];p<m&&(n=g).type===t.StringLiteral&&(e=Ae(),o.push(e),e.expression.type===i.Literal);)"use strict"===c.slice(n.start+1,n.end-1)?(u=!0,r&&X(r,a.StrictOctalLiteral)):!r&&n.octal&&(r=n);for(;p<m&&void 0!==(e=Ae());)o.push(e);return o}(),f.markEnd(f.createProgram(e),n)}function Oe(){var e,t,n,r=[];for(e=0;e<_.tokens.length;++e)n={type:(t=_.tokens[e]).type,value:t.value},_.range&&(n.range=t.range),_.loc&&(n.loc=t.loc),r.push(n);_.tokens=r}(n={})[(t={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9}).BooleanLiteral]="Boolean",n[t.EOF]="<end>",n[t.Identifier]="Identifier",n[t.Keyword]="Keyword",n[t.NullLiteral]="Null",n[t.NumericLiteral]="Numeric",n[t.Punctuator]="Punctuator",n[t.StringLiteral]="String",n[t.RegularExpression]="RegularExpression",r=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],i={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},o={Data:1,Get:2,Set:4},a={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},s={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")},l={name:"SyntaxTree",processComment:function(e){var t,n;if(!(e.type===i.Program&&e.body.length>0)){for(_.trailingComments.length>0?_.trailingComments[0].range[0]>=e.range[1]?(n=_.trailingComments,_.trailingComments=[]):_.trailingComments.length=0:_.bottomRightStack.length>0&&_.bottomRightStack[_.bottomRightStack.length-1].trailingComments&&_.bottomRightStack[_.bottomRightStack.length-1].trailingComments[0].range[0]>=e.range[1]&&(n=_.bottomRightStack[_.bottomRightStack.length-1].trailingComments,delete _.bottomRightStack[_.bottomRightStack.length-1].trailingComments);_.bottomRightStack.length>0&&_.bottomRightStack[_.bottomRightStack.length-1].range[0]>=e.range[0];)t=_.bottomRightStack.pop();t?t.leadingComments&&t.leadingComments[t.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=t.leadingComments,delete t.leadingComments):_.leadingComments.length>0&&_.leadingComments[_.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=_.leadingComments,_.leadingComments=[]),n&&(e.trailingComments=n),_.bottomRightStack.push(e)}},markEnd:function(e,t){return _.range&&(e.range=[t.start,p]),_.loc&&(e.loc=new H(void 0===t.startLineNumber?t.lineNumber:t.startLineNumber,t.start-(void 0===t.startLineStart?t.lineStart:t.startLineStart),d,p-h),this.postProcess(e)),_.attachComment&&this.processComment(e),e},postProcess:function(e){return _.source&&(e.loc.source=_.source),e},createArrayExpression:function(e){return{type:i.ArrayExpression,elements:e}},createAssignmentExpression:function(e,t,n){return{type:i.AssignmentExpression,operator:e,left:t,right:n}},createBinaryExpression:function(e,t,n){return{type:"||"===e||"&&"===e?i.LogicalExpression:i.BinaryExpression,operator:e,left:t,right:n}},createBlockStatement:function(e){return{type:i.BlockStatement,body:e}},createBreakStatement:function(e){return{type:i.BreakStatement,label:e}},createCallExpression:function(e,t){return{type:i.CallExpression,callee:e,arguments:t}},createCatchClause:function(e,t){return{type:i.CatchClause,param:e,body:t}},createConditionalExpression:function(e,t,n){return{type:i.ConditionalExpression,test:e,consequent:t,alternate:n}},createContinueStatement:function(e){return{type:i.ContinueStatement,label:e}},createDebuggerStatement:function(){return{type:i.DebuggerStatement}},createDoWhileStatement:function(e,t){return{type:i.DoWhileStatement,body:e,test:t}},createEmptyStatement:function(){return{type:i.EmptyStatement}},createExpressionStatement:function(e){return{type:i.ExpressionStatement,expression:e}},createForStatement:function(e,t,n,r){return{type:i.ForStatement,init:e,test:t,update:n,body:r}},createForInStatement:function(e,t,n){return{type:i.ForInStatement,left:e,right:t,body:n,each:!1}},createFunctionDeclaration:function(e,t,n,r){return{type:i.FunctionDeclaration,id:e,params:t,defaults:n,body:r,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(e,t,n,r){return{type:i.FunctionExpression,id:e,params:t,defaults:n,body:r,rest:null,generator:!1,expression:!1}},createIdentifier:function(e){return{type:i.Identifier,name:e}},createIfStatement:function(e,t,n){return{type:i.IfStatement,test:e,consequent:t,alternate:n}},createLabeledStatement:function(e,t){return{type:i.LabeledStatement,label:e,body:t}},createLiteral:function(e){return{type:i.Literal,value:e.value,raw:c.slice(e.start,e.end)}},createMemberExpression:function(e,t,n){return{type:i.MemberExpression,computed:"["===e,object:t,property:n}},createNewExpression:function(e,t){return{type:i.NewExpression,callee:e,arguments:t}},createObjectExpression:function(e){return{type:i.ObjectExpression,properties:e}},createPostfixExpression:function(e,t){return{type:i.UpdateExpression,operator:e,argument:t,prefix:!1}},createProgram:function(e){return{type:i.Program,body:e}},createProperty:function(e,t,n){return{type:i.Property,key:t,value:n,kind:e}},createReturnStatement:function(e){return{type:i.ReturnStatement,argument:e}},createSequenceExpression:function(e){return{type:i.SequenceExpression,expressions:e}},createSwitchCase:function(e,t){return{type:i.SwitchCase,test:e,consequent:t}},createSwitchStatement:function(e,t){return{type:i.SwitchStatement,discriminant:e,cases:t}},createThisExpression:function(){return{type:i.ThisExpression}},createThrowStatement:function(e){return{type:i.ThrowStatement,argument:e}},createTryStatement:function(e,t,n,r){return{type:i.TryStatement,block:e,guardedHandlers:t,handlers:n,finalizer:r}},createUnaryExpression:function(e,t){return"++"===e||"--"===e?{type:i.UpdateExpression,operator:e,argument:t,prefix:!0}:{type:i.UnaryExpression,operator:e,argument:t,prefix:!0}},createVariableDeclaration:function(e,t){return{type:i.VariableDeclaration,declarations:e,kind:t}},createVariableDeclarator:function(e,t){return{type:i.VariableDeclarator,id:e,init:t}},createWhileStatement:function(e,t){return{type:i.WhileStatement,test:e,body:t}},createWithStatement:function(e,t){return{type:i.WithStatement,object:e,body:t}}},e.version="1.2.5",e.tokenize=function(e,n){var r;"string"==typeof e||e instanceof String||(e=String(e)),f=l,p=0,d=(c=e).length>0?1:0,h=0,m=c.length,g=null,y={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},_={},(n=n||{}).tokens=!0,_.tokens=[],_.tokenize=!0,_.openParenToken=-1,_.openCurlyToken=-1,_.range="boolean"==typeof n.range&&n.range,_.loc="boolean"==typeof n.loc&&n.loc,"boolean"==typeof n.comment&&n.comment&&(_.comments=[]),"boolean"==typeof n.tolerant&&n.tolerant&&(_.errors=[]);try{if($(),g.type===t.EOF)return _.tokens;for(z();g.type!==t.EOF;)try{z()}catch(e){if(_.errors){_.errors.push(e);break}throw e}Oe(),r=_.tokens,void 0!==_.comments&&(r.comments=_.comments),void 0!==_.errors&&(r.errors=_.errors)}catch(e){throw e}finally{_={}}return r},e.parse=function(e,t){var n,r;r=String,"string"==typeof e||e instanceof String||(e=r(e)),f=l,p=0,d=(c=e).length>0?1:0,h=0,m=c.length,g=null,y={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},_={},void 0!==t&&(_.range="boolean"==typeof t.range&&t.range,_.loc="boolean"==typeof t.loc&&t.loc,_.attachComment="boolean"==typeof t.attachComment&&t.attachComment,_.loc&&null!==t.source&&void 0!==t.source&&(_.source=r(t.source)),"boolean"==typeof t.tokens&&t.tokens&&(_.tokens=[]),"boolean"==typeof t.comment&&t.comment&&(_.comments=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(_.errors=[]),_.attachComment&&(_.range=!0,_.comments=[],_.bottomRightStack=[],_.trailingComments=[],_.leadingComments=[]));try{n=Ce(),void 0!==_.comments&&(n.comments=_.comments),void 0!==_.tokens&&(Oe(),n.tokens=_.tokens),void 0!==_.errors&&(n.errors=_.errors)}catch(e){throw e}finally{_={}}return n},e.Syntax=function(){var e,t={};for(e in"function"==typeof Object.create&&(t=Object.create(null)),i)i.hasOwnProperty(e)&&(t[e]=i[e]);return"function"==typeof Object.freeze&&Object.freeze(t),t}()},void 0===(r=n.apply(t,[t]))||(e.exports=r)}()},4213:function(e,t,n){var r,i;void 0===(i="function"==typeof(r=function(){"use strict";function t(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){s(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function i(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(e,n,a){var s=o.URL||o.webkitURL,l=document.createElement("a");n=n||e.name||"download",l.download=n,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?i(l):r(l.href)?t(e,n,a):i(l,l.target="_blank")):(l.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(l.href)}),4e4),setTimeout((function(){i(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,o){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,o),n);else if(r(e))t(e,n,o);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout((function(){i(a)}))}}:function(e,n,r,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,r);var s="application/octet-stream"===e.type,l=/constructor/i.test(o.HTMLElement)||o.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||s&&l||a)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},u.readAsDataURL(e)}else{var p=o.URL||o.webkitURL,d=p.createObjectURL(e);i?i.location=d:location.href=d,i=null,setTimeout((function(){p.revokeObjectURL(d)}),4e4)}});o.saveAs=s.saveAs=s,e.exports=s})?r.apply(t,[]):r)||(e.exports=i)},2682:(e,t,n)=>{"use strict";var r=n(9600),i=Object.prototype.toString,o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){if(!r(t))throw new TypeError("iterator must be a function");var a;arguments.length>=3&&(a=n),"[object Array]"===i.call(e)?function(e,t,n){for(var r=0,i=e.length;r<i;r++)o.call(e,r)&&(null==n?t(e[r],r,e):t.call(n,e[r],r,e))}(e,t,a):"string"==typeof e?function(e,t,n){for(var r=0,i=e.length;r<i;r++)null==n?t(e.charAt(r),r,e):t.call(n,e.charAt(r),r,e)}(e,t,a):function(e,t,n){for(var r in e)o.call(e,r)&&(null==n?t(e[r],r,e):t.call(n,e[r],r,e))}(e,t,a)}},9353:e=>{"use strict";var t=Object.prototype.toString,n=Math.max,r=function(e,t){for(var n=[],r=0;r<e.length;r+=1)n[r]=e[r];for(var i=0;i<t.length;i+=1)n[i+e.length]=t[i];return n};e.exports=function(e){var i=this;if("function"!=typeof i||"[object Function]"!==t.apply(i))throw new TypeError("Function.prototype.bind called on incompatible "+i);for(var o,a=function(e){for(var t=[],n=1,r=0;n<e.length;n+=1,r+=1)t[r]=e[n];return t}(arguments),s=n(0,i.length-a.length),l=[],c=0;c<s;c++)l[c]="$"+c;if(o=Function("binder","return function ("+function(e){for(var t="",n=0;n<e.length;n+=1)t+=e[n],n+1<e.length&&(t+=",");return t}(l)+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof o){var t=i.apply(this,r(a,arguments));return Object(t)===t?t:this}return i.apply(e,r(a,arguments))})),i.prototype){var u=function(){};u.prototype=i.prototype,o.prototype=new u,u.prototype=null}return o}},6743:(e,t,n)=>{"use strict";var r=n(9353);e.exports=Function.prototype.bind||r},453:(e,t,n)=>{"use strict";var r,i=n(9383),o=n(1237),a=n(9290),s=n(9538),l=n(8068),c=n(9675),u=n(5345),p=Function,d=function(e){try{return p('"use strict"; return ('+e+").constructor;")()}catch(e){}},h=Object.getOwnPropertyDescriptor;if(h)try{h({},"")}catch(e){h=null}var m=function(){throw new c},f=h?function(){try{return m}catch(e){try{return h(arguments,"callee").get}catch(e){return m}}}():m,g=n(4039)(),y=n(24)(),_=Object.getPrototypeOf||(y?function(e){return e.__proto__}:null),v={},b="undefined"!=typeof Uint8Array&&_?_(Uint8Array):r,w={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":g&&_?_([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":v,"%AsyncGenerator%":v,"%AsyncGeneratorFunction%":v,"%AsyncIteratorPrototype%":v,"%Atomics%":"undefined"==typeof Atomics?r:Atomics,"%BigInt%":"undefined"==typeof BigInt?r:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?r:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":i,"%eval%":eval,"%EvalError%":o,"%Float32Array%":"undefined"==typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":p,"%GeneratorFunction%":v,"%Int8Array%":"undefined"==typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":g&&_?_(_([][Symbol.iterator]())):r,"%JSON%":"object"==typeof JSON?JSON:r,"%Map%":"undefined"==typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&g&&_?_((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?r:Promise,"%Proxy%":"undefined"==typeof Proxy?r:Proxy,"%RangeError%":a,"%ReferenceError%":s,"%Reflect%":"undefined"==typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&g&&_?_((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":g&&_?_(""[Symbol.iterator]()):r,"%Symbol%":g?Symbol:r,"%SyntaxError%":l,"%ThrowTypeError%":f,"%TypedArray%":b,"%TypeError%":c,"%Uint8Array%":"undefined"==typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?r:Uint32Array,"%URIError%":u,"%WeakMap%":"undefined"==typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?r:WeakSet};if(_)try{null.error}catch(e){var x=_(_(e));w["%Error.prototype%"]=x}var S=function e(t){var n;if("%AsyncFunction%"===t)n=d("async function () {}");else if("%GeneratorFunction%"===t)n=d("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=d("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&_&&(n=_(i.prototype))}return w[t]=n,n},T={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},E=n(6743),I=n(9957),k=E.call(Function.call,Array.prototype.concat),j=E.call(Function.apply,Array.prototype.splice),A=E.call(Function.call,String.prototype.replace),C=E.call(Function.call,String.prototype.slice),O=E.call(Function.call,RegExp.prototype.exec),M=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,N=/\\(\\)?/g,R=function(e,t){var n,r=e;if(I(T,r)&&(r="%"+(n=T[r])[0]+"%"),I(w,r)){var i=w[r];if(i===v&&(i=S(r)),void 0===i&&!t)throw new c("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:i}}throw new l("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new c("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new c('"allowMissing" argument must be a boolean');if(null===O(/^%?[^%]*%?$/,e))throw new l("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=function(e){var t=C(e,0,1),n=C(e,-1);if("%"===t&&"%"!==n)throw new l("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new l("invalid intrinsic syntax, expected opening `%`");var r=[];return A(e,M,(function(e,t,n,i){r[r.length]=n?A(i,N,"$1"):t||e})),r}(e),r=n.length>0?n[0]:"",i=R("%"+r+"%",t),o=i.name,a=i.value,s=!1,u=i.alias;u&&(r=u[0],j(n,k([0,1],u)));for(var p=1,d=!0;p<n.length;p+=1){var m=n[p],f=C(m,0,1),g=C(m,-1);if(('"'===f||"'"===f||"`"===f||'"'===g||"'"===g||"`"===g)&&f!==g)throw new l("property names with quotes must have matching quotes");if("constructor"!==m&&d||(s=!0),I(w,o="%"+(r+="."+m)+"%"))a=w[o];else if(null!=a){if(!(m in a)){if(!t)throw new c("base intrinsic for "+e+" exists, but the property is not available.");return}if(h&&p+1>=n.length){var y=h(a,m);a=(d=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:a[m]}else d=I(a,m),a=a[m];d&&!s&&(w[o]=a)}}return a}},5795:(e,t,n)=>{"use strict";var r=n(453)("%Object.getOwnPropertyDescriptor%",!0);if(r)try{r([],"length")}catch(e){r=null}e.exports=r},592:(e,t,n)=>{"use strict";var r=n(655),i=function(){return!!r};i.hasArrayLengthDefineBug=function(){if(!r)return null;try{return 1!==r([],"length",{value:1}).length}catch(e){return!0}},e.exports=i},24:e=>{"use strict";var t={__proto__:null,foo:{}},n=Object;e.exports=function(){return{__proto__:t}.foo===t.foo&&!(t instanceof n)}},4039:(e,t,n)=>{"use strict";var r="undefined"!=typeof Symbol&&Symbol,i=n(1333);e.exports=function(){return"function"==typeof r&&"function"==typeof Symbol&&"symbol"==typeof r("foo")&&"symbol"==typeof Symbol("bar")&&i()}},1333:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},9092:(e,t,n)=>{"use strict";var r=n(1333);e.exports=function(){return r()&&!!Symbol.toStringTag}},9957:(e,t,n)=>{"use strict";var r=Function.prototype.call,i=Object.prototype.hasOwnProperty,o=n(6743);e.exports=o.call(r,i)},251:(e,t)=>{t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,c=l>>1,u=-7,p=n?i-1:0,d=n?-1:1,h=e[t+p];for(p+=d,o=h&(1<<-u)-1,h>>=-u,u+=s;u>0;o=256*o+e[t+p],p+=d,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;u>0;a=256*a+e[t+p],p+=d,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=c}return(h?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,l,c=8*o-i-1,u=(1<<c)-1,p=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,m=r?1:-1,f=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+p>=1?d/l:d*Math.pow(2,1-p))*l>=2&&(a++,l/=2),a+p>=u?(s=0,a=u):a+p>=1?(s=(t*l-1)*Math.pow(2,i),a+=p):(s=t*Math.pow(2,p-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=255&s,h+=m,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+h]=255&a,h+=m,a/=256,c-=8);e[n+h-m]|=128*f}},6698:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},2219:e=>{"use strict";e.exports=function(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=n;return t}},7244:(e,t,n)=>{"use strict";var r=n(9092)(),i=n(8075)("Object.prototype.toString"),o=function(e){return!(r&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===i(e)},a=function(e){return!!o(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==i(e)&&"[object Function]"===i(e.callee)},s=function(){return o(arguments)}();o.isLegacyArguments=a,e.exports=s?o:a},7206:e=>{function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},9600:e=>{"use strict";var t,n,r=Function.prototype.toString,i="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof i&&"function"==typeof Object.defineProperty)try{t=Object.defineProperty({},"length",{get:function(){throw n}}),n={},i((function(){throw 42}),null,t)}catch(e){e!==n&&(i=null)}else i=null;var o=/^\s*class\b/,a=function(e){try{var t=r.call(e);return o.test(t)}catch(e){return!1}},s=function(e){try{return!a(e)&&(r.call(e),!0)}catch(e){return!1}},l=Object.prototype.toString,c="function"==typeof Symbol&&!!Symbol.toStringTag,u=!(0 in[,]),p=function(){return!1};if("object"==typeof document){var d=document.all;l.call(d)===l.call(document.all)&&(p=function(e){if((u||!e)&&(void 0===e||"object"==typeof e))try{var t=l.call(e);return("[object HTMLAllCollection]"===t||"[object HTML document.all class]"===t||"[object HTMLCollection]"===t||"[object Object]"===t)&&null==e("")}catch(e){}return!1})}e.exports=i?function(e){if(p(e))return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;try{i(e,null,t)}catch(e){if(e!==n)return!1}return!a(e)&&s(e)}:function(e){if(p(e))return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if(c)return s(e);if(a(e))return!1;var t=l.call(e);return!("[object Function]"!==t&&"[object GeneratorFunction]"!==t&&!/^\[object HTML/.test(t))&&s(e)}},8184:(e,t,n)=>{"use strict";var r,i=Object.prototype.toString,o=Function.prototype.toString,a=/^\s*(?:function)?\*/,s=n(9092)(),l=Object.getPrototypeOf;e.exports=function(e){if("function"!=typeof e)return!1;if(a.test(o.call(e)))return!0;if(!s)return"[object GeneratorFunction]"===i.call(e);if(!l)return!1;if(void 0===r){var t=function(){if(!s)return!1;try{return Function("return function*() {}")()}catch(e){}}();r=!!t&&l(t)}return l(e)===r}},5680:(e,t,n)=>{"use strict";var r=n(5767);e.exports=function(e){return!!r(e)}},8570:e=>{e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var i={},o={};function a(e,t){var n,r,a;return t?(a=0<=(e>>>=0)&&e<256)&&(r=o[e])?r:(n=l(e,(0|e)<0?-1:0,!0),a&&(o[e]=n),n):(a=-128<=(e|=0)&&e<128)&&(r=i[e])?r:(n=l(e,e<0?-1:0,!1),a&&(i[e]=n),n)}function s(e,t){if(isNaN(e))return t?y:g;if(t){if(e<0)return y;if(e>=h)return x}else{if(e<=-m)return S;if(e+1>=m)return w}return e<0?s(-e,t).neg():l(e%d|0,e/d|0,t)}function l(e,t,r){return new n(e,t,r)}n.fromInt=a,n.fromNumber=s,n.fromBits=l;var c=Math.pow;function u(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return u(e.substring(1),t,n).neg();for(var i=s(c(n,8)),o=g,a=0;a<e.length;a+=8){var l=Math.min(8,e.length-a),p=parseInt(e.substring(a,a+l),n);if(l<8){var d=s(c(n,l));o=o.mul(d).add(s(p))}else o=(o=o.mul(i)).add(s(p))}return o.unsigned=t,o}function p(e,t){return"number"==typeof e?s(e,t):"string"==typeof e?u(e,t):l(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}n.fromString=u,n.fromValue=p;var d=4294967296,h=d*d,m=h/2,f=a(1<<24),g=a(0);n.ZERO=g;var y=a(0,!0);n.UZERO=y;var _=a(1);n.ONE=_;var v=a(1,!0);n.UONE=v;var b=a(-1);n.NEG_ONE=b;var w=l(-1,2147483647,!1);n.MAX_VALUE=w;var x=l(-1,-1,!0);n.MAX_UNSIGNED_VALUE=x;var S=l(0,-2147483648,!1);n.MIN_VALUE=S;var T=n.prototype;T.toInt=function(){return this.unsigned?this.low>>>0:this.low},T.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},T.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var t=s(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=s(c(e,6),this.unsigned),o=this,a="";;){var l=o.div(i),u=(o.sub(l.mul(i)).toInt()>>>0).toString(e);if((o=l).isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}},T.getHighBits=function(){return this.high},T.getHighBitsUnsigned=function(){return this.high>>>0},T.getLowBits=function(){return this.low},T.getLowBitsUnsigned=function(){return this.low>>>0},T.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&!(e&1<<t);t--);return 0!=this.high?t+33:t+1},T.isZero=function(){return 0===this.high&&0===this.low},T.eqz=T.isZero,T.isNegative=function(){return!this.unsigned&&this.high<0},T.isPositive=function(){return this.unsigned||this.high>=0},T.isOdd=function(){return!(1&~this.low)},T.isEven=function(){return!(1&this.low)},T.equals=function(e){return r(e)||(e=p(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},T.eq=T.equals,T.notEquals=function(e){return!this.eq(e)},T.neq=T.notEquals,T.ne=T.notEquals,T.lessThan=function(e){return this.comp(e)<0},T.lt=T.lessThan,T.lessThanOrEqual=function(e){return this.comp(e)<=0},T.lte=T.lessThanOrEqual,T.le=T.lessThanOrEqual,T.greaterThan=function(e){return this.comp(e)>0},T.gt=T.greaterThan,T.greaterThanOrEqual=function(e){return this.comp(e)>=0},T.gte=T.greaterThanOrEqual,T.ge=T.greaterThanOrEqual,T.compare=function(e){if(r(e)||(e=p(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},T.comp=T.compare,T.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(_)},T.neg=T.negate,T.add=function(e){r(e)||(e=p(e));var t=this.high>>>16,n=65535&this.high,i=this.low>>>16,o=65535&this.low,a=e.high>>>16,s=65535&e.high,c=e.low>>>16,u=0,d=0,h=0,m=0;return h+=(m+=o+(65535&e.low))>>>16,d+=(h+=i+c)>>>16,u+=(d+=n+s)>>>16,u+=t+a,l((h&=65535)<<16|(m&=65535),(u&=65535)<<16|(d&=65535),this.unsigned)},T.subtract=function(e){return r(e)||(e=p(e)),this.add(e.neg())},T.sub=T.subtract,T.multiply=function(e){if(this.isZero())return g;if(r(e)||(e=p(e)),t)return l(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return g;if(this.eq(S))return e.isOdd()?S:g;if(e.eq(S))return this.isOdd()?S:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(f)&&e.lt(f))return s(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,i=65535&this.high,o=this.low>>>16,a=65535&this.low,c=e.high>>>16,u=65535&e.high,d=e.low>>>16,h=65535&e.low,m=0,y=0,_=0,v=0;return _+=(v+=a*h)>>>16,y+=(_+=o*h)>>>16,_&=65535,y+=(_+=a*d)>>>16,m+=(y+=i*h)>>>16,y&=65535,m+=(y+=o*d)>>>16,y&=65535,m+=(y+=a*u)>>>16,m+=n*h+i*d+o*u+a*c,l((_&=65535)<<16|(v&=65535),(m&=65535)<<16|(y&=65535),this.unsigned)},T.mul=T.multiply,T.divide=function(e){if(r(e)||(e=p(e)),e.isZero())throw Error("division by zero");var n,i,o;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?l((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return y;if(e.gt(this.shru(1)))return v;o=y}else{if(this.eq(S))return e.eq(_)||e.eq(b)?S:e.eq(S)?_:(n=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?_:b:(i=this.sub(e.mul(n)),o=n.add(i.div(e)));if(e.eq(S))return this.unsigned?y:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=g}for(i=this;i.gte(e);){n=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(n)/Math.LN2),u=a<=48?1:c(2,a-48),d=s(n),h=d.mul(e);h.isNegative()||h.gt(i);)h=(d=s(n-=u,this.unsigned)).mul(e);d.isZero()&&(d=_),o=o.add(d),i=i.sub(h)}return o},T.div=T.divide,T.modulo=function(e){return r(e)||(e=p(e)),t?l((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},T.mod=T.modulo,T.rem=T.modulo,T.not=function(){return l(~this.low,~this.high,this.unsigned)},T.and=function(e){return r(e)||(e=p(e)),l(this.low&e.low,this.high&e.high,this.unsigned)},T.or=function(e){return r(e)||(e=p(e)),l(this.low|e.low,this.high|e.high,this.unsigned)},T.xor=function(e){return r(e)||(e=p(e)),l(this.low^e.low,this.high^e.high,this.unsigned)},T.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):l(0,this.low<<e-32,this.unsigned)},T.shl=T.shiftLeft,T.shiftRight=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):l(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},T.shr=T.shiftRight,T.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?l(this.low>>>e|t<<32-e,t>>>e,this.unsigned):l(32===e?t:t>>>e-32,0,this.unsigned)},T.shru=T.shiftRightUnsigned,T.shr_u=T.shiftRightUnsigned,T.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},T.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},T.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},T.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},T.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},6949:(e,t,n)=>{"use strict";var r=n(9231),i=n(8655),o=n(5139),a=n(8739);e.exports=function(e,t,n){var s,l,c=t.shape,u=c.length,p=1,d=new Array(u),h=0;for(s=u-1;s>=0;--s)if(d[s]=p,p*=c[s],h=Math.max(h,a.scratchMemory(c[s])),t.shape[s]!==n.shape[s])throw new Error("Shape mismatch, real and imaginary arrays must have same size");var m,f=4*p+h;m="array"===t.dtype||"float64"===t.dtype||"custom"===t.dtype?o.mallocDouble(f):o.mallocFloat(f);var g,y,_,v,b=i(m,c.slice(0),d,0),w=i(m,c.slice(0),d.slice(0),p),x=i(m,c.slice(0),d.slice(0),2*p),S=i(m,c.slice(0),d.slice(0),3*p),T=4*p;for(r.assign(b,t),r.assign(w,n),s=u-1;s>=0&&(a(e,p/c[s],c[s],m,b.offset,w.offset,T),0!==s);--s){for(y=1,_=x.stride,v=S.stride,l=s-1;l<u;++l)v[l]=_[l]=y,y*=c[l];for(l=s-2;l>=0;--l)v[l]=_[l]=y,y*=c[l];r.assign(x,b),r.assign(S,w),g=b,b=x,x=g,g=w,w=S,S=g}r.assign(t,b),r.assign(n,w),o.free(m)}},8739:(e,t,n)=>{var r=n(973);function i(e,t,n,i,o,a){var s,l,c,u,p,d,h,m,f,g,y,_,v,b,w,x,S,T,E,I,k,j,A,C;for(e|=0,t|=0,o|=0,a|=0,s=n|=0,l=r.log2(s),T=0;T<t;++T){for(h=s>>1,p=0,c=0;c<s-1;c++){for(c<p&&(v=i[o+c],i[o+c]=i[o+p],i[o+p]=v,v=i[a+c],i[a+c]=i[a+p],i[a+p]=v),d=h;d<=p;)p-=d,d>>=1;p+=d}for(y=-1,_=0,g=1,m=0;m<l;m++){for(f=g,g<<=1,x=1,S=0,p=0;p<f;p++){for(c=p;c<s;c+=g)E=i[o+(u=c+f)],I=i[a+u],k=i[o+c],j=i[a+c],b=(A=x*(E+I))-I*(x+S),w=A+(C=E*(S-x)),i[o+u]=k-b,i[a+u]=j-w,i[o+c]+=b,i[a+c]+=w;C=x*(_-y),x=(A=y*(x+S))-S*(y+_),S=A+C}_=Math.sqrt((1-y)/2),e<0&&(_=-_),y=Math.sqrt((1+y)/2)}if(e<0){var O=1/s;for(c=0;c<s;c++)i[o+c]*=O,i[a+c]*=O}o+=n,a+=n}}e.exports=function(e,t,n,o,a,s,l){e|=0,t|=0,n|=0,a|=0,s|=0,r.isPow2(n)?i(e,t,n,o,a,s):function(e,t,n,o,a,s,l){e|=0,t|=0,n|=0,a|=0,s|=0,l|=0;var c,u,p,d,h,m,f,g,y,_=r.nextPow2(2*n+1),v=l,b=v+n,w=b+n,x=w+_,S=x+_,T=S+_,E=-e*Math.PI/n;for(y=0;y<n;++y)u=E*(y*y%(2*n)),d=Math.cos(u),h=Math.sin(u),o[S+(_-y)]=o[S+y]=o[v+y]=d,o[T+(_-y)]=o[T+y]=o[b+y]=h;for(y=n;y<=_-n;++y)o[S+y]=0;for(y=n;y<=_-n;++y)o[T+y]=0;for(i(1,1,_,o,S,T),E=e<0?1/n:1,c=0;c<t;++c){for(y=0;y<n;++y)u=o[a+y],p=o[s+y],m=(d=o[v+y])*(u+p),f=u*((h=-o[b+y])-d),g=p*(d+h),o[w+y]=m-g,o[x+y]=m+f;for(y=n;y<_;++y)o[w+y]=0;for(y=n;y<_;++y)o[x+y]=0;for(i(1,1,_,o,w,x),y=0;y<_;++y)u=o[w+y],p=o[x+y],m=(d=o[S+y])*(u+p),f=u*((h=o[T+y])-d),g=p*(d+h),o[w+y]=m-g,o[x+y]=m+f;for(i(-1,1,_,o,w,x),y=0;y<n;++y)u=o[w+y],p=o[x+y],m=(d=o[v+y])*(u+p),f=u*((h=-o[b+y])-d),g=p*(d+h),o[a+y]=E*(m-g),o[s+y]=E*(m+f);a+=n,s+=n}}(e,t,n,o,a,s,l)},e.exports.scratchMemory=function(e){return r.isPow2(e)?0:2*e+4*r.nextPow2(2*e+1)}},431:(e,t,n)=>{"use strict";e.exports=function(e,t,n,s,l){void 0===s&&(s=1),void 0===l&&(l=0);var c=1!==s,u=0!==l,p=o(e),d=o(t),h=o(n);!function(e,t,n){var r=i(e),o=i(t),a=i(n);if(r[0]!==o[0]||r[1]!==a[1]||o[1]!==a[0])throw new Error("Mismatched array shapes for matrix product")}(e,t,n);var m=[p,d,h,c,u].join(":"),f=a[m];return f||(f=a[m]=r(p,d,h,c,u)),f(e,t,n,s,l)};var r=n(6645);function i(e){return Array.isArray(e)?[e.length,e[0].length]:e.shape}function o(e){if(Array.isArray(e)){if(Array.isArray(e))return["r","native"]}else if(e.shape&&2===e.shape.length)return e.order[0]?["r",e.dtype]:["c",e.dtype];throw new Error("Unrecognized data type")}var a={}},6645:e=>{"use strict";e.exports=function(e,s,l,c,u){var p=["gemm",e[0],e[1],"a",s[0],s[1],"b",l[0],l[1],c?"alpha":"",u?"beta":""].join(""),d=["function ",p,"(o,a,b,A,B){","var ",n("o",e),n("a",s),n("b",l),"i,j,k;"];return"r"===s[0]&&"c"===l[0]?d.push.apply(d,function(e,t,n,s,l){var c=[],u="r"===e[0]?[1,0]:[0,1],p=[1,0],d=[0,1],h=["i","j"];return c.push.apply(c,r(u,"o",e)),u[1]?(c.push("for(j=0;j<od1;++j){"),c.push("for(i=0;i<od0;++i){")):(c.push("for(i=0;i<od0;++i){"),c.push("for(j=0;j<od1;++j){")),c.push.apply(c,r(p,"a",t,"i")),c.push.apply(c,r(d,"b",n,void 0,"j")),c.push("var r=0.0;","for(k=0;k<ad1;++k){","r+=",a(p,"a",t,"i","k"),"*",a(d,"b",n,"k","j"),";"),c.push.apply(c,i(p,"a",t,0,"k")),c.push.apply(c,i(d,"b",n,0,"k")),c.push("}"),s&&c.push("r*=A;"),l&&c.push("r+=B*",a(u,"o",e,"i","j"),";"),c.push.apply(c,o(u,"o",e,"i","j","r")),c.push.apply(c,i(u,"o",e,0,h[1])),c.push("}"),c.push.apply(c,i(u,"o",e,1,h[0])),c.push("}"),c}(e,s,l,c,u)):d.push.apply(d,function(e,n,s,l,c){var u=[],p=["od0","od1","ad1"],d=[1,0],h=[1,0],m=[0,1];u.push.apply(u,function(e,t){var n,s=[],l="r"===e[0]?[1,0]:[0,1];return t&&s.push("if(B!==1.0){"),s.push.apply(s,r(l,"o",e)),l[0]?(s.push("for(i=0;i<od0;++i){for(j=0;j<od1;++j){"),n=["i","j"]):(s.push("for(j=0;j<od1;++j){for(i=0;i<od0;++i){"),n=["j","i"]),t?s.push.apply(s,o(l,"o",e,"i","j","B*"+a(l,"o",e,"i","j"))):s.push.apply(s,o(l,"o",e,"i","j","0")),s.push.apply(s,i(l,"o",e,0,n[1])),s.push("}"),s.push.apply(s,i(l,"o",e,1,n[0])),s.push("}"),t&&s.push("}"),s}(e,c));for(var f=0;f<3;++f)u.push("for(var i",f,"=",p[f],";i",f,">0;){","var w",f,"=",t,";","if(i",f,"<",t,"){","w",f,"=i",f,";","i",f,"=0;","}else{","i",f,"-=",t,";","}");u.push.apply(u,r(d,"o",e,"i0","i1","w1")),u.push("for(i=0;i<w0;++i){for(j=0;j<w1;++j){var r=0.0;"),u.push.apply(u,r(h,"a",n,"(i0+i)","i2")),u.push.apply(u,r(m,"b",s,"i2","(i1+j)")),u.push("for(k=0;k<w2;++k){"),u.push("r+=",a(h,"a",n,"(i0+i)","(i2+k)"),"*",a(m,"b",s,"(i2+k)","(i1+j)"),";"),u.push.apply(u,i(h,"a",n,0,"(i2+k)")),u.push.apply(u,i(m,"b",s,0,"(i2+k)")),u.push("}");var g="r";return l&&(g="A*r"),u.push.apply(u,o(d,"o",e,"(i0+i)","(i1+j)",g+"+"+a(d,"o",e,"(i0+i)","(i1+j)"))),u.push.apply(u,i(d,"o",e,0,"(i1+j)")),u.push("}"),u.push.apply(u,i(d,"o",e,1,"(i0+i)")),u.push("}}}}"),u}(e,s,l,c,u)),d.push("}return ",p),new Function(d.join(""))()};var t=32;function n(e,t){return"native"===t[1]?[e,"d0=",e,".length,",e,"d1=",e,"[0].length,"].join(""):[e,"d0=",e,".shape[0],",e,"d1=",e,".shape[1],",e,"s0=",e,".stride[0],",e,"s1=",e,".stride[1],",e,"o=",e,".offset,",e,"d=",e,".data,"].join("")}function r(e,t,n,r,i,o){var a=[];return"native"===n[1]?e[0]&&(r?a.push("var ",t,"p=",t,"[",r,"];"):a.push("var ",t,"p=",t,"[0];")):r&&i?o?a.push("var ",t,"t0=",t,"s",e[0],",",t,"t1=",t,"s",e[1],"-",t,"s",e[0],"*",o,",",t,"p=",t,"o+",r,"*",t,"s0+",i,"*",t,"s1;"):a.push("var ",t,"t0=",t,"s",e[0],",",t,"p=",t,"o+",r,"*",t,"s0+",i,"*",t,"s1;"):r?a.push("var ",t,"t0=",t,"s",e[0],",",t,"p=",t,"o+",r,"*",t,"s0;"):i?a.push("var ",t,"t0=",t,"s",e[0],",",t,"p=",t,"o+",i,"*",t,"s1;"):a.push("var ",t,"t0=",t,"s",e[0],",",t,"t1=",t,"s",e[1],"-",t,"s",e[0],"*",t,"d",e[0],",",t,"p=",t,"o;"),a}function i(e,t,n,r,i){var o=[];return"native"===n[1]?e[0]&&1===r&&o.push(t,"p=",t,"[",i,"+1]"):o.push(t,"p+=",t,"t",r,";"),o}function o(e,t,n,r,i,o){var a=[];return"native"===n[1]?e[0]?a.push(t,"p[",i,"]=",o,";"):a.push(t,"[",r,"][",i,"]=",o,";"):"generic"===n[1]?a.push(t,"d.set(",t,"p,",o,");"):a.push(t,"d[",t,"p]=",o,";"),a}function a(e,t,n,r,i){var o=[];return"native"===n[1]?e[0]?o.push(t,"p[",i,"]"):o.push(t,"[",r,"][",i,"]"):"generic"===n[1]?o.push(t,"d.get(",t,"p)"):o.push(t,"d[",t,"p]"),o.join("")}},9231:(e,t,n)=>{"use strict";var r=n(9543),i={body:"",args:[],thisVars:[],localVars:[]};function o(e){if(!e)return i;for(var t=0;t<e.args.length;++t){var n=e.args[t];e.args[t]=0===t?{name:n,lvalue:!0,rvalue:!!e.rvalue,count:e.count||1}:{name:n,lvalue:!1,rvalue:!0,count:1}}return e.thisVars||(e.thisVars=[]),e.localVars||(e.localVars=[]),e}function a(e){for(var t=[],n=0;n<e.args.length;++n)t.push("a"+n);return new Function("P",["return function ",e.funcName,"_ndarrayops(",t.join(","),") {P(",t.join(","),");return a0}"].join(""))(function(e){return r({args:e.args,pre:o(e.pre),body:o(e.body),post:o(e.proc),funcName:e.funcName})}(e))}var s={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var e in s){var n=s[e];t[e]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+n+"c"},funcName:e}),t[e+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a"+n+"=b"},rvalue:!0,funcName:e+"eq"}),t[e+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+n+"s"},funcName:e+"s"}),t[e+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a"+n+"=s"},rvalue:!0,funcName:e+"seq"})}}();var l={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var e in l){var n=l[e];t[e]=a({args:["array","array"],body:{args:["a","b"],body:"a="+n+"b"},funcName:e}),t[e+"eq"]=a({args:["array"],body:{args:["a"],body:"a="+n+"a"},rvalue:!0,count:2,funcName:e+"eq"})}}();var c={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var e in c){var n=c[e];t[e]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+n+"c"},funcName:e}),t[e+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+n+"s"},funcName:e+"s"}),t[e+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a=a"+n+"b"},rvalue:!0,count:2,funcName:e+"eq"}),t[e+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+n+"s"},rvalue:!0,count:2,funcName:e+"seq"})}}();var u=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var e=0;e<u.length;++e){var n=u[e];t[n]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:n}),t[n+"eq"]=a({args:["array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"eq"})}}();var p=["max","min","atan2","pow"];!function(){for(var e=0;e<p.length;++e){var n=p[e];t[n]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:n}),t[n+"s"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:n+"s"}),t[n+"eq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"eq"}),t[n+"seq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"seq"})}}();var d=["atan2","pow"];!function(){for(var e=0;e<d.length;++e){var n=d[e];t[n+"op"]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:n+"op"}),t[n+"ops"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:n+"ops"}),t[n+"opeq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"opeq"}),t[n+"opseq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"opseq"})}}(),t.any=r({args:["array"],pre:i,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),t.all=r({args:["array"],pre:i,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),t.sum=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),t.prod=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),t.norm2squared=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),t.norm2=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),t.norminf=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),t.norm1=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),t.sup=r({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.inf=r({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.argmin=r({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.argmax=r({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.random=a({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),t.assign=a({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),t.assigns=a({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),t.equals=r({args:["array","array"],pre:i,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},8655:(e,t,n)=>{var r=n(2219),i=n(7206),o="undefined"!=typeof Float64Array;function a(e,t){return e[0]-t[0]}function s(){var e,t=this.stride,n=new Array(t.length);for(e=0;e<n.length;++e)n[e]=[Math.abs(t[e]),e];n.sort(a);var r=new Array(n.length);for(e=0;e<r.length;++e)r[e]=n[e][1];return r}function l(e,t){var n=["View",t,"d",e].join("");t<0&&(n="View_Nil"+e);var i="generic"===e;if(-1===t){var o="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}";return new Function(o)()}if(0===t)return o="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(i?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(i?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}",new Function("TrivialArray",o)(c[e][0]);o=["'use strict'"];var a=r(t),l=a.map((function(e){return"i"+e})),u="this.offset+"+a.map((function(e){return"this.stride["+e+"]*i"+e})).join("+"),p=a.map((function(e){return"b"+e})).join(","),d=a.map((function(e){return"c"+e})).join(",");o.push("function "+n+"(a,"+p+","+d+",d){this.data=a","this.shape=["+p+"]","this.stride=["+d+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),o.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+a.map((function(e){return"this.shape["+e+"]"})).join("*"),"}})"),1===t?o.push("proto.order=[0]"):(o.push("Object.defineProperty(proto,'order',{get:"),t<4?(o.push("function "+n+"_order(){"),2===t?o.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&o.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):o.push("ORDER})")),o.push("proto.set=function "+n+"_set("+l.join(",")+",v){"),i?o.push("return this.data.set("+u+",v)}"):o.push("return this.data["+u+"]=v}"),o.push("proto.get=function "+n+"_get("+l.join(",")+"){"),i?o.push("return this.data.get("+u+")}"):o.push("return this.data["+u+"]}"),o.push("proto.index=function "+n+"_index(",l.join(),"){return "+u+"}"),o.push("proto.hi=function "+n+"_hi("+l.join(",")+"){return new "+n+"(this.data,"+a.map((function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")})).join(",")+","+a.map((function(e){return"this.stride["+e+"]"})).join(",")+",this.offset)}");var h=a.map((function(e){return"a"+e+"=this.shape["+e+"]"})),m=a.map((function(e){return"c"+e+"=this.stride["+e+"]"}));o.push("proto.lo=function "+n+"_lo("+l.join(",")+"){var b=this.offset,d=0,"+h.join(",")+","+m.join(","));for(var f=0;f<t;++f)o.push("if(typeof i"+f+"==='number'&&i"+f+">=0){d=i"+f+"|0;b+=c"+f+"*d;a"+f+"-=d}");for(o.push("return new "+n+"(this.data,"+a.map((function(e){return"a"+e})).join(",")+","+a.map((function(e){return"c"+e})).join(",")+",b)}"),o.push("proto.step=function "+n+"_step("+l.join(",")+"){var "+a.map((function(e){return"a"+e+"=this.shape["+e+"]"})).join(",")+","+a.map((function(e){return"b"+e+"=this.stride["+e+"]"})).join(",")+",c=this.offset,d=0,ceil=Math.ceil"),f=0;f<t;++f)o.push("if(typeof i"+f+"==='number'){d=i"+f+"|0;if(d<0){c+=b"+f+"*(a"+f+"-1);a"+f+"=ceil(-a"+f+"/d)}else{a"+f+"=ceil(a"+f+"/d)}b"+f+"*=d}");o.push("return new "+n+"(this.data,"+a.map((function(e){return"a"+e})).join(",")+","+a.map((function(e){return"b"+e})).join(",")+",c)}");var g=new Array(t),y=new Array(t);for(f=0;f<t;++f)g[f]="a[i"+f+"]",y[f]="b[i"+f+"]";for(o.push("proto.transpose=function "+n+"_transpose("+l+"){"+l.map((function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"})).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+g.join(",")+","+y.join(",")+",this.offset)}"),o.push("proto.pick=function "+n+"_pick("+l+"){var a=[],b=[],c=this.offset"),f=0;f<t;++f)o.push("if(typeof i"+f+"==='number'&&i"+f+">=0){c=(c+this.stride["+f+"]*i"+f+")|0}else{a.push(this.shape["+f+"]);b.push(this.stride["+f+"])}");return o.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),o.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+a.map((function(e){return"shape["+e+"]"})).join(",")+","+a.map((function(e){return"stride["+e+"]"})).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",o.join("\n"))(c[e],s)}var c={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};e.exports=function(e,t,n,r){if(void 0===e)return(0,c.array[0])([]);"number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var a=t.length;if(void 0===n){n=new Array(a);for(var s=a-1,u=1;s>=0;--s)n[s]=u,u*=t[s]}if(void 0===r)for(r=0,s=0;s<a;++s)n[s]<0&&(r-=(t[s]-1)*n[s]);for(var p=function(e){if(i(e))return"buffer";if(o)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(e)?"array":"generic"}(e),d=c[p];d.length<=a+1;)d.push(l(p,d.length-1));return(0,d[a+1])(e,t,n,r)}},7953:(t,n,r)=>{!function(e){t.exports=e()}((function(){return function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var l=void 0;if(!s&&l)return require(a,!0);if(o)return o(a,!0);throw(s=new Error("Cannot find module '"+a+"'")).code="MODULE_NOT_FOUND",s}l=n[a]={exports:{}},t[a][0].call(l.exports,(function(e){return i(t[a][1][e]||e)}),l,l.exports,e,t,n,r)}return n[a].exports}for(var o=void 0,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){"use strict";n.byteLength=function(e){return 3*((e=l(e))[0]+(e=e[1]))/4-e},n.toByteArray=function(e){var t,n,r=(a=l(e))[0],a=a[1],s=new o(function(e,t){return 3*(e+t)/4-t}(r,a)),c=0,u=0<a?r-4:r;for(n=0;n<u;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],s[c++]=t>>16&255,s[c++]=t>>8&255,s[c++]=255&t;return 2===a&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,s[c++]=255&t),1===a&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,s[c++]=t>>8&255,s[c++]=255&t),s},n.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(function(e,t,n){for(var i,o=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(function(e){return r[e>>18&63]+r[e>>12&63]+r[e>>6&63]+r[63&e]}(i));return o.join("")}(e,a,s<a+16383?s:a+16383));return 1==i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2==i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function l(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");return t=(e=-1===(e=e.indexOf("="))?t:e)===t?0:4-e%4,[e,t]}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],2:[function(e,t,n){},{}],3:[function(e,t,n){},{}],4:[function(e,t,n){(function(t){"use strict";var r=e("base64-js"),i=e("ieee754"),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null,a=(n.Buffer=t,n.SlowBuffer=function(e){return+e!=e&&(e=0),t.alloc(+e)},n.INSPECT_MAX_BYTES=50,2147483647);function s(e){if(a<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');return e=new Uint8Array(e),Object.setPrototypeOf(e,t.prototype),e}function t(e,t,n){if("number"!=typeof e)return l(e,t,n);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return u(e)}function l(e,n,r){if("string"==typeof e){var i=e,o=n;if(t.isEncoding(o="string"==typeof o&&""!==o?o:"utf8"))return(i=(l=s(a=0|h(i,o))).write(i,o))!==a?l.slice(0,i):l;throw new TypeError("Unknown encoding: "+o)}if(ArrayBuffer.isView(e))return p(e);if(null!=e){if(O(e,ArrayBuffer)||e&&O(e.buffer,ArrayBuffer)){var a=e,l=r;if((i=n)<0||a.byteLength<i)throw new RangeError('"offset" is outside of buffer bounds');if(a.byteLength<i+(l||0))throw new RangeError('"length" is outside of buffer bounds');return a=void 0===i&&void 0===l?new Uint8Array(a):void 0===l?new Uint8Array(a,i):new Uint8Array(a,i,l),Object.setPrototypeOf(a,t.prototype),a}if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');if(null!=(o=e.valueOf&&e.valueOf())&&o!==e)return t.from(o,n,r);var c=function(e){var n,r;return t.isBuffer(e)?(0!==(r=s(n=0|d(e.length))).length&&e.copy(r,0,0,n),r):void 0!==e.length?"number"!=typeof e.length||M(e.length)?s(0):p(e):"Buffer"===e.type&&Array.isArray(e.data)?p(e.data):void 0}(e);if(c)return c;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return t.from(e[Symbol.toPrimitive]("string"),n,r)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return c(e),s(e<0?0:0|d(e))}function p(e){for(var t=e.length<0?0:0|d(e.length),n=s(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function d(e){if(a<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function h(e,n){if(t.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||O(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,i=2<arguments.length&&!0===arguments[2];if(!i&&0===r)return 0;for(var o=!1;;)switch(n){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return j(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return A(e).length;default:if(o)return i?-1:j(e).length;n=(""+n).toLowerCase(),o=!0}}function m(e,t,n){var i,o=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((n=void 0===n||n>this.length?this.length:n)<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":var a=t,s=n,l=this.length;(!s||s<0||l<s)&&(s=l);for(var c="",u=a=!a||a<0?0:a;u<s;++u)c+=N[this[u]];return c;case"utf8":case"utf-8":return b(this,t,n);case"ascii":l=t;var p=n,d="";p=Math.min(this.length,p);for(var h=l;h<p;++h)d+=String.fromCharCode(127&this[h]);return d;case"latin1":case"binary":a=t;var m=n,f="";m=Math.min(this.length,m);for(var g=a;g<m;++g)f+=String.fromCharCode(this[g]);return f;case"base64":return y=this,i=n,0===(_=t)&&i===y.length?r.fromByteArray(y):r.fromByteArray(y.slice(_,i));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var y=t,_=n,v=this.slice(y,_),w="",x=0;x<v.length;x+=2)w+=String.fromCharCode(v[x]+256*v[x+1]);return w;default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function f(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,n,r,i,o){if(0===e.length)return-1;if("string"==typeof r?(i=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),(r=(r=M(r=+r)?o?0:e.length-1:r)<0?e.length+r:r)>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof n&&(n=t.from(n,i)),t.isBuffer(n))return 0===n.length?-1:y(e,n,r,i,o);if("number"==typeof n)return n&=255,"function"==typeof Uint8Array.prototype.indexOf?(o?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,n,r):y(e,[n],r,i,o);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,r,i){var o=1,a=e.length,s=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a/=o=2,s/=2,n/=2}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i)for(var c=-1,u=n;u<a;u++)if(l(e,u)===l(t,-1===c?0:u-c)){if(u-(c=-1===c?u:c)+1===s)return c*o}else-1!==c&&(u-=u-c),c=-1;else for(u=n=a<n+s?a-s:n;0<=u;u--){for(var p=!0,d=0;d<s;d++)if(l(e,u+d)!==l(t,d)){p=!1;break}if(p)return u}return-1}function _(e,t,n,r){return C(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function v(e,t,n,r){return C(function(e,t){for(var n,r,i=[],o=0;o<e.length&&!((t-=2)<0);++o)n=(r=e.charCodeAt(o))>>8,r%=256,i.push(r),i.push(n);return i}(t,e.length-n),e,n,r)}function b(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,l,c=e[i],u=null,p=239<c?4:223<c?3:191<c?2:1;if(i+p<=n)switch(p){case 1:c<128&&(u=c);break;case 2:128==(192&(o=e[i+1]))&&127<(l=(31&c)<<6|63&o)&&(u=l);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&2047<(l=(15&c)<<12|(63&o)<<6|63&a)&&(l<55296||57343<l)&&(u=l);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&65535<(l=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)&&l<1114112&&(u=l)}null===u?(u=65533,p=1):65535<u&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=p}var d=r,h=d.length;if(h<=w)return String.fromCharCode.apply(String,d);for(var m="",f=0;f<h;)m+=String.fromCharCode.apply(String,d.slice(f,f+=w));return m}n.kMaxLength=a,(t.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(t.prototype,"parent",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.buffer}}),Object.defineProperty(t.prototype,"offset",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),t.poolSize=8192,t.from=l,Object.setPrototypeOf(t.prototype,Uint8Array.prototype),Object.setPrototypeOf(t,Uint8Array),t.alloc=function(e,t,n){return c(e),e<=0||void 0===t?s(e):"string"==typeof n?s(e).fill(t,n):s(e).fill(t)},t.allocUnsafe=u,t.allocUnsafeSlow=u,t.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==t.prototype},t.compare=function(e,n){if(O(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),O(n,Uint8Array)&&(n=t.from(n,n.offset,n.byteLength)),!t.isBuffer(e)||!t.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===n)return 0;for(var r=e.length,i=n.length,o=0,a=Math.min(r,i);o<a;++o)if(e[o]!==n[o]){r=e[o],i=n[o];break}return r<i?-1:i<r?1:0},t.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,n){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return t.alloc(0);if(void 0===n)for(o=n=0;o<e.length;++o)n+=e[o].length;for(var r=t.allocUnsafe(n),i=0,o=0;o<e.length;++o){var a=e[o];if(O(a,Uint8Array)&&(a=t.from(a)),!t.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},t.byteLength=h,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)f(this,t,t+1);return this},t.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)f(this,t,t+3),f(this,t+1,t+2);return this},t.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)f(this,t,t+7),f(this,t+1,t+6),f(this,t+2,t+5),f(this,t+3,t+4);return this},t.prototype.toLocaleString=t.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?b(this,0,e):m.apply(this,arguments)},t.prototype.equals=function(e){if(t.isBuffer(e))return this===e||0===t.compare(this,e);throw new TypeError("Argument must be a Buffer")},t.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},o&&(t.prototype[o]=t.prototype.inspect),t.prototype.compare=function(e,n,r,i,o){if(O(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),!t.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),(n=void 0===n?0:n)<0||r>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(o<=i&&r<=n)return 0;if(o<=i)return-1;if(r<=n)return 1;if(this===e)return 0;for(var a=(o>>>=0)-(i>>>=0),s=(r>>>=0)-(n>>>=0),l=Math.min(a,s),c=this.slice(i,o),u=e.slice(n,r),p=0;p<l;++p)if(c[p]!==u[p]){a=c[p],s=u[p];break}return a<s?-1:s<a?1:0},t.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},t.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},t.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},t.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||i<n)&&(n=i),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var o,a,s,l=!1;;)switch(r){case"hex":var c=e,u=t,p=n,d=(u=Number(u)||0,this.length-u);(!p||d<(p=Number(p)))&&(p=d),(d=c.length)/2<p&&(p=d/2);for(var h=0;h<p;++h){var m=parseInt(c.substr(2*h,2),16);if(M(m))return h;this[u+h]=m}return h;case"utf8":case"utf-8":return d=t,s=n,C(j(e,(a=this).length-d),a,d,s);case"ascii":case"latin1":case"binary":return _(this,e,t,n);case"base64":return a=this,s=t,o=n,C(A(e),a,s,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,e,t,n);default:if(l)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),l=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var w=4096;function x(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function S(e,n,r,i,o,a){if(!t.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(o<n||n<a)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}function T(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function E(e,t,n,r,o){return t=+t,n>>>=0,o||T(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function I(e,t,n,r,o){return t=+t,n>>>=0,o||T(e,0,n,8),i.write(e,t,n,r,52,8),n+8}t.prototype.slice=function(e,n){var r=this.length;return(e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(n=void 0===n?r:~~n)<0?(n+=r)<0&&(n=0):r<n&&(n=r),n<e&&(n=e),r=this.subarray(e,n),Object.setPrototypeOf(r,t.prototype),r},t.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||x(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},t.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||x(e,t,this.length);for(var r=this[e+--t],i=1;0<t&&(i*=256);)r+=this[e+--t]*i;return r},t.prototype.readUInt8=function(e,t){return e>>>=0,t||x(e,1,this.length),this[e]},t.prototype.readUInt16LE=function(e,t){return e>>>=0,t||x(e,2,this.length),this[e]|this[e+1]<<8},t.prototype.readUInt16BE=function(e,t){return e>>>=0,t||x(e,2,this.length),this[e]<<8|this[e+1]},t.prototype.readUInt32LE=function(e,t){return e>>>=0,t||x(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},t.prototype.readUInt32BE=function(e,t){return e>>>=0,t||x(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},t.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||x(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return(i*=128)<=r&&(r-=Math.pow(2,8*t)),r},t.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||x(e,t,this.length);for(var r=t,i=1,o=this[e+--r];0<r&&(i*=256);)o+=this[e+--r]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*t)),o},t.prototype.readInt8=function(e,t){return e>>>=0,t||x(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},t.prototype.readInt16LE=function(e,t){return e>>>=0,t||x(e,2,this.length),32768&(t=this[e]|this[e+1]<<8)?4294901760|t:t},t.prototype.readInt16BE=function(e,t){return e>>>=0,t||x(e,2,this.length),32768&(t=this[e+1]|this[e]<<8)?4294901760|t:t},t.prototype.readInt32LE=function(e,t){return e>>>=0,t||x(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},t.prototype.readInt32BE=function(e,t){return e>>>=0,t||x(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},t.prototype.readFloatLE=function(e,t){return e>>>=0,t||x(e,4,this.length),i.read(this,e,!0,23,4)},t.prototype.readFloatBE=function(e,t){return e>>>=0,t||x(e,4,this.length),i.read(this,e,!1,23,4)},t.prototype.readDoubleLE=function(e,t){return e>>>=0,t||x(e,8,this.length),i.read(this,e,!0,52,8)},t.prototype.readDoubleBE=function(e,t){return e>>>=0,t||x(e,8,this.length),i.read(this,e,!1,52,8)},t.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||S(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},t.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||S(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;0<=--i&&(o*=256);)this[t+i]=e/o&255;return t+n},t.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,1,255,0),this[t]=255&e,t+1},t.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},t.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeIntLE=function(e,t,n,r){e=+e,t>>>=0,r||S(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var i=0,o=1,a=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/o|0)-a&255;return t+n},t.prototype.writeIntBE=function(e,t,n,r){e=+e,t>>>=0,r||S(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var i=n-1,o=1,a=0;for(this[t+i]=255&e;0<=--i&&(o*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/o|0)-a&255;return t+n},t.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,1,127,-128),this[t]=255&(e=e<0?255+e+1:e),t+1},t.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},t.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,4,2147483647,-2147483648),this[t]=(e=e<0?4294967295+e+1:e)>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeFloatLE=function(e,t,n){return E(this,e,t,!0,n)},t.prototype.writeFloatBE=function(e,t,n){return E(this,e,t,!1,n)},t.prototype.writeDoubleLE=function(e,t,n){return I(this,e,t,!0,n)},t.prototype.writeDoubleBE=function(e,t,n){return I(this,e,t,!1,n)},t.prototype.copy=function(e,n,r,i){if(!t.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r=r||0,i||0===i||(i=this.length),n>=e.length&&(n=e.length),(i=0<i&&i<r?r:i)===r)return 0;if(0===e.length||0===this.length)return 0;if((n=n||0)<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length);var o=(i=e.length-n<i-r?e.length-n+r:i)-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(n,r,i);else if(this===e&&r<n&&n<i)for(var a=o-1;0<=a;--a)e[a+n]=this[a+r];else Uint8Array.prototype.set.call(e,this.subarray(r,i),n);return o},t.prototype.fill=function(e,n,r,i){if("string"==typeof e){if("string"==typeof n?(i=n,n=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!t.isEncoding(i))throw new TypeError("Unknown encoding: "+i);var o;1===e.length&&(o=e.charCodeAt(0),("utf8"===i&&o<128||"latin1"===i)&&(e=o))}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(n<0||this.length<n||this.length<r)throw new RangeError("Out of range index");var a;if(!(r<=n))if(n>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(e=e||0))for(a=n;a<r;++a)this[a]=e;else{var s=t.isBuffer(e)?e:t.from(e,i),l=s.length;if(0===l)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<r-n;++a)this[a+n]=s[a%l]}return this};var k=/[^+/0-9A-Za-z-_]/g;function j(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],a=0;a<r;++a){if(55295<(n=e.charCodeAt(a))&&n<57344){if(!i){if(56319<n){-1<(t-=3)&&o.push(239,191,189);continue}if(a+1===r){-1<(t-=3)&&o.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(t-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(t-=3)&&o.push(239,191,189);if(i=null,n<128){if(--t<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function A(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(k,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function C(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function O(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function M(e){return e!=e}var N=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}()}).call(this,e("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:254}],5:[function(e,t,n){t.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},{}],6:[function(e,t,n){var r=e("../internals/is-object");t.exports=function(e){if(r(e)||null===e)return e;throw TypeError("Can't set "+String(e)+" as a prototype")}},{"../internals/is-object":75}],7:[function(e,t,n){var r=e("../internals/well-known-symbol"),i=e("../internals/object-create"),o=(e=e("../internals/object-define-property"),r("unscopables")),a=Array.prototype;null==a[o]&&e.f(a,o,{configurable:!0,value:i(null)}),t.exports=function(e){a[o][e]=!0}},{"../internals/object-create":91,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],8:[function(e,t,n){"use strict";var r=e("../internals/string-multibyte").charAt;t.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},{"../internals/string-multibyte":125}],9:[function(e,t,n){t.exports=function(e,t,n){if(e instanceof t)return e;throw TypeError("Incorrect "+(n?n+" ":"")+"invocation")}},{}],10:[function(e,t,n){var r=e("../internals/is-object");t.exports=function(e){if(r(e))return e;throw TypeError(String(e)+" is not an object")}},{"../internals/is-object":75}],11:[function(e,t,n){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},{}],12:[function(e,t,n){"use strict";function r(e){return l(e)&&c(I,u(e))}var i,o=e("../internals/array-buffer-native"),a=e("../internals/descriptors"),s=e("../internals/global"),l=e("../internals/is-object"),c=e("../internals/has"),u=e("../internals/classof"),p=e("../internals/create-non-enumerable-property"),d=e("../internals/redefine"),h=e("../internals/object-define-property").f,m=e("../internals/object-get-prototype-of"),f=e("../internals/object-set-prototype-of"),g=e("../internals/well-known-symbol"),y=(e=e("../internals/uid"),s.Int8Array),_=y&&y.prototype,v=(v=s.Uint8ClampedArray)&&v.prototype,b=y&&m(y),w=_&&m(_),x=Object.prototype,S=x.isPrototypeOf,T=(g=g("toStringTag"),e("TYPED_ARRAY_TAG")),E=o&&!!f&&"Opera"!==u(s.opera),I=(e=!1,{Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8});for(i in I)s[i]||(E=!1);if((!E||"function"!=typeof b||b===Function.prototype)&&(b=function(){throw TypeError("Incorrect invocation")},E))for(i in I)s[i]&&f(s[i],b);if((!E||!w||w===x)&&(w=b.prototype,E))for(i in I)s[i]&&f(s[i].prototype,w);if(E&&m(v)!==w&&f(v,w),a&&!c(w,g))for(i in e=!0,h(w,g,{get:function(){return l(this)?this[T]:void 0}}),I)s[i]&&p(s[i],T,i);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:E,TYPED_ARRAY_TAG:e&&T,aTypedArray:function(e){if(r(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(f){if(S.call(b,e))return e}else for(var t in I)if(c(I,i)&&(t=s[t])&&(e===t||S.call(t,e)))return e;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n){if(a){if(n)for(var r in I)(r=s[r])&&c(r.prototype,e)&&delete r.prototype[e];w[e]&&!n||d(w,e,!n&&E&&_[e]||t)}},exportTypedArrayStaticMethod:function(e,t,n){var r,i;if(a){if(f){if(n)for(r in I)(i=s[r])&&c(i,e)&&delete i[e];if(b[e]&&!n)return;try{return d(b,e,!n&&E&&y[e]||t)}catch(e){}}for(r in I)!(i=s[r])||i[e]&&!n||d(i,e,t)}},isView:function(e){return"DataView"===(e=u(e))||c(I,e)},isTypedArray:r,TypedArray:b,TypedArrayPrototype:w}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":110,"../internals/uid":147,"../internals/well-known-symbol":150}],13:[function(e,t,n){"use strict";function r(e){return[255&e]}function i(e){return[255&e,e>>8&255]}function o(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function a(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function s(e){return U(e,23,4)}function l(e){return U(e,52,8)}function c(e,t){I(e[N],t,{get:function(){return A(this)[t]}})}function u(e,t,n,r){if((n=w(n))+t>(e=A(e)).byteLength)throw B(R);var i=A(e.buffer).bytes;return n+=e.byteOffset,e=i.slice(n,n+t),r?e:e.reverse()}function p(e,t,n,r,i,o){if((n=w(n))+t>(e=A(e)).byteLength)throw B(R);for(var a=A(e.buffer).bytes,s=n+e.byteOffset,l=r(+i),c=0;c<t;c++)a[s+c]=l[o?c:t-c-1]}var d=e("../internals/global"),h=e("../internals/descriptors"),m=e("../internals/array-buffer-native"),f=e("../internals/create-non-enumerable-property"),g=e("../internals/redefine-all"),y=e("../internals/fails"),_=e("../internals/an-instance"),v=e("../internals/to-integer"),b=e("../internals/to-length"),w=e("../internals/to-index"),x=e("../internals/ieee754"),S=e("../internals/object-get-prototype-of"),T=e("../internals/object-set-prototype-of"),E=e("../internals/object-get-own-property-names").f,I=e("../internals/object-define-property").f,k=e("../internals/array-fill"),j=e("../internals/set-to-string-tag"),A=(e=e("../internals/internal-state")).get,C=e.set,O="ArrayBuffer",M="DataView",N="prototype",R="Wrong index",P=d[O],D=P,L=d[M],F=(e=L&&L[N],Object.prototype),B=d.RangeError,U=x.pack,V=x.unpack;if(m){if(!y((function(){P(1)}))||!y((function(){new P(-1)}))||y((function(){return new P,new P(1.5),new P(NaN),P.name!=O}))){d=(D=function(e){return _(this,D),new P(w(e))})[N]=P[N];for(var G,z=E(P),$=0;z.length>$;)(G=z[$++])in D||f(D,G,P[G]);d.constructor=D}T&&S(e)!==F&&T(e,F),x=new L(new D(2));var q=e.setInt8;x.setInt8(0,2147483648),x.setInt8(1,2147483649),!x.getInt8(0)&&x.getInt8(1)||g(e,{setInt8:function(e,t){q.call(this,e,t<<24>>24)},setUint8:function(e,t){q.call(this,e,t<<24>>24)}},{unsafe:!0})}else D=function(e){_(this,D,O),e=w(e),C(this,{bytes:k.call(new Array(e),0),byteLength:e}),h||(this.byteLength=e)},L=function(e,t,n){_(this,L,M),_(e,D,M);var r=A(e).byteLength;if((t=v(t))<0||r<t)throw B("Wrong offset");if(r<t+(n=void 0===n?r-t:b(n)))throw B("Wrong length");C(this,{buffer:e,byteLength:n,byteOffset:t}),h||(this.buffer=e,this.byteLength=n,this.byteOffset=t)},h&&(c(D,"byteLength"),c(L,"buffer"),c(L,"byteLength"),c(L,"byteOffset")),g(L[N],{getInt8:function(e){return u(this,1,e)[0]<<24>>24},getUint8:function(e){return u(this,1,e)[0]},getInt16:function(e){return((e=u(this,2,e,1<arguments.length?arguments[1]:void 0))[1]<<8|e[0])<<16>>16},getUint16:function(e){return(e=u(this,2,e,1<arguments.length?arguments[1]:void 0))[1]<<8|e[0]},getInt32:function(e){return a(u(this,4,e,1<arguments.length?arguments[1]:void 0))},getUint32:function(e){return a(u(this,4,e,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(e){return V(u(this,4,e,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(e){return V(u(this,8,e,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(e,t){p(this,1,e,r,t)},setUint8:function(e,t){p(this,1,e,r,t)},setInt16:function(e,t){p(this,2,e,i,t,2<arguments.length?arguments[2]:void 0)},setUint16:function(e,t){p(this,2,e,i,t,2<arguments.length?arguments[2]:void 0)},setInt32:function(e,t){p(this,4,e,o,t,2<arguments.length?arguments[2]:void 0)},setUint32:function(e,t){p(this,4,e,o,t,2<arguments.length?arguments[2]:void 0)},setFloat32:function(e,t){p(this,4,e,s,t,2<arguments.length?arguments[2]:void 0)},setFloat64:function(e,t){p(this,8,e,l,t,2<arguments.length?arguments[2]:void 0)}});j(D,O),j(L,M),t.exports={ArrayBuffer:D,DataView:L}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/ieee754":66,"../internals/internal-state":71,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine-all":109,"../internals/set-to-string-tag":119,"../internals/to-index":135,"../internals/to-integer":137,"../internals/to-length":138}],14:[function(e,t,n){"use strict";var r=e("../internals/to-object"),i=e("../internals/to-absolute-index"),o=e("../internals/to-length"),a=Math.min;t.exports=[].copyWithin||function(e,t){var n=r(this),s=o(n.length),l=i(e,s),c=i(t,s),u=a((void 0===(e=2<arguments.length?arguments[2]:void 0)?s:i(e,s))-c,s-l),p=1;for(c<l&&l<c+u&&(p=-1,c+=u-1,l+=u-1);0<u--;)c in n?n[l]=n[c]:delete n[l],l+=p,c+=p;return n}},{"../internals/to-absolute-index":134,"../internals/to-length":138,"../internals/to-object":139}],15:[function(e,t,n){"use strict";var r=e("../internals/to-object"),i=e("../internals/to-absolute-index"),o=e("../internals/to-length");t.exports=function(e){for(var t,n=r(this),a=o(n.length),s=i(1<(t=arguments.length)?arguments[1]:void 0,a),l=void 0===(t=2<t?arguments[2]:void 0)?a:i(t,a);s<l;)n[s++]=e;return n}},{"../internals/to-absolute-index":134,"../internals/to-length":138,"../internals/to-object":139}],16:[function(e,t,n){"use strict";var r=e("../internals/array-iteration").forEach,i=e("../internals/array-method-is-strict");e=e("../internals/array-method-uses-to-length"),i=i("forEach"),e=e("forEach"),t.exports=i&&e?[].forEach:function(e){return r(this,e,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(e,t,n){"use strict";var r=e("../internals/function-bind-context"),i=e("../internals/to-object"),o=e("../internals/call-with-safe-iteration-closing"),a=e("../internals/is-array-iterator-method"),s=e("../internals/to-length"),l=e("../internals/create-property"),c=e("../internals/get-iterator-method");t.exports=function(e){var t,n,u,p,d,h,m=i(e),f=(e="function"==typeof this?this:Array,arguments.length),g=1<f?arguments[1]:void 0,y=void 0!==g,_=c(m),v=0;if(y&&(g=r(g,2<f?arguments[2]:void 0,2)),null==_||e==Array&&a(_))for(n=new e(t=s(m.length));v<t;v++)h=y?g(m[v],v):m[v],l(n,v,h);else for(d=(p=_.call(m)).next,n=new e;!(u=d.call(p)).done;v++)h=y?o(p,g,[u.value,v],!0):u.value,l(n,v,h);return n.length=v,n}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138,"../internals/to-object":139}],18:[function(e,t,n){function r(e){return function(t,n,r){var s,l=i(t),c=o(l.length),u=a(r,c);if(e&&n!=n){for(;u<c;)if((s=l[u++])!=s)return!0}else for(;u<c;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}}var i=e("../internals/to-indexed-object"),o=e("../internals/to-length"),a=e("../internals/to-absolute-index");t.exports={includes:r(!0),indexOf:r(!1)}},{"../internals/to-absolute-index":134,"../internals/to-indexed-object":136,"../internals/to-length":138}],19:[function(e,t,n){function r(e){var t=1==e,n=2==e,r=3==e,u=4==e,p=6==e,d=5==e||p;return function(h,m,f,g){for(var y,_,v=a(h),b=o(v),w=i(m,f,3),x=s(b.length),S=0,T=(m=g||l,t?m(h,x):n?m(h,0):void 0);S<x;S++)if((d||S in b)&&(_=w(y=b[S],S,v),e))if(t)T[S]=_;else if(_)switch(e){case 3:return!0;case 5:return y;case 6:return S;case 2:c.call(T,y)}else if(u)return!1;return p?-1:r||u?u:T}}var i=e("../internals/function-bind-context"),o=e("../internals/indexed-object"),a=e("../internals/to-object"),s=e("../internals/to-length"),l=e("../internals/array-species-create"),c=[].push;t.exports={forEach:r(0),map:r(1),filter:r(2),some:r(3),every:r(4),find:r(5),findIndex:r(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":55,"../internals/indexed-object":67,"../internals/to-length":138,"../internals/to-object":139}],20:[function(e,t,n){"use strict";var r=e("../internals/to-indexed-object"),i=e("../internals/to-integer"),o=e("../internals/to-length"),a=e("../internals/array-method-is-strict"),s=(e=e("../internals/array-method-uses-to-length"),Math.min),l=[].lastIndexOf,c=!!l&&1/[1].lastIndexOf(1,-0)<0;a=a("lastIndexOf"),e=e("indexOf",{ACCESSORS:!0,1:0}),t.exports=!c&&a&&e?l:function(e){if(c)return l.apply(this,arguments)||0;var t=r(this),n=o(t.length),a=n-1;for((a=1<arguments.length?s(a,i(arguments[1])):a)<0&&(a=n+a);0<=a;a--)if(a in t&&t[a]===e)return a||0;return-1}},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":136,"../internals/to-integer":137,"../internals/to-length":138}],21:[function(e,t,n){var r=e("../internals/fails"),i=e("../internals/well-known-symbol"),o=e("../internals/engine-v8-version"),a=i("species");t.exports=function(e){return 51<=o||!r((function(){var t=[];return(t.constructor={})[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":150}],22:[function(e,t,n){"use strict";var r=e("../internals/fails");t.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},{"../internals/fails":51}],23:[function(e,t,n){function r(e){throw e}var i=e("../internals/descriptors"),o=e("../internals/fails"),a=e("../internals/has"),s=Object.defineProperty,l={};t.exports=function(e,t){var n,c,u,p;return a(l,e)?l[e]:(n=[][e],c=!!a(t=t||{},"ACCESSORS")&&t.ACCESSORS,u=a(t,0)?t[0]:r,p=a(t,1)?t[1]:void 0,l[e]=!!n&&!o((function(){if(c&&!i)return!0;var e={length:-1};c?s(e,1,{enumerable:!0,get:r}):e[1]=1,n.call(e,u,p)})))}},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":61}],24:[function(e,t,n){function r(e){return function(t,n,r,l){i(n);var c=o(t),u=a(c),p=s(c.length),d=e?p-1:0,h=e?-1:1;if(r<2)for(;;){if(d in u){l=u[d],d+=h;break}if(d+=h,e?d<0:p<=d)throw TypeError("Reduce of empty array with no initial value")}for(;e?0<=d:d<p;d+=h)d in u&&(l=n(l,u[d],d,c));return l}}var i=e("../internals/a-function"),o=e("../internals/to-object"),a=e("../internals/indexed-object"),s=e("../internals/to-length");t.exports={left:r(!1),right:r(!0)}},{"../internals/a-function":5,"../internals/indexed-object":67,"../internals/to-length":138,"../internals/to-object":139}],25:[function(e,t,n){var r=e("../internals/is-object"),i=e("../internals/is-array"),o=e("../internals/well-known-symbol")("species");t.exports=function(e,t){var n;return new(void 0===(n=i(e)&&("function"==typeof(n=e.constructor)&&(n===Array||i(n.prototype))||r(n)&&null===(n=n[o]))?void 0:n)?Array:n)(0===t?0:t)}},{"../internals/is-array":73,"../internals/is-object":75,"../internals/well-known-symbol":150}],26:[function(e,t,n){var r=e("../internals/an-object");t.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){throw void 0!==(i=e.return)&&r(i.call(e)),t}}},{"../internals/an-object":10}],27:[function(e,t,n){var r=e("../internals/well-known-symbol")("iterator"),i=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){i=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(e){}t.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o={};o[r]=function(){return{next:function(){return{done:n=!0}}}},e(o)}catch(e){}return n}},{"../internals/well-known-symbol":150}],28:[function(e,t,n){var r={}.toString;t.exports=function(e){return r.call(e).slice(8,-1)}},{}],29:[function(e,t,n){var r=e("../internals/to-string-tag-support"),i=e("../internals/classof-raw"),o=e("../internals/well-known-symbol")("toStringTag"),a="Arguments"==i(function(){return arguments}());t.exports=r?i:function(e){var t;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(t=function(e,t){try{return e[t]}catch(e){}}(e=Object(e),o))?t:a?i(e):"Object"==(t=i(e))&&"function"==typeof e.callee?"Arguments":t}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":143,"../internals/well-known-symbol":150}],30:[function(e,t,n){"use strict";var r=e("../internals/object-define-property").f,i=e("../internals/object-create"),o=e("../internals/redefine-all"),a=e("../internals/function-bind-context"),s=e("../internals/an-instance"),l=e("../internals/iterate"),c=e("../internals/define-iterator"),u=e("../internals/set-species"),p=e("../internals/descriptors"),d=e("../internals/internal-metadata").fastKey,h=(e=e("../internals/internal-state")).set,m=e.getterFor;t.exports={getConstructor:function(e,t,n,c){function u(e,t,n){var r,i=y(e),o=f(e,t);return o?o.value=n:(i.last=o={index:r=d(t,!0),key:t,value:n,previous:t=i.last,next:void 0,removed:!1},i.first||(i.first=o),t&&(t.next=o),p?i.size++:e.size++,"F"!==r&&(i.index[r]=o)),e}function f(e,t){e=y(e);var n,r=d(t);if("F"!==r)return e.index[r];for(n=e.first;n;n=n.next)if(n.key==t)return n}var g=e((function(e,r){s(e,g,t),h(e,{type:t,index:i(null),first:void 0,last:void 0,size:0}),p||(e.size=0),null!=r&&l(r,e[c],e,n)})),y=m(t);return o(g.prototype,{clear:function(){for(var e=y(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,p?e.size=0:this.size=0},delete:function(e){var t,n,r=y(this);return(e=f(this,e))&&(t=e.next,n=e.previous,delete r.index[e.index],e.removed=!0,n&&(n.next=t),t&&(t.previous=n),r.first==e&&(r.first=t),r.last==e&&(r.last=n),p?r.size--:this.size--),!!e},forEach:function(e){for(var t,n=y(this),r=a(e,1<arguments.length?arguments[1]:void 0,3);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!f(this,e)}}),o(g.prototype,n?{get:function(e){return(e=f(this,e))&&e.value},set:function(e,t){return u(this,0===e?0:e,t)}}:{add:function(e){return u(this,e=0===e?0:e,e)}}),p&&r(g.prototype,"size",{get:function(){return y(this).size}}),g},setStrong:function(e,t,n){var r=t+" Iterator",i=m(t),o=m(r);c(e,t,(function(e,t){h(this,{type:r,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:e.target=void 0,done:!0}}),n?"entries":"values",!n,!0),u(t)}}},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":55,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/iterate":78,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/redefine-all":109,"../internals/set-species":118}],31:[function(e,t,n){"use strict";function r(e){return e.frozen||(e.frozen=new i)}function i(){this.entries=[]}function o(e,t){return g(e.entries,(function(e){return e[0]===t}))}var a=e("../internals/redefine-all"),s=e("../internals/internal-metadata").getWeakData,l=e("../internals/an-object"),c=e("../internals/is-object"),u=e("../internals/an-instance"),p=e("../internals/iterate"),d=e("../internals/array-iteration"),h=e("../internals/has"),m=(e=e("../internals/internal-state")).set,f=e.getterFor,g=d.find,y=d.findIndex,_=0;i.prototype={get:function(e){if(e=o(this,e))return e[1]},has:function(e){return!!o(this,e)},set:function(e,t){var n=o(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=y(this.entries,(function(t){return t[0]===e}));return~t&&this.entries.splice(t,1),!!~t}},t.exports={getConstructor:function(e,t,n,i){function o(e,t,n){var i=g(e),o=s(l(t),!0);return!0===o?r(i).set(t,n):o[i.id]=n,e}var d=e((function(e,r){u(e,d,t),m(e,{type:t,id:_++,frozen:void 0}),null!=r&&p(r,e[i],e,n)})),g=f(t);return a(d.prototype,{delete:function(e){var t,n=g(this);return!!c(e)&&(!0===(t=s(e))?r(n).delete(e):t&&h(t,n.id)&&delete t[n.id])},has:function(e){var t,n=g(this);return!!c(e)&&(!0===(t=s(e))?r(n).has(e):t&&h(t,n.id))}}),a(d.prototype,n?{get:function(e){var t,n=g(this);if(c(e))return!0===(t=s(e))?r(n).get(e):t?t[n.id]:void 0},set:function(e,t){return o(this,e,t)}}:{add:function(e){return o(this,e,!0)}}),d}}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":61,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine-all":109}],32:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/global"),o=e("../internals/is-forced"),a=e("../internals/redefine"),s=e("../internals/internal-metadata"),l=e("../internals/iterate"),c=e("../internals/an-instance"),u=e("../internals/is-object"),p=e("../internals/fails"),d=e("../internals/check-correctness-of-iteration"),h=e("../internals/set-to-string-tag"),m=e("../internals/inherit-if-required");t.exports=function(e,t,n){function f(e){var t=E[e];a(E,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(x&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return x&&!u(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(x&&!u(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})}var g,y,_,v,b,w=-1!==e.indexOf("Map"),x=-1!==e.indexOf("Weak"),S=w?"set":"add",T=i[e],E=T&&T.prototype,I=T,k={};return o(e,"function"!=typeof T||!(x||E.forEach&&!p((function(){(new T).entries().next()}))))?(I=n.getConstructor(t,e,w,S),s.REQUIRED=!0):o(e,!0)&&(y=(g=new I)[S](x?{}:-0,1)!=g,_=p((function(){g.has(1)})),v=d((function(e){new T(e)})),b=!x&&p((function(){for(var e=new T,t=5;t--;)e[S](t,t);return!e.has(-0)})),v||(((I=t((function(t,n){return c(t,I,e),t=m(new T,t,I),null!=n&&l(n,t[S],t,w),t}))).prototype=E).constructor=I),(_||b)&&(f("delete"),f("has"),w&&f("get")),(b||y)&&f(S),x&&E.clear&&delete E.clear),k[e]=I,r({global:!0,forced:I!=T},k),h(I,e),x||n.setStrong(I,e,w),I}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-metadata":70,"../internals/is-forced":74,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine":110,"../internals/set-to-string-tag":119}],33:[function(e,t,n){var r=e("../internals/has"),i=e("../internals/own-keys"),o=e("../internals/object-get-own-property-descriptor"),a=e("../internals/object-define-property");t.exports=function(e,t){for(var n=i(t),s=a.f,l=o.f,c=0;c<n.length;c++){var u=n[c];r(e,u)||s(e,u,l(t,u))}}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/own-keys":105}],34:[function(e,t,n){var r=e("../internals/well-known-symbol")("match");t.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(e){}}return!1}},{"../internals/well-known-symbol":150}],35:[function(e,t,n){e=e("../internals/fails"),t.exports=!e((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},{"../internals/fails":51}],36:[function(e,t,n){var r=e("../internals/require-object-coercible"),i=/"/g;t.exports=function(e,t,n,o){e=String(r(e));var a="<"+t;return""!==n&&(a+=" "+n+'="'+String(o).replace(i,"&quot;")+'"'),a+">"+e+"</"+t+">"}},{"../internals/require-object-coercible":115}],37:[function(e,t,n){"use strict";function r(){return this}var i=e("../internals/iterators-core").IteratorPrototype,o=e("../internals/object-create"),a=e("../internals/create-property-descriptor"),s=e("../internals/set-to-string-tag"),l=e("../internals/iterators");t.exports=function(e,t,n){return t+=" Iterator",e.prototype=o(i,{next:a(1,n)}),s(e,t,!1,!0),l[t]=r,e}},{"../internals/create-property-descriptor":39,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-create":91,"../internals/set-to-string-tag":119}],38:[function(e,t,n){var r=e("../internals/descriptors"),i=e("../internals/object-define-property"),o=e("../internals/create-property-descriptor");t.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":93}],39:[function(e,t,n){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],40:[function(e,t,n){"use strict";var r=e("../internals/to-primitive"),i=e("../internals/object-define-property"),o=e("../internals/create-property-descriptor");t.exports=function(e,t,n){(t=r(t))in e?i.f(e,t,o(0,n)):e[t]=n}},{"../internals/create-property-descriptor":39,"../internals/object-define-property":93,"../internals/to-primitive":142}],41:[function(e,t,n){"use strict";function r(){return this}var i=e("../internals/export"),o=e("../internals/create-iterator-constructor"),a=e("../internals/object-get-prototype-of"),s=e("../internals/object-set-prototype-of"),l=e("../internals/set-to-string-tag"),c=e("../internals/create-non-enumerable-property"),u=e("../internals/redefine"),p=e("../internals/well-known-symbol"),d=e("../internals/is-pure"),h=e("../internals/iterators"),m=(e=e("../internals/iterators-core")).IteratorPrototype,f=e.BUGGY_SAFARI_ITERATORS,g=p("iterator"),y="values",_="entries";t.exports=function(e,t,n,p,v,b,w){function x(e){if(e===v&&j)return j;if(!f&&e in I)return I[e];switch(e){case"keys":case y:case _:return function(){return new n(this,e)}}return function(){return new n(this)}}o(n,t,p),p=t+" Iterator";var S,T,E=!1,I=e.prototype,k=I[g]||I["@@iterator"]||v&&I[v],j=!f&&k||x(v),A="Array"==t&&I.entries||k;if(A&&(A=a(A.call(new e)),m!==Object.prototype&&A.next&&(d||a(A)===m||(s?s(A,m):"function"!=typeof A[g]&&c(A,g,r)),l(A,p,!0,!0),d&&(h[p]=r))),v==y&&k&&k.name!==y&&(E=!0,j=function(){return k.call(this)}),d&&!w||I[g]===j||c(I,g,j),h[t]=j,v)if(S={values:x(y),keys:b?j:x("keys"),entries:x(_)},w)for(T in S)!f&&!E&&T in I||u(I,T,S[T]);else i({target:t,proto:!0,forced:f||E},S);return S}},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":76,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/well-known-symbol":150}],42:[function(e,t,n){var r=e("../internals/path"),i=e("../internals/has"),o=e("../internals/well-known-symbol-wrapped"),a=e("../internals/object-define-property").f;t.exports=function(e){var t=r.Symbol||(r.Symbol={});i(t,e)||a(t,e,{value:o.f(e)})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/path":106,"../internals/well-known-symbol-wrapped":149}],43:[function(e,t,n){e=e("../internals/fails"),t.exports=!e((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},{"../internals/fails":51}],44:[function(e,t,n){var r=e("../internals/global"),i=(e=e("../internals/is-object"),r.document),o=e(i)&&e(i.createElement);t.exports=function(e){return o?i.createElement(e):{}}},{"../internals/global":60,"../internals/is-object":75}],45:[function(e,t,n){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],46:[function(e,t,n){e=e("../internals/engine-user-agent"),t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(e)},{"../internals/engine-user-agent":47}],47:[function(e,t,n){e=e("../internals/get-built-in"),t.exports=e("navigator","userAgent")||""},{"../internals/get-built-in":57}],48:[function(e,t,n){var r,i,o=e("../internals/global");e=e("../internals/engine-user-agent"),(o=(o=(o=o.process)&&o.versions)&&o.v8)?i=(r=o.split("."))[0]+r[1]:e&&(!(r=e.match(/Edge\/(\d+)/))||74<=r[1])&&(r=e.match(/Chrome\/(\d+)/))&&(i=r[1]),t.exports=i&&+i},{"../internals/engine-user-agent":47,"../internals/global":60}],49:[function(e,t,n){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],50:[function(e,t,n){var r=e("../internals/global"),i=e("../internals/object-get-own-property-descriptor").f,o=e("../internals/create-non-enumerable-property"),a=e("../internals/redefine"),s=e("../internals/set-global"),l=e("../internals/copy-constructor-properties"),c=e("../internals/is-forced");t.exports=function(e,t){var n,u,p,d=e.target,h=e.global,m=e.stat,f=h?r:m?r[d]||s(d,{}):(r[d]||{}).prototype;if(f)for(n in t){if(u=t[n],p=e.noTargetGet?(p=i(f,n))&&p.value:f[n],!c(h?n:d+(m?".":"#")+n,e.forced)&&void 0!==p){if(typeof u==typeof p)continue;l(u,p)}(e.sham||p&&p.sham)&&o(u,"sham",!0),a(f,n,u,e)}}},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/is-forced":74,"../internals/object-get-own-property-descriptor":94,"../internals/redefine":110,"../internals/set-global":117}],51:[function(e,t,n){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],52:[function(e,t,n){"use strict";e("../modules/es.regexp.exec");var r=e("../internals/redefine"),i=e("../internals/fails"),o=e("../internals/well-known-symbol"),a=e("../internals/regexp-exec"),s=e("../internals/create-non-enumerable-property"),l=o("species"),c=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u="$0"==="a".replace(/./,"$0"),p=!!/./[e=o("replace")]&&""===/./[e]("a","$0"),d=!i((function(){var e=(t=/(?:)/).exec,t=(t.exec=function(){return e.apply(this,arguments)},"ab".split(t));return 2!==t.length||"a"!==t[0]||"b"!==t[1]}));t.exports=function(e,t,n,h){var m,f,g=o(e),y=!i((function(){var t={};return t[g]=function(){return 7},7!=""[e](t)})),_=y&&!i((function(){var t=!1,n=/a/;return"split"===e&&((n={constructor:{}}).constructor[l]=function(){return n},n.flags="",n[g]=/./[g]),n.exec=function(){return t=!0,null},n[g](""),!t}));y&&_&&("replace"!==e||c&&u&&!p)&&("split"!==e||d)||(m=/./[g],n=(_=n(g,""[e],(function(e,t,n,r,i){return t.exec===a?y&&!i?{done:!0,value:m.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:p}))[0],f=_[1],r(String.prototype,e,n),r(RegExp.prototype,g,2==t?function(e,t){return f.call(e,this,t)}:function(e){return f.call(e,this)})),h&&s(RegExp.prototype[g],"sham",!0)}},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":110,"../internals/regexp-exec":112,"../internals/well-known-symbol":150,"../modules/es.regexp.exec":195}],53:[function(e,t,n){"use strict";var r=e("../internals/is-array"),i=e("../internals/to-length"),o=e("../internals/function-bind-context");t.exports=function e(t,n,a,s,l,c,u,p){for(var d,h=l,m=0,f=!!u&&o(u,p,3);m<s;){if(m in a){if(d=f?f(a[m],m,n):a[m],0<c&&r(d))h=e(t,n,d,i(d.length),h,c-1)-1;else{if(9007199254740991<=h)throw TypeError("Exceed the acceptable array length");t[h]=d}h++}m++}return h}},{"../internals/function-bind-context":55,"../internals/is-array":73,"../internals/to-length":138}],54:[function(e,t,n){e=e("../internals/fails"),t.exports=!e((function(){return Object.isExtensible(Object.preventExtensions({}))}))},{"../internals/fails":51}],55:[function(e,t,n){var r=e("../internals/a-function");t.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},{"../internals/a-function":5}],56:[function(e,t,n){"use strict";var r=e("../internals/a-function"),i=e("../internals/is-object"),o=[].slice,a={};t.exports=Function.bind||function(e){var t=r(this),n=o.call(arguments,1),s=function(){var r=n.concat(o.call(arguments));if(this instanceof s){var i=t,l=r.length,c=r;if(!(l in a)){for(var u=[],p=0;p<l;p++)u[p]="a["+p+"]";a[l]=Function("C,a","return new C("+u.join(",")+")")}return a[l](i,c)}return t.apply(e,r)};return i(t.prototype)&&(s.prototype=t.prototype),s}},{"../internals/a-function":5,"../internals/is-object":75}],57:[function(e,t,n){function r(e){return"function"==typeof e?e:void 0}var i=e("../internals/path"),o=e("../internals/global");t.exports=function(e,t){return arguments.length<2?r(i[e])||r(o[e]):i[e]&&i[e][t]||o[e]&&o[e][t]}},{"../internals/global":60,"../internals/path":106}],58:[function(e,t,n){var r=e("../internals/classof"),i=e("../internals/iterators"),o=e("../internals/well-known-symbol")("iterator");t.exports=function(e){if(null!=e)return e[o]||e["@@iterator"]||i[r(e)]}},{"../internals/classof":29,"../internals/iterators":80,"../internals/well-known-symbol":150}],59:[function(e,t,n){var r=e("../internals/an-object"),i=e("../internals/get-iterator-method");t.exports=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return r(t.call(e))}},{"../internals/an-object":10,"../internals/get-iterator-method":58}],60:[function(e,t,n){(function(e){function n(e){return e&&e.Math==Math&&e}t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||Function("return this")()}).call(this,void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],61:[function(e,t,n){var r={}.hasOwnProperty;t.exports=function(e,t){return r.call(e,t)}},{}],62:[function(e,t,n){t.exports={}},{}],63:[function(e,t,n){var r=e("../internals/global");t.exports=function(e,t){var n=r.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},{"../internals/global":60}],64:[function(e,t,n){e=e("../internals/get-built-in"),t.exports=e("document","documentElement")},{"../internals/get-built-in":57}],65:[function(e,t,n){var r=e("../internals/descriptors"),i=e("../internals/fails"),o=e("../internals/document-create-element");t.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],66:[function(e,t,n){var r=Math.abs,i=Math.pow,o=Math.floor,a=Math.log,s=Math.LN2;t.exports={pack:function(e,t,n){var l,c,u,p=new Array(n),d=8*n-t-1,h=(n=(1<<d)-1)>>1,m=23===t?i(2,-24)-i(2,-77):0,f=e<0||0===e&&1/e<0?1:0,g=0;for((e=r(e))!=e||e===1/0?(c=e!=e?1:0,l=n):(l=o(a(e)/s),e*(u=i(2,-l))<1&&(l--,u*=2),2<=(e+=1<=l+h?m/u:m*i(2,1-h))*u&&(l++,u/=2),n<=l+h?(c=0,l=n):1<=l+h?(c=(e*u-1)*i(2,t),l+=h):(c=e*i(2,h-1)*i(2,t),l=0));8<=t;p[g++]=255&c,c/=256,t-=8);for(l=l<<t|c,d+=t;0<d;p[g++]=255&l,l/=256,d-=8);return p[--g]|=128*f,p},unpack:function(e,t){var n,r,o=e.length,a=(1<<(r=8*o-t-1))-1,s=a>>1,l=r-7,c=o-1,u=127&(r=e[c--]);for(r>>=7;0<l;u=256*u+e[c],c--,l-=8);for(n=u&(1<<-l)-1,u>>=-l,l+=t;0<l;n=256*n+e[c],c--,l-=8);if(0===u)u=1-s;else{if(u===a)return n?NaN:r?-1/0:1/0;n+=i(2,t),u-=s}return(r?-1:1)*n*i(2,u-t)}}},{}],67:[function(e,t,n){var r=e("../internals/fails"),i=e("../internals/classof-raw"),o="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?o.call(e,""):Object(e)}:Object},{"../internals/classof-raw":28,"../internals/fails":51}],68:[function(e,t,n){var r=e("../internals/is-object"),i=e("../internals/object-set-prototype-of");t.exports=function(e,t,n){return i&&"function"==typeof(t=t.constructor)&&t!==n&&r(t=t.prototype)&&t!==n.prototype&&i(e,t),e}},{"../internals/is-object":75,"../internals/object-set-prototype-of":102}],69:[function(e,t,n){e=e("../internals/shared-store");var r=Function.toString;"function"!=typeof e.inspectSource&&(e.inspectSource=function(e){return r.call(e)}),t.exports=e.inspectSource},{"../internals/shared-store":121}],70:[function(e,t,n){function r(e){s(e,u,{value:{objectID:"O"+ ++p,weakData:{}}})}var i=e("../internals/hidden-keys"),o=e("../internals/is-object"),a=e("../internals/has"),s=e("../internals/object-define-property").f,l=e("../internals/uid"),c=e("../internals/freezing"),u=l("meta"),p=0,d=Object.isExtensible||function(){return!0},h=t.exports={REQUIRED:!1,fastKey:function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,u)){if(!d(e))return"F";if(!t)return"E";r(e)}return e[u].objectID},getWeakData:function(e,t){if(!a(e,u)){if(!d(e))return!0;if(!t)return!1;r(e)}return e[u].weakData},onFreeze:function(e){return c&&h.REQUIRED&&d(e)&&!a(e,u)&&r(e),e}};i[u]=!0},{"../internals/freezing":54,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/uid":147}],71:[function(e,t,n){var r,i,o,a,s,l,c,u,p=e("../internals/native-weak-map"),d=e("../internals/global"),h=e("../internals/is-object"),m=e("../internals/create-non-enumerable-property"),f=e("../internals/has"),g=e("../internals/shared-key");e=e("../internals/hidden-keys"),d=d.WeakMap,c=p?(r=new d,i=r.get,o=r.has,a=r.set,s=function(e,t){return a.call(r,e,t),t},l=function(e){return i.call(r,e)||{}},function(e){return o.call(r,e)}):(e[u=g("state")]=!0,s=function(e,t){return m(e,u,t),t},l=function(e){return f(e,u)?e[u]:{}},function(e){return f(e,u)}),t.exports={set:s,get:l,has:c,enforce:function(e){return c(e)?l(e):s(e,{})},getterFor:function(e){return function(t){if(h(t)&&(t=l(t)).type===e)return t;throw TypeError("Incompatible receiver, "+e+" required")}}}},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/shared-key":120}],72:[function(e,t,n){var r=e("../internals/well-known-symbol"),i=e("../internals/iterators"),o=r("iterator"),a=Array.prototype;t.exports=function(e){return void 0!==e&&(i.Array===e||a[o]===e)}},{"../internals/iterators":80,"../internals/well-known-symbol":150}],73:[function(e,t,n){var r=e("../internals/classof-raw");t.exports=Array.isArray||function(e){return"Array"==r(e)}},{"../internals/classof-raw":28}],74:[function(e,t,n){function r(e,t){return(e=s[a(e)])==c||e!=l&&("function"==typeof t?i(t):!!t)}var i=e("../internals/fails"),o=/#|\.prototype\./,a=r.normalize=function(e){return String(e).replace(o,".").toLowerCase()},s=r.data={},l=r.NATIVE="N",c=r.POLYFILL="P";t.exports=r},{"../internals/fails":51}],75:[function(e,t,n){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],76:[function(e,t,n){t.exports=!1},{}],77:[function(e,t,n){var r=e("../internals/is-object"),i=e("../internals/classof-raw"),o=e("../internals/well-known-symbol")("match");t.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},{"../internals/classof-raw":28,"../internals/is-object":75,"../internals/well-known-symbol":150}],78:[function(e,t,n){function r(e,t){this.stopped=e,this.result=t}var i=e("../internals/an-object"),o=e("../internals/is-array-iterator-method"),a=e("../internals/to-length"),s=e("../internals/function-bind-context"),l=e("../internals/get-iterator-method"),c=e("../internals/call-with-safe-iteration-closing");(t.exports=function(e,t,n,u,p){var d,h,m,f,g,y,_=s(t,n,u?2:1);if(p)d=e;else{if("function"!=typeof(t=l(e)))throw TypeError("Target is not iterable");if(o(t)){for(h=0,m=a(e.length);h<m;h++)if((f=u?_(i(y=e[h])[0],y[1]):_(e[h]))&&f instanceof r)return f;return new r(!1)}d=t.call(e)}for(g=d.next;!(y=g.call(d)).done;)if("object"==typeof(f=c(d,_,y.value,u))&&f&&f instanceof r)return f;return new r(!1)}).stop=function(e){return new r(!0,e)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138}],79:[function(e,t,n){"use strict";var r,i,o=e("../internals/object-get-prototype-of"),a=e("../internals/create-non-enumerable-property"),s=e("../internals/has"),l=e("../internals/well-known-symbol"),c=(e=e("../internals/is-pure"),l=l("iterator"),!1);[].keys&&("next"in(i=[].keys())?(o=o(o(i)))!==Object.prototype&&(r=o):c=!0),null==r&&(r={}),e||s(r,l)||a(r,l,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:c}},{"../internals/create-non-enumerable-property":38,"../internals/has":61,"../internals/is-pure":76,"../internals/object-get-prototype-of":98,"../internals/well-known-symbol":150}],80:[function(e,t,n){t.exports={}},{}],81:[function(e,t,n){t.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},{}],82:[function(e,t,n){var r,i,o,a,s,l,c,u,p=e("../internals/global"),d=e("../internals/object-get-own-property-descriptor").f,h=e("../internals/classof-raw"),m=e("../internals/task").set,f=(e=e("../internals/engine-is-ios"),p.MutationObserver||p.WebKitMutationObserver),g=p.process,y=p.Promise,_="process"==h(g);h=d(p,"queueMicrotask"),(d=h&&h.value)||(r=function(){var e,t;for(_&&(e=g.domain)&&e.exit();i;){t=i.fn,i=i.next;try{t()}catch(e){throw i?a():o=void 0,e}}o=void 0,e&&e.enter()},a=_?function(){g.nextTick(r)}:f&&!e?(s=!0,l=document.createTextNode(""),new f(r).observe(l,{characterData:!0}),function(){l.data=s=!s}):y&&y.resolve?(c=y.resolve(void 0),u=c.then,function(){u.call(c,r)}):function(){m.call(p,r)}),t.exports=d||function(e){e={fn:e,next:void 0},o&&(o.next=e),i||(i=e,a()),o=e}},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":60,"../internals/object-get-own-property-descriptor":94,"../internals/task":132}],83:[function(e,t,n){e=e("../internals/global"),t.exports=e.Promise},{"../internals/global":60}],84:[function(e,t,n){e=e("../internals/fails"),t.exports=!!Object.getOwnPropertySymbols&&!e((function(){return!String(Symbol())}))},{"../internals/fails":51}],85:[function(e,t,n){var r=e("../internals/fails"),i=e("../internals/well-known-symbol"),o=e("../internals/is-pure"),a=i("iterator");t.exports=!r((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),o&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},{"../internals/fails":51,"../internals/is-pure":76,"../internals/well-known-symbol":150}],86:[function(e,t,n){var r=e("../internals/global");e=e("../internals/inspect-source"),r=r.WeakMap,t.exports="function"==typeof r&&/native code/.test(e(r))},{"../internals/global":60,"../internals/inspect-source":69}],87:[function(e,t,n){"use strict";function r(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=i(t),this.reject=i(n)}var i=e("../internals/a-function");t.exports.f=function(e){return new r(e)}},{"../internals/a-function":5}],88:[function(e,t,n){var r=e("../internals/is-regexp");t.exports=function(e){if(r(e))throw TypeError("The method doesn't accept regular expressions");return e}},{"../internals/is-regexp":77}],89:[function(e,t,n){var r=e("../internals/global").isFinite;t.exports=Number.isFinite||function(e){return"number"==typeof e&&r(e)}},{"../internals/global":60}],90:[function(e,t,n){"use strict";var r=e("../internals/descriptors"),i=e("../internals/fails"),o=e("../internals/object-keys"),a=e("../internals/object-get-own-property-symbols"),s=e("../internals/object-property-is-enumerable"),l=e("../internals/to-object"),c=e("../internals/indexed-object"),u=Object.assign,p=Object.defineProperty;t.exports=!u||i((function(){var e,t,n,i;return!(!r||1===u({b:1},u(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)||(t={},i="abcdefghijklmnopqrst",(e={})[n=Symbol()]=7,i.split("").forEach((function(e){t[e]=e})),7!=u({},e)[n]||o(u({},t)).join("")!=i)}))?function(e,t){for(var n=l(e),i=arguments.length,u=1,p=a.f,d=s.f;u<i;)for(var h,m=c(arguments[u++]),f=p?o(m).concat(p(m)):o(m),g=f.length,y=0;y<g;)h=f[y++],r&&!d.call(m,h)||(n[h]=m[h]);return n}:u},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":67,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/to-object":139}],91:[function(e,t,n){function r(){}var i,o=e("../internals/an-object"),a=e("../internals/object-define-properties"),s=e("../internals/enum-bug-keys"),l=e("../internals/hidden-keys"),c=e("../internals/html"),u=e("../internals/document-create-element"),p=(e=e("../internals/shared-key"),"prototype"),d="script",h=e("IE_PROTO"),m=function(e){return"<"+d+">"+e+"</"+d+">"},f=function(){try{i=document.domain&&new ActiveXObject("htmlfile")}catch(e){}f=i?((e=i).write(m("")),e.close(),t=e.parentWindow.Object,e=null,t):(e=u("iframe"),t="java"+d+":",e.style.display="none",c.appendChild(e),e.src=String(t),(t=e.contentWindow.document).open(),t.write(m("document.F=Object")),t.close(),t.F);for(var e,t,n=s.length;n--;)delete f[p][s[n]];return f()};l[h]=!0,t.exports=Object.create||function(e,t){var n;return null!==e?(r[p]=o(e),n=new r,r[p]=null,n[h]=e):n=f(),void 0===t?n:a(n,t)}},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":62,"../internals/html":64,"../internals/object-define-properties":92,"../internals/shared-key":120}],92:[function(e,t,n){var r=e("../internals/descriptors"),i=e("../internals/object-define-property"),o=e("../internals/an-object"),a=e("../internals/object-keys");t.exports=r?Object.defineProperties:function(e,t){o(e);for(var n,r=a(t),s=r.length,l=0;l<s;)i.f(e,n=r[l++],t[n]);return e}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":93,"../internals/object-keys":100}],93:[function(e,t,n){var r=e("../internals/descriptors"),i=e("../internals/ie8-dom-define"),o=e("../internals/an-object"),a=e("../internals/to-primitive"),s=Object.defineProperty;n.f=r?s:function(e,t,n){if(o(e),t=a(t,!0),o(n),i)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":65,"../internals/to-primitive":142}],94:[function(e,t,n){var r=e("../internals/descriptors"),i=e("../internals/object-property-is-enumerable"),o=e("../internals/create-property-descriptor"),a=e("../internals/to-indexed-object"),s=e("../internals/to-primitive"),l=e("../internals/has"),c=e("../internals/ie8-dom-define"),u=Object.getOwnPropertyDescriptor;n.f=r?u:function(e,t){if(e=a(e),t=s(t,!0),c)try{return u(e,t)}catch(e){}if(l(e,t))return o(!i.f.call(e,t),e[t])}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":61,"../internals/ie8-dom-define":65,"../internals/object-property-is-enumerable":101,"../internals/to-indexed-object":136,"../internals/to-primitive":142}],95:[function(e,t,n){var r=e("../internals/to-indexed-object"),i=e("../internals/object-get-own-property-names").f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(e){if(!a||"[object Window]"!=o.call(e))return i(r(e));try{return i(e)}catch(e){return a.slice()}}},{"../internals/object-get-own-property-names":96,"../internals/to-indexed-object":136}],96:[function(e,t,n){var r=e("../internals/object-keys-internal"),i=e("../internals/enum-bug-keys").concat("length","prototype");n.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],97:[function(e,t,n){n.f=Object.getOwnPropertySymbols},{}],98:[function(e,t,n){var r=e("../internals/has"),i=e("../internals/to-object"),o=e("../internals/shared-key"),a=(e=e("../internals/correct-prototype-getter"),o("IE_PROTO")),s=Object.prototype;t.exports=e?Object.getPrototypeOf:function(e){return e=i(e),r(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},{"../internals/correct-prototype-getter":35,"../internals/has":61,"../internals/shared-key":120,"../internals/to-object":139}],99:[function(e,t,n){var r=e("../internals/has"),i=e("../internals/to-indexed-object"),o=e("../internals/array-includes").indexOf,a=e("../internals/hidden-keys");t.exports=function(e,t){var n,s=i(e),l=0,c=[];for(n in s)!r(a,n)&&r(s,n)&&c.push(n);for(;t.length>l;)!r(s,n=t[l++])||~o(c,n)||c.push(n);return c}},{"../internals/array-includes":18,"../internals/has":61,"../internals/hidden-keys":62,"../internals/to-indexed-object":136}],100:[function(e,t,n){var r=e("../internals/object-keys-internal"),i=e("../internals/enum-bug-keys");t.exports=Object.keys||function(e){return r(e,i)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],101:[function(e,t,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);n.f=o?function(e){return!!(e=i(this,e))&&e.enumerable}:r},{}],102:[function(e,t,n){var r=e("../internals/an-object"),i=e("../internals/a-possible-prototype");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(n){}return function(n,o){return r(n),i(o),t?e.call(n,o):n.__proto__=o,n}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],103:[function(e,t,n){function r(e){return function(t){for(var n,r=a(t),l=o(r),c=l.length,u=0,p=[];u<c;)n=l[u++],i&&!s.call(r,n)||p.push(e?[n,r[n]]:r[n]);return p}}var i=e("../internals/descriptors"),o=e("../internals/object-keys"),a=e("../internals/to-indexed-object"),s=e("../internals/object-property-is-enumerable").f;t.exports={entries:r(!0),values:r(!1)}},{"../internals/descriptors":43,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/to-indexed-object":136}],104:[function(e,t,n){"use strict";var r=e("../internals/to-string-tag-support"),i=e("../internals/classof");t.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":143}],105:[function(e,t,n){var r=e("../internals/get-built-in"),i=e("../internals/object-get-own-property-names"),o=e("../internals/object-get-own-property-symbols"),a=e("../internals/an-object");t.exports=r("Reflect","ownKeys")||function(e){var t=i.f(a(e)),n=o.f;return n?t.concat(n(e)):t}},{"../internals/an-object":10,"../internals/get-built-in":57,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-symbols":97}],106:[function(e,t,n){e=e("../internals/global"),t.exports=e},{"../internals/global":60}],107:[function(e,t,n){t.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},{}],108:[function(e,t,n){var r=e("../internals/an-object"),i=e("../internals/is-object"),o=e("../internals/new-promise-capability");t.exports=function(e,t){return r(e),i(t)&&t.constructor===e?t:((0,(e=o.f(e)).resolve)(t),e.promise)}},{"../internals/an-object":10,"../internals/is-object":75,"../internals/new-promise-capability":87}],109:[function(e,t,n){var r=e("../internals/redefine");t.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},{"../internals/redefine":110}],110:[function(e,t,n){var r=e("../internals/global"),i=e("../internals/create-non-enumerable-property"),o=e("../internals/has"),a=e("../internals/set-global"),s=e("../internals/inspect-source"),l=(e=e("../internals/internal-state")).get,c=e.enforce,u=String(String).split("String");(t.exports=function(e,t,n,s){var l=!!s&&!!s.unsafe,p=!!s&&!!s.enumerable;s=!!s&&!!s.noTargetGet,"function"==typeof n&&("string"!=typeof t||o(n,"name")||i(n,"name",t),c(n).source=u.join("string"==typeof t?t:"")),e===r?p?e[t]=n:a(t,n):(l?!s&&e[t]&&(p=!0):delete e[t],p?e[t]=n:i(e,t,n))})(Function.prototype,"toString",(function(){return"function"==typeof this&&l(this).source||s(this)}))},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/set-global":117}],111:[function(e,t,n){var r=e("./classof-raw"),i=e("./regexp-exec");t.exports=function(e,t){var n=e.exec;if("function"==typeof n){if("object"!=typeof(n=n.call(e,t)))throw TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},{"./classof-raw":28,"./regexp-exec":112}],112:[function(e,t,n){"use strict";var r,i,o=e("./regexp-flags"),a=(e=e("./regexp-sticky-helpers"),RegExp.prototype.exec),s=String.prototype.replace,l=a,c=(r=/a/,i=/b*/g,a.call(r,"a"),a.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),u=e.UNSUPPORTED_Y||e.BROKEN_CARET,p=void 0!==/()??/.exec("")[1];t.exports=l=c||p||u?function(e){var t,n,r,i,l=this,d=u&&l.sticky,h=o.call(l),m=l.source,f=0,g=e;return d&&(-1===(h=h.replace("y","")).indexOf("g")&&(h+="g"),g=String(e).slice(l.lastIndex),0<l.lastIndex&&(!l.multiline||l.multiline&&"\n"!==e[l.lastIndex-1])&&(m="(?: "+m+")",g=" "+g,f++),n=new RegExp("^(?:"+m+")",h)),p&&(n=new RegExp("^"+m+"$(?!\\s)",h)),c&&(t=l.lastIndex),r=a.call(d?n:l,g),d?r?(r.input=r.input.slice(f),r[0]=r[0].slice(f),r.index=l.lastIndex,l.lastIndex+=r[0].length):l.lastIndex=0:c&&r&&(l.lastIndex=l.global?r.index+r[0].length:t),p&&r&&1<r.length&&s.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r}:l},{"./regexp-flags":113,"./regexp-sticky-helpers":114}],113:[function(e,t,n){"use strict";var r=e("../internals/an-object");t.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},{"../internals/an-object":10}],114:[function(e,t,n){"use strict";function r(e,t){return RegExp(e,t)}e=e("./fails"),n.UNSUPPORTED_Y=e((function(){var e=r("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),n.BROKEN_CARET=e((function(){var e=r("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},{"./fails":51}],115:[function(e,t,n){t.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},{}],116:[function(e,t,n){t.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},{}],117:[function(e,t,n){var r=e("../internals/global"),i=e("../internals/create-non-enumerable-property");t.exports=function(e,t){try{i(r,e,t)}catch(n){r[e]=t}return t}},{"../internals/create-non-enumerable-property":38,"../internals/global":60}],118:[function(e,t,n){"use strict";var r=e("../internals/get-built-in"),i=e("../internals/object-define-property"),o=e("../internals/well-known-symbol"),a=e("../internals/descriptors"),s=o("species");t.exports=function(e){e=r(e);var t=i.f;a&&e&&!e[s]&&t(e,s,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":43,"../internals/get-built-in":57,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],119:[function(e,t,n){var r=e("../internals/object-define-property").f,i=e("../internals/has"),o=e("../internals/well-known-symbol")("toStringTag");t.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],120:[function(e,t,n){var r=e("../internals/shared"),i=e("../internals/uid"),o=r("keys");t.exports=function(e){return o[e]||(o[e]=i(e))}},{"../internals/shared":122,"../internals/uid":147}],121:[function(e,t,n){var r=e("../internals/global"),i=(e=e("../internals/set-global"),"__core-js_shared__");r=r[i]||e(i,{}),t.exports=r},{"../internals/global":60,"../internals/set-global":117}],122:[function(e,t,n){var r=e("../internals/is-pure"),i=e("../internals/shared-store");(t.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.5",mode:r?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":76,"../internals/shared-store":121}],123:[function(e,t,n){var r=e("../internals/an-object"),i=e("../internals/a-function"),o=e("../internals/well-known-symbol")("species");t.exports=function(e,t){return void 0===(e=r(e).constructor)||null==(e=r(e)[o])?t:i(e)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":150}],124:[function(e,t,n){var r=e("../internals/fails");t.exports=function(e){return r((function(){var t=""[e]('"');return t!==t.toLowerCase()||3<t.split('"').length}))}},{"../internals/fails":51}],125:[function(e,t,n){function r(e){return function(t,n){t=String(o(t)),n=i(n);var r,a=t.length;return n<0||a<=n?e?"":void 0:(r=t.charCodeAt(n))<55296||56319<r||n+1===a||(a=t.charCodeAt(n+1))<56320||57343<a?e?t.charAt(n):r:e?t.slice(n,n+2):a-56320+(r-55296<<10)+65536}}var i=e("../internals/to-integer"),o=e("../internals/require-object-coercible");t.exports={codeAt:r(!1),charAt:r(!0)}},{"../internals/require-object-coercible":115,"../internals/to-integer":137}],126:[function(e,t,n){e=e("../internals/engine-user-agent"),t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(e)},{"../internals/engine-user-agent":47}],127:[function(e,t,n){function r(e){return function(t,n,r){var l=(t=String(a(t))).length;return r=void 0===r?" ":String(r),(n=i(n))<=l||""==r?t:((l=o.call(r,s((n-=l)/r.length))).length>n&&(l=l.slice(0,n)),e?t+l:l+t)}}var i=e("../internals/to-length"),o=e("../internals/string-repeat"),a=e("../internals/require-object-coercible"),s=Math.ceil;t.exports={start:r(!1),end:r(!0)}},{"../internals/require-object-coercible":115,"../internals/string-repeat":129,"../internals/to-length":138}],128:[function(e,t,n){"use strict";function r(e){return e+22+75*(e<26)}function i(e){var t,n=[],i=(e=function(e){for(var t=[],n=0,r=e.length;n<r;){var i,o=e.charCodeAt(n++);55296<=o&&o<=56319&&n<r?56320==(64512&(i=e.charCodeAt(n++)))?t.push(((1023&o)<<10)+(1023&i)+65536):(t.push(o),n--):t.push(o)}return t}(e)).length,u=128,p=0,g=72;for(b=0;b<e.length;b++)(t=e[b])<128&&n.push(f(t));var y=n.length,_=y;for(y&&n.push("-");_<i;){for(var v=o,b=0;b<e.length;b++)u<=(t=e[b])&&t<v&&(v=t);var w=_+1;if(v-u>m((o-p)/w))throw RangeError(d);for(p+=(v-u)*w,u=v,b=0;b<e.length;b++){if((t=e[b])<u&&++p>o)throw RangeError(d);if(t==u){for(var x=p,S=a;;S+=a){var T=S<=g?1:g+s<=S?s:S-g;if(x<T)break;var E=x-T,I=a-T;n.push(f(r(T+E%I))),x=m(E/I)}n.push(f(r(x))),g=function(e,t,n){var r=0;for(e=n?m(e/c):e>>1,e+=m(e/t);h*s>>1<e;r+=a)e=m(e/h);return m(r+(h+1)*e/(e+l))}(p,w,_==y),p=0,++_}}++p,++u}return n.join("")}var o=2147483647,a=36,s=26,l=38,c=700,u=/[^\0-\u007E]/,p=/[.\u3002\uFF0E\uFF61]/g,d="Overflow: input needs wider integers to process",h=a-1,m=Math.floor,f=String.fromCharCode;t.exports=function(e){for(var t,n=[],r=e.toLowerCase().replace(p,".").split("."),o=0;o<r.length;o++)t=r[o],n.push(u.test(t)?"xn--"+i(t):t);return n.join(".")}},{}],129:[function(e,t,n){"use strict";var r=e("../internals/to-integer"),i=e("../internals/require-object-coercible");t.exports="".repeat||function(e){var t=String(i(this)),n="",o=r(e);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;0<o;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},{"../internals/require-object-coercible":115,"../internals/to-integer":137}],130:[function(e,t,n){var r=e("../internals/fails"),i=e("../internals/whitespaces");t.exports=function(e){return r((function(){return!!i[e]()||"​᠎"!="​᠎"[e]()||i[e].name!==e}))}},{"../internals/fails":51,"../internals/whitespaces":151}],131:[function(e,t,n){function r(e){return function(t){return t=String(i(t)),1&e&&(t=t.replace(o,"")),2&e?t.replace(a,""):t}}var i=e("../internals/require-object-coercible"),o=(e="["+e("../internals/whitespaces")+"]",RegExp("^"+e+e+"*")),a=RegExp(e+e+"*$");t.exports={start:r(1),end:r(2),trim:r(3)}},{"../internals/require-object-coercible":115,"../internals/whitespaces":151}],132:[function(e,t,n){function r(e){return function(){x(e)}}function i(e){x(e.data)}function o(e){s.postMessage(e+"",h.protocol+"//"+h.host)}var a,s=e("../internals/global"),l=e("../internals/fails"),c=e("../internals/classof-raw"),u=e("../internals/function-bind-context"),p=e("../internals/html"),d=e("../internals/document-create-element"),h=(e=e("../internals/engine-is-ios"),s.location),m=s.setImmediate,f=s.clearImmediate,g=s.process,y=s.MessageChannel,_=s.Dispatch,v=0,b={},w="onreadystatechange",x=function(e){var t;b.hasOwnProperty(e)&&(t=b[e],delete b[e],t())};m&&f||(m=function(e){for(var t=[],n=1;n<arguments.length;)t.push(arguments[n++]);return b[++v]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},a(v),v},f=function(e){delete b[e]},"process"==c(g)?a=function(e){g.nextTick(r(e))}:_&&_.now?a=function(e){_.now(r(e))}:y&&!e?(e=(c=new y).port2,c.port1.onmessage=i,a=u(e.postMessage,e,1)):!s.addEventListener||"function"!=typeof postMessage||s.importScripts||l(o)||"file:"===h.protocol?a=w in d("script")?function(e){p.appendChild(d("script"))[w]=function(){p.removeChild(this),x(e)}}:function(e){setTimeout(r(e),0)}:(a=o,s.addEventListener("message",i,!1))),t.exports={set:m,clear:f}},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":55,"../internals/global":60,"../internals/html":64}],133:[function(e,t,n){var r=e("../internals/classof-raw");t.exports=function(e){if("number"!=typeof e&&"Number"!=r(e))throw TypeError("Incorrect invocation");return+e}},{"../internals/classof-raw":28}],134:[function(e,t,n){var r=e("../internals/to-integer"),i=Math.max,o=Math.min;t.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},{"../internals/to-integer":137}],135:[function(e,t,n){var r=e("../internals/to-integer"),i=e("../internals/to-length");t.exports=function(e){if(void 0===e)return 0;e=r(e);var t=i(e);if(e!==t)throw RangeError("Wrong length or index");return t}},{"../internals/to-integer":137,"../internals/to-length":138}],136:[function(e,t,n){var r=e("../internals/indexed-object"),i=e("../internals/require-object-coercible");t.exports=function(e){return r(i(e))}},{"../internals/indexed-object":67,"../internals/require-object-coercible":115}],137:[function(e,t,n){var r=Math.ceil,i=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(0<e?i:r)(e)}},{}],138:[function(e,t,n){var r=e("../internals/to-integer"),i=Math.min;t.exports=function(e){return 0<e?i(r(e),9007199254740991):0}},{"../internals/to-integer":137}],139:[function(e,t,n){var r=e("../internals/require-object-coercible");t.exports=function(e){return Object(r(e))}},{"../internals/require-object-coercible":115}],140:[function(e,t,n){var r=e("../internals/to-positive-integer");t.exports=function(e,t){if((e=r(e))%t)throw RangeError("Wrong offset");return e}},{"../internals/to-positive-integer":141}],141:[function(e,t,n){var r=e("../internals/to-integer");t.exports=function(e){if((e=r(e))<0)throw RangeError("The argument can't be less than 0");return e}},{"../internals/to-integer":137}],142:[function(e,t,n){var r=e("../internals/is-object");t.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e))||"function"==typeof(n=e.valueOf)&&!r(i=n.call(e))||!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":75}],143:[function(e,t,n){var r={};r[e("../internals/well-known-symbol")("toStringTag")]="z",t.exports="[object z]"===String(r)},{"../internals/well-known-symbol":150}],144:[function(e,t,n){"use strict";function r(e,t){for(var n=0,r=t.length,i=new(W(e))(r);n<r;)i[n]=t[n++];return i}function i(e,t){L(e,t,{get:function(){return P(this)[t]}})}function o(e){return e instanceof V||"ArrayBuffer"==(e=S(e))||"SharedArrayBuffer"==e}function a(e,t){return K(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)}function s(e,t){return a(e,t=w(t,!0))?g(2,e[t]):F(e,t)}function l(e,t,n){return!(a(e,t=w(t,!0))&&T(n)&&x(n,"value"))||x(n,"get")||x(n,"set")||n.configurable||x(n,"writable")&&!n.writable||x(n,"enumerable")&&!n.enumerable?L(e,t,n):(e[t]=n.value,e)}var c=e("../internals/export"),u=e("../internals/global"),p=e("../internals/descriptors"),d=e("../internals/typed-array-constructors-require-wrappers"),h=e("../internals/array-buffer-view-core"),m=e("../internals/array-buffer"),f=e("../internals/an-instance"),g=e("../internals/create-property-descriptor"),y=e("../internals/create-non-enumerable-property"),_=e("../internals/to-length"),v=e("../internals/to-index"),b=e("../internals/to-offset"),w=e("../internals/to-primitive"),x=e("../internals/has"),S=e("../internals/classof"),T=e("../internals/is-object"),E=e("../internals/object-create"),I=e("../internals/object-set-prototype-of"),k=e("../internals/object-get-own-property-names").f,j=e("../internals/typed-array-from"),A=e("../internals/array-iteration").forEach,C=e("../internals/set-species"),O=e("../internals/object-define-property"),M=e("../internals/object-get-own-property-descriptor"),N=e("../internals/internal-state"),R=e("../internals/inherit-if-required"),P=N.get,D=N.set,L=O.f,F=M.f,B=Math.round,U=u.RangeError,V=m.ArrayBuffer,G=m.DataView,z=h.NATIVE_ARRAY_BUFFER_VIEWS,$=h.TYPED_ARRAY_TAG,q=h.TypedArray,H=h.TypedArrayPrototype,W=h.aTypedArrayConstructor,K=h.isTypedArray,X="BYTES_PER_ELEMENT",Y="Wrong length";p?(z||(M.f=s,O.f=l,i(H,"buffer"),i(H,"byteOffset"),i(H,"byteLength"),i(H,"length")),c({target:"Object",stat:!0,forced:!z},{getOwnPropertyDescriptor:s,defineProperty:l}),t.exports=function(e,t,n){function i(e,t){L(e,t,{get:function(){var e=this,n=t;return(e=P(e)).view[l](n*a+e.byteOffset,!0)},set:function(e){var r=this,i=t;r=P(r),n&&(e=(e=B(e))<0?0:255<e?255:255&e),r.view[p](i*a+r.byteOffset,e,!0)},enumerable:!0})}var a=e.match(/\d+$/)[0]/8,s=e+(n?"Clamped":"")+"Array",l="get"+e,p="set"+e,h=u[s],m=h,g=(e=m&&m.prototype,{});z?d&&(m=t((function(e,t,n,i){return f(e,m,s),R(T(t)?o(t)?void 0!==i?new h(t,b(n,a),i):void 0!==n?new h(t,b(n,a)):new h(t):K(t)?r(m,t):j.call(m,t):new h(v(t)),e,m)})),I&&I(m,q),A(k(h),(function(e){e in m||y(m,e,h[e])})),m.prototype=e):(m=t((function(e,t,n,l){f(e,m,s);var c,u,p=0,d=0;if(T(t)){if(!o(t))return K(t)?r(m,t):j.call(m,t);var h=t;if(d=b(n,a),n=t.byteLength,void 0===l){if(n%a)throw U(Y);if((c=n-d)<0)throw U(Y)}else if(n<(c=_(l)*a)+d)throw U(Y);u=c/a}else u=v(t),h=new V(c=u*a);for(D(e,{buffer:h,byteOffset:d,byteLength:c,length:u,view:new G(h)});p<u;)i(e,p++)})),I&&I(m,q),e=m.prototype=E(H)),e.constructor!==m&&y(e,"constructor",m),$&&y(e,$,s),g[s]=m,c({global:!0,forced:m!=h,sham:!z},g),X in m||y(m,X,a),X in e||y(e,X,a),C(s)}):t.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-object":75,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-set-prototype-of":102,"../internals/set-species":118,"../internals/to-index":135,"../internals/to-length":138,"../internals/to-offset":140,"../internals/to-primitive":142,"../internals/typed-array-constructors-require-wrappers":145,"../internals/typed-array-from":146}],145:[function(e,t,n){var r=e("../internals/global"),i=e("../internals/fails"),o=e("../internals/check-correctness-of-iteration"),a=(e=e("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,r.ArrayBuffer),s=r.Int8Array;t.exports=!e||!i((function(){s(1)}))||!i((function(){new s(-1)}))||!o((function(e){new s,new s(null),new s(1.5),new s(e)}),!0)||i((function(){return 1!==new s(new a(2),1,void 0).length}))},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":60}],146:[function(e,t,n){var r=e("../internals/to-object"),i=e("../internals/to-length"),o=e("../internals/get-iterator-method"),a=e("../internals/is-array-iterator-method"),s=e("../internals/function-bind-context"),l=e("../internals/array-buffer-view-core").aTypedArrayConstructor;t.exports=function(e){var t,n,c,u,p,d,h=r(e),m=arguments.length,f=1<m?arguments[1]:void 0,g=void 0!==f,y=o(h);if(null!=y&&!a(y))for(d=(p=y.call(h)).next,h=[];!(u=d.call(p)).done;)h.push(u.value);for(g&&2<m&&(f=s(f,arguments[2],2)),n=i(h.length),c=new(l(this))(n),t=0;t<n;t++)c[t]=g?f(h[t],t):h[t];return c}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138,"../internals/to-object":139}],147:[function(e,t,n){var r=0,i=Math.random();t.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++r+i).toString(36)}},{}],148:[function(e,t,n){e=e("../internals/native-symbol"),t.exports=e&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},{"../internals/native-symbol":84}],149:[function(e,t,n){e=e("../internals/well-known-symbol"),n.f=e},{"../internals/well-known-symbol":150}],150:[function(e,t,n){var r=e("../internals/global"),i=e("../internals/shared"),o=e("../internals/has"),a=e("../internals/uid"),s=e("../internals/native-symbol"),l=(e=e("../internals/use-symbol-as-uid"),i("wks")),c=r.Symbol,u=e?c:c&&c.withoutSetter||a;t.exports=function(e){return o(l,e)||(s&&o(c,e)?l[e]=c[e]:l[e]=u("Symbol."+e)),l[e]}},{"../internals/global":60,"../internals/has":61,"../internals/native-symbol":84,"../internals/shared":122,"../internals/uid":147,"../internals/use-symbol-as-uid":148}],151:[function(e,t,n){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},{}],152:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/global"),o=e("../internals/array-buffer"),a=(e=e("../internals/set-species"),"ArrayBuffer");o=o[a],r({global:!0,forced:i[a]!==o},{ArrayBuffer:o}),e(a)},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":60,"../internals/set-species":118}],153:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/fails"),o=e("../internals/is-array"),a=e("../internals/is-object"),s=e("../internals/to-object"),l=e("../internals/to-length"),c=e("../internals/create-property"),u=e("../internals/array-species-create"),p=e("../internals/array-method-has-species-support"),d=e("../internals/well-known-symbol"),h=(e=e("../internals/engine-v8-version"),d("isConcatSpreadable")),m=9007199254740991,f="Maximum allowed index exceeded";d=51<=e||!i((function(){var e=[];return e[h]=!1,e.concat()[0]!==e})),e=p("concat"),r({target:"Array",proto:!0,forced:!d||!e},{concat:function(e){for(var t,n,r,i,p,d=s(this),g=u(d,0),y=0,_=-1,v=arguments.length;_<v;_++)if(p=void 0,a(i=r=-1===_?d:arguments[_])&&(void 0!==(p=i[h])?p:o(i))){if(n=l(r.length),m<y+n)throw TypeError(f);for(t=0;t<n;t++,y++)t in r&&c(g,y,r[t])}else{if(m<=y)throw TypeError(f);c(g,y++,r)}return g.length=y,g}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-length":138,"../internals/to-object":139,"../internals/well-known-symbol":150}],154:[function(e,t,n){var r=e("../internals/export"),i=e("../internals/array-copy-within");e=e("../internals/add-to-unscopables"),r({target:"Array",proto:!0},{copyWithin:i}),e("copyWithin")},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],155:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/array-iteration").every,o=e("../internals/array-method-is-strict");e=e("../internals/array-method-uses-to-length"),o=o("every"),e=e("every"),r({target:"Array",proto:!0,forced:!o||!e},{every:function(e){return i(this,e,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],156:[function(e,t,n){var r=e("../internals/export"),i=e("../internals/array-fill");e=e("../internals/add-to-unscopables"),r({target:"Array",proto:!0},{fill:i}),e("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],157:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/array-iteration").filter,o=e("../internals/array-method-has-species-support");e=e("../internals/array-method-uses-to-length"),o=o("filter"),e=e("filter"),r({target:"Array",proto:!0,forced:!o||!e},{filter:function(e){return i(this,e,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],158:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/array-iteration").findIndex,o=e("../internals/add-to-unscopables"),a=(e=e("../internals/array-method-uses-to-length"),"findIndex"),s=!0;e=e(a),a in[]&&Array(1)[a]((function(){s=!1})),r({target:"Array",proto:!0,forced:s||!e},{findIndex:function(e){return i(this,e,1<arguments.length?arguments[1]:void 0)}}),o(a)},{"../internals/add-to-unscopables":7,"../internals/array-iteration":19,"../internals/array-method-uses-to-length":23,"../internals/export":50}],159:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/flatten-into-array"),o=e("../internals/to-object"),a=e("../internals/to-length"),s=e("../internals/a-function"),l=e("../internals/array-species-create");r({target:"Array",proto:!0},{flatMap:function(e){var t,n=o(this),r=a(n.length);return s(e),(t=l(n,0)).length=i(t,n,n,r,0,1,e,1<arguments.length?arguments[1]:void 0),t}})},{"../internals/a-function":5,"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-length":138,"../internals/to-object":139}],160:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/flatten-into-array"),o=e("../internals/to-object"),a=e("../internals/to-length"),s=e("../internals/to-integer"),l=e("../internals/array-species-create");r({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=o(this),n=a(t.length),r=l(t,0);return r.length=i(r,t,t,n,0,void 0===e?1:s(e)),r}})},{"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],161:[function(e,t,n){"use strict";var r=e("../internals/export");e=e("../internals/array-for-each"),r({target:"Array",proto:!0,forced:[].forEach!=e},{forEach:e})},{"../internals/array-for-each":16,"../internals/export":50}],162:[function(e,t,n){var r=e("../internals/export"),i=e("../internals/array-from");r({target:"Array",stat:!0,forced:!e("../internals/check-correctness-of-iteration")((function(e){Array.from(e)}))},{from:i})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],163:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/array-includes").includes,o=e("../internals/add-to-unscopables");r({target:"Array",proto:!0,forced:!e("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(e){return i(this,e,1<arguments.length?arguments[1]:void 0)}}),o("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],164:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/array-includes").indexOf,o=e("../internals/array-method-is-strict"),a=(e=e("../internals/array-method-uses-to-length"),[].indexOf),s=!!a&&1/[1].indexOf(1,-0)<0;o=o("indexOf"),e=e("indexOf",{ACCESSORS:!0,1:0}),r({target:"Array",proto:!0,forced:s||!o||!e},{indexOf:function(e){return s?a.apply(this,arguments)||0:i(this,e,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],165:[function(e,t,n){"use strict";var r=e("../internals/to-indexed-object"),i=e("../internals/add-to-unscopables"),o=e("../internals/iterators"),a=e("../internals/internal-state"),s=(e=e("../internals/define-iterator"),"Array Iterator"),l=a.set,c=a.getterFor(s);t.exports=e(Array,"Array",(function(e,t){l(this,{type:s,target:r(e),index:0,kind:t})}),(function(){var e=c(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?{value:e.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/iterators":80,"../internals/to-indexed-object":136}],166:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/indexed-object"),o=e("../internals/to-indexed-object"),a=(e=e("../internals/array-method-is-strict"),[].join);i=i!=Object,e=e("join",","),r({target:"Array",proto:!0,forced:i||!e},{join:function(e){return a.call(o(this),void 0===e?",":e)}})},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":67,"../internals/to-indexed-object":136}],167:[function(e,t,n){e("../internals/export")({target:"Array",proto:!0,forced:(e=e("../internals/array-last-index-of"))!==[].lastIndexOf},{lastIndexOf:e})},{"../internals/array-last-index-of":20,"../internals/export":50}],168:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/array-iteration").map,o=e("../internals/array-method-has-species-support");e=e("../internals/array-method-uses-to-length"),o=o("map"),e=e("map"),r({target:"Array",proto:!0,forced:!o||!e},{map:function(e){return i(this,e,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],169:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/is-object"),o=e("../internals/is-array"),a=e("../internals/to-absolute-index"),s=e("../internals/to-length"),l=e("../internals/to-indexed-object"),c=e("../internals/create-property"),u=e("../internals/well-known-symbol"),p=e("../internals/array-method-has-species-support"),d=(e=e("../internals/array-method-uses-to-length"),p=p("slice"),e=e("slice",{ACCESSORS:!0,0:0,1:2}),u("species")),h=[].slice,m=Math.max;r({target:"Array",proto:!0,forced:!p||!e},{slice:function(e,t){var n,r,u,p=l(this),f=s(p.length),g=a(e,f),y=a(void 0===t?f:t,f);if(o(p)&&((n="function"==typeof(n=p.constructor)&&(n===Array||o(n.prototype))||i(n)&&null===(n=n[d])?void 0:n)===Array||void 0===n))return h.call(p,g,y);for(r=new(void 0===n?Array:n)(m(y-g,0)),u=0;g<y;g++,u++)g in p&&c(r,u,p[g]);return r.length=u,r}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-absolute-index":134,"../internals/to-indexed-object":136,"../internals/to-length":138,"../internals/well-known-symbol":150}],170:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/array-iteration").some,o=e("../internals/array-method-is-strict");e=e("../internals/array-method-uses-to-length"),o=o("some"),e=e("some"),r({target:"Array",proto:!0,forced:!o||!e},{some:function(e){return i(this,e,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],171:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/to-absolute-index"),o=e("../internals/to-integer"),a=e("../internals/to-length"),s=e("../internals/to-object"),l=e("../internals/array-species-create"),c=e("../internals/create-property"),u=e("../internals/array-method-has-species-support"),p=(e=e("../internals/array-method-uses-to-length"),u=u("splice"),e=e("splice",{ACCESSORS:!0,0:0,1:2}),Math.max),d=Math.min;r({target:"Array",proto:!0,forced:!u||!e},{splice:function(e,t){var n,r,u,h,m,f,g=s(this),y=a(g.length),_=i(e,y);if(0===(e=arguments.length)?n=r=0:r=1===e?(n=0,y-_):(n=e-2,d(p(o(t),0),y-_)),9007199254740991<y+n-r)throw TypeError("Maximum allowed length exceeded");for(u=l(g,r),h=0;h<r;h++)(m=_+h)in g&&c(u,h,g[m]);if(n<(u.length=r)){for(h=_;h<y-r;h++)f=h+n,(m=h+r)in g?g[f]=g[m]:delete g[f];for(h=y;y-r+n<h;h--)delete g[h-1]}else if(r<n)for(h=y-r;_<h;h--)f=h+n-1,(m=h+r-1)in g?g[f]=g[m]:delete g[f];for(h=0;h<n;h++)g[h+_]=arguments[h+2];return g.length=y-r+n,u}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":134,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],172:[function(e,t,n){e("../internals/add-to-unscopables")("flatMap")},{"../internals/add-to-unscopables":7}],173:[function(e,t,n){e("../internals/add-to-unscopables")("flat")},{"../internals/add-to-unscopables":7}],174:[function(e,t,n){var r=e("../internals/descriptors"),i=(e=e("../internals/object-define-property").f,Function.prototype),o=i.toString,a=/^\s*function ([^ (]*)/;!r||"name"in i||e(i,"name",{configurable:!0,get:function(){try{return o.call(this).match(a)[1]}catch(e){return""}}})},{"../internals/descriptors":43,"../internals/object-define-property":93}],175:[function(e,t,n){"use strict";var r=e("../internals/collection");e=e("../internals/collection-strong"),t.exports=r("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),e)},{"../internals/collection":32,"../internals/collection-strong":30}],176:[function(e,t,n){e=e("../internals/export");var r=Math.hypot,i=Math.abs,o=Math.sqrt;e({target:"Math",stat:!0,forced:!!r&&r(1/0,NaN)!==1/0},{hypot:function(e,t){for(var n,r,a=0,s=0,l=arguments.length,c=0;s<l;)c<(n=i(arguments[s++]))?(a=a*(r=c/n)*r+1,c=n):a+=0<n?(r=n/c)*r:n;return c===1/0?1/0:c*o(a)}})},{"../internals/export":50}],177:[function(e,t,n){e=e("../internals/export");var r=Math.log,i=Math.LN2;e({target:"Math",stat:!0},{log2:function(e){return r(e)/i}})},{"../internals/export":50}],178:[function(e,t,n){e("../internals/export")({target:"Math",stat:!0},{sign:e("../internals/math-sign")})},{"../internals/export":50,"../internals/math-sign":81}],179:[function(e,t,n){"use strict";function r(e){var t,n,r,i,o,a,s,l=p(e,!1);if("string"==typeof l&&2<l.length)if(43===(e=(l=y(l)).charCodeAt(0))||45===e){if(88===(t=l.charCodeAt(2))||120===t)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+l}for(o=(i=l.slice(2)).length,a=0;a<o;a++)if((s=i.charCodeAt(a))<48||r<s)return NaN;return parseInt(i,n)}return+l}var i=e("../internals/descriptors"),o=e("../internals/global"),a=e("../internals/is-forced"),s=e("../internals/redefine"),l=e("../internals/has"),c=e("../internals/classof-raw"),u=e("../internals/inherit-if-required"),p=e("../internals/to-primitive"),d=e("../internals/fails"),h=e("../internals/object-create"),m=e("../internals/object-get-own-property-names").f,f=e("../internals/object-get-own-property-descriptor").f,g=e("../internals/object-define-property").f,y=e("../internals/string-trim").trim,_="Number",v=o[_],b=v.prototype,w=c(h(b))==_;if(a(_,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var x,S=function(e){e=arguments.length<1?0:e;var t=this;return t instanceof S&&(w?d((function(){b.valueOf.call(t)})):c(t)!=_)?u(new v(r(e)),t,S):r(e)},T=i?m(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0;T.length>E;E++)l(v,x=T[E])&&!l(S,x)&&g(S,x,f(v,x));(S.prototype=b).constructor=S,s(o,_,S)}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/is-forced":74,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/redefine":110,"../internals/string-trim":131,"../internals/to-primitive":142}],180:[function(e,t,n){e("../internals/export")({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},{"../internals/export":50}],181:[function(e,t,n){e("../internals/export")({target:"Number",stat:!0},{isFinite:e("../internals/number-is-finite")})},{"../internals/export":50,"../internals/number-is-finite":89}],182:[function(e,t,n){"use strict";function r(e,t,n){return 0===t?n:t%2==1?r(e,t-1,n*e):r(e*e,t/2,n)}var i=e("../internals/export"),o=e("../internals/to-integer"),a=e("../internals/this-number-value"),s=e("../internals/string-repeat"),l=(e=e("../internals/fails"),1..toFixed),c=Math.floor;i({target:"Number",proto:!0,forced:l&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!e((function(){l.call({})}))},{toFixed:function(e){function t(e,t){for(var n=-1,r=t;++n<6;)r+=e*d[n],d[n]=r%1e7,r=c(r/1e7)}function n(e){for(var t=6,n=0;0<=--t;)n+=d[t],d[t]=c(n/e),n=n%e*1e7}function i(){for(var e,t=6,n="";0<=--t;)""===n&&0!==t&&0===d[t]||(e=String(d[t]),n=""===n?e:n+s.call("0",7-e.length)+e);return n}var l,u,p=a(this),d=(e=o(e),[0,0,0,0,0,0]),h="",m="0";if(e<0||20<e)throw RangeError("Incorrect fraction digits");if(p!=p)return"NaN";if(p<=-1e21||1e21<=p)return String(p);if(p<0&&(h="-",p=-p),1e-21<p)if(p=(l=function(e){for(var t=0,n=e;4096<=n;)t+=12,n/=4096;for(;2<=n;)t+=1,n/=2;return t}(p*r(2,69,1))-69)<0?p*r(2,-l,1):p/r(2,l,1),p*=4503599627370496,0<(l=52-l)){for(t(0,p),u=e;7<=u;)t(1e7,0),u-=7;for(t(r(10,u,1),0),u=l-1;23<=u;)n(1<<23),u-=23;n(1<<u),t(1,1),n(2),m=i()}else t(0,p),t(1<<-l,0),m=i()+s.call("0",e);return 0<e?h+((p=m.length)<=e?"0."+s.call("0",e-p)+m:m.slice(0,p-e)+"."+m.slice(p-e)):h+m}})},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":129,"../internals/this-number-value":133,"../internals/to-integer":137}],183:[function(e,t,n){var r=e("../internals/export");e=e("../internals/object-assign"),r({target:"Object",stat:!0,forced:Object.assign!==e},{assign:e})},{"../internals/export":50,"../internals/object-assign":90}],184:[function(e,t,n){var r=e("../internals/export"),i=e("../internals/object-to-array").entries;r({target:"Object",stat:!0},{entries:function(e){return i(e)}})},{"../internals/export":50,"../internals/object-to-array":103}],185:[function(e,t,n){var r=e("../internals/export"),i=e("../internals/iterate"),o=e("../internals/create-property");r({target:"Object",stat:!0},{fromEntries:function(e){var t={};return i(e,(function(e,n){o(t,e,n)}),void 0,!0),t}})},{"../internals/create-property":40,"../internals/export":50,"../internals/iterate":78}],186:[function(e,t,n){var r=e("../internals/export"),i=e("../internals/fails"),o=e("../internals/to-indexed-object"),a=e("../internals/object-get-own-property-descriptor").f;e=e("../internals/descriptors"),i=i((function(){a(1)})),r({target:"Object",stat:!0,forced:!e||i,sham:!e},{getOwnPropertyDescriptor:function(e,t){return a(o(e),t)}})},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":94,"../internals/to-indexed-object":136}],187:[function(e,t,n){var r=e("../internals/export"),i=e("../internals/fails");e=e("../internals/object-get-own-property-names-external").f,r({target:"Object",stat:!0,forced:i((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:e})},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":95}],188:[function(e,t,n){var r=e("../internals/export"),i=e("../internals/fails"),o=e("../internals/to-object"),a=e("../internals/object-get-prototype-of");e=e("../internals/correct-prototype-getter"),r({target:"Object",stat:!0,forced:i((function(){a(1)})),sham:!e},{getPrototypeOf:function(e){return a(o(e))}})},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":98,"../internals/to-object":139}],189:[function(e,t,n){var r=e("../internals/export"),i=e("../internals/to-object"),o=e("../internals/object-keys");r({target:"Object",stat:!0,forced:e("../internals/fails")((function(){o(1)}))},{keys:function(e){return o(i(e))}})},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":100,"../internals/to-object":139}],190:[function(e,t,n){var r=e("../internals/to-string-tag-support"),i=e("../internals/redefine");e=e("../internals/object-to-string"),r||i(Object.prototype,"toString",e,{unsafe:!0})},{"../internals/object-to-string":104,"../internals/redefine":110,"../internals/to-string-tag-support":143}],191:[function(e,t,n){"use strict";var r,i,o,a,s=e("../internals/export"),l=e("../internals/is-pure"),c=e("../internals/global"),u=e("../internals/get-built-in"),p=e("../internals/native-promise-constructor"),d=e("../internals/redefine"),h=e("../internals/redefine-all"),m=e("../internals/set-to-string-tag"),f=e("../internals/set-species"),g=e("../internals/is-object"),y=e("../internals/a-function"),_=e("../internals/an-instance"),v=e("../internals/classof-raw"),b=e("../internals/inspect-source"),w=e("../internals/iterate"),x=e("../internals/check-correctness-of-iteration"),S=e("../internals/species-constructor"),T=e("../internals/task").set,E=e("../internals/microtask"),I=e("../internals/promise-resolve"),k=e("../internals/host-report-errors"),j=e("../internals/new-promise-capability"),A=e("../internals/perform"),C=e("../internals/internal-state"),O=e("../internals/is-forced"),M=e("../internals/well-known-symbol"),N=e("../internals/engine-v8-version"),R=M("species"),P="Promise",D=C.get,L=C.set,F=C.getterFor(P),B=p,U=c.TypeError,V=c.document,G=c.process,z=u("fetch"),$=j.f,q=$,H="process"==v(G),W=!!(V&&V.createEvent&&c.dispatchEvent),K="unhandledrejection",X=(e=O(P,(function(){var e,t;if(b(B)===String(B)){if(66===N)return!0;if(!H&&"function"!=typeof PromiseRejectionEvent)return!0}return!((!l||B.prototype.finally)&&(51<=N&&/native code/.test(B)||(t=function(e){e((function(){}),(function(){}))},((e=B.resolve(1)).constructor={})[R]=t,e.then((function(){}))instanceof t)))})),M=e||!x((function(e){B.all(e).catch((function(){}))})),function(e){var t;return!(!g(e)||"function"!=typeof(t=e.then))&&t}),Y=function(e,t,n){var r;t.notified||(t.notified=!0,r=t.reactions,E((function(){for(var i,o,a=t.value,s=1==t.state,l=0;r.length>l;){var u,p,d,h=r[l++],m=s?h.ok:h.fail,f=h.resolve,g=h.reject,y=h.domain;try{m?(s||(2===t.rejection&&function(e,t){T.call(c,(function(){H?G.emit("rejectionHandled",e):J("rejectionhandled",e,t.value)}))}(e,t),t.rejection=1),!0===m?u=a:(y&&y.enter(),u=m(a),y&&(y.exit(),d=!0)),u===h.promise?g(U("Promise-chain cycle")):(p=X(u))?p.call(u,f,g):f(u)):g(a)}catch(a){y&&!d&&y.exit(),g(a)}}t.reactions=[],t.notified=!1,n&&!t.rejection&&(i=e,o=t,T.call(c,(function(){var e=o.value,t=Q(o);if(t&&(t=A((function(){H?G.emit("unhandledRejection",e,i):J(K,i,e)})),o.rejection=H||Q(o)?2:1,t.error))throw t.value})))})))},J=function(e,t,n){var r;W?((r=V.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),c.dispatchEvent(r)):r={promise:t,reason:n},(t=c["on"+e])?t(r):e===K&&k("Unhandled promise rejection",n)},Q=function(e){return 1!==e.rejection&&!e.parent},Z=function(e,t,n,r){return function(i){e(t,n,i,r)}},ee=function(e,t,n,r){t.done||(t.done=!0,(t=r||t).value=n,t.state=2,Y(e,t,!0))},te=function(e,t,n,r){if(!t.done){t.done=!0,r&&(t=r);try{if(e===n)throw U("Promise can't be resolved itself");var i=X(n);i?E((function(){var r={done:!1};try{i.call(n,Z(te,e,r,t),Z(ee,e,r,t))}catch(n){ee(e,r,n,t)}})):(t.value=n,t.state=1,Y(e,t,!1))}catch(n){ee(e,{done:!1},n,t)}}};e&&(B=function(e){_(this,B,P),y(e),r.call(this);var t=D(this);try{e(Z(te,this,t),Z(ee,this,t))}catch(e){ee(this,t,e)}},(r=function(e){L(this,{type:P,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=h(B.prototype,{then:function(e,t){var n=F(this),r=$(S(this,B));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=H?G.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Y(this,n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r,t=D(e);this.promise=e,this.resolve=Z(te,e,t),this.reject=Z(ee,e,t)},j.f=$=function(e){return e===B||e===o?new i:q(e)},l||"function"!=typeof p||(a=p.prototype.then,d(p.prototype,"then",(function(e,t){var n=this;return new B((function(e,t){a.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof z&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return I(B,z.apply(c,arguments))}}))),s({global:!0,wrap:!0,forced:e},{Promise:B}),m(B,P,!1,!0),f(P),o=u(P),s({target:P,stat:!0,forced:e},{reject:function(e){var t=$(this);return t.reject.call(void 0,e),t.promise}}),s({target:P,stat:!0,forced:l||e},{resolve:function(e){return I(l&&this===o?B:this,e)}}),s({target:P,stat:!0,forced:M},{all:function(e){var t=this,n=$(t),r=n.resolve,i=n.reject,o=A((function(){var n=y(t.resolve),o=[],a=0,s=1;w(e,(function(e){var l=a++,c=!1;o.push(void 0),s++,n.call(t,e).then((function(e){c||(c=!0,o[l]=e,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(e){var t=this,n=$(t),r=n.reject,i=A((function(){var i=y(t.resolve);w(e,(function(e){i.call(t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":57,"../internals/global":60,"../internals/host-report-errors":63,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-object":75,"../internals/is-pure":76,"../internals/iterate":78,"../internals/microtask":82,"../internals/native-promise-constructor":83,"../internals/new-promise-capability":87,"../internals/perform":107,"../internals/promise-resolve":108,"../internals/redefine":110,"../internals/redefine-all":109,"../internals/set-species":118,"../internals/set-to-string-tag":119,"../internals/species-constructor":123,"../internals/task":132,"../internals/well-known-symbol":150}],192:[function(e,t,n){var r=e("../internals/export"),i=e("../internals/get-built-in"),o=e("../internals/a-function"),a=e("../internals/an-object"),s=e("../internals/is-object"),l=e("../internals/object-create"),c=e("../internals/function-bind"),u=(e=e("../internals/fails"),i("Reflect","construct")),p=e((function(){function e(){}return!(u((function(){}),[],e)instanceof e)})),d=!e((function(){u((function(){}))}));r({target:"Reflect",stat:!0,forced:i=p||d,sham:i},{construct:function(e,t){o(e),a(t);var n=arguments.length<3?e:o(arguments[2]);if(d&&!p)return u(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(c.apply(e,r))}return r=n.prototype,n=l(s(r)?r:Object.prototype),r=Function.apply.call(e,n,t),s(r)?r:n}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":56,"../internals/get-built-in":57,"../internals/is-object":75,"../internals/object-create":91}],193:[function(e,t,n){var r=e("../internals/export"),i=e("../internals/is-object"),o=e("../internals/an-object"),a=e("../internals/has"),s=e("../internals/object-get-own-property-descriptor"),l=e("../internals/object-get-prototype-of");r({target:"Reflect",stat:!0},{get:function e(t,n){var r,c=arguments.length<3?t:arguments[2];return o(t)===c?t[n]:(r=s.f(t,n))?a(r,"value")?r.value:void 0===r.get?void 0:r.get.call(c):i(r=l(t))?e(r,n,c):void 0}})},{"../internals/an-object":10,"../internals/export":50,"../internals/has":61,"../internals/is-object":75,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-prototype-of":98}],194:[function(e,t,n){var r=e("../internals/descriptors"),i=e("../internals/global"),o=e("../internals/is-forced"),a=e("../internals/inherit-if-required"),s=e("../internals/object-define-property").f,l=e("../internals/object-get-own-property-names").f,c=e("../internals/is-regexp"),u=e("../internals/regexp-flags"),p=e("../internals/regexp-sticky-helpers"),d=e("../internals/redefine"),h=e("../internals/fails"),m=e("../internals/internal-state").set,f=e("../internals/set-species"),g=e("../internals/well-known-symbol")("match"),y=i.RegExp,_=y.prototype,v=/a/g,b=/a/g,w=new y(v)!==v,x=p.UNSUPPORTED_Y;if(r&&o("RegExp",!w||x||h((function(){return b[g]=!1,y(v)!=v||y(b)==b||"/a/i"!=y(v,"i")})))){for(var S=function(e,t){var n,r=this instanceof S,i=c(e),o=void 0===t;return!r&&i&&e.constructor===S&&o?e:(w?i&&!o&&(e=e.source):e instanceof S&&(o&&(t=u.call(e)),e=e.source),x&&(n=!!t&&-1<t.indexOf("y"))&&(t=t.replace(/y/g,"")),i=a(w?new y(e,t):y(e,t),r?this:_,S),x&&n&&m(i,{sticky:n}),i)},T=l(y),E=0;T.length>E;)!function(e){e in S||s(S,e,{configurable:!0,get:function(){return y[e]},set:function(t){y[e]=t}})}(T[E++]);(_.constructor=S).prototype=_,d(i,"RegExp",S)}f("RegExp")},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-regexp":77,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/redefine":110,"../internals/regexp-flags":113,"../internals/regexp-sticky-helpers":114,"../internals/set-species":118,"../internals/well-known-symbol":150}],195:[function(e,t,n){"use strict";var r=e("../internals/export");e=e("../internals/regexp-exec"),r({target:"RegExp",proto:!0,forced:/./.exec!==e},{exec:e})},{"../internals/export":50,"../internals/regexp-exec":112}],196:[function(e,t,n){"use strict";var r=e("../internals/redefine"),i=e("../internals/an-object"),o=e("../internals/fails"),a=e("../internals/regexp-flags"),s=(e="toString",RegExp.prototype),l=s[e],c=(o=o((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),l.name!=e);(o||c)&&r(RegExp.prototype,e,(function(){var e=i(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in s)?a.call(e):n)}),{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":110,"../internals/regexp-flags":113}],197:[function(e,t,n){"use strict";var r=e("../internals/collection");e=e("../internals/collection-strong"),t.exports=r("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),e)},{"../internals/collection":32,"../internals/collection-strong":30}],198:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/object-get-own-property-descriptor").f,o=e("../internals/to-length"),a=e("../internals/not-a-regexp"),s=e("../internals/require-object-coercible"),l=e("../internals/correct-is-regexp-logic"),c=(e=e("../internals/is-pure"),"".endsWith),u=Math.min;l=l("endsWith"),r({target:"String",proto:!0,forced:!(!e&&!l&&(r=i(String.prototype,"endsWith"))&&!r.writable||l)},{endsWith:function(e){var t=String(s(this)),n=(a(e),1<arguments.length?arguments[1]:void 0),r=o(t.length);return n=void 0===n?r:u(o(n),r),r=String(e),c?c.call(t,r,n):t.slice(n-r.length,n)===r}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":115,"../internals/to-length":138}],199:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/not-a-regexp"),o=e("../internals/require-object-coercible");r({target:"String",proto:!0,forced:!e("../internals/correct-is-regexp-logic")("includes")},{includes:function(e){return!!~String(o(this)).indexOf(i(e),1<arguments.length?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":88,"../internals/require-object-coercible":115}],200:[function(e,t,n){"use strict";var r=e("../internals/string-multibyte").charAt,i=e("../internals/internal-state"),o=(e=e("../internals/define-iterator"),"String Iterator"),a=i.set,s=i.getterFor(o);e(String,"String",(function(e){a(this,{type:o,string:String(e),index:0})}),(function(){var e=s(this),t=e.string,n=e.index;return n>=t.length?{value:void 0,done:!0}:(t=r(t,n),e.index+=t.length,{value:t,done:!1})}))},{"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/string-multibyte":125}],201:[function(e,t,n){"use strict";var r=e("../internals/fix-regexp-well-known-symbol-logic"),i=e("../internals/an-object"),o=e("../internals/to-length"),a=e("../internals/require-object-coercible"),s=e("../internals/advance-string-index"),l=e("../internals/regexp-exec-abstract");r("match",1,(function(e,t,n){return[function(t){var n=a(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var a=i(e),c=String(this);if(!a.global)return l(a,c);for(var u=a.unicode,p=[],d=a.lastIndex=0;null!==(h=l(a,c));){var h=String(h[0]);""===(p[d]=h)&&(a.lastIndex=s(c,o(a.lastIndex),u)),d++}return 0===d?null:p}]}))},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/to-length":138}],202:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/string-pad").start;r({target:"String",proto:!0,forced:e("../internals/string-pad-webkit-bug")},{padStart:function(e){return i(this,e,1<arguments.length?arguments[1]:void 0)}})},{"../internals/export":50,"../internals/string-pad":127,"../internals/string-pad-webkit-bug":126}],203:[function(e,t,n){e("../internals/export")({target:"String",proto:!0},{repeat:e("../internals/string-repeat")})},{"../internals/export":50,"../internals/string-repeat":129}],204:[function(e,t,n){"use strict";var r=e("../internals/fix-regexp-well-known-symbol-logic"),i=e("../internals/an-object"),o=e("../internals/to-object"),a=e("../internals/to-length"),s=e("../internals/to-integer"),l=e("../internals/require-object-coercible"),c=e("../internals/advance-string-index"),u=e("../internals/regexp-exec-abstract"),p=Math.max,d=Math.min,h=Math.floor,m=/\$([$&'`]|\d\d?|<[^>]*>)/g,f=/\$([$&'`]|\d\d?)/g;r("replace",2,(function(e,t,n,r){var g=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,y=r.REPLACE_KEEPS_$0,_=g?"$":"$0";return[function(n,r){var i=l(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,i,r):t.call(String(i),n,r)},function(e,r){if(!g&&y||"string"==typeof r&&-1===r.indexOf(_)){var l=n(t,e,this,r);if(l.done)return l.value}for(var v,b=i(e),w=String(this),x="function"==typeof r,S=(x||(r=String(r)),b.global),T=(S&&(v=b.unicode,b.lastIndex=0),[]);null!==(A=u(b,w))&&(T.push(A),S);)""===String(A[0])&&(b.lastIndex=c(w,a(b.lastIndex),v));for(var E,I="",k=0,j=0;j<T.length;j++){for(var A=T[j],C=String(A[0]),O=p(d(s(A.index),w.length),0),M=[],N=1;N<A.length;N++)M.push(void 0===(E=A[N])?E:String(E));var R=A.groups,P=x?(P=[C].concat(M,O,w),void 0!==R&&P.push(R),String(r.apply(void 0,P))):function(e,n,r,i,a,s){var l=r+e.length,c=i.length,u=f;return void 0!==a&&(a=o(a),u=m),t.call(s,u,(function(t,o){var s;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,r);case"'":return n.slice(l);case"<":s=a[o.slice(1,-1)];break;default:var u,p=+o;if(0==p)return t;if(c<p)return 0!==(u=h(p/10))&&u<=c?void 0===i[u-1]?o.charAt(1):i[u-1]+o.charAt(1):t;s=i[p-1]}return void 0===s?"":s}))}(C,w,O,M,R,r);k<=O&&(I+=w.slice(k,O)+P,k=O+C.length)}return I+w.slice(k)}]}))},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],205:[function(e,t,n){"use strict";var r=e("../internals/fix-regexp-well-known-symbol-logic"),i=e("../internals/an-object"),o=e("../internals/require-object-coercible"),a=e("../internals/same-value"),s=e("../internals/regexp-exec-abstract");r("search",1,(function(e,t,n){return[function(t){var n=o(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r,o=n(t,e,this);return o.done?o.value:(o=i(e),e=String(this),r=o.lastIndex,a(r,0)||(o.lastIndex=0),e=s(o,e),a(o.lastIndex,r)||(o.lastIndex=r),null===e?-1:e.index)}]}))},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/same-value":116}],206:[function(e,t,n){"use strict";var r=e("../internals/fix-regexp-well-known-symbol-logic"),i=e("../internals/is-regexp"),o=e("../internals/an-object"),a=e("../internals/require-object-coercible"),s=e("../internals/species-constructor"),l=e("../internals/advance-string-index"),c=e("../internals/to-length"),u=e("../internals/regexp-exec-abstract"),p=e("../internals/regexp-exec"),d=(e=e("../internals/fails"),[].push),h=Math.min,m=4294967295,f=!e((function(){return!RegExp(m,"y")}));r("split",2,(function(e,t,n){var r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(e,n){var r=String(a(this)),o=void 0===n?m:n>>>0;if(0==o)return[];if(void 0===e)return[r];if(!i(e))return t.call(r,e,o);for(var s,l,c,u=[],h=(n=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),0),f=new RegExp(e.source,n+"g");(s=p.call(f,r))&&!(h<(l=f.lastIndex)&&(u.push(r.slice(h,s.index)),1<s.length&&s.index<r.length&&d.apply(u,s.slice(1)),c=s[0].length,h=l,u.length>=o));)f.lastIndex===s.index&&f.lastIndex++;return h===r.length?!c&&f.test("")||u.push(""):u.push(r.slice(h)),u.length>o?u.slice(0,o):u}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t;return[function(t,n){var i=a(this),o=null==t?void 0:t[e];return void 0!==o?o.call(t,i,n):r.call(String(i),t,n)},function(e,i){if((a=n(r,e,this,i,r!==t)).done)return a.value;var a=o(e),p=String(this),d=(e=s(a,RegExp),a.unicode),g=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(f?"y":"g"),y=new e(f?a:"^(?:"+a.source+")",g),_=void 0===i?m:i>>>0;if(0==_)return[];if(0===p.length)return null===u(y,p)?[p]:[];for(var v=0,b=0,w=[];b<p.length;){y.lastIndex=f?b:0;var x,S=u(y,f?p:p.slice(b));if(null===S||(x=h(c(y.lastIndex+(f?0:b)),p.length))===v)b=l(p,b,d);else{if(w.push(p.slice(v,b)),w.length===_)return w;for(var T=1;T<=S.length-1;T++)if(w.push(S[T]),w.length===_)return w;b=v=x}}return w.push(p.slice(v)),w}]}),!f)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":77,"../internals/regexp-exec":112,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/species-constructor":123,"../internals/to-length":138}],207:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/object-get-own-property-descriptor").f,o=e("../internals/to-length"),a=e("../internals/not-a-regexp"),s=e("../internals/require-object-coercible"),l=e("../internals/correct-is-regexp-logic"),c=(e=e("../internals/is-pure"),"".startsWith),u=Math.min;l=l("startsWith"),r({target:"String",proto:!0,forced:!(!e&&!l&&(r=i(String.prototype,"startsWith"))&&!r.writable||l)},{startsWith:function(e){var t=String(s(this)),n=(a(e),o(u(1<arguments.length?arguments[1]:void 0,t.length)));return e=String(e),c?c.call(t,e,n):t.slice(n,n+e.length)===e}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":115,"../internals/to-length":138}],208:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/create-html");r({target:"String",proto:!0,forced:e("../internals/string-html-forced")("sub")},{sub:function(){return i(this,"sub","","")}})},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":124}],209:[function(e,t,n){"use strict";var r=e("../internals/export"),i=e("../internals/string-trim").trim;r({target:"String",proto:!0,forced:e("../internals/string-trim-forced")("trim")},{trim:function(){return i(this)}})},{"../internals/export":50,"../internals/string-trim":131,"../internals/string-trim-forced":130}],210:[function(e,t,n){"use strict";var r,i,o,a,s,l=e("../internals/export"),c=e("../internals/descriptors"),u=e("../internals/global"),p=e("../internals/has"),d=e("../internals/is-object"),h=e("../internals/object-define-property").f,m=(e=e("../internals/copy-constructor-properties"),u.Symbol);!c||"function"!=typeof m||"description"in m.prototype&&void 0===m().description||(r={},e(i=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof i?new m(e):void 0===e?m():m(e);return""===e&&(r[t]=!0),t},m),(u=i.prototype=m.prototype).constructor=i,o=u.toString,a="Symbol(test)"==String(m("test")),s=/^Symbol\((.*)\)[^)]+$/,h(u,"description",{configurable:!0,get:function(){var e=d(this)?this.valueOf():this,t=o.call(e);return p(r,e)?"":""===(e=a?t.slice(7,-1):t.replace(s,"$1"))?void 0:e}}),l({global:!0,forced:!0},{Symbol:i}))},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93}],211:[function(e,t,n){e("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":42}],212:[function(e,t,n){"use strict";function r(e,t){var n=te[e]=S(X[q]);return H(n,{type:$,tag:e,description:t}),p||(n.description=t),n}function i(e,t){_(e);var n=b(t);return t=T(n).concat(ue(n)),G(t,(function(t){p&&!ce.call(n,t)||le(e,t,n[t])})),e}function o(e,t){var n;if(e=b(e),t=w(t,!0),e!==K||!f(te,t)||f(ne,t))return!(n=J(e,t))||!f(te,t)||f(e,z)&&e[z][t]||(n.enumerable=!0),n}function a(e){e=Z(b(e));var t=[];return G(e,(function(e){f(te,e)||f(P,e)||t.push(e)})),t}var s=e("../internals/export"),l=e("../internals/global"),c=e("../internals/get-built-in"),u=e("../internals/is-pure"),p=e("../internals/descriptors"),d=e("../internals/native-symbol"),h=e("../internals/use-symbol-as-uid"),m=e("../internals/fails"),f=e("../internals/has"),g=e("../internals/is-array"),y=e("../internals/is-object"),_=e("../internals/an-object"),v=e("../internals/to-object"),b=e("../internals/to-indexed-object"),w=e("../internals/to-primitive"),x=e("../internals/create-property-descriptor"),S=e("../internals/object-create"),T=e("../internals/object-keys"),E=e("../internals/object-get-own-property-names"),I=e("../internals/object-get-own-property-names-external"),k=e("../internals/object-get-own-property-symbols"),j=e("../internals/object-get-own-property-descriptor"),A=e("../internals/object-define-property"),C=e("../internals/object-property-is-enumerable"),O=e("../internals/create-non-enumerable-property"),M=e("../internals/redefine"),N=e("../internals/shared"),R=e("../internals/shared-key"),P=e("../internals/hidden-keys"),D=e("../internals/uid"),L=e("../internals/well-known-symbol"),F=e("../internals/well-known-symbol-wrapped"),B=e("../internals/define-well-known-symbol"),U=e("../internals/set-to-string-tag"),V=e("../internals/internal-state"),G=e("../internals/array-iteration").forEach,z=R("hidden"),$="Symbol",q="prototype",H=(e=L("toPrimitive"),V.set),W=V.getterFor($),K=Object[q],X=l.Symbol,Y=c("JSON","stringify"),J=j.f,Q=A.f,Z=I.f,ee=C.f,te=N("symbols"),ne=N("op-symbols"),re=N("string-to-symbol-registry"),ie=N("symbol-to-string-registry"),oe=(R=N("wks"),!(V=l.QObject)||!V[q]||!V[q].findChild),ae=p&&m((function(){return 7!=S(Q({},"a",{get:function(){return Q(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=J(K,t);r&&delete K[t],Q(e,t,n),r&&e!==K&&Q(K,t,r)}:Q,se=h?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof X},le=function(e,t,n){return e===K&&le(ne,t,n),_(e),t=w(t,!0),_(n),(f(te,t)?(n.enumerable?(f(e,z)&&e[z][t]&&(e[z][t]=!1),n=S(n,{enumerable:x(0,!1)})):(f(e,z)||Q(e,z,x(1,{})),e[z][t]=!0),ae):Q)(e,t,n)},ce=function(e){e=w(e,!0);var t=ee.call(this,e);return!(this===K&&f(te,e)&&!f(ne,e))&&(!(t||!f(this,e)||!f(te,e)||f(this,z)&&this[z][e])||t)},ue=function(e){var t=e===K,n=(e=Z(t?ne:b(e)),[]);return G(e,(function(e){!f(te,e)||t&&!f(K,e)||n.push(te[e])})),n};d||(M((X=function(){if(this instanceof X)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=D(e),n=function(e){this===K&&n.call(ne,e),f(this,z)&&f(this[z],t)&&(this[z][t]=!1),ae(this,t,x(1,e))};return p&&oe&&ae(K,t,{configurable:!0,set:n}),r(t,e)})[q],"toString",(function(){return W(this).tag})),M(X,"withoutSetter",(function(e){return r(D(e),e)})),C.f=ce,A.f=le,j.f=o,E.f=I.f=a,k.f=ue,F.f=function(e){return r(L(e),e)},p&&(Q(X[q],"description",{configurable:!0,get:function(){return W(this).description}}),u||M(K,"propertyIsEnumerable",ce,{unsafe:!0}))),s({global:!0,wrap:!0,forced:!d,sham:!d},{Symbol:X}),G(T(R),(function(e){B(e)})),s({target:$,stat:!0,forced:!d},{for:function(e){var t;return e=String(e),f(re,e)?re[e]:(t=X(e),re[e]=t,ie[t]=e,t)},keyFor:function(e){if(!se(e))throw TypeError(e+" is not a symbol");if(f(ie,e))return ie[e]},useSetter:function(){oe=!0},useSimple:function(){oe=!1}}),s({target:"Object",stat:!0,forced:!d,sham:!p},{create:function(e,t){return void 0===t?S(e):i(S(e),t)},defineProperty:le,defineProperties:i,getOwnPropertyDescriptor:o}),s({target:"Object",stat:!0,forced:!d},{getOwnPropertyNames:a,getOwnPropertySymbols:ue}),s({target:"Object",stat:!0,forced:m((function(){k.f(1)}))},{getOwnPropertySymbols:function(e){return k.f(v(e))}}),Y&&s({target:"JSON",stat:!0,forced:!d||m((function(){var e=X();return"[null]"!=Y([e])||"{}"!=Y({a:e})||"{}"!=Y(Object(e))}))},{stringify:function(e,t,n){for(var r,i=[e],o=1;o<arguments.length;)i.push(arguments[o++]);if((y(r=t)||void 0!==e)&&!se(e))return g(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!se(t))return t}),i[1]=t,Y.apply(null,i)}}),X[q][e]||O(X[q],e,X[q].valueOf),U(X,$),P[z]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":57,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/internal-state":71,"../internals/is-array":73,"../internals/is-object":75,"../internals/is-pure":76,"../internals/native-symbol":84,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-names-external":95,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/shared":122,"../internals/shared-key":120,"../internals/to-indexed-object":136,"../internals/to-object":139,"../internals/to-primitive":142,"../internals/uid":147,"../internals/use-symbol-as-uid":148,"../internals/well-known-symbol":150,"../internals/well-known-symbol-wrapped":149}],213:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),i=e("../internals/array-copy-within"),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("copyWithin",(function(e,t){return i.call(o(this),e,t,2<arguments.length?arguments[2]:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],214:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),i=e("../internals/array-iteration").every,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("every",(function(e){return i(o(this),e,1<arguments.length?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],215:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),i=e("../internals/array-fill"),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("fill",(function(e){return i.apply(o(this),arguments)}))},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],216:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),i=e("../internals/array-iteration").filter,o=e("../internals/species-constructor"),a=r.aTypedArray,s=r.aTypedArrayConstructor;(0,r.exportTypedArrayMethod)("filter",(function(e){for(var t=i(a(this),e,1<arguments.length?arguments[1]:void 0),n=(e=o(this,this.constructor),0),r=t.length,l=new(s(e))(r);n<r;)l[n]=t[n++];return l}))},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":123}],217:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),i=e("../internals/array-iteration").findIndex,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("findIndex",(function(e){return i(o(this),e,1<arguments.length?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],218:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),i=e("../internals/array-iteration").find,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("find",(function(e){return i(o(this),e,1<arguments.length?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],219:[function(e,t,n){e("../internals/typed-array-constructor")("Float32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{"../internals/typed-array-constructor":144}],220:[function(e,t,n){e("../internals/typed-array-constructor")("Float64",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{"../internals/typed-array-constructor":144}],221:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),i=e("../internals/array-iteration").forEach,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("forEach",(function(e){i(o(this),e,1<arguments.length?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],222:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),i=e("../internals/array-includes").includes,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("includes",(function(e){return i(o(this),e,1<arguments.length?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],223:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),i=e("../internals/array-includes").indexOf,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("indexOf",(function(e){return i(o(this),e,1<arguments.length?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],224:[function(e,t,n){e("../internals/typed-array-constructor")("Int16",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{"../internals/typed-array-constructor":144}],225:[function(e,t,n){e("../internals/typed-array-constructor")("Int32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{"../internals/typed-array-constructor":144}],226:[function(e,t,n){"use strict";function r(){return s.call(u(this))}var i=e("../internals/global"),o=e("../internals/array-buffer-view-core"),a=e("../modules/es.array.iterator"),s=(e=e("../internals/well-known-symbol")("iterator"),i=i.Uint8Array,a.values),l=a.keys,c=a.entries,u=o.aTypedArray;a=o.exportTypedArrayMethod,i=!!(o=i&&i.prototype[e])&&("values"==o.name||null==o.name),a("entries",(function(){return c.call(u(this))})),a("keys",(function(){return l.call(u(this))})),a("values",r,!i),a(e,r,!i)},{"../internals/array-buffer-view-core":12,"../internals/global":60,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],227:[function(e,t,n){"use strict";var r=(e=e("../internals/array-buffer-view-core")).aTypedArray,i=(e=e.exportTypedArrayMethod,[].join);e("join",(function(e){return i.apply(r(this),arguments)}))},{"../internals/array-buffer-view-core":12}],228:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),i=e("../internals/array-last-index-of"),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("lastIndexOf",(function(e){return i.apply(o(this),arguments)}))},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],229:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),i=e("../internals/array-iteration").map,o=e("../internals/species-constructor"),a=r.aTypedArray,s=r.aTypedArrayConstructor;(0,r.exportTypedArrayMethod)("map",(function(e){return i(a(this),e,1<arguments.length?arguments[1]:void 0,(function(e,t){return new(s(o(e,e.constructor)))(t)}))}))},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":123}],230:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),i=e("../internals/array-reduce").right,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduceRight",(function(e){return i(o(this),e,arguments.length,1<arguments.length?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],231:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),i=e("../internals/array-reduce").left,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduce",(function(e){return i(o(this),e,arguments.length,1<arguments.length?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],232:[function(e,t,n){"use strict";var r=(e=e("../internals/array-buffer-view-core")).aTypedArray,i=(e=e.exportTypedArrayMethod,Math.floor);e("reverse",(function(){for(var e,t=r(this).length,n=i(t/2),o=0;o<n;)e=this[o],this[o++]=this[--t],this[t]=e;return this}))},{"../internals/array-buffer-view-core":12}],233:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),i=e("../internals/to-length"),o=e("../internals/to-offset"),a=e("../internals/to-object"),s=(e=e("../internals/fails"),r.aTypedArray);(0,r.exportTypedArrayMethod)("set",(function(e){s(this);var t=o(1<arguments.length?arguments[1]:void 0,1),n=this.length,r=a(e),l=i(r.length),c=0;if(n<l+t)throw RangeError("Wrong length");for(;c<l;)this[t+c]=r[c++]}),e((function(){new Int8Array(1).set({})})))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":138,"../internals/to-object":139,"../internals/to-offset":140}],234:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),i=e("../internals/species-constructor"),o=(e=e("../internals/fails"),r.aTypedArray),a=r.aTypedArrayConstructor,s=(r=r.exportTypedArrayMethod,[].slice);r("slice",(function(e,t){for(var n=s.call(o(this),e,t),r=(e=i(this,this.constructor),0),l=n.length,c=new(a(e))(l);r<l;)c[r]=n[r++];return c}),e((function(){new Int8Array(1).slice()})))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":123}],235:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),i=e("../internals/array-iteration").some,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("some",(function(e){return i(o(this),e,1<arguments.length?arguments[1]:void 0)}))},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],236:[function(e,t,n){"use strict";var r=(e=e("../internals/array-buffer-view-core")).aTypedArray,i=(e=e.exportTypedArrayMethod,[].sort);e("sort",(function(e){return i.call(r(this),e)}))},{"../internals/array-buffer-view-core":12}],237:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core"),i=e("../internals/to-length"),o=e("../internals/to-absolute-index"),a=e("../internals/species-constructor"),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("subarray",(function(e,t){var n=s(this),r=n.length;return e=o(e,r),new(a(n,n.constructor))(n.buffer,n.byteOffset+e*n.BYTES_PER_ELEMENT,i((void 0===t?r:o(t,r))-e))}))},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":123,"../internals/to-absolute-index":134,"../internals/to-length":138}],238:[function(e,t,n){"use strict";var r=e("../internals/global"),i=e("../internals/array-buffer-view-core"),o=(e=e("../internals/fails"),r.Int8Array),a=i.aTypedArray,s=(r=i.exportTypedArrayMethod,[].toLocaleString),l=[].slice,c=!!o&&e((function(){s.call(new o(1))}));r("toLocaleString",(function(){return s.apply(c?l.call(a(this)):a(this),arguments)}),e((function(){return[1,2].toLocaleString()!=new o([1,2]).toLocaleString()}))||!e((function(){o.prototype.toLocaleString.call([1,2])})))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],239:[function(e,t,n){"use strict";var r=e("../internals/array-buffer-view-core").exportTypedArrayMethod,i=e("../internals/fails"),o=(e=(e=e("../internals/global").Uint8Array)&&e.prototype||{},[].toString),a=[].join;i((function(){o.call({})}))&&(o=function(){return a.call(this)}),i=e.toString!=o,r("toString",o,i)},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],240:[function(e,t,n){e("../internals/typed-array-constructor")("Uint16",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{"../internals/typed-array-constructor":144}],241:[function(e,t,n){e("../internals/typed-array-constructor")("Uint32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{"../internals/typed-array-constructor":144}],242:[function(e,t,n){e("../internals/typed-array-constructor")("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},{"../internals/typed-array-constructor":144}],243:[function(e,t,n){e("../internals/typed-array-constructor")("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}),!0)},{"../internals/typed-array-constructor":144}],244:[function(e,t,n){"use strict";function r(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}var i,o,a,s,l,c=e("../internals/global"),u=e("../internals/redefine-all"),p=e("../internals/internal-metadata"),d=e("../internals/collection"),h=e("../internals/collection-weak"),m=e("../internals/is-object"),f=e("../internals/internal-state").enforce,g=(e=e("../internals/native-weak-map"),c=!c.ActiveXObject&&"ActiveXObject"in c,Object.isExtensible);t=t.exports=d("WeakMap",r,h),e&&c&&(i=h.getConstructor(r,"WeakMap",!0),p.REQUIRED=!0,d=t.prototype,o=d.delete,a=d.has,s=d.get,l=d.set,u(d,{delete:function(e){var t;return m(e)&&!g(e)?((t=f(this)).frozen||(t.frozen=new i),o.call(this,e)||t.frozen.delete(e)):o.call(this,e)},has:function(e){var t;return m(e)&&!g(e)?((t=f(this)).frozen||(t.frozen=new i),a.call(this,e)||t.frozen.has(e)):a.call(this,e)},get:function(e){var t;return!m(e)||g(e)||((t=f(this)).frozen||(t.frozen=new i),a.call(this,e))?s.call(this,e):t.frozen.get(e)},set:function(e,t){var n;return!m(e)||g(e)||((n=f(this)).frozen||(n.frozen=new i),a.call(this,e))?l.call(this,e,t):n.frozen.set(e,t),this}}))},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":60,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/redefine-all":109}],245:[function(e,t,n){var r,i=e("../internals/global"),o=e("../internals/dom-iterables"),a=e("../internals/array-for-each"),s=e("../internals/create-non-enumerable-property");for(r in o){var l;if((l=(l=i[r])&&l.prototype)&&l.forEach!==a)try{s(l,"forEach",a)}catch(e){l.forEach=a}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60}],246:[function(e,t,n){var r,i=e("../internals/global"),o=e("../internals/dom-iterables"),a=e("../modules/es.array.iterator"),s=e("../internals/create-non-enumerable-property"),l=(e=e("../internals/well-known-symbol"))("iterator"),c=e("toStringTag"),u=a.values;for(r in o){var p=i[r],d=p&&p.prototype;if(d){if(d[l]!==u)try{s(d,l,u)}catch(e){d[l]=u}if(d[c]||s(d,c,r),o[r])for(var h in a)if(d[h]!==a[h])try{s(d,h,a[h])}catch(e){d[h]=a[h]}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],247:[function(e,t,n){"use strict";function r(e){try{return decodeURIComponent(e)}catch(t){return e}}function i(e){return F[e]}function o(e){return encodeURIComponent(e).replace(L,i)}function a(e){this.entries.length=0,B(this.entries,e)}function s(e,t){if(e<t)throw TypeError("Not enough arguments")}function l(){y(this,l,A);var e,t,n,r,i,o,s,c,u=0<arguments.length?arguments[0]:void 0,p=[];if(O(this,{type:A,entries:p,updateURL:function(){},updateSearchParams:a}),void 0!==u)if(x(u))if("function"==typeof(e=I(u)))for(n=(t=e.call(u)).next;!(r=n.call(t)).done;){if((o=(i=(r=E(w(r.value))).next).call(r)).done||(s=i.call(r)).done||!i.call(r).done)throw TypeError("Expected sequence with length 2");p.push({key:o.value+"",value:s.value+""})}else for(c in u)_(u,c)&&p.push({key:c,value:u[c]+""});else B(p,"string"==typeof u?"?"===u.charAt(0)?u.slice(1):u:u+"")}e("../modules/es.array.iterator");var c=e("../internals/export"),u=e("../internals/get-built-in"),p=e("../internals/native-url"),d=e("../internals/redefine"),h=e("../internals/redefine-all"),m=e("../internals/set-to-string-tag"),f=e("../internals/create-iterator-constructor"),g=e("../internals/internal-state"),y=e("../internals/an-instance"),_=e("../internals/has"),v=e("../internals/function-bind-context"),b=e("../internals/classof"),w=e("../internals/an-object"),x=e("../internals/is-object"),S=e("../internals/object-create"),T=e("../internals/create-property-descriptor"),E=e("../internals/get-iterator"),I=e("../internals/get-iterator-method"),k=(e=e("../internals/well-known-symbol"),u("fetch")),j=u("Headers"),A=(u=e("iterator"),"URLSearchParams"),C=A+"Iterator",O=g.set,M=g.getterFor(A),N=g.getterFor(C),R=/\+/g,P=Array(4),D=function(e){var t,n=e.replace(R," "),i=4;try{return decodeURIComponent(n)}catch(e){for(;i;)n=n.replace((t=i--,P[t-1]||(P[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))),r);return n}},L=/[!'()~]|%20/g,F={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},B=function(e,t){if(t)for(var n,r=t.split("&"),i=0;i<r.length;)(n=r[i++]).length&&(n=n.split("="),e.push({key:D(n.shift()),value:D(n.join("="))}))},U=f((function(e,t){O(this,{type:C,iterator:E(M(e).entries),kind:t})}),"Iterator",(function(){var e,t=(e=N(this)).kind,n=(e=e.iterator.next()).value;return e.done||(e.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),e}));h(e=l.prototype,{append:function(e,t){s(arguments.length,2);var n=M(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},delete:function(e){s(arguments.length,1);for(var t=M(this),n=t.entries,r=e+"",i=0;i<n.length;)n[i].key===r?n.splice(i,1):i++;t.updateURL()},get:function(e){s(arguments.length,1);for(var t=M(this).entries,n=e+"",r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){s(arguments.length,1);for(var t=M(this).entries,n=e+"",r=[],i=0;i<t.length;i++)t[i].key===n&&r.push(t[i].value);return r},has:function(e){s(arguments.length,1);for(var t=M(this).entries,n=e+"",r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){s(arguments.length,1);for(var n,r=M(this),i=r.entries,o=!1,a=e+"",l=t+"",c=0;c<i.length;c++)(n=i[c]).key===a&&(o?i.splice(c--,1):(o=!0,n.value=l));o||i.push({key:a,value:l}),r.updateURL()},sort:function(){for(var e,t,n=M(this),r=n.entries,i=r.slice(),o=r.length=0;o<i.length;o++){for(e=i[o],t=0;t<o;t++)if(r[t].key>e.key){r.splice(t,0,e);break}t===o&&r.push(e)}n.updateURL()},forEach:function(e){for(var t,n=M(this).entries,r=v(e,1<arguments.length?arguments[1]:void 0,3),i=0;i<n.length;)r((t=n[i++]).value,t.key,this)},keys:function(){return new U(this,"keys")},values:function(){return new U(this,"values")},entries:function(){return new U(this,"entries")}},{enumerable:!0}),d(e,u,e.entries),d(e,"toString",(function(){for(var e,t=M(this).entries,n=[],r=0;r<t.length;)e=t[r++],n.push(o(e.key)+"="+o(e.value));return n.join("&")}),{enumerable:!0}),m(l,A),c({global:!0,forced:!p},{URLSearchParams:l}),p||"function"!=typeof k||"function"!=typeof j||c({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,n,r;return e=[e],1<arguments.length&&(x(t=arguments[1])&&(n=t.body,b(n)===A&&((r=t.headers?new j(t.headers):new j).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=S(t,{body:T(0,String(n)),headers:T(0,r)}))),e.push(t)),k.apply(this,e)}}),t.exports={URLSearchParams:l,getState:M}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":55,"../internals/get-built-in":57,"../internals/get-iterator":59,"../internals/get-iterator-method":58,"../internals/has":61,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-url":85,"../internals/object-create":91,"../internals/redefine":110,"../internals/redefine-all":109,"../internals/set-to-string-tag":119,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],248:[function(e,t,n){"use strict";function r(e){var t,n,r,i;if("number"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=C(e/256);return t.join(".")}if("object"!=typeof e)return e;for(t="",r=K(e),n=0;n<8;n++)i&&0===e[n]||(i=i&&!1,r===n?(t+=n?":":"::",i=!0):(t+=e[n].toString(16),n<7&&(t+=":")));return"["+t+"]"}function i(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme}function o(e,t,n,r){var i,o,a,s=n||le,c=0,u="",p=!1,d=!1,h=!1;for(n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(q,"")),t=t.replace(H,""),i=b(t);c<=i.length;){switch(o=i[c],s){case le:if(!o||!D.test(o)){if(n)return N;s=ue;continue}u+=o.toLowerCase(),s=ce;break;case ce:if(o&&(L.test(o)||"+"==o||"-"==o||"."==o))u+=o.toLowerCase();else{if(":"!=o){if(n)return N;u="",s=ue,c=0;continue}if(n&&(te(e)!=_(ee,u)||"file"==u&&(ne(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=u,n)return void(te(e)&&ee[e.scheme]==e.port&&(e.port=null));u="","file"==e.scheme?s=we:te(e)&&r&&r.scheme==e.scheme?s=pe:te(e)?s=fe:"/"==i[c+1]?(s=de,c++):(e.cannotBeABaseURL=!0,e.path.push(""),s=Ie)}break;case ue:if(!r||r.cannotBeABaseURL&&"#"!=o)return N;if(r.cannotBeABaseURL&&"#"==o){e.scheme=r.scheme,e.path=r.path.slice(),e.query=r.query,e.fragment="",e.cannotBeABaseURL=!0,s=je;break}s="file"==r.scheme?we:he;continue;case pe:if("/"!=o||"/"!=i[c+1]){s=he;continue}s=ge,c++;break;case de:if("/"==o){s=ye;break}s=Ee;continue;case he:if(e.scheme=r.scheme,o==l)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query;else if("/"==o||"\\"==o&&te(e))s=me;else if("?"==o)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query="",s=ke;else{if("#"!=o){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.path.pop(),s=Ee;continue}e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query,e.fragment="",s=je}break;case me:if(!te(e)||"/"!=o&&"\\"!=o){if("/"!=o){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,s=Ee;continue}s=ye}else s=ge;break;case fe:if(s=ge,"/"!=o||"/"!=u.charAt(c+1))continue;c++;break;case ge:if("/"==o||"\\"==o)break;s=ye;continue;case ye:if("@"==o){p&&(u="%40"+u),p=!0;for(var m=b(u),f=0;f<m.length;f++){var g=m[f];":"!=g||h?(g=Z(g,Q),h?e.password+=g:e.username+=g):h=!0}u=""}else if(o==l||"/"==o||"?"==o||"#"==o||"\\"==o&&te(e)){if(p&&""==u)return M;c-=b(u).length+1,u="",s=_e}else u+=o;break;case _e:case ve:if(n&&"file"==e.scheme){s=Se;continue}if(":"!=o||d){if(o==l||"/"==o||"?"==o||"#"==o||"\\"==o&&te(e)){if(te(e)&&""==u)return R;if(n&&""==u&&(ne(e)||null!==e.port))return;if(a=W(e,u))return a;if(u="",s=Te,n)return;continue}"["==o?d=!0:"]"==o&&(d=!1),u+=o}else{if(""==u)return R;if(a=W(e,u))return a;if(u="",s=be,n==ve)return}break;case be:if(!F.test(o)){if(o==l||"/"==o||"?"==o||"#"==o||"\\"==o&&te(e)||n){if(""!=u){var y=parseInt(u,10);if(65535<y)return P;e.port=te(e)&&y===ee[e.scheme]?null:y,u=""}if(n)return;s=Te;continue}return P}u+=o;break;case we:if(e.scheme="file","/"==o||"\\"==o)s=xe;else{if(!r||"file"!=r.scheme){s=Ee;continue}if(o==l)e.host=r.host,e.path=r.path.slice(),e.query=r.query;else if("?"==o)e.host=r.host,e.path=r.path.slice(),e.query="",s=ke;else{if("#"!=o){ie(i.slice(c).join(""))||(e.host=r.host,e.path=r.path.slice(),oe(e)),s=Ee;continue}e.host=r.host,e.path=r.path.slice(),e.query=r.query,e.fragment="",s=je}}break;case xe:if("/"==o||"\\"==o){s=Se;break}r&&"file"==r.scheme&&!ie(i.slice(c).join(""))&&(re(r.path[0],!0)?e.path.push(r.path[0]):e.host=r.host),s=Ee;continue;case Se:if(o==l||"/"==o||"\\"==o||"?"==o||"#"==o){if(!n&&re(u))s=Ee;else{if(""==u){if(e.host="",n)return}else{if(a=W(e,u))return a;if("localhost"==e.host&&(e.host=""),n)return;u=""}s=Te}continue}u+=o;break;case Te:if(te(e)){if(s=Ee,"/"!=o&&"\\"!=o)continue}else if(n||"?"!=o)if(n||"#"!=o){if(o!=l&&(s=Ee,"/"!=o))continue}else e.fragment="",s=je;else e.query="",s=ke;break;case Ee:if(o==l||"/"==o||"\\"==o&&te(e)||!n&&("?"==o||"#"==o)){if(se(u)?(oe(e),"/"==o||"\\"==o&&te(e)||e.path.push("")):ae(u)?"/"==o||"\\"==o&&te(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&re(u)&&(e.host&&(e.host=""),u=u.charAt(0)+":"),e.path.push(u)),u="","file"==e.scheme&&(o==l||"?"==o||"#"==o))for(;1<e.path.length&&""===e.path[0];)e.path.shift();"?"==o?(e.query="",s=ke):"#"==o&&(e.fragment="",s=je)}else u+=Z(o,J);break;case Ie:"?"==o?(e.query="",s=ke):"#"==o?(e.fragment="",s=je):o!=l&&(e.path[0]+=Z(o,X));break;case ke:n||"#"!=o?o!=l&&("'"==o&&te(e)?e.query+="%27":e.query+="#"==o?"%23":Z(o,X)):(e.fragment="",s=je);break;case je:o!=l&&(e.fragment+=Z(o,Y))}c++}}function a(e){var t,n,r=y(this,a,"URL"),i=1<arguments.length?arguments[1]:void 0,s=(e=String(e),j(r,{type:"URL"}));if(void 0!==i)if(i instanceof a)t=A(i);else if(n=o(t={},String(i)))throw TypeError(n);if(n=o(s,e,null,t))throw TypeError(n);var l=s.searchParams=new I;(i=k(l)).updateSearchParams(s.query),i.updateURL=function(){s.query=String(l)||null},d||(r.href=Ae.call(r),r.origin=Ce.call(r),r.protocol=Oe.call(r),r.username=Me.call(r),r.password=Ne.call(r),r.host=Re.call(r),r.hostname=Pe.call(r),r.port=De.call(r),r.pathname=Le.call(r),r.search=Fe.call(r),r.searchParams=Be.call(r),r.hash=Ue.call(r))}function s(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}}e("../modules/es.string.iterator");var l,c,u,p=e("../internals/export"),d=e("../internals/descriptors"),h=e("../internals/native-url"),m=e("../internals/global"),f=e("../internals/object-define-properties"),g=e("../internals/redefine"),y=e("../internals/an-instance"),_=e("../internals/has"),v=e("../internals/object-assign"),b=e("../internals/array-from"),w=e("../internals/string-multibyte").codeAt,x=e("../internals/string-punycode-to-ascii"),S=e("../internals/set-to-string-tag"),T=e("../modules/web.url-search-params"),E=(e=e("../internals/internal-state"),m.URL),I=T.URLSearchParams,k=T.getState,j=e.set,A=e.getterFor("URL"),C=Math.floor,O=Math.pow,M="Invalid authority",N="Invalid scheme",R="Invalid host",P="Invalid port",D=/[A-Za-z]/,L=/[\d+-.A-Za-z]/,F=/\d/,B=/^(0x|0X)/,U=/^[0-7]+$/,V=/^\d+$/,G=/^[\dA-Fa-f]+$/,z=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,$=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,q=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,H=/[\u0009\u000A\u000D]/g,W=function(e,t){var n,r,i;if("["==t.charAt(0))return"]"==t.charAt(t.length-1)&&(n=function(e){var t,n,r,i,o,a,s,l=[0,0,0,0,0,0,0,0],c=0,u=null,p=0,d=function(){return e.charAt(p)};if(":"==d()){if(":"!=e.charAt(1))return;p+=2,u=++c}for(;d();){if(8==c)return;if(":"!=d()){for(t=n=0;n<4&&G.test(d());)t=16*t+parseInt(d(),16),p++,n++;if("."==d()){if(0==n)return;if(p-=n,c>6)return;for(r=0;d();){if(i=null,r>0){if(!("."==d()&&r<4))return;p++}if(!F.test(d()))return;for(;F.test(d());){if(o=parseInt(d(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;p++}l[c]=256*l[c]+i,2!=++r&&4!=r||c++}if(4!=r)return;break}if(":"==d()){if(p++,!d())return}else if(d())return;l[c++]=t}else{if(null!==u)return;p++,u=++c}}if(null!==u)for(a=c-u,c=7;0!=c&&a>0;)s=l[c],l[c--]=l[u+a-1],l[u+--a]=s;else if(8!=c)return;return l}(t.slice(1,-1)))?void(e.host=n):R;if(te(e))return t=x(t),z.test(t)||null===(n=function(e){var t,n,r,i,o,a,s,l=e.split(".");if(l.length&&""==l[l.length-1]&&l.pop(),(t=l.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(i=l[r]))return e;if(o=10,i.length>1&&"0"==i.charAt(0)&&(o=B.test(i)?16:8,i=i.slice(8==o?1:2)),""===i)a=0;else{if(!(10==o?V:8==o?U:G).test(i))return e;a=parseInt(i,o)}n.push(a)}for(r=0;r<t;r++)if(a=n[r],r==t-1){if(a>=O(256,5-t))return null}else if(a>255)return null;for(s=n.pop(),r=0;r<n.length;r++)s+=n[r]*O(256,3-r);return s}(t))?R:void(e.host=n);if($.test(t))return R;for(n="",r=b(t),i=0;i<r.length;i++)n+=Z(r[i],X);e.host=n},K=function(e){for(var t=null,n=1,r=null,i=0,o=0;o<8;o++)0!==e[o]?(n<i&&(t=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return n<i&&(t=r,n=i),t},X={},Y=v({},X,{" ":1,'"':1,"<":1,">":1,"`":1}),J=v({},Y,{"#":1,"?":1,"{":1,"}":1}),Q=v({},J,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Z=function(e,t){var n=w(e,0);return 32<n&&n<127&&!_(t,e)?e:encodeURIComponent(e)},ee={ftp:21,file:null,http:80,https:443,ws:80,wss:443},te=function(e){return _(ee,e.scheme)},ne=function(e){return""!=e.username||""!=e.password},re=function(e,t){return 2==e.length&&D.test(e.charAt(0))&&(":"==(e=e.charAt(1))||!t&&"|"==e)},ie=function(e){return 1<e.length&&re(e.slice(0,2))&&(2==e.length||"/"===(e=e.charAt(2))||"\\"===e||"?"===e||"#"===e)},oe=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&re(t[0],!0)||t.pop()},ae=function(e){return"."===e||"%2e"===e.toLowerCase()},se=function(e){return".."===(e=e.toLowerCase())||"%2e."===e||".%2e"===e||"%2e%2e"===e},le={},ce={},ue={},pe={},de={},he={},me={},fe={},ge={},ye={},_e={},ve={},be={},we={},xe={},Se={},Te={},Ee={},Ie={},ke={},je={},Ae=(m=a.prototype,function(){var e=A(this),t=e.scheme,n=e.username,i=e.password,o=e.host,a=e.port,s=e.path,l=e.query,c=e.fragment,u=t+":";return null!==o?(u+="//",ne(e)&&(u+=n+(i?":"+i:"")+"@"),u+=r(o),null!==a&&(u+=":"+a)):"file"==t&&(u+="//"),u+=e.cannotBeABaseURL?s[0]:s.length?"/"+s.join("/"):"",null!==l&&(u+="?"+l),null!==c&&(u+="#"+c),u}),Ce=function(){var e=A(this),t=e.scheme,n=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&te(e)?t+"://"+r(e.host)+(null!==n?":"+n:""):"null"},Oe=function(){return A(this).scheme+":"},Me=function(){return A(this).username},Ne=function(){return A(this).password},Re=function(){var e=(t=A(this)).host,t=t.port;return null===e?"":null===t?r(e):r(e)+":"+t},Pe=function(){var e=A(this).host;return null===e?"":r(e)},De=function(){var e=A(this).port;return null===e?"":String(e)},Le=function(){var e=A(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Fe=function(){var e=A(this).query;return e?"?"+e:""},Be=function(){return A(this).searchParams},Ue=function(){var e=A(this).fragment;return e?"#"+e:""};d&&f(m,{href:s(Ae,(function(e){var t=A(this);if(e=o(t,e=String(e)))throw TypeError(e);k(t.searchParams).updateSearchParams(t.query)})),origin:s(Ce),protocol:s(Oe,(function(e){o(A(this),String(e)+":",le)})),username:s(Me,(function(e){var t=A(this),n=b(String(e));if(!i(t)){t.username="";for(var r=0;r<n.length;r++)t.username+=Z(n[r],Q)}})),password:s(Ne,(function(e){var t=A(this),n=b(String(e));if(!i(t)){t.password="";for(var r=0;r<n.length;r++)t.password+=Z(n[r],Q)}})),host:s(Re,(function(e){var t=A(this);t.cannotBeABaseURL||o(t,String(e),_e)})),hostname:s(Pe,(function(e){var t=A(this);t.cannotBeABaseURL||o(t,String(e),ve)})),port:s(De,(function(e){var t=A(this);i(t)||(""==(e=String(e))?t.port=null:o(t,e,be))})),pathname:s(Le,(function(e){var t=A(this);t.cannotBeABaseURL||(t.path=[],o(t,e+"",Te))})),search:s(Fe,(function(e){var t=A(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",o(t,e,ke)),k(t.searchParams).updateSearchParams(t.query)})),searchParams:s(Be),hash:s(Ue,(function(e){var t=A(this);""==(e=String(e))?t.fragment=null:("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",o(t,e,je))}))}),g(m,"toJSON",(function(){return Ae.call(this)}),{enumerable:!0}),g(m,"toString",(function(){return Ae.call(this)}),{enumerable:!0}),E&&(c=E.createObjectURL,u=E.revokeObjectURL,c&&g(a,"createObjectURL",(function(e){return c.apply(E,arguments)})),u&&g(a,"revokeObjectURL",(function(e){return u.apply(E,arguments)}))),S(a,"URL"),p({global:!0,forced:!h,sham:!d},{URL:a})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/internal-state":71,"../internals/native-url":85,"../internals/object-assign":90,"../internals/object-define-properties":92,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/string-multibyte":125,"../internals/string-punycode-to-ascii":128,"../modules/es.string.iterator":200,"../modules/web.url-search-params":247}],249:[function(e,t,n){"use strict";t.exports=e("./").polyfill()},{"./":250}],250:[function(e,t,n){(function(r,i){var o;o=function(){"use strict";function t(e){return"function"==typeof e}var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=0,a=void 0,s=void 0,l=function(e,t){m[o]=e,m[o+1]=t,2===(o+=2)&&(s?s(f):v())},c="undefined"!=typeof window?window:void 0,u=(u=c||{}).MutationObserver||u.WebKitMutationObserver,p="undefined"==typeof self&&void 0!==r&&"[object process]"==={}.toString.call(r),d="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function h(){var e=setTimeout;return function(){return e(f,1)}}var m=new Array(1e3);function f(){for(var e=0;e<o;e+=2)(0,m[e])(m[e+1]),m[e]=void 0,m[e+1]=void 0;o=0}var g,y,_,v=void 0;function b(e,t){var n,r=this,i=new this.constructor(S),o=(void 0===i[x]&&D(i),r._state);return o?(n=arguments[o-1],l((function(){return R(o,i,n,r._result)}))):M(r,i,e,t),i}function w(e){var t;return e&&"object"==typeof e&&e.constructor===this?e:(j(t=new this(S),e),t)}v=p?function(){return r.nextTick(f)}:u?(y=0,p=new u(f),_=document.createTextNode(""),p.observe(_,{characterData:!0}),function(){_.data=y=++y%2}):d?((g=new MessageChannel).port1.onmessage=f,function(){return g.port2.postMessage(0)}):(void 0===c&&"function"==typeof e?function(){try{var e=Function("return this")().require("vertx");return void 0!==(a=e.runOnLoop||e.runOnContext)?function(){a(f)}:h()}catch(e){return h()}}:h)();var x=Math.random().toString(36).substring(2);function S(){}var T=void 0,E=1,I=2;function k(e,n,r){var i,o;n.constructor===e.constructor&&r===b&&n.constructor.resolve===w?(i=e,(o=n)._state===E?C(i,o._result):o._state===I?O(i,o._result):M(o,void 0,(function(e){return j(i,e)}),(function(e){return O(i,e)}))):void 0!==r&&t(r)?function(e,t,n){l((function(e){var r=!1,i=function(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}(n,t,(function(n){r||(r=!0,(t!==n?j:C)(e,n))}),(function(t){r||(r=!0,O(e,t))}),e._label);!r&&i&&(r=!0,O(e,i))}),e)}(e,n,r):C(e,n)}function j(e,t){if(e===t)O(e,new TypeError("You cannot resolve a promise with itself"));else if(n=typeof t,null===t||"object"!=n&&"function"!=n)C(e,t);else{n=void 0;try{n=t.then}catch(t){return void O(e,t)}k(e,t,n)}var n}function A(e){e._onerror&&e._onerror(e._result),N(e)}function C(e,t){e._state===T&&(e._result=t,e._state=E,0!==e._subscribers.length&&l(N,e))}function O(e,t){e._state===T&&(e._state=I,e._result=t,l(A,e))}function M(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+E]=n,i[o+I]=r,0===o&&e._state&&l(N,e)}function N(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r,i=void 0,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?R(n,r,i,o):i(o);e._subscribers.length=0}}function R(e,n,r,i){var o=t(r),a=void 0,s=void 0,l=!0;if(o){try{a=r(i)}catch(e){l=!1,s=e}if(n===a)return void O(n,new TypeError("A promises callback cannot return that same promise."))}else a=i;n._state===T&&(o&&l?j(n,a):!1===l?O(n,s):e===E?C(n,a):e===I&&O(n,a))}var P=0;function D(e){e[x]=P++,e._state=void 0,e._result=void 0,e._subscribers=[]}F.prototype._enumerate=function(e){for(var t=0;this._state===T&&t<e.length;t++)this._eachEntry(e[t],t)},F.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===w){var i,o=void 0,a=void 0,s=!1;try{o=e.then}catch(t){s=!0,a=t}o===b&&e._state!==T?this._settledAt(e._state,t,e._result):"function"!=typeof o?(this._remaining--,this._result[t]=e):n===B?(i=new n(S),s?O(i,a):k(i,e,o),this._willSettleAt(i,t)):this._willSettleAt(new n((function(t){return t(e)})),t)}else this._willSettleAt(r(e),t)},F.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===T&&(this._remaining--,e===I?O(r,n):this._result[t]=n),0===this._remaining&&C(r,this._result)},F.prototype._willSettleAt=function(e,t){var n=this;M(e,void 0,(function(e){return n._settledAt(E,t,e)}),(function(e){return n._settledAt(I,t,e)}))};var L=F;function F(e,t){this._instanceConstructor=e,this.promise=new e(S),this.promise[x]||D(this.promise),n(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0!==this.length&&(this.length=this.length||0,this._enumerate(t),0!==this._remaining)||C(this.promise,this._result)):O(this.promise,new Error("Array Methods must be provided an Array"))}U.prototype.catch=function(e){return this.then(null,e)},U.prototype.finally=function(e){var n=this.constructor;return t(e)?this.then((function(t){return n.resolve(e()).then((function(){return t}))}),(function(t){return n.resolve(e()).then((function(){throw t}))})):this.then(e,e)};var B=U;function U(e){if(this[x]=P++,this._result=this._state=void 0,this._subscribers=[],S!==e){if("function"!=typeof e)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof U))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var t=this;try{e((function(e){j(t,e)}),(function(e){O(t,e)}))}catch(e){O(t,e)}}}return B.prototype.then=b,B.all=function(e){return new L(this,e).promise},B.race=function(e){var t=this;return n(e)?new t((function(n,r){for(var i=e.length,o=0;o<i;o++)t.resolve(e[o]).then(n,r)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))},B.resolve=w,B.reject=function(e){var t=new this(S);return O(t,e),t},B._setScheduler=function(e){s=e},B._setAsap=function(e){l=e},B._asap=l,B.polyfill=function(){var e=void 0;if(void 0!==i)e=i;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=B},B.Promise=B},"object"==typeof n&&void 0!==t?t.exports=o():this.ES6Promise=o()}).call(this,e("_process"),void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:259}],251:[function(e,t,n){var r;r=function(e,t){"use strict";function n(e){try{delete window[e]}catch(t){window[e]=void 0}}function r(e){(e=document.getElementById(e))&&document.getElementsByTagName("head")[0].removeChild(e)}t.exports=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=e,o=t.timeout||5e3,a=t.jsonpCallback||"callback",s=void 0;return new Promise((function(l,c){var u=t.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),p=a+"_"+u,d=(window[u]=function(e){l({ok:!0,json:function(){return Promise.resolve(e)}}),s&&clearTimeout(s),r(p),n(u)},i+=-1===i.indexOf("?")?"?":"&",document.createElement("script"));d.setAttribute("src",""+i+a+"="+u),t.charset&&d.setAttribute("charset",t.charset),d.id=p,document.getElementsByTagName("head")[0].appendChild(d),s=setTimeout((function(){c(new Error("JSONP request to "+e+" timed out")),n(u),r(p),window[u]=function(){n(u)}}),o),d.onerror=function(){c(new Error("JSONP request to "+e+" failed")),n(u),r(p),s&&clearTimeout(s)}}))}},void 0!==n&&void 0!==t?r(0,t):(r(r={exports:{}},r),this.fetchJsonp=r.exports)},{}],252:[function(e,t,n){var r=function(e){"use strict";var t,n,r,i,o,a,s,l,c,u;if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent)))return u=e.document,t=function(){return e.URL||e.webkitURL||e},n=u.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in n,i=/constructor/i.test(e.HTMLElement)||e.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent),a=function(t){(e.setImmediate||e.setTimeout)((function(){throw t}),0)},s=function(e){setTimeout((function(){"string"==typeof e?t().revokeObjectURL(e):e.remove()}),4e4)},l=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},u=(c=function(c,u,p){p||(c=l(c));var d,h,m=this,f=(p="application/octet-stream"===c.type,function(){for(var e=m,t="writestart progress write writeend".split(" "),n=(t=[].concat(t)).length;n--;){var r=e["on"+t[n]];if("function"==typeof r)try{r.call(e,e)}catch(e){a(e)}}});m.readyState=m.INIT,r?(d=t().createObjectURL(c),setTimeout((function(){var e,t;n.href=d,n.download=u,e=n,t=new MouseEvent("click"),e.dispatchEvent(t),f(),s(d),m.readyState=m.DONE}))):(o||p&&i)&&e.FileReader?((h=new FileReader).onloadend=function(){var t=o?h.result:h.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,m.readyState=m.DONE,f()},h.readAsDataURL(c),m.readyState=m.INIT):(d=d||t().createObjectURL(c),!p&&e.open(d,"_blank")||(e.location.href=d),m.readyState=m.DONE,f(),s(d))}).prototype,"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=l(e)),navigator.msSaveOrOpenBlob(e,t)}:(u.abort=function(){},u.readyState=u.INIT=0,u.WRITING=1,u.DONE=2,u.error=u.onwritestart=u.onprogress=u.onwrite=u.onabort=u.onerror=u.onwriteend=null,function(e,t,n){return new c(e,t||e.name||"download",n)})}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);void 0!==t&&t.exports&&(t.exports.saveAs=r)},{}],253:[function(e,t,n){var r,i=Object.defineProperty,o=(i(n,"__esModule",{value:!0}),n),a={GIFEncoder:()=>x,applyPalette:()=>function(e,t,n="rgb565"){if(!e||!e.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(e instanceof Uint8Array||e instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(256<t.length)throw new Error("applyPalette() only works with 256 colors or less");const r=new Uint32Array(e.buffer),i=r.length,o="rgb444"===n?4096:65536,a=new Uint8Array(i),s=new Array(o);if("rgba4444"===n)for(let e=0;e<i;e++){var l,c=(l=r[e])>>24&255,u=l>>16&255,m=l>>8&255,f=(f=d(l&=255,m,u,c))in s?s[f]:s[f]=function(e,t,n,r,i){let o=0,a=1e100;for(let c=0;c<i.length;c++){var s=i[c],l=v(s[3]-r);l>a||(l+=v(s[0]-e))>a||(l+=v(s[1]-t))>a||(l+=v(s[2]-n))>a||(a=l,o=c)}return o}(l,m,u,c,t);a[e]=f}else{const e="rgb444"===n?h:p;for(let n=0;n<i;n++){var g,y=(g=r[n])>>16&255,_=g>>8&255,b=(b=e(g&=255,_,y))in s?s[b]:s[b]=function(e,t,n,r){let i=0,o=1e100;for(let l=0;l<r.length;l++){var a=r[l],s=v(a[0]-e);s>o||(s+=v(a[1]-t))>o||(s+=v(a[2]-n))>o||(o=s,i=l)}return i}(g,_,y,t);a[n]=b}}return a},default:()=>k,nearestColor:()=>function(e,t,n=y){return e[b(e,t,n)]},nearestColorIndex:()=>b,nearestColorIndexWithDistance:()=>w,prequantize:()=>function(e,{roundRGB:t=5,roundAlpha:n=10,oneBitAlpha:r=null}={}){const i=new Uint32Array(e.buffer);for(let e=0;e<i.length;e++){let l=(s=i[e])>>24&255;var o=s>>16&255,a=s>>8&255,s=255&s;l=_(l,n),r&&(l=l<=("number"==typeof r?r:127)?0:255),s=_(s,t),a=_(a,t),o=_(o,t),i[e]=l<<24|o<<16|a<<8|s}},quantize:()=>function(e,t,n={}){var{format:r="rgb565",clearAlpha:i=!0,clearAlphaColor:o=0,clearAlphaThreshold:a=0,oneBitAlpha:s=!1}=n;if(!e||!e.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(e instanceof Uint8Array||e instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");e=new Uint32Array(e.buffer);let l=!1!==n.useSqrt;const c="rgba4444"===r,u=function(e,t){const n=new Array("rgb444"===t?4096:65536),r=e.length;if("rgba4444"===t)for(let t=0;t<r;++t){var i,o=(i=e[t])>>24&255,a=i>>16&255,s=i>>8&255,l=d(i&=255,s,a,o);let r=l in n?n[l]:n[l]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};r.rc+=i,r.gc+=s,r.bc+=a,r.ac+=o,r.cnt++}else if("rgb444"===t)for(let t=0;t<r;++t){var c,u=(c=e[t])>>16&255,m=c>>8&255,f=h(c&=255,m,u);let r=f in n?n[f]:n[f]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};r.rc+=c,r.gc+=m,r.bc+=u,r.cnt++}else for(let t=0;t<r;++t){var g,y=(g=e[t])>>16&255,_=g>>8&255,v=p(g&=255,_,y);let r=v in n?n[v]:n[v]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};r.rc+=g,r.gc+=_,r.bc+=y,r.cnt++}return n}(e,r),y=u.length,_=y-1,v=new Uint32Array(y+1);for(var b=0,w=0;w<y;++w){const e=u[w];null!=e&&(M=1/e.cnt,c&&(e.ac*=M),e.rc*=M,e.gc*=M,e.bc*=M,u[b++]=e)}var x,S,T;for(f(t)/b<.022&&(l=!1),w=0;w<b-1;++w)u[w].fw=w+1,u[w+1].bk=w,l&&(u[w].cnt=Math.sqrt(u[w].cnt));for(l&&(u[w].cnt=Math.sqrt(u[w].cnt)),w=0;w<b;++w){g(u,w,!1);var E=u[w].err;for(S=++v[0];1<S&&!(u[x=v[T=S>>1]].err<=E);S=T)v[S]=x;v[S]=w}var I,k=b-t;for(w=0;w<k;){for(;;){var j=v[1];if((I=u[j]).tm>=I.mtm&&u[I.nn].mtm<=I.tm)break;for(I.mtm==_?j=v[1]=v[v[0]--]:(g(u,j,!1),I.tm=w),E=u[j].err,S=1;(T=S+S)<=v[0]&&(T<v[0]&&u[v[T]].err>u[v[T+1]].err&&T++,!(E<=u[x=v[T]].err));S=T)v[S]=x;v[S]=j}var A=u[I.nn],C=I.cnt,O=A.cnt,M=1/(C+O);c&&(I.ac=M*(C*I.ac+O*A.ac)),I.rc=M*(C*I.rc+O*A.rc),I.gc=M*(C*I.gc+O*A.gc),I.bc=M*(C*I.bc+O*A.bc),I.cnt+=A.cnt,I.mtm=++w,u[A.bk].fw=A.fw,u[A.fw].bk=A.bk,A.mtm=_}let N=[];for(w=0;;0){let e=m(Math.round(u[w].rc),0,255),t=m(Math.round(u[w].gc),0,255),n=m(Math.round(u[w].bc),0,255),r=255;c&&(r=m(Math.round(u[w].ac),0,255),s&&(r=r<=(R="number"==typeof s?s:127)?0:255),i&&r<=a&&(e=t=n=o,r=0));var R=c?[e,t,n,r]:[e,t,n];if(function(e,t){for(let i=0;i<e.length;i++){var n=(r=e[i])[0]===t[0]&&r[1]===t[1]&&r[2]===t[2],r=!(4<=r.length&&4<=t.length)||r[3]===t[3];if(n&&r)return!0}return!1}(N,R)||N.push(R),0==(w=u[w].fw))break}return N},snapColorsToPalette:()=>function(e,t,n=5){if(e.length&&t.length){var r=e.map((e=>e.slice(0,3))),i=n*n,o=e[0].length;for(let n=0;n<t.length;n++){let l=t[n];l=l.length<o?[l[0],l[1],l[2],255]:l.length>o?l.slice(0,3):l.slice();var a,s=(a=w(r,l.slice(0,3),y))[0];0<(a=a[1])&&a<=i&&(e[s]=l)}}}};for(r in a)i(o,r,{get:a[r],enumerable:!0});var s={signature:"GIF",version:"89a",trailer:59,extensionIntroducer:33,applicationExtensionLabel:255,graphicControlExtensionLabel:249,imageSeparator:44,signatureSize:3,versionSize:3,globalColorTableFlagMask:128,colorResolutionMask:112,sortFlagMask:8,globalColorTableSizeMask:7,applicationIdentifierSize:8,applicationAuthCodeSize:3,disposalMethodMask:28,userInputFlagMask:2,transparentColorFlagMask:1,localColorTableFlagMask:128,interlaceFlagMask:64,idSortFlagMask:32,localColorTableSizeMask:7};function l(e=256){let t=0,n=new Uint8Array(e);return{get buffer(){return n.buffer},reset(){t=0},bytesView:()=>n.subarray(0,t),bytes:()=>n.slice(0,t),writeByte(e){r(t+1),n[t]=e,t++},writeBytes(e,i=0,o=e.length){r(t+o);for(let r=0;r<o;r++)n[t++]=e[r+i]},writeBytesView(e,i=0,o=e.byteLength){r(t+o),n.set(e.subarray(i,i+o),t),t+=o}};function r(e){var r=n.length;if(!(e<=r)){e=Math.max(e,r*(r<1048576?2:1.125)>>>0),0!=r&&(e=Math.max(e,256));const i=n;n=new Uint8Array(e),0<t&&n.set(i.subarray(0,t),0)}}}var c=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],u=function(e,t,n,r,i=l(512),o=new Uint8Array(256),a=new Int32Array(5003),s=new Int32Array(5003)){var u=a.length;r=Math.max(2,r),o.fill(0),s.fill(0),a.fill(-1);let p=0,d=0;var h=r+1;const m=h;let f=!1,g=m,y=(1<<g)-1;var _=1<<h-1;const v=1+_;let b=2+_,w=0,x=n[0],S=0;for(let e=u;e<65536;e*=2)++S;S=8-S,i.writeByte(r),j(_);var T=n.length;for(let e=1;e<T;e++)e:{var E=n[e],I=(E<<12)+x;let t=E<<S^x;if(a[t]===I)x=s[t];else{for(var k=0===t?1:u-t;0<=a[t];)if((t-=k)<0&&(t+=u),a[t]===I){x=s[t];break e}j(x),x=E,b<4096?(s[t]=b++,a[t]=I):(a.fill(-1),b=2+_,f=!0,j(_))}}return j(x),j(v),i.writeByte(0),i.bytesView();function j(e){for(p&=c[d],0<d?p|=e<<d:p=e,d+=g;8<=d;)o[w++]=255&p,254<=w&&(i.writeByte(w),i.writeBytesView(o,0,w),w=0),p>>=8,d-=8;if((b>y||f)&&(f?(g=m,y=(1<<g)-1,f=!1):(++g,y=12===g?1<<g:(1<<g)-1)),e==v){for(;0<d;)o[w++]=255&p,254<=w&&(i.writeByte(w),i.writeBytesView(o,0,w),w=0),p>>=8,d-=8;0<w&&(i.writeByte(w),i.writeBytesView(o,0,w),w=0)}}};function p(e,t,n){return e<<8&63488|t<<2&992|n>>3}function d(e,t,n,r){return e>>4|240&t|(240&n)<<4|(240&r)<<8}function h(e,t,n){return e>>4<<8|240&t|n>>4}function m(e,t,n){return e<t?t:n<e?n:e}function f(e){return e*e}function g(e,t,n){var r=0,i=1e100;const o=e[t];for(var a=o.cnt,s=o.ac,l=o.rc,c=o.gc,u=o.bc,p=o.fw;0!=p;p=e[p].fw){var d,h,m=e[p];i<=(h=a*(h=m.cnt)/(a+h))||(d=0,n&&i<=(d+=h*f(m.ac-s))||i<=(d+=h*f(m.rc-l))||i<=(d+=h*f(m.gc-c))||i<=(d+=h*f(m.bc-u))||(i=d,r=p))}o.err=i,o.nn=r}function y(e,t){for(var n=0,r=0;r<e.length;r++){var i=e[r]-t[r];n+=i*i}return n}function _(e,t){return 1<t?Math.round(e/t)*t:e}function v(e){return e*e}function b(e,t,n=y){let r=1/0,i=-1;for(let a=0;a<e.length;a++){var o=n(t,e[a]);o<r&&(r=o,i=a)}return i}function w(e,t,n=y){let r=1/0,i=-1;for(let a=0;a<e.length;a++){var o=n(t,e[a]);o<r&&(r=o,i=a)}return[i,r]}function x(e={}){const{initialCapacity:t=4096,auto:n=!0}=e,r=l(t),i=new Uint8Array(256),o=new Int32Array(5003),a=new Int32Array(5003);let c=!1;return{reset(){r.reset(),c=!1},finish(){r.writeByte(s.trailer)},bytes:()=>r.bytes(),bytesView:()=>r.bytesView(),get buffer(){return r.buffer},get stream(){return r},writeHeader:p,writeFrame(e,t,s,l={}){var{transparent:d=!1,transparentIndex:h=0,delay:m=0,palette:f=null,repeat:g=0,colorDepth:y=8,dispose:_=-1}=l;let v=!1;if(n?c||(v=!0,p(),c=!0):v=Boolean(l.first),t=Math.max(0,Math.floor(t)),s=Math.max(0,Math.floor(s)),v){if(!f)throw new Error("First frame must include a { palette } option");var[l,b,w,x,k=8]=[r,t,s,f,y];k=128|k-1<<4|(x=I(x.length)-1),T(l,b),T(l,w),l.writeBytes([k,0,0]),S(r,f),0<=g&&(b=g,(x=r).writeByte(33),x.writeByte(255),x.writeByte(11),E(x,"NETSCAPE2.0"),x.writeByte(3),x.writeByte(1),T(x,b),x.writeByte(0))}var j,w,k=_,g=w=Math.round(m/10),b=d,x=h,m=((l=r).writeByte(33),l.writeByte(249),l.writeByte(4),x<0&&(x=0,b=!1),b=b?(j=1,2):j=0,0<=k&&(b=7&k),b<<=2,l.writeByte(b|j),T(l,g),l.writeByte(x||0),l.writeByte(0),Boolean(f)&&!v);d=t,h=s,j=m?f:null,(_=r).writeByte(44),T(_,0),T(_,0),T(_,d),T(_,h),j?(d=I(j.length)-1,_.writeByte(128|d)):_.writeByte(0),m&&S(r,f),[g,l,h,d,_=8,m,f,e]=[r,e,t,s,y,i,o,a],u(h,d,l,_,g,m,f,e)}};function p(){E(r,"GIF89a")}}function S(e,t){var n=1<<I(t.length);for(let r=0;r<n;r++){let n=[0,0,0];r<t.length&&(n=t[r]),e.writeByte(n[0]),e.writeByte(n[1]),e.writeByte(n[2])}}function T(e,t){e.writeByte(255&t),e.writeByte(t>>8&255)}function E(e,t){for(var n=0;n<t.length;n++)e.writeByte(t.charCodeAt(n))}function I(e){return Math.max(Math.ceil(Math.log2(e)),1)}var k=x},{}],254:[function(e,t,n){n.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,c=l>>1,u=-7,p=n?i-1:0,d=n?-1:1;for(i=e[t+p],p+=d,o=i&(1<<-u)-1,i>>=-u,u+=s;0<u;o=256*o+e[t+p],p+=d,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;0<u;a=256*a+e[t+p],p+=d,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(i?-1:1);a+=Math.pow(2,r),o-=c}return(i?-1:1)*a*Math.pow(2,o-r)},n.write=function(e,t,n,r,i,o){var a,s,l=8*o-i-1,c=(1<<l)-1,u=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,h=r?1:-1;for(o=t<0||0===t&&1/t<0?1:0,t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(r=Math.pow(2,-a))<1&&(a--,r*=2),2<=(t+=1<=a+u?p/r:p*Math.pow(2,1-u))*r&&(a++,r/=2),c<=a+u?(s=0,a=c):1<=a+u?(s=(t*r-1)*Math.pow(2,i),a+=u):(s=t*Math.pow(2,u-1)*Math.pow(2,i),a=0));8<=i;e[n+d]=255&s,d+=h,s/=256,i-=8);for(a=a<<i|s,l+=i;0<l;e[n+d]=255&a,d+=h,a/=256,l-=8);e[n+d-h]|=128*o}},{}],255:[function(e,t,n){"use strict";var r;function i(e,t){return e.b===t.b&&e.a===t.a}function o(e,t){return e.b<t.b||e.b===t.b&&e.a<=t.a}function a(e,t,n){var r=t.b-e.b,i=n.b-t.b;return 0<r+i?r<i?t.a-e.a+r/(r+i)*(e.a-n.a):t.a-n.a+i/(r+i)*(n.a-e.a):0}function s(e,t,n){var r=t.b-e.b,i=n.b-t.b;return 0<r+i?(t.a-n.a)*r+(t.a-e.a)*i:0}function l(e,t){return e.a<t.a||e.a===t.a&&e.b<=t.b}function c(e,t,n){var r=t.a-e.a,i=n.a-t.a;return 0<r+i?r<i?t.b-e.b+r/(r+i)*(e.b-n.b):t.b-n.b+i/(r+i)*(n.b-e.b):0}function u(e,t,n){var r=t.a-e.a,i=n.a-t.a;return 0<r+i?(t.b-n.b)*r+(t.b-e.b)*i:0}function p(e,t,n,r){return(e=e<0?0:e)<=(n=n<0?0:n)?0===n?(t+r)/2:t+e/(e+n)*(r-t):r+n/(e+n)*(t-r)}function d(e){var t=y(e.b);return v(t,e.c),v(t.b,e.c),b(t,e.a),t}function h(e,t){var n=!1,r=!1;e!==t&&(t.a!==e.a&&(r=!0,x(t.a,e.a)),t.d!==e.d&&(n=!0,S(t.d,e.d)),_(t,e),r||(v(t,e.a),e.a.c=e),n||(b(t,e.d),e.d.a=e))}function m(e){var t=e.b,n=!1;e.d!==e.b.d&&(n=!0,S(e.d,e.b.d)),e.c===e?x(e.a,null):(e.b.d.a=e.b.e,e.a.c=e.c,_(e,e.b.e),n||b(e,e.d)),t.c===t?(x(t.a,null),S(t.d,null)):(e.d.a=t.b.e,t.a.c=t.c,_(t,t.b.e)),w(e)}function f(e){var t=y(e),n=t.b;return _(t,e.e),t.a=e.b.a,v(n,t.a),t.d=n.d=e.d,t=t.b,_(e.b,e.b.b.e),_(e.b,t),e.b.a=t.a,t.b.a.c=t.b,t.b.d=e.b.d,t.f=e.f,t.b.f=e.b.f,t}function g(e,t){var n=!1,r=y(e),i=r.b;return t.d!==e.d&&(n=!0,S(t.d,e.d)),_(r,e.e),_(i,t),r.a=e.b.a,i.a=t.a,r.d=i.d=e.d,e.d.a=i,n||b(r,e.d),r}function y(e){var t=new X,n=new X,r=e.b.h;return(((n.h=r).b.h=t).h=e).b.h=n,t.b=n,((t.c=t).e=n).b=t,(n.c=n).e=t}function _(e,t){var n=e.c,r=t.c;n.b.e=t,(r.b.e=e).c=r,t.c=n}function v(e,t){var n=t.f,r=new J(t,n);for(n.e=r,n=(t.f=r).c=e;n.a=r,(n=n.c)!==e;);}function b(e,t){var n=t.d,r=new K(t,n);for(n.b=r,(t.d=r).a=e,r.c=t.c,n=e;n.d=r,(n=n.e)!==e;);}function w(e){var t=e.h;e=e.b.h,(t.b.h=e).b.h=t}function x(e,t){for(var n=e.c,r=n;r.a=t,(r=r.c)!==n;);n=e.f,((r=e.e).f=n).e=r}function S(e,t){for(var n=e.a,r=n;r.d=t,(r=r.e)!==n;);n=e.d,((r=e.b).d=n).b=r}function T(e){var t=0;return Math.abs(e[1])>Math.abs(e[0])&&(t=1),Math.abs(e[2])>Math.abs(e[t])?2:t}function E(e,t){e.f+=t.f,e.b.f+=t.b.f}function I(e,t,n){return e=e.a,t=t.a,n=n.a,t.b.a===e?n.b.a===e?o(t.a,n.a)?s(n.b.a,t.a,n.a)<=0:0<=s(t.b.a,n.a,t.a):s(n.b.a,e,n.a)<=0:n.b.a===e?0<=s(t.b.a,e,t.a):(t=a(t.b.a,e,t.a),(e=a(n.b.a,e,n.a))<=t)}function k(e){e.a.i=null;var t=e.e;t.a.c=t.c,t.c.a=t.a,e.e=null}function j(e,t){m(e.a),e.c=!1,(e.a=t).i=e}function A(e){for(var t=e.a.a;(e=ce(e)).a.a===t;);return e.c&&(j(e,t=g(le(e).a.b,e.a.e)),e=ce(e)),e}function C(e,t,n){var r=new se;return r.a=n,r.e=z(e.f,t.e,r),n.i=r}function O(e,t){switch(e.s){case 100130:return!!(1&t);case 100131:return 0!==t;case 100132:return 0<t;case 100133:return t<0;case 100134:return 2<=t||t<=-2}return!1}function M(e){var t=e.a,n=t.d;n.c=e.d,n.a=t,k(e)}function N(e,t,n){for(t=(e=t).a;e!==n;){e.c=!1;var r=le(e),i=r.a;if(i.a!==t.a){if(!r.c){M(e);break}j(r,i=g(t.c.b,i.b))}t.c!==i&&(h(i.b.e,i),h(t,i)),M(e),t=r.a,e=r}return t}function R(e,t,n,r,i,o){for(var a=!0;C(e,t,n.b),(n=n.c)!==r;);for(null===i&&(i=le(t).a.b.c);(n=(r=le(t)).a.b).a===i.a;)n.c!==i&&(h(n.b.e,n),h(i.b.e,n)),r.f=t.f-n.f,r.d=O(e,r.f),t.b=!0,!a&&F(e,t)&&(E(n,i),k(t),m(i)),a=!1,t=r,i=n;t.b=!0,o&&U(e,t)}function P(e,t,n,r,i){var o=[t.g[0],t.g[1],t.g[2]];t.d=null,t.d=e.o&&e.o(o,n,r,e.c)||null,null===t.d&&(i?e.n||(W(e,100156),e.n=!0):t.d=n[0])}function D(e,t,n){var r=[null,null,null,null];r[0]=t.a.d,r[1]=n.a.d,P(e,t.a,r,[.5,.5,0,0],!1),h(t,n)}function L(e,t,n,r,i){var o=Math.abs(t.b-e.b)+Math.abs(t.a-e.a),a=Math.abs(n.b-e.b)+Math.abs(n.a-e.a),s=i+1;r[i]=.5*a/(o+a),r[s]=.5*o/(o+a),e.g[0]+=r[i]*t.g[0]+r[s]*n.g[0],e.g[1]+=r[i]*t.g[1]+r[s]*n.g[1],e.g[2]+=r[i]*t.g[2]+r[s]*n.g[2]}function F(e,t){var n=le(t),r=t.a,a=n.a;if(o(r.a,a.a)){if(0<s(a.b.a,r.a,a.a))return;if(i(r.a,a.a)){if(r.a!==a.a){n=e.e;var l=r.a.h;if(0<=l){var c=(n=n.b).d,u=n.e,p=n.c,d=p[l];c[d]=c[n.a],(p[c[d]]=d)<=--n.a&&(d<=1||o(u[c[d>>1]],u[c[d]])?oe:ae)(n,d),u[l]=null,p[l]=n.b,n.b=l}else for(n.c[-(l+1)]=null;0<n.a&&null===n.c[n.d[n.a-1]];)--n.a;D(e,a.b.e,r)}}else f(a.b),h(r,a.b.e),t.b=n.b=!0}else{if(s(r.b.a,a.a,r.a)<0)return;ce(t).b=t.b=!0,f(r.b),h(a.b.e,r)}return 1}function B(e,t){var n=le(t),r=t.a,d=n.a,m=r.a,g=d.a,y=r.b.a,_=d.b.a,v=new J;if(s(y,e.a,m),s(_,e.a,g),!(m===g||Math.min(m.a,y.a)>Math.max(g.a,_.a))){if(o(m,g)){if(0<s(_,m,g))return}else if(s(y,g,m)<0)return;var b,w,x=y,S=m,T=_,E=g;if(o(x,S)||(b=x,x=S,S=b),o(T,E)||(b=T,T=E,E=b),o(x,T)||(b=x,x=T,T=b,b=S,S=E,E=b),o(T,S)?o(S,E)?((b=a(x,T,S))+(w=a(T,S,E))<0&&(b=-b,w=-w),v.b=p(b,T.b,w,S.b)):((b=s(x,T,S))+(w=-s(x,E,S))<0&&(b=-b,w=-w),v.b=p(b,T.b,w,E.b)):v.b=(T.b+S.b)/2,l(x,S)||(b=x,x=S,S=b),l(T,E)||(b=T,T=E,E=b),l(x,T)||(b=x,x=T,T=b,b=S,S=E,E=b),l(T,S)?l(S,E)?((b=c(x,T,S))+(w=c(T,S,E))<0&&(b=-b,w=-w),v.a=p(b,T.a,w,S.a)):((b=u(x,T,S))+(w=-u(x,E,S))<0&&(b=-b,w=-w),v.a=p(b,T.a,w,E.a)):v.a=(T.a+S.a)/2,o(v,e.a)&&(v.b=e.a.b,v.a=e.a.a),x=o(m,g)?m:g,o(x,v)&&(v.b=x.b,v.a=x.a),i(v,m)||i(v,g))return F(e,t),0;if(!i(y,e.a)&&0<=s(y,e.a,v)||!i(_,e.a)&&s(_,e.a,v)<=0){if(_===e.a)f(r.b),h(d.b,r),r=le(t=A(t)).a,N(e,le(t),n),R(e,t,r.b.e,r,r,!0);else{if(y!==e.a)return 0<=s(y,e.a,v)&&(ce(t).b=t.b=!0,f(r.b),r.a.b=e.a.b,r.a.a=e.a.a),void(s(_,e.a,v)<=0&&(t.b=n.b=!0,f(d.b),d.a.b=e.a.b,d.a.a=e.a.a));for(f(d.b),h(r.e,d.b.e),g=(m=n=t).a.b.a;(m=ce(m)).a.b.a===g;);m=le(t=m).a.b.c,n.a=d.b.e,R(e,t,(d=N(e,n,null)).c,r.b.c,m,!0)}return 1}f(r.b),f(d.b),h(d.b.e,r),r.a.b=v.b,r.a.a=v.a,r.a.h=Z(e.e,r.a),r=r.a,d=[0,0,0,0],v=[m.d,y.d,g.d,_.d],r.g[0]=r.g[1]=r.g[2]=0,L(r,m,y,d,0),L(r,g,_,d,2),P(e,r,v,d,!0),ce(t).b=t.b=n.b=!0}}function U(e,t){for(var n=le(t);;){for(;n.b;)n=le(t=n);if(!(t.b||null!==(t=ce(n=t))&&t.b))break;t.b=!1;var r=t.a,i=n.a;if(a=r.b.a!==i.b.a)e:{var a,l=le(a=t),c=a.a,u=l.a,p=void 0;if(o(c.b.a,u.b.a)){if(s(c.b.a,u.b.a,c.a)<0){a=!1;break e}ce(a).b=a.b=!0,p=f(c),h(u.b,p),p.d.c=a.d}else{if(0<s(u.b.a,c.b.a,u.a)){a=!1;break e}a.b=l.b=!0,p=f(u),h(c.e,u.b),p.b.d.c=a.d}a=!0}if(a&&(n.c?(k(n),m(i),i=(n=le(t)).a):t.c&&(k(t),m(r),r=(t=ce(n)).a)),r.a!==i.a)if(r.b.a===i.b.a||t.c||n.c||r.b.a!==e.a&&i.b.a!==e.a)F(e,t);else if(B(e,t))break;r.a===i.a&&r.b.a===i.b.a&&(E(i,r),k(t),m(r),t=ce(n))}}function V(e,t){var n=new se,r=d(e.b);r.a.b=4e150,r.a.a=t,r.b.a.b=-4e150,r.b.a.a=t,e.a=r.b.a,n.a=r,n.f=0,n.d=!1,n.c=!1,n.h=!0,n.b=!1,r=z(r=e.f,r.a,n),n.e=r}function G(e){this.a=new $,this.b=e,this.c=I}function z(e,t,n){for(;null!==(t=t.c).b&&!e.c(e.b,t.b,n););return e=new $(n,t.a,t),t.a.c=e,t.a=e}function $(e,t,n){this.b=e||null,this.a=t||this,this.c=n||this}function q(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function H(e,t){if(e.d!==t)for(;e.d!==t;)if(e.d<t)switch(e.d){case 0:W(e,100151),e.u(null);break;case 1:W(e,100152),e.t()}else switch(e.d){case 2:W(e,100154),e.v();break;case 1:W(e,100153),e.w()}}function W(e,t){e.p&&e.p(t,e.c)}function K(e,t){this.b=e||this,this.d=t||this,this.a=null,this.c=!1}function X(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function Y(){this.c=new J,this.a=new K,this.b=new X,this.d=new X,this.b.b=this.d,this.d.b=this.b}function J(e,t){this.e=e||this,this.f=t||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function Q(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new te}function Z(e,t){var n,r,i;return e.e?(2*(r=++(n=e.b).a)>n.f&&(n.f*=2,n.c=ne(n.c,n.f+1)),0===n.b?i=r:(i=n.b,n.b=n.c[n.b]),n.e[i]=t,n.c[i]=r,n.d[r]=i,n.h&&ae(n,r),i):(n=e.a++,e.c[n]=t,-(n+1))}function ee(e){if(0===e.a)return ie(e.b);var t=e.c[e.d[e.a-1]];if(0!==e.b.a&&o(re(e.b),t))return ie(e.b);for(;--e.a,0<e.a&&null===e.c[e.d[e.a-1]];);return t}function te(){this.d=ne([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function ne(e,t){for(var n=Array(t),r=0;r<e.length;r++)n[r]=e[r];for(;r<t;r++)n[r]=0;return n}function re(e){return e.e[e.d[1]]}function ie(e){var t=e.d,n=e.e,r=e.c,i=t[1],o=n[i];return 0<e.a&&(t[1]=t[e.a],r[t[1]]=1,n[i]=null,r[i]=e.b,e.b=i,0<--e.a&&oe(e,1)),o}function oe(e,t){for(var n=e.d,r=e.e,i=e.c,a=t,s=n[a];;){var l=a<<1,c=(l<e.a&&o(r[n[l+1]],r[n[l]])&&(l+=1),n[l]);if(l>e.a||o(r[s],r[c])){i[n[a]=s]=a;break}i[n[a]=c]=a,a=l}}function ae(e,t){for(var n=e.d,r=e.e,i=e.c,a=t,s=n[a];;){var l=a>>1,c=n[l];if(0==l||o(r[c],r[s])){i[n[a]=s]=a;break}i[n[a]=c]=a,a=l}}function se(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function le(e){return e.e.c.b}function ce(e){return e.e.a.b}(r=q.prototype).x=function(){H(this,0)},r.B=function(e,t){switch(e){case 100142:return;case 100140:switch(t){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=t)}break;case 100141:return void(this.m=!!t);default:return void W(this,100900)}W(this,100901)},r.y=function(e){switch(e){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:W(this,100900)}return!1},r.A=function(e,t,n){this.j[0]=e,this.j[1]=t,this.j[2]=n},r.z=function(e,t){var n=t||null;switch(e){case 100100:case 100106:this.h=n;break;case 100104:case 100110:this.l=n;break;case 100101:case 100107:this.k=n;break;case 100102:case 100108:this.i=n;break;case 100103:case 100109:this.p=n;break;case 100105:case 100111:this.o=n;break;case 100112:this.r=n;break;default:W(this,100900)}},r.C=function(e,t){var n=!1,r=[0,0,0];H(this,2);for(var i=0;i<3;++i){var o=e[i];o<-1e150&&(o=-1e150,n=!0),1e150<o&&(o=1e150,n=!0),r[i]=o}n&&W(this,100155),null===(n=this.q)?h(n=d(this.b),n.b):(f(n),n=n.e),n.a.d=t,n.a.g[0]=r[0],n.a.g[1]=r[1],n.a.g[2]=r[2],n.f=1,n.b.f=-1,this.q=n},r.u=function(e){H(this,0),this.d=1,this.b=new Y,this.c=e},r.t=function(){H(this,1),this.d=2,this.q=null},r.v=function(){H(this,2),this.d=1},r.w=function(){H(this,1),this.d=0;var e,t,n=!1,r=[p=this.j[0],a=this.j[1],c=this.j[2]];if(0===p&&0===a&&0===c){for(var a=[-2e150,-2e150,-2e150],l=[2e150,2e150,2e150],c=[],u=[],p=(n=this.b.c).e;p!==n;p=p.e)for(var d=0;d<3;++d){var y=p.g[d];y<l[d]&&(l[d]=y,u[d]=p),y>a[d]&&(a[d]=y,c[d]=p)}if(a[1]-l[1]>a[p=0]-l[0]&&(p=1),l[p=a[2]-l[2]>a[p]-l[p]?2:p]>=a[p])r[0]=0,r[1]=0,r[2]=1;else{for(l=u[p],c=c[p],u=[a=0,0,0],l=[l.g[0]-c.g[0],l.g[1]-c.g[1],l.g[2]-c.g[2]],d=[0,0,0],p=n.e;p!==n;p=p.e)d[0]=p.g[0]-c.g[0],d[1]=p.g[1]-c.g[1],d[2]=p.g[2]-c.g[2],u[0]=l[1]*d[2]-l[2]*d[1],u[1]=l[2]*d[0]-l[0]*d[2],u[2]=l[0]*d[1]-l[1]*d[0],a<(y=u[0]*u[0]+u[1]*u[1]+u[2]*u[2])&&(a=y,r[0]=u[0],r[1]=u[1],r[2]=u[2]);a<=0&&(r[0]=r[1]=r[2]=0,r[T(l)]=1)}n=!0}for(u=T(r),p=this.b.c,a=(u+1)%3,c=(u+2)%3,u=0<r[u]?1:-1,r=p.e;r!==p;r=r.e)r.b=r.g[a],r.a=u*r.g[c];if(n){for(r=0,p=(n=this.b.a).b;p!==n;p=p.b)if(!((a=p.a).f<=0))for(;r+=(a.a.b-a.b.a.b)*(a.a.a+a.b.a.a),(a=a.e)!==p.a;);if(r<0)for(n=(r=this.b.c).e;n!==r;n=n.e)n.a=-n.a}for(this.n=!1,p=(r=this.b.b).h;p!==r;p=n)n=p.h,a=p.e,i(p.a,p.b.a)&&p.e.e!==p&&(D(this,a,p),m(p),a=(p=a).e),a.e===p&&(a!==p&&(a!==n&&a!==n.b||(n=n.h),m(a)),p!==n&&p!==n.b||(n=n.h),m(p));for(this.e=r=new Q,p=(n=this.b.c).e;p!==n;p=p.e)p.h=Z(r,p);var v=r;v.d=[];for(var b=0;b<v.a;b++)v.d[b]=b;v.d.sort(function(e){return function(t,n){return o(e[t],e[n])?1:-1}}(v.c)),v.e=!0;for(var S=v.b,I=S.a;1<=I;--I)oe(S,I);for(S.h=!0,this.f=new G(this),V(this,-4e150),V(this,4e150);null!==(r=ee(this.e));){for(;;){e:if(0===(p=this.e).a)n=re(p.b);else if(n=p.c[p.d[p.a-1]],0!==p.b.a&&o(p=re(p.b),n)){n=p;break e}if(null===n||!i(n,r))break;n=ee(this.e),D(this,r.c,n.c)}!function e(t,n){for(var r,a=(t.a=n).c;null===a.i;)if((a=a.c)===n.c){a=t;var l=n;(y=new se).a=l.c.b;for(var c=(u=a.f).a;null!==(c=c.a).b&&!u.c(u.b,y,c.b););var u,p,d=le(u=c.b),y=u.a;return c=d.a,void(0===s(y.b.a,l,y.a)?i((y=u.a).a,l)||i(y.b.a,l)||(f(y.b),u.c&&(m(y.c),u.c=!1),h(l.c,y),e(a,l)):(p=o(c.b.a,y.b.a)?u:d,d=void 0,u.d||p.c?(d=p===u?g(l.c.b,y.e):g(c.b.c.b,l.c).b,p.c?j(p,d):((u=C(y=a,u,d)).f=ce(u).f+u.a.f,u.d=O(y,u.f)),e(a,l)):R(a,u,l.c,l.c,null,!0)))}u=(y=le(a=A(a.i))).a,(y=N(t,y,null)).c===u?(y=(u=y).c,c=le(a),d=a.a,p=c.a,r=!1,d.b.a!==p.b.a&&B(t,a),i(d.a,t.a)&&(h(y.b.e,d),y=le(a=A(a)).a,N(t,le(a),c),r=!0),i(p.a,t.a)&&(h(u,p.b.e),u=N(t,c,null),r=!0),r?R(t,a,u.c,y,y,!0):(l=o(p.a,d.a)?p.b.e:d,R(t,a,l=g(u.c.b,l),l.c,l.c,!1),l.b.i.c=!0,U(t,a))):R(t,a,y.c,u,u,!0)}(this,r)}for(this.a=this.f.a.a.b.a.a,r=0;null!==(n=this.f.a.a.b);)n.h||++r,k(n);for(this.f=null,(r=this.e).b=null,r.d=null,this.e=r.c=null,p=(r=this.b).a.b;p!==r.a;p=n)n=p.b,(p=p.a).e.e===p&&(E(p.c,p),m(p));if(!this.n){if(r=this.b,this.m)for(p=r.b.h;p!==r.b;p=n)n=p.h,p.b.d.c!==p.d.c?p.f=p.d.c?1:-1:m(p);else for(p=r.a.b;p!==r.a;p=n)if(n=p.b,p.c){for(p=p.a;o(p.b.a,p.a);p=p.c.b);for(;o(p.a,p.b.a);p=p.e);for(a=p.c.b,c=void 0;p.e!==a;)if(o(p.b.a,a.a)){for(;a.e!==p&&(o((t=a.e).b.a,t.a)||s(a.a,a.b.a,a.e.b.a)<=0);)a=(c=g(a.e,a)).b;a=a.c.b}else{for(;a.e!==p&&(o((e=p.c.b).a,e.b.a)||0<=s(p.b.a,p.a,p.c.b.a));)p=(c=g(p,p.c.b)).b;p=p.e}for(;a.e.e!==p;)a=(c=g(a.e,a)).b}if(this.h||this.i||this.k||this.l)if(this.m){for(n=(r=this.b).a.b;n!==r.a;n=n.b)if(n.c){for(this.h&&this.h(2,this.c),p=n.a;this.k&&this.k(p.a.d,this.c),(p=p.e)!==n.a;);this.i&&this.i(this.c)}}else{for(r=this.b,n=!!this.l,p=!1,a=-1,c=r.a.d;c!==r.a;c=c.d)if(c.c)for(p||(this.h&&this.h(4,this.c),p=!0),u=c.a;n&&a!==(l=u.b.d.c?0:1)&&(a=l,this.l&&this.l(!!a,this.c)),this.k&&this.k(u.a.d,this.c),(u=u.e)!==c.a;);p&&this.i&&this.i(this.c)}if(this.r){for(p=(r=this.b).a.b;p!==r.a;p=n)if(n=p.b,!p.c){for(c=(a=p.a).e,u=void 0;c=(u=c).e,(u.d=null)===u.b.d&&(u.c===u?x(u.a,null):(u.a.c=u.c,_(u,u.b.e)),(l=u.b).c===l?x(l.a,null):(l.a.c=l.c,_(l,l.b.e)),w(u)),u!==a;);a=p.d,((p=p.b).d=a).b=p}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:q,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},q.prototype.gluDeleteTess=q.prototype.x,q.prototype.gluTessProperty=q.prototype.B,q.prototype.gluGetTessProperty=q.prototype.y,q.prototype.gluTessNormal=q.prototype.A,q.prototype.gluTessCallback=q.prototype.z,q.prototype.gluTessVertex=q.prototype.C,q.prototype.gluTessBeginPolygon=q.prototype.u,q.prototype.gluTessBeginContour=q.prototype.t,q.prototype.gluTessEndContour=q.prototype.v,q.prototype.gluTessEndPolygon=q.prototype.w,void 0!==t&&(t.exports=this.libtess)},{}],256:[function(e,t,n){"use strict";function r(e,t,n,r){for(var i=e[t++],o=1<<i,a=1+o,s=1+a,l=i+1,c=(1<<l)-1,u=0,p=0,d=0,h=e[t++],m=new Int32Array(4096),f=null;;){for(;u<16&&0!==h;)p|=e[t++]<<u,u+=8,1===h?h=e[t++]:--h;if(u<l)break;var g=p&c;if(p>>=l,u-=l,g==o)s=1+a,c=(1<<(l=i+1))-1,f=null;else{if(g==a)break;for(var y=g<s?g:f,_=0,v=y;o<v;)v=m[v]>>8,++_;var b=v;if(r<d+_+(y!==g?1:0))return void console.log("Warning, gif stream longer than expected.");n[d++]=b;var w=d+=_;for(y!==g&&(n[d++]=b),v=y;_--;)v=m[v],n[--w]=255&v,v>>=8;null!==f&&s<4096&&(m[s++]=f<<8|b,c+1<=s&&l<12&&(++l,c=c<<1|1)),f=g}}d!==r&&console.log("Warning, gif stream shorter than expected.")}try{n.GifWriter=function(e,t,n,r){var i=0,o=void 0===(r=void 0===r?{}:r).loop?null:r.loop,a=void 0===r.palette?null:r.palette;if(t<=0||n<=0||65535<t||65535<n)throw new Error("Width/Height invalid.");function s(e){if((e=e.length)<2||256<e||e&e-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return e}e[i++]=71,e[i++]=73,e[i++]=70,e[i++]=56,e[i++]=57,e[i++]=97;var l=0,c=0;if(null!==a){for(var u=s(a);u>>=1;)++l;if(u=1<<l,--l,void 0!==r.background){if(u<=(c=r.background))throw new Error("Background index out of range.");if(0===c)throw new Error("Background index explicitly passed as 0.")}}if(e[i++]=255&t,e[i++]=t>>8&255,e[i++]=255&n,e[i++]=n>>8&255,e[i++]=(null!==a?128:0)|l,e[i++]=c,e[i++]=0,null!==a)for(var p=0,d=a.length;p<d;++p){var h=a[p];e[i++]=h>>16&255,e[i++]=h>>8&255,e[i++]=255&h}if(null!==o){if(o<0||65535<o)throw new Error("Loop count invalid.");e[i++]=33,e[i++]=255,e[i++]=11,e[i++]=78,e[i++]=69,e[i++]=84,e[i++]=83,e[i++]=67,e[i++]=65,e[i++]=80,e[i++]=69,e[i++]=50,e[i++]=46,e[i++]=48,e[i++]=3,e[i++]=1,e[i++]=255&o,e[i++]=o>>8&255,e[i++]=0}var m=!1;this.addFrame=function(t,n,r,o,l,c){if(!0===m&&(--i,m=!1),c=void 0===c?{}:c,t<0||n<0||65535<t||65535<n)throw new Error("x/y invalid.");if(r<=0||o<=0||65535<r||65535<o)throw new Error("Width/Height invalid.");if(l.length<r*o)throw new Error("Not enough pixels for the frame size.");var u=!0,p=c.palette;if(null==p&&(u=!1,p=a),null==p)throw new Error("Must supply either a local or global palette.");for(var d=s(p),h=0;d>>=1;)++h;d=1<<h;var f=void 0===c.delay?0:c.delay,g=void 0===c.disposal?0:c.disposal;if(g<0||3<g)throw new Error("Disposal out of range.");var y=!1,_=0;if(void 0!==c.transparent&&null!==c.transparent&&(y=!0,(_=c.transparent)<0||d<=_))throw new Error("Transparent color index.");if(0===g&&!y&&0===f||(e[i++]=33,e[i++]=249,e[i++]=4,e[i++]=g<<2|(!0===y?1:0),e[i++]=255&f,e[i++]=f>>8&255,e[i++]=_,e[i++]=0),e[i++]=44,e[i++]=255&t,e[i++]=t>>8&255,e[i++]=255&n,e[i++]=n>>8&255,e[i++]=255&r,e[i++]=r>>8&255,e[i++]=255&o,e[i++]=o>>8&255,e[i++]=!0===u?128|h-1:0,!0===u)for(var v=0,b=p.length;v<b;++v){var w=p[v];e[i++]=w>>16&255,e[i++]=w>>8&255,e[i++]=255&w}return i=function(e,t,n,r){e[t++]=n;var i=t++,o=1<<n,a=o-1,s=1+o,l=1+s,c=n+1,u=0,p=0;function d(n){for(;n<=u;)e[t++]=255&p,p>>=8,u-=8,t===i+256&&(e[i]=255,i=t++)}function h(e){p|=e<<u,u+=c,d(8)}var m=r[0]&a,f={};h(o);for(var g=1,y=r.length;g<y;++g){var _=r[g]&a,v=m<<8|_,b=f[v];if(void 0===b){for(p|=m<<u,u+=c;8<=u;)e[t++]=255&p,p>>=8,u-=8,t===i+256&&(e[i]=255,i=t++);4096===l?(h(o),l=1+s,c=n+1,f={}):(1<<c<=l&&++c,f[v]=l++),m=_}else m=b}return h(m),h(s),d(1),i+1===t?e[i]=0:(e[i]=t-i-1,e[t++]=0),t}(e,i,h<2?2:h,l)},this.end=function(){return!1===m&&(e[i++]=59,m=!0),i},this.getOutputBuffer=function(){return e},this.setOutputBuffer=function(t){e=t},this.getOutputBufferPosition=function(){return i},this.setOutputBufferPosition=function(e){i=e}},n.GifReader=function(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,i=e[t++]|e[t++]<<8,o=e[t++],a=1<<1+(7&o),s=(e[t++],e[t++],null),l=null,c=(o>>7&&(s=t,t+=3*(l=a)),!0),u=[],p=0,d=null,h=0,m=null;for(this.width=n,this.height=i;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,m=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!(0<=(g=e[t++])))throw Error("Invalid block size");if(0===g)break;t+=g}break;case 249:if(4!==e[t++]||0!==e[t+4])throw new Error("Invalid graphics extension block.");var f=e[t++];p=e[t++]|e[t++]<<8,d=e[t++],!(1&f)&&(d=null),h=f>>2&7,t++;break;case 254:for(;;){if(!(0<=(g=e[t++])))throw Error("Invalid block size");if(0===g)break;t+=g}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var g,y=e[t++]|e[t++]<<8,_=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,w=(E=e[t++])>>6&1,x=s,S=l,T=!1,E=(E>>7&&(T=!0,x=t,t+=3*(S=1<<1+(7&E))),t);for(t++;;){if(!(0<=(g=e[t++])))throw Error("Invalid block size");if(0===g)break;t+=g}u.push({x:y,y:_,width:v,height:b,has_local_palette:T,palette_offset:x,palette_size:S,data_offset:E,data_length:t-E,transparent_index:d,interlaced:!!w,delay:p,disposal:h});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return m},this.frameInfo=function(e){if(e<0||e>=u.length)throw new Error("Frame index out of range.");return u[e]},this.decodeAndBlitFrameBGRA=function(t,i){for(var o=(t=this.frameInfo(t)).width*t.height,a=new Uint8Array(o),s=(r(e,t.data_offset,a,o),t.palette_offset),l=t.transparent_index,c=(null===l&&(l=256),t.width),u=n-c,p=c,d=4*(t.y*n+t.x),h=4*((t.y+t.height)*n+t.x),m=d,f=4*u,g=(!0===t.interlaced&&(f+=4*n*7),8),y=0,_=a.length;y<_;++y){var v,b,w=a[y];0===p&&(p=c,h<=(m+=f)&&(f=4*u+4*n*(g-1),m=d+(c+u)*(g<<1),g>>=1)),w===l?m+=4:(v=e[s+3*w],b=e[s+3*w+1],w=e[s+3*w+2],i[m++]=w,i[m++]=b,i[m++]=v,i[m++]=255),--p}},this.decodeAndBlitFrameRGBA=function(t,i){for(var o=(t=this.frameInfo(t)).width*t.height,a=new Uint8Array(o),s=(r(e,t.data_offset,a,o),t.palette_offset),l=t.transparent_index,c=(null===l&&(l=256),t.width),u=n-c,p=c,d=4*(t.y*n+t.x),h=4*((t.y+t.height)*n+t.x),m=d,f=4*u,g=(!0===t.interlaced&&(f+=4*n*7),8),y=0,_=a.length;y<_;++y){var v,b,w=a[y];0===p&&(p=c,h<=(m+=f)&&(f=4*u+4*n*(g-1),m=d+(c+u)*(g<<1),g>>=1)),w===l?m+=4:(v=e[s+3*w],b=e[s+3*w+1],w=e[s+3*w+2],i[m++]=v,i[m++]=b,i[m++]=w,i[m++]=255),--p}}}}catch(e){}},{}],257:[function(e,t,n){(function(r){var i;i=function(t){"use strict";function n(e){if(null==this)throw TypeError();var t,n=String(this),r=n.length;if(!((e=(e=e?Number(e):0)!=e?0:e)<0||r<=e))return 55296<=(t=n.charCodeAt(e))&&t<=56319&&e+1<r&&56320<=(r=n.charCodeAt(e+1))&&r<=57343?1024*(t-55296)+r-56320+65536:t}var i;function o(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function a(e,t){this.source=e,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=t,this.destLen=0,this.ltree=new o,this.dtree=new o}String.prototype.codePointAt||((i=function(){try{var e={},t=Object.defineProperty,n=t(e,e,e)&&t}catch(e){}return n}())?i(String.prototype,"codePointAt",{value:n,configurable:!0,writable:!0}):String.prototype.codePointAt=n);var s=new o,l=new o,c=new Uint8Array(30),u=new Uint16Array(30),p=new Uint8Array(30),d=new Uint16Array(30),h=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),m=new o,f=new Uint8Array(320);function g(e,t,n,r){for(var i,o=0;o<n;++o)e[o]=0;for(o=0;o<30-n;++o)e[o+n]=o/n|0;for(i=r,o=0;o<30;++o)t[o]=i,i+=1<<e[o]}var y=new Uint16Array(16);function _(e,t,n,r){for(var i,o=0;o<16;++o)e.table[o]=0;for(o=0;o<r;++o)e.table[t[n+o]]++;for(o=i=e.table[0]=0;o<16;++o)y[o]=i,i+=e.table[o];for(o=0;o<r;++o)t[n+o]&&(e.trans[y[t[n+o]]++]=o)}function v(e,t,n){if(!t)return n;for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var r=e.tag&65535>>>16-t;return e.tag>>>=t,e.bitcount-=t,r+n}function b(e,t){for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;for(var n=0,r=0,i=0,o=e.tag;r=2*r+(1&o),o>>>=1,n+=t.table[++i],0<=(r-=t.table[i]););return e.tag=o,e.bitcount-=i,t.trans[n+r]}function w(e,t,n){for(;;){if(256===(o=b(e,t)))return 0;if(o<256)e.dest[e.destLen++]=o;else for(var r,i=v(e,c[o-=257],u[o]),o=b(e,n),a=r=e.destLen-v(e,p[o],d[o]);a<r+i;++a)e.dest[e.destLen++]=e.dest[a]}}for(var x=s,S=l,T=0;T<7;++T)x.table[T]=0;for(x.table[7]=24,x.table[8]=152,x.table[9]=112,T=0;T<24;++T)x.trans[T]=256+T;for(T=0;T<144;++T)x.trans[24+T]=T;for(T=0;T<8;++T)x.trans[168+T]=280+T;for(T=0;T<112;++T)x.trans[176+T]=144+T;for(T=0;T<5;++T)S.table[T]=0;for(S.table[5]=32,T=0;T<32;++T)S.trans[T]=T;function E(e,t,n,r,i){return Math.pow(1-i,3)*e+3*Math.pow(1-i,2)*i*t+3*(1-i)*Math.pow(i,2)*n+Math.pow(i,3)*r}function I(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function k(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function j(e){throw new Error(e)}function A(e,t){e||j(t)}g(c,u,4,3),g(p,d,2,1),c[28]=0,u[28]=258,I.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},I.prototype.addPoint=function(e,t){"number"==typeof e&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),"number"==typeof t&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))},I.prototype.addX=function(e){this.addPoint(e,null)},I.prototype.addY=function(e){this.addPoint(null,e)},I.prototype.addBezier=function(e,t,n,r,i,o,a,s){var l=[e,t],c=[n,r],u=[i,o],p=[a,s];this.addPoint(e,t),this.addPoint(a,s);for(var d=0;d<=1;d++){var h,m=6*l[d]-12*c[d]+6*u[d],f=-3*l[d]+9*c[d]-9*u[d]+3*p[d],g=3*c[d]-3*l[d];0==f?0==m||0<(h=-g/m)&&h<1&&(0===d&&this.addX(E(l[d],c[d],u[d],p[d],h)),1===d&&this.addY(E(l[d],c[d],u[d],p[d],h))):(h=Math.pow(m,2)-4*g*f)<0||(0<(g=(-m+Math.sqrt(h))/(2*f))&&g<1&&(0===d&&this.addX(E(l[d],c[d],u[d],p[d],g)),1===d&&this.addY(E(l[d],c[d],u[d],p[d],g))),0<(g=(-m-Math.sqrt(h))/(2*f))&&g<1&&(0===d&&this.addX(E(l[d],c[d],u[d],p[d],g)),1===d&&this.addY(E(l[d],c[d],u[d],p[d],g))))}},I.prototype.addQuad=function(e,t,n,r,i,o){n=e+2/3*(n-e),r=t+2/3*(r-t),this.addBezier(e,t,n,r,n+1/3*(i-e),r+1/3*(o-t),i,o)},k.prototype.moveTo=function(e,t){this.commands.push({type:"M",x:e,y:t})},k.prototype.lineTo=function(e,t){this.commands.push({type:"L",x:e,y:t})},k.prototype.curveTo=k.prototype.bezierCurveTo=function(e,t,n,r,i,o){this.commands.push({type:"C",x1:e,y1:t,x2:n,y2:r,x:i,y:o})},k.prototype.quadTo=k.prototype.quadraticCurveTo=function(e,t,n,r){this.commands.push({type:"Q",x1:e,y1:t,x:n,y:r})},k.prototype.close=k.prototype.closePath=function(){this.commands.push({type:"Z"})},k.prototype.extend=function(e){var t;if(e.commands)e=e.commands;else if(e instanceof I)return t=e,this.moveTo(t.x1,t.y1),this.lineTo(t.x2,t.y1),this.lineTo(t.x2,t.y2),this.lineTo(t.x1,t.y2),void this.close();Array.prototype.push.apply(this.commands,e)},k.prototype.getBoundingBox=function(){for(var e=new I,t=0,n=0,r=0,i=0,o=0;o<this.commands.length;o++){var a=this.commands[o];switch(a.type){case"M":e.addPoint(a.x,a.y),t=r=a.x,n=i=a.y;break;case"L":e.addPoint(a.x,a.y),r=a.x,i=a.y;break;case"Q":e.addQuad(r,i,a.x1,a.y1,a.x,a.y),r=a.x,i=a.y;break;case"C":e.addBezier(r,i,a.x1,a.y1,a.x2,a.y2,a.x,a.y),r=a.x,i=a.y;break;case"Z":r=t,i=n;break;default:throw new Error("Unexpected path command "+a.type)}}return e.isEmpty()&&e.addPoint(0,0),e},k.prototype.draw=function(e){e.beginPath();for(var t=0;t<this.commands.length;t+=1){var n=this.commands[t];"M"===n.type?e.moveTo(n.x,n.y):"L"===n.type?e.lineTo(n.x,n.y):"C"===n.type?e.bezierCurveTo(n.x1,n.y1,n.x2,n.y2,n.x,n.y):"Q"===n.type?e.quadraticCurveTo(n.x1,n.y1,n.x,n.y):"Z"===n.type&&e.closePath()}this.fill&&(e.fillStyle=this.fill,e.fill()),this.stroke&&(e.strokeStyle=this.stroke,e.lineWidth=this.strokeWidth,e.stroke())},k.prototype.toPathData=function(e){function t(){for(var t=arguments,n="",r=0;r<arguments.length;r+=1){var i=t[r];0<=i&&0<r&&(n+=" "),n+=Math.round(i)===i?""+Math.round(i):i.toFixed(e)}return n}e=void 0!==e?e:2;for(var n="",r=0;r<this.commands.length;r+=1){var i=this.commands[r];"M"===i.type?n+="M"+t(i.x,i.y):"L"===i.type?n+="L"+t(i.x,i.y):"C"===i.type?n+="C"+t(i.x1,i.y1,i.x2,i.y2,i.x,i.y):"Q"===i.type?n+="Q"+t(i.x1,i.y1,i.x,i.y):"Z"===i.type&&(n+="Z")}return n},k.prototype.toSVG=function(e){var t=(t='<path d="')+this.toPathData(e)+'"';return this.fill&&"black"!==this.fill&&(null===this.fill?t+=' fill="none"':t+=' fill="'+this.fill+'"'),this.stroke&&(t+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),t+"/>"},k.prototype.toDOMElement=function(e){e=this.toPathData(e);var t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d",e),t};var C={fail:j,argument:A,assert:A},O={},M={},N={};function R(e){return function(){return e}}M.BYTE=function(e){return C.argument(0<=e&&e<=255,"Byte value should be between 0 and 255."),[e]},N.BYTE=R(1),M.CHAR=function(e){return[e.charCodeAt(0)]},N.CHAR=R(1),M.CHARARRAY=function(e){for(var t=[],n=0;n<e.length;n+=1)t[n]=e.charCodeAt(n);return t},N.CHARARRAY=function(e){return e.length},M.USHORT=function(e){return[e>>8&255,255&e]},N.USHORT=R(2),M.SHORT=function(e){return[(e=32768<=e?-(65536-e):e)>>8&255,255&e]},N.SHORT=R(2),M.UINT24=function(e){return[e>>16&255,e>>8&255,255&e]},N.UINT24=R(3),M.ULONG=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]},N.ULONG=R(4),M.LONG=function(e){return[(e=2147483648<=e?-(4294967296-e):e)>>24&255,e>>16&255,e>>8&255,255&e]},N.LONG=R(4),M.FIXED=M.ULONG,N.FIXED=N.ULONG,M.FWORD=M.SHORT,N.FWORD=N.SHORT,M.UFWORD=M.USHORT,N.UFWORD=N.USHORT,M.LONGDATETIME=function(e){return[0,0,0,0,e>>24&255,e>>16&255,e>>8&255,255&e]},N.LONGDATETIME=R(8),M.TAG=function(e){return C.argument(4===e.length,"Tag should be exactly 4 ASCII characters."),[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]},N.TAG=R(4),M.Card8=M.BYTE,N.Card8=N.BYTE,M.Card16=M.USHORT,N.Card16=N.USHORT,M.OffSize=M.BYTE,N.OffSize=N.BYTE,M.SID=M.USHORT,N.SID=N.USHORT,M.NUMBER=function(e){return-107<=e&&e<=107?[e+139]:108<=e&&e<=1131?[247+((e-=108)>>8),255&e]:-1131<=e&&e<=-108?[251+((e=-e-108)>>8),255&e]:-32768<=e&&e<=32767?M.NUMBER16(e):M.NUMBER32(e)},N.NUMBER=function(e){return M.NUMBER(e).length},M.NUMBER16=function(e){return[28,e>>8&255,255&e]},N.NUMBER16=R(3),M.NUMBER32=function(e){return[29,e>>24&255,e>>16&255,e>>8&255,255&e]},N.NUMBER32=R(5),M.REAL=function(e){for(var t=e.toString(),n=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(t),r=(n&&(n=parseFloat("1e"+((n[2]?+n[2]:0)+n[1].length)),t=(Math.round(e*n)/n).toString()),""),i=0,o=t.length;i<o;i+=1){var a=t[i];r+="e"===a?"-"===t[++i]?"c":"b":"."===a?"a":"-"===a?"e":a}for(var s=[30],l=0,c=(r+=1&r.length?"f":"ff").length;l<c;l+=2)s.push(parseInt(r.substr(l,2),16));return s},N.REAL=function(e){return M.REAL(e).length},M.NAME=M.CHARARRAY,N.NAME=N.CHARARRAY,M.STRING=M.CHARARRAY,N.STRING=N.CHARARRAY,O.UTF8=function(e,t,n){for(var r=[],i=n,o=0;o<i;o++,t+=1)r[o]=e.getUint8(t);return String.fromCharCode.apply(null,r)},O.UTF16=function(e,t,n){for(var r=[],i=n/2,o=0;o<i;o++,t+=2)r[o]=e.getUint16(t);return String.fromCharCode.apply(null,r)},M.UTF16=function(e){for(var t=[],n=0;n<e.length;n+=1){var r=e.charCodeAt(n);t[t.length]=r>>8&255,t[t.length]=255&r}return t},N.UTF16=function(e){return 2*e.length};var P,D={"x-mac-croatian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®Š™´¨≠ŽØ∞±≤≥∆µ∂∑∏š∫ªºΩžø¿¡¬√ƒ≈Ć«Č… ÀÃÕŒœĐ—“”‘’÷◊©⁄€‹›Æ»–·‚„‰ÂćÁčÈÍÎÏÌÓÔđÒÚÛÙıˆ˜¯πË˚¸Êæˇ","x-mac-cyrillic":"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ†°Ґ£§•¶І®©™Ђђ≠Ѓѓ∞±≤≥іµґЈЄєЇїЉљЊњјЅ¬√ƒ≈∆«»… ЋћЌќѕ–—“”‘’÷„ЎўЏџ№Ёёяабвгдежзийклмнопрстуфхцчшщъыьэю","x-mac-gaelic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØḂ±≤≥ḃĊċḊḋḞḟĠġṀæøṁṖṗɼƒſṠ«»… ÀÃÕŒœ–—“”‘’ṡẛÿŸṪ€‹›Ŷŷṫ·Ỳỳ⁊ÂÊÁËÈÍÎÏÌÓÔ♣ÒÚÛÙıÝýŴŵẄẅẀẁẂẃ","x-mac-greek":"Ä¹²É³ÖÜ΅àâä΄¨çéèêë£™îï•½‰ôö¦€ùûü†ΓΔΘΛΞΠß®©ΣΪ§≠°·Α±≤≥¥ΒΕΖΗΙΚΜΦΫΨΩάΝ¬ΟΡ≈Τ«»… ΥΧΆΈœ–―“”‘’÷ΉΊΌΎέήίόΏύαβψδεφγηιξκλμνοπώρστθωςχυζϊϋΐΰ­","x-mac-icelandic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûüÝ°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€ÐðÞþý·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-inuit":"ᐃᐄᐅᐆᐊᐋᐱᐲᐳᐴᐸᐹᑉᑎᑏᑐᑑᑕᑖᑦᑭᑮᑯᑰᑲᑳᒃᒋᒌᒍᒎᒐᒑ°ᒡᒥᒦ•¶ᒧ®©™ᒨᒪᒫᒻᓂᓃᓄᓅᓇᓈᓐᓯᓰᓱᓲᓴᓵᔅᓕᓖᓗᓘᓚᓛᓪᔨᔩᔪᔫᔭ… ᔮᔾᕕᕖᕗ–—“”‘’ᕘᕙᕚᕝᕆᕇᕈᕉᕋᕌᕐᕿᖀᖁᖂᖃᖄᖅᖏᖐᖑᖒᖓᖔᖕᙱᙲᙳᙴᙵᙶᖖᖠᖡᖢᖣᖤᖥᖦᕼŁł","x-mac-ce":"ÄĀāÉĄÖÜáąČäčĆćéŹźĎíďĒēĖóėôöõúĚěü†°Ę£§•¶ß®©™ę¨≠ģĮįĪ≤≥īĶ∂∑łĻļĽľĹĺŅņŃ¬√ńŇ∆«»… ňŐÕőŌ–—“”‘’÷◊ōŔŕŘ‹›řŖŗŠ‚„šŚśÁŤťÍŽžŪÓÔūŮÚůŰűŲųÝýķŻŁżĢˇ",macintosh:"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›ﬁﬂ‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-romanian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ĂȘ∞±≤≥¥µ∂∑∏π∫ªºΩăș¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›Țț‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-turkish":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸĞğİıŞş‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙˆ˜¯˘˙˚¸˝˛ˇ"},L=(O.MACSTRING=function(e,t,n,r){var i=D[r];if(void 0!==i){for(var o="",a=0;a<n;a++){var s=e.getUint8(t+a);o+=s<=127?String.fromCharCode(s):i[127&s]}return o}},"function"==typeof WeakMap&&new WeakMap);function F(e){return-128<=e&&e<=127}M.MACSTRING=function(e,t){var n=function(e){if(!P)for(var t in P={},D)P[t]=new String(t);var n=P[e];if(void 0!==n){if(L){var r=L.get(n);if(void 0!==r)return r}var i=D[e];if(void 0!==i){for(var o={},a=0;a<i.length;a++)o[i.charCodeAt(a)]=a+128;return L&&L.set(n,o),o}}}(t);if(void 0!==n){for(var r=[],i=0;i<e.length;i++){var o=e.charCodeAt(i);if(128<=o&&void 0===(o=n[o]))return;r[i]=o}return r}},N.MACSTRING=function(e,t){return void 0!==(e=M.MACSTRING(e,t))?e.length:0},M.VARDELTAS=function(e){for(var t=0,n=[];t<e.length;){var r=e[t];t=(0===r?function(e,t,n){for(var r=0,i=e.length;t<i&&r<64&&0===e[t];)++t,++r;return n.push(128|r-1),t}:-128<=r&&r<=127?function(e,t,n){for(var r=0,i=e.length,o=t;o<i&&r<64;){var a=e[o];if(!F(a))break;if(0===a&&o+1<i&&0===e[o+1])break;++o,++r}n.push(r-1);for(var s=t;s<o;++s)n.push(e[s]+256&255);return o}:function(e,t,n){for(var r=0,i=e.length,o=t;o<i&&r<64;){var a=e[o];if(0===a)break;if(F(a)&&o+1<i&&F(e[o+1]))break;++o,++r}n.push(64|r-1);for(var s=t;s<o;++s){var l=e[s];n.push(l+65536>>8&255,l+256&255)}return o})(e,t,n)}return n},M.INDEX=function(e){for(var t=1,n=[t],r=[],i=0;i<e.length;i+=1){var o=M.OBJECT(e[i]);Array.prototype.push.apply(r,o),t+=o.length,n.push(t)}if(0===r.length)return[0,0];for(var a=[],s=1+Math.floor(Math.log(t)/Math.log(2))/8|0,l=[void 0,M.BYTE,M.USHORT,M.UINT24,M.ULONG][s],c=0;c<n.length;c+=1){var u=l(n[c]);Array.prototype.push.apply(a,u)}return Array.prototype.concat(M.Card16(e.length),M.OffSize(s),a,r)},N.INDEX=function(e){return M.INDEX(e).length},M.DICT=function(e){for(var t=[],n=Object.keys(e),r=n.length,i=0;i<r;i+=1){var o=parseInt(n[i],0),a=e[o];t=(t=t.concat(M.OPERAND(a.value,a.type))).concat(M.OPERATOR(o))}return t},N.DICT=function(e){return M.DICT(e).length},M.OPERATOR=function(e){return e<1200?[e]:[12,e-1200]},M.OPERAND=function(e,t){var n=[];if(Array.isArray(t))for(var r=0;r<t.length;r+=1)C.argument(e.length===t.length,"Not enough arguments given for type"+t),n=n.concat(M.OPERAND(e[r],t[r]));else if("SID"===t)n=n.concat(M.NUMBER(e));else if("offset"===t)n=n.concat(M.NUMBER32(e));else if("number"===t)n=n.concat(M.NUMBER(e));else{if("real"!==t)throw new Error("Unknown operand type "+t);n=n.concat(M.REAL(e))}return n},M.OP=M.BYTE,N.OP=N.BYTE;var B="function"==typeof WeakMap&&new WeakMap;function U(e,t,n){for(var r=0;r<t.length;r+=1){var i=t[r];this[i.name]=i.value}if(this.tableName=e,this.fields=t,n)for(var o=Object.keys(n),a=0;a<o.length;a+=1){var s=o[a],l=n[s];void 0!==this[s]&&(this[s]=l)}}function V(e,t,n){void 0===n&&(n=t.length);var r=new Array(t.length+1);r[0]={name:e+"Count",type:"USHORT",value:n};for(var i=0;i<t.length;i++)r[i+1]={name:e+i,type:"USHORT",value:t[i]};return r}function G(e,t,n){var r=t.length,i=new Array(r+1);i[0]={name:e+"Count",type:"USHORT",value:r};for(var o=0;o<r;o++)i[o+1]={name:e+o,type:"TABLE",value:n(t[o],o)};return i}function z(e,t,n){var r=t.length,i=[];i[0]={name:e+"Count",type:"USHORT",value:r};for(var o=0;o<r;o++)i=i.concat(n(t[o],o));return i}function $(e){1===e.format?U.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(V("glyph",e.glyphs))):C.assert(!1,"Can't create coverage table format 2 yet.")}function q(e){U.call(this,"scriptListTable",z("scriptRecord",e,(function(e,t){var n=e.script,r=n.defaultLangSys;return C.assert(!!r,"Unable to write GSUB: script "+e.tag+" has no default language system."),[{name:"scriptTag"+t,type:"TAG",value:e.tag},{name:"script"+t,type:"TABLE",value:new U("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new U("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:r.reqFeatureIndex}].concat(V("featureIndex",r.featureIndexes)))}].concat(z("langSys",n.langSysRecords,(function(e,t){var n=e.langSys;return[{name:"langSysTag"+t,type:"TAG",value:e.tag},{name:"langSys"+t,type:"TABLE",value:new U("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:n.reqFeatureIndex}].concat(V("featureIndex",n.featureIndexes)))}]}))))}]})))}function H(e){U.call(this,"featureListTable",z("featureRecord",e,(function(e,t){var n=e.feature;return[{name:"featureTag"+t,type:"TAG",value:e.tag},{name:"feature"+t,type:"TABLE",value:new U("featureTable",[{name:"featureParams",type:"USHORT",value:n.featureParams}].concat(V("lookupListIndex",n.lookupListIndexes)))}]})))}function W(e,t){U.call(this,"lookupListTable",G("lookup",e,(function(e){var n=t[e.lookupType];return C.assert(!!n,"Unable to write GSUB lookup type "+e.lookupType+" tables."),new U("lookupTable",[{name:"lookupType",type:"USHORT",value:e.lookupType},{name:"lookupFlag",type:"USHORT",value:e.lookupFlag}].concat(G("subtable",e.subtables,n)))})))}M.CHARSTRING=function(e){if(B){var t=B.get(e);if(void 0!==t)return t}for(var n=[],r=e.length,i=0;i<r;i+=1){var o=e[i];n=n.concat(M[o.type](o.value))}return B&&B.set(e,n),n},N.CHARSTRING=function(e){return M.CHARSTRING(e).length},M.OBJECT=function(e){var t=M[e.type];return C.argument(void 0!==t,"No encoding function for type "+e.type),t(e.value)},N.OBJECT=function(e){var t=N[e.type];return C.argument(void 0!==t,"No sizeOf function for type "+e.type),t(e.value)},M.TABLE=function(e){for(var t=[],n=e.fields.length,r=[],i=[],o=0;o<n;o+=1){var a=e.fields[o],s=M[a.type],l=(C.argument(void 0!==s,"No encoding function for field type "+a.type+" ("+a.name+")"),e[a.name]);s=s(l=void 0===l?a.value:l),"TABLE"===a.type?(i.push(t.length),t=t.concat([0,0]),r.push(s)):t=t.concat(s)}for(var c=0;c<r.length;c+=1){var u=i[c],p=t.length;C.argument(p<65536,"Table "+e.tableName+" too big."),t[u]=p>>8,t[u+1]=255&p,t=t.concat(r[c])}return t},N.TABLE=function(e){for(var t=0,n=e.fields.length,r=0;r<n;r+=1){var i=e.fields[r],o=N[i.type],a=(C.argument(void 0!==o,"No sizeOf function for field type "+i.type+" ("+i.name+")"),e[i.name]);t+=o(a=void 0===a?i.value:a),"TABLE"===i.type&&(t+=2)}return t},M.RECORD=M.TABLE,N.RECORD=N.TABLE,M.LITERAL=function(e){return e},N.LITERAL=function(e){return e.length},U.prototype.encode=function(){return M.TABLE(this)},U.prototype.sizeOf=function(){return N.TABLE(this)};var K={Table:U,Record:U,Coverage:($.prototype=Object.create(U.prototype)).constructor=$,ScriptList:(q.prototype=Object.create(U.prototype)).constructor=q,FeatureList:(H.prototype=Object.create(U.prototype)).constructor=H,LookupList:(W.prototype=Object.create(U.prototype)).constructor=W,ushortList:V,tableList:G,recordList:z};function X(e,t){return e.getUint8(t)}function Y(e,t){return e.getUint16(t,!1)}function J(e,t){return e.getUint32(t,!1)}function Q(e,t){return e.getInt16(t,!1)+e.getUint16(t+2,!1)/65535}var Z={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function ee(e,t){this.data=e,this.offset=t,this.relativeOffset=0}ee.prototype.parseByte=function(){var e=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},ee.prototype.parseChar=function(){var e=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},ee.prototype.parseCard8=ee.prototype.parseByte,ee.prototype.parseCard16=ee.prototype.parseUShort=function(){var e=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},ee.prototype.parseSID=ee.prototype.parseUShort,ee.prototype.parseOffset16=ee.prototype.parseUShort,ee.prototype.parseShort=function(){var e=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},ee.prototype.parseF2Dot14=function(){var e=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,e},ee.prototype.parseOffset32=ee.prototype.parseULong=function(){var e=J(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},ee.prototype.parseFixed=function(){var e=Q(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},ee.prototype.parseString=function(e){var t=this.data,n=this.offset+this.relativeOffset,r="";this.relativeOffset+=e;for(var i=0;i<e;i++)r+=String.fromCharCode(t.getUint8(n+i));return r},ee.prototype.parseTag=function(){return this.parseString(4)},ee.prototype.parseLongDateTime=function(){var e=J(this.data,this.offset+this.relativeOffset+4);return e-=2082844800,this.relativeOffset+=8,e},ee.prototype.parseVersion=function(e){var t=Y(this.data,this.offset+this.relativeOffset),n=Y(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,t+n/(e=void 0===e?4096:e)/10},ee.prototype.skip=function(e,t){this.relativeOffset+=Z[e]*(t=void 0===t?1:t)},ee.prototype.parseULongList=function(e){void 0===e&&(e=this.parseULong());for(var t=new Array(e),n=this.data,r=this.offset+this.relativeOffset,i=0;i<e;i++)t[i]=n.getUint32(r),r+=4;return this.relativeOffset+=4*e,t},ee.prototype.parseOffset16List=ee.prototype.parseUShortList=function(e){void 0===e&&(e=this.parseUShort());for(var t=new Array(e),n=this.data,r=this.offset+this.relativeOffset,i=0;i<e;i++)t[i]=n.getUint16(r),r+=2;return this.relativeOffset+=2*e,t},ee.prototype.parseShortList=function(e){for(var t=new Array(e),n=this.data,r=this.offset+this.relativeOffset,i=0;i<e;i++)t[i]=n.getInt16(r),r+=2;return this.relativeOffset+=2*e,t},ee.prototype.parseByteList=function(e){for(var t=new Array(e),n=this.data,r=this.offset+this.relativeOffset,i=0;i<e;i++)t[i]=n.getUint8(r++);return this.relativeOffset+=e,t},ee.prototype.parseList=function(e,t){t||(t=e,e=this.parseUShort());for(var n=new Array(e),r=0;r<e;r++)n[r]=t.call(this);return n},ee.prototype.parseList32=function(e,t){t||(t=e,e=this.parseULong());for(var n=new Array(e),r=0;r<e;r++)n[r]=t.call(this);return n},ee.prototype.parseRecordList=function(e,t){t||(t=e,e=this.parseUShort());for(var n=new Array(e),r=Object.keys(t),i=0;i<e;i++){for(var o={},a=0;a<r.length;a++){var s=r[a],l=t[s];o[s]=l.call(this)}n[i]=o}return n},ee.prototype.parseRecordList32=function(e,t){t||(t=e,e=this.parseULong());for(var n=new Array(e),r=Object.keys(t),i=0;i<e;i++){for(var o={},a=0;a<r.length;a++){var s=r[a],l=t[s];o[s]=l.call(this)}n[i]=o}return n},ee.prototype.parseStruct=function(e){if("function"==typeof e)return e.call(this);for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r],o=e[i];n[i]=o.call(this)}return n},ee.prototype.parseValueRecord=function(e){var t;if(0!==(e=void 0===e?this.parseUShort():e))return t={},1&e&&(t.xPlacement=this.parseShort()),2&e&&(t.yPlacement=this.parseShort()),4&e&&(t.xAdvance=this.parseShort()),8&e&&(t.yAdvance=this.parseShort()),16&e&&(t.xPlaDevice=void 0,this.parseShort()),32&e&&(t.yPlaDevice=void 0,this.parseShort()),64&e&&(t.xAdvDevice=void 0,this.parseShort()),128&e&&(t.yAdvDevice=void 0,this.parseShort()),t},ee.prototype.parseValueRecordList=function(){for(var e=this.parseUShort(),t=this.parseUShort(),n=new Array(t),r=0;r<t;r++)n[r]=this.parseValueRecord(e);return n},ee.prototype.parsePointer=function(e){var t=this.parseOffset16();if(0<t)return new ee(this.data,this.offset+t).parseStruct(e)},ee.prototype.parsePointer32=function(e){var t=this.parseOffset32();if(0<t)return new ee(this.data,this.offset+t).parseStruct(e)},ee.prototype.parseListOfLists=function(e){for(var t=this.parseOffset16List(),n=t.length,r=this.relativeOffset,i=new Array(n),o=0;o<n;o++){var a=t[o];if(0===a)i[o]=void 0;else if(this.relativeOffset=a,e){for(var s=this.parseOffset16List(),l=new Array(s.length),c=0;c<s.length;c++)this.relativeOffset=a+s[c],l[c]=e.call(this);i[o]=l}else i[o]=this.parseUShortList()}return this.relativeOffset=r,i},ee.prototype.parseCoverage=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort(),n=this.parseUShort();if(1===t)return{format:1,glyphs:this.parseUShortList(n)};if(2!==t)throw new Error("0x"+e.toString(16)+": Coverage format must be 1 or 2.");for(var r=new Array(n),i=0;i<n;i++)r[i]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:r}},ee.prototype.parseClassDef=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(2===t)return{format:2,ranges:this.parseRecordList({start:ee.uShort,end:ee.uShort,classId:ee.uShort})};throw new Error("0x"+e.toString(16)+": ClassDef format must be 1 or 2.")},ee.list=function(e,t){return function(){return this.parseList(e,t)}},ee.list32=function(e,t){return function(){return this.parseList32(e,t)}},ee.recordList=function(e,t){return function(){return this.parseRecordList(e,t)}},ee.recordList32=function(e,t){return function(){return this.parseRecordList32(e,t)}},ee.pointer=function(e){return function(){return this.parsePointer(e)}},ee.pointer32=function(e){return function(){return this.parsePointer32(e)}},ee.tag=ee.prototype.parseTag,ee.byte=ee.prototype.parseByte,ee.uShort=ee.offset16=ee.prototype.parseUShort,ee.uShortList=ee.prototype.parseUShortList,ee.uLong=ee.offset32=ee.prototype.parseULong,ee.uLongList=ee.prototype.parseULongList,ee.struct=ee.prototype.parseStruct,ee.coverage=ee.prototype.parseCoverage,ee.classDef=ee.prototype.parseClassDef;var te={reserved:ee.uShort,reqFeatureIndex:ee.uShort,featureIndexes:ee.uShortList},ne=(ee.prototype.parseScriptList=function(){return this.parsePointer(ee.recordList({tag:ee.tag,script:ee.pointer({defaultLangSys:ee.pointer(te),langSysRecords:ee.recordList({tag:ee.tag,langSys:ee.pointer(te)})})}))||[]},ee.prototype.parseFeatureList=function(){return this.parsePointer(ee.recordList({tag:ee.tag,feature:ee.pointer({featureParams:ee.offset16,lookupListIndexes:ee.uShortList})}))||[]},ee.prototype.parseLookupList=function(e){return this.parsePointer(ee.list(ee.pointer((function(){var t=this.parseUShort(),n=(C.argument(1<=t&&t<=9,"GPOS/GSUB lookup type "+t+" unknown."),this.parseUShort()),r=16&n;return{lookupType:t,lookupFlag:n,subtables:this.parseList(ee.pointer(e[t])),markFilteringSet:r?this.parseUShort():void 0}}))))||[]},ee.prototype.parseFeatureVariationsList=function(){return this.parsePointer32((function(){var e=this.parseUShort(),t=this.parseUShort();return C.argument(1===e&&t<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:ee.offset32,featureTableSubstitutionOffset:ee.offset32})}))||[]},{getByte:X,getCard8:X,getUShort:Y,getCard16:Y,getShort:function(e,t){return e.getInt16(t,!1)},getULong:J,getFixed:Q,getTag:function(e,t){for(var n="",r=t;r<t+4;r+=1)n+=String.fromCharCode(e.getInt8(r));return n},getOffset:function(e,t,n){for(var r=0,i=0;i<n;i+=1)r=(r<<=8)+e.getUint8(t+i);return r},getBytes:function(e,t,n){for(var r=[],i=t;i<n;i+=1)r.push(e.getUint8(i));return r},bytesToString:function(e){for(var t="",n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return t},Parser:ee}),re=function(e,t){for(var n={},r=(n.version=ne.getUShort(e,t),C.argument(0===n.version,"cmap table version should be 0."),n.numTables=ne.getUShort(e,t+2),-1),i=n.numTables-1;0<=i;--i){var o=ne.getUShort(e,t+4+8*i),a=ne.getUShort(e,t+4+8*i+2);if(3===o&&(0===a||1===a||10===a)||0===o&&(0===a||1===a||2===a||3===a||4===a)){r=ne.getULong(e,t+4+8*i+4);break}}if(-1===r)throw new Error("No valid cmap sub-tables found.");var s=new ne.Parser(e,t+r);if(n.format=s.parseUShort(),12===n.format){var l,c=n,u=s;u.parseUShort(),c.length=u.parseULong(),c.language=u.parseULong(),c.groupCount=l=u.parseULong(),c.glyphIndexMap={};for(var p=0;p<l;p+=1)for(var d=u.parseULong(),h=u.parseULong(),m=u.parseULong(),f=d;f<=h;f+=1)c.glyphIndexMap[f]=m,m++}else{if(4!==n.format)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+n.format+").");var g=n,y=e,_=t,v=r;g.length=s.parseUShort(),g.language=s.parseUShort(),g.segCount=b=s.parseUShort()>>1,s.skip("uShort",3),g.glyphIndexMap={};for(var b,w=new ne.Parser(y,_+v+14),x=new ne.Parser(y,_+v+16+2*b),S=new ne.Parser(y,_+v+16+4*b),T=new ne.Parser(y,_+v+16+6*b),E=_+v+16+8*b,I=0;I<b-1;I+=1)for(var k=void 0,j=w.parseUShort(),A=x.parseUShort(),O=S.parseShort(),M=T.parseUShort(),N=A;N<=j;N+=1)0!==M?(E=(E=T.offset+T.relativeOffset-2)+M+2*(N-A),0!==(k=ne.getUShort(y,E))&&(k=k+O&65535)):k=N+O&65535,g.glyphIndexMap[N]=k}return n},ie=function(e){for(var t=!0,n=e.length-1;0<n;--n)if(65535<e.get(n).unicode){console.log("Adding CMAP format 12 (needed!)"),t=!1;break}var r,i,o=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:t?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:t?12:20}],a=(o=(o=t?o:o.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new K.Table("cmap",o));for(a.segments=[],n=0;n<e.length;n+=1){for(var s=e.get(n),l=0;l<s.unicodes.length;l+=1)r=s.unicodes[l],i=n,a.segments.push({end:r,start:r,delta:-(r-i),offset:0,glyphIndex:i});a.segments=a.segments.sort((function(e,t){return e.start-t.start}))}a.segments.push({end:65535,start:65535,delta:1,offset:0});var c=a.segments.length,u=0,p=[],d=[],h=[],m=[],f=[],g=[];for(n=0;n<c;n+=1){var y=a.segments[n];y.end<=65535&&y.start<=65535?(p=p.concat({name:"end_"+n,type:"USHORT",value:y.end}),d=d.concat({name:"start_"+n,type:"USHORT",value:y.start}),h=h.concat({name:"idDelta_"+n,type:"SHORT",value:y.delta}),m=m.concat({name:"idRangeOffset_"+n,type:"USHORT",value:y.offset}),void 0!==y.glyphId&&(f=f.concat({name:"glyph_"+n,type:"USHORT",value:y.glyphId}))):u+=1,t||void 0===y.glyphIndex||(g=(g=(g=g.concat({name:"cmap12Start_"+n,type:"ULONG",value:y.start})).concat({name:"cmap12End_"+n,type:"ULONG",value:y.end})).concat({name:"cmap12Glyph_"+n,type:"ULONG",value:y.glyphIndex}))}return a.segCountX2=2*(c-u),a.searchRange=2*Math.pow(2,Math.floor(Math.log(c-u)/Math.log(2))),a.entrySelector=Math.log(a.searchRange/2)/Math.log(2),a.rangeShift=a.segCountX2-a.searchRange,a.fields=a.fields.concat(p),a.fields.push({name:"reservedPad",type:"USHORT",value:0}),a.fields=a.fields.concat(d),a.fields=a.fields.concat(h),a.fields=a.fields.concat(m),a.fields=a.fields.concat(f),a.cmap4Length=14+2*p.length+2+2*d.length+2*h.length+2*m.length+2*f.length,t||(o=16+4*g.length,a.cmap12Offset=20+a.cmap4Length,a.fields=a.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:o},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:g.length/3}]),a.fields=a.fields.concat(g)),a},oe=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],ae=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],se=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],le=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function ce(e){this.font=e}function ue(e){this.cmap=e}function pe(e,t){this.encoding=e,this.charset=t}function de(e){switch(e.version){case 1:this.names=le.slice();break;case 2:this.names=new Array(e.numberOfGlyphs);for(var t=0;t<e.numberOfGlyphs;t++)e.glyphNameIndex[t]<le.length?this.names[t]=le[e.glyphNameIndex[t]]:this.names[t]=e.names[e.glyphNameIndex[t]-le.length];break;case 2.5:this.names=new Array(e.numberOfGlyphs);for(var n=0;n<e.numberOfGlyphs;n++)this.names[n]=le[n+e.glyphNameIndex[n]];break;default:this.names=[]}}ce.prototype.charToGlyphIndex=function(e){var t=e.codePointAt(0),n=this.font.glyphs;if(n)for(var r=0;r<n.length;r+=1)for(var i=n.get(r),o=0;o<i.unicodes.length;o+=1)if(i.unicodes[o]===t)return r;return null},ue.prototype.charToGlyphIndex=function(e){return this.cmap.glyphIndexMap[e.codePointAt(0)]||0},pe.prototype.charToGlyphIndex=function(e){return e=e.codePointAt(0),e=this.encoding[e],this.charset.indexOf(e)},de.prototype.nameToGlyphIndex=function(e){return this.names.indexOf(e)},de.prototype.glyphIndexToName=function(e){return this.names[e]};var he=function(e,t,n,r,i){e.beginPath(),e.moveTo(t,n),e.lineTo(r,i),e.stroke()};function me(e){this.bindConstructorValues(e)}function fe(e,t,n){Object.defineProperty(e,t,{get:function(){return e.path,e[n]},set:function(t){e[n]=t},enumerable:!0,configurable:!0})}function ge(e,t){if(this.font=e,this.glyphs={},Array.isArray(t))for(var n=0;n<t.length;n++)this.glyphs[n]=t[n];this.length=t&&t.length||0}me.prototype.bindConstructorValues=function(e){var t;this.index=e.index||0,this.name=e.name||null,this.unicode=e.unicode||void 0,this.unicodes=e.unicodes||void 0!==e.unicode?[e.unicode]:[],e.xMin&&(this.xMin=e.xMin),e.yMin&&(this.yMin=e.yMin),e.xMax&&(this.xMax=e.xMax),e.yMax&&(this.yMax=e.yMax),e.advanceWidth&&(this.advanceWidth=e.advanceWidth),Object.defineProperty(this,"path",(e=e.path,t=e||new k,{configurable:!0,get:function(){return t="function"==typeof t?t():t},set:function(e){t=e}}))},me.prototype.addUnicode=function(e){0===this.unicodes.length&&(this.unicode=e),this.unicodes.push(e)},me.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},me.prototype.getPath=function(e,t,n,r,i){e=void 0!==e?e:0,t=void 0!==t?t:0,n=void 0!==n?n:72;for(var o,a,s=(r=r||{}).xScale,l=r.yScale,c=((o=r.hinting&&i&&i.hinting?this.path&&i.hinting.exec(this,n):o)?(a=i.hinting.getCommands(o),e=Math.round(e),t=Math.round(t),s=l=1):(a=this.path.commands,r=1/this.path.unitsPerEm*n,void 0===s&&(s=r),void 0===l&&(l=r)),new k),u=0;u<a.length;u+=1){var p=a[u];"M"===p.type?c.moveTo(e+p.x*s,t+-p.y*l):"L"===p.type?c.lineTo(e+p.x*s,t+-p.y*l):"Q"===p.type?c.quadraticCurveTo(e+p.x1*s,t+-p.y1*l,e+p.x*s,t+-p.y*l):"C"===p.type?c.curveTo(e+p.x1*s,t+-p.y1*l,e+p.x2*s,t+-p.y2*l,e+p.x*s,t+-p.y*l):"Z"===p.type&&c.closePath()}return c},me.prototype.getContours=function(){if(void 0===this.points)return[];for(var e=[],t=[],n=0;n<this.points.length;n+=1){var r=this.points[n];t.push(r),r.lastPointOfContour&&(e.push(t),t=[])}return C.argument(0===t.length,"There are still points left in the current contour."),e},me.prototype.getMetrics=function(){for(var e=this.path.commands,t=[],n=[],r=0;r<e.length;r+=1){var i=e[r];"Z"!==i.type&&(t.push(i.x),n.push(i.y)),"Q"!==i.type&&"C"!==i.type||(t.push(i.x1),n.push(i.y1)),"C"===i.type&&(t.push(i.x2),n.push(i.y2))}var o={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,n),xMax:Math.max.apply(null,t),yMax:Math.max.apply(null,n),leftSideBearing:this.leftSideBearing};return isFinite(o.xMin)||(o.xMin=0),isFinite(o.xMax)||(o.xMax=this.advanceWidth),isFinite(o.yMin)||(o.yMin=0),isFinite(o.yMax)||(o.yMax=0),o.rightSideBearing=this.advanceWidth-o.leftSideBearing-(o.xMax-o.xMin),o},me.prototype.draw=function(e,t,n,r,i){this.getPath(t,n,r,i).draw(e)},me.prototype.drawPoints=function(e,t,n,r){function i(t,n,r,i){var o=2*Math.PI;e.beginPath();for(var a=0;a<t.length;a+=1)e.moveTo(n+t[a].x*i,r+t[a].y*i),e.arc(n+t[a].x*i,r+t[a].y*i,2,0,o,!1);e.closePath(),e.fill()}t=void 0!==t?t:0,n=void 0!==n?n:0,r=1/this.path.unitsPerEm*(r=void 0!==r?r:24);for(var o=[],a=[],s=this.path,l=0;l<s.commands.length;l+=1){var c=s.commands[l];void 0!==c.x&&o.push({x:c.x,y:-c.y}),void 0!==c.x1&&a.push({x:c.x1,y:-c.y1}),void 0!==c.x2&&a.push({x:c.x2,y:-c.y2})}e.fillStyle="blue",i(o,t,n,r),e.fillStyle="red",i(a,t,n,r)},me.prototype.drawMetrics=function(e,t,n,r){t=void 0!==t?t:0,n=void 0!==n?n:0,r=1/this.path.unitsPerEm*(r=void 0!==r?r:24),e.lineWidth=1,e.strokeStyle="black",he(e,t,-1e4,t,1e4),he(e,-1e4,n,1e4,n);var i=this.xMin||0,o=this.yMin||0,a=this.xMax||0,s=this.yMax||0,l=this.advanceWidth||0;e.strokeStyle="blue",he(e,t+i*r,-1e4,t+i*r,1e4),he(e,t+a*r,-1e4,t+a*r,1e4),he(e,-1e4,n+-o*r,1e4,n+-o*r),he(e,-1e4,n+-s*r,1e4,n+-s*r),e.strokeStyle="green",he(e,t+l*r,-1e4,t+l*r,1e4)},ge.prototype.get=function(e){return"function"==typeof this.glyphs[e]&&(this.glyphs[e]=this.glyphs[e]()),this.glyphs[e]},ge.prototype.push=function(e,t){this.glyphs[e]=t,this.length++};var ye={GlyphSet:ge,glyphLoader:function(e,t){return new me({index:t,font:e})},ttfGlyphLoader:function(e,t,n,r,i,o){return function(){var a=new me({index:t,font:e});return a.path=function(){n(a,r,i);var t=o(e.glyphs,a);return t.unitsPerEm=e.unitsPerEm,t},fe(a,"xMin","_xMin"),fe(a,"xMax","_xMax"),fe(a,"yMin","_yMin"),fe(a,"yMax","_yMax"),a}},cffGlyphLoader:function(e,t,n,r){return function(){var i=new me({index:t,font:e});return i.path=function(){var t=n(e,i,r);return t.unitsPerEm=e.unitsPerEm,t},i}}};function _e(e){return e.length<1240?107:e.length<33900?1131:32768}function ve(e,t,n){var r,i=[],o=[],a=ne.getCard16(e,t);if(0!==a){for(var s=ne.getByte(e,t+2),l=t+(a+1)*s+2,c=t+3,u=0;u<a+1;u+=1)i.push(ne.getOffset(e,c,s)),c+=s;r=l+i[a]}else r=t+2;for(var p=0;p<i.length-1;p+=1){var d=ne.getBytes(e,l+i[p],l+i[p+1]);n&&(d=n(d)),o.push(d)}return{objects:o,startOffset:t,endOffset:r}}function be(e,t){if(28===t)return e.parseByte()<<8|e.parseByte();if(29===t)return e.parseByte()<<24|e.parseByte()<<16|e.parseByte()<<8|e.parseByte();if(30===t){for(var n=e,r="",i=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var o=(a=n.parseByte())>>4,a=15&a;if(15==o)break;if(r+=i[o],15==a)break;r+=i[a]}return parseFloat(r)}if(32<=t&&t<=246)return t-139;if(247<=t&&t<=250)return 256*(t-247)+e.parseByte()+108;if(251<=t&&t<=254)return 256*-(t-251)-e.parseByte()-108;throw new Error("Invalid b0 "+t)}function we(e,t,n){var r=new ne.Parser(e,t=void 0!==t?t:0),i=[],o=[];for(n=void 0!==n?n:e.length;r.relativeOffset<n;){var a=r.parseByte();a<=21?(12===a&&(a=1200+r.parseByte()),i.push([a,o]),o=[]):o.push(be(r,a))}for(var s=i,l={},c=0;c<s.length;c+=1){var u=s[c][0],p=s[c][1],d=1===p.length?p[0]:p;if(l.hasOwnProperty(u)&&!isNaN(l[u]))throw new Error("Object "+l+" already has key "+u);l[u]=d}return l}function xe(e,t){return t<=390?oe[t]:e[t-391]}function Se(e,t,n){for(var r,i={},o=0;o<t.length;o+=1){var a=t[o];if(Array.isArray(a.type)){var s=[];s.length=a.type.length;for(var l=0;l<a.type.length;l++)void 0===(r=void 0!==e[a.op]?e[a.op][l]:void 0)&&(r=void 0!==a.value&&void 0!==a.value[l]?a.value[l]:null),"SID"===a.type[l]&&(r=xe(n,r)),s[l]=r;i[a.name]=s}else void 0===(r=e[a.op])&&(r=void 0!==a.value?a.value:null),"SID"===a.type&&(r=xe(n,r)),i[a.name]=r}return i}var Te=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],Ee=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function Ie(e,t,n,r){return Se(we(e,t,n),Ee,r)}function ke(e,t,n,r){for(var i=[],o=0;o<n.length;o+=1){var a,s=((s=r,a=Se(we(a=new DataView(new Uint8Array(n[o]).buffer),0,a.byteLength),Te,s))._subrs=[],a._subrsBias=0,a.private[0]),l=a.private[1];0!==s&&0!==l&&(s=Ie(e,l+t,s,r),a._defaultWidthX=s.defaultWidthX,a._nominalWidthX=s.nominalWidthX,0!==s.subrs&&(l=ve(e,l+s.subrs+t),a._subrs=l.objects,a._subrsBias=_e(a._subrs)),a._privateDict=s),i.push(a)}return i}function je(e,t,n){var r,i,o,a,s,l,c,u,p,d=new k,h=[],m=0,f=!1,g=!1,y=0,_=0,v=(p=(e.isCIDFont?(s=e.tables.cff.topDict._fdSelect[t.index],s=e.tables.cff.topDict._fdArray[s],l=s._subrs,c=s._subrsBias,u=s._defaultWidthX,s):(l=e.tables.cff.topDict._subrs,c=e.tables.cff.topDict._subrsBias,u=e.tables.cff.topDict._defaultWidthX,e.tables.cff.topDict))._nominalWidthX,u);function b(e,t){g&&d.closePath(),d.moveTo(e,t),g=!0}function w(){h.length%2==0||f||(v=h.shift()+p),m+=h.length>>1,h.length=0,f=!0}return function n(s){for(var u,x,S,T,E,I,k,j,A,C,O,M,N=0;N<s.length;){var R=s[N];switch(N+=1,R){case 1:case 3:case 18:case 23:w();break;case 4:1<h.length&&!f&&(v=h.shift()+p,f=!0),_+=h.pop(),b(y,_);break;case 5:for(;0<h.length;)y+=h.shift(),_+=h.shift(),d.lineTo(y,_);break;case 6:for(;0<h.length&&(y+=h.shift(),d.lineTo(y,_),0!==h.length);)_+=h.shift(),d.lineTo(y,_);break;case 7:for(;0<h.length&&(_+=h.shift(),d.lineTo(y,_),0!==h.length);)y+=h.shift(),d.lineTo(y,_);break;case 8:for(;0<h.length;)r=y+h.shift(),i=_+h.shift(),o=r+h.shift(),a=i+h.shift(),y=o+h.shift(),_=a+h.shift(),d.curveTo(r,i,o,a,y,_);break;case 10:E=h.pop()+c,(I=l[E])&&n(I);break;case 11:return;case 12:switch(R=s[N],N+=1,R){case 35:r=y+h.shift(),i=_+h.shift(),o=r+h.shift(),a=i+h.shift(),k=o+h.shift(),j=a+h.shift(),A=k+h.shift(),C=j+h.shift(),O=A+h.shift(),M=C+h.shift(),y=O+h.shift(),_=M+h.shift(),h.shift(),d.curveTo(r,i,o,a,k,j),d.curveTo(A,C,O,M,y,_);break;case 34:r=y+h.shift(),i=_,o=r+h.shift(),a=i+h.shift(),k=o+h.shift(),j=a,A=k+h.shift(),C=a,O=A+h.shift(),M=_,y=O+h.shift(),d.curveTo(r,i,o,a,k,j),d.curveTo(A,C,O,M,y,_);break;case 36:r=y+h.shift(),i=_+h.shift(),o=r+h.shift(),a=i+h.shift(),k=o+h.shift(),j=a,A=k+h.shift(),C=a,O=A+h.shift(),M=C+h.shift(),y=O+h.shift(),d.curveTo(r,i,o,a,k,j),d.curveTo(A,C,O,M,y,_);break;case 37:r=y+h.shift(),i=_+h.shift(),o=r+h.shift(),a=i+h.shift(),k=o+h.shift(),j=a+h.shift(),A=k+h.shift(),C=j+h.shift(),O=A+h.shift(),M=C+h.shift(),Math.abs(O-y)>Math.abs(M-_)?y=O+h.shift():_=M+h.shift(),d.curveTo(r,i,o,a,k,j),d.curveTo(A,C,O,M,y,_);break;default:console.log("Glyph "+t.index+": unknown operator 1200"+R),h.length=0}break;case 14:0<h.length&&!f&&(v=h.shift()+p,f=!0),g&&(d.closePath(),g=!1);break;case 19:case 20:w(),N+=m+7>>3;break;case 21:2<h.length&&!f&&(v=h.shift()+p,f=!0),_+=h.pop(),b(y+=h.pop(),_);break;case 22:1<h.length&&!f&&(v=h.shift()+p,f=!0),b(y+=h.pop(),_);break;case 24:for(;2<h.length;)r=y+h.shift(),i=_+h.shift(),o=r+h.shift(),a=i+h.shift(),y=o+h.shift(),_=a+h.shift(),d.curveTo(r,i,o,a,y,_);y+=h.shift(),_+=h.shift(),d.lineTo(y,_);break;case 25:for(;6<h.length;)y+=h.shift(),_+=h.shift(),d.lineTo(y,_);r=y+h.shift(),i=_+h.shift(),o=r+h.shift(),a=i+h.shift(),y=o+h.shift(),_=a+h.shift(),d.curveTo(r,i,o,a,y,_);break;case 26:for(h.length%2&&(y+=h.shift());0<h.length;)r=y,i=_+h.shift(),o=r+h.shift(),a=i+h.shift(),y=o,_=a+h.shift(),d.curveTo(r,i,o,a,y,_);break;case 27:for(h.length%2&&(_+=h.shift());0<h.length;)r=y+h.shift(),i=_,o=r+h.shift(),a=i+h.shift(),y=o+h.shift(),_=a,d.curveTo(r,i,o,a,y,_);break;case 28:u=s[N],x=s[N+1],h.push((u<<24|x<<16)>>16),N+=2;break;case 29:E=h.pop()+e.gsubrsBias,(I=e.gsubrs[E])&&n(I);break;case 30:for(;0<h.length&&(r=y,i=_+h.shift(),o=r+h.shift(),a=i+h.shift(),y=o+h.shift(),_=a+(1===h.length?h.shift():0),d.curveTo(r,i,o,a,y,_),0!==h.length);)r=y+h.shift(),i=_,o=r+h.shift(),a=i+h.shift(),_=a+h.shift(),y=o+(1===h.length?h.shift():0),d.curveTo(r,i,o,a,y,_);break;case 31:for(;0<h.length&&(r=y+h.shift(),i=_,o=r+h.shift(),a=i+h.shift(),_=a+h.shift(),y=o+(1===h.length?h.shift():0),d.curveTo(r,i,o,a,y,_),0!==h.length);)r=y,i=_+h.shift(),o=r+h.shift(),a=i+h.shift(),y=o+h.shift(),_=a+(1===h.length?h.shift():0),d.curveTo(r,i,o,a,y,_);break;default:R<32?console.log("Glyph "+t.index+": unknown operator "+R):R<247?h.push(R-139):R<251?(u=s[N],N+=1,h.push(256*(R-247)+u+108)):R<255?(u=s[N],N+=1,h.push(256*-(R-251)-u-108)):(u=s[N],x=s[N+1],S=s[N+2],T=s[N+3],N+=4,h.push((u<<24|x<<16|S<<8|T)/65536))}}}(n),t.advanceWidth=v,d}function Ae(e,t){var n,r=oe.indexOf(e);return 0<=r&&(n=r),0<=(r=t.indexOf(e))?n=r+oe.length:(n=oe.length+t.length,t.push(e)),n}function Ce(e,t,n){for(var r={},i=0;i<e.length;i+=1){var o=e[i],a=t[o.name];void 0===a||function e(t,n){if(t===n)return 1;if(Array.isArray(t)&&Array.isArray(n)&&t.length===n.length){for(var r=0;r<t.length;r+=1)if(!e(t[r],n[r]))return;return 1}}(a,o.value)||("SID"===o.type&&(a=Ae(a,n)),r[o.op]={name:o.name,type:o.type,value:a})}return r}function Oe(e,t){var n=new K.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return n.dict=Ce(Te,e,t),n}function Me(e){var t=new K.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return t.topDicts=[{name:"topDict_0",type:"TABLE",value:e}],t}var Ne=function(e,t,n){n.tables.cff={},r=e,i=t,(o={}).formatMajor=ne.getCard8(r,i),o.formatMinor=ne.getCard8(r,i+1),o.size=ne.getCard8(r,i+2),o.offsetSize=ne.getCard8(r,i+3),o.startOffset=i,o.endOffset=i+4;var r=ve(e,o.endOffset,ne.bytesToString),i=ve(e,r.endOffset),o=ve(e,i.endOffset,ne.bytesToString);if(r=ve(e,o.endOffset),n.gsubrs=r.objects,n.gsubrsBias=_e(n.gsubrs),1!==(r=ke(e,t,i.objects,o.objects)).length)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+r.length);if(i=r[0],(n.tables.cff.topDict=i)._privateDict&&(n.defaultWidthX=i._privateDict.defaultWidthX,n.nominalWidthX=i._privateDict.nominalWidthX),void 0!==i.ros[0]&&void 0!==i.ros[1]&&(n.isCIDFont=!0),n.isCIDFont){r=i.fdArray;var a=i.fdSelect;if(0===r||0===a)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");r=ke(e,t,ve(e,r+=t).objects,o.objects),i._fdArray=r,i._fdSelect=function(e,t,n,r){var i,o=[],a=new ne.Parser(e,t);if(0===(e=a.parseCard8()))for(var s=0;s<n;s++){if(r<=(i=a.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+i+" (FD count "+r+")");o.push(i)}else{if(3!==e)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+e);var l,c=a.parseCard16(),u=a.parseCard16();if(0!==u)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+u);for(var p=0;p<c;p++){if(i=a.parseCard8(),l=a.parseCard16(),r<=i)throw new Error("CFF table CID Font FDSelect has bad FD index value "+i+" (FD count "+r+")");if(n<l)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+l);for(;u<l;u++)o.push(i);u=l}if(l!==n)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+l)}return o}(e,a+=t,n.numGlyphs,r.length)}r=Ie(e,a=t+i.private[1],i.private[0],o.objects);var s=(n.defaultWidthX=r.defaultWidthX,n.nominalWidthX=r.nominalWidthX,0!==r.subrs?(a=ve(e,a+r.subrs),n.subrs=a.objects,n.subrsBias=_e(n.subrs)):(n.subrs=[],n.subrsBias=0),ve(e,t+i.charStrings));n.nGlyphs=s.objects.length,r=function(e,t,n,r){var i=new ne.Parser(e,t),o=(--n,[".notdef"]);if(0===(e=i.parseCard8()))for(var a=0;a<n;a+=1)s=i.parseSID(),o.push(xe(r,s));else if(1===e)for(;o.length<=n;)for(var s=i.parseSID(),l=i.parseCard8(),c=0;c<=l;c+=1)o.push(xe(r,s)),s+=1;else{if(2!==e)throw new Error("Unknown charset format "+e);for(;o.length<=n;){s=i.parseSID(),l=i.parseCard16();for(var u=0;u<=l;u+=1)o.push(xe(r,s)),s+=1}}return o}(e,t+i.charset,n.nGlyphs,o.objects),0===i.encoding?n.cffEncoding=new pe(ae,r):1===i.encoding?n.cffEncoding=new pe(se,r):n.cffEncoding=function(e,t,n){var r={},i=new ne.Parser(e,t);if(0===(e=i.parseCard8()))for(var o=i.parseCard8(),a=0;a<o;a+=1)r[l=i.parseCard8()]=a;else{if(1!==e)throw new Error("Unknown encoding format "+e);for(var s=i.parseCard8(),l=1,c=0;c<s;c+=1)for(var u=i.parseCard8(),p=i.parseCard8(),d=u;d<=u+p;d+=1)r[d]=l,l+=1}return new pe(r,n)}(e,t+i.encoding,r),n.encoding=n.encoding||n.cffEncoding,n.glyphs=new ye.GlyphSet(n);for(var l=0;l<n.nGlyphs;l+=1){var c=s.objects[l];n.glyphs.push(l,ye.cffGlyphLoader(n,l,je,c))}},Re=function(e,t){for(var n,r=new K.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),i=1/t.unitsPerEm,o=(i={version:t.version,fullName:t.fullName,familyName:t.familyName,weight:t.weightName,fontBBox:t.fontBBox||[0,0,0,0],fontMatrix:[i,0,0,i,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},[]),a=1;a<e.length;a+=1)n=e.get(a),o.push(n.name);var s,l,c=[],u=(r.header=new K.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),r.nameIndex=function(e){var t=new K.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);t.names=[];for(var n=0;n<e.length;n+=1)t.names.push({name:"name_"+n,type:"NAME",value:e[n]});return t}([t.postScriptName]),t=Oe(i,c),r.topDictIndex=Me(t),r.globalSubrIndex=new K.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),r.charsets=function(e,t){for(var n=new K.Record("Charsets",[{name:"format",type:"Card8",value:0}]),r=0;r<e.length;r+=1){var i=Ae(e[r],t);n.fields.push({name:"glyph_"+r,type:"SID",value:i})}return n}(o,c),r.charStringsIndex=function(e){for(var t=new K.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),n=0;n<e.length;n+=1){var r=e.get(n),i=function(e){for(var t=[],n=e.path,r=(t.push({name:"width",type:"NUMBER",value:e.advanceWidth}),0),i=0,o=0;o<n.commands.length;o+=1){var a,s,l,c,u=void 0,p=void 0,d=n.commands[o];"M"===(d="Q"===d.type?{type:"C",x:d.x,y:d.y,x1:1/3*r+2/3*d.x1,y1:1/3*i+2/3*d.y1,x2:1/3*d.x+2/3*d.x1,y2:1/3*d.y+2/3*d.y1}:d).type?(u=Math.round(d.x-r),p=Math.round(d.y-i),t.push({name:"dx",type:"NUMBER",value:u}),t.push({name:"dy",type:"NUMBER",value:p}),t.push({name:"rmoveto",type:"OP",value:21}),r=Math.round(d.x),i=Math.round(d.y)):"L"===d.type?(u=Math.round(d.x-r),p=Math.round(d.y-i),t.push({name:"dx",type:"NUMBER",value:u}),t.push({name:"dy",type:"NUMBER",value:p}),t.push({name:"rlineto",type:"OP",value:5}),r=Math.round(d.x),i=Math.round(d.y)):"C"===d.type&&(a=Math.round(d.x1-r),s=Math.round(d.y1-i),l=Math.round(d.x2-d.x1),c=Math.round(d.y2-d.y1),u=Math.round(d.x-d.x2),p=Math.round(d.y-d.y2),t.push({name:"dx1",type:"NUMBER",value:a}),t.push({name:"dy1",type:"NUMBER",value:s}),t.push({name:"dx2",type:"NUMBER",value:l}),t.push({name:"dy2",type:"NUMBER",value:c}),t.push({name:"dx",type:"NUMBER",value:u}),t.push({name:"dy",type:"NUMBER",value:p}),t.push({name:"rrcurveto",type:"OP",value:8}),r=Math.round(d.x),i=Math.round(d.y))}return t.push({name:"endchar",type:"OP",value:14}),t}(r);t.charStrings.push({name:r.name,type:"CHARSTRING",value:i})}return t}(e),r.privateDict=(u={},s=c,(l=new K.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=Ce(Ee,u,s),l),r.stringIndex=function(e){var t=new K.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);t.strings=[];for(var n=0;n<e.length;n+=1)t.strings.push({name:"string_"+n,type:"STRING",value:e[n]});return t}(c),r.header.sizeOf()+r.nameIndex.sizeOf()+r.topDictIndex.sizeOf()+r.stringIndex.sizeOf()+r.globalSubrIndex.sizeOf());return i.charset=u,i.encoding=0,i.charStrings=i.charset+r.charsets.sizeOf(),i.private[1]=i.charStrings+r.charStringsIndex.sizeOf(),t=Oe(i,c),r.topDictIndex=Me(t),r},Pe=function(e,t){var n={};return e=new ne.Parser(e,t),n.version=e.parseVersion(),n.fontRevision=Math.round(1e3*e.parseFixed())/1e3,n.checkSumAdjustment=e.parseULong(),n.magicNumber=e.parseULong(),C.argument(1594834165===n.magicNumber,"Font header has wrong magic number."),n.flags=e.parseUShort(),n.unitsPerEm=e.parseUShort(),n.created=e.parseLongDateTime(),n.modified=e.parseLongDateTime(),n.xMin=e.parseShort(),n.yMin=e.parseShort(),n.xMax=e.parseShort(),n.yMax=e.parseShort(),n.macStyle=e.parseUShort(),n.lowestRecPPEM=e.parseUShort(),n.fontDirectionHint=e.parseShort(),n.indexToLocFormat=e.parseShort(),n.glyphDataFormat=e.parseShort(),n},De=function(e){var t=Math.round((new Date).getTime()/1e3)+2082844800,n=t;return e.createdTimestamp&&(n=e.createdTimestamp+2082844800),new K.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:n},{name:"modified",type:"LONGDATETIME",value:t},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],e)},Le=function(e,t){var n={};return e=new ne.Parser(e,t),n.version=e.parseVersion(),n.ascender=e.parseShort(),n.descender=e.parseShort(),n.lineGap=e.parseShort(),n.advanceWidthMax=e.parseUShort(),n.minLeftSideBearing=e.parseShort(),n.minRightSideBearing=e.parseShort(),n.xMaxExtent=e.parseShort(),n.caretSlopeRise=e.parseShort(),n.caretSlopeRun=e.parseShort(),n.caretOffset=e.parseShort(),e.relativeOffset+=8,n.metricDataFormat=e.parseShort(),n.numberOfHMetrics=e.parseUShort(),n},Fe=function(e){return new K.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],e)},Be=function(e){for(var t=new K.Table("hmtx",[]),n=0;n<e.length;n+=1){var r=(i=e.get(n)).advanceWidth||0,i=i.leftSideBearing||0;t.fields.push({name:"advanceWidth_"+n,type:"USHORT",value:r}),t.fields.push({name:"leftSideBearing_"+n,type:"SHORT",value:i})}return t},Ue=function(e){for(var t=new K.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:e.length}]),n="",r=12+4*e.length,i=0;i<e.length;++i){var o=n.indexOf(e[i]);o<0&&(o=n.length,n+=e[i]),t.fields.push({name:"offset "+i,type:"USHORT",value:r+o}),t.fields.push({name:"length "+i,type:"USHORT",value:e[i].length})}return t.fields.push({name:"stringPool",type:"CHARARRAY",value:n}),t},Ve=function(e,t){for(var n=new ne.Parser(e,t),r=n.parseULong(),i=(C.argument(1===r,"Unsupported ltag table version."),n.skip("uLong",1),n.parseULong()),o=[],a=0;a<i;a++){for(var s="",l=t+n.parseUShort(),c=n.parseUShort(),u=l;u<l+c;++u)s+=String.fromCharCode(e.getInt8(u));o.push(s)}return o},Ge=function(e,t){var n={};return e=new ne.Parser(e,t),n.version=e.parseVersion(),n.numGlyphs=e.parseUShort(),1===n.version&&(n.maxPoints=e.parseUShort(),n.maxContours=e.parseUShort(),n.maxCompositePoints=e.parseUShort(),n.maxCompositeContours=e.parseUShort(),n.maxZones=e.parseUShort(),n.maxTwilightPoints=e.parseUShort(),n.maxStorage=e.parseUShort(),n.maxFunctionDefs=e.parseUShort(),n.maxInstructionDefs=e.parseUShort(),n.maxStackElements=e.parseUShort(),n.maxSizeOfInstructions=e.parseUShort(),n.maxComponentElements=e.parseUShort(),n.maxComponentDepth=e.parseUShort()),n},ze=function(e){return new K.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:e}])},$e=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],qe={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},He={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},We={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},Ke="utf-16",Xe={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},Ye={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function Je(e,t,n){switch(e){case 0:return Ke;case 1:return Ye[n]||Xe[t];case 3:if(1===t||10===t)return Ke}}function Qe(e){var t,n={};for(t in e)n[e[t]]=parseInt(t);return n}function Ze(e,t,n,r,i,o){return new K.Record("NameRecord",[{name:"platformID",type:"USHORT",value:e},{name:"encodingID",type:"USHORT",value:t},{name:"languageID",type:"USHORT",value:n},{name:"nameID",type:"USHORT",value:r},{name:"length",type:"USHORT",value:i},{name:"offset",type:"USHORT",value:o}])}function et(e,t){if((n=function(e,t){var n=e.length,r=t.length-n+1;e:for(var i=0;i<r;i++)for(;i<r;i++){for(var o=0;o<n;o++)if(t[i+o]!==e[o])continue e;return i}return-1}(e,t))<0)for(var n=t.length,r=0,i=e.length;r<i;++r)t.push(e[r]);return n}var tt=function(e,t,n){for(var r={},i=new ne.Parser(e,t),o=(t=i.parseUShort(),i.parseUShort()),a=i.offset+i.parseUShort(),s=0;s<o;s++){var l=i.parseUShort(),c=i.parseUShort(),u=i.parseUShort(),p=i.parseUShort(),d=(p=$e[p]||p,i.parseUShort()),h=i.parseUShort(),m=function(e,t,n){switch(e){case 0:if(65535===t)return"und";if(n)return n[t];break;case 1:return qe[t];case 3:return We[t]}}(l,u,n);void 0!==(l=Je(l,c,u))&&void 0!==m&&(c=void 0,(c=l===Ke?O.UTF16(e,a+h,d):O.MACSTRING(e,a+h,d,l))&&((u=void 0===(u=r[p])?r[p]={}:u)[m]=c))}return 1===t&&i.parseUShort(),r},nt=function(e,t){var n,r=[],i={},o=Qe($e);for(n in e){var a=o[n];if(void 0===a&&(a=n),d=parseInt(a),isNaN(d))throw new Error('Name table entry "'+n+'" does not exist, see nameTableNames for complete list.');i[d]=e[n],r.push(d)}for(var s=Qe(qe),l=Qe(We),c=[],u=[],p=0;p<r.length;p++){var d,h,m=i[d=r[p]];for(h in m){var f=m[h],g=1,y=s[h],_=He[y],v=Je(g,_,y),b=(void 0===(v=M.MACSTRING(f,v))&&(g=0,(y=t.indexOf(h))<0&&(y=t.length,t.push(h)),_=4,v=M.UTF16(f)),et(v,u));void 0!==(c.push(Ze(g,_,y,d,v.length,b)),g=l[h])&&(y=et(_=M.UTF16(f),u),c.push(Ze(3,1,g,d,_.length,y)))}}c.sort((function(e,t){return e.platformID-t.platformID||e.encodingID-t.encodingID||e.languageID-t.languageID||e.nameID-t.nameID}));for(var w=new K.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:c.length},{name:"stringOffset",type:"USHORT",value:6+12*c.length}]),x=0;x<c.length;x++)w.fields.push({name:"record_"+x,type:"RECORD",value:c[x]});return w.fields.push({name:"strings",type:"LITERAL",value:u}),w},rt=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],it=function(e,t){var n={},r=new ne.Parser(e,t);n.version=r.parseUShort(),n.xAvgCharWidth=r.parseShort(),n.usWeightClass=r.parseUShort(),n.usWidthClass=r.parseUShort(),n.fsType=r.parseUShort(),n.ySubscriptXSize=r.parseShort(),n.ySubscriptYSize=r.parseShort(),n.ySubscriptXOffset=r.parseShort(),n.ySubscriptYOffset=r.parseShort(),n.ySuperscriptXSize=r.parseShort(),n.ySuperscriptYSize=r.parseShort(),n.ySuperscriptXOffset=r.parseShort(),n.ySuperscriptYOffset=r.parseShort(),n.yStrikeoutSize=r.parseShort(),n.yStrikeoutPosition=r.parseShort(),n.sFamilyClass=r.parseShort(),n.panose=[];for(var i=0;i<10;i++)n.panose[i]=r.parseByte();return n.ulUnicodeRange1=r.parseULong(),n.ulUnicodeRange2=r.parseULong(),n.ulUnicodeRange3=r.parseULong(),n.ulUnicodeRange4=r.parseULong(),n.achVendID=String.fromCharCode(r.parseByte(),r.parseByte(),r.parseByte(),r.parseByte()),n.fsSelection=r.parseUShort(),n.usFirstCharIndex=r.parseUShort(),n.usLastCharIndex=r.parseUShort(),n.sTypoAscender=r.parseShort(),n.sTypoDescender=r.parseShort(),n.sTypoLineGap=r.parseShort(),n.usWinAscent=r.parseUShort(),n.usWinDescent=r.parseUShort(),1<=n.version&&(n.ulCodePageRange1=r.parseULong(),n.ulCodePageRange2=r.parseULong()),2<=n.version&&(n.sxHeight=r.parseShort(),n.sCapHeight=r.parseShort(),n.usDefaultChar=r.parseUShort(),n.usBreakChar=r.parseUShort(),n.usMaxContent=r.parseUShort()),n},ot=function(e){return new K.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],e)},at=function(e){for(var t=0;t<rt.length;t+=1){var n=rt[t];if(e>=n.begin&&e<n.end)return t}return-1},st=function(e,t){var n={},r=new ne.Parser(e,t);switch(n.version=r.parseVersion(),n.italicAngle=r.parseFixed(),n.underlinePosition=r.parseShort(),n.underlineThickness=r.parseShort(),n.isFixedPitch=r.parseULong(),n.minMemType42=r.parseULong(),n.maxMemType42=r.parseULong(),n.minMemType1=r.parseULong(),n.maxMemType1=r.parseULong(),n.version){case 1:n.names=le.slice();break;case 2:n.numberOfGlyphs=r.parseUShort(),n.glyphNameIndex=new Array(n.numberOfGlyphs);for(var i=0;i<n.numberOfGlyphs;i++)n.glyphNameIndex[i]=r.parseUShort();n.names=[];for(var o,a=0;a<n.numberOfGlyphs;a++)n.glyphNameIndex[a]>=le.length&&(o=r.parseChar(),n.names.push(r.parseString(o)));break;case 2.5:n.numberOfGlyphs=r.parseUShort(),n.offset=new Array(n.numberOfGlyphs);for(var s=0;s<n.numberOfGlyphs;s++)n.offset[s]=r.parseChar()}return n},lt=function(){return new K.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])},ct=new Array(9),ut=(ct[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(ee.coverage),deltaGlyphId:this.parseUShort()}:2===t?{substFormat:2,coverage:this.parsePointer(ee.coverage),substitute:this.parseOffset16List()}:void C.assert(!1,"0x"+e.toString(16)+": lookup type 1 format must be 1 or 2.")},ct[2]=function(){var e=this.parseUShort();return C.argument(1===e,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ee.coverage),sequences:this.parseListOfLists()}},ct[3]=function(){var e=this.parseUShort();return C.argument(1===e,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ee.coverage),alternateSets:this.parseListOfLists()}},ct[4]=function(){var e=this.parseUShort();return C.argument(1===e,"GSUB ligature table identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ee.coverage),ligatureSets:this.parseListOfLists((function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}}))}},{sequenceIndex:ee.uShort,lookupListIndex:ee.uShort});ct[5]=function(){var e,t,n=this.offset+this.relativeOffset,r=this.parseUShort();return 1===r?{substFormat:r,coverage:this.parsePointer(ee.coverage),ruleSets:this.parseListOfLists((function(){var e=this.parseUShort(),t=this.parseUShort();return{input:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,ut)}}))}:2===r?{substFormat:r,coverage:this.parsePointer(ee.coverage),classDef:this.parsePointer(ee.classDef),classSets:this.parseListOfLists((function(){var e=this.parseUShort(),t=this.parseUShort();return{classes:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,ut)}}))}:3===r?(e=this.parseUShort(),t=this.parseUShort(),{substFormat:r,coverages:this.parseList(e,ee.pointer(ee.coverage)),lookupRecords:this.parseRecordList(t,ut)}):void C.assert(!1,"0x"+n.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},ct[6]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(ee.coverage),chainRuleSets:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(ut)}}))}:2===t?{substFormat:2,coverage:this.parsePointer(ee.coverage),backtrackClassDef:this.parsePointer(ee.classDef),inputClassDef:this.parsePointer(ee.classDef),lookaheadClassDef:this.parsePointer(ee.classDef),chainClassSet:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(ut)}}))}:3===t?{substFormat:3,backtrackCoverage:this.parseList(ee.pointer(ee.coverage)),inputCoverage:this.parseList(ee.pointer(ee.coverage)),lookaheadCoverage:this.parseList(ee.pointer(ee.coverage)),lookupRecords:this.parseRecordList(ut)}:void C.assert(!1,"0x"+e.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},ct[7]=function(){var e=this.parseUShort(),t=(C.argument(1===e,"GSUB Extension Substitution subtable identifier-format must be 1"),e=this.parseUShort(),new ee(this.data,this.offset+this.parseULong()));return{substFormat:1,lookupType:e,extension:ct[e].call(t)}},ct[8]=function(){var e=this.parseUShort();return C.argument(1===e,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ee.coverage),backtrackCoverage:this.parseList(ee.pointer(ee.coverage)),lookaheadCoverage:this.parseList(ee.pointer(ee.coverage)),substitutes:this.parseUShortList()}};var pt=new Array(9);pt[1]=function(e){return 1===e.substFormat?new K.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new K.Coverage(e.coverage)},{name:"deltaGlyphID",type:"USHORT",value:e.deltaGlyphId}]):new K.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new K.Coverage(e.coverage)}].concat(K.ushortList("substitute",e.substitute)))},pt[3]=function(e){return C.assert(1===e.substFormat,"Lookup type 3 substFormat must be 1."),new K.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new K.Coverage(e.coverage)}].concat(K.tableList("altSet",e.alternateSets,(function(e){return new K.Table("alternateSetTable",K.ushortList("alternate",e))}))))},pt[4]=function(e){return C.assert(1===e.substFormat,"Lookup type 4 substFormat must be 1."),new K.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new K.Coverage(e.coverage)}].concat(K.tableList("ligSet",e.ligatureSets,(function(e){return new K.Table("ligatureSetTable",K.tableList("ligature",e,(function(e){return new K.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:e.ligGlyph}].concat(K.ushortList("component",e.components,e.components.length+1)))})))}))))};var dt=function(e,t){return t=(e=new ee(e,t=t||0)).parseVersion(1),C.argument(1===t||1.1===t,"Unsupported GSUB table version."),1===t?{version:t,scripts:e.parseScriptList(),features:e.parseFeatureList(),lookups:e.parseLookupList(ct)}:{version:t,scripts:e.parseScriptList(),features:e.parseFeatureList(),lookups:e.parseLookupList(ct),variations:e.parseFeatureVariationsList()}},ht=function(e){return new K.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new K.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new K.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new K.LookupList(e.lookups,pt)}])},mt=function(e,t){for(var n=new ne.Parser(e,t),r=n.parseULong(),i=(C.argument(1===r,"Unsupported META table version."),n.parseULong(),n.parseULong(),n.parseULong()),o={},a=0;a<i;a++){var s=n.parseTag(),l=n.parseULong(),c=n.parseULong();l=O.UTF8(e,t+l,c),o[s]=l}return o},ft=function(e){var t,n=Object.keys(e).length,r="",i=16+12*n,o=new K.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:i},{name:"numTags",type:"ULONG",value:n}]);for(t in e){var a=r.length;r+=e[t],o.fields.push({name:"tag "+t,type:"TAG",value:t}),o.fields.push({name:"offset "+t,type:"ULONG",value:i+a}),o.fields.push({name:"length "+t,type:"ULONG",value:e[t].length})}return o.fields.push({name:"stringPool",type:"CHARARRAY",value:r}),o};function gt(e){return Math.log(e)/Math.log(2)|0}function yt(e){for(;e.length%4!=0;)e.push(0);for(var t=0,n=0;n<e.length;n+=4)t+=(e[n]<<24)+(e[n+1]<<16)+(e[n+2]<<8)+e[n+3];return t%Math.pow(2,32)}function _t(e,t,n,r){return new K.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==e?e:""},{name:"checkSum",type:"ULONG",value:void 0!==t?t:0},{name:"offset",type:"ULONG",value:void 0!==n?n:0},{name:"length",type:"ULONG",value:void 0!==r?r:0}])}function vt(e){for(var t=new K.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),n=(t.tables=e,t.numTables=e.length,Math.pow(2,gt(t.numTables))),r=(t.searchRange=16*n,t.entrySelector=gt(n),t.rangeShift=16*t.numTables-t.searchRange,[]),i=[],o=t.sizeOf()+_t().sizeOf()*t.numTables;o%4!=0;)o+=1,i.push({name:"padding",type:"BYTE",value:0});for(var a=0;a<e.length;a+=1){var s=e[a],l=(C.argument(4===s.tableName.length,"Table name"+s.tableName+" is invalid."),s.sizeOf()),c=_t(s.tableName,yt(s.encode()),o,l);for(r.push({name:c.tag+" Table Record",type:"RECORD",value:c}),i.push({name:s.tableName+" table",type:"RECORD",value:s}),o+=l,C.argument(!isNaN(o),"Something went wrong calculating the offset.");o%4!=0;)o+=1,i.push({name:"padding",type:"BYTE",value:0})}return r.sort((function(e,t){return e.value.tag>t.value.tag?1:-1})),t.fields=t.fields.concat(r),t.fields=t.fields.concat(i),t}function bt(e,t,n){for(var r=0;r<t.length;r+=1){var i=e.charToGlyphIndex(t[r]);if(0<i)return e.glyphs.get(i).getMetrics()}return n}function wt(e,t){for(var n=0,r=e.length-1;n<=r;){var i=n+r>>>1,o=e[i].tag;if(o===t)return i;o<t?n=1+i:r=i-1}return-n-1}function xt(e,t){for(var n=0,r=e.length-1;n<=r;){var i=n+r>>>1,o=e[i];if(o===t)return i;o<t?n=1+i:r=i-1}return-n-1}function St(e,t){for(var n=0,r=e.length-1;n<=r;){var i,o=n+r>>>1,a=(i=e[o]).start;if(a===t)return i;a<t?n=1+o:r=o-1}if(0<n)return t>(i=e[n-1]).end?0:i}function Tt(e,t){this.font=e,this.tableName=t}function Et(e){Tt.call(this,e,"gpos")}function It(e){Tt.call(this,e,"gsub")}function kt(e,t,n){for(var r=e.subtables,i=0;i<r.length;i++){var o=r[i];if(o.substFormat===t)return o}if(n)return r.push(n),n}function jt(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;++r)n[r]=e[r];return t}function At(e,t){if(!e)throw t}function Ct(e,t,n,r,i){var o=0<(t&r)?(o=e.parseByte(),n+(o=t&i?o:-o)):0<(t&i)?n:n+e.parseShort();return o}function Ot(e,t,n){var r,i=new ne.Parser(t,n);if(e.numberOfContours=i.parseShort(),e._xMin=i.parseShort(),e._yMin=i.parseShort(),e._xMax=i.parseShort(),e._yMax=i.parseShort(),0<e.numberOfContours){for(var o=e.endPointIndices=[],a=0;a<e.numberOfContours;a+=1)o.push(i.parseUShort());e.instructionLength=i.parseUShort(),e.instructions=[];for(var s=0;s<e.instructionLength;s+=1)e.instructions.push(i.parseByte());for(var l=o[o.length-1]+1,c=[],u=0;u<l;u+=1)if(r=i.parseByte(),c.push(r),0<(8&r))for(var p=i.parseByte(),d=0;d<p;d+=1)c.push(r),u+=1;if(C.argument(c.length===l,"Bad flags."),0<o.length){var h,m=[];if(0<l){for(var f=0;f<l;f+=1)r=c[f],(h={}).onCurve=!!(1&r),h.lastPointOfContour=0<=o.indexOf(f),m.push(h);for(var g=0,y=0;y<l;y+=1)r=c[y],(h=m[y]).x=Ct(i,r,g,2,16),g=h.x;for(var _=0,v=0;v<l;v+=1)r=c[v],(h=m[v]).y=Ct(i,r,_,4,32),_=h.y}e.points=m}else e.points=[]}else if(0===e.numberOfContours)e.points=[];else{e.isComposite=!0,e.points=[],e.components=[];for(var b=!0;b;){c=i.parseUShort();var w={glyphIndex:i.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&c)?0<(2&c)?(w.dx=i.parseShort(),w.dy=i.parseShort()):w.matchedPoints=[i.parseUShort(),i.parseUShort()]:0<(2&c)?(w.dx=i.parseChar(),w.dy=i.parseChar()):w.matchedPoints=[i.parseByte(),i.parseByte()],0<(8&c)?w.xScale=w.yScale=i.parseF2Dot14():0<(64&c)?(w.xScale=i.parseF2Dot14(),w.yScale=i.parseF2Dot14()):0<(128&c)&&(w.xScale=i.parseF2Dot14(),w.scale01=i.parseF2Dot14(),w.scale10=i.parseF2Dot14(),w.yScale=i.parseF2Dot14()),e.components.push(w),b=!!(32&c)}if(256&c){e.instructionLength=i.parseUShort(),e.instructions=[];for(var x=0;x<e.instructionLength;x+=1)e.instructions.push(i.parseByte())}}}function Mt(e,t){for(var n=[],r=0;r<e.length;r+=1){var i=e[r];i={x:t.xScale*i.x+t.scale01*i.y+t.dx,y:t.scale10*i.x+t.yScale*i.y+t.dy,onCurve:i.onCurve,lastPointOfContour:i.lastPointOfContour},n.push(i)}return n}function Nt(e){var t=new k;if(e)for(var n=function(e){for(var t=[],n=[],r=0;r<e.length;r+=1){var i=e[r];n.push(i),i.lastPointOfContour&&(t.push(n),n=[])}return C.argument(0===n.length,"There are still points left in the current contour."),t}(e),r=0;r<n.length;++r){var i,o=n[r],a=o[o.length-1],s=o[0];a.onCurve?t.moveTo(a.x,a.y):s.onCurve?t.moveTo(s.x,s.y):(i={x:.5*(a.x+s.x),y:.5*(a.y+s.y)},t.moveTo(i.x,i.y));for(var l=0;l<o.length;++l){var c,u=a;a=s,s=o[(l+1)%o.length],a.onCurve?t.lineTo(a.x,a.y):(c=s,u.onCurve||(a.x,u.x,a.y,u.y),s.onCurve||(c={x:.5*(a.x+s.x),y:.5*(a.y+s.y)}),t.quadraticCurveTo(a.x,a.y,c.x,c.y))}t.closePath()}return t}function Rt(e,t){if(t.isComposite)for(var n=0;n<t.components.length;n+=1){var r=t.components[n],i=e.get(r.glyphIndex);if(i.getPath(),i.points){var o=void 0;if(void 0===r.matchedPoints)o=Mt(i.points,r);else{if(r.matchedPoints[0]>t.points.length-1||r.matchedPoints[1]>i.points.length-1)throw Error("Matched points out of range in "+t.name);var a=t.points[r.matchedPoints[0]],s=Mt([s=i.points[r.matchedPoints[1]]],r={xScale:r.xScale,scale01:r.scale01,scale10:r.scale10,yScale:r.yScale,dx:0,dy:0})[0];r.dx=a.x-s.x,r.dy=a.y-s.y,o=Mt(i.points,r)}t.points=t.points.concat(o)}}return Nt(t.points)}(Et.prototype=Tt.prototype={searchTag:wt,binSearch:xt,getTable:function(e){var t=this.font.tables[this.tableName];return!t&&e?this.font.tables[this.tableName]=this.createDefaultTable():t},getScriptNames:function(){var e=this.getTable();return e?e.scripts.map((function(e){return e.tag})):[]},getDefaultScriptName:function(){var e=this.getTable();if(e){for(var t=!1,n=0;n<e.scripts.length;n++){var r=e.scripts[n].tag;if("DFLT"===r)return r;"latn"===r&&(t=!0)}return t?"latn":void 0}},getScriptTable:function(e,t){var n,r=this.getTable(t);if(r)return n=r.scripts,0<=(r=wt(r.scripts,e=e||"DFLT"))?n[r].script:t?(n.splice(-1-r,0,t={tag:e,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),t.script):void 0},getLangSysTable:function(e,t,n){var r;if(e=this.getScriptTable(e,n))return t&&"dflt"!==t&&"DFLT"!==t?0<=(r=wt(e.langSysRecords,t))?e.langSysRecords[r].langSys:n?(e.langSysRecords.splice(-1-r,0,n={tag:t,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),n.langSys):void 0:e.defaultLangSys},getFeatureTable:function(e,t,n,r){if(e=this.getLangSysTable(e,t,r)){for(var i,o=e.featureIndexes,a=this.font.tables[this.tableName].features,s=0;s<o.length;s++)if((i=a[o[s]]).tag===n)return i.feature;if(r)return t=a.length,C.assert(0===t||n>=a[t-1].tag,"Features must be added in alphabetical order."),a.push(i={tag:n,feature:{params:0,lookupListIndexes:[]}}),o.push(t),i.feature}},getLookupTables:function(e,t,n,r,i){var o=[];if(e=this.getFeatureTable(e,t,n,i)){for(var a,s=e.lookupListIndexes,l=this.font.tables[this.tableName].lookups,c=0;c<s.length;c++)(a=l[s[c]]).lookupType===r&&o.push(a);if(0===o.length&&i)return t=l.length,l.push(a={lookupType:r,lookupFlag:0,subtables:[],markFilteringSet:void 0}),s.push(t),[a]}return o},getGlyphClass:function(e,t){switch(e.format){case 1:return e.startGlyph<=t&&t<e.startGlyph+e.classes.length?e.classes[t-e.startGlyph]:0;case 2:var n=St(e.ranges,t);return n?n.classId:0}},getCoverageIndex:function(e,t){switch(e.format){case 1:var n=xt(e.glyphs,t);return 0<=n?n:-1;case 2:return(n=St(e.ranges,t))?n.index+t-n.start:-1}},expandCoverage:function(e){if(1===e.format)return e.glyphs;for(var t=[],n=e.ranges,r=0;r<n.length;r++)for(var i=n[r],o=i.start,a=i.end,s=o;s<=a;s++)t.push(s);return t}}).init=function(){var e=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(e)},Et.prototype.getKerningValue=function(e,t,n){for(var r=0;r<e.length;r++)for(var i=e[r].subtables,o=0;o<i.length;o++){var a=i[o],s=this.getCoverageIndex(a.coverage,t);if(!(s<0))switch(a.posFormat){case 1:for(var l=a.pairSets[s],c=0;c<l.length;c++){var u=l[c];if(u.secondGlyph===n)return u.value1&&u.value1.xAdvance||0}break;case 2:var p=this.getGlyphClass(a.classDef1,t),d=this.getGlyphClass(a.classDef2,n);return(p=a.classRecords[p][d]).value1&&p.value1.xAdvance||0}}return 0},Et.prototype.getKerningTables=function(e,t){if(this.font.tables.gpos)return this.getLookupTables(e,t,"kern",2)},(It.prototype=Tt.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},It.prototype.getSingle=function(e,t,n){for(var r=[],i=this.getLookupTables(t,n,e,1),o=0;o<i.length;o++)for(var a=i[o].subtables,s=0;s<a.length;s++){var l=a[s],c=this.expandCoverage(l.coverage),u=void 0;if(1===l.substFormat){var p=l.deltaGlyphId;for(u=0;u<c.length;u++){var d=c[u];r.push({sub:d,by:d+p})}}else{var h=l.substitute;for(u=0;u<c.length;u++)r.push({sub:c[u],by:h[u]})}}return r},It.prototype.getAlternates=function(e,t,n){for(var r=[],i=this.getLookupTables(t,n,e,3),o=0;o<i.length;o++)for(var a=i[o].subtables,s=0;s<a.length;s++)for(var l=a[s],c=this.expandCoverage(l.coverage),u=l.alternateSets,p=0;p<c.length;p++)r.push({sub:c[p],by:u[p]});return r},It.prototype.getLigatures=function(e,t,n){for(var r=[],i=this.getLookupTables(t,n,e,4),o=0;o<i.length;o++)for(var a=i[o].subtables,s=0;s<a.length;s++)for(var l=a[s],c=this.expandCoverage(l.coverage),u=l.ligatureSets,p=0;p<c.length;p++)for(var d=c[p],h=u[p],m=0;m<h.length;m++){var f=h[m];r.push({sub:[d].concat(f.components),by:f.ligGlyph})}return r},It.prototype.addSingle=function(e,t,n,r){n=kt(this.getLookupTables(n,r,e,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),C.assert(1===n.coverage.format,"Ligature: unable to modify coverage table format "+n.coverage.format),r=t.sub,(e=this.binSearch(n.coverage.glyphs,r))<0&&(n.coverage.glyphs.splice(e=-1-e,0,r),n.substitute.splice(e,0,0)),n.substitute[e]=t.by},It.prototype.addAlternate=function(e,t,n,r){n=kt(this.getLookupTables(n,r,e,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),C.assert(1===n.coverage.format,"Ligature: unable to modify coverage table format "+n.coverage.format),r=t.sub,(e=this.binSearch(n.coverage.glyphs,r))<0&&(n.coverage.glyphs.splice(e=-1-e,0,r),n.alternateSets.splice(e,0,0)),n.alternateSets[e]=t.by},It.prototype.addLigature=function(e,t,n,r){(r=(n=this.getLookupTables(n,r,e,4,!0)[0]).subtables[0])||(n.subtables[0]=r={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),C.assert(1===r.coverage.format,"Ligature: unable to modify coverage table format "+r.coverage.format),e=t.sub[0];var i=t.sub.slice(1);if(n={ligGlyph:t.by,components:i},0<=(t=this.binSearch(r.coverage.glyphs,e))){for(var o=r.ligatureSets[t],a=0;a<o.length;a++)if(function(e,t){var n=e.length;if(n===t.length){for(var r=0;r<n;r++)if(e[r]!==t[r])return;return 1}}(o[a].components,i))return;o.push(n)}else r.coverage.glyphs.splice(t=-1-t,0,e),r.ligatureSets.splice(t,0,[n])},It.prototype.getFeature=function(e,t,n){if(/ss\d\d/.test(e))return this.getSingle(e,t,n);switch(e){case"aalt":case"salt":return this.getSingle(e,t,n).concat(this.getAlternates(e,t,n));case"dlig":case"liga":case"rlig":return this.getLigatures(e,t,n)}},It.prototype.add=function(e,t,n,r){if(/ss\d\d/.test(e))return this.addSingle(e,t,n,r);switch(e){case"aalt":case"salt":return"number"==typeof t.by?this.addSingle(e,t,n,r):this.addAlternate(e,t,n,r);case"dlig":case"liga":case"rlig":return this.addLigature(e,t,n,r)}};var Pt={getPath:Nt,parse:function(e,t,n,r){for(var i=new ye.GlyphSet(r),o=0;o<n.length-1;o+=1){var a=n[o];a!==n[o+1]?i.push(o,ye.ttfGlyphLoader(r,o,Ot,e,t+a,Rt)):i.push(o,ye.glyphLoader(r,o))}return i}};function Dt(e){this.font=e,this.getCommands=function(e){return Pt.getPath(e).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function Lt(e){return e}function Ft(e){return Math.sign(e)*Math.round(Math.abs(e))}function Bt(e){return Math.sign(e)*Math.round(Math.abs(2*e))/2}function Ut(e){return Math.sign(e)*(Math.round(Math.abs(e)+.5)-.5)}function Vt(e){return Math.sign(e)*Math.ceil(Math.abs(e))}function Gt(e){return Math.sign(e)*Math.floor(Math.abs(e))}function zt(e){var t=this.srPeriod,n=this.srPhase,r=1;return e<0&&(e=-e,r=-1),e+=this.srThreshold-n,e=Math.trunc(e/t)*t,(e+=n)<0?n*r:e*r}var $t={x:1,y:0,axis:"x",distance:function(e,t,n,r){return(n?e.xo:e.x)-(r?t.xo:t.x)},interpolate:function(e,t,n,r){var i,o,a,s,l,c,u;if(!r||r===this)return i=e.xo-t.xo,o=e.xo-n.xo,l=t.x-t.xo,c=n.x-n.xo,0===(u=(a=Math.abs(i))+(s=Math.abs(o)))?void(e.x=e.xo+(l+c)/2):void(e.x=e.xo+(l*s+c*a)/u);i=r.distance(e,t,!0,!0),o=r.distance(e,n,!0,!0),l=r.distance(t,t,!1,!0),c=r.distance(n,n,!1,!0),0===(u=(a=Math.abs(i))+(s=Math.abs(o)))?$t.setRelative(e,e,(l+c)/2,r,!0):$t.setRelative(e,e,(l*s+c*a)/u,r,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(e,t,n,r,i){var o,a;r&&r!==this?(o=i?t.xo:t.x,a=i?t.yo:t.y,o+=n*r.x,a+=n*r.y,e.x=o+(e.y-a)/r.normalSlope):e.x=(i?t.xo:t.x)+n},slope:0,touch:function(e){e.xTouched=!0},touched:function(e){return e.xTouched},untouch:function(e){e.xTouched=!1}},qt={x:0,y:1,axis:"y",distance:function(e,t,n,r){return(n?e.yo:e.y)-(r?t.yo:t.y)},interpolate:function(e,t,n,r){var i,o,a,s,l,c,u;if(!r||r===this)return i=e.yo-t.yo,o=e.yo-n.yo,l=t.y-t.yo,c=n.y-n.yo,0===(u=(a=Math.abs(i))+(s=Math.abs(o)))?void(e.y=e.yo+(l+c)/2):void(e.y=e.yo+(l*s+c*a)/u);i=r.distance(e,t,!0,!0),o=r.distance(e,n,!0,!0),l=r.distance(t,t,!1,!0),c=r.distance(n,n,!1,!0),0===(u=(a=Math.abs(i))+(s=Math.abs(o)))?qt.setRelative(e,e,(l+c)/2,r,!0):qt.setRelative(e,e,(l*s+c*a)/u,r,!0)},normalSlope:0,setRelative:function(e,t,n,r,i){var o,a;r&&r!==this?(o=i?t.xo:t.x,a=i?t.yo:t.y,o+=n*r.x,a+=n*r.y,e.y=a+r.normalSlope*(e.x-o)):e.y=(i?t.yo:t.y)+n},slope:Number.POSITIVE_INFINITY,touch:function(e){e.yTouched=!0},touched:function(e){return e.yTouched},untouch:function(e){e.yTouched=!1}};function Ht(e,t){this.x=e,this.y=t,this.axis=void 0,this.slope=t/e,this.normalSlope=-e/t,Object.freeze(this)}function Wt(e,t){var n=Math.sqrt(e*e+t*t);return t/=n,1==(e/=n)&&0===t?$t:0===e&&1===t?qt:new Ht(e,t)}function Kt(e,t,n,r){this.x=this.xo=Math.round(64*e)/64,this.y=this.yo=Math.round(64*t)/64,this.lastPointOfContour=n,this.onCurve=r,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze($t),Object.freeze(qt),Ht.prototype.distance=function(e,t,n,r){return this.x*$t.distance(e,t,n,r)+this.y*qt.distance(e,t,n,r)},Ht.prototype.interpolate=function(e,t,n,r){var i=r.distance(e,t,!0,!0),o=r.distance(e,n,!0,!0),a=(t=r.distance(t,t,!1,!0),n=r.distance(n,n,!1,!0),(i=Math.abs(i))+(o=Math.abs(o)));0===a?this.setRelative(e,e,(t+n)/2,r,!0):this.setRelative(e,e,(t*o+n*i)/a,r,!0)},Ht.prototype.setRelative=function(e,t,n,r,i){var o=i?t.xo:t.x,a=(i=i?t.yo:t.y,t=o+n*(r=r||this).x,o=i+n*r.y,i=r.normalSlope,n=this.slope,r=e.x,e.y);e.x=(n*r-i*t+o-a)/(n-i),e.y=n*(e.x-r)+a},Ht.prototype.touch=function(e){e.xTouched=!0,e.yTouched=!0},Kt.prototype.nextTouched=function(e){for(var t=this.nextPointOnContour;!e.touched(t)&&t!==this;)t=t.nextPointOnContour;return t},Kt.prototype.prevTouched=function(e){for(var t=this.prevPointOnContour;!e.touched(t)&&t!==this;)t=t.prevPointOnContour;return t};var Xt=Object.freeze(new Kt(0,0)),Yt={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function Jt(e,t){switch(this.env=e,this.stack=[],this.prog=t,e){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=$t,this.round=Ft}}function Qt(e){for(var t=e.tZone=new Array(e.gZone.length),n=0;n<t.length;n++)t[n]=new Kt(0,0)}function Zt(e,t){var n,r=e.prog,i=e.ip,o=1;do{if(88===(n=r[++i]))o++;else if(89===n)o--;else if(64===n)i+=r[i+1]+1;else if(65===n)i+=2*r[i+1]+1;else if(176<=n&&n<=183)i+=n-176+1;else if(184<=n&&n<=191)i+=2*(n-184+1);else if(t&&1===o&&27===n)break}while(0<o);e.ip=i}function en(e,n){t.DEBUG&&console.log(n.step,"SVTCA["+e.axis+"]"),n.fv=n.pv=n.dpv=e}function tn(e,n){t.DEBUG&&console.log(n.step,"SPVTCA["+e.axis+"]"),n.pv=n.dpv=e}function nn(e,n){t.DEBUG&&console.log(n.step,"SFVTCA["+e.axis+"]"),n.fv=e}function rn(e,n){var r,i=(o=n.stack).pop(),o=o.pop(),a=n.z2[i],s=n.z1[o];t.DEBUG&&console.log("SPVTL["+e+"]",i,o),i=e?(r=a.y-s.y,s.x-a.x):(r=s.x-a.x,s.y-a.y),n.pv=n.dpv=Wt(r,i)}function on(e,n){var r,i=(o=n.stack).pop(),o=o.pop(),a=n.z2[i],s=n.z1[o];t.DEBUG&&console.log("SFVTL["+e+"]",i,o),i=e?(r=a.y-s.y,s.x-a.x):(r=s.x-a.x,s.y-a.y),n.fv=Wt(r,i)}function an(e){t.DEBUG&&console.log(e.step,"POP[]"),e.stack.pop()}function sn(e,n){var r=n.stack.pop(),i=n.z0[r],o=n.fv,a=n.pv,s=(t.DEBUG&&console.log(n.step,"MDAP["+e+"]",r),a.distance(i,Xt));e&&(s=n.round(s)),o.setRelative(i,Xt,s,a),o.touch(i),n.rp0=n.rp1=r}function ln(e,n){var r,i,o,a=n.z2,s=a.length-2;t.DEBUG&&console.log(n.step,"IUP["+e.axis+"]");for(var l=0;l<s;l++)r=a[l],e.touched(r)||(i=r.prevTouched(e))!==r&&(i===(o=r.nextTouched(e))&&e.setRelative(r,r,e.distance(i,i,!1,!0),e,!0),e.interpolate(r,i,o,e))}function cn(e,n){for(var r=n.stack,i=e?n.rp1:n.rp2,o=(e?n.z0:n.z1)[i],a=n.fv,s=n.pv,l=n.loop,c=n.z2;l--;){var u=r.pop(),p=c[u],d=s.distance(o,o,!1,!0);a.setRelative(p,p,d,s),a.touch(p),t.DEBUG&&console.log(n.step,(1<n.loop?"loop "+(n.loop-l)+": ":"")+"SHP["+(e?"rp1":"rp2")+"]",u)}n.loop=1}function un(e,n){for(var r=n.stack,i=e?n.rp1:n.rp2,o=(e?n.z0:n.z1)[i],a=n.fv,s=n.pv,l=(i=r.pop(),n.z2[n.contours[i]]),c=l,u=(t.DEBUG&&console.log(n.step,"SHC["+e+"]",i),s.distance(o,o,!1,!0));c!==o&&a.setRelative(c,c,u,s),(c=c.nextPointOnContour)!==l;);}function pn(e,n){var r,i,o=n.stack,a=e?n.rp1:n.rp2,s=(a=(e?n.z0:n.z1)[a],n.fv),l=n.pv;switch(o=o.pop(),t.DEBUG&&console.log(n.step,"SHZ["+e+"]",o),o){case 0:r=n.tZone;break;case 1:r=n.gZone;break;default:throw new Error("Invalid zone")}for(var c=l.distance(a,a,!1,!0),u=r.length-2,p=0;p<u;p++)i=r[p],s.setRelative(i,i,c,l)}function dn(e,n){var r=(i=n.stack).pop()/64,i=i.pop(),o=n.z1[i],a=n.z0[n.rp0],s=n.fv,l=n.pv;s.setRelative(o,a,r,l),s.touch(o),t.DEBUG&&console.log(n.step,"MSIRP["+e+"]",r,i),n.rp1=n.rp0,n.rp2=i,e&&(n.rp0=i)}function hn(e,n){var r=(i=n.stack).pop(),i=i.pop(),o=n.z0[i],a=n.fv,s=n.pv,l=n.cvt[r];t.DEBUG&&console.log(n.step,"MIAP["+e+"]",r,"(",l,")",i),r=s.distance(o,Xt),e&&(Math.abs(r-l)<n.cvCutIn&&(r=l),r=n.round(r)),a.setRelative(o,Xt,r,s),0===n.zp0&&(o.xo=o.x,o.yo=o.y),a.touch(o),n.rp0=n.rp1=i}function mn(e,n){var r=n.stack,i=r.pop(),o=n.z2[i];t.DEBUG&&console.log(n.step,"GC["+e+"]",i),r.push(64*n.dpv.distance(o,Xt,e,!1))}function fn(e,n){var r=(i=n.stack).pop(),i=i.pop(),o=n.z1[r],a=n.z0[i];a=n.dpv.distance(a,o,e,e),t.DEBUG&&console.log(n.step,"MD["+e+"]",r,i,"->",a),n.stack.push(Math.round(64*a))}function gn(e,n){var r=n.stack,i=r.pop(),o=n.fv,a=n.pv,s=n.ppem,l=n.deltaBase+16*(e-1),c=n.deltaShift,u=n.z0;t.DEBUG&&console.log(n.step,"DELTAP["+e+"]",i,r);for(var p=0;p<i;p++){var d=r.pop(),h=r.pop();l+((240&h)>>4)===s&&(0<=(h=(15&h)-8)&&h++,t.DEBUG&&console.log(n.step,"DELTAPFIX",d,"by",h*c),d=u[d],o.setRelative(d,d,h*c,a))}}function yn(e,n){var r=n.stack,i=r.pop();t.DEBUG&&console.log(n.step,"ROUND[]"),r.push(64*n.round(i/64))}function _n(e,n){var r=n.stack,i=r.pop(),o=n.ppem,a=n.deltaBase+16*(e-1),s=n.deltaShift;t.DEBUG&&console.log(n.step,"DELTAC["+e+"]",i,r);for(var l=0;l<i;l++){var c=r.pop(),u=r.pop();a+((240&u)>>4)===o&&(0<=(u=(15&u)-8)&&u++,u*=s,t.DEBUG&&console.log(n.step,"DELTACFIX",c,"by",u),n.cvt[c]+=u)}}function vn(e,n){var r,i=(o=n.stack).pop(),o=o.pop(),a=n.z2[i],s=n.z1[o];t.DEBUG&&console.log(n.step,"SDPVTL["+e+"]",i,o),i=e?(r=a.y-s.y,s.x-a.x):(r=s.x-a.x,s.y-a.y),n.dpv=Wt(r,i)}function bn(e,n){var r=n.stack,i=n.prog,o=n.ip;t.DEBUG&&console.log(n.step,"PUSHB["+e+"]");for(var a=0;a<e;a++)r.push(i[++o]);n.ip=o}function wn(e,n){var r=n.ip,i=n.prog,o=n.stack;t.DEBUG&&console.log(n.ip,"PUSHW["+e+"]");for(var a=0;a<e;a++){var s=i[++r]<<8|i[++r];32768&s&&(s=-(1+(65535^s))),o.push(s)}n.ip=r}function xn(e,n,r,i,o,a){var s,l,c=a.stack,u=e&&c.pop(),p=(c=c.pop(),a.rp0),d=(p=a.z0[p],a.z1[c]),h=a.minDis,m=a.fv,f=a.dpv,g=s=f.distance(d,p,!0,!0),y=0<=g?1:-1;g=Math.abs(g),e&&(l=a.cvt[u],i&&Math.abs(g-l)<a.cvCutIn&&(g=l)),r&&g<h&&(g=h),i&&(g=a.round(g)),m.setRelative(d,p,y*g,f),m.touch(d),t.DEBUG&&console.log(a.step,(e?"MIRP[":"MDRP[")+(n?"M":"m")+(r?">":"_")+(i?"R":"_")+(0===o?"Gr":1===o?"Bl":2===o?"Wh":"")+"]",e?u+"("+a.cvt[u]+","+l+")":"",c,"(d =",s,"->",y*g,")"),a.rp1=a.rp0,a.rp2=c,n&&(a.rp0=c)}Dt.prototype.exec=function(e,n){if("number"!=typeof n)throw new Error("Point size is not a number!");if(!(2<this._errorState)){var r=this.font,i=this._prepState;if(!i||i.ppem!==n){var o=this._fpgmState;if(!o){Jt.prototype=Yt,(o=this._fpgmState=new Jt("fpgm",r.tables.fpgm)).funcs=[],o.font=r,t.DEBUG&&(console.log("---EXEC FPGM---"),o.step=-1);try{En(o)}catch(e){return console.log("Hinting error in FPGM:"+e),void(this._errorState=3)}}Jt.prototype=o,(i=this._prepState=new Jt("prep",r.tables.prep)).ppem=n;var a=r.tables.cvt;if(a)for(var s=i.cvt=new Array(a.length),l=n/r.unitsPerEm,c=0;c<a.length;c++)s[c]=a[c]*l;else i.cvt=[];t.DEBUG&&(console.log("---EXEC PREP---"),i.step=-1);try{En(i)}catch(e){this._errorState<2&&console.log("Hinting error in PREP:"+e),this._errorState=2}}if(!(1<this._errorState))try{return Sn(e,i)}catch(e){this._errorState<1&&(console.log("Hinting error:"+e),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var Sn=function(e,n){var r=n.ppem/n.font.unitsPerEm,i=r,o=e.components;if(Jt.prototype=n,o){for(var a=n.font,s=[],l=[],c=0;c<o.length;c++){var u=o[c],p=a.glyphs.get(u.glyphIndex),d=new Jt("glyf",p.instructions);t.DEBUG&&(console.log("---EXEC COMP "+c+"---"),d.step=-1),Tn(p,d,r,i);for(var h=Math.round(u.dx*r),m=Math.round(u.dy*i),f=d.gZone,g=d.contours,y=0;y<f.length;y++){var _=f[y];_.xTouched=_.yTouched=!1,_.xo=_.x=_.x+h,_.yo=_.y=_.y+m}var v=s.length;s.push.apply(s,f);for(var b=0;b<g.length;b++)l.push(g[b]+v)}e.instructions&&!d.inhibitGridFit&&((d=new Jt("glyf",e.instructions)).gZone=d.z0=d.z1=d.z2=s,d.contours=l,s.push(new Kt(0,0),new Kt(Math.round(e.advanceWidth*r),0)),t.DEBUG&&(console.log("---EXEC COMPOSITE---"),d.step=-1),En(d),s.length-=2)}else d=new Jt("glyf",e.instructions),t.DEBUG&&(console.log("---EXEC GLYPH---"),d.step=-1),Tn(e,d,r,i),s=d.gZone;return s},Tn=function(e,n,r,i){for(var o,a,s,l=e.points||[],c=l.length,u=n.gZone=n.z0=n.z1=n.z2=[],p=n.contours=[],d=0;d<c;d++)o=l[d],u[d]=new Kt(o.x*r,o.y*i,o.lastPointOfContour,o.onCurve);for(var h=0;h<c;h++)o=u[h],a||(a=o,p.push(h)),o.lastPointOfContour?((o.nextPointOnContour=a).prevPointOnContour=o,a=void 0):(s=u[h+1],(o.nextPointOnContour=s).prevPointOnContour=o);if(!n.inhibitGridFit){if(t.DEBUG){console.log("PROCESSING GLYPH",n.stack);for(var m=0;m<c;m++)console.log(m,u[m].x,u[m].y)}if(u.push(new Kt(0,0),new Kt(Math.round(e.advanceWidth*r),0)),En(n),u.length-=2,t.DEBUG){console.log("FINISHED GLYPH",n.stack);for(var f=0;f<c;f++)console.log(f,u[f].x,u[f].y)}}},En=function(e){var n=e.prog;if(n){var r,i=n.length;for(e.ip=0;e.ip<i;e.ip++){if(t.DEBUG&&e.step++,!(r=In[n[e.ip]]))throw new Error("unknown instruction: 0x"+Number(n[e.ip]).toString(16));r(e)}}},In=[en.bind(void 0,qt),en.bind(void 0,$t),tn.bind(void 0,qt),tn.bind(void 0,$t),nn.bind(void 0,qt),nn.bind(void 0,$t),rn.bind(void 0,0),rn.bind(void 0,1),on.bind(void 0,0),on.bind(void 0,1),function(e){var n=(r=e.stack).pop(),r=r.pop();t.DEBUG&&console.log(e.step,"SPVFS[]",n,r),e.pv=e.dpv=Wt(r,n)},function(e){var n=(r=e.stack).pop(),r=r.pop();t.DEBUG&&console.log(e.step,"SPVFS[]",n,r),e.fv=Wt(r,n)},function(e){var n=e.stack,r=e.pv;t.DEBUG&&console.log(e.step,"GPV[]"),n.push(16384*r.x),n.push(16384*r.y)},function(e){var n=e.stack,r=e.fv;t.DEBUG&&console.log(e.step,"GFV[]"),n.push(16384*r.x),n.push(16384*r.y)},function(e){e.fv=e.pv,t.DEBUG&&console.log(e.step,"SFVTPV[]")},function(e){var n=(a=e.stack).pop(),r=a.pop(),i=a.pop(),o=a.pop(),a=a.pop(),s=e.z0,l=e.z1,c=s[n],u=(s=s[r],l[i]),p=(l=l[o],e=e.z2[a],t.DEBUG&&console.log("ISECT[], ",n,r,i,o,a),n=c.x,r=c.y,i=s.x,o=s.y,a=u.x,c=u.y,s=l.x,l=(n-i)*(c-(u=l.y))-(r-o)*(a-s),n*o-r*i),d=a*u-c*s;e.x=(p*(a-s)-d*(n-i))/l,e.y=(p*(c-u)-d*(r-o))/l},function(e){e.rp0=e.stack.pop(),t.DEBUG&&console.log(e.step,"SRP0[]",e.rp0)},function(e){e.rp1=e.stack.pop(),t.DEBUG&&console.log(e.step,"SRP1[]",e.rp1)},function(e){e.rp2=e.stack.pop(),t.DEBUG&&console.log(e.step,"SRP2[]",e.rp2)},function(e){var n=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZP0[]",n),e.zp0=n){case 0:e.tZone||Qt(e),e.z0=e.tZone;break;case 1:e.z0=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var n=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZP1[]",n),e.zp1=n){case 0:e.tZone||Qt(e),e.z1=e.tZone;break;case 1:e.z1=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var n=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZP2[]",n),e.zp2=n){case 0:e.tZone||Qt(e),e.z2=e.tZone;break;case 1:e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var n=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZPS[]",n),e.zp0=e.zp1=e.zp2=n){case 0:e.tZone||Qt(e),e.z0=e.z1=e.z2=e.tZone;break;case 1:e.z0=e.z1=e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){e.loop=e.stack.pop(),t.DEBUG&&console.log(e.step,"SLOOP[]",e.loop)},function(e){t.DEBUG&&console.log(e.step,"RTG[]"),e.round=Ft},function(e){t.DEBUG&&console.log(e.step,"RTHG[]"),e.round=Ut},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SMD[]",n),e.minDis=n/64},function(e){t.DEBUG&&console.log(e.step,"ELSE[]"),Zt(e,!1)},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"JMPR[]",n),e.ip+=n-1},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SCVTCI[]",n),e.cvCutIn=n/64},void 0,void 0,function(e){var n=e.stack;t.DEBUG&&console.log(e.step,"DUP[]"),n.push(n[n.length-1])},an,function(e){t.DEBUG&&console.log(e.step,"CLEAR[]"),e.stack.length=0},function(e){var n=e.stack,r=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"SWAP[]"),n.push(r),n.push(i)},function(e){var n=e.stack;t.DEBUG&&console.log(e.step,"DEPTH[]"),n.push(n.length)},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"CINDEX[]",r),n.push(n[n.length-r])},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"MINDEX[]",r),n.push(n.splice(n.length-r,1)[0])},void 0,void 0,void 0,function(e){var n=(i=e.stack).pop(),r=i.pop(),i=(t.DEBUG&&console.log(e.step,"LOOPCALL[]",n,r),e.ip),o=e.prog;e.prog=e.funcs[n];for(var a=0;a<r;a++)En(e),t.DEBUG&&console.log(++e.step,a+1<r?"next loopcall":"done loopcall",a);e.ip=i,e.prog=o},function(e){var n=e.stack.pop(),r=(t.DEBUG&&console.log(e.step,"CALL[]",n),e.ip),i=e.prog;e.prog=e.funcs[n],En(e),e.ip=r,e.prog=i,t.DEBUG&&console.log(++e.step,"returning from",n)},function(e){if("fpgm"!==e.env)throw new Error("FDEF not allowed here");var n=e.stack,r=e.prog,i=e.ip,o=(n=n.pop(),i);for(t.DEBUG&&console.log(e.step,"FDEF[]",n);45!==r[++i];);e.ip=i,e.funcs[n]=r.slice(o+1,i)},void 0,sn.bind(void 0,0),sn.bind(void 0,1),ln.bind(void 0,qt),ln.bind(void 0,$t),cn.bind(void 0,0),cn.bind(void 0,1),un.bind(void 0,0),un.bind(void 0,1),pn.bind(void 0,0),pn.bind(void 0,1),function(e){for(var n=e.stack,r=e.loop,i=e.fv,o=n.pop()/64,a=e.z2;r--;){var s=n.pop(),l=a[s];t.DEBUG&&console.log(e.step,(1<e.loop?"loop "+(e.loop-r)+": ":"")+"SHPIX[]",s,o),i.setRelative(l,l,o),i.touch(l)}e.loop=1},function(e){for(var n=e.stack,r=e.rp1,i=e.rp2,o=e.loop,a=e.z0[r],s=e.z1[i],l=e.fv,c=e.dpv,u=e.z2;o--;){var p=n.pop(),d=u[p];t.DEBUG&&console.log(e.step,(1<e.loop?"loop "+(e.loop-o)+": ":"")+"IP[]",p,r,"<->",i),l.interpolate(d,a,s,c),l.touch(d)}e.loop=1},dn.bind(void 0,0),dn.bind(void 0,1),function(e){for(var n=e.stack,r=e.rp0,i=e.z0[r],o=e.loop,a=e.fv,s=e.pv,l=e.z1;o--;){var c=n.pop(),u=l[c];t.DEBUG&&console.log(e.step,(1<e.loop?"loop "+(e.loop-o)+": ":"")+"ALIGNRP[]",c),a.setRelative(u,i,0,s),a.touch(u)}e.loop=1},function(e){t.DEBUG&&console.log(e.step,"RTDG[]"),e.round=Bt},hn.bind(void 0,0),hn.bind(void 0,1),function(e){var n=e.prog,r=e.ip,i=e.stack,o=n[++r];t.DEBUG&&console.log(e.step,"NPUSHB[]",o);for(var a=0;a<o;a++)i.push(n[++r]);e.ip=r},function(e){var n=e.ip,r=e.prog,i=e.stack,o=r[++n];t.DEBUG&&console.log(e.step,"NPUSHW[]",o);for(var a=0;a<o;a++){var s=r[++n]<<8|r[++n];32768&s&&(s=-(1+(65535^s))),i.push(s)}e.ip=n},function(e){var n=e.stack,r=(r=e.store)||(e.store=[]),i=n.pop();n=n.pop(),t.DEBUG&&console.log(e.step,"WS",i,n),r[n]=i},function(e){var n=e.stack,r=e.store,i=n.pop();t.DEBUG&&console.log(e.step,"RS",i),e=r&&r[i]||0,n.push(e)},function(e){var n=(r=e.stack).pop(),r=r.pop();t.DEBUG&&console.log(e.step,"WCVTP",n,r),e.cvt[r]=n/64},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"RCVT",r),n.push(64*e.cvt[r])},mn.bind(void 0,0),mn.bind(void 0,1),void 0,fn.bind(void 0,0),fn.bind(void 0,1),function(e){t.DEBUG&&console.log(e.step,"MPPEM[]"),e.stack.push(e.ppem)},void 0,function(e){t.DEBUG&&console.log(e.step,"FLIPON[]"),e.autoFlip=!0},void 0,void 0,function(e){var n=e.stack,r=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"LT[]",r,i),n.push(i<r?1:0)},function(e){var n=e.stack,r=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"LTEQ[]",r,i),n.push(i<=r?1:0)},function(e){var n=e.stack,r=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"GT[]",r,i),n.push(r<i?1:0)},function(e){var n=e.stack,r=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"GTEQ[]",r,i),n.push(r<=i?1:0)},function(e){var n=e.stack,r=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"EQ[]",r,i),n.push(r===i?1:0)},function(e){var n=e.stack,r=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"NEQ[]",r,i),n.push(r!==i?1:0)},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"ODD[]",r),n.push(Math.trunc(r)%2?1:0)},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"EVEN[]",r),n.push(Math.trunc(r)%2?0:1)},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"IF[]",n),n||(Zt(e,!0),t.DEBUG&&console.log(e.step,"EIF[]"))},function(e){t.DEBUG&&console.log(e.step,"EIF[]")},function(e){var n=e.stack,r=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"AND[]",r,i),n.push(r&&i?1:0)},function(e){var n=e.stack,r=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"OR[]",r,i),n.push(r||i?1:0)},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"NOT[]",r),n.push(r?0:1)},gn.bind(void 0,1),function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SDB[]",n),e.deltaBase=n},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SDS[]",n),e.deltaShift=Math.pow(.5,n)},function(e){var n=e.stack,r=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"ADD[]",r,i),n.push(i+r)},function(e){var n=e.stack,r=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"SUB[]",r,i),n.push(i-r)},function(e){var n=e.stack,r=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"DIV[]",r,i),n.push(64*i/r)},function(e){var n=e.stack,r=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"MUL[]",r,i),n.push(i*r/64)},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"ABS[]",r),n.push(Math.abs(r))},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"NEG[]",r),n.push(-r)},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"FLOOR[]",r),n.push(64*Math.floor(r/64))},function(e){var n=e.stack,r=n.pop();t.DEBUG&&console.log(e.step,"CEILING[]",r),n.push(64*Math.ceil(r/64))},yn.bind(void 0,0),yn.bind(void 0,1),yn.bind(void 0,2),yn.bind(void 0,3),void 0,void 0,void 0,void 0,function(e){var n=(r=e.stack).pop(),r=r.pop();t.DEBUG&&console.log(e.step,"WCVTF[]",n,r),e.cvt[r]=n*e.ppem/e.font.unitsPerEm},gn.bind(void 0,2),gn.bind(void 0,3),_n.bind(void 0,1),_n.bind(void 0,2),_n.bind(void 0,3),function(e){var n,r=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SROUND[]",r),e.round=zt,192&r){case 0:n=.5;break;case 64:n=1;break;case 128:n=2;break;default:throw new Error("invalid SROUND value")}switch(e.srPeriod=n,48&r){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*n;break;case 32:e.srPhase=.5*n;break;case 48:e.srPhase=.75*n;break;default:throw new Error("invalid SROUND value")}e.srThreshold=0==(r&=15)?0:(r/8-.5)*n},function(e){var n,r=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"S45ROUND[]",r),e.round=zt,192&r){case 0:n=Math.sqrt(2)/2;break;case 64:n=Math.sqrt(2);break;case 128:n=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(e.srPeriod=n,48&r){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*n;break;case 32:e.srPhase=.5*n;break;case 48:e.srPhase=.75*n;break;default:throw new Error("invalid S45ROUND value")}e.srThreshold=0==(r&=15)?0:(r/8-.5)*n},void 0,void 0,function(e){t.DEBUG&&console.log(e.step,"ROFF[]"),e.round=Lt},void 0,function(e){t.DEBUG&&console.log(e.step,"RUTG[]"),e.round=Vt},function(e){t.DEBUG&&console.log(e.step,"RDTG[]"),e.round=Gt},an,an,void 0,void 0,void 0,void 0,void 0,function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SCANCTRL[]",n)},vn.bind(void 0,0),vn.bind(void 0,1),function(e){var n=e.stack,r=n.pop(),i=0;t.DEBUG&&console.log(e.step,"GETINFO[]",r),1&r&&(i=35),32&r&&(i|=4096),n.push(i)},void 0,function(e){var n=e.stack,r=n.pop(),i=n.pop(),o=n.pop();t.DEBUG&&console.log(e.step,"ROLL[]"),n.push(i),n.push(r),n.push(o)},function(e){var n=e.stack,r=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"MAX[]",r,i),n.push(Math.max(i,r))},function(e){var n=e.stack,r=n.pop(),i=n.pop();t.DEBUG&&console.log(e.step,"MIN[]",r,i),n.push(Math.min(i,r))},function(e){var n=e.stack.pop();t.DEBUG&&console.log(e.step,"SCANTYPE[]",n)},function(e){var n=e.stack.pop(),r=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"INSTCTRL[]",n,r),n){case 1:return void(e.inhibitGridFit=!!r);case 2:return void(e.ignoreCvt=!!r);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,bn.bind(void 0,1),bn.bind(void 0,2),bn.bind(void 0,3),bn.bind(void 0,4),bn.bind(void 0,5),bn.bind(void 0,6),bn.bind(void 0,7),bn.bind(void 0,8),wn.bind(void 0,1),wn.bind(void 0,2),wn.bind(void 0,3),wn.bind(void 0,4),wn.bind(void 0,5),wn.bind(void 0,6),wn.bind(void 0,7),wn.bind(void 0,8),xn.bind(void 0,0,0,0,0,0),xn.bind(void 0,0,0,0,0,1),xn.bind(void 0,0,0,0,0,2),xn.bind(void 0,0,0,0,0,3),xn.bind(void 0,0,0,0,1,0),xn.bind(void 0,0,0,0,1,1),xn.bind(void 0,0,0,0,1,2),xn.bind(void 0,0,0,0,1,3),xn.bind(void 0,0,0,1,0,0),xn.bind(void 0,0,0,1,0,1),xn.bind(void 0,0,0,1,0,2),xn.bind(void 0,0,0,1,0,3),xn.bind(void 0,0,0,1,1,0),xn.bind(void 0,0,0,1,1,1),xn.bind(void 0,0,0,1,1,2),xn.bind(void 0,0,0,1,1,3),xn.bind(void 0,0,1,0,0,0),xn.bind(void 0,0,1,0,0,1),xn.bind(void 0,0,1,0,0,2),xn.bind(void 0,0,1,0,0,3),xn.bind(void 0,0,1,0,1,0),xn.bind(void 0,0,1,0,1,1),xn.bind(void 0,0,1,0,1,2),xn.bind(void 0,0,1,0,1,3),xn.bind(void 0,0,1,1,0,0),xn.bind(void 0,0,1,1,0,1),xn.bind(void 0,0,1,1,0,2),xn.bind(void 0,0,1,1,0,3),xn.bind(void 0,0,1,1,1,0),xn.bind(void 0,0,1,1,1,1),xn.bind(void 0,0,1,1,1,2),xn.bind(void 0,0,1,1,1,3),xn.bind(void 0,1,0,0,0,0),xn.bind(void 0,1,0,0,0,1),xn.bind(void 0,1,0,0,0,2),xn.bind(void 0,1,0,0,0,3),xn.bind(void 0,1,0,0,1,0),xn.bind(void 0,1,0,0,1,1),xn.bind(void 0,1,0,0,1,2),xn.bind(void 0,1,0,0,1,3),xn.bind(void 0,1,0,1,0,0),xn.bind(void 0,1,0,1,0,1),xn.bind(void 0,1,0,1,0,2),xn.bind(void 0,1,0,1,0,3),xn.bind(void 0,1,0,1,1,0),xn.bind(void 0,1,0,1,1,1),xn.bind(void 0,1,0,1,1,2),xn.bind(void 0,1,0,1,1,3),xn.bind(void 0,1,1,0,0,0),xn.bind(void 0,1,1,0,0,1),xn.bind(void 0,1,1,0,0,2),xn.bind(void 0,1,1,0,0,3),xn.bind(void 0,1,1,0,1,0),xn.bind(void 0,1,1,0,1,1),xn.bind(void 0,1,1,0,1,2),xn.bind(void 0,1,1,0,1,3),xn.bind(void 0,1,1,1,0,0),xn.bind(void 0,1,1,1,0,1),xn.bind(void 0,1,1,1,0,2),xn.bind(void 0,1,1,1,0,3),xn.bind(void 0,1,1,1,1,0),xn.bind(void 0,1,1,1,1,1),xn.bind(void 0,1,1,1,1,2),xn.bind(void 0,1,1,1,1,3)],kn=Array.from||function(e){return e.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function jn(e){(e=e||{}).empty||(At(e.familyName,"When creating a new Font object, familyName is required."),At(e.styleName,"When creating a new Font object, styleName is required."),At(e.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),At(e.ascender,"When creating a new Font object, ascender is required."),At(e.descender,"When creating a new Font object, descender is required."),At(e.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:e.familyName||" "},fontSubfamily:{en:e.styleName||" "},fullName:{en:e.fullName||e.familyName+" "+e.styleName},postScriptName:{en:e.postScriptName||(e.familyName+e.styleName).replace(/\s/g,"")},designer:{en:e.designer||" "},designerURL:{en:e.designerURL||" "},manufacturer:{en:e.manufacturer||" "},manufacturerURL:{en:e.manufacturerURL||" "},license:{en:e.license||" "},licenseURL:{en:e.licenseURL||" "},version:{en:e.version||"Version 0.1"},description:{en:e.description||" "},copyright:{en:e.copyright||" "},trademark:{en:e.trademark||" "}},this.unitsPerEm=e.unitsPerEm||1e3,this.ascender=e.ascender,this.descender=e.descender,this.createdTimestamp=e.createdTimestamp,this.tables={os2:{usWeightClass:e.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:e.widthClass||this.usWidthClasses.MEDIUM,fsSelection:e.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new ye.GlyphSet(this,e.glyphs||[]),this.encoding=new ce(this),this.position=new Et(this),this.substitution=new It(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||("truetype"===this.outlinesFormat?this._hinting=new Dt(this):void 0)}})}jn.prototype.hasChar=function(e){return null!==this.encoding.charToGlyphIndex(e)},jn.prototype.charToGlyphIndex=function(e){return this.encoding.charToGlyphIndex(e)},jn.prototype.charToGlyph=function(e){return e=this.charToGlyphIndex(e),this.glyphs.get(e)||this.glyphs.get(0)},jn.prototype.stringToGlyphs=function(e,t){t=t||this.defaultRenderOptions;for(var n=kn(e),r=[],i=0;i<n.length;i+=1){var o=n[i];r.push(this.charToGlyphIndex(o))}var a=r.length;if(t.features){e=t.script||this.substitution.getDefaultScriptName();var s=[];t.features.liga&&(s=s.concat(this.substitution.getFeature("liga",e,t.language))),t.features.rlig&&(s=s.concat(this.substitution.getFeature("rlig",e,t.language)));for(var l=0;l<a;l+=1)for(var c=0;c<s.length;c++){for(var u=s[c],p=u.sub,d=p.length,h=0;h<d&&p[h]===r[l+h];)h++;h===d&&(r.splice(l,d,u.by),a=a-d+1)}}for(var m=new Array(a),f=this.glyphs.get(0),g=0;g<a;g+=1)m[g]=this.glyphs.get(r[g])||f;return m},jn.prototype.nameToGlyphIndex=function(e){return this.glyphNames.nameToGlyphIndex(e)},jn.prototype.nameToGlyph=function(e){return e=this.nameToGlyphIndex(e),this.glyphs.get(e)||this.glyphs.get(0)},jn.prototype.glyphIndexToName=function(e){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(e):""},jn.prototype.getKerningValue=function(e,t){e=e.index||e,t=t.index||t;var n=this.position.defaultKerningTables;return n?this.position.getKerningValue(n,e,t):this.kerningPairs[e+","+t]||0},jn.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},jn.prototype.forEachGlyph=function(e,t,n,r,i,o){t=void 0!==t?t:0,n=void 0!==n?n:0,i=i||this.defaultRenderOptions;var a,s=1/this.unitsPerEm*(r=void 0!==r?r:72),l=this.stringToGlyphs(e,i);i.kerning&&(e=i.script||this.position.getDefaultScriptName(),a=this.position.getKerningTables(e,i.language));for(var c=0;c<l.length;c+=1){var u=l[c];o.call(this,u,t,n,r,i),u.advanceWidth&&(t+=u.advanceWidth*s),i.kerning&&c<l.length-1&&(t+=(a?this.position.getKerningValue(a,u.index,l[c+1].index):this.getKerningValue(u,l[c+1]))*s),i.letterSpacing?t+=i.letterSpacing*r:i.tracking&&(t+=i.tracking/1e3*r)}return t},jn.prototype.getPath=function(e,t,n,r,i){var o=new k;return this.forEachGlyph(e,t,n,r,i,(function(e,t,n,r){e=e.getPath(t,n,r,i,this),o.extend(e)})),o},jn.prototype.getPaths=function(e,t,n,r,i){var o=[];return this.forEachGlyph(e,t,n,r,i,(function(e,t,n,r){e=e.getPath(t,n,r,i,this),o.push(e)})),o},jn.prototype.getAdvanceWidth=function(e,t,n){return this.forEachGlyph(e,0,0,t,n,(function(){}))},jn.prototype.draw=function(e,t,n,r,i,o){this.getPath(t,n,r,i,o).draw(e)},jn.prototype.drawPoints=function(e,t,n,r,i,o){this.forEachGlyph(t,n,r,i,o,(function(t,n,r,i){t.drawPoints(e,n,r,i)}))},jn.prototype.drawMetrics=function(e,t,n,r,i,o){this.forEachGlyph(t,n,r,i,o,(function(t,n,r,i){t.drawMetrics(e,n,r,i)}))},jn.prototype.getEnglishName=function(e){if(e=this.names[e])return e.en},jn.prototype.validate=function(){var e=this;function t(t){(t=e.getEnglishName(t))&&t.trim().length}t("fontFamily"),t("weightName"),t("manufacturer"),t("copyright"),t("version"),this.unitsPerEm},jn.prototype.toTables=function(){return function(e){for(var t,n=[],r=[],i=[],o=[],a=[],s=[],l=[],c=0,u=0,p=0,d=0,h=0,m=0;m<e.glyphs.length;m+=1){var f=e.glyphs.get(m),g=0|f.unicode;if(isNaN(f.advanceWidth))throw new Error("Glyph "+f.name+" ("+m+"): advanceWidth is not a number.");if((g<t||void 0===t)&&0<g&&(t=g),c<g&&(c=g),(g=at(g))<32)u|=1<<g;else if(g<64)p|=1<<g-32;else if(g<96)d|=1<<g-64;else{if(!(g<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");h|=1<<g-96}".notdef"!==f.name&&(g=f.getMetrics(),n.push(g.xMin),r.push(g.yMin),i.push(g.xMax),o.push(g.yMax),s.push(g.leftSideBearing),l.push(g.rightSideBearing),a.push(f.advanceWidth))}var y,_={xMin:Math.min.apply(null,n),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,i),yMax:Math.max.apply(null,o),advanceWidthMax:Math.max.apply(null,a),advanceWidthAvg:function(e){for(var t=0,n=0;n<e.length;n+=1)t+=e[n];return t/e.length}(a),minLeftSideBearing:Math.min.apply(null,s),maxLeftSideBearing:Math.max.apply(null,s),minRightSideBearing:Math.min.apply(null,l)},v=(_.ascender=e.ascender,_.descender=e.descender,De({flags:3,unitsPerEm:e.unitsPerEm,xMin:_.xMin,yMin:_.yMin,xMax:_.xMax,yMax:_.yMax,lowestRecPPEM:3,createdTimestamp:e.createdTimestamp})),b=Fe({ascender:_.ascender,descender:_.descender,advanceWidthMax:_.advanceWidthMax,minLeftSideBearing:_.minLeftSideBearing,minRightSideBearing:_.minRightSideBearing,xMaxExtent:_.maxLeftSideBearing+(_.xMax-_.xMin),numberOfHMetrics:e.glyphs.length}),w=ze(e.glyphs.length),x=ot({xAvgCharWidth:Math.round(_.advanceWidthAvg),usWeightClass:e.tables.os2.usWeightClass,usWidthClass:e.tables.os2.usWidthClass,usFirstCharIndex:t,usLastCharIndex:c,ulUnicodeRange1:u,ulUnicodeRange2:p,ulUnicodeRange3:d,ulUnicodeRange4:h,fsSelection:e.tables.os2.fsSelection,sTypoAscender:_.ascender,sTypoDescender:_.descender,sTypoLineGap:0,usWinAscent:_.yMax,usWinDescent:Math.abs(_.yMin),ulCodePageRange1:1,sxHeight:bt(e,"xyvw",{yMax:Math.round(_.ascender/2)}).yMax,sCapHeight:bt(e,"HIKLEFJMNTZBDPRAGOQSUVWXY",_).yMax,usDefaultChar:e.hasChar(" ")?32:0,usBreakChar:e.hasChar(" ")?32:0}),S=Be(e.glyphs),T=ie(e.glyphs),E=(O=e.getEnglishName("fontFamily"))+" "+(M=e.getEnglishName("fontSubfamily")),I=(I=e.getEnglishName("postScriptName"))||O.replace(/\s/g,"")+"-"+M,k={};for(y in e.names)k[y]=e.names[y];k.uniqueID||(k.uniqueID={en:e.getEnglishName("manufacturer")+":"+E}),k.postScriptName||(k.postScriptName={en:I}),k.preferredFamily||(k.preferredFamily=e.names.fontFamily),k.preferredSubfamily||(k.preferredSubfamily=e.names.fontSubfamily);var j=nt(k,A=[]),A=0<A.length?Ue(A):void 0,C=lt(),O=(E=Re(e.glyphs,{version:e.getEnglishName("version"),fullName:E,familyName:O,weightName:M,postScriptName:I,unitsPerEm:e.unitsPerEm,fontBBox:[0,_.yMin,_.ascender,_.advanceWidthMax]}),e.metas&&0<Object.keys(e.metas).length?ft(e.metas):void 0),M=[v,b,w,x,j,T,C,E,S];A&&M.push(A),e.tables.gsub&&M.push(ht(e.tables.gsub)),O&&M.push(O);for(var N=yt((I=vt(M)).encode()),R=I.fields,P=!1,D=0;D<R.length;D+=1)if("head table"===R[D].name){R[D].value.checkSumAdjustment=2981146554-N,P=!0;break}if(P)return I;throw new Error("Could not find head table with checkSum to adjust.")}(this)},jn.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},jn.prototype.toArrayBuffer=function(){for(var e=this.toTables().encode(),t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e[r];return t},jn.prototype.download=function(t){var n=this.getEnglishName("fontFamily"),i=this.getEnglishName("fontSubfamily"),o=(t=t||n.replace(/\s/g,"")+"-"+i+".otf",this.toArrayBuffer());"undefined"!=typeof window?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,o.byteLength,(function(e){e.root.getFile(t,{create:!0},(function(e){e.createWriter((function(t){var n=new DataView(o);n=new Blob([n],{type:"font/opentype"}),t.write(n),t.addEventListener("writeend",(function(){location.href=e.toURL()}),!1)}))}))}),(function(e){throw new Error(e.name+": "+e.message)}))):(n=e("fs"),i=function(e){for(var t=new r(e.byteLength),n=new Uint8Array(e),i=0;i<t.length;++i)t[i]=n[i];return t}(o),n.writeFileSync(t,i))},jn.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},jn.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},jn.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var An=new Array(10);An[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{posFormat:1,coverage:this.parsePointer(ee.coverage),value:this.parseValueRecord()}:2===t?{posFormat:2,coverage:this.parsePointer(ee.coverage),values:this.parseValueRecordList()}:void C.assert(!1,"0x"+e.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},An[2]=function(){var e,t,n,r,i=this.offset+this.relativeOffset,o=this.parseUShort(),a=(C.assert(1===o||2===o,"0x"+i.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),i=this.parsePointer(ee.coverage),this.parseUShort()),s=this.parseUShort();return 1===o?{posFormat:o,coverage:i,valueFormat1:a,valueFormat2:s,pairSets:this.parseList(ee.pointer(ee.list((function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(a),value2:this.parseValueRecord(s)}}))))}:2===o?(e=this.parsePointer(ee.classDef),t=this.parsePointer(ee.classDef),n=this.parseUShort(),r=this.parseUShort(),{posFormat:o,coverage:i,valueFormat1:a,valueFormat2:s,classDef1:e,classDef2:t,class1Count:n,class2Count:r,classRecords:this.parseList(n,ee.list(r,(function(){return{value1:this.parseValueRecord(a),value2:this.parseValueRecord(s)}})))}):void 0},An[3]=function(){return{error:"GPOS Lookup 3 not supported"}},An[4]=function(){return{error:"GPOS Lookup 4 not supported"}},An[5]=function(){return{error:"GPOS Lookup 5 not supported"}},An[6]=function(){return{error:"GPOS Lookup 6 not supported"}},An[7]=function(){return{error:"GPOS Lookup 7 not supported"}},An[8]=function(){return{error:"GPOS Lookup 8 not supported"}},An[9]=function(){return{error:"GPOS Lookup 9 not supported"}},new Array(10);var Cn=function(e,t){return t=(e=new ee(e,t=t||0)).parseVersion(1),C.argument(1===t||1.1===t,"Unsupported GPOS table version "+t),1===t?{version:t,scripts:e.parseScriptList(),features:e.parseFeatureList(),lookups:e.parseLookupList(An)}:{version:t,scripts:e.parseScriptList(),features:e.parseFeatureList(),lookups:e.parseLookupList(An),variations:e.parseFeatureVariationsList()}};function On(t,n){e("fs").readFile(t,(function(e,t){if(e)return n(e.message);n(null,jt(t))}))}function Mn(e,t){var n=new XMLHttpRequest;n.open("get",e,!0),n.responseType="arraybuffer",n.onload=function(){return n.response?t(null,n.response):t("Font could not be loaded: "+n.statusText)},n.onerror=function(){t("Font could not be loaded")},n.send()}function Nn(e,t){for(var n=[],r=12,i=0;i<t;i+=1){var o=ne.getTag(e,r),a=ne.getULong(e,r+4),s=ne.getULong(e,r+8),l=ne.getULong(e,r+12);n.push({tag:o,checksum:a,offset:s,length:l,compression:!1}),r+=16}return n}function Rn(e,t){if("WOFF"!==t.compression)return{data:e,offset:t.offset};e=new Uint8Array(e.buffer,t.offset+2,t.compressedLength-2);var n=new Uint8Array(t.length);if(function(e,t){var n,r,i,o=new a(e,t);do{switch((r=o).bitcount--||(r.tag=r.source[r.sourceIndex++],r.bitcount=7),i=1&r.tag,r.tag>>>=1,r=i,v(o,2,0)){case 0:n=function(e){for(var t,n;8<e.bitcount;)e.sourceIndex--,e.bitcount-=8;if((t=256*e.source[e.sourceIndex+1]+e.source[e.sourceIndex])!==(65535&~(256*e.source[e.sourceIndex+3]+e.source[e.sourceIndex+2])))return-3;for(e.sourceIndex+=4,n=t;n;--n)e.dest[e.destLen++]=e.source[e.sourceIndex++];return e.bitcount=0,0}(o);break;case 1:n=w(o,s,l);break;case 2:I=E=T=k=c=S=void 0;for(var c,u=o,p=o.ltree,d=o.dtree,g=v(u,5,257),y=v(u,5,1),x=v(u,4,4),S=0;S<19;++S)f[S]=0;for(S=0;S<x;++S){var T=v(u,3,0);f[h[S]]=T}for(_(m,f,0,19),c=0;c<g+y;){var E=b(u,m);switch(E){case 16:for(var I=f[c-1],k=v(u,2,3);k;--k)f[c++]=I;break;case 17:for(k=v(u,3,3);k;--k)f[c++]=0;break;case 18:for(k=v(u,7,11);k;--k)f[c++]=0;break;default:f[c++]=E}}_(p,f,0,g),_(d,f,g,y),n=w(o,o.ltree,o.dtree);break;default:n=-3}if(0!==n)throw new Error("Data error")}while(!r);o.destLen<o.dest.length?"function"==typeof o.dest.slice?o.dest.slice(0,o.destLen):o.dest.subarray(0,o.destLen):o.dest}(e,n),n.byteLength!==t.length)throw new Error("Decompression error: "+t.tag+" decompressed length doesn't match recorded length");return{data:new DataView(n.buffer,0),offset:0}}function Pn(e){var t,n,r,i,o,a,s,l,c,u,p,d,h,m,f=new jn({empty:!0}),g=new DataView(e,0),y=[];if((e=ne.getTag(g,0))===String.fromCharCode(0,1,0,0)||"true"===e||"typ1"===e)f.outlinesFormat="truetype",y=Nn(g,r=ne.getUShort(g,4));else if("OTTO"===e)f.outlinesFormat="cff",y=Nn(g,r=ne.getUShort(g,4));else{if("wOFF"!==e)throw new Error("Unsupported OpenType signature "+e);if((w=ne.getTag(g,4))===String.fromCharCode(0,1,0,0))f.outlinesFormat="truetype";else{if("OTTO"!==w)throw new Error("Unsupported OpenType flavor "+e);f.outlinesFormat="cff"}y=function(e,t){for(var n=[],r=44,i=0;i<t;i+=1){var o=ne.getTag(e,r),a=ne.getULong(e,r+4),s=ne.getULong(e,r+8),l=ne.getULong(e,r+12),c=s<l&&"WOFF";n.push({tag:o,offset:a,compression:c,compressedLength:s,length:l}),r+=20}return n}(g,r=ne.getUShort(g,12))}for(var _=0;_<r;_+=1){var v=y[_],b=void 0;switch(v.tag){case"cmap":b=Rn(g,v),f.tables.cmap=re(b.data,b.offset),f.encoding=new ue(f.tables.cmap);break;case"cvt ":b=Rn(g,v),m=new ne.Parser(b.data,b.offset),f.tables.cvt=m.parseShortList(v.length/2);break;case"fvar":o=v;break;case"fpgm":b=Rn(g,v),m=new ne.Parser(b.data,b.offset),f.tables.fpgm=m.parseByteList(v.length);break;case"head":b=Rn(g,v),f.tables.head=Pe(b.data,b.offset),f.unitsPerEm=f.tables.head.unitsPerEm,t=f.tables.head.indexToLocFormat;break;case"hhea":b=Rn(g,v),f.tables.hhea=Le(b.data,b.offset),f.ascender=f.tables.hhea.ascender,f.descender=f.tables.hhea.descender,f.numberOfHMetrics=f.tables.hhea.numberOfHMetrics;break;case"hmtx":c=v;break;case"ltag":b=Rn(g,v),n=Ve(b.data,b.offset);break;case"maxp":b=Rn(g,v),f.tables.maxp=Ge(b.data,b.offset),f.numGlyphs=f.tables.maxp.numGlyphs;break;case"name":d=v;break;case"OS/2":b=Rn(g,v),f.tables.os2=it(b.data,b.offset);break;case"post":b=Rn(g,v),f.tables.post=st(b.data,b.offset),f.glyphNames=new de(f.tables.post);break;case"prep":b=Rn(g,v),m=new ne.Parser(b.data,b.offset),f.tables.prep=m.parseByteList(v.length);break;case"glyf":a=v;break;case"loca":p=v;break;case"CFF ":i=v;break;case"kern":u=v;break;case"GPOS":s=v;break;case"GSUB":l=v;break;case"meta":h=v}}if(w=Rn(g,d),f.tables.name=tt(w.data,w.offset,n),f.names=f.tables.name,a&&p)e=0===t,w=function(e,t,n,r){for(var i=new ne.Parser(e,t),o=r?i.parseUShort:i.parseULong,a=[],s=0;s<n+1;s+=1){var l=o.call(i);r&&(l*=2),a.push(l)}return a}((w=Rn(g,p)).data,w.offset,f.numGlyphs,e),e=Rn(g,a),f.glyphs=Pt.parse(e.data,e.offset,w,f);else{if(!i)throw new Error("Font doesn't contain TrueType or CFF outlines.");e=Rn(g,i),Ne(e.data,e.offset,f)}for(var w=Rn(g,c),x=(function(e,t,n,r,i){for(var o,a,s=new ne.Parser(e,t),l=0;l<r;l+=1){l<n&&(o=s.parseUShort(),a=s.parseShort());var c=i.get(l);c.advanceWidth=o,c.leftSideBearing=a}}(w.data,w.offset,f.numberOfHMetrics,f.numGlyphs,f.glyphs),f),S=x.tables.cmap.glyphIndexMap,T=Object.keys(S),E=0;E<T.length;E+=1){var I,k=T[E],j=S[k];(I=x.glyphs.get(j)).addUnicode(parseInt(k))}for(var A=0;A<x.glyphs.length;A+=1)I=x.glyphs.get(A),x.cffEncoding?x.isCIDFont?I.name="gid"+A:I.name=x.cffEncoding.charset[A]:x.glyphNames.names&&(I.name=x.glyphNames.glyphIndexToName(A));return u?(e=Rn(g,u),f.kerningPairs=function(e,t){if(0===(t=(e=new ne.Parser(e,t)).parseUShort())){var n=e,r={},i=(n.skip("uShort"),n.parseUShort()),o=(C.argument(0===i,"Unsupported kern sub-table version."),n.skip("uShort",2),n.parseUShort());n.skip("uShort",3);for(var a=0;a<o;a+=1){var s=n.parseUShort(),l=n.parseUShort(),c=n.parseShort();r[s+","+l]=c}return r}if(1!==t)throw new Error("Unsupported kern table version ("+t+").");var u=e,p={};if(u.skip("uShort"),1<u.parseULong()&&console.warn("Only the first kern subtable is supported."),u.skip("uLong"),i=255&u.parseUShort(),u.skip("uShort"),0==i){var d=u.parseUShort();u.skip("uShort",3);for(var h=0;h<d;h+=1){var m=u.parseUShort(),f=u.parseUShort(),g=u.parseShort();p[m+","+f]=g}}return p}(e.data,e.offset)):f.kerningPairs={},s&&(w=Rn(g,s),f.tables.gpos=Cn(w.data,w.offset),f.position.init()),l&&(e=Rn(g,l),f.tables.gsub=dt(e.data,e.offset)),o&&(w=Rn(g,o),f.tables.fvar=function(e,t,n){for(var r,i,o,a,s=new ne.Parser(e,t),l=s.parseULong(),c=(C.argument(65536===l,"Unsupported fvar table version."),s.parseOffset16()),u=(s.skip("uShort",1),s.parseUShort()),p=s.parseUShort(),d=s.parseUShort(),h=s.parseUShort(),m=[],f=0;f<u;f++)m.push((r=e,i=t+c+f*p,o=n,a={},r=new ne.Parser(r,i),a.tag=r.parseTag(),a.minValue=r.parseFixed(),a.defaultValue=r.parseFixed(),a.maxValue=r.parseFixed(),r.skip("uShort",1),a.name=o[r.parseUShort()]||{},a));for(var g=[],y=t+c+u*p,_=0;_<d;_++)g.push(function(e,t,n,r){var i={},o=new ne.Parser(e,t);i.name=r[o.parseUShort()]||{},o.skip("uShort",1),i.coordinates={};for(var a=0;a<n.length;++a)i.coordinates[n[a].tag]=o.parseFixed();return i}(e,y+_*h,m,n));return{axes:m,instances:g}}(w.data,w.offset,f.names)),h&&(e=Rn(g,h),f.tables.meta=mt(e.data,e.offset),f.metas=f.tables.meta),f}t.Font=jn,t.Glyph=me,t.Path=k,t.BoundingBox=I,t._parse=ne,t.parse=Pn,t.load=function(e,t){("undefined"==typeof window?On:Mn)(e,(function(e,n){if(e)return t(e);var r;try{r=Pn(n)}catch(e){return t(e,null)}return t(null,r)}))},t.loadSync=function(t){return Pn(jt(e("fs").readFileSync(t)))},Object.defineProperty(t,"__esModule",{value:!0})},i("object"==typeof n&&void 0!==t?n:this.opentype={})}).call(this,e("buffer").Buffer)},{buffer:4,fs:2}],258:[function(e,t,n){(function(e){function t(e,t){for(var n=0,r=e.length-1;0<=r;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}n.resolve=function(){for(var n="",i=!1,o=arguments.length-1;-1<=o&&!i;o--){var a=0<=o?arguments[o]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(n=a+"/"+n,i="/"===a.charAt(0))}return(i?"/":"")+(n=t(r(n.split("/"),(function(e){return!!e})),!i).join("/"))||"."},n.normalize=function(e){var o=n.isAbsolute(e),a="/"===i(e,-1);return(e=(e=t(r(e.split("/"),(function(e){return!!e})),!o).join("/"))||o?e:".")&&a&&(e+="/"),(o?"/":"")+e},n.isAbsolute=function(e){return"/"===e.charAt(0)},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(r(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},n.relative=function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;0<=n&&""===e[n];n--);return n<t?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var i=r(e.split("/")),o=r(t.split("/")),a=Math.min(i.length,o.length),s=a,l=0;l<a;l++)if(i[l]!==o[l]){s=l;break}var c=[];for(l=s;l<i.length;l++)c.push("..");return(c=c.concat(o.slice(s))).join("/")},n.sep="/",n.delimiter=":",n.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=47===e.charCodeAt(0),n=-1,r=!0,i=e.length-1;1<=i;--i)if(47===e.charCodeAt(i)){if(!r){n=i;break}}else r=!1;return-1===n?t?"/":".":t&&1===n?"/":e.slice(0,n)},n.basename=function(e,t){return e=function(e){"string"!=typeof e&&(e+="");for(var t=0,n=-1,r=!0,i=e.length-1;0<=i;--i)if(47===e.charCodeAt(i)){if(!r){t=i+1;break}}else-1===n&&(r=!1,n=i+1);return-1===n?"":e.slice(t,n)}(e),t&&e.substr(-1*t.length)===t?e.substr(0,e.length-t.length):e},n.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,n=0,r=-1,i=!0,o=0,a=e.length-1;0<=a;--a){var s=e.charCodeAt(a);if(47===s){if(i)continue;n=a+1;break}-1===r&&(i=!1,r=a+1),46===s?-1===t?t=a:1!==o&&(o=1):-1!==t&&(o=-1)}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===n+1?"":e.slice(t,r)};var i=function(e,t,n){return e.substr(t,n)}}).call(this,e("_process"))},{_process:259}],259:[function(e,t,n){var r,i;function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}t=t.exports={};try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return(r=setTimeout)(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}var l,c=[],u=!1,p=-1;function d(){u&&l&&(u=!1,l.length?c=l.concat(c):p=-1,c.length&&h())}function h(){if(!u){for(var e=s(d),t=(u=!0,c.length);t;){for(l=c,c=[];++p<t;)l&&l[p].run();p=-1,t=c.length}l=null,u=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return(i=clearTimeout)(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function f(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new m(e,t)),1!==c.length||u||s(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=f,t.addListener=f,t.once=f,t.off=f,t.removeListener=f,t.removeAllListeners=f,t.emit=f,t.prependListener=f,t.prependOnceListener=f,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],260:[function(e,t,n){t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i=(y="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",o=y.asyncIterator||"@@asyncIterator",a=y.toStringTag||"@@toStringTag";function s(e,n,r,i){var o,a,s,f;return n=n&&n.prototype instanceof m?n:m,n=Object.create(n.prototype),i=new T(i||[]),n._invoke=(o=e,a=r,s=i,f=c,function(e,n){if(f===p)throw new Error("Generator is already running");if(f===d){if("throw"===e)throw n;return I()}for(s.method=e,s.arg=n;;){var r=s.delegate;if(r&&(r=function e(n,r){var i=n.iterator[r.method];if(i===t){if(r.delegate=null,"throw"===r.method){if(n.iterator.return&&(r.method="return",r.arg=t,e(n,r),"throw"===r.method))return h;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}return"throw"===(i=l(i,n.iterator,r.arg)).type?(r.method="throw",r.arg=i.arg,r.delegate=null,h):(i=i.arg)?i.done?(r[n.resultName]=i.value,r.next=n.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}(r,s),r)){if(r===h)continue;return r}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(f===c)throw f=d,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);if(f=p,"normal"===(r=l(o,a,s)).type){if(f=s.done?d:u,r.arg!==h)return{value:r.arg,done:s.done}}else"throw"===r.type&&(f=d,s.method="throw",s.arg=r.arg)}}),n}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var c="suspendedStart",u="suspendedYield",p="executing",d="completed",h={};function m(){}function f(){}function g(){}var y,_,v=((y={})[i]=function(){return this},(_=(_=Object.getPrototypeOf)&&_(_(E([]))))&&_!==n&&r.call(_,i)&&(y=_),g.prototype=m.prototype=Object.create(y));function b(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function w(e){var t;this._invoke=function(n,i){function o(){return new Promise((function(t,o){!function t(n,i,o,a){var s;if("throw"!==(n=l(e[n],e,i)).type)return(i=(s=n.arg).value)&&"object"==typeof i&&r.call(i,"__await")?Promise.resolve(i.__await).then((function(e){t("next",e,o,a)}),(function(e){t("throw",e,o,a)})):Promise.resolve(i).then((function(e){s.value=e,o(s)}),(function(e){return t("throw",e,o,a)}));a(n.arg)}(n,i,t,o)}))}return t=t?t.then(o,o):o()}}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function E(e){if(e){var n,o=e[i];if(o)return o.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return n=-1,(o=function i(){for(;++n<e.length;)if(r.call(e,n))return i.value=e[n],i.done=!1,i;return i.value=t,i.done=!0,i}).next=o}return{next:I}}function I(){return{value:t,done:!0}}return(f.prototype=v.constructor=g).constructor=f,g[a]=f.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){return!!(e="function"==typeof e&&e.constructor)&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,a in e||(e[a]="GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(w.prototype),w.prototype[o]=function(){return this},e.AsyncIterator=w,e.async=function(t,n,r,i){var o=new w(s(t,n,r,i));return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(v),v[a]="Generator",v[i]=function(){return this},v.toString=function(){return"[object Generator]"},e.keys=function(e){var t,n=[];for(t in e)n.push(t);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=E,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;0<=o;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}var a=(o=o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc?null:o)?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,r,i=this.tryEntries[t];if(i.tryLoc===e)return"throw"===(n=i.completion).type&&(r=n.arg,S(i)),r}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:E(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),h}},e}("object"==typeof t?t.exports:{});try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},{}],261:[function(e,t,n){!function(e){"use strict";var t,n,r,i,o,a,s,l,c,u;function p(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function d(e){return"string"!=typeof e?String(e):e}function h(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function m(e){this.map={},e instanceof m?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function f(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function g(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function y(e){var t=new FileReader,n=g(t);return t.readAsArrayBuffer(e),n}function _(e){var t;return e.slice?e.slice(0):((t=new Uint8Array(e.byteLength)).set(new Uint8Array(e)),t.buffer)}function v(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e)if("string"==typeof e)this._bodyText=e;else if(r&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(i&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(o&&r&&s(e))this._bodyArrayBuffer=_(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!o||!ArrayBuffer.prototype.isPrototypeOf(e)&&!l(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=_(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r&&(this.blob=function(){var e=f(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(y)}),this.text=function(){var e,t,n=f(this);if(n)return n;if(this._bodyBlob)return n=this._bodyBlob,t=g(e=new FileReader),e.readAsText(n),t;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}function b(e,t){var n,r=(t=t||{}).body;if(e instanceof b){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new m(e.headers)),this.method=e.method,this.mode=e.mode,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new m(t.headers)),this.method=(n=(e=t.method||this.method||"GET").toUpperCase(),-1<c.indexOf(n)?n:e),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function w(e){var t=new FormData;return e.trim().split("&").forEach((function(e){var n;e&&(n=(e=e.split("=")).shift().replace(/\+/g," "),e=e.join("=").replace(/\+/g," "),t.append(decodeURIComponent(n),decodeURIComponent(e)))})),t}function x(e,t){t=t||{},this.type="default",this.status=void 0===t.status?200:t.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new m(t.headers),this.url=t.url||"",this._initBody(e)}e.fetch||(t="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,r="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),i="FormData"in e,(o="ArrayBuffer"in e)&&(a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=function(e){return e&&DataView.prototype.isPrototypeOf(e)},l=ArrayBuffer.isView||function(e){return e&&-1<a.indexOf(Object.prototype.toString.call(e))}),m.prototype.append=function(e,t){e=p(e),t=d(t);var n=this.map[e];this.map[e]=n?n+","+t:t},m.prototype.delete=function(e){delete this.map[p(e)]},m.prototype.get=function(e){return e=p(e),this.has(e)?this.map[e]:null},m.prototype.has=function(e){return this.map.hasOwnProperty(p(e))},m.prototype.set=function(e,t){this.map[p(e)]=d(t)},m.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},m.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),h(e)},m.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),h(e)},m.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),h(e)},n&&(m.prototype[Symbol.iterator]=m.prototype.entries),c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},v.call(b.prototype),v.call(x.prototype),x.prototype.clone=function(){return new x(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},x.error=function(){var e=new x(null,{status:0,statusText:""});return e.type="error",e},u=[301,302,303,307,308],x.redirect=function(e,t){if(-1===u.indexOf(t))throw new RangeError("Invalid status code");return new x(null,{status:t,headers:{location:e}})},e.Headers=m,e.Request=b,e.Response=x,e.fetch=function(e,t){return new Promise((function(n,i){var o=new b(e,t),a=new XMLHttpRequest;a.onload=function(){var e,t={status:a.status,statusText:a.statusText,headers:(t=a.getAllResponseHeaders()||"",e=new m,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var n=(t=t.split(":")).shift().trim();n&&(t=t.join(":").trim(),e.append(n,t))})),e)},r=(t.url="responseURL"in a?a.responseURL:t.headers.get("X-Request-URL"),"response"in a?a.response:a.responseText);n(new x(r,t))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&r&&(a.responseType="blob"),o.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),a.send(void 0===o._bodyInit?null:o._bodyInit)}))},e.fetch.polyfill=!0)}("undefined"!=typeof self?self:this)},{}],262:[function(e,t,n){"use strict";e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=a(e("../core/main")),o=a(e("../color/color_conversion"));function a(e){return e&&e.__esModule?e:{default:e}}var s=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],l=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];i.default.prototype._rgbColorName=function(e){e=o.default._rgbaToHSBA(e);var t,n,i=[(r=e)[0],e[1],e[2]];0!==i[0]&&(i[0]=Math.round(100*i[0]),(e=i[0].toString().split(""))[n=e.length-1]=parseInt(e[n]),e[n]<2.5?e[n]=0:2.5<=e[n]&&e[n]<7.5&&(e[n]=5),2===e.length?(e[0]=parseInt(e[0]),7.5<=e[n]&&(e[n]=0,e[0]=e[0]+1),i[0]=10*e[0]+e[1]):7.5<=e[n]?i[0]=10:i[0]=e[n]),i[2]=i[2]/255;for(var a=i.length-1;1<=a;a--)i[a]<=.25?i[a]=0:.25<i[a]&&i[a]<.75?i[a]=.5:i[a]=1;if(0===i[0]&&0===i[1]&&1===i[2]){for(var c=2;0<=c;c--)r[c]=Math.round(1e4*r[c])/1e4;for(var u=0;u<s.length;u++){if(s[u].h===r[0]&&s[u].s===r[1]&&s[u].b===r[2]){t=s[u].name;break}t="white"}}else for(var p=0;p<l.length;p++)if(l[p].h===i[0]&&l[p].s===i[1]&&l[p].b===i[2]){t=l[p].name;break}return t},e=i.default,n.default=e},{"../color/color_conversion":268,"../core/main":283,"core-js/modules/es.function.name":174,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.split":206}],263:[function(e,t,n){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.ends-with"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.ends-with"),e("core-js/modules/es.string.replace"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e},i="_Description",o="_fallbackDesc",a="_fallbackTable",s="_Label",l="_labelDesc",c="_labelTable";function u(e){if("label"===e||"fallback"===e)throw new Error("description should not be LABEL or FALLBACK");return e.endsWith(".")||e.endsWith(";")||e.endsWith(",")||e.endsWith("?")||e.endsWith("!")||(e+="."),e}r.default.prototype.describe=function(e,t){var n;r.default._validateParameters("describe",arguments),"string"==typeof e&&(n=this.canvas.id,e=u(e),this.dummyDOM||(this.dummyDOM=document.getElementById(n).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==e&&(this.descriptions.fallback.innerHTML=e):this._describeHTML("fallback",e),t===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==e&&(this.descriptions.label.innerHTML=e):this._describeHTML("label",e)))},r.default.prototype.describeElement=function(e,t,n){var i,o;r.default._validateParameters("describeElement",arguments),"string"==typeof t&&"string"==typeof e&&(i=this.canvas.id,t=u(t),o=function(e){if("label"===e||"fallback"===e)throw new Error("element name should not be LABEL or FALLBACK");return e.endsWith(".")||e.endsWith(";")||e.endsWith(",")?e=e.replace(/.$/,":"):e.endsWith(":")||(e+=":"),e}(e),e=e.replace(/[^a-zA-Z0-9]/g,""),o='<th scope="row">'.concat(o,"</th><td>").concat(t,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(i).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[e]?this.descriptions.fallbackElements[e].innerHTML!==o&&(this.descriptions.fallbackElements[e].innerHTML=o):this._describeElementHTML("fallback",e,o),n===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[e]?this.descriptions.labelElements[e].innerHTML!==o&&(this.descriptions.labelElements[e].innerHTML=o):this._describeElementHTML("label",e,o)))},r.default.prototype._describeHTML=function(e,t){var n,r=this.canvas.id;"fallback"===e?(this.dummyDOM.querySelector("#".concat(r+i))?this.dummyDOM.querySelector("#"+r+a).insertAdjacentHTML("beforebegin",'<p id="'.concat(r+o,'"></p>')):(n='<div id="'.concat(r).concat(i,'" role="region" aria-label="Canvas Description"><p id="').concat(r).concat(o,'"></p></div>'),this.dummyDOM.querySelector("#".concat(r,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(r,"accessibleOutput")).insertAdjacentHTML("beforebegin",n):this.dummyDOM.querySelector("#".concat(r)).innerHTML=n),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(r).concat(o)),this.descriptions.fallback.innerHTML=t):"label"===e&&(this.dummyDOM.querySelector("#".concat(r+s))?this.dummyDOM.querySelector("#".concat(r+c))&&this.dummyDOM.querySelector("#".concat(r+c)).insertAdjacentHTML("beforebegin",'<p id="'.concat(r).concat(l,'"></p>')):(n='<div id="'.concat(r).concat(s,'" class="p5Label"><p id="').concat(r).concat(l,'"></p></div>'),this.dummyDOM.querySelector("#".concat(r,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(r,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",n):this.dummyDOM.querySelector("#"+r).insertAdjacentHTML("afterend",n)),this.descriptions.label=this.dummyDOM.querySelector("#"+r+l),this.descriptions.label.innerHTML=t)},r.default.prototype._describeElementHTML=function(e,t,n){var r,u=this.canvas.id;"fallback"===e?(this.dummyDOM.querySelector("#".concat(u+i))?this.dummyDOM.querySelector("#"+u+a)||this.dummyDOM.querySelector("#"+u+o).insertAdjacentHTML("afterend",'<table id="'.concat(u).concat(a,'"><caption>Canvas elements and their descriptions</caption></table>')):(r='<div id="'.concat(u).concat(i,'" role="region" aria-label="Canvas Description"><table id="').concat(u).concat(a,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(u,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(u,"accessibleOutput")).insertAdjacentHTML("beforebegin",r):this.dummyDOM.querySelector("#"+u).innerHTML=r),(r=document.createElement("tr")).id=u+"_fte_"+t,this.dummyDOM.querySelector("#"+u+a).appendChild(r),this.descriptions.fallbackElements[t]=this.dummyDOM.querySelector("#".concat(u).concat("_fte_").concat(t)),this.descriptions.fallbackElements[t].innerHTML=n):"label"===e&&(this.dummyDOM.querySelector("#".concat(u+s))?this.dummyDOM.querySelector("#".concat(u+c))||this.dummyDOM.querySelector("#"+u+l).insertAdjacentHTML("afterend",'<table id="'.concat(u+c,'"></table>')):(r='<div id="'.concat(u).concat(s,'" class="p5Label"><table id="').concat(u).concat(c,'"></table></div>'),this.dummyDOM.querySelector("#".concat(u,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(u,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",r):this.dummyDOM.querySelector("#"+u).insertAdjacentHTML("afterend",r)),(e=document.createElement("tr")).id=u+"_lte_"+t,this.dummyDOM.querySelector("#"+u+c).appendChild(e),this.descriptions.labelElements[t]=this.dummyDOM.querySelector("#".concat(u).concat("_lte_").concat(t)),this.descriptions.labelElements[t].innerHTML=n)},e=r.default,n.default=e},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.ends-with":198,"core-js/modules/es.string.replace":204}],264:[function(e,t,n){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.map"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.map"),e("core-js/modules/es.string.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,(e=(e=e("../core/main"))&&e.__esModule?e:{default:e}).default.prototype._updateGridOutput=function(e){var t,n,r,i;this.dummyDOM.querySelector("#".concat(e,"_summary"))&&(t=this._accessibleOutputs[e],r=function(e,t,n,r){return t="".concat(t," canvas, ").concat(n," by ").concat(r," pixels, contains ").concat(e[0]),(1===e[0]?"".concat(t," shape: "):"".concat(t," shapes: ")).concat(e[1])}((n=function(e,t){var n,r="",i="",o=0;for(n in t){var a,s=0;for(a in t[n]){var l='<li id="'.concat(e,"shape").concat(o,'">').concat(t[n][a].color," ").concat(n,",");"line"===n?l+=" location = ".concat(t[n][a].pos,", length = ").concat(t[n][a].length," pixels"):(l+=" location = ".concat(t[n][a].pos),"point"!==n&&(l+=", area = ".concat(t[n][a].area," %")),l+="</li>"),r+=l,s++,o++}i=1<s?"".concat(i," ").concat(s," ").concat(n,"s"):"".concat(i," ").concat(s," ").concat(n)}return{numShapes:[o,i],details:r}}(e,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),i=function(e,t){var n,r,i=0,o="",a=Array.from(Array(10),(function(){return Array(10)}));for(n in t)for(var s in t[n]){var l;l="line"!==n?'<a href="#'.concat(e,"shape").concat(i,'">').concat(t[n][s].color," ").concat(n,"</a>"):'<a href="#'.concat(e,"shape").concat(i,'">').concat(t[n][s].color," ").concat(n," midpoint</a>"),t[n][s].loc.locY<a.length&&t[n][s].loc.locX<a[t[n][s].loc.locY].length&&(a[t[n][s].loc.locY][t[n][s].loc.locX]?a[t[n][s].loc.locY][t[n][s].loc.locX]=a[t[n][s].loc.locY][t[n][s].loc.locX]+"  "+l:a[t[n][s].loc.locY][t[n][s].loc.locX]=l,i++)}for(r in a){var c,u="<tr>";for(c in a[r])u+="<td>",void 0!==a[r][c]&&(u+=a[r][c]),u+="</td>";o=o+u+"</tr>"}return o}(e,this.ingredients.shapes),r!==t.summary.innerHTML&&(t.summary.innerHTML=r),i!==t.map.innerHTML&&(t.map.innerHTML=i),n.details!==t.shapeDetails.innerHTML&&(t.shapeDetails.innerHTML=n.details),this._accessibleOutputs[e]=t)},e=e.default,n.default=e},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.from":162,"core-js/modules/es.array.map":168,"core-js/modules/es.string.iterator":200}],265:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.map"),e("core-js/modules/es.number.to-fixed"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e};function i(e,t,n){return 10===(t=Math.floor(e[0]/t*10))&&(t-=1),10===(e=Math.floor(e[1]/n*10))&&(e-=1),{locX:t,locY:e}}r.default.prototype.textOutput=function(e){r.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),e===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},r.default.prototype.gridOutput=function(e){r.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),e===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},r.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},r.default.prototype._createOutput=function(e,t){var n,r,i,o=this.canvas.id,a=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:"",pBackground:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(o).parentNode),"");"Fallback"===t?(n=o+e,this.dummyDOM.querySelector("#".concat(r=o+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(o,"_Description"))?this.dummyDOM.querySelector("#".concat(o,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(r,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(o)).innerHTML='<div id="'.concat(r,'" role="region" aria-label="Canvas Outputs"></div>'))):"Label"===t&&(n=o+e+(a=t),this.dummyDOM.querySelector("#".concat(r=o+"accessibleOutput"+t))||(this.dummyDOM.querySelector("#".concat(o,"_Label"))?this.dummyDOM.querySelector("#".concat(o,"_Label")):this.dummyDOM.querySelector("#".concat(o))).insertAdjacentHTML("afterend",'<div id="'.concat(r,'"></div>'))),this._accessibleOutputs[n]={},"textOutput"===e?(a="#".concat(o,"gridOutput").concat(a),i='<div id="'.concat(n,'">Text Output<div id="').concat(n,'Summary" aria-label="text output summary"><p id="').concat(n,'_summary"></p><ul id="').concat(n,'_list"></ul></div><table id="').concat(n,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(a)?this.dummyDOM.querySelector(a).insertAdjacentHTML("beforebegin",i):this.dummyDOM.querySelector("#".concat(r)).innerHTML=i,this._accessibleOutputs[n].list=this.dummyDOM.querySelector("#".concat(n,"_list"))):"gridOutput"===e&&(a="#".concat(o,"textOutput").concat(a),i='<div id="'.concat(n,'">Grid Output<p id="').concat(n,'_summary" aria-label="grid output summary"><table id="').concat(n,'_map" summary="grid output content"></table><ul id="').concat(n,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(a)?this.dummyDOM.querySelector(a).insertAdjacentHTML("afterend",i):this.dummyDOM.querySelector("#".concat(r)).innerHTML=i,this._accessibleOutputs[n].map=this.dummyDOM.querySelector("#".concat(n,"_map"))),this._accessibleOutputs[n].shapeDetails=this.dummyDOM.querySelector("#".concat(n,"_shapeDetails")),this._accessibleOutputs[n].summary=this.dummyDOM.querySelector("#".concat(n,"_summary"))},r.default.prototype._updateAccsOutput=function(){var e=this.canvas.id;JSON.stringify(this.ingredients.shapes)===this.ingredients.pShapes&&this.ingredients.colors.background===this.ingredients.pBackground||(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(e+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(e+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(e+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(e+"gridOutputLabel"))},r.default.prototype._accsBackground=function(e){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.pBackground=this.ingredients.colors.background,this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==e&&(this.ingredients.colors.backgroundRGBA=e,this.ingredients.colors.background=this._rgbColorName(e))},r.default.prototype._accsCanvasColors=function(e,t){"fill"===e?this.ingredients.colors.fillRGBA!==t&&(this.ingredients.colors.fillRGBA=t,this.ingredients.colors.fill=this._rgbColorName(t)):"stroke"===e&&this.ingredients.colors.strokeRGBA!==t&&(this.ingredients.colors.strokeRGBA=t,this.ingredients.colors.stroke=this._rgbColorName(t))},r.default.prototype._accsOutput=function(e,t){"ellipse"===e&&t[2]===t[3]?e="circle":"rectangle"===e&&t[2]===t[3]&&(e="square");var n,r,o={},a=!0,s=function(e,t){var n;return e="rectangle"===e||"ellipse"===e||"arc"===e||"circle"===e||"square"===e?(n=Math.round(t[0]+t[2]/2),Math.round(t[1]+t[3]/2)):"triangle"===e?(n=(t[0]+t[2]+t[4])/3,(t[1]+t[3]+t[5])/3):"quadrilateral"===e?(n=(t[0]+t[2]+t[4]+t[6])/4,(t[1]+t[3]+t[5]+t[7])/4):"line"===e?(n=(t[0]+t[2])/2,(t[1]+t[3])/2):(n=t[0],t[1]),[n,e]}(e,t);if("line"===e?(o.color=this.ingredients.colors.stroke,o.length=Math.round(this.dist(t[0],t[1],t[2],t[3])),n=this._getPos(t[0],[1]),r=this._getPos(t[2],[3]),o.loc=i(s,this.width,this.height),o.pos=n===r?"at ".concat(n):"from ".concat(n," to ").concat(r)):("point"===e?o.color=this.ingredients.colors.stroke:(o.color=this.ingredients.colors.fill,o.area=this._getArea(e,t)),o.pos=this._getPos.apply(this,function(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(s)),o.loc=i(s,this.width,this.height)),this.ingredients.shapes[e]){if(this.ingredients.shapes[e]!==[o]){for(var l in this.ingredients.shapes[e])JSON.stringify(this.ingredients.shapes[e][l])===JSON.stringify(o)&&(a=!1);!0===a&&this.ingredients.shapes[e].push(o)}}else this.ingredients.shapes[e]=[o]},r.default.prototype._getPos=function(e,t){e=new DOMPointReadOnly(e,t),t=this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform(),t=(e=e.matrixTransform(t)).x,e=e.y;var n=this.width*this._pixelDensity,r=this.height*this._pixelDensity;return t<.4*n?e<.4*r?"top left":.6*r<e?"bottom left":"mid left":.6*n<t?e<.4*r?"top right":.6*r<e?"bottom right":"mid right":e<.4*r?"top middle":.6*r<e?"bottom middle":"middle"},r.default.prototype._getArea=function(e,t){var n,r,i=0,o=("arc"===e?(i=(n=((t[5]-t[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI))*t[2]*t[3]/8,"open"!==t[6]&&"chord"!==t[6]||(r=t[0],c=t[1],o=t[0]+t[2]/2*Math.cos(t[4]).toFixed(2),u=t[1]+t[3]/2*Math.sin(t[4]).toFixed(2),s=t[0]+t[2]/2*Math.cos(t[5]).toFixed(2),a=t[1]+t[3]/2*Math.sin(t[5]).toFixed(2),r=Math.abs(r*(u-a)+o*(a-c)+s*(c-u))/2,n>Math.PI?i+=r:i-=r)):"ellipse"===e||"circle"===e?i=3.14*t[2]/2*t[3]/2:"line"===e||"point"===e?i=0:"quadrilateral"===e?i=Math.abs((t[6]+t[0])*(t[7]-t[1])+(t[0]+t[2])*(t[1]-t[3])+(t[2]+t[4])*(t[3]-t[5])+(t[4]+t[6])*(t[5]-t[7]))/2:"rectangle"===e||"square"===e?i=t[2]*t[3]:"triangle"===e&&(i=Math.abs(t[0]*(t[3]-t[5])+t[2]*(t[5]-t[1])+t[4]*(t[1]-t[3]))/2),this.width*this._pixelDensity),a=this.height*this._pixelDensity,s=[new DOMPoint(0,0),new DOMPoint(o,0),new DOMPoint(o,a),new DOMPoint(0,a)],l=(this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform()).inverse(),c=s.map((function(e){return e.matrixTransform(l)})),u=Math.abs((c[3].x+c[0].x)*(c[3].y-c[0].y)+(c[0].x+c[1].x)*(c[0].y-c[1].y)+(c[1].x+c[2].x)*(c[1].y-c[2].y)+(c[2].x+c[3].x)*(c[2].y-c[3].y))/2;return Math.round(100*i/u)},e=r.default,n.default=e},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],266:[function(e,t,n){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.concat"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,(e=(e=e("../core/main"))&&e.__esModule?e:{default:e}).default.prototype._updateTextOutput=function(e){var t,n,r,i;this.dummyDOM.querySelector("#".concat(e,"_summary"))&&(t=this._accessibleOutputs[e],r=function(e,t,n,r){return n="Your output is a, ".concat(n," by ").concat(r," pixels, ").concat(t," canvas containing the following"),1===e?"".concat(n," shape:"):"".concat(n," ").concat(e," shapes:")}((n=function(e,t){var n,r="",i=0;for(n in t)for(var o in t[n]){var a='<li><a href="#'.concat(e,"shape").concat(i,'">').concat(t[n][o].color," ").concat(n,"</a>");"line"===n?a+=", ".concat(t[n][o].pos,", ").concat(t[n][o].length," pixels long.</li>"):(a+=", at ".concat(t[n][o].pos),"point"!==n&&(a+=", covering ".concat(t[n][o].area,"% of the canvas")),a+=".</li>"),r+=a,i++}return{numShapes:i,listShapes:r}}(e,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),i=function(e,t){var n,r="",i=0;for(n in t)for(var o in t[n]){var a='<tr id="'.concat(e,"shape").concat(i,'"><th>').concat(t[n][o].color," ").concat(n,"</th>");"line"===n?a+="<td>location = ".concat(t[n][o].pos,"</td><td>length = ").concat(t[n][o].length," pixels</td></tr>"):(a+="<td>location = ".concat(t[n][o].pos,"</td>"),"point"!==n&&(a+="<td> area = ".concat(t[n][o].area,"%</td>")),a+="</tr>"),r+=a,i++}return r}(e,this.ingredients.shapes),r!==t.summary.innerHTML&&(t.summary.innerHTML=r),n.listShapes!==t.list.innerHTML&&(t.list.innerHTML=n.listShapes),i!==t.shapeDetails.innerHTML&&(t.shapeDetails.innerHTML=i),this._accessibleOutputs[e]=t)},e=e.default,n.default=e},{"../core/main":283,"core-js/modules/es.array.concat":153}],267:[function(e,t,n){"use strict";var r=(r=e("./core/main"))&&r.__esModule?r:{default:r};e("./core/constants"),e("./core/environment"),e("./core/friendly_errors/stacktrace"),e("./core/friendly_errors/validate_params"),e("./core/friendly_errors/file_errors"),e("./core/friendly_errors/fes_core"),e("./core/friendly_errors/sketch_reader"),e("./core/helpers"),e("./core/legacy"),e("./core/preload"),e("./core/p5.Element"),e("./core/p5.Graphics"),e("./core/p5.Renderer"),e("./core/p5.Renderer2D"),e("./core/rendering"),e("./core/shim"),e("./core/structure"),e("./core/transform"),e("./core/shape/2d_primitives"),e("./core/shape/attributes"),e("./core/shape/curves"),e("./core/shape/vertex"),e("./accessibility/outputs"),e("./accessibility/textOutput"),e("./accessibility/gridOutput"),e("./accessibility/color_namer"),e("./color/color_conversion"),e("./color/creating_reading"),e("./color/p5.Color"),e("./color/setting"),e("./data/p5.TypedDict"),e("./data/local_storage.js"),e("./dom/dom"),e("./accessibility/describe"),e("./events/acceleration"),e("./events/keyboard"),e("./events/mouse"),e("./events/touch"),e("./image/filters"),e("./image/image"),e("./image/loading_displaying"),e("./image/p5.Image"),e("./image/pixels"),e("./io/files"),e("./io/p5.Table"),e("./io/p5.TableRow"),e("./io/p5.XML"),e("./math/calculation"),e("./math/math"),e("./math/noise"),e("./math/p5.Vector"),e("./math/random"),e("./math/trigonometry"),e("./typography/attributes"),e("./typography/loading_displaying"),e("./typography/p5.Font"),e("./utilities/array_functions"),e("./utilities/conversion"),e("./utilities/string_functions"),e("./utilities/time_date"),e("./webgl/3d_primitives"),e("./webgl/interaction"),e("./webgl/light"),e("./webgl/loading"),e("./webgl/material"),e("./webgl/p5.Camera"),e("./webgl/p5.DataArray"),e("./webgl/p5.Geometry"),e("./webgl/p5.Matrix"),e("./webgl/p5.Quat"),e("./webgl/p5.RendererGL.Immediate"),e("./webgl/p5.RendererGL"),e("./webgl/p5.RendererGL.Retained"),e("./webgl/p5.Framebuffer"),e("./webgl/p5.Shader"),e("./webgl/p5.RenderBuffer"),e("./webgl/p5.Texture"),e("./webgl/text"),e("./core/init"),t.exports=r.default},{"./accessibility/color_namer":262,"./accessibility/describe":263,"./accessibility/gridOutput":264,"./accessibility/outputs":265,"./accessibility/textOutput":266,"./color/color_conversion":268,"./color/creating_reading":269,"./color/p5.Color":270,"./color/setting":271,"./core/constants":272,"./core/environment":273,"./core/friendly_errors/fes_core":274,"./core/friendly_errors/file_errors":275,"./core/friendly_errors/sketch_reader":276,"./core/friendly_errors/stacktrace":277,"./core/friendly_errors/validate_params":278,"./core/helpers":279,"./core/init":280,"./core/legacy":282,"./core/main":283,"./core/p5.Element":284,"./core/p5.Graphics":285,"./core/p5.Renderer":286,"./core/p5.Renderer2D":287,"./core/preload":288,"./core/rendering":289,"./core/shape/2d_primitives":290,"./core/shape/attributes":291,"./core/shape/curves":292,"./core/shape/vertex":293,"./core/shim":294,"./core/structure":295,"./core/transform":296,"./data/local_storage.js":297,"./data/p5.TypedDict":298,"./dom/dom":299,"./events/acceleration":300,"./events/keyboard":301,"./events/mouse":302,"./events/touch":303,"./image/filters":304,"./image/image":305,"./image/loading_displaying":306,"./image/p5.Image":307,"./image/pixels":308,"./io/files":309,"./io/p5.Table":310,"./io/p5.TableRow":311,"./io/p5.XML":312,"./math/calculation":313,"./math/math":314,"./math/noise":315,"./math/p5.Vector":316,"./math/random":317,"./math/trigonometry":318,"./typography/attributes":319,"./typography/loading_displaying":320,"./typography/p5.Font":321,"./utilities/array_functions":322,"./utilities/conversion":323,"./utilities/string_functions":324,"./utilities/time_date":325,"./webgl/3d_primitives":326,"./webgl/interaction":328,"./webgl/light":329,"./webgl/loading":330,"./webgl/material":331,"./webgl/p5.Camera":332,"./webgl/p5.DataArray":333,"./webgl/p5.Framebuffer":334,"./webgl/p5.Geometry":335,"./webgl/p5.Matrix":336,"./webgl/p5.Quat":337,"./webgl/p5.RenderBuffer":338,"./webgl/p5.RendererGL":341,"./webgl/p5.RendererGL.Immediate":339,"./webgl/p5.RendererGL.Retained":340,"./webgl/p5.Shader":342,"./webgl/p5.Texture":343,"./webgl/text":344}],268:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,(e=(e=e("../core/main"))&&e.__esModule?e:{default:e}).default.ColorConversion={_hsbaToHSLA:function(e){var t=e[0],n=e[1],r=e[2],i=(2-n)*r/2;return 0!=i&&(1==i?n=0:i<.5?n/=2-n:n=n*r/(2-2*i)),[t,n,i,e[3]]},_hsbaToRGBA:function(e){var t,n,r,i,o,a=6*e[0],s=e[1],l=e[2];return 0===s?[l,l,l,e[3]]:(n=l*(1-s),r=l*(1-s*(a-(t=Math.floor(a)))),s=l*(1-s*(1+t-a)),a=1===t?(i=r,o=l,n):2===t?(i=n,o=l,s):3===t?(i=n,o=r,l):4===t?(i=s,o=n,l):5===t?(i=l,o=n,r):(i=l,o=s,n),[i,o,a,e[3]])},_hslaToHSBA:function(e){var t=e[0],n=e[1],r=e[2],i=r<.5?(1+n)*r:r+n-r*n;return[t,n=2*(i-r)/i,i,e[3]]},_hslaToRGBA:function(e){var t,n=6*e[0],r=e[1],i=e[2];return 0===r?[i,i,i,e[3]]:[(t=function(e,t,n){return e<0?e+=6:6<=e&&(e-=6),e<1?t+(n-t)*e:e<3?n:e<4?t+(n-t)*(4-e):t})(2+n,r=2*i-(i=i<.5?(1+r)*i:i+r-i*r),i),t(n,r,i),t(n-2,r,i),e[3]]},_rgbaToHSBA:function(e){var t,n,r=e[0],i=e[1],o=e[2],a=Math.max(r,i,o),s=a-Math.min(r,i,o);return 0==s?n=t=0:(n=s/a,r===a?t=(i-o)/s:i===a?t=2+(o-r)/s:o===a&&(t=4+(r-i)/s),t<0?t+=6:6<=t&&(t-=6)),[t/6,n,a,e[3]]},_rgbaToHSLA:function(e){var t,n,r,i=e[0],o=e[1],a=e[2],s=Math.max(i,o,a),l=s+(r=Math.min(i,o,a));return 0==(r=s-r)?n=t=0:(n=l<1?r/l:r/(2-l),i===s?t=(o-a)/r:o===s?t=2+(a-i)/r:a===s&&(t=4+(i-o)/r),t<0?t+=6:6<=t&&(t-=6)),[t/6,n,l/2,e[3]]}},e=e.default.ColorConversion,n.default=e},{"../core/main":283}],269:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.map"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(l=e("../core/main"))&&l.__esModule?l:{default:l},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function s(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,s=function(){return e},e)}e("./p5.Color"),e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),o.default.prototype.alpha=function(e){return o.default._validateParameters("alpha",arguments),this.color(e)._getAlpha()},o.default.prototype.blue=function(e){return o.default._validateParameters("blue",arguments),this.color(e)._getBlue()},o.default.prototype.brightness=function(e){return o.default._validateParameters("brightness",arguments),this.color(e)._getBrightness()},o.default.prototype.color=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return o.default._validateParameters("color",n),n[0]instanceof o.default.Color?n[0]:(e=Array.isArray(n[0])?n[0]:n,new o.default.Color(this,e))},o.default.prototype.green=function(e){return o.default._validateParameters("green",arguments),this.color(e)._getGreen()},o.default.prototype.hue=function(e){return o.default._validateParameters("hue",arguments),this.color(e)._getHue()},o.default.prototype.lerpColor=function(e,t,n){o.default._validateParameters("lerpColor",arguments),e instanceof o.default.Color||(e=color(e)),t instanceof o.default.Color||(t=color(t));var r,i,s,l=this._colorMode,c=this._colorMaxes;if(l===a.RGB)i=e.levels.map((function(e){return e/255})),s=t.levels.map((function(e){return e/255}));else if(l===a.HSB)e._getBrightness(),t._getBrightness(),i=e.hsba,s=t.hsba;else{if(l!==a.HSL)throw new Error("".concat(l," cannot be used for interpolation."));e._getLightness(),t._getLightness(),i=e.hsla,s=t.hsla}return n=Math.max(Math.min(n,1),0),void 0===this.lerp&&(this.lerp=function(e,t,n){return n*(t-e)+e}),l===a.RGB?r=this.lerp(i[0],s[0],n):(.5<Math.abs(i[0]-s[0])&&(i[0]>s[0]?s[0]+=1:i[0]+=1),1<=(r=this.lerp(i[0],s[0],n))&&--r),e=this.lerp(i[1],s[1],n),t=this.lerp(i[2],s[2],n),i=this.lerp(i[3],s[3],n),r*=c[l][0],e*=c[l][1],t*=c[l][2],i*=c[l][3],this.color(r,e,t,i)},o.default.prototype.paletteLerp=function(e,t){var n=e[0];if(t<n[1])return this.color(n[0]);for(var r=1;r<e.length;r++){var i,o=e[r];if(t<o[1])return i=e[r-1],this.lerpColor(this.color(i[0]),this.color(o[0]),(t-i[1])/(o[1]-i[1]))}return this.color(e[e.length-1][0])},o.default.prototype.lightness=function(e){return o.default._validateParameters("lightness",arguments),this.color(e)._getLightness()},o.default.prototype.red=function(e){return o.default._validateParameters("red",arguments),this.color(e)._getRed()},o.default.prototype.saturation=function(e){return o.default._validateParameters("saturation",arguments),this.color(e)._getSaturation()};var l=o.default;n.default=l},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"./p5.Color":270,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],270:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.trim"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.trim"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=c(e("../core/main")),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants")),s=c(e("./color_conversion"));function l(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,l=function(){return e},e)}function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},d=(e=/\s*/,/(\d{1,3})/),h=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,m=new RegExp("".concat(h.source,"%")),f={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",d.source,",",d.source,",",d.source,"\\)$"].join(e.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",m.source,",",m.source,",",m.source,"\\)$"].join(e.source),"i"),RGBA:new RegExp(["^rgba\\(",d.source,",",d.source,",",d.source,",",h.source,"\\)$"].join(e.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",m.source,",",m.source,",",m.source,",",h.source,"\\)$"].join(e.source),"i"),HSL:new RegExp(["^hsl\\(",d.source,",",m.source,",",m.source,"\\)$"].join(e.source),"i"),HSLA:new RegExp(["^hsla\\(",d.source,",",m.source,",",m.source,",",h.source,"\\)$"].join(e.source),"i"),HSB:new RegExp(["^hsb\\(",d.source,",",m.source,",",m.source,"\\)$"].join(e.source),"i"),HSBA:new RegExp(["^hsba\\(",d.source,",",m.source,",",m.source,",",h.source,"\\)$"].join(e.source),"i")};o.default.Color=function(){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");if(this._storeModeAndMaxes(t._colorMode,t._colorMaxes),![a.RGB,a.HSL,a.HSB].includes(this.mode))throw new Error("".concat(this.mode," is an invalid colorMode."));this._array=e._parseInputs.apply(this,n),this._calculateLevels()}var t,n,r;return t=e,r=[{key:"_parseInputs",value:function(t,n,r,i){var o,l=arguments.length,c=this.mode,u=this.maxes[c],d=[];if(3<=l){for(d[0]=t/u[0],d[1]=n/u[1],d[2]=r/u[2],d[3]="number"==typeof i?i/u[3]:1,o=d.length-1;0<=o;--o){var h=d[o];h<0?d[o]=0:1<h&&(d[o]=1)}return c===a.HSL?s.default._hslaToRGBA(d):c===a.HSB?s.default._hsbaToRGBA(d):d}if(1===l&&"string"==typeof t){if(r=t.trim().toLowerCase(),p[r])return e._parseInputs.call(this,p[r]);if(f.HEX3.test(r))return(d=f.HEX3.exec(r).slice(1).map((function(e){return parseInt(e+e,16)/255})))[3]=1,d;if(f.HEX6.test(r))return(d=f.HEX6.exec(r).slice(1).map((function(e){return parseInt(e,16)/255})))[3]=1,d;if(f.HEX4.test(r))return f.HEX4.exec(r).slice(1).map((function(e){return parseInt(e+e,16)/255}));if(f.HEX8.test(r))return f.HEX8.exec(r).slice(1).map((function(e){return parseInt(e,16)/255}));if(f.RGB.test(r))return(d=f.RGB.exec(r).slice(1).map((function(e){return e/255})))[3]=1,d;if(f.RGB_PERCENT.test(r))return(d=f.RGB_PERCENT.exec(r).slice(1).map((function(e){return parseFloat(e)/100})))[3]=1,d;if(f.RGBA.test(r))return f.RGBA.exec(r).slice(1).map((function(e,t){return 3===t?parseFloat(e):e/255}));if(f.RGBA_PERCENT.test(r))return f.RGBA_PERCENT.exec(r).slice(1).map((function(e,t){return 3===t?parseFloat(e):parseFloat(e)/100}));if(f.HSL.test(r)?(d=f.HSL.exec(r).slice(1).map((function(e,t){return 0===t?parseInt(e,10)/360:parseInt(e,10)/100})))[3]=1:f.HSLA.test(r)&&(d=f.HSLA.exec(r).slice(1).map((function(e,t){return 0===t?parseInt(e,10)/360:3===t?parseFloat(e):parseInt(e,10)/100}))),(d=d.map((function(e){return Math.max(Math.min(e,1),0)}))).length)return s.default._hslaToRGBA(d);if(f.HSB.test(r)?(d=f.HSB.exec(r).slice(1).map((function(e,t){return 0===t?parseInt(e,10)/360:parseInt(e,10)/100})))[3]=1:f.HSBA.test(r)&&(d=f.HSBA.exec(r).slice(1).map((function(e,t){return 0===t?parseInt(e,10)/360:3===t?parseFloat(e):parseInt(e,10)/100}))),d.length){for(o=d.length-1;0<=o;--o)d[o]=Math.max(Math.min(d[o],1),0);return s.default._hsbaToRGBA(d)}d=[1,1,1,1]}else{if(1!==l&&2!==l||"number"!=typeof t)throw new Error("".concat(arguments,"is not a valid color representation."));d[0]=t/u[2],d[1]=t/u[2],d[2]=t/u[2],d[3]="number"==typeof n?n/u[3]:1,d=d.map((function(e){return Math.max(Math.min(e,1),0)}))}return d}}],(n=[{key:"toString",value:function(e){var t=this.levels,n=this._array,r=n[3];switch(e){case"#rrggbb":return"#".concat(t[0]<16?"0".concat(t[0].toString(16)):t[0].toString(16),t[1]<16?"0".concat(t[1].toString(16)):t[1].toString(16),t[2]<16?"0".concat(t[2].toString(16)):t[2].toString(16));case"#rrggbbaa":return"#".concat(t[0]<16?"0".concat(t[0].toString(16)):t[0].toString(16),t[1]<16?"0".concat(t[1].toString(16)):t[1].toString(16),t[2]<16?"0".concat(t[2].toString(16)):t[2].toString(16),t[3]<16?"0".concat(t[3].toString(16)):t[3].toString(16));case"#rgb":return"#".concat(Math.round(15*n[0]).toString(16),Math.round(15*n[1]).toString(16),Math.round(15*n[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*n[0]).toString(16),Math.round(15*n[1]).toString(16),Math.round(15*n[2]).toString(16),Math.round(15*n[3]).toString(16));case"rgb":return"rgb(".concat(t[0],", ",t[1],", ",t[2],")");case"rgb%":return"rgb(".concat((100*n[0]).toPrecision(3),"%, ",(100*n[1]).toPrecision(3),"%, ",(100*n[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*n[0]).toPrecision(3),"%, ",(100*n[1]).toPrecision(3),"%, ",(100*n[2]).toPrecision(3),"%, ",(100*n[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=s.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[a.HSB][0],", ",this.hsba[1]*this.maxes[a.HSB][1],", ",this.hsba[2]*this.maxes[a.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=s.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=s.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[a.HSB][0],", ",this.hsba[1]*this.maxes[a.HSB][1],", ",this.hsba[2]*this.maxes[a.HSB][2],", ",r,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=s.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*r).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=s.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[a.HSL][0],", ",this.hsla[1]*this.maxes[a.HSL][1],", ",this.hsla[2]*this.maxes[a.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=s.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=s.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[a.HSL][0],", ",this.hsla[1]*this.maxes[a.HSL][1],", ",this.hsla[2]*this.maxes[a.HSL][2],", ",r,")");case"hsla%":return this.hsla||(this.hsla=s.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*r).toPrecision(3),"%)");default:return"rgba(".concat(t[0],",",t[1],",",t[2],",",r,")")}}},{key:"setRed",value:function(e){this._array[0]=e/this.maxes[a.RGB][0],this._calculateLevels()}},{key:"setGreen",value:function(e){this._array[1]=e/this.maxes[a.RGB][1],this._calculateLevels()}},{key:"setBlue",value:function(e){this._array[2]=e/this.maxes[a.RGB][2],this._calculateLevels()}},{key:"setAlpha",value:function(e){this._array[3]=e/this.maxes[this.mode][3],this._calculateLevels()}},{key:"_calculateLevels",value:function(){for(var e=this._array,t=this.levels=new Array(e.length),n=e.length-1;0<=n;--n)t[n]=Math.round(255*e[n]);this.hsla=null,this.hsba=null}},{key:"_getAlpha",value:function(){return this._array[3]*this.maxes[this.mode][3]}},{key:"_storeModeAndMaxes",value:function(e,t){this.mode=e,this.maxes=t}},{key:"_getMode",value:function(){return this.mode}},{key:"_getMaxes",value:function(){return this.maxes}},{key:"_getBlue",value:function(){return this._array[2]*this.maxes[a.RGB][2]}},{key:"_getBrightness",value:function(){return this.hsba||(this.hsba=s.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[a.HSB][2]}},{key:"_getGreen",value:function(){return this._array[1]*this.maxes[a.RGB][1]}},{key:"_getHue",value:function(){return this.mode===a.HSB?(this.hsba||(this.hsba=s.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[a.HSB][0]):(this.hsla||(this.hsla=s.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[a.HSL][0])}},{key:"_getLightness",value:function(){return this.hsla||(this.hsla=s.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[a.HSL][2]}},{key:"_getRed",value:function(){return this._array[0]*this.maxes[a.RGB][0]}},{key:"_getSaturation",value:function(){return this.mode===a.HSB?(this.hsba||(this.hsba=s.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[a.HSB][1]):(this.hsla||(this.hsla=s.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[a.HSL][1])}}])&&u(t.prototype,n),r&&u(t,r),e}(),d=o.default.Color,n.default=d},{"../core/constants":272,"../core/main":283,"./color_conversion":268,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],271:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.fill"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(l=e("../core/main"))&&l.__esModule?l:{default:l},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function s(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,s=function(){return e},e)}e("./p5.Color"),o.default.prototype.beginClip=function(){this._renderer.beginClip(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})},o.default.prototype.endClip=function(){this._renderer.endClip()},o.default.prototype.clip=function(e,t){this._renderer.beginClip(t),e(),this._renderer.endClip(t)},o.default.prototype.background=function(){var e;return(e=this._renderer).background.apply(e,arguments),this},o.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},o.default.prototype.colorMode=function(e,t,n,r,i){return o.default._validateParameters("colorMode",arguments),e!==a.RGB&&e!==a.HSB&&e!==a.HSL||(this._colorMode=e,e=this._colorMaxes[e],2===arguments.length?(e[0]=t,e[1]=t,e[2]=t,e[3]=t):4===arguments.length?(e[0]=t,e[1]=n,e[2]=r):5===arguments.length&&(e[0]=t,e[1]=n,e[2]=r,e[3]=i)),this},o.default.prototype.fill=function(){var e;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(e=this._renderer).fill.apply(e,arguments),this},o.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},o.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},o.default.prototype.stroke=function(){var e;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(e=this._renderer).stroke.apply(e,arguments),this},o.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&void 0!==arguments[0]?arguments[0]:255,1<arguments.length&&void 0!==arguments[1]?arguments[1]:255),this},o.default.prototype.noErase=function(){return this._renderer.noErase(),this};var l=o.default;n.default=l},{"../core/constants":272,"../core/main":283,"./p5.Color":270,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],272:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.QUADRATIC=n.LINEAR=n._CTX_MIDDLE=n._DEFAULT_LEADMULT=n._DEFAULT_TEXT_FILL=n.WORD=n.CHAR=n.BOLDITALIC=n.BOLD=n.ITALIC=n.NORMAL=n.BLUR=n.ERODE=n.DILATE=n.POSTERIZE=n.INVERT=n.OPAQUE=n.GRAY=n.THRESHOLD=n.BURN=n.DODGE=n.SOFT_LIGHT=n.HARD_LIGHT=n.OVERLAY=n.REPLACE=n.SCREEN=n.MULTIPLY=n.EXCLUSION=n.SUBTRACT=n.DIFFERENCE=n.LIGHTEST=n.DARKEST=n.ADD=n.REMOVE=n.BLEND=n.UP_ARROW=n.TAB=n.SHIFT=n.RIGHT_ARROW=n.RETURN=n.OPTION=n.LEFT_ARROW=n.ESCAPE=n.ENTER=n.DOWN_ARROW=n.DELETE=n.CONTROL=n.BACKSPACE=n.ALT=n.AUTO=n.HSL=n.HSB=n.RGB=n.MITER=n.BEVEL=n.ROUND=n.SQUARE=n.PROJECT=n.PIE=n.CHORD=n.OPEN=n.CLOSE=n.TESS=n.QUAD_STRIP=n.QUADS=n.TRIANGLE_STRIP=n.TRIANGLE_FAN=n.TRIANGLES=n.LINE_LOOP=n.LINE_STRIP=n.LINES=n.POINTS=n.BASELINE=n.BOTTOM=n.TOP=n.CENTER=n.LEFT=n.RIGHT=n.RADIUS=n.CORNERS=n.CORNER=n.RAD_TO_DEG=n.DEG_TO_RAD=n.RADIANS=n.DEGREES=n.TWO_PI=n.TAU=n.QUARTER_PI=n.PI=n.HALF_PI=n.WAIT=n.TEXT=n.MOVE=n.HAND=n.CROSS=n.ARROW=n.WEBGL2=n.WEBGL=n.P2D=n.VERSION=void 0,n.RGBA=n.HALF_FLOAT=n.FLOAT=n.UNSIGNED_INT=n.UNSIGNED_BYTE=n.COVER=n.CONTAIN=n.FALLBACK=n.LABEL=n.AXES=n.GRID=n._DEFAULT_FILL=n._DEFAULT_STROKE=n.PORTRAIT=n.LANDSCAPE=n.SMOOTH=n.FLAT=n.MIRROR=n.CLAMP=n.REPEAT=n.NEAREST=n.IMAGE=n.IMMEDIATE=n.TEXTURE=n.FILL=n.STROKE=n.CURVE=n.BEZIER=void 0;var r=Math.PI,i=(n.VERSION="1.11.0",n.P2D="p2d",n.WEBGL="webgl",n.WEBGL2="webgl2",n.ARROW="default",n.CROSS="crosshair",n.HAND="pointer",n.MOVE="move",n.TEXT="text",n.WAIT="wait",r/2);n.HALF_PI=i,i=r,n.PI=i,i=r/4,n.QUARTER_PI=i,i=2*r,n.TAU=i,i=2*r,n.TWO_PI=i,n.DEGREES="degrees",n.RADIANS="radians",i=r/180,n.DEG_TO_RAD=i,i=180/r,n.RAD_TO_DEG=i,n.CORNER="corner",n.CORNERS="corners",n.RADIUS="radius",n.RIGHT="right",n.LEFT="left",n.CENTER="center",n.TOP="top",n.BOTTOM="bottom",n.BASELINE="alphabetic",n.POINTS=0,n.LINES=1,n.LINE_STRIP=3,n.LINE_LOOP=2,n.TRIANGLES=4,n.TRIANGLE_FAN=6,n.TRIANGLE_STRIP=5,n.QUADS="quads",n.QUAD_STRIP="quad_strip",n.TESS="tess",n.CLOSE="close",n.OPEN="open",n.CHORD="chord",n.PIE="pie",n.PROJECT="square",n.SQUARE="butt",n.ROUND="round",n.BEVEL="bevel",n.MITER="miter",n.RGB="rgb",n.HSB="hsb",n.HSL="hsl",n.AUTO="auto",n.ALT=18,n.BACKSPACE=8,n.CONTROL=17,n.DELETE=46,n.DOWN_ARROW=40,n.ENTER=13,n.ESCAPE=27,n.LEFT_ARROW=37,n.OPTION=18,n.RETURN=13,n.RIGHT_ARROW=39,n.SHIFT=16,n.TAB=9,n.UP_ARROW=38,n.BLEND="source-over",n.REMOVE="destination-out",n.ADD="lighter",n.DARKEST="darken",n.LIGHTEST="lighten",n.DIFFERENCE="difference",n.SUBTRACT="subtract",n.EXCLUSION="exclusion",n.MULTIPLY="multiply",n.SCREEN="screen",n.REPLACE="copy",n.OVERLAY="overlay",n.HARD_LIGHT="hard-light",n.SOFT_LIGHT="soft-light",n.DODGE="color-dodge",n.BURN="color-burn",n.THRESHOLD="threshold",n.GRAY="gray",n.OPAQUE="opaque",n.INVERT="invert",n.POSTERIZE="posterize",n.DILATE="dilate",n.ERODE="erode",n.BLUR="blur",n.NORMAL="normal",n.ITALIC="italic",n.BOLD="bold",n.BOLDITALIC="bold italic",n.CHAR="CHAR",n.WORD="WORD",n._DEFAULT_TEXT_FILL="#000000",n._DEFAULT_LEADMULT=1.25,n._CTX_MIDDLE="middle",n.LINEAR="linear",n.QUADRATIC="quadratic",n.BEZIER="bezier",n.CURVE="curve",n.STROKE="stroke",n.FILL="fill",n.TEXTURE="texture",n.IMMEDIATE="immediate",n.IMAGE="image",n.NEAREST="nearest",n.REPEAT="repeat",n.CLAMP="clamp",n.MIRROR="mirror",n.FLAT="flat",n.SMOOTH="smooth",n.LANDSCAPE="landscape",n.PORTRAIT="portrait",n._DEFAULT_STROKE="#000000",n._DEFAULT_FILL="#FFFFFF",n.GRID="grid",n.AXES="axes",n.LABEL="label",n.FALLBACK="fallback",n.CONTAIN="contain",n.COVER="cover",n.UNSIGNED_BYTE="unsigned-byte",n.UNSIGNED_INT="unsigned-int",n.FLOAT="float",n.HALF_FLOAT="half-float",n.RGBA="rgba"},{}],273:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.search"),e("core-js/modules/es.string.split"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.search"),e("core-js/modules/es.string.split"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(a=e("./main"))&&a.__esModule?a:{default:a},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("./constants"));function s(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,s=function(){return e},e)}var l=[a.ARROW,a.CROSS,a.HAND,a.MOVE,a.TEXT,a.WAIT],c=(o.default.prototype._frameRate=0,o.default.prototype._lastFrameTime=window.performance.now(),o.default.prototype._targetFrameRate=60,window.print),u=!1;function p(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function d(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}o.default.prototype.print=function(){var e;arguments.length?(e=console).log.apply(e,arguments):u||(c(),window.confirm("You just tried to print the webpage. Do you want to prevent this from running again?")&&(u=!0))},o.default.prototype.frameCount=0,o.default.prototype.deltaTime=0,o.default.prototype.focused=document.hasFocus(),o.default.prototype.cursor=function(e,t,n){var r,i="auto",o=this._curElement.elt;l.includes(e)?i=e:"string"==typeof e&&(r="",t&&n&&"number"==typeof t&&"number"==typeof n&&(r="".concat(t," ").concat(n)),i="http://"===e.substring(0,7)||"https://"===e.substring(0,8)||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(e)?"url(".concat(e,") ").concat(r,", auto"):e),o.style.cursor=i},o.default.prototype.frameRate=function(e){return o.default._validateParameters("frameRate",arguments),"number"!=typeof e||e<0?this._frameRate:(this._setProperty("_targetFrameRate",e),0===e&&this._setProperty("_frameRate",e),this)},o.default.prototype.getFrameRate=function(){return this.frameRate()},o.default.prototype.setFrameRate=function(e){return this.frameRate(e)},o.default.prototype.getTargetFrameRate=function(){return this._targetFrameRate},o.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},o.default.prototype.webglVersion=a.P2D,o.default.prototype.displayWidth=screen.width,o.default.prototype.displayHeight=screen.height,o.default.prototype.windowWidth=0,o.default.prototype.windowHeight=0,o.default.prototype._onresize=function(e){this._setProperty("windowWidth",p()),this._setProperty("windowHeight",d());var t=this._isGlobal?window:this;"function"!=typeof t.windowResized||void 0===(t=t.windowResized(e))||t||e.preventDefault()},o.default.prototype._updateWindowSize=function(){this._setProperty("windowWidth",p()),this._setProperty("windowHeight",d())},o.default.prototype.width=0,o.default.prototype.height=0,o.default.prototype.fullscreen=function(e){if(o.default._validateParameters("fullscreen",arguments),void 0===e)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(e){if(e=document.documentElement,!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},o.default.prototype.pixelDensity=function(e){var t;return o.default._validateParameters("pixelDensity",arguments),"number"==typeof e?(e!==this._pixelDensity&&(this._pixelDensity=this._maxAllowedPixelDimensions=e),(t=this).resizeCanvas(this.width,this.height,!0)):t=this._pixelDensity,t},o.default.prototype.displayDensity=function(){return window.devicePixelRatio},o.default.prototype.getURL=function(){return location.href},o.default.prototype.getURLPath=function(){return location.pathname.split("/").filter((function(e){return""!==e}))},o.default.prototype.getURLParams=function(){for(var e,t=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,n={};null!=(e=t.exec(location.search));)e.index===t.lastIndex&&t.lastIndex++,n[e[1]]=e[2];return n},e=o.default,n.default=e},{"./constants":272,"./main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.search":205,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],274:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.get-own-property-names"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.starts-with"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.get-own-property-names"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.starts-with"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(l=e("../main"))&&l.__esModule?l:{default:l};function i(e,t){t=t||console.log.bind(console),o||a(),o.some((function(n){var r;if(e.message&&null!==e.message.match("\\W?".concat(n.name,"\\W")))return r="function"===n.type?"".concat(n.name,"()"):n.name,t("Did you just try to use p5.js's ".concat(r," ").concat(n.type,"? If so, you may want to move it into your sketch's setup() function.\n\nFor more details, see: ").concat(s)),!0}))}e("../internationalization");var o=null,a=null,s=(r.default._friendlyError=r.default._checkForUserDefinedFunctions=r.default._fesErrorMonitor=function(){},o=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),l=(a=function(){function t(e){return Object.getOwnPropertyNames(e).filter((function(e){return"_"!==e[0]&&!(e in n)&&(n[e]=!0)})).map((function(t){var n="function"==typeof e[t]?"function":t===t.toUpperCase()?"constant":"variable";return{name:t,type:n}}))}var n={};(o=[].concat(t(r.default.prototype),t(e("../constants")))).sort((function(e,t){return t.name.length-e.name.length}))},r.default.prototype._helpForMisusedAtTopLevelCode=i,"complete"!==document.readyState&&(window.addEventListener("error",i,!1),window.addEventListener("load",(function(){window.removeEventListener("error",i,!1)}))),r.default);n.default=l},{"../constants":272,"../internationalization":281,"../main":283,"./browser_errors":void 0,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-names":187,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.starts-with":207,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],275:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(r=e("../main"))&&r.__esModule?r:{default:r};e("../internationalization"),r.default._friendlyFileLoadError=function(){},e=r.default,n.default=e},{"../internationalization":281,"../main":283}],276:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("../main"));function a(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,a=function(){return e},e)}e("../internationalization"),function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n,r,o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&((r=s?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(o,n,r):o[n]=e[n]);o.default=e,t&&t.set(e,o)}(e("../constants")),o.default._fesCodeReader=function(){};var s=o.default;n.default=s},{"../constants":272,"../internationalization":281,"../main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],277:[function(e,t,n){"use strict";function r(){var e=/(^|@)\S+:\d+/,t=/^\s*at .*(\S+:\d+|\(native\))/m,n=/^(eval@)?(\[native code])?$/;return{parse:function(e){return void 0!==e.stacktrace||void 0!==e["opera#sourceloc"]?this.parseOpera(e):e.stack&&e.stack.match(t)?this.parseV8OrIE(e):e.stack?this.parseFFOrSafari(e):void 0},extractLocation:function(e){return-1===e.indexOf(":")?[e]:[(e=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/[()]/g,"")))[1],e[2]||void 0,e[3]||void 0]},parseV8OrIE:function(e){return e.stack.split("\n").filter((function(e){return!!e.match(t)}),this).map((function(e){var t=(n=(e=-1<e.indexOf("(eval ")?e.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):e).replace(/^\s+/,"").replace(/\(eval code/g,"(")).match(/ (\((.+):(\d+):(\d+)\)$)/),n=(n=t?n.replace(t[0],""):n).split(/\s+/).slice(1);return t=this.extractLocation(t?t[1]:n.pop()),{functionName:n.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(t[0])?void 0:t[0],lineNumber:t[1],columnNumber:t[2],source:e}}),this)},parseFFOrSafari:function(e){return e.stack.split("\n").filter((function(e){return!e.match(n)}),this).map((function(e){var t,n;return-1===(e=-1<e.indexOf(" > eval")?e.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):e).indexOf("@")&&-1===e.indexOf(":")?{functionName:e}:{functionName:(n=e.match(t=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&n[1]?n[1]:void 0,fileName:(n=this.extractLocation(e.replace(t,"")))[0],lineNumber:n[1],columnNumber:n[2],source:e}}),this)},parseOpera:function(e){return!e.stacktrace||-1<e.message.indexOf("\n")&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)/i,n=e.message.split("\n"),r=[],i=2,o=n.length;i<o;i+=2){var a=t.exec(n[i]);a&&r.push({fileName:a[2],lineNumber:a[1],source:n[i]})}return r},parseOpera10:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=e.stacktrace.split("\n"),r=[],i=0,o=n.length;i<o;i+=2){var a=t.exec(n[i]);a&&r.push({functionName:a[3]||void 0,fileName:a[2],lineNumber:a[1],source:n[i]})}return r},parseOpera11:function(t){return t.stack.split("\n").filter((function(t){return!!t.match(e)&&!t.match(/^Error created at/)}),this).map((function(e){var t,n=e.split("@"),r=this.extractLocation(n.pop());return{functionName:(n=n.shift()||"").replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:void 0===(t=n.match(/\(([^)]*)\)/)?n.replace(/^[^(]+\(([^)]*)\)$/,"$1"):t)||"[arguments not available]"===t?void 0:t.split(","),fileName:r[0],lineNumber:r[1],columnNumber:r[2],source:e}}),this)}}}e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,(e=(e=e("../main"))&&e.__esModule?e:{default:e}).default._getErrorStackParser=function(){return new r},e=e.default,n.default=e},{"../main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206}],278:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=(i=e("../main"))&&i.__esModule?i:{default:i};function o(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,o=function(){return e},e)}function a(e){return(a="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}(function(e){if(!(e&&e.__esModule||null===e||"object"!==a(e)&&"function"!=typeof e)){var t=o();if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var s;Object.prototype.hasOwnProperty.call(e,n)&&((s=i?Object.getOwnPropertyDescriptor(e,n):null)&&(s.get||s.set)?Object.defineProperty(r,n,s):r[n]=e[n])}r.default=e,t&&t.set(e,r)}})(e("../constants")),e("../internationalization"),i.default._validateParameters=i.default._clearValidateParamsCache=function(){},e=i.default,n.default=e},{"../../../docs/parameterData.json":void 0,"../constants":272,"../internationalization":281,"../main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.function.name":174,"core-js/modules/es.map":175,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],279:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var s;Object.prototype.hasOwnProperty.call(e,n)&&((s=o?Object.getOwnPropertyDescriptor(e,n):null)&&(s.get||s.set)?Object.defineProperty(r,n,s):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("./constants"));function a(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,a=function(){return e},e)}n.default={modeAdjust:function(e,t,n,r,i){return i===o.CORNER?{x:e,y:t,w:n,h:r}:i===o.CORNERS?{x:e,y:t,w:n-e,h:r-t}:i===o.RADIUS?{x:e-n,y:t-r,w:2*n,h:2*r}:i===o.CENTER?{x:e-.5*n,y:t-.5*r,w:n,h:r}:void 0}}},{"./constants":272,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],280:[function(e,t,n){"use strict";e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator");var r=(i=e("../core/main"))&&i.__esModule?i:{default:i};e("./internationalization");var i=Promise.resolve();Promise.all([new Promise((function(e,t){"complete"===document.readyState?e():window.addEventListener("load",e,!1)})),i]).then((function(){var e;void 0!==window._setupDone?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(e=new Event("p5Ready"),window.dispatchEvent(e),(window.setup&&"function"==typeof window.setup||window.draw&&"function"==typeof window.draw)&&!r.default.instance&&new r.default)}))},{"../core/main":283,"./internationalization":281,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.string.iterator":200,"core-js/modules/web.dom-collections.iterator":246}],281:[function(e,t,n){"use strict";e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.setTranslatorLanguage=n.currentTranslatorLanguage=n.availableTranslatorLanguages=n.initialize=n.translator=void 0;var r,i=a(e("i18next")),o=a(e("i18next-browser-languagedetector"));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.init(t,n)}var t;return(t=[{key:"fetchWithTimeout",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:2e3;return Promise.race([fetch(e,t),new Promise((function(e,t){return setTimeout((function(){return t(new Error("timeout"))}),n)}))])}},{key:"init",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.services=e,this.options=t}},{key:"read",value:function(e,t,n){var i=this.options.loadPath;e===this.options.fallback?n(null,r[e][t]):(void 0).includes(e)?(i=this.services.interpolator.interpolate(i,{lng:e,ns:t}),this.loadUrl(i,n)):n("Not found",!1)}},{key:"loadUrl",value:function(e,t){this.fetchWithTimeout(e).then((function(t){if(t.ok)return t.json();throw new Error("failed loading ".concat(e))}),(function(){throw new Error("failed loading ".concat(e))})).then((function(e){return t(null,e)})).catch(t)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}();s.type="backend",n.translator=function(e,t){console.debug("p5.js translator called before translations were loaded"),i.default.t(e,t)},n.initialize=function(){return i.default.use(o.default).use(s).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:r}).then((function(e){n.translator=e}),(function(e){return console.debug("Translations failed to load (".concat(e,")"))}))},n.availableTranslatorLanguages=function(){return i.default.languages},n.currentTranslatorLanguage=function(e){return i.default.language},n.setTranslatorLanguage=function(e){return i.default.changeLanguage(e||void 0,(function(e){return console.debug("Translations failed to load (".concat(e,")"))}))}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/web.dom-collections.iterator":246,i18next:3,"i18next-browser-languagedetector":3}],282:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,(e=(e=e("./main"))&&e.__esModule?e:{default:e}).default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},e.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},e.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},e.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},e=e.default,n.default=e},{"./main":283}],283:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.get-own-property-names"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.get-own-property-names"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("./shim");var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var s;Object.prototype.hasOwnProperty.call(e,n)&&((s=o?Object.getOwnPropertyDescriptor(e,n):null)&&(s.get||s.set)?Object.defineProperty(r,n,s):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("./constants"));function a(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,a=function(){return e},e)}var s,l=function(){function e(t,n){var r=this;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._maxAllowedPixelDimensions=0,this._userNode=n,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._startListener=null,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._recording=!1,this.touchstart=!1,this.touchend=!1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={},n=Object.getOwnPropertyNames(e.prototype._registeredMethods);var i=!0,o=!1,a=void 0;try{for(var s,l=n[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value;this._registeredMethods[c]=e.prototype._registeredMethods[c].slice()}}catch(t){o=!0,a=t}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),e.prototype.callRegisteredHooksFor=function(t){var n=this||e.prototype,r=this._isGlobal?window:this;if(n._registeredMethods.hasOwnProperty(t)){n=n._registeredMethods[t];var i=!0,o=void(t=!1);try{for(var a,s=n[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;"function"==typeof l&&l.call(r)}}catch(n){t=!0,o=n}finally{try{i||null==s.return||s.return()}finally{if(t)throw o}}}},this._start=function(){r._userNode&&"string"==typeof r._userNode&&(r._userNode=document.getElementById(r._userNode));var t=r._isGlobal?window:r;if(t.preload){r.callRegisteredHooksFor("beforePreload");var n,i=document.getElementById(r._loadingScreenId),o=(i||((i=document.createElement("div")).innerHTML="Loading...",i.style.position="absolute",i.id=r._loadingScreenId,(r._userNode||document.body).appendChild(i)),r._preloadMethods);for(n in o){o[n]=o[n]||e;var a=o[n];a!==e.prototype&&a!==e||(r._isGlobal&&(window[n]=r._wrapPreload(r,n)),a=r),r._registeredPreloadMethods[n]=a[n],a[n]=r._wrapPreload(a,n)}t.preload(),r._runIfPreloadsAreDone()}else r._setup(),r._recording||r._draw()},this._runIfPreloadsAreDone=function(){var e,t=this._isGlobal?window:this;0===t._preloadCount&&((e=document.getElementById(t._loadingScreenId))&&e.parentNode.removeChild(e),this.callRegisteredHooksFor("afterPreload"),this._setupDone||(this._lastTargetFrameTime=window.performance.now(),this._lastRealFrameTime=window.performance.now(),t._setup(),this._recording||t._draw()))},this._decrementPreload=function(){var e=this._isGlobal?window:this;e._preloadDone||"function"!=typeof e.preload||(e._setProperty("_preloadCount",e._preloadCount-1),e._runIfPreloadsAreDone())},this._wrapPreload=function(e,t){var n=this;return function(){n._incrementPreload();for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n._registeredPreloadMethods[t].apply(e,i)}},this._incrementPreload=function(){var e=this._isGlobal?window:this;e._preloadDone||e._setProperty("_preloadCount",e._preloadCount+1)},this._setup=function(){r.callRegisteredHooksFor("beforeSetup"),r.createCanvas(r._defaultCanvasSize.width,r._defaultCanvasSize.height,"p2d");var e=r._isGlobal?window:r;if("function"==typeof e.preload)for(var t in r._preloadMethods)e[t]=r._preloadMethods[t][t],e[t]&&r&&(e[t]=e[t].bind(r));r._millisStart=window.performance.now(),e._preloadDone=!0,"function"==typeof e.setup&&e.setup();var n=document.getElementsByTagName("canvas"),i=!0,o=!1,a=void 0;try{for(var s,l=n[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value;"true"===c.dataset.hidden&&(c.style.visibility="",delete c.dataset.hidden)}}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}r._lastTargetFrameTime=window.performance.now(),r._lastRealFrameTime=window.performance.now(),r._setupDone=!0,(r._accessibleOutputs.grid||r._accessibleOutputs.text)&&r._updateAccsOutput(),r.callRegisteredHooksFor("afterSetup")},this._draw=function(e){var t=(e=e||window.performance.now())-r._lastTargetFrameTime,n=1e3/r._targetFrameRate;(!r._loop||n-5<=t)&&(r.deltaTime=e-r._lastRealFrameTime,r._setProperty("deltaTime",r.deltaTime),r._frameRate=1e3/r.deltaTime,r.redraw(),r._lastTargetFrameTime=Math.max(r._lastTargetFrameTime+n,e),r._lastRealFrameTime=e,void 0!==r._updateMouseCoords&&(r._updateMouseCoords(),r._setProperty("movedX",0),r._setProperty("movedY",0))),r._loop&&(r._requestAnimId=window.requestAnimationFrame(r._draw))},this._setProperty=function(e,t){r[e]=t,r._isGlobal&&(window[e]=t)},this.remove=function(){if(r._startListener&&window.removeEventListener("load",r._startListener,!1),(i=document.getElementById(r._loadingScreenId))&&(i.parentNode.removeChild(i),r._incrementPreload()),r._curElement){for(var t in r._loop=!1,r._requestAnimId&&window.cancelAnimationFrame(r._requestAnimId),r._events)window.removeEventListener(t,r._events[t]);var n=!0,i=!1,o=void 0;try{for(var a,s=r._elements[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l,c=a.value;for(l in c.elt&&c.elt.parentNode&&c.elt.parentNode.removeChild(c.elt),c._events)c.elt.removeEventListener(l,c._events[l])}}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}var u=r;r._registeredMethods.remove.forEach((function(e){void 0!==e&&e.call(u)}))}if(r._isGlobal){for(var p in e.prototype)try{delete window[p]}catch(t){window[p]=void 0}for(var d in r)if(r.hasOwnProperty(d))try{delete window[d]}catch(t){window[d]=void 0}e.instance=null}},this._updateWindowSize(),this._registeredMethods.init.forEach((function(e){void 0!==e&&e.call(this)}),this),this._setupPromisePreloads();var u,p,d=this._createFriendlyGlobalFunctionBinder();if(t)t(this),e._checkForUserDefinedFunctions(this);else{for(var h in this._isGlobal=!0,e.instance=this,e.prototype)"function"==typeof e.prototype[h]?(u=h.substring(2),this._events.hasOwnProperty(u)||(Math.hasOwnProperty(h)&&Math[h]===e.prototype[h]?d(h,e.prototype[h]):d(h,e.prototype[h].bind(this)))):d(h,e.prototype[h]);for(var m in this)this.hasOwnProperty(m)&&d(m,this[m])}for(p in this._events){var f=this["_on".concat(p)];f&&(f=f.bind(this),window.addEventListener(p,f,{passive:!1}),this._events[p]=f)}function g(){r._setProperty("focused",!0)}function y(){r._setProperty("focused",!1)}window.addEventListener("focus",g),window.addEventListener("blur",y),this.registerMethod("remove",(function(){window.removeEventListener("focus",g),window.removeEventListener("blur",y)})),"complete"===document.readyState?this._start():(this._startListener=this._start.bind(this),window.addEventListener("load",this._startListener,!1))}var t;return(t=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=o.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(t,n){e.prototype._preloadMethods.hasOwnProperty(t)||(e.prototype._preloadMethods[t]=n)}},{key:"registerMethod",value:function(t,n){var r=this||e.prototype;r._registeredMethods.hasOwnProperty(t)||(r._registeredMethods[t]=[]),r._registeredMethods[t].push(n)}},{key:"unregisterMethod",value:function(t,n){var r=this||e.prototype;if(r._registeredMethods.hasOwnProperty(t)){for(var i=r._registeredMethods[t],o=[],a=0;a<i.length;a++)i[a]===n&&o.push(a);for(var s=o.length-1;0<=s;s--)i.splice(o[s],1)}}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.globalObject||window;return t.log||console.log.bind(console),function(t,r){e.disableFriendlyErrors,n[t]=r}}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}();for(s in l.instance=null,l.disableFriendlyErrors=!1,o)l.prototype[s]=o[s];l.VERSION=o.VERSION,l.prototype._preloadMethods={loadJSON:l.prototype,loadImage:l.prototype,loadStrings:l.prototype,loadXML:l.prototype,loadBytes:l.prototype,loadTable:l.prototype,loadFont:l.prototype,loadModel:l.prototype,loadShader:l.prototype},l.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},l.prototype._registeredPreloadMethods={},n.default=l},{"./constants":272,"./shim":294,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-own-property-names":187,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],284:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("./main"))&&e.__esModule?e:{default:e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.default.Element=function(){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.elt=t,this._pInst=this._pixelsState=n,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight}var t,n,o;return t=e,o=[{key:"_adjustListener",value:function(e,t,n){return!1===t?r.default.Element._detachListener(e,n):r.default.Element._attachListener(e,t,n),this}},{key:"_attachListener",value:function(e,t,n){n._events[e]&&r.default.Element._detachListener(e,n),t=t.bind(n),n.elt.addEventListener(e,t,!1),n._events[e]=t}},{key:"_detachListener",value:function(e,t){var n=t._events[e];t.elt.removeEventListener(e,n,!1),t._events[e]=null}}],(n=[{key:"parent",value:function(e){return void 0===e?this.elt.parentNode:("string"==typeof e?("#"===e[0]&&(e=e.substring(1)),e=document.getElementById(e)):e instanceof r.default.Element&&(e=e.elt),e.appendChild(this.elt),this)}},{key:"id",value:function(e){return void 0===e?this.elt.id:(this.elt.id=e,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)}},{key:"class",value:function(e){return void 0===e?this.elt.className:(this.elt.className=e,this)}},{key:"mousePressed",value:function(e){return r.default.Element._adjustListener("mousedown",(function(t){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(t),e.call(this,t)}),this),this}},{key:"doubleClicked",value:function(e){return r.default.Element._adjustListener("dblclick",e,this),this}},{key:"mouseWheel",value:function(e){return r.default.Element._adjustListener("wheel",e,this),this}},{key:"mouseReleased",value:function(e){return r.default.Element._adjustListener("mouseup",e,this),this}},{key:"mouseClicked",value:function(e){return r.default.Element._adjustListener("click",e,this),this}},{key:"mouseMoved",value:function(e){return r.default.Element._adjustListener("mousemove",e,this),this}},{key:"mouseOver",value:function(e){return r.default.Element._adjustListener("mouseover",e,this),this}},{key:"mouseOut",value:function(e){return r.default.Element._adjustListener("mouseout",e,this),this}},{key:"touchStarted",value:function(e){return r.default.Element._adjustListener("touchstart",e,this),this}},{key:"touchMoved",value:function(e){return r.default.Element._adjustListener("touchmove",e,this),this}},{key:"touchEnded",value:function(e){return r.default.Element._adjustListener("touchend",e,this),this}},{key:"dragOver",value:function(e){return r.default.Element._adjustListener("dragover",e,this),this}},{key:"dragLeave",value:function(e){return r.default.Element._adjustListener("dragleave",e,this),this}},{key:"_setProperty",value:function(e,t){this[e]=t}}])&&i(t.prototype,n),o&&i(t,o),e}(),e=r.default.Element,n.default=e},{"./main":283}],285:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.get-prototype-of"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(h=e("./main"))&&h.__esModule?h:{default:h},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("./constants"));function s(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,s=function(){return e},e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return function(){var t,n=d(e);return u(this,function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),1}catch(e){}}}()?(t=d(this).constructor,Reflect.construct(n,arguments,t)):n.apply(this,arguments))}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}o.default.Graphics=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e);var n=c(r);function r(e,t,i,s,l){var c;if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");h=l||document.createElement("canvas"),(c=n.call(this,h,s)).canvas=h;var d,h=i||a.P2D;for(d in i=s._userNode||document.body,l||i.appendChild(c.canvas),o.default.prototype)c[d]||("function"==typeof o.default.prototype[d]?c[d]=o.default.prototype[d].bind(p(c)):c[d]=o.default.prototype[d]);return o.default.prototype._initializeInstanceVariables.apply(p(c)),c.width=e,c.height=t,c._pixelDensity=s._pixelDensity,h===a.WEBGL?(c._renderer=new o.default.RendererGL(c.canvas,p(c),!1),e=(l=c._renderer._adjustDimensions(e,t)).adjustedWidth,t=l.adjustedHeight):c._renderer=new o.default.Renderer2D(c.canvas,p(c),!1),s._elements.push(p(c)),Object.defineProperty(p(c),"deltaTime",{get:function(){return this._pInst.deltaTime}}),c._renderer.resize(e,t),c._renderer._applyDefaults(),u(c,p(c))}return t=r,(e=[{key:"reset",value:function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()}},{key:"remove",value:function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var e,t=this._pInst._elements.indexOf(this);for(e in-1!==t&&this._pInst._elements.splice(t,1),this._events)this.elt.removeEventListener(e,this._events[e]);this._renderer=void 0,this.canvas=void 0,this.elt=void 0}},{key:"createFramebuffer",value:function(e){return new o.default.Framebuffer(this,e)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),r}(o.default.Element);var h=o.default.Graphics;n.default=h},{"./constants":272,"./main":283,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],286:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=(d=e("./main"))&&d.__esModule?d:{default:d},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function a(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,a=function(){return e},e)}function s(e){return(s="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return function(){var t,n,r=p(e);return t=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),1}catch(e){}}}()?(t=p(this).constructor,Reflect.construct(r,arguments,t)):r.apply(this,arguments),r=this,!(n=t)||"object"!==s(n)&&"function"!=typeof n?u(r):n}}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e);var n=c(r);function r(e,t,i){var a;if(this instanceof r)return(a=n.call(this,e,t)).canvas=e,a._pixelsState=t,i?(a._isMainCanvas=!0,a._pInst._setProperty("_curElement",u(a)),a._pInst._setProperty("canvas",a.canvas),a._pInst._setProperty("width",a.width),a._pInst._setProperty("height",a.height)):(a.canvas.style.display="none",a._styles=[]),a._clipping=!1,a._clipInvert=!1,a._textSize=12,a._textLeading=15,a._textFont="sans-serif",a._textStyle=o.NORMAL,a._textAscent=null,a._textDescent=null,a._textAlign=o.LEFT,a._textBaseline=o.BASELINE,a._textWrap=o.WORD,a._rectMode=o.CORNER,a._ellipseMode=o.CENTER,a._curveTightness=0,a._imageMode=o.CORNER,a._tint=null,a._doStroke=!0,a._doFill=!0,a._strokeSet=!1,a._fillSet=!1,a._leadingSet=!1,a._pushPopDepth=0,a;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"push",value:function(){return this._pushPopDepth++,{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}}},{key:"pop",value:function(e){this._pushPopDepth--,e.properties&&Object.assign(this,e.properties)}},{key:"beginClip",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(this._clipping)throw new Error("It looks like you're trying to clip while already in the middle of clipping. Did you forget to endClip()?");this._clipping=!0,this._clipInvert=e.invert}},{key:"endClip",value:function(){if(!this._clipping)throw new Error("It looks like you've called endClip() without beginClip(). Did you forget to call beginClip() first?");this._clipping=!1}},{key:"resize",value:function(e,t){this.width=e,this.height=t,this.elt.width=e*this._pInst._pixelDensity,this.elt.height=t*this._pInst._pixelDensity,this.elt.style.width="".concat(e,"px"),this.elt.style.height="".concat(t,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))}},{key:"get",value:function(e,t,n,r){var o=this._pixelsState,a=o._pixelDensity,s=this.canvas;if(void 0===e&&void 0===t)e=t=0,n=o.width,r=o.height;else if(e*=a,t*=a,void 0===n&&void 0===r)return e<0||t<0||e>=s.width||t>=s.height?[0,0,0,0]:this._getPixel(e,t);return(o=new i.default.Image(n*a,r*a)).pixelDensity(a),o.canvas.getContext("2d").drawImage(s,e,t,n*a,r*a,0,0,n*a,r*a),o}},{key:"textLeading",value:function(e){return"number"==typeof e?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",e),this._pInst):this._textLeading}},{key:"textStyle",value:function(e){return e?(e!==o.NORMAL&&e!==o.ITALIC&&e!==o.BOLD&&e!==o.BOLDITALIC||this._setProperty("_textStyle",e),this._applyTextProperties()):this._textStyle}},{key:"textAscent",value:function(){return null===this._textAscent&&this._updateTextMetrics(),this._textAscent}},{key:"textDescent",value:function(){return null===this._textDescent&&this._updateTextMetrics(),this._textDescent}},{key:"textAlign",value:function(e,t){return void 0!==e?(this._setProperty("_textAlign",e),void 0!==t&&this._setProperty("_textBaseline",t),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}}},{key:"textWrap",value:function(e){return this._setProperty("_textWrap",e),this._textWrap}},{key:"text",value:function(e,t,n,r,i){var a,s,l,c,u=this._pInst,p=this._textWrap,d=Number.MAX_VALUE,h=n;if((this._doFill||this._doStroke)&&void 0!==e){if(a=(e=(e="string"!=typeof e?e.toString():e).replace(/(\t)/g,"  ")).split("\n"),void 0!==r){switch(this._rectMode===o.CENTER&&(t-=r/2),this._textAlign){case o.CENTER:t+=r/2;break;case o.RIGHT:t+=r}if(void 0!==i){this._rectMode===o.CENTER&&(n-=i/2,h-=i/2),e=n;var m=u.textAscent();switch(this._textBaseline){case o.BOTTOM:c=n+i,n=Math.max(c,n),h+=m;break;case o.CENTER:c=n+i/2,n=Math.max(c,n),h+=m/2}d=n+i-m,this._textBaseline===o.CENTER&&(d=e+i-m/2)}else this._textBaseline!==o.BOTTOM&&this._textBaseline!==o.CENTER||(h=n-(e=u.textSize()*this._textLeading)/2,d=n+e/2);if(p===o.WORD){for(var f=[],g=0;g<a.length;g++){for(var y="",_=a[g].split(" "),v=0;v<_.length;v++)s="".concat(y+_[v])+" ",y=r<(l=this.textWidth(s))&&0<y.length?(f.push(y),"".concat(_[v])+" "):s;f.push(y)}var b=0;this._textBaseline===o.CENTER?b=(f.length-1)*u.textLeading()/2:this._textBaseline===o.BOTTOM&&(b=(f.length-1)*u.textLeading());for(var w=0;w<a.length;w++){y="",_=a[w].split(" ");for(var x=0;x<_.length;x++)s="".concat(y+_[x])+" ",r<(l=this.textWidth(s))&&0<y.length?(this._renderText(u,y.trim(),t,n-b,d,h),y="".concat(_[x])+" ",n+=u.textLeading()):y=s;this._renderText(u,y.trim(),t,n-b,d,h),n+=u.textLeading()}}else{for(var S=[],T=0;T<a.length;T++)for(var E=a[T].split(y=""),I=0;I<E.length;I++)s="".concat(y+E[I]),(l=this.textWidth(s))<=r?y+=E[I]:r<l&&0<y.length&&(S.push(y),y="".concat(E[I]));S.push(y);var k=0;this._textBaseline===o.CENTER?k=(S.length-1)*u.textLeading()/2:this._textBaseline===o.BOTTOM&&(k=(S.length-1)*u.textLeading());for(var j=0;j<a.length;j++){E=a[j].split(y="");for(var A=0;A<E.length;A++)s="".concat(y+E[A]),(l=this.textWidth(s))<=r?y+=E[A]:r<l&&0<y.length&&(this._renderText(u,y.trim(),t,n-k,d,h),n+=u.textLeading(),y="".concat(E[A]))}this._renderText(u,y.trim(),t,n-k,d,h),n+=u.textLeading()}}else{var C=0;this._textBaseline===o.CENTER?C=(a.length-1)*u.textLeading()/2:this._textBaseline===o.BOTTOM&&(C=(a.length-1)*u.textLeading());for(var O=0;O<a.length;O++)this._renderText(u,a[O],t,n-C,d,h-C),n+=u.textLeading()}return u}}},{key:"_applyDefaults",value:function(){return this}},{key:"_isOpenType",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._textFont;return"object"===s(e)&&e.font&&e.font.supported}},{key:"_updateTextMetrics",value:function(){var e,t,n,r,i,o;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((e=document.createElement("span")).style.fontFamily=this._textFont,e.style.fontSize="".concat(this._textSize,"px"),e.innerHTML="ABCjgq|",(o=document.createElement("div")).style.display="inline-block",o.style.width="1px",o.style.height="0px",(t=document.createElement("div")).appendChild(e),t.appendChild(o),t.style.height="0px",t.style.overflow="hidden",document.body.appendChild(t),o.style.verticalAlign="baseline",r=h(o),i=h(e),n=r[1]-i[1],o.style.verticalAlign="bottom",r=h(o),i=h(e),o=r[1]-i[1]-n,document.body.removeChild(t),this._setProperty("_textAscent",n),this._setProperty("_textDescent",o)),this}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),r}(i.default.Element);function h(e){var t=0,n=0;if(e.offsetParent)for(;t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;);else t+=e.offsetLeft,n+=e.offsetTop;return[t,n]}d.prototype.textSize=function(e){return"number"==typeof e?(this._setProperty("_textSize",e),this._leadingSet||this._setProperty("_textLeading",e*o._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},i.default.Renderer=d,e=i.default.Renderer,n.default=e},{"../core/constants":272,"./main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],287:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.reflect.get"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(d=e("./main"))&&d.__esModule?d:{default:d},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("./constants"));function s(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,s=function(){return e},e)}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){if(e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t),e)return(e=Object.getOwnPropertyDescriptor(e,t)).get?e.get.call(n):e.value})(e,t,n||e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e("./p5.Renderer");var p="rgba(0,0,0,0)",d=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e);var n=function(e){return function(){var t,n=u(e);if(t=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),1}catch(e){}}}()?(t=u(this).constructor,Reflect.construct(n,arguments,t)):n.apply(this,arguments),n=this,!t||"object"!==i(t)&&"function"!=typeof t){if(void 0!==n)return n;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}}(r);function r(e,t,i){if(this instanceof r)return(e=n.call(this,e,t,i)).drawingContext=e.canvas.getContext("2d"),e._pInst._setProperty("drawingContext",e.drawingContext),e;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"getFilterGraphicsLayer",value:function(){var e;return this.filterGraphicsLayer||(e=(this._pInst instanceof o.default.Graphics?this._pInst:this)._pInst,this.filterGraphicsLayer=new o.default.Graphics(this.width,this.height,a.WEBGL,e)),this.filterGraphicsLayer.width===this.width&&this.filterGraphicsLayer.height===this.height||this.filterGraphicsLayer.resizeCanvas(this.width,this.height),this.filterGraphicsLayer.pixelDensity()!==this._pInst.pixelDensity()&&this.filterGraphicsLayer.pixelDensity(this._pInst.pixelDensity()),this.filterGraphicsLayer}},{key:"_applyDefaults",value:function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=a.BLEND,this._setFill(a._DEFAULT_FILL),this._setStroke(a._DEFAULT_STROKE),this.drawingContext.lineCap=a.ROUND,this.drawingContext.font="normal 12px sans-serif"}},{key:"resize",value:function(e,t){l(u(r.prototype),"resize",this).call(this,e,t),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)}},{key:"background",value:function(){var e,t;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof o.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(e=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(e,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(e=this._getFill(),t=(t=this._pInst).color.apply(t,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(t.levels),t=t.toString(),this._setFill(t),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(e),this._isErasing&&this._pInst.erase()),this.drawingContext.restore()}},{key:"clear",value:function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()}},{key:"fill",value:function(){var e=(e=this._pInst).color.apply(e,arguments);this._setFill(e.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",e.levels)}},{key:"stroke",value:function(){var e=(e=this._pInst).color.apply(e,arguments);this._setStroke(e.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",e.levels)}},{key:"erase",value:function(e,t){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,e=this._pInst.color(255,e).toString(),this.drawingContext.fillStyle=e,this._cachedStrokeStyle=this.drawingContext.strokeStyle,e=this._pInst.color(255,t).toString(),this.drawingContext.strokeStyle=e,t=this._cachedBlendMode,this.blendMode(a.REMOVE),this._cachedBlendMode=t,this._isErasing=!0)}},{key:"noErase",value:function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)}},{key:"beginClip",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};l(u(r.prototype),"beginClip",this).call(this,e),this._cachedFillStyle=this.drawingContext.fillStyle,e=this._pInst.color(255,0).toString(),this.drawingContext.fillStyle=e,this._cachedStrokeStyle=this.drawingContext.strokeStyle,e=this._pInst.color(255,0).toString(),this.drawingContext.strokeStyle=e,e=this._cachedBlendMode,this.blendMode(a.BLEND),this._cachedBlendMode=e,this.drawingContext.beginPath(),this._clipInvert&&(this.drawingContext.moveTo(-2*this.width,-2*this.height),this.drawingContext.lineTo(-2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,-2*this.height),this.drawingContext.closePath())}},{key:"endClip",value:function(){this._doFillStrokeClose(),this.drawingContext.clip(),l(u(r.prototype),"endClip",this).call(this),this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode)}},{key:"image",value:function(e,t,n,r,i,a,s,l,c){e.gifProperties&&e._animateGif(this._pInst);try{o.default.MediaElement&&e instanceof o.default.MediaElement&&e._ensureCanvas();var u=(u=this._tint&&e.canvas?this._getTintedImageCanvas(e):u)||e.canvas||e.elt,p=1;e.width&&0<e.width&&(p=u.width/e.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(u,p*t,p*n,p*r,p*i,a,s,l,c),this._isErasing&&this._pInst.erase()}catch(e){if("NS_ERROR_NOT_AVAILABLE"!==e.name)throw e}}},{key:"_getTintedImageCanvas",value:function(e){if(!e.canvas)return e;e.tintCanvas||(e.tintCanvas=document.createElement("canvas")),e.tintCanvas.width!==e.canvas.width&&(e.tintCanvas.width=e.canvas.width),e.tintCanvas.height!==e.canvas.height&&(e.tintCanvas.height=e.canvas.height);var t=e.tintCanvas.getContext("2d");return t.save(),t.clearRect(0,0,e.canvas.width,e.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(t.drawImage(e.canvas,0,0),t.globalCompositeOperation="luminosity",t.drawImage(e.canvas,0,0),t.globalCompositeOperation="color",t.drawImage(e.canvas,0,0),t.globalCompositeOperation="multiply",t.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),t.fillRect(0,0,e.canvas.width,e.canvas.height),t.globalCompositeOperation="destination-in"),t.globalAlpha=this._tint[3]/255,t.drawImage(e.canvas,0,0),t.restore(),e.tintCanvas}},{key:"blendMode",value:function(e){if(e===a.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(e!==a.BLEND&&e!==a.REMOVE&&e!==a.DARKEST&&e!==a.LIGHTEST&&e!==a.DIFFERENCE&&e!==a.MULTIPLY&&e!==a.EXCLUSION&&e!==a.SCREEN&&e!==a.REPLACE&&e!==a.OVERLAY&&e!==a.HARD_LIGHT&&e!==a.SOFT_LIGHT&&e!==a.DODGE&&e!==a.BURN&&e!==a.ADD)throw new Error("Mode ".concat(e," not recognized."));this._cachedBlendMode=e,this.drawingContext.globalCompositeOperation=e}}},{key:"blend",value:function(){for(var e=this.drawingContext.globalCompositeOperation,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[n.length-1],a=Array.prototype.slice.call(n,0,n.length-1);this.drawingContext.globalCompositeOperation=i,o.default.prototype.copy.apply(this,a),this.drawingContext.globalCompositeOperation=e}},{key:"_getPixel",value:function(e,t){return[(e=this.drawingContext.getImageData(e,t,1,1).data)[0],e[1],e[2],e[3]]}},{key:"loadPixels",value:function(){var e=this._pixelsState,t=e._pixelDensity,n=this.width*t;t=this.height*t,n=this.drawingContext.getImageData(0,0,n,t),e._setProperty("imageData",n),e._setProperty("pixels",n.data)}},{key:"set",value:function(e,t,n){e=Math.floor(e),t=Math.floor(t);var r=this._pixelsState;if(n instanceof o.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(r._pixelDensity,r._pixelDensity),this.drawingContext.clearRect(e,t,n.width,n.height),this.drawingContext.drawImage(n.canvas,e,t),this.drawingContext.restore();else{var i=0,a=0,s=0,l=0,c=4*(t*r._pixelDensity*(this.width*r._pixelDensity)+e*r._pixelDensity);if(r.imageData||r.loadPixels(),"number"==typeof n)c<r.pixels.length&&(s=a=i=n,l=255);else if(Array.isArray(n)){if(n.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");c<r.pixels.length&&(i=n[0],a=n[1],s=n[2],l=n[3])}else n instanceof o.default.Color&&c<r.pixels.length&&(i=n.levels[0],a=n.levels[1],s=n.levels[2],l=n.levels[3]);for(var u=0;u<r._pixelDensity;u++)for(var p=0;p<r._pixelDensity;p++)c=4*((t*r._pixelDensity+p)*this.width*r._pixelDensity+(e*r._pixelDensity+u)),r.pixels[c]=i,r.pixels[c+1]=a,r.pixels[c+2]=s,r.pixels[c+3]=l}}},{key:"updatePixels",value:function(e,t,n,r){var i=this._pixelsState,o=i._pixelDensity;void 0===e&&void 0===t&&void 0===n&&void 0===r&&(t=e=0,n=this.width,r=this.height),e*=o,t*=o,n*=o,r*=o,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=i.imageData),this.drawingContext.putImageData(i.imageData,0,0,e,t,n,r)}},{key:"arc",value:function(e,t,n,r,i,o,s){var l=this.drawingContext,c=(e+=n/2,t+=r/2,n/=2,r/=2,!(s===a.CHORD||s===a.OPEN||(o-i)%a.TWO_PI==0));return this._doFill&&(this._clipping||l.beginPath(),l.ellipse(e,t,n,r,0,i,o),c&&l.lineTo(e,t),l.closePath(),this._clipping||l.fill()),this._doStroke&&(this._clipping||l.beginPath(),l.ellipse(e,t,n,r,0,i,o),s===a.PIE&&c&&l.lineTo(e,t),s!==a.PIE&&s!==a.CHORD||l.closePath(),this._clipping||l.stroke()),this}},{key:"ellipse",value:function(e){var t=this.drawingContext,n=this._doFill,r=this._doStroke,i=parseFloat(e[0]),o=parseFloat(e[1]),a=parseFloat(e[2]);if(e=parseFloat(e[3]),n&&!r){if(this._getFill()===p)return this}else if(!n&&r&&this._getStroke()===p)return this;i+=a/2,o+=e/2,a/=2,e/=2,this._clipping||t.beginPath(),t.ellipse(i,o,a,e,0,0,2*Math.PI),t.closePath(),!this._clipping&&n&&t.fill(),!this._clipping&&r&&t.stroke()}},{key:"line",value:function(e,t,n,r){var i=this.drawingContext;return this._doStroke&&this._getStroke()!==p&&(this._clipping||i.beginPath(),i.moveTo(e,t),i.lineTo(n,r),i.stroke()),this}},{key:"point",value:function(e,t){var n,r,i=this.drawingContext;return this._doStroke&&this._getStroke()!==p?(n=this._getStroke(),r=this._getFill(),this._clipping||this._setFill(n),this._clipping||i.beginPath(),i.arc(e,t,i.lineWidth/2,0,a.TWO_PI,!1),void(this._clipping||(i.fill(),this._setFill(r)))):this}},{key:"quad",value:function(e,t,n,r,i,o,a,s){var l=this.drawingContext,c=this._doFill,u=this._doStroke;if(c&&!u){if(this._getFill()===p)return this}else if(!c&&u&&this._getStroke()===p)return this;return this._clipping||l.beginPath(),l.moveTo(e,t),l.lineTo(n,r),l.lineTo(i,o),l.lineTo(a,s),l.closePath(),!this._clipping&&c&&l.fill(),!this._clipping&&u&&l.stroke(),this}},{key:"rect",value:function(e){var t,n,r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=(e=e[7],this.drawingContext),d=this._doFill,h=this._doStroke;if(d&&!h){if(this._getFill()===p)return this}else if(!d&&h&&this._getStroke()===p)return this;return this._clipping||u.beginPath(),void 0===s?u.rect(r,i,o,a):(void 0===l&&(l=s),void 0===c&&(c=l),void 0===e&&(e=c),h=(d=Math.abs(o))/2,n=(t=Math.abs(a))/2,u.roundRect(r,i,o,a,[s=t<2*(s=d<2*s?h:s)?n:s,l=t<2*(l=d<2*l?h:l)?n:l,c=t<2*(c=d<2*c?h:c)?n:c,e=t<2*(e=d<2*e?h:e)?n:e])),!this._clipping&&this._doFill&&u.fill(),!this._clipping&&this._doStroke&&u.stroke(),this}},{key:"triangle",value:function(e){var t=this.drawingContext,n=this._doFill,r=this._doStroke,i=e[0],o=e[1],a=e[2],s=e[3],l=e[4];if(e=e[5],n&&!r){if(this._getFill()===p)return this}else if(!n&&r&&this._getStroke()===p)return this;this._clipping||t.beginPath(),t.moveTo(i,o),t.lineTo(a,s),t.lineTo(l,e),t.closePath(),!this._clipping&&n&&t.fill(),!this._clipping&&r&&t.stroke()}},{key:"endShape",value:function(e,t,n,r,i,o,s){if(0!==t.length&&(this._doStroke||this._doFill)){var l,c,u,p=e===a.CLOSE,d=(p&&!o&&t.push(t[0]),t.length);if(n&&null===s){if(3<d){var h=[],m=1-this._curveTightness;for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(t[1][0],t[1][1]),c=1;c+2<d;c++)l=t[c],h[0]=[l[0],l[1]],h[1]=[l[0]+(m*t[c+1][0]-m*t[c-1][0])/6,l[1]+(m*t[c+1][1]-m*t[c-1][1])/6],h[2]=[t[c+1][0]+(m*t[c][0]-m*t[c+2][0])/6,t[c+1][1]+(m*t[c][1]-m*t[c+2][1])/6],h[3]=[t[c+1][0],t[c+1][1]],this.drawingContext.bezierCurveTo(h[1][0],h[1][1],h[2][0],h[2][1],h[3][0],h[3][1]);p&&this.drawingContext.lineTo(t[c+1][0],t[c+1][1]),this._doFillStrokeClose(p)}}else if(r&&null===s){for(this._clipping||this.drawingContext.beginPath(),c=0;c<d;c++)t[c].isVert?t[c].moveTo?this.drawingContext.moveTo(t[c][0],t[c][1]):this.drawingContext.lineTo(t[c][0],t[c][1]):this.drawingContext.bezierCurveTo(t[c][0],t[c][1],t[c][2],t[c][3],t[c][4],t[c][5]);this._doFillStrokeClose(p)}else if(i&&null===s){for(this._clipping||this.drawingContext.beginPath(),c=0;c<d;c++)t[c].isVert?t[c].moveTo?this.drawingContext.moveTo(t[c][0],t[c][1]):this.drawingContext.lineTo(t[c][0],t[c][1]):this.drawingContext.quadraticCurveTo(t[c][0],t[c][1],t[c][2],t[c][3]);this._doFillStrokeClose(p)}else if(s===a.POINTS)for(c=0;c<d;c++)l=t[c],this._doStroke&&this._pInst.stroke(l[6]),this._pInst.point(l[0],l[1]);else if(s===a.LINES)for(c=0;c+1<d;c+=2)l=t[c],this._doStroke&&this._pInst.stroke(t[c+1][6]),this._pInst.line(l[0],l[1],t[c+1][0],t[c+1][1]);else if(s===a.TRIANGLES)for(c=0;c+2<d;c+=3)l=t[c],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(l[0],l[1]),this.drawingContext.lineTo(t[c+1][0],t[c+1][1]),this.drawingContext.lineTo(t[c+2][0],t[c+2][1]),this.drawingContext.closePath(),!this._clipping&&this._doFill&&(this._pInst.fill(t[c+2][5]),this.drawingContext.fill()),!this._clipping&&this._doStroke&&(this._pInst.stroke(t[c+2][6]),this.drawingContext.stroke());else if(s===a.TRIANGLE_STRIP)for(c=0;c+1<d;c++)l=t[c],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(t[c+1][0],t[c+1][1]),this.drawingContext.lineTo(l[0],l[1]),!this._clipping&&this._doStroke&&this._pInst.stroke(t[c+1][6]),!this._clipping&&this._doFill&&this._pInst.fill(t[c+1][5]),c+2<d&&(this.drawingContext.lineTo(t[c+2][0],t[c+2][1]),!this._clipping&&this._doStroke&&this._pInst.stroke(t[c+2][6]),!this._clipping&&this._doFill&&this._pInst.fill(t[c+2][5])),this._doFillStrokeClose(p);else if(s===a.TRIANGLE_FAN){if(2<d){for(this._clipping||this.drawingContext.beginPath(),c=2;c<d;c++)l=t[c],this.drawingContext.moveTo(t[0][0],t[0][1]),this.drawingContext.lineTo(t[c-1][0],t[c-1][1]),this.drawingContext.lineTo(l[0],l[1]),this.drawingContext.lineTo(t[0][0],t[0][1]),c<d-1&&(this._doFill&&l[5]!==t[c+1][5]||this._doStroke&&l[6]!==t[c+1][6])&&(!this._clipping&&this._doFill&&(this._pInst.fill(l[5]),this.drawingContext.fill(),this._pInst.fill(t[c+1][5])),!this._clipping&&this._doStroke&&(this._pInst.stroke(l[6]),this.drawingContext.stroke(),this._pInst.stroke(t[c+1][6])),this.drawingContext.closePath(),this._clipping||this.drawingContext.beginPath());this._doFillStrokeClose(p)}}else if(s===a.QUADS)for(c=0;c+3<d;c+=4){for(l=t[c],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(l[0],l[1]),u=1;u<4;u++)this.drawingContext.lineTo(t[c+u][0],t[c+u][1]);this.drawingContext.lineTo(l[0],l[1]),!this._clipping&&this._doFill&&this._pInst.fill(t[c+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(t[c+3][6]),this._doFillStrokeClose(p)}else if(s===a.QUAD_STRIP){if(3<d)for(c=0;c+1<d;c+=2)l=t[c],this._clipping||this.drawingContext.beginPath(),c+3<d?(this.drawingContext.moveTo(t[c+2][0],t[c+2][1]),this.drawingContext.lineTo(l[0],l[1]),this.drawingContext.lineTo(t[c+1][0],t[c+1][1]),this.drawingContext.lineTo(t[c+3][0],t[c+3][1]),!this._clipping&&this._doFill&&this._pInst.fill(t[c+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(t[c+3][6])):(this.drawingContext.moveTo(l[0],l[1]),this.drawingContext.lineTo(t[c+1][0],t[c+1][1])),this._doFillStrokeClose(p)}else{for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(t[0][0],t[0][1]),c=1;c<d;c++)(l=t[c]).isVert&&(l.moveTo?(p&&this.drawingContext.closePath(),this.drawingContext.moveTo(l[0],l[1])):this.drawingContext.lineTo(l[0],l[1]));this._doFillStrokeClose(p)}o=i=r=n=!1,p&&t.pop()}return this}},{key:"strokeCap",value:function(e){return e!==a.ROUND&&e!==a.SQUARE&&e!==a.PROJECT||(this.drawingContext.lineCap=e),this}},{key:"strokeJoin",value:function(e){return e!==a.ROUND&&e!==a.BEVEL&&e!==a.MITER||(this.drawingContext.lineJoin=e),this}},{key:"strokeWeight",value:function(e){return this.drawingContext.lineWidth=void 0===e||0===e?1e-4:e,this}},{key:"_getFill",value:function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle}},{key:"_setFill",value:function(e){e!==this._cachedFillStyle&&(this.drawingContext.fillStyle=e,this._cachedFillStyle=e)}},{key:"_getStroke",value:function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle}},{key:"_setStroke",value:function(e){e!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=e,this._cachedStrokeStyle=e)}},{key:"bezier",value:function(e,t,n,r,i,o,a,s){return this._pInst.beginShape(),this._pInst.vertex(e,t),this._pInst.bezierVertex(n,r,i,o,a,s),this._pInst.endShape(),this}},{key:"curve",value:function(e,t,n,r,i,o,a,s){return this._pInst.beginShape(),this._pInst.curveVertex(e,t),this._pInst.curveVertex(n,r),this._pInst.curveVertex(i,o),this._pInst.curveVertex(a,s),this._pInst.endShape(),this}},{key:"_doFillStrokeClose",value:function(e){e&&this.drawingContext.closePath(),!this._clipping&&this._doFill&&this.drawingContext.fill(),!this._clipping&&this._doStroke&&this.drawingContext.stroke()}},{key:"applyMatrix",value:function(e,t,n,r,i,o){this.drawingContext.transform(e,t,n,r,i,o)}},{key:"resetMatrix",value:function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this}},{key:"rotate",value:function(e){this.drawingContext.rotate(e)}},{key:"scale",value:function(e,t){return this.drawingContext.scale(e,t),this}},{key:"translate",value:function(e,t){return e instanceof o.default.Vector&&(t=e.y,e=e.x),this.drawingContext.translate(e,t),this}},{key:"_renderText",value:function(e,t,n,r,i,o){if(!(r<o||i<=r))return e.push(),this._isOpenType()?this._textFont._renderPath(t,n,r,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(t,n,r),!this._clipping&&this._doFill&&(this._fillSet||this._setFill(a._DEFAULT_TEXT_FILL),this.drawingContext.fillText(t,n,r))),e.pop(),e}},{key:"textWidth",value:function(e){return this._isOpenType()?this._textFont._textWidth(e,this._textSize):this.drawingContext.measureText(e).width}},{key:"_applyTextProperties",value:function(){var e=this._pInst,t=(this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),t=this._textFont,this._isOpenType()&&(t=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),t||"sans-serif");return/\s/.exec(t)&&(t='"'.concat(t,'"')),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(t),this.drawingContext.textAlign=this._textAlign,this._textBaseline===a.CENTER?this.drawingContext.textBaseline=a._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,e}},{key:"push",value:function(){return this.drawingContext.save(),l(u(r.prototype),"push",this).call(this)}},{key:"pop",value:function(e){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,l(u(r.prototype),"pop",this).call(this,e)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),r}(o.default.Renderer);d.prototype.text=function(e,t,n,r,i){var s;return void 0!==r&&this.drawingContext.textBaseline===a.BASELINE&&(s=!0,this.drawingContext.textBaseline=a.TOP),r=o.default.Renderer.prototype.text.apply(this,arguments),s&&(this.drawingContext.textBaseline=a.BASELINE),r},o.default.Renderer2D=d,e=o.default.Renderer2D,n.default=e},{"./constants":272,"./main":283,"./p5.Renderer":286,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.function.name":174,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],288:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator");var r=(e=e("./main"))&&e.__esModule?e:{default:e};function i(){return{}}r.default.prototype._promisePreloads=[];var o=!(r.default.prototype.registerPromisePreload=function(e){r.default.prototype._promisePreloads.push(e)});r.default.prototype._setupPromisePreloads=function(){var e=!0,t=!1,n=void 0;try{for(var i,a=this._promisePreloads[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var s=i.value,l=this,c=s.method,u=s.addCallbacks,p=s.legacyPreloadSetup,d=s.target||this,h=d[c].bind(d);if(d===r.default.prototype){if(o)continue;l=null,h=d[c]}d[c]=this._wrapPromisePreload(l,h,u),p&&(d[p.method]=this._legacyPreloadGenerator(l,p,d[c]))}}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}o=!0},r.default.prototype._wrapPromisePreload=function(e,t,n){var r=function(){for(var e=this,r=(this._incrementPreload(),null),i=null,o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];if(n)for(var l=a.length-1;0<=l&&!i&&"function"==typeof a[l];l--)i=r,r=a.pop();var c=Promise.resolve(t.apply(this,a));return r&&c.then(r),i&&c.catch(i),c.then((function(){return e._decrementPreload()})),c};return e?r.bind(e):r},r.default.prototype._legacyPreloadGenerator=function(e,t,n){var r=t.createBaseObject||i;return t=function(){var e=this;this._incrementPreload();for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];var a=r.apply(this,i);return n.apply(this,i).then((function(t){Object.assign(a,t),e._decrementPreload()})),a},e?t.bind(e):t}},{"./main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],289:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=(c=e("./main"))&&c.__esModule?c:{default:c},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("./constants"));function a(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,a=function(){return e},e)}function s(e){return(s="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("./p5.Graphics"),e("./p5.Renderer2D"),e("../webgl/p5.RendererGL");var l="defaultCanvas0",c=(i.default.prototype.createCanvas=function(e,t,n,r){var a,s,c;if(i.default._validateParameters("createCanvas",arguments),arguments[2]instanceof HTMLCanvasElement?(n=o.P2D,r=arguments[2]):a=n||o.P2D,r)(c=document.getElementById(l))&&c.parentNode.removeChild(c),c=r,this._defaultGraphicsCreated=!1;else{if(a===o.WEBGL)(c=document.getElementById(l))&&(c.parentNode.removeChild(c),s=this._renderer,this._elements=this._elements.filter((function(e){return e!==s}))),(c=document.createElement("canvas")).id=l,c.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)c=this.canvas;else{c=r||document.createElement("canvas");for(var u=0;document.getElementById("defaultCanvas".concat(u));)u++;l="defaultCanvas".concat(u),c.id=l,c.classList.add("p5Canvas")}this._setupDone||(c.dataset.hidden=!0,c.style.visibility="hidden"),(this._userNode||(0===document.getElementsByTagName("main").length&&(n=document.createElement("main"),document.body.appendChild(n)),document.getElementsByTagName("main")[0])).appendChild(c)}return a===o.WEBGL?(this._setProperty("_renderer",new i.default.RendererGL(c,this,!0)),this._elements.push(this._renderer),e=(r=this._renderer._adjustDimensions(e,t)).adjustedWidth,t=r.adjustedHeight):this._defaultGraphicsCreated||(this._setProperty("_renderer",new i.default.Renderer2D(c,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(e,t),this._renderer._applyDefaults(),this._renderer},i.default.prototype.resizeCanvas=function(e,t,n){if(i.default._validateParameters("resizeCanvas",arguments),this._renderer){var r,o,a,l={};for(r in this.drawingContext){var c=this.drawingContext[r];"object"!==s(c)&&"function"!=typeof c&&(l[r]=c)}for(a in this._renderer instanceof i.default.RendererGL&&(e=(o=this._renderer._adjustDimensions(e,t)).adjustedWidth,t=o.adjustedHeight),this.width=e,this.height=t,this._renderer.resize(e,t),l)try{this.drawingContext[a]=l[a]}catch(e){}n||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},i.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},i.default.prototype.createGraphics=function(e,t){for(var n=arguments.length,r=new Array(2<n?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return r[0]instanceof HTMLCanvasElement&&(r[1]=r[0],r[0]=o.P2D),i.default._validateParameters("createGraphics",arguments),new i.default.Graphics(e,t,r[0],this,r[1])},i.default.prototype.createFramebuffer=function(e){return new i.default.Framebuffer(this,e)},i.default.prototype.clearDepth=function(e){this._assert3d("clearDepth"),this._renderer.clearDepth(e)},i.default.prototype.blendMode=function(e){i.default._validateParameters("blendMode",arguments),e===o.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),e=o.BLEND),this._renderer.blendMode(e)},i.default);n.default=c},{"../webgl/p5.RendererGL":341,"./constants":272,"./main":283,"./p5.Graphics":285,"./p5.Renderer2D":287,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],290:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.slice"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=c(e("../main")),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../constants")),s=c(e("../helpers"));function l(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,l=function(){return e},e)}function c(e){return e&&e.__esModule?e:{default:e}}e("../friendly_errors/fes_core"),e("../friendly_errors/file_errors"),e("../friendly_errors/validate_params"),o.default.prototype._normalizeArcAngles=function(e,t,n,r,i){var o;return e-=a.TWO_PI*Math.floor(e/a.TWO_PI),t-=a.TWO_PI*Math.floor(t/a.TWO_PI),o=Math.min(Math.abs(e-t),a.TWO_PI-Math.abs(e-t)),i&&(e=e<=a.HALF_PI?Math.atan(n/r*Math.tan(e)):e>a.HALF_PI&&e<=3*a.HALF_PI?Math.atan(n/r*Math.tan(e))+a.PI:Math.atan(n/r*Math.tan(e))+a.TWO_PI,t=t<=a.HALF_PI?Math.atan(n/r*Math.tan(t)):t>a.HALF_PI&&t<=3*a.HALF_PI?Math.atan(n/r*Math.tan(t))+a.PI:Math.atan(n/r*Math.tan(t))+a.TWO_PI),t<e&&(t+=a.TWO_PI),{start:e,stop:t,correspondToSamePoint:o<1e-5}},o.default.prototype.arc=function(e,t,n,r,i,a,l,c){return o.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&i!==a&&(i=this._toRadians(i),a=this._toRadians(a),n=Math.abs(n),r=Math.abs(r),e=s.default.modeAdjust(e,t,n,r,this._renderer._ellipseMode),(t=this._normalizeArcAngles(i,a,e.w,e.h,!0)).correspondToSamePoint?this._renderer.ellipse([e.x,e.y,e.w,e.h,c]):(this._renderer.arc(e.x,e.y,e.w,e.h,t.start,t.stop,l,c),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[e.x,e.y,e.w,e.h,t.start,t.stop,l]))),this},o.default.prototype.ellipse=function(e,t,n,r,i){return o.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},o.default.prototype.circle=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o.default._validateParameters("circle",t);var r=t.slice(0,2);return r.push(t[2],t[2]),this._renderEllipse.apply(this,function(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(r))},o.default.prototype._renderEllipse=function(e,t,n,r,i){return(this._renderer._doStroke||this._renderer._doFill)&&(n<0&&(n=Math.abs(n)),void 0===r?r=n:r<0&&(r=Math.abs(r)),e=s.default.modeAdjust(e,t,n,r,this._renderer._ellipseMode),this._renderer.ellipse([e.x,e.y,e.w,e.h,i]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[e.x,e.y,e.w,e.h])),this},o.default.prototype.line=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return o.default._validateParameters("line",n),this._renderer._doStroke&&(e=this._renderer).line.apply(e,n),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",n),this},o.default.prototype.point=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return o.default._validateParameters("point",n),this._renderer._doStroke&&(1===n.length&&n[0]instanceof o.default.Vector?this._renderer.point.call(this._renderer,n[0].x,n[0].y,n[0].z):((e=this._renderer).point.apply(e,n),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",n))),this},o.default.prototype.quad=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return o.default._validateParameters("quad",n),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&n.length<12?this._renderer.quad.call(this._renderer,n[0],n[1],0,n[2],n[3],0,n[4],n[5],0,n[6],n[7],0,n[8],n[9]):((e=this._renderer).quad.apply(e,n),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",n))),this},o.default.prototype.rect=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.default._validateParameters("rect",t),this._renderRect.apply(this,t)},o.default.prototype.square=function(e,t,n,r,i,a,s){return o.default._validateParameters("square",arguments),this._renderRect.call(this,e,t,n,n,r,i,a,s)},o.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){3===arguments.length&&(arguments[3]=arguments[2]);for(var e=s.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),t=[e.x,e.y,e.w,e.h],n=4;n<arguments.length;n++)t[n]=arguments[n];this._renderer.rect(t),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[e.x,e.y,e.w,e.h])}return this},o.default.prototype.triangle=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.default._validateParameters("triangle",t),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(t),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",t),this},e=o.default,n.default=e},{"../constants":272,"../friendly_errors/fes_core":274,"../friendly_errors/file_errors":275,"../friendly_errors/validate_params":278,"../helpers":279,"../main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],291:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(l=e("../main"))&&l.__esModule?l:{default:l},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../constants"));function s(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,s=function(){return e},e)}o.default.prototype.ellipseMode=function(e){return o.default._validateParameters("ellipseMode",arguments),e!==a.CORNER&&e!==a.CORNERS&&e!==a.RADIUS&&e!==a.CENTER||(this._renderer._ellipseMode=e),this},o.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},o.default.prototype.rectMode=function(e){return o.default._validateParameters("rectMode",arguments),e!==a.CORNER&&e!==a.CORNERS&&e!==a.RADIUS&&e!==a.CENTER||(this._renderer._rectMode=e),this},o.default.prototype.smooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!0):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},o.default.prototype.strokeCap=function(e){return o.default._validateParameters("strokeCap",arguments),e!==a.ROUND&&e!==a.SQUARE&&e!==a.PROJECT||this._renderer.strokeCap(e),this},o.default.prototype.strokeJoin=function(e){return o.default._validateParameters("strokeJoin",arguments),e!==a.ROUND&&e!==a.BEVEL&&e!==a.MITER||this._renderer.strokeJoin(e),this},o.default.prototype.strokeWeight=function(e){return o.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(e),this};var l=o.default;n.default=l},{"../constants":272,"../main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],292:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(i=e("../main"))&&i.__esModule?i:{default:i};e("../friendly_errors/fes_core"),e("../friendly_errors/file_errors"),e("../friendly_errors/validate_params"),r.default.prototype.bezier=function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return r.default._validateParameters("bezier",n),(this._renderer._doStroke||this._renderer._doFill)&&(e=this._renderer).bezier.apply(e,n),this},r.default.prototype.bezierDetail=function(e){return r.default._validateParameters("bezierDetail",arguments),this._bezierDetail=e,this},r.default.prototype.bezierPoint=function(e,t,n,i,o){r.default._validateParameters("bezierPoint",arguments);var a=1-o;return Math.pow(a,3)*e+3*Math.pow(a,2)*o*t+3*a*Math.pow(o,2)*n+Math.pow(o,3)*i},r.default.prototype.bezierTangent=function(e,t,n,i,o){r.default._validateParameters("bezierTangent",arguments);var a=1-o;return 3*i*Math.pow(o,2)-3*n*Math.pow(o,2)+6*n*a*o-6*t*a*o+3*t*Math.pow(a,2)-3*e*Math.pow(a,2)},r.default.prototype.curve=function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return r.default._validateParameters("curve",n),this._renderer._doStroke&&(e=this._renderer).curve.apply(e,n),this},r.default.prototype.curveDetail=function(e){return r.default._validateParameters("curveDetail",arguments),this._curveDetail=e<3?3:e,this},r.default.prototype.curveTightness=function(e){return r.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=e,this},r.default.prototype.curvePoint=function(e,t,n,i,o){r.default._validateParameters("curvePoint",arguments);var a=this._renderer._curveTightness,s=o*o*o,l=o*o;return e*((a-1)/2*s+(1-a)*l+(a-1)/2*o)+t*((a+3)/2*s+(-5-a)/2*l+1)+n*((-3-a)/2*s+(a+2)*l+(1-a)/2*o)+i*((1-a)/2*s+(a-1)/2*l)},r.default.prototype.curveTangent=function(e,t,n,i,o){r.default._validateParameters("curveTangent",arguments);var a=this._renderer._curveTightness,s=o*o*3;return e*((a-1)/2*s+(1-a)*(o*=2)+(a-1)/2)+t*((a+3)/2*s+(-5-a)/2*o)+n*((-3-a)/2*s+(a+2)*o+(1-a)/2)+i*((1-a)/2*s+(a-1)/2*o)};var i=r.default;n.default=i},{"../friendly_errors/fes_core":274,"../friendly_errors/file_errors":275,"../friendly_errors/validate_params":278,"../main":283}],293:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.slice"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(g=e("../main"))&&g.__esModule?g:{default:g},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../constants"));function s(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,s=function(){return e},e)}var l=null,c=[],u=[],p=!1,d=!1,h=!1,m=!1,f=!0,g=(o.default.prototype.beginContour=function(){return this._renderer.isP3D?this._renderer.beginContour():(u=[],m=!0),this},o.default.prototype.beginShape=function(e){var t;return o.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(t=this._renderer).beginShape.apply(t,arguments):(l=e===a.POINTS||e===a.LINES||e===a.TRIANGLES||e===a.TRIANGLE_FAN||e===a.TRIANGLE_STRIP||e===a.QUADS||e===a.QUAD_STRIP?e:null,c=[],u=[]),this},o.default.prototype.bezierVertex=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(o.default._validateParameters("bezierVertex",n),this._renderer.isP3D)(e=this._renderer).bezierVertex.apply(e,n);else if(0===c.length)o.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{p=!0;for(var i=[],a=0;a<n.length;a++)i[a]=n[a];i.isVert=!1,(m?u:c).push(i)}return this},o.default.prototype.curveVertex=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return o.default._validateParameters("curveVertex",n),this._renderer.isP3D?(e=this._renderer).curveVertex.apply(e,n):(d=!0,this.vertex(n[0],n[1])),this},o.default.prototype.endContour=function(){if(!this._renderer.isP3D){var e=u[0].slice();e.isVert=u[0].isVert,e.moveTo=!1,u.push(e),f&&(c.push(c[0]),f=!1);for(var t=0;t<u.length;t++)c.push(u[t])}return this},o.default.prototype.endShape=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(o.default._validateParameters("endShape",arguments),t<1&&(console.log("🌸 p5.js says: You can not have less than one instance"),t=1),this._renderer.isP3D)this._renderer.endShape(e,d,p,h,m,l,t);else{if(1!==t&&console.log("🌸 p5.js says: Instancing is only supported in WebGL2 mode"),0===c.length)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;(t=e===a.CLOSE)&&!m&&c.push(c[0]),this._renderer.endShape(e,c,d,p,h,m,l),f=!(m=h=p=d=!1),t&&c.pop()}return this},o.default.prototype.quadraticVertex=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(o.default._validateParameters("quadraticVertex",n),this._renderer.isP3D)(e=this._renderer).quadraticVertex.apply(e,n);else{if(this._contourInited)return(e={}).x=n[0],e.y=n[1],e.x3=n[2],e.y3=n[3],e.type=a.QUADRATIC,this._contourVertices.push(e),this;if(0<c.length){h=!0;for(var i=[],s=0;s<n.length;s++)i[s]=n[s];i.isVert=!1,(m?u:c).push(i)}else o.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},o.default.prototype.vertex=function(e,t,n,r,i){var o;return this._renderer.isP3D?(o=this._renderer).vertex.apply(o,arguments):((o=[]).isVert=!0,o[0]=e,o[1]=t,o[2]=0,o[3]=0,o[4]=0,o[5]=this._renderer._getFill(),o[6]=this._renderer._getStroke(),n&&(o.moveTo=n),(m?(0===u.length&&(o.moveTo=!0),u):c).push(o)),this},o.default.prototype.normal=function(e,t,n){var r;return this._assert3d("normal"),o.default._validateParameters("normal",arguments),(r=this._renderer).normal.apply(r,arguments),this},o.default);n.default=g},{"../constants":272,"../main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],294:[function(e,t,n){},{}],295:[function(e,t,n){"use strict";e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.assign"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,(e=(e=e("./main"))&&e.__esModule?e:{default:e}).default.prototype.noLoop=function(){this._loop=!1},e.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},e.default.prototype.isLooping=function(){return this._loop},e.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},e.default.prototype.pop=function(){var e=this._styles.pop();e?(this._renderer.pop(e.renderer),Object.assign(this,e.props)):console.warn("pop() was called without matching push()")},e.default.prototype.redraw=function(e){if(!this._inUserDraw&&this._setupDone){var t=parseInt(e),n=((isNaN(t)||t<1)&&(t=1),this._isGlobal?window:this);if("function"==typeof n.draw){void 0===n.setup&&n.scale(n._pixelDensity,n._pixelDensity);for(var r=0;r<t;r++){n.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),n._renderer.isP3D&&n._renderer._update(),n._setProperty("frameCount",n.frameCount+1),this.callRegisteredHooksFor("pre"),this._inUserDraw=!0;try{n.draw()}finally{this._inUserDraw=!1}this.callRegisteredHooksFor("post")}}}},e=e.default,n.default=e},{"./main":283,"core-js/modules/es.object.assign":183}],296:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("./main"))&&e.__esModule?e:{default:e};r.default.prototype.applyMatrix=function(){var e=(arguments.length<=0?void 0:arguments[0])instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments.length<=0?void 0:arguments[0])||e?(e=this._renderer).applyMatrix.apply(e,function(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(arguments.length<=0?void 0:arguments[0])):(e=this._renderer).applyMatrix.apply(e,arguments),this},r.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},r.default.prototype.rotate=function(e,t){return r.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(e),t),this},r.default.prototype.rotateX=function(e){return this._assert3d("rotateX"),r.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(e)),this},r.default.prototype.rotateY=function(e){return this._assert3d("rotateY"),r.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(e)),this},r.default.prototype.rotateZ=function(e){return this._assert3d("rotateZ"),r.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(e)),this},r.default.prototype.scale=function(e,t,n){var i;return r.default._validateParameters("scale",arguments),e instanceof r.default.Vector?(e=(i=e).x,t=i.y,n=i.z):Array.isArray(e)&&(e=(i=e)[0],t=i[1],n=i[2]||1),isNaN(t)?t=n=e:isNaN(n)&&(n=1),this._renderer.scale(e,t,n),this},r.default.prototype.shearX=function(e){return r.default._validateParameters("shearX",arguments),e=this._toRadians(e),this._renderer.applyMatrix(1,0,Math.tan(e),1,0,0),this},r.default.prototype.shearY=function(e){return r.default._validateParameters("shearY",arguments),e=this._toRadians(e),this._renderer.applyMatrix(1,Math.tan(e),0,1,0,0),this},r.default.prototype.translate=function(e,t,n){return r.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(e,t,n):this._renderer.translate(e,t),this},e=r.default,n.default=e},{"./main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.iterator":246}],297:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.ends-with"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.ends-with"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator");var i=(e=e("../core/main"))&&e.__esModule?e:{default:e};function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(e){return(a="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}i.default.prototype.storeItem=function(e,t){"string"!=typeof e&&console.log("The argument that you passed to storeItem() - ".concat(e," is not a string.")),e.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(e," must not end with 'p5TypeID'.")),void 0===t&&console.log("You cannot store undefined variables using storeItem().");var n=a(t);switch(n){case"number":case"boolean":t=t.toString();break;case"object":t instanceof i.default.Color?n="p5.Color":t instanceof i.default.Vector&&(n="p5.Vector",t=[t.x,t.y,t.z]),t=JSON.stringify(t)}localStorage.setItem(e,t),e="".concat(e,"p5TypeID"),localStorage.setItem(e,n)},i.default.prototype.getItem=function(e){var t=localStorage.getItem(e),n=localStorage.getItem("".concat(e,"p5TypeID"));if(void 0===n)console.log("Unable to determine type of item stored under ".concat(e,"in local storage. Did you save the item with something other than setItem()?"));else if(null!==t)switch(n){case"number":t=parseFloat(t);break;case"boolean":t="true"===t;break;case"object":t=JSON.parse(t);break;case"p5.Color":t=JSON.parse(t),t=this.color.apply(this,o(t.levels));break;case"p5.Vector":t=JSON.parse(t),t=this.createVector.apply(this,o(t))}return t},i.default.prototype.clearStorage=function(){var e=this;Object.keys(localStorage).forEach((function(t){t.endsWith("p5TypeID")&&e.removeItem(t.replace("p5TypeID",""))}))},i.default.prototype.removeItem=function(e){"string"!=typeof e&&console.log("The argument that you passed to removeItem() - ".concat(e," is not a string.")),localStorage.removeItem(e),localStorage.removeItem("".concat(e,"p5TypeID"))}},{"../core/main":283,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.ends-with":198,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],298:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.object.keys"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(e=e("../core/main"))&&e.__esModule?e:{default:e};function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){return function(){var t,n=c(e);if(t=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),1}catch(e){}}}()?(t=c(this).constructor,Reflect.construct(n,arguments,t)):n.apply(this,arguments),n=this,!t||"object"!==i(t)&&"function"!=typeof t){if(void 0!==n)return n;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){t&&p(e.prototype,t),n&&p(e,n)}o.default.prototype.createStringDict=function(e,t){return o.default._validateParameters("createStringDict",arguments),new o.default.StringDict(e,t)},o.default.prototype.createNumberDict=function(e,t){return o.default._validateParameters("createNumberDict",arguments),new o.default.NumberDict(e,t)},o.default.TypedDict=function(){function e(t,n){return u(this,e),t instanceof Object?this.data=t:(this.data={},this.data[t]=n),this}return d(e,[{key:"size",value:function(){return Object.keys(this.data).length}},{key:"hasKey",value:function(e){return this.data.hasOwnProperty(e)}},{key:"get",value:function(e){if(this.data.hasOwnProperty(e))return this.data[e];console.log("".concat(e," does not exist in this Dictionary"))}},{key:"set",value:function(e,t){this._validate(t)?this.data[e]=t:console.log("Those values dont work for this dictionary type.")}},{key:"_addObj",value:function(e){for(var t in e)this.set(t,e[t])}},{key:"create",value:function(e,t){e instanceof Object&&void 0===t?this._addObj(e):void 0!==e?this.set(e,t):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")}},{key:"clear",value:function(){this.data={}}},{key:"remove",value:function(e){if(!this.data.hasOwnProperty(e))throw new Error("".concat(e," does not exist in this Dictionary"));delete this.data[e]}},{key:"print",value:function(){for(var e in this.data)console.log("key:".concat(e," value:").concat(this.data[e]))}},{key:"saveTable",value:function(e){var t,n="";for(t in this.data)n+="".concat(t,",").concat(this.data[t],"\n");var r=new Blob([n],{type:"text/csv"});o.default.prototype.downloadFile(r,e||"mycsv","csv")}},{key:"saveJSON",value:function(e,t){o.default.prototype.saveJSON(this.data,e,t)}},{key:"_validate",value:function(e){return!0}}]),e}(),o.default.StringDict=function(){a(t,o.default.TypedDict);var e=l(t);function t(){u(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.call.apply(e,[this].concat(r))}return d(t,[{key:"_validate",value:function(e){return"string"==typeof e}}]),t}(),o.default.NumberDict=function(){a(t,o.default.TypedDict);var e=l(t);function t(){u(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.call.apply(e,[this].concat(r))}return d(t,[{key:"_validate",value:function(e){return"number"==typeof e}},{key:"add",value:function(e,t){this.data.hasOwnProperty(e)?this.data[e]+=t:console.log("The key - ".concat(e," does not exist in this dictionary."))}},{key:"sub",value:function(e,t){this.add(e,-t)}},{key:"mult",value:function(e,t){this.data.hasOwnProperty(e)?this.data[e]*=t:console.log("The key - ".concat(e," does not exist in this dictionary."))}},{key:"div",value:function(e,t){this.data.hasOwnProperty(e)?this.data[e]/=t:console.log("The key - ".concat(e," does not exist in this dictionary."))}},{key:"_valueTest",value:function(e){if(0===Object.keys(this.data).length)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(1===Object.keys(this.data).length)return this.data[Object.keys(this.data)[0]];var t,n=this.data[Object.keys(this.data)[0]];for(t in this.data)this.data[t]*e<n*e&&(n=this.data[t]);return n}},{key:"minValue",value:function(){return this._valueTest(1)}},{key:"maxValue",value:function(){return this._valueTest(-1)}},{key:"_keyTest",value:function(e){if(0===Object.keys(this.data).length)throw new Error("Unable to use minValue on an empty NumberDict");if(1===Object.keys(this.data).length)return Object.keys(this.data)[0];for(var t=Object.keys(this.data)[0],n=1;n<Object.keys(this.data).length;n++)Object.keys(this.data)[n]*e<t*e&&(t=Object.keys(this.data)[n]);return t}},{key:"minKey",value:function(){return this._keyTest(1)}},{key:"maxKey",value:function(){return this._keyTest(-1)}}]),t}(),e=o.default.TypedDict,n.default=e},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],299:[function(t,n,r){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=(t=t("../core/main"))&&t.__esModule?t:{default:t};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){t&&a(e.prototype,t),n&&a(e,n)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return function(){var t,n,r=p(e);return t=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),1}catch(e){}}}()?(t=p(this).constructor,Reflect.construct(r,arguments,t)):r.apply(this,arguments),r=this,!(n=t)||"object"!==h(n)&&"function"!=typeof n?u(r):n}}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e){return(h="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(e){return i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":i(e)})(e)}function m(e,t,n){return(t._userNode||document.body).appendChild(e),n=new(n?o.default.MediaElement:o.default.Element)(e,t),t._elements.push(n),n}o.default.prototype.select=function(e,t){return o.default._validateParameters("select",arguments),(t=this._getContainer(t).querySelector(e))?this._wrapElement(t):null},o.default.prototype.selectAll=function(e,t){o.default._validateParameters("selectAll",arguments);var n=[],r=this._getContainer(t).querySelectorAll(e);if(r)for(var i=0;i<r.length;i++){var a=this._wrapElement(r[i]);n.push(a)}return n},o.default.prototype._getContainer=function(e){var t=document;return"string"==typeof e?t=document.querySelector(e)||document:e instanceof o.default.Element?t=e.elt:e instanceof HTMLElement&&(t=e),t},o.default.prototype._wrapElement=function(e){var t,n=Array.prototype.slice.call(e.children);return"INPUT"===e.tagName&&"checkbox"===e.type?((t=new o.default.Element(e,this)).checked=function(){return 0===arguments.length?this.elt.checked:(this.elt.checked=!(arguments.length<=0||!arguments[0]),this)},t):"VIDEO"===e.tagName||"AUDIO"===e.tagName?new o.default.MediaElement(e,this):"SELECT"===e.tagName?this.createSelect(new o.default.Element(e,this)):0<n.length&&n.every((function(e){return"INPUT"===e.tagName||"LABEL"===e.tagName}))&&("DIV"===e.tagName||"SPAN"===e.tagName)?this.createRadio(new o.default.Element(e,this)):new o.default.Element(e,this)},o.default.prototype.removeElements=function(e){o.default._validateParameters("removeElements",arguments),this._elements.filter((function(e){return!(e.elt instanceof HTMLCanvasElement)})).map((function(e){return e.remove()}))},o.default.Element.prototype.changed=function(e){return o.default.Element._adjustListener("change",e,this),this},o.default.Element.prototype.input=function(e){return o.default.Element._adjustListener("input",e,this),this},o.default.prototype.createDiv=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=document.createElement("div");return t.innerHTML=e,m(t,this)},o.default.prototype.createP=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=document.createElement("p");return t.innerHTML=e,m(t,this)},o.default.prototype.createSpan=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=document.createElement("span");return t.innerHTML=e,m(t,this)},o.default.prototype.createImg=function(){o.default._validateParameters("createImg",arguments);var e,t=document.createElement("img"),n=arguments;return 1<n.length&&"string"==typeof n[1]&&(t.alt=n[1]),2<n.length&&"string"==typeof n[2]&&(t.crossOrigin=n[2]),t.src=n[0],e=m(t,this),t.addEventListener("load",(function(){e.width=t.offsetWidth||t.width,e.height=t.offsetHeight||t.height;var r=n[n.length-1];"function"==typeof r&&r(e)})),e},o.default.prototype.createA=function(e,t,n){o.default._validateParameters("createA",arguments);var r=document.createElement("a");return r.href=e,r.innerHTML=t,n&&(r.target=n),m(r,this)},o.default.prototype.createSlider=function(e,t,n,r){o.default._validateParameters("createSlider",arguments);var i=document.createElement("input");return i.type="range",i.min=e,i.max=t,0===r?i.step=1e-18:r&&(i.step=r),"number"==typeof n&&(i.value=n),m(i,this)},o.default.prototype.createButton=function(e,t){o.default._validateParameters("createButton",arguments);var n=document.createElement("button");return n.innerHTML=e,t&&(n.value=t),m(n,this)},o.default.prototype.createCheckbox=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o.default._validateParameters("createCheckbox",t);var r=document.createElement("div"),i=document.createElement("input"),a=(i.type="checkbox",document.createElement("label")),s=(a.appendChild(i),r.appendChild(a),m(r,this));return s.checked=function(){var e=s.elt.firstElementChild.getElementsByTagName("input")[0];if(e){if(0===arguments.length)return e.checked;e.checked=!(arguments.length<=0||!arguments[0])}return s},this.value=function(e){return s.value=e,this},t[0]&&(s.value(t[0]),(r=document.createElement("span")).innerHTML=t[0],a.appendChild(r)),t[1]&&(i.checked=!0),s},o.default.prototype.createSelect=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];o.default._validateParameters("createSelect",n);var i,a=n[0];return a instanceof o.default.Element&&a.elt instanceof HTMLSelectElement?this.elt=(e=a).elt:a instanceof HTMLSelectElement?(e=m(a,this),this.elt=a):(i=document.createElement("select"),a&&"boolean"==typeof a&&i.setAttribute("multiple","true"),e=m(i,this),this.elt=i),e.option=function(e,t){var n;if(void 0!==e){for(var r,i=0;i<this.elt.length;i+=1)if(this.elt[i].textContent===e){n=i;break}void 0!==n?!1===t?this.elt.remove(n):this.elt[n].value=t:((r=document.createElement("option")).textContent=e,r.value=void 0===t?e:t,this.elt.appendChild(r),this._pInst._elements.push(r))}},e.selected=function(e){if(void 0!==e){for(var t=0;t<this.elt.length;t+=1)this.elt[t].value.toString()===e.toString()&&(this.elt.selectedIndex=t);return this}if(this.elt.getAttribute("multiple")){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=this.elt.selectedOptions[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;n.push(l.value)}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}return this.elt.value},e.disable=function(e){if("string"==typeof e)for(var t=0;t<this.elt.length;t++)this.elt[t].value.toString()===e&&(this.elt[t].disabled=!0,this.elt[t].selected=!1);else this.elt.disabled=!0;return this},e.enable=function(e){if("string"==typeof e)for(var t=0;t<this.elt.length;t++)this.elt[t].value.toString()===e&&(this.elt[t].disabled=!1,this.elt[t].selected=!1);else{this.elt.disabled=!1;for(var n=0;n<this.elt.length;n++)this.elt[n].disabled=!1,this.elt[n].selected=!1}return this},e};var f=0;function g(e,t,n,r){var i=document.createElement(t),o=("string"==typeof(n=n||"")&&(n=[n]),!0),a=void(t=!1);try{for(var s,l=n[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var c=s.value,u=document.createElement("source");u.setAttribute("src",c),i.appendChild(u)}}catch(e){t=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(t)throw a}}"function"==typeof r&&i.addEventListener("canplaythrough",(function e(){r(),i.removeEventListener("canplaythrough",e)}));var p=m(i,e,!0);return p.loadedmetadata=!1,i.addEventListener("loadedmetadata",(function(){p.width=i.videoWidth,p.height=i.videoHeight,0===p.elt.width&&(p.elt.width=i.videoWidth),0===p.elt.height&&(p.elt.height=i.videoHeight),p.presetPlaybackRate&&(p.elt.playbackRate=p.presetPlaybackRate,delete p.presetPlaybackRate),p.loadedmetadata=!0})),p}function y(e,t,n,r){d(this,y),this.callback=e,this.time=t,this.id=n,this.val=r}o.default.prototype.createRadio=function(){function e(e){return e instanceof HTMLInputElement&&"radio"===e.type}function t(e){return e instanceof HTMLLabelElement}var n,r,i,a=arguments.length<=0?void 0:arguments[0];return a instanceof o.default.Element&&(a.elt instanceof HTMLDivElement||a.elt instanceof HTMLSpanElement)?(n=a,this.elt=a.elt):a instanceof HTMLDivElement||a instanceof HTMLSpanElement?(n=m(a,this),r=this.elt=a,"string"==typeof(arguments.length<=1?void 0:arguments[1])&&(i=arguments.length<=1?void 0:arguments[1])):("string"==typeof a&&(i=a),r=document.createElement("div"),n=m(r,this),this.elt=r),n._name=i||"radioOption_".concat(f++),n._getOptionsArray=function(){return Array.from(this.elt.children).filter((function(n){return e(n)||t(n)&&e(n.firstElementChild)})).map((function(t){return e(t)?t:t.firstElementChild}))},n.option=function(e,r){var i,o,a,s=!0,l=!1,c=void 0;try{for(var u,p=n._getOptionsArray()[Symbol.iterator]();!(s=(u=p.next()).done);s=!0){var d=u.value;if(d.value===e){i=d;break}}}catch(e){l=!0,c=e}finally{try{s||null==p.return||p.return()}finally{if(l)throw c}}return void 0===i&&((i=document.createElement("input")).setAttribute("type","radio"),i.setAttribute("value",e)),i.setAttribute("name",n._name),t(i.parentElement)?o=i.parentElement:(o=document.createElement("label")).insertAdjacentElement("afterbegin",i),o.lastElementChild instanceof HTMLSpanElement?a=o.lastElementChild:(a=document.createElement("span"),i.insertAdjacentElement("afterend",a)),a.innerHTML=void 0===r?e:r,this.elt.appendChild(o),i},n.remove=function(e){var r=!0,i=!1,o=void 0;try{for(var a,s=n._getOptionsArray()[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;if(l.value===e)return void(t(l.parentElement)?l.parentElement:l).remove()}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}},n.value=function(){var e="",t=!0,r=!1,i=void 0;try{for(var o,a=n._getOptionsArray()[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var s=o.value;if(s.checked){e=s.value;break}}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e},n.selected=function(e){var t=null;if(void 0===e){var r=!0,i=!1,o=void 0;try{for(var a,s=n._getOptionsArray()[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;if(l.checked){t=l;break}}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}}else{n._getOptionsArray().forEach((function(e){e.checked=!1,e.removeAttribute("checked")}));var c=!0;i=!1,o=void 0;try{for(var u,p=n._getOptionsArray()[Symbol.iterator]();!(c=(u=p.next()).done);c=!0){var d=u.value;d.value===e&&(d.setAttribute("checked",!0),d.checked=!0,t=d)}}catch(e){i=!0,o=e}finally{try{c||null==p.return||p.return()}finally{if(i)throw o}}}return t},n.disable=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=!0,r=!1,i=void 0;try{for(var o,a=n._getOptionsArray()[Symbol.iterator]();!(t=(o=a.next()).done);t=!0)o.value.setAttribute("disabled",e)}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}},n},o.default.prototype.createColorPicker=function(e){o.default._validateParameters("createColorPicker",arguments);var t=document.createElement("input");return t.type="color",e?e instanceof o.default.Color?t.value=e.toString("#rrggbb"):(o.default.prototype._colorMode="rgb",o.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},t.value=o.default.prototype.color(e).toString("#rrggbb")):t.value="#000000",(t=m(t,this)).color=function(){return e&&(e.mode&&(o.default.prototype._colorMode=e.mode),e.maxes&&(o.default.prototype._colorMaxes=e.maxes)),o.default.prototype.color(this.elt.value)},t},o.default.prototype.createInput=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"text",n=(o.default._validateParameters("createInput",arguments),document.createElement("input"));return n.setAttribute("value",e),n.setAttribute("type",t),m(n,this)},o.default.prototype.createFileInput=function(e){var t,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(o.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob)return(t=document.createElement("input")).setAttribute("type","file"),n&&t.setAttribute("multiple",!0),t.addEventListener("change",(function(t){var n=!0,r=!1,i=void 0;try{for(var a,s=t.target.files[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;o.default.File._load(l,e)}}catch(t){r=!0,i=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}}),!1),m(t,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.")},o.default.prototype.createVideo=function(e,t){return o.default._validateParameters("createVideo",arguments),g(this,"video",e,t)},o.default.prototype.createAudio=function(e,t){return o.default._validateParameters("createAudio",arguments),g(this,"audio",e,t)},o.default.prototype.VIDEO="video",o.default.prototype.AUDIO="audio",void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return t?new Promise((function(n,r){t.call(navigator,e,n,r)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),o.default.prototype.createCapture=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(o.default._validateParameters("createCapture",t),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");for(var r,i=!0,a=!0,s=!1,l=0,c=t;l<c.length;l++){var u=c[l];u===o.default.prototype.VIDEO?a=!1:u===o.default.prototype.AUDIO?i=!1:"object"===h(u)?(void 0!==u.flipped&&(s=u.flipped,delete u.flipped),p=Object.assign({},p,u)):"function"==typeof u&&(r=u)}var p=Object.assign({},{video:i,audio:a},p),d=document.createElement("video"),f=(d.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(p).then((function(e){try{"srcObject"in d?d.srcObject=e:d.src=window.URL.createObjectURL(e)}catch(t){d.src=e}})).catch((function(e){"NotFoundError"===e.name&&o.default._friendlyError("No webcam found on this device","createCapture"),"NotAllowedError"===e.name&&o.default._friendlyError("Access to the camera was denied","createCapture"),console.error(e)})),m(d,this,!0));return f.loadedmetadata=!1,d.addEventListener("loadedmetadata",(function(){d.play(),d.width?(f.width=d.width,f.height=d.height,s&&(f.elt.style.transform="scaleX(-1)")):(f.width=f.elt.width=d.videoWidth,f.height=f.elt.height=d.videoHeight),f.loadedmetadata=!0,r&&r(d.srcObject)})),f.flipped=s,f},o.default.prototype.createElement=function(e,t){return o.default._validateParameters("createElement",arguments),e=document.createElement(e),void 0!==t&&(e.innerHTML=t),m(e,this)},o.default.Element.prototype.addClass=function(e){return this.elt.className?this.hasClass(e)||(this.elt.className=this.elt.className+" "+e):this.elt.className=e,this},o.default.Element.prototype.removeClass=function(e){return this.elt.classList.remove(e),this},o.default.Element.prototype.hasClass=function(e){return this.elt.classList.contains(e)},o.default.Element.prototype.toggleClass=function(e){return this.elt.classList.contains(e)?this.elt.classList.remove(e):this.elt.classList.add(e),this},o.default.Element.prototype.child=function(e){return void 0===e?this.elt.childNodes:("string"==typeof e?("#"===e[0]&&(e=e.substring(1)),e=document.getElementById(e)):e instanceof o.default.Element&&(e=e.elt),e instanceof HTMLElement&&this.elt.appendChild(e),this)},o.default.Element.prototype.center=function(e){var t=this.elt.style.display,n="none"===this.elt.style.display,r="none"===this.parent().style.display,i={x:this.elt.offsetLeft,y:this.elt.offsetTop},o=(n&&this.show(),r&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),a=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return"both"===e||void 0===e?this.position(o/2+this.parent().offsetLeft,a/2+this.parent().offsetTop):"horizontal"===e?this.position(o/2+this.parent().offsetLeft,i.y):"vertical"===e&&this.position(i.x,a/2+this.parent().offsetTop),this.style("display",t),n&&this.hide(),r&&this.parent().hide(),this},o.default.Element.prototype.html=function(){return 0===arguments.length?this.elt.innerHTML:(arguments.length<=1||!arguments[1]?this.elt.innerHTML=arguments.length<=0?void 0:arguments[0]:this.elt.insertAdjacentHTML("beforeend",arguments.length<=0?void 0:arguments[0]),this)},o.default.Element.prototype.position=function(){return 0===arguments.length?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position="static"!==(arguments.length<=2?void 0:arguments[2])&&"fixed"!==(arguments.length<=2?void 0:arguments[2])&&"relative"!==(arguments.length<=2?void 0:arguments[2])&&"sticky"!==(arguments.length<=2?void 0:arguments[2])&&"initial"!==(arguments.length<=2?void 0:arguments[2])&&"inherit"!==(arguments.length<=2?void 0:arguments[2])?"absolute":arguments.length<=2?void 0:arguments[2],this.elt.style.left=(arguments.length<=0?void 0:arguments[0])+"px",this.elt.style.top=(arguments.length<=1?void 0:arguments[1])+"px",this.x=arguments.length<=0?void 0:arguments[0],this.y=arguments.length<=1?void 0:arguments[1],this)},o.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var e="";return this.elt.style.transform&&(e=(e=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),2===arguments.length?this.elt.style.transform="translate("+(arguments.length<=0?void 0:arguments[0])+"px, "+(arguments.length<=1?void 0:arguments[1])+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+(arguments.length<=0?void 0:arguments[0])+"px,"+(arguments.length<=1?void 0:arguments[1])+"px,"+(arguments.length<=2?void 0:arguments[2])+"px)",this.elt.parentElement.style.perspective=3===arguments.length?"1000px":(arguments.length<=3?void 0:arguments[3])+"px"),this.elt.style.transform+=e,this},o.default.Element.prototype._rotate=function(){var e="";return this.elt.style.transform&&(e=(e=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),1===arguments.length?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg)":2===arguments.length?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg, "+(arguments.length<=1?void 0:arguments[1])+"deg)":3===arguments.length&&(this.elt.style.transform="rotateX("+(arguments.length<=0?void 0:arguments[0])+"deg)",this.elt.style.transform+="rotateY("+(arguments.length<=1?void 0:arguments[1])+"deg)",this.elt.style.transform+="rotateZ("+(arguments.length<=2?void 0:arguments[2])+"deg)"),this.elt.style.transform+=e,this},o.default.Element.prototype.style=function(e,t){if(void 0===(t=t instanceof o.default.Color?"rgba("+t.levels[0]+","+t.levels[1]+","+t.levels[2]+","+t.levels[3]/255+")":t)){if(-1===e.indexOf(":"))return window.getComputedStyle(this.elt).getPropertyValue(e);for(var n=e.split(";"),r=0;r<n.length;r++){var i=n[r].split(":");i[0]&&i[1]&&(this.elt.style[i[0].trim()]=i[1].trim())}}else this.elt.style[e]=t,"width"!==e&&"height"!==e&&"left"!==e&&"top"!==e||(t=window.getComputedStyle(this.elt).getPropertyValue(e).replace(/[^\d.]/g,""),this[e]=Math.round(parseFloat(t,10)));return this},o.default.Element.prototype.attribute=function(e,t){if(null==this.elt.firstChild||"checkbox"!==this.elt.firstChild.type&&"radio"!==this.elt.firstChild.type)return void 0===t?this.elt.getAttribute(e):(this.elt.setAttribute(e,t),this);if(void 0===t)return this.elt.firstChild.getAttribute(e);for(var n=0;n<this.elt.childNodes.length;n++)this.elt.childNodes[n].setAttribute(e,t)},o.default.Element.prototype.removeAttribute=function(e){if(null!=this.elt.firstChild&&("checkbox"===this.elt.firstChild.type||"radio"===this.elt.firstChild.type))for(var t=0;t<this.elt.childNodes.length;t++)this.elt.childNodes[t].removeAttribute(e);return this.elt.removeAttribute(e),this},o.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments.length<=0?void 0:arguments[0],this):"range"===this.elt.type?parseFloat(this.elt.value):this.elt.value},o.default.Element.prototype.show=function(){return this.elt.style.display="block",this},o.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},o.default.Element.prototype.size=function(e,t){if(0===arguments.length)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var n=e,r=t,i=o.default.prototype.AUTO;if(n!==i||r!==i){if(n===i?n=t*this.width/this.height:r===i&&(r=e*this.height/this.width),this.elt instanceof HTMLCanvasElement){var a,s={},l=this.elt.getContext("2d");for(a in l)s[a]=l[a];for(a in this.elt.setAttribute("width",n*this._pInst._pixelDensity),this.elt.setAttribute("height",r*this._pInst._pixelDensity),this.elt.style.width=n+"px",this.elt.style.height=r+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),s)this.elt.getContext("2d")[a]=s[a]}else this.elt.style.width=n+"px",this.elt.style.height=r+"px",this.elt.width=n,this.elt.height=r;this.width=n,this.height=r,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",n),this._pInst._setProperty("height",r))}return this},o.default.Element.prototype.remove=function(){this instanceof o.default.MediaElement&&(this.stop(),null!==(t=this.elt.srcObject)&&t.getTracks().forEach((function(e){e.stop()})));var e,t=this._pInst._elements.indexOf(this);for(e in-1!==t&&this._pInst._elements.splice(t,1),this._events)this.elt.removeEventListener(e,this._events[e]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},o.default.Element.prototype.drop=function(e,t){var n;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",n=function(e){e.preventDefault()}),this.elt.addEventListener("dragleave",n)),o.default.Element._attachListener("drop",(function(n){n.preventDefault(),"function"==typeof t&&t.call(this,n),n=n.dataTransfer.files;var r=!0,i=!1,a=void 0;try{for(var s,l=n[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value;o.default.File._load(c,e)}}catch(n){i=!0,a=n}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}}),this)):console.log("The File APIs are not fully supported in this browser."),this},o.default.Element.prototype.draggable=function(e){var t,n="ontouchstart"in window,r=0,i=0,o=0,a=0,s=n?"touchend":"mouseup",l=n?"touchmove":"mousemove";function c(t){var s;t=t||window.event,a=n?(s=t.changedTouches,r=o-parseInt(s[0].clientX),i=a-parseInt(s[0].clientY),o=parseInt(s[0].clientX),parseInt(s[0].clientY)):(r=o-parseInt(t.clientX),i=a-parseInt(t.clientY),o=parseInt(t.clientX),parseInt(t.clientY)),e.style.left=e.offsetLeft-r+"px",e.style.top=e.offsetTop-i+"px"}function u(){document.removeEventListener(s,u,!1),document.removeEventListener(l,c,!1)}return void 0===e?t=e=this.elt:e!==this.elt&&e.elt!==this.elt&&(e=e.elt,t=this.elt),t.addEventListener(n?"touchstart":"mousedown",(function(e){var t;return e=e||window.event,a=n?(t=e.changedTouches,o=parseInt(t[0].clientX),parseInt(t[0].clientY)):(o=parseInt(e.clientX),parseInt(e.clientY)),document.addEventListener(s,u,!1),document.addEventListener(l,c,!1),!1}),!1),t.style.cursor="move",this},t=function(t){var n=i;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&l(n,t);var r=c(i);function i(e,t){d(this,i);var n=u(t=r.call(this,e,t));return t.elt.crossOrigin="anonymous",t._prevTime=0,t._cueIDCounter=0,t._cues=[],t.pixels=[],t._pixelsState=u(t),t._pixelDensity=1,t._modified=!1,t._frameOnCanvas=-1,Object.defineProperty(n,"src",{get:function(){var e=n.elt.children[0].src,t=n.elt.src===window.location.href?"":n.elt.src;return e===window.location.href?t:e},set:function(t){for(var r=0;r<n.elt.children.length;r++)n.elt.removeChild(n.elt.children[r]);var i=document.createElement("source");i.src=t,e.appendChild(i),n.elt.src=t,n.modified=!0}}),n._onended=function(){},n.elt.onended=function(){n._onended(n)},t}return s(i,[{key:"play",value:function(){var e;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(e=this.elt.play())&&e.catch&&e.catch((function(e){"NotAllowedError"===e.name?console.error(e):console.error("Media play method encountered an unexpected error",e)})),this}},{key:"stop",value:function(){return this.elt.pause(),this.elt.currentTime=0,this}},{key:"pause",value:function(){return this.elt.pause(),this}},{key:"loop",value:function(){return this.elt.setAttribute("loop",!0),this.play(),this}},{key:"noLoop",value:function(){return this.elt.removeAttribute("loop"),this}},{key:"_setupAutoplayFailDetection",value:function(){var t=setTimeout((function(){console.error(e)}),500);this.elt.addEventListener("play",(function(){return clearTimeout(t)}),{passive:!0,once:!0})}},{key:"autoplay",value:function(e){var t=this,n=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",e),e&&!n&&(e=function(){return t._setupAutoplayFailDetection()},4===this.elt.readyState?e():this.elt.addEventListener("canplay",e,{passive:!0,once:!0})),this}},{key:"volume",value:function(e){if(void 0===e)return this.elt.volume;this.elt.volume=e}},{key:"speed",value:function(e){if(void 0===e)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=e:this.presetPlaybackRate=e}},{key:"time",value:function(e){return void 0===e?this.elt.currentTime:(this.elt.currentTime=e,this)}},{key:"duration",value:function(){return this.elt.duration}},{key:"_ensureCanvas",value:function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0));var e=this._frameOnCanvas!==this._pInst.frameCount;this.loadedmetadata&&e&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.clearRect(0,0,this.canvas.width,this.canvas.height),!0===this.flipped&&(this.drawingContext.save(),this.drawingContext.scale(-1,1),this.drawingContext.translate(-this.canvas.width,0)),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),!0===this.flipped&&this.drawingContext.restore(),this.setModified(!0),this._frameOnCanvas=this._pInst.frameCount)}},{key:"loadPixels",value:function(){this._ensureCanvas();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.default.Renderer2D.prototype.loadPixels.apply(this,t)}},{key:"updatePixels",value:function(e,t,n,r){return this.loadedmetadata&&(this._ensureCanvas(),o.default.Renderer2D.prototype.updatePixels.call(this,e,t,n,r)),this.setModified(!0),this}},{key:"get",value:function(){this._ensureCanvas();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.default.Renderer2D.prototype.get.apply(this,t)}},{key:"_getPixel",value:function(){this.loadPixels();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.default.Renderer2D.prototype._getPixel.apply(this,t)}},{key:"set",value:function(e,t,n){this.loadedmetadata&&(this._ensureCanvas(),o.default.Renderer2D.prototype.set.call(this,e,t,n),this.setModified(!0))}},{key:"copy",value:function(){this._ensureCanvas();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o.default.prototype.copy.apply(this,t)}},{key:"mask",value:function(){this.loadPixels(),this.setModified(!0);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o.default.Image.prototype.mask.apply(this,t)}},{key:"isModified",value:function(){return this._modified}},{key:"setModified",value:function(e){this._modified=e}},{key:"onended",value:function(e){return this._onended=e,this}},{key:"connect",value:function(e){var t,n;if("function"==typeof o.default.prototype.getAudioContext)t=o.default.prototype.getAudioContext(),n=o.default.soundOut.input;else try{n=(t=e.context).destination}catch(e){throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=t.createMediaElementSource(this.elt),this.audioSourceNode.connect(n)),e?e.input?this.audioSourceNode.connect(e.input):this.audioSourceNode.connect(e):this.audioSourceNode.connect(n)}},{key:"disconnect",value:function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()}},{key:"showControls",value:function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0}},{key:"hideControls",value:function(){this.elt.controls=!1}},{key:"addCue",value:function(e,t,n){var r=this._cueIDCounter++;return t=new y(t,e,r,n),this._cues.push(t),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),r}},{key:"removeCue",value:function(e){for(var t=0;t<this._cues.length;t++)this._cues[t].id===e&&(console.log(e),this._cues.splice(t,1));0===this._cues.length&&(this.elt.ontimeupdate=null)}},{key:"clearCues",value:function(){this._cues=[],this.elt.ontimeupdate=null}},{key:"_onTimeUpdate",value:function(){for(var e=this.time(),t=0;t<this._cues.length;t++){var n=this._cues[t].time,r=this._cues[t].val;this._prevTime<n&&n<=e&&this._cues[t].callback(r)}this._prevTime=e}}]),i}(o.default.Element),o.default.MediaElement=t,t=function(){function e(t,n){d(this,e),this.file=t,this._pInst=n,n=t.type.split("/"),this.type=n[0],this.subtype=n[1],this.name=t.name,this.size=t.size,this.data=void 0}return s(e,null,[{key:"_createLoader",value:function(e,t){var n=new FileReader;return n.onload=function(n){var r,i=new o.default.File(e);"application/json"===i.file.type?i.data=JSON.parse(n.target.result):"text/xml"===i.file.type?(r=(new DOMParser).parseFromString(n.target.result,"text/xml"),i.data=new o.default.XML(r.documentElement)):i.data=n.target.result,t(i)},n}},{key:"_load",value:function(e,t){var n;/^text\//.test(e.type)||"application/json"===e.type?o.default.File._createLoader(e,t).readAsText(e):/^(video|audio)\//.test(e.type)?((n=new o.default.File(e)).data=URL.createObjectURL(e),t(n)):o.default.File._createLoader(e,t).readAsDataURL(e)}}]),e}(),o.default.File=t,t=o.default,r.default=t},{"../core/main":283,"core-js/modules/es.array.every":155,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246,"core-js/modules/web.url":248}],300:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e};r.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",r.default.prototype.accelerationX=0,r.default.prototype.accelerationY=0,r.default.prototype.accelerationZ=0,r.default.prototype.pAccelerationX=0,r.default.prototype.pAccelerationY=0,r.default.prototype.pAccelerationZ=0,r.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},r.default.prototype.rotationX=0,r.default.prototype.rotationY=0,r.default.prototype.rotationZ=0,r.default.prototype.pRotationX=0,r.default.prototype.pRotationY=0;var i=r.default.prototype.pRotationZ=0,o=0,a=0,s="clockwise",l="clockwise",c="clockwise",u=(r.default.prototype.pRotateDirectionX=void 0,r.default.prototype.pRotateDirectionY=void 0,r.default.prototype.pRotateDirectionZ=void 0,r.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},r.default.prototype.turnAxis=void 0,.5),p=30;r.default.prototype.setMoveThreshold=function(e){r.default._validateParameters("setMoveThreshold",arguments),u=e},r.default.prototype.setShakeThreshold=function(e){r.default._validateParameters("setShakeThreshold",arguments),p=e},r.default.prototype._ondeviceorientation=function(e){this._updatePRotations(),this._setProperty("rotationX",this._fromDegrees(e.beta)),this._setProperty("rotationY",this._fromDegrees(e.gamma)),this._setProperty("rotationZ",this._fromDegrees(e.alpha)),this._handleMotion()},r.default.prototype._ondevicemotion=function(e){this._updatePAccelerations(),this._setProperty("accelerationX",2*e.acceleration.x),this._setProperty("accelerationY",2*e.acceleration.y),this._setProperty("accelerationZ",2*e.acceleration.z),this._handleMotion()},r.default.prototype._handleMotion=function(){90===window.orientation||-90===window.orientation?this._setProperty("deviceOrientation","landscape"):0===window.orientation?this._setProperty("deviceOrientation","portrait"):void 0===window.orientation&&this._setProperty("deviceOrientation","undefined");var e,t,n,r,d,h=this._isGlobal?window:this;"function"==typeof h.deviceMoved&&(Math.abs(this.accelerationX-this.pAccelerationX)>u||Math.abs(this.accelerationY-this.pAccelerationY)>u||Math.abs(this.accelerationZ-this.pAccelerationZ)>u)&&h.deviceMoved(),"function"==typeof h.deviceTurned&&(t=this._toDegrees(this.rotationX)+180,n=this._toDegrees(this.pRotationX)+180,e=i+180,0<t-n&&t-n<270||t-n<-270?s="clockwise":(t-n<0||270<t-n)&&(s="counter-clockwise"),s!==this.pRotateDirectionX&&(e=t),90<Math.abs(t-e)&&Math.abs(t-e)<270&&(e=t,this._setProperty("turnAxis","X"),h.deviceTurned()),this.pRotateDirectionX=s,i=e-180,n=this._toDegrees(this.rotationY)+180,t=this._toDegrees(this.pRotationY)+180,e=o+180,0<n-t&&n-t<270||n-t<-270?l="clockwise":(n-t<0||270<n-this.pRotationY)&&(l="counter-clockwise"),l!==this.pRotateDirectionY&&(e=n),90<Math.abs(n-e)&&Math.abs(n-e)<270&&(e=n,this._setProperty("turnAxis","Y"),h.deviceTurned()),this.pRotateDirectionY=l,o=e-180,0<(t=this._toDegrees(this.rotationZ))-(n=this._toDegrees(this.pRotationZ))&&t-n<270||t-n<-270?c="clockwise":(t-n<0||270<t-n)&&(c="counter-clockwise"),c!==this.pRotateDirectionZ&&(a=t),90<Math.abs(t-a)&&Math.abs(t-a)<270&&(a=t,this._setProperty("turnAxis","Z"),h.deviceTurned()),this.pRotateDirectionZ=c,this._setProperty("turnAxis",void 0)),"function"==typeof h.deviceShaken&&(null!==this.pAccelerationX&&(r=Math.abs(this.accelerationX-this.pAccelerationX),d=Math.abs(this.accelerationY-this.pAccelerationY)),p<r+d&&h.deviceShaken())},e=r.default,n.default=e},{"../core/main":283}],301:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e};r.default.prototype.isKeyPressed=!1,r.default.prototype.keyIsPressed=!1,r.default.prototype.key="",r.default.prototype.keyCode=0,r.default.prototype._onkeydown=function(e){var t;this._downKeys[e.which]||(this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",e.which),this._downKeys[e.which]=!0,this._setProperty("key",e.key||String.fromCharCode(e.which)||e.which),"function"!=typeof(t=this._isGlobal?window:this).keyPressed||e.charCode||!1===t.keyPressed(e)&&e.preventDefault())},r.default.prototype._onkeyup=function(e){this._downKeys[e.which]=!1,this._areDownKeys()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",e.key||String.fromCharCode(e.which)||e.which),this._setProperty("keyCode",e.which);var t=this._isGlobal?window:this;"function"==typeof t.keyReleased&&!1===t.keyReleased(e)&&e.preventDefault()},r.default.prototype._onkeypress=function(e){var t;e.which!==this._lastKeyCodeTyped&&(this._setProperty("_lastKeyCodeTyped",e.which),this._setProperty("key",e.key||String.fromCharCode(e.which)||e.which),"function"==typeof(t=this._isGlobal?window:this).keyTyped&&!1===t.keyTyped(e)&&e.preventDefault())},r.default.prototype._onblur=function(e){this._downKeys={}},r.default.prototype.keyIsDown=function(e){return r.default._validateParameters("keyIsDown",arguments),this._downKeys[e]||!1},r.default.prototype._areDownKeys=function(){for(var e in this._downKeys)if(this._downKeys.hasOwnProperty(e)&&!0===this._downKeys[e])return!0;return!1},e=r.default,n.default=e},{"../core/main":283}],302:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(o=e("../core/main"))&&o.__esModule?o:{default:o},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function s(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,s=function(){return e},e)}o.default.prototype.movedX=0,o.default.prototype.movedY=0,o.default.prototype._hasMouseInteracted=!1,o.default.prototype.mouseX=0,o.default.prototype.mouseY=0,o.default.prototype.pmouseX=0,o.default.prototype.pmouseY=0,o.default.prototype.winMouseX=0,o.default.prototype.winMouseY=0,o.default.prototype.pwinMouseX=0,o.default.prototype.pwinMouseY=0,o.default.prototype.mouseButton=0,o.default.prototype.mouseIsPressed=!1,o.default.prototype._updateNextMouseCoords=function(e){var t,n,r,i,o;null!==this._curElement&&(!e.touches||0<e.touches.length)&&(t=this._curElement.elt,n=this.width,r=this.height,(i=e)&&!i.clientX&&(i.touches?i=i.touches[0]:i.changedTouches&&(i=i.changedTouches[0])),o=t.getBoundingClientRect(),n=t.scrollWidth/n||1,t=t.scrollHeight/r||1,r={x:(i.clientX-o.left)/n,y:(i.clientY-o.top)/t,winX:i.clientX,winY:i.clientY,id:i.identifier},this._setProperty("movedX",e.movementX),this._setProperty("movedY",e.movementY),this._setProperty("mouseX",r.x),this._setProperty("mouseY",r.y),this._setProperty("winMouseX",r.winX),this._setProperty("winMouseY",r.winY)),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},o.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},o.default.prototype._setMouseButton=function(e){1===e.button?this._setProperty("mouseButton",a.CENTER):2===e.button?this._setProperty("mouseButton",a.RIGHT):this._setProperty("mouseButton",a.LEFT)},o.default.prototype._onmousemove=function(e){var t=this._isGlobal?window:this;this._updateNextMouseCoords(e),this.mouseIsPressed?"function"==typeof t.mouseDragged?!1===t.mouseDragged(e)&&e.preventDefault():"function"==typeof t.touchMoved&&!1===t.touchMoved(e)&&e.preventDefault():"function"==typeof t.mouseMoved&&!1===t.mouseMoved(e)&&e.preventDefault()},o.default.prototype._onmousedown=function(e){var t=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(e),this._updateNextMouseCoords(e),this.touchstart||("function"==typeof t.mousePressed?!1===t.mousePressed(e)&&e.preventDefault():"function"==typeof t.touchStarted&&!1===t.touchStarted(e)&&e.preventDefault(),this.touchstart=!1)},o.default.prototype._onmouseup=function(e){var t=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),this.touchend||("function"==typeof t.mouseReleased?!1===t.mouseReleased(e)&&e.preventDefault():"function"==typeof t.touchEnded&&!1===t.touchEnded(e)&&e.preventDefault(),this.touchend=!1)},o.default.prototype._ondragend=o.default.prototype._onmouseup,o.default.prototype._ondragover=o.default.prototype._onmousemove,o.default.prototype._onclick=function(e){var t=this._isGlobal?window:this;"function"==typeof t.mouseClicked&&!1===t.mouseClicked(e)&&e.preventDefault()},o.default.prototype._ondblclick=function(e){var t=this._isGlobal?window:this;"function"==typeof t.doubleClicked&&!1===t.doubleClicked(e)&&e.preventDefault()},o.default.prototype._mouseWheelDeltaY=0,o.default.prototype._pmouseWheelDeltaY=0,o.default.prototype._onwheel=function(e){var t=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",e.deltaY),"function"==typeof t.mouseWheel&&(e.delta=e.deltaY,!1===t.mouseWheel(e)&&e.preventDefault())},o.default.prototype.requestPointerLock=function(){var e=this._curElement.elt;return e.requestPointerLock=e.requestPointerLock||e.mozRequestPointerLock,e.requestPointerLock?(e.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},o.default.prototype.exitPointerLock=function(){document.exitPointerLock()},e=o.default,n.default=e},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],303:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,(e=(e=e("../core/main"))&&e.__esModule?e:{default:e}).default.prototype.touches=[],e.default.prototype._updateTouchCoords=function(e){if(null!==this._curElement){for(var t=[],n=0;n<e.touches.length;n++)t[n]=function(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=e.getBoundingClientRect();return t=e.scrollWidth/t||1,e=e.scrollHeight/n||1,{x:((n=r.touches[i]||r.changedTouches[i]).clientX-o.left)/t,y:(n.clientY-o.top)/e,winX:n.clientX,winY:n.clientY,id:n.identifier}}(this._curElement.elt,this.width,this.height,e,n);this._setProperty("touches",t)}},e.default.prototype._ontouchstart=function(e){var t=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(e),this._updateNextMouseCoords(e),this._updateMouseCoords(),"function"==typeof t.touchStarted&&(!1===t.touchStarted(e)&&e.preventDefault(),this.touchstart=!0)},e.default.prototype._ontouchmove=function(e){var t=this._isGlobal?window:this;this._updateTouchCoords(e),this._updateNextMouseCoords(e),"function"==typeof t.touchMoved?!1===t.touchMoved(e)&&e.preventDefault():"function"==typeof t.mouseDragged&&!1===t.mouseDragged(e)&&e.preventDefault()},e.default.prototype._ontouchend=function(e){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(e),this._updateNextMouseCoords(e);var t=this._isGlobal?window:this;"function"==typeof t.touchEnded&&(!1===t.touchEnded(e)&&e.preventDefault(),this.touchend=!0)},e=e.default,n.default=e},{"../core/main":283}],304:[function(e,t,n){"use strict";e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.int32-array"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.int32-array"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i,o,a,s={_toPixels:function(e){var t,n;return e instanceof ImageData?e.data:e.getContext("2d")?e.getContext("2d").getImageData(0,0,e.width,e.height).data:e.getContext("webgl")?(n=(t=e.getContext("webgl")).drawingBufferWidth*t.drawingBufferHeight*4,n=new Uint8Array(n),t.readPixels(0,0,e.width,e.height,t.RGBA,t.UNSIGNED_BYTE,n),n):void 0},_getARGB:function(e,t){return e[3+(t*=4)]<<24&4278190080|e[t]<<16&16711680|e[1+t]<<8&65280|255&e[2+t]},_setPixels:function(e,t){for(var n,r=0,i=e.length;r<i;r++)e[0+(n=4*r)]=(16711680&t[r])>>>16,e[1+n]=(65280&t[r])>>>8,e[2+n]=255&t[r],e[3+n]=(4278190080&t[r])>>>24},_toImageData:function(e){return e instanceof ImageData?e:e.getContext("2d").getImageData(0,0,e.width,e.height)},_createImageData:function(e,t){return s._tmpCanvas=document.createElement("canvas"),s._tmpCtx=s._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(e,t)},apply:function(e,t,n){var r=e.getContext("2d"),i=r.getImageData(0,0,e.width,e.height);(t=t(i,n))instanceof ImageData?r.putImageData(t,0,0,0,0,e.width,e.height):r.putImageData(i,0,0,0,0,e.width,e.height)},threshold:function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:.5,n=s._toPixels(e),r=Math.floor(255*t),i=0;i<n.length;i+=4){var o=r<=.2126*n[i]+.7152*n[i+1]+.0722*n[i+2]?255:0;n[i]=n[i+1]=n[i+2]=o}},gray:function(e){for(var t=s._toPixels(e),n=0;n<t.length;n+=4){var r=t[n],i=t[n+1],o=t[n+2];t[n]=t[n+1]=t[n+2]=.2126*r+.7152*i+.0722*o}},opaque:function(e){for(var t=s._toPixels(e),n=0;n<t.length;n+=4)t[n+3]=255;return t},invert:function(e){for(var t=s._toPixels(e),n=0;n<t.length;n+=4)t[n]=255-t[n],t[n+1]=255-t[n+1],t[n+2]=255-t[n+2]},posterize:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:4,n=s._toPixels(e);if(t<2||255<t)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var r=t-1,i=0;i<n.length;i+=4){var o=n[i],a=n[i+1],l=n[i+2];n[i]=255*(o*t>>8)/r,n[i+1]=255*(a*t>>8)/r,n[i+2]=255*(l*t>>8)/r}},dilate:function(e){for(var t,n,r,i,o,a,l,c,u,p=s._toPixels(e),d=0,h=p.length?p.length/4:0,m=new Int32Array(h);d<h;)for(n=(t=d)+e.width;d<n;)i=r=s._getARGB(p,d),(u=d-1)<t&&(u=d),n<=(c=d+1)&&(c=d),(o=d-e.width)<0&&(o=0),h<=(a=d+e.width)&&(a=d),o=s._getARGB(p,o),u=s._getARGB(p,u),a=s._getARGB(p,a),(i=77*(i>>16&255)+151*(i>>8&255)+28*(255&i))<(l=77*(u>>16&255)+151*(u>>8&255)+28*(255&u))&&(r=u,i=l),i<(l=77*((u=s._getARGB(p,c))>>16&255)+151*(u>>8&255)+28*(255&u))&&(r=u,i=l),i<(c=77*(o>>16&255)+151*(o>>8&255)+28*(255&o))&&(r=o,i=c),i<(u=77*(a>>16&255)+151*(a>>8&255)+28*(255&a))&&(r=a,i=u),m[d++]=r;s._setPixels(p,m)},erode:function(e){for(var t,n,r,i,o,a,l,c,u,p=s._toPixels(e),d=0,h=p.length?p.length/4:0,m=new Int32Array(h);d<h;)for(n=(t=d)+e.width;d<n;)i=r=s._getARGB(p,d),(u=d-1)<t&&(u=d),n<=(c=d+1)&&(c=d),(o=d-e.width)<0&&(o=0),h<=(a=d+e.width)&&(a=d),o=s._getARGB(p,o),u=s._getARGB(p,u),a=s._getARGB(p,a),(l=77*(u>>16&255)+151*(u>>8&255)+28*(255&u))<(i=77*(i>>16&255)+151*(i>>8&255)+28*(255&i))&&(r=u,i=l),(l=77*((u=s._getARGB(p,c))>>16&255)+151*(u>>8&255)+28*(255&u))<i&&(r=u,i=l),(c=77*(o>>16&255)+151*(o>>8&255)+28*(255&o))<i&&(r=o,i=c),(u=77*(a>>16&255)+151*(a>>8&255)+28*(255&a))<i&&(r=a,i=u),m[d++]=r;s._setPixels(p,m)},blur:function(e,t){for(var n,l,c,u,p,d,h,m,f,g,y=s._toPixels(e),_=e.width,v=e.height,b=_*v,w=new Int32Array(b),x=0;x<b;x++)w[x]=s._getARGB(y,x);var S,T,E,I,k,j,A,C,O=new Int32Array(b),M=new Int32Array(b),N=new Int32Array(b),R=new Int32Array(b),P=0,D=3.5*t|0;if(r!==(D=D<1?1:D<248?D:248)){i=1+(r=D)<<1,o=new Int32Array(i),a=new Array(i);for(var L=0;L<i;L++)a[L]=new Int32Array(256);for(var F=1,B=D-1;F<D;F++){o[D+F]=o[B]=j=B*B,A=a[D+F],C=a[B--];for(var U=0;U<256;U++)A[U]=C[U]=j*U}k=o[D]=D*D,A=a[D];for(var V=0;V<256;V++)A[V]=k*V}for(T=0;T<v;T++){for(S=0;S<_;S++){if(u=c=l=p=n=0,(d=S-r)<0)g=-d,d=0;else{if(_<=d)break;g=0}for(E=g;E<i&&!(_<=d);E++){var G=w[d+P];p+=(I=a[E])[(-16777216&G)>>>24],l+=I[(16711680&G)>>16],c+=I[(65280&G)>>8],u+=I[255&G],n+=o[E],d++}O[h=P+S]=p/n,M[h]=l/n,N[h]=c/n,R[h]=u/n}P+=_}for(f=(m=-r)*_,T=P=0;T<v;T++){for(S=0;S<_;S++){if(u=c=l=p=n=0,m<0)g=h=-m,d=S;else{if(v<=m)break;g=0,h=m,d=S+f}for(E=g;E<i&&!(v<=h);E++)p+=(I=a[E])[O[d]],l+=I[M[d]],c+=I[N[d]],u+=I[R[d]],n+=o[E],h++,d+=_;w[S+P]=p/n<<24|l/n<<16|c/n<<8|u/n}P+=_,f+=_,m++}s._setPixels(y,w)}};n.default=s},{"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.int32-array":225,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242}],305:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e("../core/main")),i=o(e("omggif"));function o(e){return e&&e.__esModule?e:{default:e}}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r.default.prototype.createImage=function(e,t){return r.default._validateParameters("createImage",arguments),new r.default.Image(e,t)},r.default.prototype.saveCanvas=function(){for(var e,t,n,i,o,a,s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];switch(r.default._validateParameters("saveCanvas",l),l[0]instanceof HTMLCanvasElement?(e=l[0],l.shift()):l[0]instanceof r.default.Element?(e=l[0].elt,l.shift()):l[0]instanceof r.default.Framebuffer?(i=l[0],(o=this.createGraphics(i.width,i.height)).pixelDensity(pixelDensity()),i.loadPixels(),o.loadPixels(),o.pixels.set(i.pixels),o.updatePixels(),e=o.elt,l.shift()):e=this._curElement&&this._curElement.elt,1<=l.length&&(t=l[0]),n=(n=2<=l.length?l[1]:n)||r.default.prototype._checkFileExtension(t,n)[1]||"png"){default:a="image/png";break;case"webp":a="image/webp";break;case"jpeg":case"jpg":a="image/jpeg"}e.toBlob((function(e){r.default.prototype.downloadFile(e,t,n),o&&o.remove()}),a)},r.default.prototype.encodeAndDownloadGif=function(e,t){for(var n=e.gifProperties,o=(1===(j=n.loopLimit)?j=null:null===j&&(j=0),new Uint8Array(e.width*e.height*n.numFrames)),s=[],l={},c=0;c<n.numFrames;c++){for(var u=new Set,p=n.frames[c].image.data,d=p.length,h=new Uint32Array(e.width*e.height),m=0,f=0;m<d;m+=4,f++){var g=p[m+0]<<16|p[m+1]<<8|p[m+2];u.add(g),h[f]=g}var y=a(u).sort().toString();void 0===l[y]?l[y]={freq:1,frames:[c]}:(l[y].freq+=1,l[y].frames.push(c)),s.push(h)}for(var _=[],v=Object.keys(l).sort((function(e,t){return l[t].freq-l[e].freq})),b=v[0].split(",").map((function(e){return parseInt(e)})),w=(_=_.concat(l[b].frames),new Set(b)),x=1;x<v.length;x++){var S=v[x].split(",").map((function(e){return parseInt(e)})).filter((function(e){return!w.has(e)}));if(b.length+S.length<=256){for(var T=0;T<S.length;T++)b.push(S[T]),w.add(S[T]);_=_.concat(l[v[x]].frames)}}_=new Set(_);for(var E={},I=0;I<b.length;I++)E[b[I]]||(E[b[I]]=I);for(var k=1;k<b.length;)k<<=1;b.length=k;for(var j={loop:j,palette:new Uint32Array(b)},A=new i.default.GifWriter(o,e.width,e.height,j),C={},O=0;O<n.numFrames;O++)!function(t){var r=!_.has(t),i=r?[]:b,o=new Uint8Array(e.width*e.height),a={},l=new Set,c=(s[t].forEach((function(e,n){r?(void 0===a[e]&&(a[e]=i.length,i.push(e)),o[n]=a[e]):o[n]=E[e],0<t&&s[t-1][n]!==e&&l.add(e)})),{}),u=i.filter((function(e){return!l.has(e)}));if(0<u.length){u=u[0];var p=(r?a:E)[u];if(0<t){for(var d=0;d<s[t].length;d++)s[t-1][d]===s[t][d]&&(o[d]=p);c.transparent=p,C.frameOpts.disposal=1}}if(c.delay=n.frames[t].delay/10,r){for(var h=1;h<i.length;)h<<=1;i.length=h,c.palette=new Uint32Array(i)}0<t&&A.addFrame(0,0,e.width,e.height,C.pixelPaletteIndex,C.frameOpts),C={pixelPaletteIndex:o,frameOpts:c}}(O);C.frameOpts.disposal=1,A.addFrame(0,0,e.width,e.height,C.pixelPaletteIndex,C.frameOpts),j=new Blob([o.slice(0,A.end())],{type:"image/gif"}),r.default.prototype.downloadFile(j,t,"gif")},r.default.prototype.saveFrames=function(e,t,n,i,o){r.default._validateParameters("saveFrames",arguments),n=r.default.prototype.constrain(n=n||3,0,15),n*=1e3,i=r.default.prototype.constrain(i||15,0,22);var a=0,s=r.default.prototype._makeFrame,l=this._curElement.elt,c=[],u=setInterval((function(){c.push(s(e+a,t,l)),a++}),1e3/i);setTimeout((function(){if(clearInterval(u),o)o(c);else for(var e=0,t=c;e<t.length;e++){var n=t[e];r.default.prototype.downloadFile(n.imageData,n.filename,n.ext)}c=[]}),.01+n)},r.default.prototype._makeFrame=function(e,t,n){var r;if(n=this?this._curElement.elt:n,t)switch(t.toLowerCase()){case"png":default:r="image/png";break;case"jpeg":case"jpg":r="image/jpeg"}else t="png",r="image/png";n=(n=n.toDataURL(r)).replace(r,"image/octet-stream");var i={};return i.imageData=n,i.filename=e,i.ext=t,i},e=r.default,n.default=e},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246,omggif:256}],306:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.copy-within"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.copy-within"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("regenerator-runtime/runtime");var o=p(e("../core/main")),a=p(e("../core/helpers")),s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants")),l=p(e("omggif")),c=e("gifenc");function u(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,u=function(){return e},e)}function p(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function h(e,t){return 0<e&&e<t?e:t}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),o.default.prototype.loadImage=function(e,t,n){o.default._validateParameters("loadImage",arguments);var r=new o.default.Image(1,1,this),i=this,a=new Request(e,{method:"GET",mode:"cors"});return fetch(e,a).then((function(a){var s,c=a.headers.get("content-type");null===c&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),c&&c.includes("image/gif")?a.arrayBuffer().then((function(e){if(e){e=new Uint8Array(e);for(var a=r,s=t,c=n,u=function(e){i._decrementPreload()}.bind(i),p=new l.default.GifReader(e),d=(a.width=a.canvas.width=p.width,a.height=a.canvas.height=p.height,[]),h=p.numFrames(),m=new Uint8ClampedArray(a.width*a.height*4),f=0;f<h;f++){var g=p.frameInfo(f),y=a.drawingContext.getImageData(0,0,a.width,a.height),_=(m=y.data.slice(),function(e,t){try{t.decodeAndBlitFrameRGBA(e,m)}catch(e){o.default._friendlyFileLoadError(8,a.src),"function"==typeof c?c(e):console.error(e)}}(f,p),new ImageData(m,a.width,a.height));0===(a.drawingContext.putImageData(_,0,0),_=g.delay)&&(_=10),d.push({image:a.drawingContext.getImageData(0,0,a.width,a.height),delay:10*_}),2===g.disposal?a.drawingContext.clearRect(g.x,g.y,g.width,g.height):3===g.disposal&&a.drawingContext.putImageData(y,0,0,g.x,g.y,g.width,g.height)}null===(e=p.loopCount())?e=1:0===e&&(e=null),a.drawingContext.putImageData(d[0].image,0,0),1<d.length&&(a.gifProperties={displayIndex:0,loopLimit:e,loopCount:0,frames:d,numFrames:h,playing:!0,timeDisplayed:0,lastChangeTime:0}),"function"==typeof s&&s(a),u()}}),(function(e){"function"==typeof n?(n(e),i._decrementPreload()):console.error(e)})):((s=new Image).onload=function(){r.width=r.canvas.width=s.width,r.height=r.canvas.height=s.height,r.drawingContext.drawImage(s,0,0),r.modified=!0,"function"==typeof t&&t(r),i._decrementPreload()},s.onerror=function(e){o.default._friendlyFileLoadError(0,s.src),"function"==typeof n?(n(e),i._decrementPreload()):console.error(e)},0!==e.indexOf("data:image/")&&(s.crossOrigin="Anonymous"),s.src=e),r.modified=!0})).catch((function(t){o.default._friendlyFileLoadError(0,e),"function"==typeof n?(n(t),i._decrementPreload()):console.error(t)})),r},o.default.prototype.saveGif=function(){e=regeneratorRuntime.mark((function e(t,n){var r,i,a,s,l,u,p,d,h,m,f,g,y,_,v,b,w,x,S,T,E,I,k,j,A,C,O=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=2<O.length&&void 0!==O[2]?O[2]:{delay:0,units:"seconds",silent:!1,notificationDuration:0,notificationID:"progressBar"},"string"!=typeof t)throw TypeError("fileName parameter must be a string");e.next=3;break;case 3:if("number"!=typeof n)throw TypeError("Duration parameter must be a number");e.next=5;break;case 5:if(i=r&&r.delay||0,a=r&&r.units||"seconds",s=r&&r.silent||!1,l=r&&r.notificationDuration||0,u=r&&r.notificationID||"progressBar","number"!=typeof i)throw TypeError("Delay parameter must be a number");e.next=12;break;case 12:if("seconds"!==a&&"frames"!==a)throw TypeError('Units parameter must be either "frames" or "seconds"');e.next=14;break;case 14:if("boolean"!=typeof s)throw TypeError("Silent parameter must be a boolean");e.next=16;break;case 16:if("number"!=typeof l)throw TypeError("Notification duration parameter must be a number");e.next=18;break;case 18:if("string"!=typeof u)throw TypeError("Notification ID parameter must be a string");e.next=20;break;case 20:return this._recording=!0,m=this._targetFrameRate,p=(p=1/(m=m!==1/0&&void 0!==m&&0!==m?m:60)*1e3)<20?20:p,h=(d="seconds"===a?n*m:n)+(m="seconds"===a?i*m:i),this.frameCount=m,f=this._pixelDensity,this.pixelDensity(1),g=[],null!==document.getElementById(u)&&document.getElementById(u).remove(),s||((y=this.createP("")).id(u),y.style("font-size","16px"),y.style("font-family","Montserrat"),y.style("background-color","#ffffffa0"),y.style("padding","8px"),y.style("border-radius","10px"),y.position(0,0)),this._renderer instanceof o.default.RendererGL&&(v=this.drawingContext,_=new Uint8Array(v.drawingBufferWidth*v.drawingBufferHeight*4)),this.noLoop(),e.next=39,Promise.resolve();case 39:if(m<h)return this.redraw(),j=void 0,j=this._renderer instanceof o.default.RendererGL?(_=new Uint8Array(v.drawingBufferWidth*v.drawingBufferHeight*4),v.readPixels(0,0,v.drawingBufferWidth,v.drawingBufferHeight,v.RGBA,v.UNSIGNED_BYTE,_),function(e,t,n){for(var r=parseInt(n/2),i=4*t,o=new Uint8Array(4*t),a=0;a<r;++a){var s=a*i,l=(n-a-1)*i;o.set(e.subarray(s,s+i)),e.copyWithin(s,l,l+i),e.set(o,l)}return e}(_,this.width,this.height)):this.drawingContext.getImageData(0,0,this.width,this.height).data,g.push(j),m++,s||y.html("Saved frame <b>"+g.length.toString()+"</b> out of "+d.toString()),e.next=48,new Promise((function(e){return setTimeout(e,0)}));e.next=50;break;case 48:e.next=39;break;case 50:s||y.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(f),b=(0,c.GIFEncoder)(),w=function(e){for(var t=new Uint8Array(e.length*e[0].length),n=0;n<e.length;n++)t.set(e[n],n*e[0].length);var r=(0,c.quantize)(t,256,{format:"rgba4444",oneBitAlpha:!0});return 256===r.length?r[r.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:r.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),r}(g),x={},S=function(e){for(var t=e.length/4,n=new Uint8Array(t),r=0;r<t;r++){var i=e[4*r]<<24|e[4*r+1]<<16|e[4*r+2]<<8|e[4*r+3];void 0===x[i]&&(x[i]=(0,c.nearestColorIndex)(w,e.slice(4*r,4*(r+1)))),n[r]=x[i]}return n},T=w.length-1,E=[],I=0;case 60:if(!(I<g.length)){e.next=71;break}if(k=S(g[I]),j=k.slice(),0===I)b.writeFrame(k,this.width,this.height,{palette:w,delay:p,dispose:1});else{for(A=0;A<k.length;A++)k[A]===E[A]&&(k[A]=T);b.writeFrame(k,this.width,this.height,{delay:p,transparent:!0,transparentIndex:T,dispose:1})}return E=j,s||y.html("Rendered frame <b>"+I.toString()+"</b> out of "+d.toString()),e.next=68,new Promise((function(e){return setTimeout(e,0)}));case 68:I++,e.next=60;break;case 71:b.finish(),C=b.bytesView(),C=new Blob([C],{type:"image/gif"}),g=[],this._recording=!1,this.loop(),s||(y.html("Done. Downloading your gif!🌸"),0<l&&setTimeout((function(){return y.remove()}),1e3*l)),o.default.prototype.downloadFile(C,t,"gif");case 80:case"end":return e.stop()}}),e,this)}));var e,t=function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){d(o,r,i,a,s,"next",e)}function s(e){d(o,r,i,a,s,"throw",e)}a(void 0)}))};return function(e,n){return t.apply(this,arguments)}}(),o.default.prototype.image=function(e,t,n,r,i,l,c,u,p,d,m,f){o.default._validateParameters("image",arguments);var g=e.width,y=e.height,_=(f=f||s.CENTER,m=m||s.CENTER,e.elt&&(g=void 0!==g?g:e.elt.width,y=void 0!==y?y:e.elt.height),e.elt&&e.elt.videoWidth&&!e.canvas&&(g=void 0!==g?g:e.elt.videoWidth,y=void 0!==y?y:e.elt.videoHeight),r||g);i=i||y,l=l||0,c=c||0,u=h(void 0!==u?u:g,g),g=h(void 0!==p?p:y,y),p=1,e.elt&&!e.canvas&&e.elt.style.width&&(p=e.elt.videoWidth&&!r?e.elt.videoWidth:e.elt.width,p/=parseInt(e.elt.style.width,10)),l*=p,c*=p,g*=p,u*=p,y=function(e,t,n,r,i,o,a,l,c,u,p){var d,h,m,f,g,y,_,v,b;return e===s.COVER&&(d=t,m=n,_=o,v=a,y=l,b=c,h=u,f=p,_/=g=Math.max(_/h,v/f),v/=g,g=y,y=b,d===s.CENTER?g+=(h-_)/2:d===s.RIGHT&&(g+=h-_),m===s.CENTER?y+=(f-v)/2:m===s.BOTTOM&&(y+=f-v),l=(b={x:g,y,w:_,h:v}).x,c=b.y,u=b.w,p=b.h),e===s.CONTAIN&&(d=t,h=n,m=r,f=i,g=o,y=a,_=u,v=p,_/=b=Math.max(_/g,v/y),v/=b,b=m,m=f,d===s.CENTER?b+=(g-_)/2:d===s.RIGHT&&(b+=g-_),h===s.CENTER?m+=(y-v)/2:h===s.BOTTOM&&(m+=y-v),r=(e={x:b,y:m,w:_,h:v}).x,i=e.y,o=e.w,a=e.h),{sx:l,sy:c,sw:u,sh:p,dx:r,dy:i,dw:o,dh:a}}(d,m,f,(y=a.default.modeAdjust(t,n,_,i,this._renderer._imageMode)).x,y.y,y.w,y.h,l,c,u,g),this._renderer.image(e,y.sx,y.sy,y.sw,y.sh,y.dx,y.dy,y.dw,y.dh)},o.default.prototype.tint=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o.default._validateParameters("tint",t);var r=this.color.apply(this,t);this._renderer._tint=r.levels},o.default.prototype.noTint=function(){this._renderer._tint=null},o.default.prototype._getTintedImageCanvas=o.default.Renderer2D.prototype._getTintedImageCanvas,o.default.prototype.imageMode=function(e){o.default._validateParameters("imageMode",arguments),e!==s.CORNER&&e!==s.CORNERS&&e!==s.CENTER||(this._renderer._imageMode=e)},e=o.default,n.default=e},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/helpers":279,"../core/main":283,"core-js/modules/es.array.copy-within":154,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.typed-array.uint8-clamped-array":243,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,gifenc:253,omggif:256,"regenerator-runtime/runtime":260}],307:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e("../core/main")),i=o(e("./filters"));function o(e){return e&&e.__esModule?e:{default:e}}r.default.Image=function(){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.width=t,this.height=n,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]}var t;return(t=[{key:"pixelDensity",value:function(e){return void 0!==e?(e<=0&&(r.default._friendlyParamError({type:"INVALID_VALUE",format:{types:["Number"]},position:1},"pixelDensity"),e=1),this._pixelDensity=e,this.width/=e,this.height/=e,this):this._pixelDensity}},{key:"_animateGif",value:function(e){var t,n=this.gifProperties;e=e._lastRealFrameTime||window.performance.now(),0===n.lastChangeTime&&(n.lastChangeTime=e),n.playing&&(n.timeDisplayed=e-n.lastChangeTime,t=n.frames[n.displayIndex].delay,n.timeDisplayed>=t&&(t=Math.floor(n.timeDisplayed/t),n.timeDisplayed=0,n.lastChangeTime=e,n.displayIndex+=t,n.loopCount=Math.floor(n.displayIndex/n.numFrames),null!==n.loopLimit&&n.loopCount>=n.loopLimit?n.playing=!1:(e=n.displayIndex%n.numFrames,this.drawingContext.putImageData(n.frames[e].image,0,0),n.displayIndex=e,this.setModified(!0))))}},{key:"_setProperty",value:function(e,t){this[e]=t,this.setModified(!0)}},{key:"loadPixels",value:function(){r.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)}},{key:"updatePixels",value:function(e,t,n,i){r.default.Renderer2D.prototype.updatePixels.call(this,e,t,n,i),this.setModified(!0)}},{key:"get",value:function(e,t,n,i){return r.default._validateParameters("p5.Image.get",arguments),r.default.Renderer2D.prototype.get.apply(this,arguments)}},{key:"_getPixel",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.default.Renderer2D.prototype._getPixel.apply(this,t)}},{key:"set",value:function(e,t,n){r.default.Renderer2D.prototype.set.call(this,e,t,n),this.setModified(!0)}},{key:"resize",value:function(e,t){0===e&&0===t?(e=this.canvas.width,t=this.canvas.height):0===e?e=this.canvas.width*t/this.canvas.height:0===t&&(t=this.canvas.height*e/this.canvas.width),e=Math.floor(e),t=Math.floor(t);var n=document.createElement("canvas");if(n.width=e,n.height=t,this.gifProperties)for(var r=this.gifProperties,i=0;i<r.numFrames;i++){for(var o=this.drawingContext.createImageData(e,t),a=(p=p=u=c=l=void 0,r.frames[i].image),s=o,l=0,c=0;c<s.height;c++)for(var u=0;u<s.width;u++){var p=Math.floor(u*a.width/s.width);p=4*(Math.floor(c*a.height/s.height)*a.width+p),s.data[l++]=a.data[p++],s.data[l++]=a.data[p++],s.data[l++]=a.data[p++],s.data[l++]=a.data[+p]}r.frames[i].image=o}n.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,n.width,n.height),this.canvas.width=this.width=e,this.canvas.height=this.height=t,this.drawingContext.drawImage(n,0,0,e,t,0,0,e,t),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)}},{key:"copy",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.default.prototype.copy.apply(this,t)}},{key:"mask",value:function(e){var t=this.drawingContext.globalCompositeOperation,n=this._pixelDensity,i=1,o=[e=void 0===e?this:e,0,0,(i=e instanceof r.default.Renderer?e._pInst._pixelDensity:i)*e.width,i*e.height,0,0,n*this.width,n*this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var a=0;a<this.gifProperties.frames.length;a++)this.drawingContext.putImageData(this.gifProperties.frames[a].image,0,0),this.copy.apply(this,o),this.gifProperties.frames[a].image=this.drawingContext.getImageData(0,0,n*this.width,n*this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else this.copy.apply(this,o);this.drawingContext.globalCompositeOperation=t,this.setModified(!0)}},{key:"filter",value:function(e,t){i.default.apply(this.canvas,i.default[e],t),this.setModified(!0)}},{key:"blend",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.default._validateParameters("p5.Image.blend",arguments),r.default.prototype.blend.apply(this,t),this.setModified(!0)}},{key:"setModified",value:function(e){this._modified=e}},{key:"isModified",value:function(){return this._modified}},{key:"save",value:function(e,t){this.gifProperties?r.default.prototype.encodeAndDownloadGif(this,e):r.default.prototype.saveCanvas(this.canvas,e,t)}},{key:"reset",value:function(){var e;this.gifProperties&&((e=this.gifProperties).playing=!0,e.timeSinceStart=0,e.timeDisplayed=0,e.lastChangeTime=0,e.loopCount=0,e.displayIndex=0,this.drawingContext.putImageData(e.frames[0].image,0,0))}},{key:"getCurrentFrame",value:function(){var e;if(this.gifProperties)return(e=this.gifProperties).displayIndex%e.numFrames}},{key:"setFrame",value:function(e){var t;this.gifProperties&&(e<(t=this.gifProperties).numFrames&&0<=e?(t.timeDisplayed=0,t.lastChangeTime=0,t.displayIndex=e,this.drawingContext.putImageData(t.frames[e].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."))}},{key:"numFrames",value:function(){if(this.gifProperties)return this.gifProperties.numFrames}},{key:"play",value:function(){this.gifProperties&&(this.gifProperties.playing=!0)}},{key:"pause",value:function(){this.gifProperties&&(this.gifProperties.playing=!1)}},{key:"delay",value:function(e,t){if(this.gifProperties){var n=this.gifProperties;if(t<n.numFrames&&0<=t)n.frames[t].delay=e;else{var r=!0,i=void(t=!1);try{for(var o,a=n.frames[Symbol.iterator]();!(r=(o=a.next()).done);r=!0)o.value.delay=e}catch(e){t=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(t)throw i}}}}}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}(),e=r.default.Image,n.default=e},{"../core/main":283,"./filters":304,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],308:[function(e,t,n){"use strict";e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.filter"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e("../core/main")),i=o(e("./filters"));function o(e){return e&&e.__esModule?e:{default:e}}e("../color/p5.Color"),r.default.prototype.pixels=[],r.default.prototype.blend=function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];r.default._validateParameters("blend",n),this._renderer?(e=this._renderer).blend.apply(e,n):r.default.Renderer2D.prototype.blend.apply(this,n)},r.default.prototype.copy=function(){for(var e,t,n,i,o,a,s,l,c,u=arguments.length,p=new Array(u),d=0;d<u;d++)p[d]=arguments[d];if(r.default._validateParameters("copy",p),9===p.length)e=p[0],t=p[1],n=p[2],i=p[3],o=p[4],a=p[5],s=p[6],l=p[7],c=p[8];else{if(8!==p.length)throw new Error("Signature not supported");e=this,t=p[0],n=p[1],i=p[2],o=p[3],a=p[4],s=p[5],l=p[6],c=p[7]}r.default.prototype._copyHelper(this,e,t,n,i,o,a,s,l,c)},r.default.prototype._copyHelper=function(e,t,n,i,o,a,s,l,c,u){var p=t.canvas.width/t.width,d=0,h=0;t._renderer&&t._renderer.isP3D&&(d=t.width/2,h=t.height/2),e._renderer&&e._renderer.isP3D?(e.push(),e.resetMatrix(),e.noLights(),e.blendMode(e.BLEND),e.imageMode(e.CORNER),r.default.RendererGL.prototype.image.call(e._renderer,t,n+d,i+h,o,a,s,l,c,u),e.pop()):e.drawingContext.drawImage(t.canvas,p*(n+d),p*(i+h),p*o,p*a,s,l,c,u)},r.default.prototype.getFilterGraphicsLayer=function(){return this._renderer.getFilterGraphicsLayer()},r.default.prototype.filter=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.default._validateParameters("filter",t);var o=function(){var e,t={shader:void 0,operation:void 0,value:void 0,useWebGL:!0};return(arguments.length<=0?void 0:arguments[0])instanceof r.default.Shader?t.shader=arguments.length<=0?void 0:arguments[0]:(t.operation=arguments.length<=0?void 0:arguments[0],1<arguments.length&&"number"==typeof(arguments.length<=1?void 0:arguments[1])&&(t.value=arguments.length<=1?void 0:arguments[1]),!1===((e=arguments.length-1)<0||arguments.length<=e?void 0:arguments[e])&&(t.useWebGL=!1)),t}.apply(void 0,t),a=o.shader,s=o.operation,l=o.value;o=o.useWebGL,this._renderer.isP3D&&a?r.default.RendererGL.prototype.filter.call(this._renderer,a):o||this._renderer.isP3D?(!o&&this._renderer.isP3D&&console.warn("filter() with useWebGL=false is not supported in WEBGL"),this._renderer.isP3D?r.default.RendererGL.prototype.filter.call(this._renderer,s,l):((a=this.getFilterGraphicsLayer()).copy(this._renderer,0,0,this.width,this.height,-this.width/2,-this.height/2,this.width,this.height),this._renderer.clear(),this._renderer.resetMatrix(),a.filter.apply(a,t),this.copy(a._renderer,0,0,this.width,this.height,0,0,this.width,this.height),a.clear())):void 0!==this.canvas?i.default.apply(this.canvas,i.default[s],l):i.default.apply(this.elt,i.default[s],l)},r.default.prototype.get=function(e,t,n,i){var o;return r.default._validateParameters("get",arguments),(o=this._renderer).get.apply(o,arguments)},r.default.prototype.loadPixels=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.default._validateParameters("loadPixels",t),this._renderer.loadPixels()},r.default.prototype.set=function(e,t,n){this._renderer.set(e,t,n)},r.default.prototype.updatePixels=function(e,t,n,i){r.default._validateParameters("updatePixels",arguments),0!==this.pixels.length&&this._renderer.updatePixels(e,t,n,i)},e=r.default,n.default=e},{"../color/p5.Color":270,"../core/main":283,"./filters":304,"core-js/modules/es.array.filter":157}],309:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.from-entries"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/web.url"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.from-entries"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/web.url"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=s(e("../core/main")),o=(e("whatwg-fetch"),e("es6-promise/auto"),s(e("fetch-jsonp"))),a=s(e("file-saver"));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}function c(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function u(e,t){t&&!0!==t&&"true"!==t||(t="");var n="";return(e=e||"untitled")&&e.includes(".")&&(n=e.split(".").pop()),t&&n!==t&&(n=t,e="".concat(e,".").concat(n)),[e,n]}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),i.default.prototype.loadJSON=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.default._validateParameters("loadJSON",t);for(var r,o,a,s=t[0],c={},u="json",p=1;p<t.length;p++){var d=t[p];"string"==typeof d?"jsonp"!==d&&"json"!==d||(u=d):"function"==typeof d?r?o=d:r=d:"object"===l(d)&&(d.hasOwnProperty("jsonpCallback")||d.hasOwnProperty("jsonpCallbackFunction"))&&(u="jsonp",a=d)}var h=this;return this.httpDo(s,"GET",a,u,(function(e){for(var t in e)c[t]=e[t];void 0!==r&&r(e),h._decrementPreload()}),(function(e){if(i.default._friendlyFileLoadError(5,s),!o)throw e;o(e)})),c},i.default.prototype.loadStrings=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.default._validateParameters("loadStrings",t);for(var r,o,a=[],s=1;s<t.length;s++){var l=t[s];"function"==typeof l&&(void 0===r?r=l:void 0===o&&(o=l))}var c=this;return i.default.prototype.httpDo.call(this,t[0],"GET","text",(function(e){for(var t=e.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),n=0,i=t.length;n<i;n+=32768)Array.prototype.push.apply(a,t.slice(n,Math.min(n+32768,i)));void 0!==r&&r(a),c._decrementPreload()}),(function(e){if(i.default._friendlyFileLoadError(3,e),!o)throw e;o(e)})),a},i.default.prototype.loadTable=function(e){var t,n,r,o=[],a=!1,s=e.substring(e.lastIndexOf(".")+1,e.length);"csv"===s?r=",":"ssv"===s?r=";":"tsv"===s&&(r="\t");for(var l=1;l<arguments.length;l++)"function"==typeof arguments[l]?void 0===t?t=arguments[l]:void 0===n&&(n=arguments[l]):"string"==typeof arguments[l]&&(o.push(arguments[l]),"header"===arguments[l]&&(a=!0),"csv"===arguments[l]?r=",":"ssv"===arguments[l]?r=";":"tsv"===arguments[l]&&(r="\t"));var c=new i.default.Table,u=this;return this.httpDo(e,"GET","table",(function(e){for(var n,o,s={},l=[],p=0,d=null,h=function(){s.currentState=0,s.token=""},m=function(){d.push(s.token),h()},f=function(){s.currentState=4,l.push(d),d=null};;){if(null==(n=e[p++])){if(s.escaped)throw new Error("Unclosed quote in file.");if(d){m(),f();break}}if(null===d&&(s.escaped=!1,d=[],h()),0===s.currentState){if('"'===n){s.escaped=!0,s.currentState=1;continue}s.currentState=1}if(1===s.currentState&&s.escaped)if('"'===n)'"'===e[p]?(s.token+='"',p++):(s.escaped=!1,s.currentState=2);else{if("\r"===n)continue;s.token+=n}else"\r"===n?("\n"===e[p]&&p++,m(),f()):"\n"===n?(m(),f()):n===r?m():1===s.currentState&&(s.token+=n)}if(a)c.columns=l.shift();else for(var g=0;g<l[0].length;g++)c.columns[g]="null";for(var y=0;y<l.length;y++)(1!==l[y].length||"undefined"!==l[y][0]&&""!==l[y][0])&&((o=new i.default.TableRow).arr=l[y],o.obj=function(e,t){if(void 0===(t=t||[]))for(var n=0;n<e.length;n++)t[n.toString()]=n;return Object.fromEntries(t.map((function(t,n){return[t,e[n]]})))}(l[y],c.columns),c.addRow(o));"function"==typeof t&&t(c),u._decrementPreload()}),(function(t){i.default._friendlyFileLoadError(2,e),n?n(t):console.error(t)})),c},i.default.prototype.loadXML=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r,o,a=new i.default.XML,s=1;s<t.length;s++){var l=t[s];"function"==typeof l&&(void 0===r?r=l:void 0===o&&(o=l))}var c=this;return this.httpDo(t[0],"GET","xml",(function(e){for(var t in e)a[t]=e[t];void 0!==r&&r(a),c._decrementPreload()}),(function(e){if(i.default._friendlyFileLoadError(1,e),!o)throw e;o(e)})),a},i.default.prototype.loadBytes=function(e,t,n){var r={},o=this;return this.httpDo(e,"GET","arrayBuffer",(function(e){r.bytes=new Uint8Array(e),"function"==typeof t&&t(r),o._decrementPreload()}),(function(t){if(i.default._friendlyFileLoadError(6,e),!n)throw t;n(t)})),r},i.default.prototype.httpGet=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.default._validateParameters("httpGet",t),t.splice(1,0,"GET"),i.default.prototype.httpDo.apply(this,t)},i.default.prototype.httpPost=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.default._validateParameters("httpPost",t),t.splice(1,0,"POST"),i.default.prototype.httpDo.apply(this,t)},i.default.prototype.httpDo=function(){for(var e,t,n,r={},a=0,s="text/plain",c=arguments.length-1;0<c&&"function"==typeof(c<0||arguments.length<=c?void 0:arguments[c]);c--)a++;var u=arguments.length<=0?void 0:arguments[0];if(2==(g=arguments.length-a)&&"string"==typeof u&&"object"===l(arguments.length<=1?void 0:arguments[1]))y=new Request(u,arguments.length<=1?void 0:arguments[1]),t=arguments.length<=2?void 0:arguments[2],n=arguments.length<=3?void 0:arguments[3];else{for(var p,d="GET",h=1;h<arguments.length;h++){var m=h<0||arguments.length<=h?void 0:arguments[h];if("string"==typeof m)"GET"===m||"POST"===m||"PUT"===m||"DELETE"===m?d=m:"json"===m||"jsonp"===m||"binary"===m||"arrayBuffer"===m||"xml"===m||"text"===m||"table"===m?e=m:p=m;else if("number"==typeof m)p=m.toString();else if("object"===l(m))if(m.hasOwnProperty("jsonpCallback")||m.hasOwnProperty("jsonpCallbackFunction"))for(var f in m)r[f]=m[f];else s=m instanceof i.default.XML?(p=m.serialize(),"application/xml"):(p=JSON.stringify(m),"application/json");else"function"==typeof m&&(t?n=m:t=m)}var g="GET"===d?new Headers:new Headers({"Content-Type":s}),y=new Request(u,{method:d,mode:"cors",body:p,headers:g})}return(g=(g="jsonp"===(e=e||(u.includes("json")?"json":u.includes("xml")?"xml":"text"))?(0,o.default)(u,r):fetch(y)).then((function(t){if(!t.ok)throw(n=new Error(t.body)).status=t.status,n.ok=!1,n;var n=0;switch((n="jsonp"!==e?t.headers.get("content-length"):n)&&64e6<n&&i.default._friendlyFileLoadError(7,u),e){case"json":case"jsonp":return t.json();case"binary":return t.blob();case"arrayBuffer":return t.arrayBuffer();case"xml":return t.text().then((function(e){return e=(new DOMParser).parseFromString(e,"text/xml"),new i.default.XML(e.documentElement)}));default:return t.text()}}))).then(t||function(){}),g.catch(n||console.error),g},window.URL=window.URL||window.webkitURL,i.default.prototype._pWriters=[],i.default.prototype.createWriter=function(e,t){var n,r;for(r in i.default.prototype._pWriters)if(i.default.prototype._pWriters[r].name===e)return n=new i.default.PrintWriter(e+this.millis(),t),i.default.prototype._pWriters.push(n),n;return n=new i.default.PrintWriter(e,t),i.default.prototype._pWriters.push(n),n},i.default.PrintWriter=function(e,t){var n=this;this.name=e,this.content="",this.write=function(e){this.content+=e},this.print=function(e){this.content+="".concat(e,"\n")},this.clear=function(){this.content=""},this.close=function(){var r,o=[];for(r in o.push(this.content),i.default.prototype.writeFile(o,e,t),i.default.prototype._pWriters)i.default.prototype._pWriters[r].name===this.name&&i.default.prototype._pWriters.splice(r,1);n.clear(),n={}}},i.default.prototype.save=function(e,t,n){var r=arguments,o=(this._curElement||this).elt;if(0===r.length)i.default.prototype.saveCanvas(o);else if(r[0]instanceof i.default.Renderer||r[0]instanceof i.default.Graphics)i.default.prototype.saveCanvas(r[0].elt,r[1],r[2]);else if(1===r.length&&"string"==typeof r[0])i.default.prototype.saveCanvas(o,r[0]);else switch(u(r[1],r[2])[1]){case"json":return void i.default.prototype.saveJSON(r[0],r[1],r[2]);case"txt":return void i.default.prototype.saveStrings(r[0],r[1],r[2]);default:r[0]instanceof Array?i.default.prototype.saveStrings(r[0],r[1],r[2]):r[0]instanceof i.default.Table?i.default.prototype.saveTable(r[0],r[1],r[2]):r[0]instanceof i.default.Image?i.default.prototype.saveCanvas(r[0].canvas,r[1]):r[0]instanceof i.default.SoundFile&&i.default.prototype.saveSound(r[0],r[1],r[2],r[3])}},i.default.prototype.saveJSON=function(e,t,n){i.default._validateParameters("saveJSON",arguments),n=n?JSON.stringify(e):JSON.stringify(e,void 0,2),this.saveStrings(n.split("\n"),t,"json")},i.default.prototype.saveJSONObject=i.default.prototype.saveJSON,i.default.prototype.saveJSONArray=i.default.prototype.saveJSON,i.default.prototype.saveStrings=function(e,t,n,r){i.default._validateParameters("saveStrings",arguments);for(var o=this.createWriter(t,n||"txt"),a=0;a<e.length;a++)r?o.write(e[a]+"\r\n"):o.write(e[a]+"\n");o.close(),o.clear()},i.default.prototype.saveTable=function(e,t,n){i.default._validateParameters("saveTable",arguments),r=void 0===n?t.substring(t.lastIndexOf(".")+1,t.length):n;var r,o=this.createWriter(t,r),a=e.columns,s="tsv"===r?"\t":",";if("html"!==r){if("0"!==a[0]){for(var l=0;l<a.length;l++)l<a.length-1?o.write(a[l]+s):o.write(a[l]);o.write("\n")}for(var u=0;u<e.rows.length;u++){var p=void 0;for(p=0;p<e.rows[u].arr.length;p++)p<e.rows[u].arr.length-1?"csv"===r&&String(e.rows[u].arr[p]).includes(",")?o.write('"'+e.rows[u].arr[p]+'"'+s):o.write(e.rows[u].arr[p]+s):"csv"===r&&String(e.rows[u].arr[p]).includes(",")?o.write('"'+e.rows[u].arr[p]+'"'):o.write(e.rows[u].arr[p]);o.write("\n")}}else{if(o.print("<html>"),o.print("<head>"),o.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),o.print("</head>"),o.print("<body>"),o.print("  <table>"),"0"!==a[0]){o.print("    <tr>");for(var d=0;d<a.length;d++){var h=c(a[d]);o.print("      <td>".concat(h)),o.print("      </td>")}o.print("    </tr>")}for(var m=0;m<e.rows.length;m++){o.print("    <tr>");for(var f=0;f<e.columns.length;f++){var g=c(e.rows[m].getString(f));o.print("      <td>".concat(g)),o.print("      </td>")}o.print("    </tr>")}o.print("  </table>"),o.print("</body>"),o.print("</html>")}o.close(),o.clear()},i.default.prototype.writeFile=function(e,t,n){var r="application/octet-stream";i.default.prototype._isSafari()&&(r="text/plain"),e=new Blob(e,{type:r}),i.default.prototype.downloadFile(e,t,n)},i.default.prototype.downloadFile=function(e,t,n){var r;n=(t=u(t,n))[0],e instanceof Blob?a.default.saveAs(e,n):((r=document.createElement("a")).href=e,r.download=n,r.onclick=function(e){document.body.removeChild(e.target),e.stopPropagation()},r.style.display="none",document.body.appendChild(r),i.default.prototype._isSafari()&&(e=(e='Hello, Safari user! To download this file...\n1. Go to File --\x3e Save As.\n2. Choose "Page Source" as the Format.\n')+'3. Name it with this extension: ."'.concat(t[1],'"'),alert(e)),r.click())},i.default.prototype._checkFileExtension=u,i.default.prototype._isSafari=function(){return window.HTMLElement.toString().includes("Constructor")},e=i.default,n.default=e},{"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.object.from-entries":185,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.iterator":246,"core-js/modules/web.url":248,"es6-promise/auto":249,"fetch-jsonp":251,"file-saver":252,"whatwg-fetch":261}],310:[function(e,t,n){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.replace"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e};r.default.Table=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.columns=[],this.rows=t}var t;return(t=[{key:"addRow",value:function(e){if(void 0===(e=e||new r.default.TableRow).arr||void 0===e.obj)throw new Error("invalid TableRow: ".concat(e));return(e.table=this).rows.push(e),e}},{key:"removeRow",value:function(e){this.rows[e].table=null,e=this.rows.splice(e+1,this.rows.length),this.rows.pop(),this.rows=this.rows.concat(e)}},{key:"getRow",value:function(e){return this.rows[e]}},{key:"getRows",value:function(){return this.rows}},{key:"findRow",value:function(e,t){if("string"==typeof t){for(var n=0;n<this.rows.length;n++)if(this.rows[n].obj[t]===e)return this.rows[n]}else for(var r=0;r<this.rows.length;r++)if(this.rows[r].arr[t]===e)return this.rows[r];return null}},{key:"findRows",value:function(e,t){var n=[];if("string"==typeof t)for(var r=0;r<this.rows.length;r++)this.rows[r].obj[t]===e&&n.push(this.rows[r]);else for(var i=0;i<this.rows.length;i++)this.rows[i].arr[t]===e&&n.push(this.rows[i]);return n}},{key:"matchRow",value:function(e,t){if("number"==typeof t){for(var n=0;n<this.rows.length;n++)if(this.rows[n].arr[t].match(e))return this.rows[n]}else for(var r=0;r<this.rows.length;r++)if(this.rows[r].obj[t].match(e))return this.rows[r];return null}},{key:"matchRows",value:function(e,t){var n=[];if("number"==typeof t)for(var r=0;r<this.rows.length;r++)this.rows[r].arr[t].match(e)&&n.push(this.rows[r]);else for(var i=0;i<this.rows.length;i++)this.rows[i].obj[t].match(e)&&n.push(this.rows[i]);return n}},{key:"getColumn",value:function(e){var t=[];if("string"==typeof e)for(var n=0;n<this.rows.length;n++)t.push(this.rows[n].obj[e]);else for(var r=0;r<this.rows.length;r++)t.push(this.rows[r].arr[e]);return t}},{key:"clearRows",value:function(){delete this.rows,this.rows=[]}},{key:"addColumn",value:function(e){this.columns.push(e||null)}},{key:"getColumnCount",value:function(){return this.columns.length}},{key:"getRowCount",value:function(){return this.rows.length}},{key:"removeTokens",value:function(e,t){for(var n=[],r=0;r<e.length;r++)n.push(e.charAt(r).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var i=new RegExp(n.join("|"),"g");if(void 0===t)for(var o=0;o<this.columns.length;o++)for(var a=0;a<this.rows.length;a++){var s=(s=this.rows[a].arr[o]).replace(i,"");this.rows[a].arr[o]=s,this.rows[a].obj[this.columns[o]]=s}else if("string"==typeof t)for(var l=0;l<this.rows.length;l++){var c=(c=this.rows[l].obj[t]).replace(i,""),u=(this.rows[l].obj[t]=c,this.columns.indexOf(t));this.rows[l].arr[u]=c}else for(var p=0;p<this.rows.length;p++){var d=(d=this.rows[p].arr[t]).replace(i,"");this.rows[p].arr[t]=d,this.rows[p].obj[this.columns[t]]=d}}},{key:"trim",value:function(e){var t=new RegExp(" ","g");if(void 0===e)for(var n=0;n<this.columns.length;n++)for(var r=0;r<this.rows.length;r++){var i=(i=this.rows[r].arr[n]).replace(t,"");this.rows[r].arr[n]=i,this.rows[r].obj[this.columns[n]]=i}else if("string"==typeof e)for(var o=0;o<this.rows.length;o++){var a=(a=this.rows[o].obj[e]).replace(t,""),s=(this.rows[o].obj[e]=a,this.columns.indexOf(e));this.rows[o].arr[s]=a}else for(var l=0;l<this.rows.length;l++){var c=(c=this.rows[l].arr[e]).replace(t,"");this.rows[l].arr[e]=c,this.rows[l].obj[this.columns[e]]=c}}},{key:"removeColumn",value:function(e){var t,n;"string"==typeof e?n=this.columns.indexOf(t=e):t=this.columns[n=e],e=this.columns.splice(n+1,this.columns.length),this.columns.pop(),this.columns=this.columns.concat(e);for(var r=0;r<this.rows.length;r++){var i=this.rows[r].arr,o=i.splice(n+1,i.length);i.pop(),this.rows[r].arr=i.concat(o),delete this.rows[r].obj[t]}}},{key:"set",value:function(e,t,n){this.rows[e].set(t,n)}},{key:"setNum",value:function(e,t,n){this.rows[e].setNum(t,n)}},{key:"setString",value:function(e,t,n){this.rows[e].setString(t,n)}},{key:"get",value:function(e,t){return this.rows[e].get(t)}},{key:"getNum",value:function(e,t){return this.rows[e].getNum(t)}},{key:"getString",value:function(e,t){return this.rows[e].getString(t)}},{key:"getObject",value:function(e){for(var t,n={},r=0;r<this.rows.length;r++)if(t=this.rows[r].obj,"string"==typeof e){if(!(0<=this.columns.indexOf(e)))throw new Error('This table has no column named "'.concat(e,'"'));n[t[e]]=t}else n[r]=this.rows[r].obj;return n}},{key:"getArray",value:function(){for(var e=[],t=0;t<this.rows.length;t++)e.push(this.rows[t].arr);return e}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}(),e=r.default,n.default=e},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.join":166,"core-js/modules/es.array.splice":171,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204}],311:[function(e,t,n){"use strict";e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.from-entries"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.from-entries"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,(e=(e=e("../core/main"))&&e.__esModule?e:{default:e}).default.TableRow=function(){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var r=[];t&&(r=t.split(n=n||",")),this.arr=r,this.obj=Object.fromEntries(r.entries()),this.table=null}var t;return(t=[{key:"set",value:function(e,t){if("string"==typeof e){var n=this.table.columns.indexOf(e);if(!(0<=n))throw new Error('This table has no column named "'.concat(e,'"'));this.obj[e]=t,this.arr[n]=t}else{if(!(e<this.table.columns.length))throw new Error("Column #".concat(e," is out of the range of this table"));this.arr[e]=t,n=this.table.columns[e],this.obj[n]=t}}},{key:"setNum",value:function(e,t){t=parseFloat(t),this.set(e,t)}},{key:"setString",value:function(e,t){t=t.toString(),this.set(e,t)}},{key:"get",value:function(e){return("string"==typeof e?this.obj:this.arr)[e]}},{key:"getNum",value:function(e){var t="string"==typeof e?parseFloat(this.obj[e]):parseFloat(this.arr[e]);if("NaN"===t.toString())throw"Error: ".concat(this.obj[e]," is NaN (Not a Number)");return t}},{key:"getString",value:function(e){return("string"==typeof e?this.obj:this.arr)[e].toString()}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}(),e=e.default,n.default=e},{"../core/main":283,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.from-entries":185,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.split":206,"core-js/modules/web.dom-collections.iterator":246}],312:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e};r.default.XML=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");t?this.DOM=t:(t=document.implementation.createDocument(null,"doc"),this.DOM=t.createElement("root"))}var t;return(t=[{key:"getParent",value:function(){return new r.default.XML(this.DOM.parentElement)}},{key:"getName",value:function(){return this.DOM.tagName}},{key:"setName",value:function(e){var t=this.DOM.innerHTML,n=this.DOM.attributes,r=document.implementation.createDocument(null,"default").createElement(e);r.innerHTML=t;for(var i=0;i<n.length;i++)r.setAttribute(n[i].nodeName,n[i].nodeValue);this.DOM=r}},{key:"hasChildren",value:function(){return 0<this.DOM.children.length}},{key:"listChildren",value:function(){for(var e=[],t=0;t<this.DOM.childNodes.length;t++)e.push(this.DOM.childNodes[t].nodeName);return e}},{key:"getChildren",value:function(e){return function(e){for(var t=[],n=0;n<e.length;n++)t.push(new r.default.XML(e[n]));return t}(e?this.DOM.getElementsByTagName(e):this.DOM.children)}},{key:"getChild",value:function(e){if("string"!=typeof e)return new r.default.XML(this.DOM.children[e]);var t=!0,n=!1,i=void 0;try{for(var o,a=this.DOM.children[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var s=o.value;if(s.tagName===e)return new r.default.XML(s)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}},{key:"addChild",value:function(e){e instanceof r.default.XML&&this.DOM.appendChild(e.DOM)}},{key:"removeChild",value:function(e){var t=-1;if("string"==typeof e){for(var n=0;n<this.DOM.children.length;n++)if(this.DOM.children[n].tagName===e){t=n;break}}else t=e;-1!==t&&this.DOM.removeChild(this.DOM.children[t])}},{key:"getAttributeCount",value:function(){return this.DOM.attributes.length}},{key:"listAttributes",value:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=this.DOM.attributes[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;e.push(a.nodeName)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return e}},{key:"hasAttribute",value:function(e){var t={},n=!0,r=!1,i=void 0;try{for(var o,a=this.DOM.attributes[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t[s.nodeName]=s.nodeValue}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return!!t[e]}},{key:"getNum",value:function(e,t){var n={},r=!0,i=!1,o=void 0;try{for(var a,s=this.DOM.attributes[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;n[l.nodeName]=l.nodeValue}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return Number(n[e])||t||0}},{key:"getString",value:function(e,t){var n={},r=!0,i=!1,o=void 0;try{for(var a,s=this.DOM.attributes[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;n[l.nodeName]=l.nodeValue}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n[e]?String(n[e]):t||null}},{key:"setAttribute",value:function(e,t){this.DOM.setAttribute(e,t)}},{key:"getContent",value:function(e){var t=this.DOM.textContent;return(t=t.replace(/\s\s+/g,","))||e||null}},{key:"setContent",value:function(e){this.DOM.children.length||(this.DOM.textContent=e)}},{key:"serialize",value:function(){return(new XMLSerializer).serializeToString(this.DOM)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}(),e=r.default,n.default=e},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],313:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.math.hypot"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.math.hypot"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.string.includes"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e};function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}r.default.prototype.abs=Math.abs,r.default.prototype.ceil=Math.ceil,r.default.prototype.constrain=function(e,t,n){return r.default._validateParameters("constrain",arguments),Math.max(Math.min(e,n),t)},r.default.prototype.dist=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.default._validateParameters("dist",t),4===t.length?Math.hypot(t[2]-t[0],t[3]-t[1]):6===t.length?Math.hypot(t[3]-t[0],t[4]-t[1],t[5]-t[2]):void 0},r.default.prototype.exp=Math.exp,r.default.prototype.floor=Math.floor,r.default.prototype.lerp=function(e,t,n){return r.default._validateParameters("lerp",arguments),n*(t-e)+e},r.default.prototype.log=Math.log,r.default.prototype.mag=function(e,t){return r.default._validateParameters("mag",arguments),Math.hypot(e,t)},r.default.prototype.map=function(e,t,n,i,o,a){return r.default._validateParameters("map",arguments),e=(e-t)/(n-t)*(o-i)+i,a?i<o?this.constrain(e,i,o):this.constrain(e,o,i):e},r.default.prototype.max=function(){for(var e=function(e){return Math.max.apply(Math,i(e))},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Array.isArray(n[0])?e(n[0]):e(n)},r.default.prototype.min=function(){for(var e=function(e){return Math.min.apply(Math,i(e))},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Array.isArray(n[0])?e(n[0]):e(n)},r.default.prototype.norm=function(e,t,n){return r.default._validateParameters("norm",arguments),this.map(e,t,n,0,1)},r.default.prototype.pow=Math.pow,r.default.prototype.round=function(e,t){return t?(t=Math.pow(10,t),Math.round(e*t)/t):Math.round(e)},r.default.prototype.sq=function(e){return e*e},r.default.prototype.sqrt=Math.sqrt,r.default.prototype.fract=function(e){r.default._validateParameters("fract",arguments);var t,n=0;return e=Number(e),isNaN(e)||Math.abs(e)===1/0?e:(e<0&&(e=-e,n=1),String(e).includes(".")&&!String(e).includes("e")?(t=String(e),t=Number("0"+t.slice(t.indexOf("."))),Math.abs(n-t)):e<1?Math.abs(n-e):0)},e=r.default,n.default=e},{"../core/main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],314:[function(e,t,n){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.slice"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e};function i(e,t,n){return(i=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),1}catch(e){}}}()?Reflect.construct:function(e,t,n){var r=[null];return r.push.apply(r,t),t=new(Function.bind.apply(e,r)),n&&o(t,n.prototype),t}).apply(null,arguments)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}r.default.prototype.createVector=function(e,t,n){return this instanceof r.default?i(r.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new r.default.Vector(e,t,n)},e=r.default,n.default=e},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196}],315:[function(e,t,n){"use strict";function r(e){return.5*(1-Math.cos(e*Math.PI))}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e=(e=e("../core/main"))&&e.__esModule?e:{default:e};var i,o=4095,a=4,s=.5;e.default.prototype.noise=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(null==i){i=new Array(4096);for(var l=0;l<4096;l++)i[l]=Math.random()}e<0&&(e=-e),t<0&&(t=-t),n<0&&(n=-n);for(var c,u,p=Math.floor(e),d=Math.floor(t),h=Math.floor(n),m=e-p,f=t-d,g=n-h,y=0,_=.5,v=0;v<a;v++){var b=p+(d<<4)+(h<<8),w=r(m),x=r(f),S=i[b&o];S+=w*(i[b+1&o]-S),c=i[b+16&o],S+=x*((c+=w*(i[b+16+1&o]-c))-S),c=i[(b+=256)&o],c+=w*(i[b+1&o]-c),u=i[b+16&o],c+=x*((u+=w*(i[b+16+1&o]-u))-c),y+=(S+=r(g)*(c-S))*_,_*=s,p<<=1,d<<=1,h<<=1,1<=(m*=2)&&(p++,m--),1<=(f*=2)&&(d++,f--),1<=(g*=2)&&(h++,g--)}return y},e.default.prototype.noiseDetail=function(e,t){0<e&&(a=e),0<t&&(s=t)},e.default.prototype.noiseSeed=function(e){n=4294967296;var t,n;(function(e){t=(null==e?Math.random()*n:e)>>>0})(e),i=new Array(4096);for(var r=0;r<4096;r++)i[r]=(t=(1664525*t+1013904223)%n)/n},e=e.default,n.default=e},{"../core/main":283}],316:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.some"),e("core-js/modules/es.math.sign"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.number.epsilon"),e("core-js/modules/es.number.is-finite"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.sub"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.some"),e("core-js/modules/es.math.sign"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.number.epsilon"),e("core-js/modules/es.number.is-finite"),e("core-js/modules/es.string.sub"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(c=e("../core/main"))&&c.__esModule?c:{default:c},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function s(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,s=function(){return e},e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}o.default.Vector=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var t,n,r="function"==typeof(arguments.length<=0?void 0:arguments[0])?(this.isPInst=!0,this._fromRadians=arguments.length<=0?void 0:arguments[0],this._toRadians=arguments.length<=1?void 0:arguments[1],t=(arguments.length<=2?void 0:arguments[2])||0,n=(arguments.length<=3?void 0:arguments[3])||0,(arguments.length<=4?void 0:arguments[4])||0):(t=(arguments.length<=0?void 0:arguments[0])||0,n=(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0);this.x=t,this.y=n,this.z=r}var t,n,r;return t=e,r=[{key:"fromAngle",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return new o.default.Vector(t*Math.cos(e),t*Math.sin(e),0)}},{key:"fromAngles",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,r=Math.cos(t),i=(t=Math.sin(t),Math.cos(e));return e=Math.sin(e),new o.default.Vector(n*e*t,-n*i,n*e*r)}},{key:"random2D",value:function(){return this.fromAngle(Math.random()*a.TWO_PI)}},{key:"random3D",value:function(){var e=Math.random()*a.TWO_PI,t=2*Math.random()-1,n=(r=Math.sqrt(1-t*t))*Math.cos(e),r=r*Math.sin(e);return new o.default.Vector(n,r,t)}},{key:"copy",value:function(e){return e.copy(e)}},{key:"add",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2];return a?a.set(r):(a=r.copy(),3===t.length&&o.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),a.add(i),a}},{key:"rem",value:function(e,t){if(e instanceof o.default.Vector&&t instanceof o.default.Vector)return(e=e.copy()).rem(t),e}},{key:"sub",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2];return a?a.set(r):(a=r.copy(),3===t.length&&o.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),a.sub(i),a}},{key:"mult",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2];return a?a.set(r):(a=r.copy(),3===t.length&&o.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),a.mult(i),a}},{key:"rotate",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2];return 2===t.length?a=r.copy():(a instanceof o.default.Vector||o.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),a.set(r)),a.rotate(i),a}},{key:"div",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2];return a?a.set(r):(a=r.copy(),3===t.length&&o.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),a.div(i),a}},{key:"dot",value:function(e,t){return e.dot(t)}},{key:"cross",value:function(e,t){return e.cross(t)}},{key:"dist",value:function(e,t){return e.dist(t)}},{key:"lerp",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2],s=t[3];return s?s.set(r):(s=r.copy(),4===t.length&&o.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),s.lerp(i,a),s}},{key:"slerp",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2],s=t[3];return s?s.set(r):(s=r.copy(),4===t.length&&o.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.slerp")),s.slerp(i,a),s}},{key:"mag",value:function(e){return e.mag()}},{key:"magSq",value:function(e){return e.magSq()}},{key:"normalize",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1];return t.length<2?i=r.copy():(i instanceof o.default.Vector||o.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),i.set(r)),i.normalize()}},{key:"limit",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2];return t.length<3?a=r.copy():(a instanceof o.default.Vector||o.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.limit"),a.set(r)),a.limit(i)}},{key:"setMag",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2];return t.length<3?a=r.copy():(a instanceof o.default.Vector||o.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.setMag"),a.set(r)),a.setMag(i)}},{key:"heading",value:function(e){return e.heading()}},{key:"angleBetween",value:function(e,t){return e.angleBetween(t)}},{key:"reflect",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2];return t.length<3?a=r.copy():(a instanceof o.default.Vector||o.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.reflect"),a.set(r)),a.reflect(i)}},{key:"array",value:function(e){return e.array()}},{key:"equals",value:function(e,t){var n;return e instanceof o.default.Vector?n=e:Array.isArray(e)?n=(new o.default.Vector).set(e):o.default._friendlyError("The v1 parameter should be of type Array or p5.Vector","p5.Vector.equals"),n.equals(t)}}],(n=[{key:"toString",value:function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")}},{key:"set",value:function(e,t,n){return e instanceof o.default.Vector?(this.x=e.x||0,this.y=e.y||0,this.z=e.z||0):Array.isArray(e)?(this.x=e[0]||0,this.y=e[1]||0,this.z=e[2]||0):(this.x=e||0,this.y=t||0,this.z=n||0),this}},{key:"copy",value:function(){return this.isPInst?new o.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new o.default.Vector(this.x,this.y,this.z)}},{key:"add",value:function(e,t,n){return e instanceof o.default.Vector?(this.x+=e.x||0,this.y+=e.y||0,this.z+=e.z||0):Array.isArray(e)?(this.x+=e[0]||0,this.y+=e[1]||0,this.z+=e[2]||0):(this.x+=e||0,this.y+=t||0,this.z+=n||0),this}},{key:"calculateRemainder2D",value:function(e,t){return 0!==e&&(this.x=this.x%e),0!==t&&(this.y=this.y%t),this}},{key:"calculateRemainder3D",value:function(e,t,n){return 0!==e&&(this.x=this.x%e),0!==t&&(this.y=this.y%t),0!==n&&(this.z=this.z%n),this}},{key:"rem",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i,a,s=t[0],l=t[1],c=t[2];if(s instanceof o.default.Vector){if([s.x,s.y,s.z].every(Number.isFinite))return r=parseFloat(s.x),i=parseFloat(s.y),a=parseFloat(s.z),this.calculateRemainder3D(r,i,a)}else if(Array.isArray(s)){if(s.every(Number.isFinite))return 2===s.length?this.calculateRemainder2D(s[0],s[1]):3===s.length?this.calculateRemainder3D(s[0],s[1],s[2]):void 0}else if(1===t.length){if(Number.isFinite(s)&&0!==s)return this.x=this.x%s,this.y=this.y%s,this.z=this.z%s,this}else if(2===t.length){if(t.every(Number.isFinite))return this.calculateRemainder2D(s,l)}else if(3===t.length&&t.every(Number.isFinite))return this.calculateRemainder3D(s,l,c)}},{key:"sub",value:function(e,t,n){return e instanceof o.default.Vector?(this.x-=e.x||0,this.y-=e.y||0,this.z-=e.z||0):Array.isArray(e)?(this.x-=e[0]||0,this.y-=e[1]||0,this.z-=e[2]||0):(this.x-=e||0,this.y-=t||0,this.z-=n||0),this}},{key:"mult",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=t[0],a=t[1],s=t[2];return i instanceof o.default.Vector?Number.isFinite(i.x)&&Number.isFinite(i.y)&&Number.isFinite(i.z)&&"number"==typeof i.x&&"number"==typeof i.y&&"number"==typeof i.z?(this.x*=i.x,this.y*=i.y,this.z*=i.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):Array.isArray(i)?i.every((function(e){return Number.isFinite(e)}))&&i.every((function(e){return"number"==typeof e}))?1===i.length?(this.x*=i[0],this.y*=i[0],this.z*=i[0]):2===i.length?(this.x*=i[0],this.y*=i[1]):3===i.length&&(this.x*=i[0],this.y*=i[1],this.z*=i[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(r=t).every((function(e){return Number.isFinite(e)}))&&r.every((function(e){return"number"==typeof e}))?(1===t.length&&(this.x*=i,this.y*=i,this.z*=i),2===t.length&&(this.x*=i,this.y*=a),3===t.length&&(this.x*=i,this.y*=a,this.z*=s)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this}},{key:"div",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2];if(r instanceof o.default.Vector)if(Number.isFinite(r.x)&&Number.isFinite(r.y)&&Number.isFinite(r.z)&&"number"==typeof r.x&&"number"==typeof r.y&&"number"==typeof r.z){var s=0===r.z&&0===this.z;if(0===r.x||0===r.y||!s&&0===r.z)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=r.x,this.y/=r.y,s||(this.z/=r.z)}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(Array.isArray(r))if(r.every(Number.isFinite)&&r.every((function(e){return"number"==typeof e}))){if(r.some((function(e){return 0===e})))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;1===r.length?(this.x/=r[0],this.y/=r[0],this.z/=r[0]):2===r.length?(this.x/=r[0],this.y/=r[1]):3===r.length&&(this.x/=r[0],this.y/=r[1],this.z/=r[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(t.every(Number.isFinite)&&t.every((function(e){return"number"==typeof e}))){if(t.some((function(e){return 0===e})))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;1===t.length&&(this.x/=r,this.y/=r,this.z/=r),2===t.length&&(this.x/=r,this.y/=i),3===t.length&&(this.x/=r,this.y/=i,this.z/=a)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this}},{key:"mag",value:function(){return Math.sqrt(this.magSq())}},{key:"magSq",value:function(){var e=this.x,t=this.y,n=this.z;return e*e+t*t+n*n}},{key:"dot",value:function(e,t,n){return e instanceof o.default.Vector?this.dot(e.x,e.y,e.z):this.x*(e||0)+this.y*(t||0)+this.z*(n||0)}},{key:"cross",value:function(e){var t=this.y*e.z-this.z*e.y,n=this.z*e.x-this.x*e.z;return e=this.x*e.y-this.y*e.x,this.isPInst?new o.default.Vector(this._fromRadians,this._toRadians,t,n,e):new o.default.Vector(t,n,e)}},{key:"dist",value:function(e){return e.copy().sub(this).mag()}},{key:"normalize",value:function(){var e=this.mag();return 0!==e&&this.mult(1/e),this}},{key:"limit",value:function(e){var t=this.magSq();return e*e<t&&this.div(Math.sqrt(t)).mult(e),this}},{key:"setMag",value:function(e){return this.normalize().mult(e)}},{key:"heading",value:function(){var e=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(e):e}},{key:"setHeading",value:function(e){this.isPInst&&(e=this._toRadians(e));var t=this.mag();return this.x=t*Math.cos(e),this.y=t*Math.sin(e),this}},{key:"rotate",value:function(e){e=this.heading()+e;var t=(this.isPInst&&(e=this._toRadians(e)),this.mag());return this.x=Math.cos(e)*t,this.y=Math.sin(e)*t,this}},{key:"angleBetween",value:function(e){var t;return 0==this.magSq()*e.magSq()?NaN:(t=this.cross(e),e=Math.atan2(t.mag(),this.dot(e))*Math.sign(t.z||1),this.isPInst?this._fromRadians(e):e)}},{key:"lerp",value:function(e,t,n,r){return e instanceof o.default.Vector?this.lerp(e.x,e.y,e.z,t):(this.x+=(e-this.x)*r||0,this.y+=(t-this.y)*r||0,this.z+=(n-this.z)*r||0,this)}},{key:"slerp",value:function(e,t){if(0!==t){if(1===t)return this.set(e);var n=this.mag(),r=e.mag();if(0==n*r)this.mult(1-t).add(e.x*t,e.y*t,e.z*t);else{var i=this.cross(e),o=i.mag(),a=Math.atan2(o,this.dot(e));if(0<o)i.x/=o,i.y/=o,i.z/=o;else{if(a<.5*Math.PI)return this.mult(1-t).add(e.x*t,e.y*t,e.z*t),this;0===this.z&&0===e.z?i.set(0,0,1):0!==this.x?i.set(this.y,-this.x,0).normalize():i.set(1,0,0)}o=i.cross(this),i=(e=1-t+t*r/n)*Math.cos(t*a),r=e*Math.sin(t*a),this.x=this.x*i+o.x*r,this.y=this.y*i+o.y*r,this.z=this.z*i+o.z*r}}return this}},{key:"reflect",value:function(e){return e=o.default.Vector.normalize(e),this.sub(e.mult(2*this.dot(e)))}},{key:"array",value:function(){return[this.x||0,this.y||0,this.z||0]}},{key:"equals",value:function(e,t,n){var r,i;return e=e instanceof o.default.Vector?(r=e.x||0,i=e.y||0,e.z||0):Array.isArray(e)?(r=e[0]||0,i=e[1]||0,e[2]||0):(r=e||0,i=t||0,n||0),this.x===r&&this.y===i&&this.z===e}},{key:"clampToZero",value:function(){return this.x=this._clampToZero(this.x),this.y=this._clampToZero(this.y),this.z=this._clampToZero(this.z),this}},{key:"_clampToZero",value:function(e){return Math.abs(+(e||0))<=Number.EPSILON?0:e}}])&&l(t.prototype,n),r&&l(t,r),e}();var c=o.default.Vector;n.default=c},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.every":155,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.some":170,"core-js/modules/es.math.sign":178,"core-js/modules/es.number.constructor":179,"core-js/modules/es.number.epsilon":180,"core-js/modules/es.number.is-finite":181,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],317:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e},i="_lcg_random_state",o=4294967296,a=0;r.default.prototype._lcg=function(e){return this[e]=(1664525*this[e]+1013904223)%o,this[e]/o},r.default.prototype._lcgSetSeed=function(e,t){this[e]=(null==t?Math.random()*o:t)>>>0},r.default.prototype.randomSeed=function(e){this._lcgSetSeed(i,e),this._gaussian_previous=!1},r.default.prototype.random=function(e,t){var n,o;return r.default._validateParameters("random",arguments),n=null!=this[i]?this._lcg(i):Math.random(),void 0===e?n:void 0===t?Array.isArray(e)?e[Math.floor(n*e.length)]:n*e:(t<e&&(o=e,e=t,t=o),n*(t-e)+e)},r.default.prototype.randomGaussian=function(e){var t,n,r,i,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(this._gaussian_previous)t=a,this._gaussian_previous=!1;else{for(;1<=(i=(n=this.random(2)-1)*n+(r=this.random(2)-1)*r););t=n*(i=Math.sqrt(-2*Math.log(i)/i)),a=r*i,this._gaussian_previous=!0}return t*o+(e||0)},e=r.default,n.default=e},{"../core/main":283}],318:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(l=e("../core/main"))&&l.__esModule?l:{default:l},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function s(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,s=function(){return e},e)}o.default.prototype._angleMode=a.RADIANS,o.default.prototype.acos=function(e){return this._fromRadians(Math.acos(e))},o.default.prototype.asin=function(e){return this._fromRadians(Math.asin(e))},o.default.prototype.atan=function(e){return this._fromRadians(Math.atan(e))},o.default.prototype.atan2=function(e,t){return this._fromRadians(Math.atan2(e,t))},o.default.prototype.cos=function(e){return Math.cos(this._toRadians(e))},o.default.prototype.sin=function(e){return Math.sin(this._toRadians(e))},o.default.prototype.tan=function(e){return Math.tan(this._toRadians(e))},o.default.prototype.degrees=function(e){return e*a.RAD_TO_DEG},o.default.prototype.radians=function(e){return e*a.DEG_TO_RAD},o.default.prototype.angleMode=function(e){if(o.default._validateParameters("angleMode",arguments),void 0===e)return this._angleMode;e!==a.DEGREES&&e!==a.RADIANS||e!==this._angleMode&&(e===a.RADIANS?(this._setProperty("pRotationX",this.pRotationX*a.DEG_TO_RAD),this._setProperty("pRotationY",this.pRotationY*a.DEG_TO_RAD),this._setProperty("pRotationZ",this.pRotationZ*a.DEG_TO_RAD)):(this._setProperty("pRotationX",this.pRotationX*a.RAD_TO_DEG),this._setProperty("pRotationY",this.pRotationY*a.RAD_TO_DEG),this._setProperty("pRotationZ",this.pRotationZ*a.RAD_TO_DEG)),this._angleMode=e)},o.default.prototype._toRadians=function(e){return this._angleMode===a.DEGREES?e*a.DEG_TO_RAD:e},o.default.prototype._toDegrees=function(e){return this._angleMode===a.RADIANS?e*a.RAD_TO_DEG:e},o.default.prototype._fromRadians=function(e){return this._angleMode===a.DEGREES?e*a.RAD_TO_DEG:e},o.default.prototype._fromDegrees=function(e){return this._angleMode===a.RADIANS?e*a.DEG_TO_RAD:e};var l=o.default;n.default=l},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],319:[function(e,t,n){"use strict";e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e};r.default.prototype.textAlign=function(e,t){var n;return r.default._validateParameters("textAlign",arguments),(n=this._renderer).textAlign.apply(n,arguments)},r.default.prototype.textLeading=function(e){var t;return r.default._validateParameters("textLeading",arguments),(t=this._renderer).textLeading.apply(t,arguments)},r.default.prototype.textSize=function(e){var t;return r.default._validateParameters("textSize",arguments),(t=this._renderer).textSize.apply(t,arguments)},r.default.prototype.textStyle=function(e){var t;return r.default._validateParameters("textStyle",arguments),(t=this._renderer).textStyle.apply(t,arguments)},r.default.prototype.textWidth=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t[0]+="",r.default._validateParameters("textWidth",t),0===t[0].length)return 0;for(var i=t[0].replace(/\t/g,"  ").split(/\r?\n|\r|\n/g),o=[],a=0;a<i.length;a++)o.push(this._renderer.textWidth(i[a]));return Math.max.apply(Math,o)},r.default.prototype.textAscent=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.default._validateParameters("textAscent",t),this._renderer.textAscent()},r.default.prototype.textDescent=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.default._validateParameters("textDescent",t),this._renderer.textDescent()},r.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},r.default.prototype.textWrap=function(e){return r.default._validateParameters("textWrap",[e]),this._renderer.textWrap(e)},e=r.default,n.default=e},{"../core/main":283,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206}],320:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.split"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(u=e("../core/main"))&&u.__esModule?u:{default:u},a=c(e("../core/constants")),s=c(e("opentype.js"));function l(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,l=function(){return e},e)}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n,r,o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&((r=a?Object.getOwnPropertyDescriptor(e,n):null)&&(r.get||r.set)?Object.defineProperty(o,n,r):o[n]=e[n]);return o.default=e,t&&t.set(e,o),o}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),o.default.prototype.loadFont=function(e,t,n){o.default._validateParameters("loadFont",arguments);var r=new o.default.Font(this),i=this;return s.load(e,(function(a,s){if(a)return o.default._friendlyFileLoadError(4,e),void 0!==n?n(a):void console.error(a,e);r.font=s,void 0!==t&&t(r),i._decrementPreload();var l=(s=(a=e.split("\\").pop().split("/").pop()).lastIndexOf("."))<1?null:a.slice(s+1);["ttf","otf","woff","woff2"].includes(l)&&(l=a.slice(0,-1!==s?s:0),(a=document.createElement("style")).appendChild(document.createTextNode("\n@font-face {\nfont-family: ".concat(l,";\nsrc: url(").concat(e,");\n}\n"))),document.head.appendChild(a))})),r},o.default.prototype.text=function(e,t,n,r,i){var a;return o.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(a=this._renderer).text.apply(a,arguments):this},o.default.prototype.textFont=function(e,t){if(o.default._validateParameters("textFont",arguments),arguments.length){if(e)return this._renderer._setProperty("_textFont",e),t&&(this._renderer._setProperty("_textSize",t),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",t*a._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw new Error("null font passed to textFont")}return this._renderer._textFont};var u=o.default;n.default=u},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,"opentype.js":257}],321:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.function.name"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=(i=e("../core/main"))&&i.__esModule?i:{default:i},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function a(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,a=function(){return e},e)}function s(e){return(s="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}function l(e,t){var n=e.length;return e[t<0?t%n+n:t%n]}function c(e,t,n,r){var i,o,a;return r?(void 0===c.tmpPoint1&&(c.tmpPoint1=[],c.tmpPoint2=[]),o=c.tmpPoint1,a=c.tmpPoint2,o.x=t.x-e.x,o.y=t.y-e.y,a.x=n.x-t.x,a.y=n.y-t.y,i=o.x*a.x+o.y*a.y,o=Math.sqrt(o.x*o.x+o.y*o.y),a=Math.sqrt(a.x*a.x+a.y*a.y),Math.acos(i/(o*a))<r):0==(t[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(t[1]-e[1])}function u(e,t,n,r,i,o,a,s,l){var c=1-l,u=(p=Math.pow(c,3))*e+3*(d=Math.pow(c,2))*l*n+3*c*l*l*i+(h=(f=l*l)*l)*a,p=p*t+3*d*l*r+3*c*l*l*o+h*s,d=e+2*l*(n-e)+f*(i-2*n+e),h=t+2*l*(r-t)+f*(o-2*r+t),m=n+2*l*(i-n)+f*(a-2*i+n),f=r+2*l*(o-r)+f*(s-2*o+r);return e=c*e+l*n,n=c*t+l*r,t=c*i+l*a,r=c*o+l*s,i=90-180*Math.atan2(d-m,h-f)/Math.PI,(m<d||h<f)&&(i+=180),{x:u,y:p,m:{x:d,y:h},n:{x:m,y:f},start:{x:e,y:n},end:{x:t,y:r},alpha:i}}function p(e,t,n,r,i,o,a,s,l){return null==l?y(e,t,n,r,i,o,a,s):u(e,t,n,r,i,o,a,s,function(e,t,n,r,i,o,a,s,l){if(!(l<0||y(e,t,n,r,i,o,a,s)<l)){var c,u=.5,p=1-u;for(c=y(e,t,n,r,i,o,a,s,p);.01<Math.abs(c-l);)c=y(e,t,n,r,i,o,a,s,p+=(c<l?1:-1)*(u/=2));return p}}(e,t,n,r,i,o,a,s,l))}function d(e,t,n){for(var r,i,o,a,s,l=0,c=0,d=(e=function(e){function t(e,t,n){var r,i;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(e[0]in{T:1,Q:1}||(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(h.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":i="C"===n||"S"===n?(r=2*t.x-t.bx,2*t.y-t.by):(r=t.x,t.y),e=["C",r,i].concat(e.slice(1));break;case"T":"Q"===n||"T"===n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(g(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(g(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(f(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(f(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(f(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(f(t.x,t.y,t.X,t.Y))}return e}function n(e,t){if(7<e[t].length){e[t].shift();for(var n=e[t];n.length;)c[t]="A",a&&(u[t]="A"),e.splice(t++,0,["C"].concat(n.splice(0,6)));e.splice(t,1),i=Math.max(o.length,a&&a.length||0)}}function r(e,t,n,r,s){e&&t&&"M"===e[s][0]&&"M"!==t[s][0]&&(t.splice(s,0,["M",r.x,r.y]),n.bx=0,n.by=0,n.x=e[s][1],n.y=e[s][2],i=Math.max(o.length,a&&a.length||0))}var i,o=function(e){var t=[],n=0,r=0,i=0,o=0,a=0;if(e){"M"===e[0][0]&&(i=n=+e[0][1],o=r=+e[0][2],a++,t[0]=["M",n,r]);for(var s,l,c=3===e.length&&"M"===e[0][0]&&"R"===e[1][0].toUpperCase()&&"Z"===e[2][0].toUpperCase(),u=a,p=e.length;u<p;u++){if(t.push(s=[]),(l=e[u])[0]!==l[0].toUpperCase())switch(s[0]=l[0].toUpperCase(),s[0]){case"A":s[1]=l[1],s[2]=l[2],s[3]=l[3],s[4]=l[4],s[5]=l[5],s[6]=+(l[6]+n),s[7]=+(l[7]+r);break;case"V":s[1]=+l[1]+r;break;case"H":s[1]=+l[1]+n;break;case"R":for(var d,h=2,f=(d=[n,r].concat(l.slice(1))).length;h<f;h++)d[h]=+d[h]+n,d[++h]=+d[h]+r;t.pop(),t=t.concat(m(d,c));break;case"M":i=+l[1]+n,o=+l[2]+r;break;default:for(var g=1,y=l.length;g<y;g++)s[g]=+l[g]+(g%2?n:r)}else if("R"===l[0])d=[n,r].concat(l.slice(1)),t.pop(),t=t.concat(m(d,c)),s=["R"].concat(l.slice(-2));else for(var _=0,v=l.length;_<v;_++)s[_]=l[_];switch(s[0]){case"Z":n=i,r=o;break;case"H":n=s[1];break;case"V":r=s[1];break;case"M":i=s[s.length-2],o=s[s.length-1];break;default:n=s[s.length-2],r=s[s.length-1]}}}return t}(e),a=void 0,s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},c=[],u=[],p="",d="";i=Math.max(o.length,a&&a.length||0);for(var y=0;y<i;y++){"C"!==(p=o[y]?o[y][0]:p)&&(c[y]=p,y&&(d=c[y-1])),o[y]=t(o[y],s,d),"A"!==c[y]&&"C"===p&&(c[y]="C"),n(o,y),a&&("C"!==(p=a[y]?a[y][0]:p)&&(u[y]=p,y&&(d=u[y-1])),a[y]=t(a[y],l,d),"A"!==u[y]&&"C"===p&&(u[y]="C"),n(a,y)),r(o,a,s,l,y),r(a,o,l,s,y);var _=o[y],v=a&&a[y],b=_.length,w=a&&v.length;s.x=_[b-2],s.y=_[b-1],s.bx=parseFloat(_[b-4])||s.x,s.by=parseFloat(_[b-3])||s.y,l.bx=a&&(parseFloat(v[w-4])||l.x),l.by=a&&(parseFloat(v[w-3])||l.y),l.x=a&&v[w-2],l.y=a&&v[w-1]}return a?[o,a]:o}(e)).length;c<d;c++){if("M"===(o=e[c])[0])r=+o[1],i=+o[2];else{if(t<l+(a=p(r,i,o[1],o[2],o[3],o[4],o[5],o[6]))&&!n)return{x:(s=p(r,i,o[1],o[2],o[3],o[4],o[5],o[6],t-l)).x,y:s.y,alpha:s.alpha};l+=a,r=+o[5],i=+o[6]}o.shift()}return(s=n?l:u(r,i,o[0],o[1],o[2],o[3],o[4],o[5],1)).alpha?{x:s.x,y:s.y,alpha:s.alpha}:s}function h(e,t,n,r,i,o,a,s,l,c){function u(e,t,n){return{x:e*Math.cos(n)-t*Math.sin(n),y:e*Math.sin(n)+t*Math.cos(n)}}var p,d=120*(_=Math.PI)/180,m=_/180*(+i||0),f=[],g=(c?(S=c[0],p=c[1],w=c[2],x=c[3]):(e=(v=u(e,t,-m)).x,t=v.y,1<(g=(y=(e-(s=(v=u(s,l,-m)).x))/2)*y/(n*n)+(v=(t-(l=v.y))/2)*v/(r*r))&&(n*=g=Math.sqrt(g),r*=g),g=n*n,b=r*r,w=(o=(o===a?-1:1)*Math.sqrt(Math.abs((g*b-g*v*v-b*y*y)/(g*v*v+b*y*y))))*n*v/r+(e+s)/2,x=o*-r*y/n+(t+l)/2,S=Math.asin(((t-x)/r).toFixed(9)),p=Math.asin(((l-x)/r).toFixed(9)),(S=e<w?_-S:S)<0&&(S=2*_+S),(p=s<w?_-p:p)<0&&(p=2*_+p),a&&p<S&&(S-=2*_),!a&&S<p&&(p-=2*_)),p-S),y=(Math.abs(g)>d&&(b=p,v=s,o=l,p=S+d*(a&&S<p?1:-1),f=h(s=w+n*Math.cos(p),l=x+r*Math.sin(p),n,r,i,0,a,v,o,[p,b,w,x])),g=p-S,Math.cos(S)),_=Math.sin(S),v=(d=Math.cos(p),i=Math.sin(p),4/3*n*(a=Math.tan(g/4))),b=[e,t],w=[e+v*_,t-(o=4/3*r*a)*y],x=[s+v*i,l-o*d],S=[s,l];if(w[0]=2*b[0]-w[0],w[1]=2*b[1]-w[1],c)return[w,x,S].concat(f);for(var T=[],E=0,I=(f=[w,x,S].concat(f).join().split(",")).length;E<I;E++)T[E]=E%2?u(f[E-1],f[E],m).y:u(f[E],f[E+1],m).x;return T}function m(e,t){for(var n=[],r=0,i=e.length;r<i-2*!t;r+=2){var o=[{x:+e[r-2],y:+e[r-1]},{x:+e[r],y:+e[r+1]},{x:+e[r+2],y:+e[r+3]},{x:+e[r+4],y:+e[r+5]}];t?r?i-4===r?o[3]={x:+e[0],y:+e[1]}:i-2===r&&(o[2]={x:+e[0],y:+e[1]},o[3]={x:+e[2],y:+e[3]}):o[0]={x:+e[i-2],y:+e[i-1]}:i-4===r?o[3]=o[2]:r||(o[0]={x:+e[r],y:+e[r+1]}),n.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return n}function f(e,t,n,r){return[e,t,n,r,n,r]}function g(e,t,n,r,i,o){return[1/3*e+2/3*n,1/3*t+2/3*r,1/3*i+2/3*n,1/3*o+2/3*r,i,o]}function y(e,t,n,r,i,o,a,s,l){for(var c=(l=1<(l=null==l?1:l)?1:l<0?0:l)/2,u=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],p=0,d=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],h=0;h<12;h++){var m=_(f=c*u[h]+c,e,n,i,a),f=_(f,t,r,o,s);p+=d[h]*Math.sqrt(m*m+f*f)}return c*p}function _(e,t,n,r,i){return e*(e*(-3*t+9*n-9*r+3*i)+6*t-12*n+6*r)-3*t+3*n}i.default.Font=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.parent=t,this.cache={},this.font=void 0}var t;return(t=[{key:"textBounds",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length?arguments[3]:void 0,i=4<arguments.length?arguments[4]:void 0,a=i&&i.renderer&&i.renderer._pInst||this.parent;if((y=a._renderer.drawingContext).textAlign||o.LEFT,y.textBaseline||o.BASELINE,r=r||a._renderer._textSize,!_){for(var s=[],l=[],c=[],u=(c[0]=[],[]),p=this._scale(r),d=a._renderer.textLeading(),h=0,m=(this.font.forEachGlyph(e,t,n,r,i,(function(e,t,n,r){var i=e.getMetrics();0===e.index?c[h+=1]=[]:(c[h].push(t+i.xMin*p),c[h].push(t+i.xMax*p),u.push(n+h*d+-i.yMin*p),u.push(n+h*d+-i.yMax*p))})),0<c[h].length&&(s[h]=Math.min.apply(null,c[h]),l[h]=Math.max.apply(null,c[h])),0),f=0;f<=h;f++){s[f]=Math.min.apply(null,c[f]),l[f]=Math.max.apply(null,c[f]);var g=l[f]-s[f];m<g&&(m=g)}var y,_={x:y=Math.min.apply(null,s),y:n=Math.min.apply(null,u),h:Math.max.apply(null,u)-n,w:m,advance:y-t};r=this._handleAlignment(a._renderer,e,_.x,_.y,_.w+_.advance),_.x=r.x,_.y=r.y}return _}},{key:"textToPoints",value:function(e,t,n,r,i){var o,a=t,u=[],p=this.parent,h=e.split(/\r?\n|\r|\n/g);r=r||this.parent._renderer._textSize;for(var m,f,g,y=0;y<h.length;y++){var _=0;t=a;for(var v=(v=h[y]).replace("\t","  "),b=this._getGlyphs(v),w=0;w<b.length;w++){if(f=v,!((g=b)[m=w].name&&"space"===g[m].name||f.length===g.length&&" "===f[m]))for(var x=function(e){for(var t,n=[],r=0;r<e.length;r++)"M"===e[r].type&&(t&&n.push(t),t=[]),t.push(function(e){var t=[e.type];return"M"===e.type||"L"===e.type?t.push(e.x,e.y):"C"===e.type?t.push(e.x1,e.y1,e.x2,e.y2,e.x,e.y):"Q"===e.type&&t.push(e.x1,e.y1,e.x,e.y),t}(e[r]));return n.push(t),n}(b[w].getPath(t,n,r).commands),S=0;S<x.length;S++)for(var T=function(e,t){t=function(e,t){if("object"!==s(e))e=t;else for(var n in t)void 0===e[n]&&(e[n]=t[n]);return e}(t,{sampleFactor:.1,simplifyThreshold:0});for(var n=d(e,0,1),r=n/(n*t.sampleFactor),i=[],o=0;o<n;o+=r)i.push(d(e,o));return t.simplifyThreshold&&function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=e.length-1;3<e.length&&0<=n;--n)c(l(e,n-1),l(e,n),l(e,n+1),t)&&e.splice(n%e.length,1)}(i,t.simplifyThreshold),i}(x[S],i),E=0;E<T.length;E++)T[E].x+=_,o=this._handleAlignment(p._renderer,v,T[E].x,T[E].y),T[E].x=o.x,T[E].y=o.y,u.push(T[E]);_+=b[w].advanceWidth*this._scale(r)}n+=this.parent._renderer._textLeading}return u}},{key:"_getGlyphs",value:function(e){return this.font.stringToGlyphs(e)}},{key:"_getPath",value:function(e,t,n,r){var i=(r&&r.renderer&&r.renderer._pInst||this.parent)._renderer;return t=this._handleAlignment(i,e,t,n),this.font.getPath(e,t.x,t.y,i._textSize,r)}},{key:"_getPathData",value:function(e,t,n,r){var i=3;return"string"==typeof e&&2<arguments.length?e=this._getPath(e,t,n,r):"object"===s(t)&&(r=t),r&&"number"==typeof r.decimals&&(i=r.decimals),e.toPathData(i)}},{key:"_getSVG",value:function(e,t,n,r){var i=3;return"string"==typeof e&&2<arguments.length?e=this._getPath(e,t,n,r):"object"===s(t)&&(r=t),r&&("number"==typeof r.decimals&&(i=r.decimals),"number"==typeof r.strokeWidth&&(e.strokeWidth=r.strokeWidth),void 0!==r.fill&&(e.fill=r.fill),void 0!==r.stroke&&(e.stroke=r.stroke)),e.toSVG(i)}},{key:"_renderPath",value:function(e,t,n,r){var i=r&&r.renderer||this.parent._renderer,a=i.drawingContext,l=(e=("object"===s(e)&&e.commands?e:this._getPath(e,t,n,r)).commands,i._clipping||a.beginPath(),!0);t=!1,n=void 0;try{for(var c,u=e[Symbol.iterator]();!(l=(c=u.next()).done);l=!0){var p=c.value;"M"===p.type?a.moveTo(p.x,p.y):"L"===p.type?a.lineTo(p.x,p.y):"C"===p.type?a.bezierCurveTo(p.x1,p.y1,p.x2,p.y2,p.x,p.y):"Q"===p.type?a.quadraticCurveTo(p.x1,p.y1,p.x,p.y):"Z"===p.type&&a.closePath()}}catch(e){t=!0,n=e}finally{try{l||null==u.return||u.return()}finally{if(t)throw n}}return i._doStroke&&i._strokeSet&&!i._clipping&&a.stroke(),i._doFill&&!i._clipping&&(i._fillSet||i._setFill(o._DEFAULT_TEXT_FILL),a.fill()),this}},{key:"_textWidth",value:function(e,t){return this.font.getAdvanceWidth(e,t)}},{key:"_textAscent",value:function(e){return this.font.ascender*this._scale(e)}},{key:"_textDescent",value:function(e){return-this.font.descender*this._scale(e)}},{key:"_scale",value:function(e){return 1/this.font.unitsPerEm*(e||this.parent._renderer._textSize)}},{key:"_handleAlignment",value:function(e,t,n,r,i){var a=e._textSize;switch(void 0===i&&(i=this._textWidth(t,a)),e._textAlign){case o.CENTER:n-=i/2;break;case o.RIGHT:n-=i}switch(e._textBaseline){case o.TOP:r+=this._textAscent(a);break;case o.CENTER:r+=this._textAscent(a)/2;break;case o.BOTTOM:r-=this._textDescent(a)}return{x:n,y:r}}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}(),e=i.default,n.default=e},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],322:[function(e,t,n){"use strict";e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.array-buffer.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.array-buffer.constructor"),e("core-js/modules/es.object.to-string"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,(e=(e=e("../core/main"))&&e.__esModule?e:{default:e}).default.prototype.append=function(e,t){return e.push(t),e},e.default.prototype.arrayCopy=function(e,t,n,r,i){var o,a;e=void 0!==i?(a=Math.min(i,e.length),o=r,e.slice(t,a+t)):(a=void 0!==n?(a=n,Math.min(a,e.length)):e.length,n=t,e.slice(o=0,a)),Array.prototype.splice.apply(n,[o,a].concat(e))},e.default.prototype.concat=function(e,t){return e.concat(t)},e.default.prototype.reverse=function(e){return e.reverse()},e.default.prototype.shorten=function(e){return e.pop(),e},e.default.prototype.shuffle=function(e,t){for(var n,r,i=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(e),o=(e=t||i?e:e.slice()).length;1<o;)n=this.random(0,1)*o|0,r=e[--o],e[o]=e[n],e[n]=r;return e},e.default.prototype.sort=function(e,t){var n=t?e.slice(0,Math.min(t,e.length)):e;return t=t?e.slice(Math.min(t,e.length)):[],(n="string"==typeof n[0]?n.sort():n.sort((function(e,t){return e-t}))).concat(t)},e.default.prototype.splice=function(e,t,n){return Array.prototype.splice.apply(e,[n,0].concat(t)),e},e.default.prototype.subset=function(e,t,n){return void 0!==n?e.slice(t,t+n):e.slice(t,e.length)},e=e.default,n.default=e},{"../core/main":283,"core-js/modules/es.array-buffer.constructor":152,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.to-string":190}],323:[function(e,t,n){"use strict";e("core-js/modules/es.array.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.repeat"),e("core-js/modules/es.array.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.repeat"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e};r.default.prototype.float=function(e){return e instanceof Array?e.map(parseFloat):parseFloat(e)},r.default.prototype.int=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;return e===1/0||"Infinity"===e?1/0:e===-1/0||"-Infinity"===e?-1/0:"string"==typeof e?parseInt(e,t):"number"==typeof e?0|e:"boolean"==typeof e?e?1:0:e instanceof Array?e.map((function(e){return r.default.prototype.int(e,t)})):void 0},r.default.prototype.str=function(e){return e instanceof Array?e.map(r.default.prototype.str):String(e)},r.default.prototype.boolean=function(e){return"number"==typeof e?0!==e:"string"==typeof e?"true"===e.toLowerCase():"boolean"==typeof e?e:e instanceof Array?e.map(r.default.prototype.boolean):void 0},r.default.prototype.byte=function(e){return"number"==typeof(e=r.default.prototype.int(e,10))?(e+128)%256-128:e instanceof Array?e.map(r.default.prototype.byte):void 0},r.default.prototype.char=function(e){return"number"!=typeof e||isNaN(e)?e instanceof Array?e.map(r.default.prototype.char):"string"==typeof e?r.default.prototype.char(parseInt(e,10)):void 0:String.fromCharCode(e)},r.default.prototype.unchar=function(e){return"string"==typeof e&&1===e.length?e.charCodeAt(0):e instanceof Array?e.map(r.default.prototype.unchar):void 0},r.default.prototype.hex=function(e,t){if(t=null==t?8:t,e instanceof Array)return e.map((function(e){return r.default.prototype.hex(e,t)}));if(e===1/0||e===-1/0)return(e===1/0?"F":"0").repeat(t);if("number"==typeof e){e<0&&(e=4294967295+e+1);for(var n=Number(e).toString(16).toUpperCase();n.length<t;)n="0".concat(n);return n.length>=t?n.substring(n.length-t,n.length):n}},r.default.prototype.unhex=function(e){return e instanceof Array?e.map(r.default.prototype.unhex):parseInt("0x".concat(e),16)},e=r.default,n.default=e},{"../core/main":283,"core-js/modules/es.array.map":168,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.repeat":203}],324:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.pad-start"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.constructor"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.pad-start"),e("core-js/modules/es.string.replace"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(c=e("../core/main"))&&c.__esModule?c:{default:c};function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(e,t,n){var r=(o=i(e.toString().split("."),2))[0],o=o[1];return void 0===n?(r=r.padStart(t,"0"),o?r+"."+o:r):(r=(e=i(e.toFixed(n).toString().split("."),2))[0],o=e[1],r=r.padStart(t,"0"),void 0===o?r:r+"."+o)}function a(e,t){var n=(e=e.toString()).indexOf("."),r=-1!==n?e.substring(n):"";if(e=(e=-1!==n?e.substring(0,n):e).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),0===t)r="";else if(void 0!==t)if(t>r.length)for(var i=t-(r+=-1===n?".":"").length+1,o=0;o<i;o++)r+="0";else r=r.substring(0,t+1);return e+r}function s(e){return 0<parseFloat(e)?"+".concat(e.toString()):e.toString()}function l(e){return 0<=parseFloat(e)?" ".concat(e.toString()):e.toString()}e("../core/friendly_errors/validate_params"),e("../core/friendly_errors/file_errors"),e("../core/friendly_errors/fes_core"),r.default.prototype.join=function(e,t){return r.default._validateParameters("join",arguments),e.join(t)},r.default.prototype.match=function(e,t){return r.default._validateParameters("match",arguments),e.match(t)},r.default.prototype.matchAll=function(e,t){r.default._validateParameters("matchAll",arguments);for(var n=new RegExp(t,"g"),i=n.exec(e),o=[];null!==i;)o.push(i),i=n.exec(e);return o},r.default.prototype.nf=function(e,t,n){return r.default._validateParameters("nf",arguments),e instanceof Array?e.map((function(e){return o(e,t,n)})):"[object Arguments]"===Object.prototype.toString.call(e)?3===e.length?this.nf(e[0],e[1],e[2]):2===e.length?this.nf(e[0],e[1]):this.nf(e[0]):o(e,t,n)},r.default.prototype.nfc=function(e,t){return r.default._validateParameters("nfc",arguments),e instanceof Array?e.map((function(e){return a(e,t)})):a(e,t)},r.default.prototype.nfp=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.default._validateParameters("nfp",t);var i=r.default.prototype.nf.apply(this,t);return i instanceof Array?i.map(s):s(i)},r.default.prototype.nfs=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.default._validateParameters("nfs",t);var i=r.default.prototype.nf.apply(this,t);return i instanceof Array?i.map(l):l(i)},r.default.prototype.split=function(e,t){return r.default._validateParameters("split",arguments),e.split(t)},r.default.prototype.splitTokens=function(e,t){var n,i;return r.default._validateParameters("splitTokens",arguments),i=void 0!==t?(i=/\]/g.exec(t),(n=/\[/g.exec(t))&&i?(t=t.slice(0,i.index)+t.slice(i.index+1),n=/\[/g.exec(t),t=t.slice(0,n.index)+t.slice(n.index+1),new RegExp("[\\[".concat(t,"\\]]"),"g")):i?(t=t.slice(0,i.index)+t.slice(i.index+1),new RegExp("[".concat(t,"\\]]"),"g")):n?(t=t.slice(0,n.index)+t.slice(n.index+1),new RegExp("[".concat(t,"\\[]"),"g")):new RegExp("[".concat(t,"]"),"g")):/\s/g,e.split(i).filter((function(e){return e}))},r.default.prototype.trim=function(e){return r.default._validateParameters("trim",arguments),e instanceof Array?e.map(this.trim):e.trim()};var c=r.default;n.default=c},{"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.pad-start":202,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],325:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,(e=(e=e("../core/main"))&&e.__esModule?e:{default:e}).default.prototype.day=function(){return(new Date).getDate()},e.default.prototype.hour=function(){return(new Date).getHours()},e.default.prototype.minute=function(){return(new Date).getMinutes()},e.default.prototype.millis=function(){return-1===this._millisStart?0:window.performance.now()-this._millisStart},e.default.prototype.month=function(){return(new Date).getMonth()+1},e.default.prototype.second=function(){return(new Date).getSeconds()},e.default.prototype.year=function(){return(new Date).getFullYear()},e=e.default,n.default=e},{"../core/main":283}],326:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.math.hypot"),e("core-js/modules/es.math.sign"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.math.hypot"),e("core-js/modules/es.math.sign"),e("core-js/modules/es.number.to-fixed"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(c=e("../core/main"))&&c.__esModule?c:{default:c},a=(e("./p5.Geometry"),function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants")));function s(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,s=function(){return e},e)}function l(e,t,n,r,i,a,s){e=e<=0?1:e,t=t<0?0:t,n=n<=0?e:n,r=r<3?3:r;for(var l,c,u=(a=void 0===a||a)?-2:0,p=(i=i<1?1:i)+((s=void 0===s?0!==t:s)?2:0),d=Math.atan2(e-t,n),h=Math.sin(d),m=Math.cos(d),f=u;f<=p;++f){var g=f/i,y=n*g,_=void 0;for(_=f<0?(g=y=0,e):i<f?(y=n,g=1,t):e+(t-e)*g,-2!==f&&f!==i+2||(_=0),y-=n/2,l=0;l<r;++l){var v=l/(r-1),b=2*Math.PI*v,w=Math.sin(b),x=(b=Math.cos(b),this.vertices.push(new o.default.Vector(w*_,y,b*_)));x=f<0?new o.default.Vector(0,-1,0):i<f&&t?new o.default.Vector(0,1,0):new o.default.Vector(w*m,h,b*m),this.vertexNormals.push(x),this.uvs.push(v,g)}}var S=0;if(a){for(c=0;c<r;++c)this.faces.push([S+c,S+r+(c+1)%r,S+r+c]);S+=2*r}for(f=0;f<i;++f){for(l=0;l<r;++l){var T=(l+1)%r;this.faces.push([S+l,S+T,S+r+T]),this.faces.push([S+l,S+r+T,S+r+l])}S+=r}if(s)for(S+=r,l=0;l<r;++l)this.faces.push([S+l,S+(l+1)%r,S+r])}o.default.prototype.beginGeometry=function(){return this._renderer.beginGeometry()},o.default.prototype.endGeometry=function(){return this._renderer.endGeometry()},o.default.prototype.buildGeometry=function(e){return this._renderer.buildGeometry(e)},o.default.prototype.freeGeometry=function(e){this._renderer._freeBuffers(e.gid)},o.default.prototype.plane=function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,a=(this._assert3d("plane"),o.default._validateParameters("plane",arguments),"plane|".concat(r,"|").concat(i));return this._renderer.geometryInHash(a)||((e=new o.default.Geometry(r,i,(function(){for(var e,t,n=0;n<=this.detailY;n++)for(var r=n/this.detailY,i=0;i<=this.detailX;i++)e=i/this.detailX,t=new o.default.Vector(e-.5,r-.5,0),this.vertices.push(t),this.uvs.push(e,r)}))).computeFaces().computeNormals(),r<=1&&i<=1?e._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(a,e)),this._renderer.drawBuffersScaled(a,t,n,1),this},o.default.prototype.box=function(e,t,n,r,i){this._assert3d("box"),o.default._validateParameters("box",arguments),void 0===e&&(e=50),void 0===t&&(t=e),void 0===n&&(n=t);var a,s=this._renderer.attributes&&this._renderer.attributes.perPixelLighting;return void 0===i&&(i=s?1:4),s="box|".concat(r=void 0===r?s?1:4:r,"|").concat(i),this._renderer.geometryInHash(s)||((a=new o.default.Geometry(r,i,(function(){var e=this;this.edges=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]],[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]].forEach((function(t,n){n*=4;for(var r=0;r<4;r++){var i=t[r];i=new o.default.Vector((2*(1&i)-1)/2,((2&i)-1)/2,((4&i)/2-1)/2),e.vertices.push(i),e.uvs.push(1&r,(2&r)/2)}e.faces.push([n,1+n,2+n]),e.faces.push([2+n,1+n,3+n])}))}))).computeNormals(),r<=4&&i<=4?a._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(s,a)),this._renderer.drawBuffersScaled(s,e,t,n),this},o.default.prototype.sphere=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:24,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:16;return this._assert3d("sphere"),o.default._validateParameters("sphere",arguments),this.ellipsoid(e,e,e,t,n),this},o.default.prototype.cylinder=function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:24,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,a=!(4<arguments.length&&void 0!==arguments[4])||arguments[4],s=!(5<arguments.length&&void 0!==arguments[5])||arguments[5],c=(this._assert3d("cylinder"),o.default._validateParameters("cylinder",arguments),"cylinder|".concat(r,"|").concat(i,"|").concat(a,"|").concat(s));return this._renderer.geometryInHash(c)||(e=new o.default.Geometry(r,i),l.call(e,1,1,1,r,i,a,s),r<=24&&i<=16?e._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(c,e)),this._renderer.drawBuffersScaled(c,t,n,t),this},o.default.prototype.cone=function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:24,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,a=!(4<arguments.length&&void 0!==arguments[4])||arguments[4],s=(this._assert3d("cone"),o.default._validateParameters("cone",arguments),"cone|".concat(r,"|").concat(i,"|").concat(a));return this._renderer.geometryInHash(s)||(e=new o.default.Geometry(r,i),l.call(e,1,0,1,r,i,a,!1),r<=24&&i<=16?e._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(s,e)),this._renderer.drawBuffersScaled(s,t,n,t),this},o.default.prototype.ellipsoid=function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:t,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:24,a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:16,s=(this._assert3d("ellipsoid"),o.default._validateParameters("ellipsoid",arguments),"ellipsoid|".concat(i,"|").concat(a));return this._renderer.geometryInHash(s)||((e=new o.default.Geometry(i,a,(function(){for(var e=0;e<=this.detailY;e++)for(var t=e/this.detailY,n=Math.PI*t-Math.PI/2,r=Math.cos(n),i=Math.sin(n),a=0;a<=this.detailX;a++){var s=a/this.detailX,l=2*Math.PI*s,c=Math.cos(l);l=Math.sin(l),l=new o.default.Vector(r*l,i,r*c),this.vertices.push(l),this.vertexNormals.push(l),this.uvs.push(s,t)}}))).computeFaces(),i<=24&&a<=24?e._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(s,e)),this._renderer.drawBuffersScaled(s,t,n,r),this},o.default.prototype.torus=function(e,t,n,r){if(this._assert3d("torus"),o.default._validateParameters("torus",arguments),void 0===e)e=50;else if(!e)return;if(void 0===t)t=10;else if(!t)return;void 0===n&&(n=24),void 0===r&&(r=16);var i,a=(t/e).toPrecision(4);return t="torus|".concat(a,"|").concat(n,"|").concat(r),this._renderer.geometryInHash(t)||((i=new o.default.Geometry(n,r,(function(){for(var e=0;e<=this.detailY;e++)for(var t=e/this.detailY,n=2*Math.PI*t,r=Math.cos(n),i=Math.sin(n),s=1+a*r,l=0;l<=this.detailX;l++){var c=l/this.detailX,u=2*Math.PI*c,p=Math.cos(u),d=(u=Math.sin(u),new o.default.Vector(s*p,s*u,a*i));p=new o.default.Vector(r*p,r*u,i),this.vertices.push(d),this.vertexNormals.push(p),this.uvs.push(c,t)}}))).computeFaces(),n<=24&&r<=16?i._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(t,i)),this._renderer.drawBuffersScaled(t,e,e,e),this},o.default.RendererGL.prototype.point=function(e,t){var n=[];return n.push(new o.default.Vector(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:0)),this._drawPoints(n,this.immediateMode.buffers.point),this},o.default.RendererGL.prototype.triangle=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],s=(e=e[5],this.geometryInHash("tri")||((s=new o.default.Geometry(1,1,(function(){var e=[];e.push(new o.default.Vector(0,0,0)),e.push(new o.default.Vector(1,0,0)),e.push(new o.default.Vector(0,1,0)),this.edges=[[0,1],[1,2],[2,0]],this.vertices=e,this.faces=[[0,1,2]],this.uvs=[0,0,1,0,1,1]})))._edgesToVertices(),s.computeNormals(),this.createBuffers("tri",s)),this.uModelMatrix.copy());try{var l=Math.sign(t*i-r*n+r*e-a*i+a*n-t*e),c=new o.default.Matrix([r-t,i-n,0,0,a-t,e-n,0,0,0,0,l,0,t,n,0,1]).mult(this.uModelMatrix);this.uModelMatrix=c,this.drawBuffers("tri")}finally{this.uModelMatrix=s}return this},o.default.RendererGL.prototype.ellipse=function(e){this.arc(e[0],e[1],e[2],e[3],0,a.TWO_PI,a.OPEN,e[4])},o.default.RendererGL.prototype.arc=function(){var e,t=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],r=arguments.length<=2?void 0:arguments[2],i=arguments.length<=3?void 0:arguments[3],s=arguments.length<=4?void 0:arguments[4],l=arguments.length<=5?void 0:arguments[5],c=arguments.length<=6?void 0:arguments[6],u=(arguments.length<=7?void 0:arguments[7])||25,p=(Math.abs(l-s)>=a.TWO_PI?"".concat(d="ellipse","|"):"".concat(d="arc","|").concat(s,"|").concat(l,"|").concat(c,"|")).concat(u,"|"),d=(this.geometryInHash(p)||((e=new o.default.Geometry(u,1,(function(){if(s.toFixed(10)!==l.toFixed(10)){c!==a.PIE&&void 0!==c||(this.vertices.push(new o.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var e=0;e<=u;e++){var t=e/u*(l-s)+s,n=.5+Math.cos(t)/2;t=.5+Math.sin(t)/2,this.vertices.push(new o.default.Vector(n,t,0)),this.uvs.push([n,t]),e<u-1&&(this.faces.push([0,e+1,e+2]),this.edges.push([e+1,e+2]))}switch(c){case a.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,1]),this.edges.push([this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,this.vertices.length-1]);break;case a.CHORD:this.edges.push([0,1]),this.edges.push([0,this.vertices.length-1]);break;case a.OPEN:this.edges.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([this.vertices.length-2,this.vertices.length-1])}}}))).computeNormals(),u<=50?e._edgesToVertices(e):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(d," with more than 50 detail")),this.createBuffers(p,e)),this.uModelMatrix.copy());try{this.uModelMatrix.translate([t,n,0]),this.uModelMatrix.scale(r,i,1),this.drawBuffers(p)}finally{this.uModelMatrix=d}return this},o.default.RendererGL.prototype.rect=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];if(void 0===e[4]){var s=this._pInst._glAttributes.perPixelLighting,l=e[4]||(s?1:24),c=e[5]||(s?1:16),u=(s="rect|".concat(l,"|").concat(c),this.geometryInHash(s)||((u=new o.default.Geometry(l,c,(function(){for(var e=0;e<=this.detailY;e++)for(var t=e/this.detailY,n=0;n<=this.detailX;n++){var r=n/this.detailX,i=new o.default.Vector(r,t,0);this.vertices.push(i),this.uvs.push(r,t)}0<l&&0<c&&(this.edges=[[0,l],[l,(l+1)*(c+1)-1],[(l+1)*(c+1)-1,(l+1)*c],[(l+1)*c,0]])}))).computeFaces().computeNormals()._edgesToVertices(),this.createBuffers(s,u)),this.uModelMatrix.copy());try{this.uModelMatrix.translate([t,n,0]),this.uModelMatrix.scale(r,i,1),this.drawBuffers(s)}finally{this.uModelMatrix=u}}else{s=e[4],u=void 0===e[5]?s:e[5];var p=void 0===e[6]?u:e[6],d=(e=void 0===e[7]?p:e[7],r),h=i,m=((d+=t)<t&&(g=t,t=d,d=g),(h+=n)<n&&(g=n,n=h,h=g),(g=Math.min((d-t)/2,(h-n)/2))<s&&(s=g),g<u&&(u=g),g<p&&(p=g),g<e&&(e=g),t),f=n,g=d,y=(t=h,this.beginShape(),0!==u?(this.vertex(g-u,f),this.quadraticVertex(g,f,g,f+u)):this.vertex(g,f),0!==p?(this.vertex(g,t-p),this.quadraticVertex(g,t,g-p,t)):this.vertex(g,t),0!==e?(this.vertex(m+e,t),this.quadraticVertex(m,t,m,t-e)):this.vertex(m,t),0!==s?(this.vertex(m,f+s),this.quadraticVertex(m,f,m+s,f)):this.vertex(m,f),!(this.immediateMode.geometry.uvs.length=0));n=!1,d=void 0;try{for(var _,v=this.immediateMode.geometry.vertices[Symbol.iterator]();!(y=(_=v.next()).done);y=!0){var b=_.value,w=(b.x-m)/r,x=(b.y-f)/i;this.immediateMode.geometry.uvs.push(w,x)}}catch(e){n=!0,d=e}finally{try{y||null==v.return||v.return()}finally{if(n)throw d}}this.endShape(a.CLOSE)}return this},o.default.RendererGL.prototype.quad=function(e,t,n,r,i,a,s,l,c,u,p,d){var h=12<arguments.length&&void 0!==arguments[12]?arguments[12]:2,m=13<arguments.length&&void 0!==arguments[13]?arguments[13]:2,f="quad|".concat(e,"|").concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(a,"|").concat(s,"|").concat(l,"|").concat(c,"|").concat(u,"|").concat(p,"|").concat(d,"|").concat(h,"|").concat(m);if(!this.geometryInHash(f)){var g=new o.default.Geometry(h,m,(function(){for(var h=1/(this.detailX-1),m=1/(this.detailY-1),f=0;f<this.detailY;f++)for(var g=0;g<this.detailX;g++){var y=g*h,_=f*m;this.vertices.push(new o.default.Vector((1-y)*((1-_)*e+_*u)+y*((1-_)*r+_*s),(1-y)*((1-_)*t+_*p)+y*((1-_)*i+_*l),(1-y)*((1-_)*n+_*d)+y*((1-_)*a+_*c))),this.uvs.push([y,_])}}));g.faces=[];for(var y=0;y<m-1;y++)for(var _=0;_<h-1;_++){var v=_+y*h,b=_+1+(y+1)*h,w=_+(y+1)*h;g.faces.push([v,_+1+y*h,b]),g.faces.push([v,b,w])}g.computeNormals();for(var x=[g.edges.length=0,2,3,1],S=0;S<x.length;S++)g.edges.push([x[S],x[(S+1)%x.length]]);g._edgesToVertices(),this.createBuffers(f,g)}return this.drawBuffers(f),this},o.default.RendererGL.prototype.bezier=function(e,t,n,r,i,o,a,s,l,c,u,p){8===arguments.length&&(u=s,c=a,s=o,a=i,i=r,r=n,n=o=l=p=0);var d=this._pInst._bezierDetail||20;this.beginShape();for(var h=0;h<=d;h++){var m=Math.pow(1-h/d,3),f=h/d*3*Math.pow(1-h/d,2),g=3*Math.pow(h/d,2)*(1-h/d),y=Math.pow(h/d,3);this.vertex(e*m+r*f+a*g+c*y,t*m+i*f+s*g+u*y,n*m+o*f+l*g+p*y)}return this.endShape(),this},o.default.RendererGL.prototype.curve=function(e,t,n,r,i,o,a,s,l,c,u,p){8===arguments.length&&(c=a,u=s,a=i,s=r,i=r=n,n=o=l=p=0);var d=this._pInst._curveDetail;this.beginShape();for(var h=0;h<=d;h++){var m=.5*Math.pow(h/d,3),f=.5*Math.pow(h/d,2),g=h/d*.5;this.vertex(m*(3*r-e-3*a+c)+f*(2*e-5*r+4*a-c)+g*(-e+a)+2*r*.5,m*(3*i-t-3*s+u)+f*(2*t-5*i+4*s-u)+g*(-t+s)+2*i*.5,m*(3*o-n-3*l+p)+f*(2*n-5*o+4*l-p)+g*(-n+l)+2*o*.5)}return this.endShape(),this},o.default.RendererGL.prototype.line=function(){return 6===arguments.length?(this.beginShape(a.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):4===arguments.length&&(this.beginShape(a.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},o.default.RendererGL.prototype.bezierVertex=function(){if(0===this.immediateMode._bezierVertex.length)throw Error("vertex() must be used once before calling bezierVertex()");var e,t,n,r,i,o,a=[],s=[],l=arguments.length;if(0===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var c=1/this._lutBezierDetail,u=c,p=1,d=0;u<1;){if(o=parseFloat(u.toFixed(6)),this._lookUpTableBezier[d]=this._bezierCoefficients(o),p.toFixed(6)===c.toFixed(6)){o=parseFloat(p.toFixed(6))+parseFloat(u.toFixed(6)),++d,this._lookUpTableBezier[d]=this._bezierCoefficients(o);break}u+=c,p-=c,++d}}for(var h=this._lookUpTableBezier.length,m=[],f=0;f<4;f++)m.push([]);m[0]=this.immediateMode.geometry.vertexColors.slice(-4),m[3]=this.curFillColor.slice();var g=[];for(f=0;f<4;f++)g.push([]);if(g[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),g[3]=this.curStrokeColor.slice(),6===l){this.isBezier=!0,a=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],s=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]];var y=Math.hypot(a[0]-a[1],s[0]-s[1]),_=Math.hypot(a[1]-a[2],s[1]-s[2]),v=Math.hypot(a[2]-a[3],s[2]-s[3]);for(y/=_=y+_+v,v/=_,i=0;i<4;i++)m[1].push(m[0][i]*(1-y)+m[3][i]*y),m[2].push(m[0][i]*v+m[3][i]*(1-v)),g[1].push(g[0][i]*(1-y)+g[3][i]*y),g[2].push(g[0][i]*v+g[3][i]*(1-v));for(r=0;r<h;r++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],f=e=t=0;f<4;f++){for(i=0;i<4;i++)this.curFillColor[i]+=this._lookUpTableBezier[r][f]*m[f][i],this.curStrokeColor[i]+=this._lookUpTableBezier[r][f]*g[f][i];e+=a[f]*this._lookUpTableBezier[r][f],t+=s[f]*this._lookUpTableBezier[r][f]}this.vertex(e,t)}this.curFillColor=m[3],this.curStrokeColor=g[3],this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(9===l){this.isBezier=!0,a=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],s=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]];var b=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],w=Math.hypot(a[0]-a[1],s[0]-s[1],b[0]-b[1]),x=(_=Math.hypot(a[1]-a[2],s[1]-s[2],b[1]-b[2]),Math.hypot(a[2]-a[3],s[2]-s[3],b[2]-b[3]));for(w/=l=w+_+x,x/=l,i=0;i<4;i++)m[1].push(m[0][i]*(1-w)+m[3][i]*w),m[2].push(m[0][i]*x+m[3][i]*(1-x)),g[1].push(g[0][i]*(1-w)+g[3][i]*w),g[2].push(g[0][i]*x+g[3][i]*(1-x));for(r=0;r<h;r++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],f=e=t=n=0;f<4;f++){for(i=0;i<4;i++)this.curFillColor[i]+=this._lookUpTableBezier[r][f]*m[f][i],this.curStrokeColor[i]+=this._lookUpTableBezier[r][f]*g[f][i];e+=a[f]*this._lookUpTableBezier[r][f],t+=s[f]*this._lookUpTableBezier[r][f],n+=b[f]*this._lookUpTableBezier[r][f]}this.vertex(e,t,n)}this.curFillColor=m[3],this.curStrokeColor=g[3],this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},o.default.RendererGL.prototype.quadraticVertex=function(){if(0===this.immediateMode._quadraticVertex.length)throw Error("vertex() must be used once before calling quadraticVertex()");var e,t,n,r,i,o,a=[],s=[],l=arguments.length;if(0===this._lookUpTableQuadratic.length||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var c=1/this._lutQuadraticDetail,u=c,p=1,d=0;u<1;){if(o=parseFloat(u.toFixed(6)),this._lookUpTableQuadratic[d]=this._quadraticCoefficients(o),p.toFixed(6)===c.toFixed(6)){o=parseFloat(p.toFixed(6))+parseFloat(u.toFixed(6)),++d,this._lookUpTableQuadratic[d]=this._quadraticCoefficients(o);break}u+=c,p-=c,++d}}for(var h=this._lookUpTableQuadratic.length,m=[],f=0;f<3;f++)m.push([]);m[0]=this.immediateMode.geometry.vertexColors.slice(-4),m[2]=this.curFillColor.slice();var g=[];for(f=0;f<3;f++)g.push([]);if(g[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),g[2]=this.curStrokeColor.slice(),4===l){this.isQuadratic=!0,a=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],s=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]];var y=Math.hypot(a[0]-a[1],s[0]-s[1]);for(y/=y+Math.hypot(a[1]-a[2],s[1]-s[2]),i=0;i<4;i++)m[1].push(m[0][i]*(1-y)+m[2][i]*y),g[1].push(g[0][i]*(1-y)+g[2][i]*y);for(r=0;r<h;r++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],f=e=t=0;f<3;f++){for(i=0;i<4;i++)this.curFillColor[i]+=this._lookUpTableQuadratic[r][f]*m[f][i],this.curStrokeColor[i]+=this._lookUpTableQuadratic[r][f]*g[f][i];e+=a[f]*this._lookUpTableQuadratic[r][f],t+=s[f]*this._lookUpTableQuadratic[r][f]}this.vertex(e,t)}this.curFillColor=m[2],this.curStrokeColor=g[2],this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(6===l){this.isQuadratic=!0,a=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],s=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]];var _=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],v=Math.hypot(a[0]-a[1],s[0]-s[1],_[0]-_[1]);for(v/=v+Math.hypot(a[1]-a[2],s[1]-s[2],_[1]-_[2]),i=0;i<4;i++)m[1].push(m[0][i]*(1-v)+m[2][i]*v),g[1].push(g[0][i]*(1-v)+g[2][i]*v);for(r=0;r<h;r++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],f=e=t=n=0;f<3;f++){for(i=0;i<4;i++)this.curFillColor[i]+=this._lookUpTableQuadratic[r][f]*m[f][i],this.curStrokeColor[i]+=this._lookUpTableQuadratic[r][f]*g[f][i];e+=a[f]*this._lookUpTableQuadratic[r][f],t+=s[f]*this._lookUpTableQuadratic[r][f],n+=_[f]*this._lookUpTableQuadratic[r][f]}this.vertex(e,t,n)}this.curFillColor=m[2],this.curStrokeColor=g[2],this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},o.default.RendererGL.prototype.curveVertex=function(){var e,t,n,r,i,o,a=[],s=[],l=arguments.length;if(0===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var c=1/this._lutBezierDetail,u=c,p=1,d=0;u<1;){if(o=parseFloat(u.toFixed(6)),this._lookUpTableBezier[d]=this._bezierCoefficients(o),p.toFixed(6)===c.toFixed(6)){o=parseFloat(p.toFixed(6))+parseFloat(u.toFixed(6)),++d,this._lookUpTableBezier[d]=this._bezierCoefficients(o);break}u+=c,p-=c,++d}}var h=this._lookUpTableBezier.length;if(2===l){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),8===this.immediateMode._curveVertex.length){for(this.isCurve=!0,a=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),s=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),i=0;i<h;i++)t=a[0]*this._lookUpTableBezier[i][0]+a[1]*this._lookUpTableBezier[i][1]+a[2]*this._lookUpTableBezier[i][2]+a[3]*this._lookUpTableBezier[i][3],n=s[0]*this._lookUpTableBezier[i][0]+s[1]*this._lookUpTableBezier[i][1]+s[2]*this._lookUpTableBezier[i][2]+s[3]*this._lookUpTableBezier[i][3],this.vertex(t,n);for(i=0;i<l;i++)this.immediateMode._curveVertex.shift()}}else if(3===l&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),12===this.immediateMode._curveVertex.length)){for(this.isCurve=!0,a=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),s=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),e=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),i=0;i<h;i++)t=a[0]*this._lookUpTableBezier[i][0]+a[1]*this._lookUpTableBezier[i][1]+a[2]*this._lookUpTableBezier[i][2]+a[3]*this._lookUpTableBezier[i][3],n=s[0]*this._lookUpTableBezier[i][0]+s[1]*this._lookUpTableBezier[i][1]+s[2]*this._lookUpTableBezier[i][2]+s[3]*this._lookUpTableBezier[i][3],r=e[0]*this._lookUpTableBezier[i][0]+e[1]*this._lookUpTableBezier[i][1]+e[2]*this._lookUpTableBezier[i][2]+e[3]*this._lookUpTableBezier[i][3],this.vertex(t,n,r);for(i=0;i<l;i++)this.immediateMode._curveVertex.shift()}},o.default.RendererGL.prototype.image=function(e,t,n,r,i,o,s,l,c){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.noStroke(),this._pInst.texture(e),this._pInst.textureMode(a.NORMAL);var u=0,p=(t<=e.width&&(u=t/e.width),1);t+r<=e.width&&(p=(t+r)/e.width),t=0,n<=e.height&&(t=n/e.height),r=1,n+i<=e.height&&(r=(n+i)/e.height),this.beginShape(),this.vertex(o,s,0,u,t),this.vertex(o+l,s,0,p,t),this.vertex(o+l,s+c,0,p,r),this.vertex(o,s+c,0,u,r),this.endShape(a.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(a.REMOVE)};var c=o.default;n.default=c},{"../core/constants":272,"../core/main":283,"./p5.Geometry":335,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.math.sign":178,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],327:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.map"),e("core-js/modules/es.object.assign"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(c=e("../core/main"))&&c.__esModule?c:{default:c},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function s(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,s=function(){return e},e)}function l(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var c=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");(this.renderer=t)._pInst.push(),this.identityMatrix=new o.default.Matrix,t.uModelMatrix=new o.default.Matrix,this.geometry=new o.default.Geometry,this.geometry.gid="_p5_GeometryBuilder_".concat(e.nextGeometryId),e.nextGeometryId++,this.hasTransform=!1}var t;return(t=[{key:"transformVertices",value:function(e){var t=this;return this.hasTransform?e.map((function(e){return t.renderer.uModelMatrix.multiplyPoint(e)})):e}},{key:"transformNormals",value:function(e){var t=this;return this.hasTransform?e.map((function(e){return t.renderer.uNMatrix.multiplyVec3(e)})):e}},{key:"addGeometry",value:function(e){for(var t,n=this,r=(this.hasTransform=!this.renderer.uModelMatrix.mat4.every((function(e,t){return e===n.identityMatrix.mat4[t]})),this.hasTransform&&this.renderer.uNMatrix.inverseTranspose(this.renderer.uModelMatrix),this.geometry.vertices.length),i=((t=this.geometry.vertices).push.apply(t,l(this.transformVertices(e.vertices))),(t=this.geometry.vertexNormals).push.apply(t,l(this.transformNormals(e.vertexNormals))),(t=this.geometry.uvs).push.apply(t,l(e.uvs)),this.renderer._doFill&&(t=this.geometry.faces).push.apply(t,l(e.faces.map((function(e){return e.map((function(e){return e+r}))})))),this.renderer._doStroke&&(t=this.geometry.edges).push.apply(t,l(e.edges.map((function(e){return e.map((function(e){return e+r}))})))),l(e.vertexColors));i.length<4*e.vertices.length;)i.push.apply(i,l(this.renderer.curFillColor));(t=this.geometry.vertexColors).push.apply(t,l(i))}},{key:"addImmediate",value:function(){var e=this.renderer.immediateMode.geometry,t=this.renderer.immediateMode.shapeMode,n=[];if(this.renderer._doFill)if(t===a.TRIANGLE_STRIP||t===a.QUAD_STRIP)for(var r=2;r<e.vertices.length;r++)r%2==0?n.push([r,r-1,r-2]):n.push([r,r-2,r-1]);else if(t===a.TRIANGLE_FAN)for(var i=2;i<e.vertices.length;i++)n.push([0,i-1,i]);else for(var o=0;o<e.vertices.length;o+=3)n.push([o,o+1,o+2]);this.addGeometry(Object.assign({},e,{faces:n}))}},{key:"addRetained",value:function(e){this.addGeometry(e.model)}},{key:"finish",value:function(){return this.renderer._pInst.pop(),this.geometry}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}();c.nextGeometryId=0,n.default=c},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.every":155,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],328:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.math.hypot"),e("core-js/modules/es.math.sign"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.math.hypot"),e("core-js/modules/es.math.sign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=(l=e("../core/main"))&&l.__esModule?l:{default:l},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n,r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var o;Object.prototype.hasOwnProperty.call(e,n)&&((o=i?Object.getOwnPropertyDescriptor(e,n):null)&&(o.get||o.set)?Object.defineProperty(r,n,o):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function a(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,a=function(){return e},e)}function s(e){return(s="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}i.default.prototype.orbitControl=function(e,t,n,r){var o=this,a=(this._assert3d("orbitControl"),i.default._validateParameters("orbitControl",arguments),this._renderer._curCamera);void 0===e&&(e=1),void 0===t&&(t=e),void 0===n&&(n=1),"object"!==s(r)&&(r={}),!0!==this.contextMenuDisabled&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),!0!==this.wheelDefaultDisabled&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var l=r.disableTouchActions;!0===this.touchActionsDisabled||void 0!==l&&!l||(this.canvas.style["touch-action"]="none",this._setProperty("touchActionsDisabled",!0)),r=void 0!==(l=r.freeRotation)&&l;var c,u,p,d=[],h=(this.touches.forEach((function(e){o._renderer.prevTouches.forEach((function(t){e.id===t.id&&(t={x:e.x,y:e.y,px:t.x,py:t.y},d.push(t))}))})),this._renderer.prevTouches=this.touches,l=0,0),m=0,f=0,g=0,y=this.height<this.width?this.height:this.width,_=!1;return 0<d.length?(_=0<d[0].x&&d[0].x<this.width&&0<d[0].y&&d[0].y<this.height,1===d.length?(h=-e*((c=d[0]).x-c.px)/y,m=t*(c.y-c.py)/y):(c=d[0],u=d[1],l=-(Math.hypot(c.x-u.x,c.y-u.y)-Math.hypot(c.px-u.px,c.py-u.py))*n*4e-4,f=.5*(c.x+u.x)-.5*(c.px+u.px),g=.5*(c.y+u.y)-.5*(c.py+u.py)),0<this.touches.length?_&&(this._renderer.executeRotateAndMove=!0,this._renderer.executeZoom=!0):(this._renderer.executeRotateAndMove=!1,this._renderer.executeZoom=!1)):(_=0<this.mouseX&&this.mouseX<this.width&&0<this.mouseY&&this.mouseY<this.height,0!==this._mouseWheelDeltaY?(l=Math.sign(this._mouseWheelDeltaY)*n,l*=.01,this._mouseWheelDeltaY=0,_&&(this._renderer.executeZoom=!0)):this._renderer.executeZoom=!1,this.mouseIsPressed?(this.mouseButton===this.LEFT?(h=-e*this.movedX/y,m=t*this.movedY/y):this.mouseButton===this.RIGHT&&(f=this.movedX,g=this.movedY*a.yScale),_&&(this._renderer.executeRotateAndMove=!0)):this._renderer.executeRotateAndMove=!1),0!==l&&this._renderer.executeZoom&&(this._renderer.zoomVelocity+=l),.001<Math.abs(this._renderer.zoomVelocity)?(r?a._orbitFree(0,0,this._renderer.zoomVelocity):a._orbit(0,0,this._renderer.zoomVelocity),0!==a.projMatrix.mat4[15]&&(a.projMatrix.mat4[0]*=Math.pow(10,-this._renderer.zoomVelocity),a.projMatrix.mat4[5]*=Math.pow(10,-this._renderer.zoomVelocity),this._renderer.uPMatrix.mat4[0]=a.projMatrix.mat4[0],this._renderer.uPMatrix.mat4[5]=a.projMatrix.mat4[5]),this._renderer.zoomVelocity*=.85):this._renderer.zoomVelocity=0,0===h&&0===m||!this._renderer.executeRotateAndMove||this._renderer.rotateVelocity.add(.6*h,.6*m),1e-6<this._renderer.rotateVelocity.magSq()?(r?a._orbitFree(-this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0):a._orbit(this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0),this._renderer.rotateVelocity.mult(.85)):this._renderer.rotateVelocity.set(0,0),0===f&&0===g||!this._renderer.executeRotateAndMove||(c=2*f/this.width,u=2*-g/this.height,this._renderer.moveVelocity.add(.15*c,.15*u)),1e-6<this._renderer.moveVelocity.magSq()?(n=a._getLocalAxes(),e=a.eyeX-a.centerX,t=a.eyeY-a.centerY,y=a.eyeZ-a.centerZ,_=Math.sqrt(e*e+t*t+y*y),l=new i.default.Vector(a.centerX,a.centerY,a.centerZ),l=a.cameraMatrix.multiplyPoint(l),(l=this._renderer.uPMatrix.multiplyAndNormalizePoint(l)).x-=this._renderer.moveVelocity.x,l.y-=this._renderer.moveVelocity.y,m=0===(h=this._renderer.uPMatrix.mat4)[15]?(p=(h[8]+l.x)/h[0]*_,(h[9]+l.y)/h[5]*_):(p=(l.x-h[12])/h[0],(l.y-h[13])/h[5]),a.setPosition(a.eyeX+p*n.x[0]+m*n.y[0],a.eyeY+p*n.x[1]+m*n.y[1],a.eyeZ+p*n.x[2]+m*n.y[2]),this._renderer.moveVelocity.mult(.85)):this._renderer.moveVelocity.set(0,0),this},i.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.default._validateParameters("debugMode",t);for(var r=this._registeredMethods.post.length-1;0<=r;r--)this._registeredMethods.post[r].toString()!==this._grid().toString()&&this._registeredMethods.post[r].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(r,1);t[0]===o.GRID?this.registerMethod("post",this._grid(t[1],t[2],t[3],t[4],t[5])):t[0]===o.AXES?this.registerMethod("post",this._axesIcon(t[1],t[2],t[3],t[4])):(this.registerMethod("post",this._grid(t[0],t[1],t[2],t[3],t[4])),this.registerMethod("post",this._axesIcon(t[5],t[6],t[7],t[8])))},i.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var e=this._registeredMethods.post.length-1;0<=e;e--)this._registeredMethods.post[e].toString()!==this._grid().toString()&&this._registeredMethods.post[e].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(e,1)},i.default.prototype._grid=function(e,t,n,r,i){void 0===e&&(e=this.width/2),void 0===t&&(t=Math.round(e/30)<4?4:Math.round(e/30)),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0);var o=e/t,a=e/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uModelMatrix.reset();for(var e=0;e<=t;e++)this.beginShape(this.LINES),this.vertex(-a+n,r,e*o-a+i),this.vertex(a+n,r,e*o-a+i),this.endShape();for(var s=0;s<=t;s++)this.beginShape(this.LINES),this.vertex(s*o-a+n,r,-a+i),this.vertex(s*o-a+n,r,a+i),this.endShape();this.pop()}},i.default.prototype._axesIcon=function(e,t,n,r){return void 0===e&&(e=40<this.width/20?this.width/20:40),void 0===t&&(t=-this.width/4),void 0===n&&(n=t),void 0===r&&(r=t),function(){this.push(),this._renderer.uModelMatrix.reset(),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(t,n,r),this.vertex(t+e,n,r),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(t,n,r),this.vertex(t,n+e,r),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(t,n,r),this.vertex(t,n,r+e),this.endShape(),this.pop()}};var l=i.default;n.default=l},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.splice":171,"core-js/modules/es.math.hypot":176,"core-js/modules/es.math.sign":178,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],329:[function(e,t,n){"use strict";e("core-js/modules/es.array.filter"),e("core-js/modules/es.array.filter"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e};r.default.prototype.ambientLight=function(e,t,n,i){this._assert3d("ambientLight"),r.default._validateParameters("ambientLight",arguments);var o=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(o._array[0],o._array[1],o._array[2]),this._renderer._enableLighting=!0,this},r.default.prototype.specularColor=function(e,t,n){this._assert3d("specularColor"),r.default._validateParameters("specularColor",arguments);var i=this.color.apply(this,arguments);return this._renderer.specularColors=[i._array[0],i._array[1],i._array[2]],this},r.default.prototype.directionalLight=function(e,t,n,i,o,a){var s,l;return this._assert3d("directionalLight"),r.default._validateParameters("directionalLight",arguments),e=e instanceof r.default.Color?e:this.color(e,t,n),n="number"==typeof(t=arguments[arguments.length-1])?(s=arguments[arguments.length-3],l=arguments[arguments.length-2],arguments[arguments.length-1]):(s=t.x,l=t.y,t.z),t=Math.sqrt(s*s+l*l+n*n),this._renderer.directionalLightDirections.push(s/t,l/t,n/t),this._renderer.directionalLightDiffuseColors.push(e._array[0],e._array[1],e._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},r.default.prototype.pointLight=function(e,t,n,i,o,a){var s,l;return this._assert3d("pointLight"),r.default._validateParameters("pointLight",arguments),e=e instanceof r.default.Color?e:this.color(e,t,n),n="number"==typeof(t=arguments[arguments.length-1])?(s=arguments[arguments.length-3],l=arguments[arguments.length-2],arguments[arguments.length-1]):(s=t.x,l=t.y,t.z),this._renderer.pointLightPositions.push(s,l,n),this._renderer.pointLightDiffuseColors.push(e._array[0],e._array[1],e._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},r.default.prototype.imageLight=function(e){this._renderer.activeImageLight=e,this._renderer._enableLighting=!0},r.default.prototype.panorama=function(e){this.filter(this._renderer._getSphereMapping(e))},r.default.prototype.lights=function(){this._assert3d("lights");var e=this.color("rgb(128,128,128)");return this.ambientLight(e),this.directionalLight(e,0,0,-1),this},r.default.prototype.lightFalloff=function(e,t,n){return this._assert3d("lightFalloff"),r.default._validateParameters("lightFalloff",arguments),e<0&&(e=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),t<0&&(t=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),n<0&&(n=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),0===e&&0===t&&0===n&&(e=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=e,this._renderer.linearAttenuation=t,this._renderer.quadraticAttenuation=n,this},r.default.prototype.spotLight=function(e,t,n,i,o,a,s,l,c,u,p){this._assert3d("spotLight"),r.default._validateParameters("spotLight",arguments);var d,h,m,f=arguments.length;switch(f){case 11:case 10:d=this.color(e,t,n),h=new r.default.Vector(i,o,a),m=new r.default.Vector(s,l,c);break;case 9:e instanceof r.default.Color?(d=e,h=new r.default.Vector(t,n,i),m=new r.default.Vector(o,a,s),u=l,p=c):i instanceof r.default.Vector?(d=this.color(e,t,n),h=i,m=new r.default.Vector(o,a,s),u=l,p=c):s instanceof r.default.Vector?(d=this.color(e,t,n),h=new r.default.Vector(i,o,a),m=s,u=l,p=c):(d=this.color(e,t,n),h=new r.default.Vector(i,o,a),m=new r.default.Vector(s,l,c));break;case 8:m=e instanceof r.default.Color?(d=e,h=new r.default.Vector(t,n,i),new r.default.Vector(o,a,s)):i instanceof r.default.Vector?(d=this.color(e,t,n),h=i,new r.default.Vector(o,a,s)):(d=this.color(e,t,n),h=new r.default.Vector(i,o,a),s),u=l;break;case 7:e instanceof r.default.Color&&t instanceof r.default.Vector?(d=e,h=t,m=new r.default.Vector(n,i,o),u=a,p=s):e instanceof r.default.Color&&o instanceof r.default.Vector?(d=e,h=new r.default.Vector(t,n,i),m=o,u=a,p=s):i instanceof r.default.Vector&&o instanceof r.default.Vector?(d=this.color(e,t,n),h=i,m=o,u=a,p=s):m=e instanceof r.default.Color?(d=e,h=new r.default.Vector(t,n,i),new r.default.Vector(o,a,s)):i instanceof r.default.Vector?(d=this.color(e,t,n),h=i,new r.default.Vector(o,a,s)):(d=this.color(e,t,n),h=new r.default.Vector(i,o,a),s);break;case 6:i instanceof r.default.Vector&&o instanceof r.default.Vector?(d=this.color(e,t,n),h=i,m=o,u=a):e instanceof r.default.Color&&o instanceof r.default.Vector?(d=e,h=new r.default.Vector(t,n,i),m=o,u=a):e instanceof r.default.Color&&t instanceof r.default.Vector&&(d=e,h=t,m=new r.default.Vector(n,i,o),u=a);break;case 5:e instanceof r.default.Color&&t instanceof r.default.Vector&&n instanceof r.default.Vector?(d=e,h=t,m=n,u=i,p=o):i instanceof r.default.Vector&&o instanceof r.default.Vector?(d=this.color(e,t,n),h=i,m=o):e instanceof r.default.Color&&o instanceof r.default.Vector?(d=e,h=new r.default.Vector(t,n,i),m=o):e instanceof r.default.Color&&t instanceof r.default.Vector&&(d=e,h=t,m=new r.default.Vector(n,i,o));break;case 4:d=e,h=t,m=n,u=i;break;case 3:d=e,h=t,m=n;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(f<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(d._array[0],d._array[1],d._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(h.x,h.y,h.z),m.normalize(),this._renderer.spotLightDirections.push(m.x,m.y,m.z),void 0===u&&(u=Math.PI/3),void 0!==p&&p<1?(p=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):void 0===p&&(p=100),u=this._renderer._pInst._toRadians(u),this._renderer.spotLightAngle.push(Math.cos(u)),this._renderer.spotLightConc.push(p),this._renderer._enableLighting=!0,this},r.default.prototype.noLights=function(){this._assert3d("noLights");for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.default._validateParameters("noLights",t),this._renderer.activeImageLight=null,this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this._renderer._useMetalness=0,this},e=r.default,n.default=e},{"../core/main":283,"core-js/modules/es.array.filter":157}],330:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.splice"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.promise"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.set"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.match"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.trim"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("regenerator-runtime/runtime");var i=(d=e("../core/main"))&&d.__esModule?d:{default:d};function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){a(o,r,i,s,l,"next",e)}function l(e){a(o,r,i,s,l,"throw",e)}s(void 0)}))}}function l(e){return(l="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}function c(e,t,n){for(var r=2<arguments.length&&void 0!==n?n:{},o={v:[],vt:[],vn:[]},a={},s=null,l=new Set,c=!1,u=!1,p=0;p<t.length;++p){var d=t[p].trim().split(/\b\s+/);if(0<d.length)if("usemtl"===d[0])s=d[1];else if("v"===d[0]||"vn"===d[0]){var h=new i.default.Vector(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3]));o[d[0]].push(h)}else if("vt"===d[0])h=[parseFloat(d[1]),1-parseFloat(d[2])],o[d[0]].push(h);else if("f"===d[0])for(var m=3;m<d.length;++m){for(var f=[],g=[1,m-1,m],y=0;y<g.length;++y){for(var _,v=d[g[y]],b=v.split("/"),w=0;w<b.length;w++)b[w]=parseInt(b[w])-1;a[v]||(a[v]={}),void 0===a[v][s]?(_=e.vertices.length,e.vertices.push(o.v[b[0]].copy()),e.uvs.push(o.vt[b[1]]?o.vt[b[1]].slice():[0,0]),e.vertexNormals.push(o.vn[b[2]]?o.vn[b[2]].copy():new i.default.Vector),a[v][s]=_,f.push(_),s&&r[s]&&r[s].diffuseColor&&l.add(o.v[b[0]])):f.push(a[v][s])}if(f[0]!==f[1]&&f[0]!==f[2]&&f[1]!==f[2])if(e.faces.push(f),s&&r[s]&&r[s].diffuseColor){c=c=!0;for(var x=r[s].diffuseColor,S=0;S<f.length;S++)e.vertexColors.push(x[0]),e.vertexColors.push(x[1]),e.vertexColors.push(x[2])}else u=!0}}if(0===e.vertexNormals.length&&e.computeNormals(),c===u)throw new Error("Model coloring is inconsistent. Either all vertices should have colors or none should.")}function u(e,t){if(function(e){for(var t=new DataView(e),n=[115,111,108,105,100],r=0;r<5;r++)if(function(e,t,n){for(var r=0,i=e.length;r<i;r++)if(e[r]!==t.getUint8(n+r,!1))return;return 1}(n,t,r))return;return 1}(t)){for(var n,r,o,a,s,l,c,u=e,p=new DataView(t),d=p.getUint32(80,!0),h=!1,m=0;m<70;m++)1129270351===p.getUint32(m,!1)&&82===p.getUint8(m+4)&&61===p.getUint8(m+5)&&(h=!0,a=[],s=p.getUint8(m+6)/255,l=p.getUint8(m+7)/255,c=p.getUint8(m+8)/255);for(var f=0;f<d;f++){for(var g,y=84+50*f,_=p.getFloat32(y,!0),v=p.getFloat32(4+y,!0),b=p.getFloat32(8+y,!0),w=(h&&(o=32768&(g=p.getUint16(48+y,!0))?(n=s,r=l,c):(n=(31&g)/31,r=(g>>5&31)/31,(g>>10&31)/31)),new i.default.Vector(_,v,b)),x=1;x<=3;x++){var S=y+12*x;S=new i.default.Vector(p.getFloat32(S,!0),p.getFloat32(4+S,!0),p.getFloat32(8+S,!0)),u.vertices.push(S),u.vertexNormals.push(w),h&&a.push(n,r,o)}u.faces.push([3*f,3*f+1,3*f+2]),u.uvs.push([0,0],[0,0],[0,0])}}else if(t=new DataView(t),"TextDecoder"in window)for(var T,E,I=e,k=new TextDecoder("utf-8").decode(t).split("\n"),j="",A=[],C=0;C<k.length;++C){for(var O=k[C].trim(),M=O.split(" "),N=0;N<M.length;++N)""===M[N]&&M.splice(N,1);if(0!==M.length)switch(j){case"":if("solid"!==M[0])return console.error(O),void console.error('Invalid state "'.concat(M[0],'", should be "solid"'));j="solid";break;case"solid":if("facet"!==M[0]||"normal"!==M[1])return console.error(O),void console.error('Invalid state "'.concat(M[0],'", should be "facet normal"'));T=new i.default.Vector(parseFloat(M[2]),parseFloat(M[3]),parseFloat(M[4])),I.vertexNormals.push(T,T,T),j="facet normal";break;case"facet normal":if("outer"!==M[0]||"loop"!==M[1])return console.error(O),void console.error('Invalid state "'.concat(M[0],'", should be "outer loop"'));j="vertex";break;case"vertex":if("vertex"===M[0])E=new i.default.Vector(parseFloat(M[1]),parseFloat(M[2]),parseFloat(M[3])),I.vertices.push(E),I.uvs.push([0,0]),A.push(I.vertices.indexOf(E));else{if("endloop"!==M[0])return console.error(O),void console.error('Invalid state "'.concat(M[0],'", should be "vertex" or "endloop"'));I.faces.push(A),A=[],j="endloop"}break;case"endloop":if("endfacet"!==M[0])return console.error(O),void console.error('Invalid state "'.concat(M[0],'", should be "endfacet"'));j="endfacet";break;case"endfacet":if("endsolid"!==M[0]){if("facet"!==M[0]||"normal"!==M[1])return console.error(O),void console.error('Invalid state "'.concat(M[0],'", should be "endsolid" or "facet normal"'));T=new i.default.Vector(parseFloat(M[2]),parseFloat(M[3]),parseFloat(M[4])),I.vertexNormals.push(T,T,T),j="facet normal"}break;default:console.error('Invalid state "'.concat(j,'"'))}}else console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)")}e("./p5.Geometry"),i.default.prototype.loadModel=function(e,t){i.default._validateParameters("loadModel",arguments);var n,r,a=!1,p=!1,d=!1,h=e.slice(-4),m=(t&&"object"===l(t)?(a=t.normalize||!1,n=t.successCallback,r=t.failureCallback,h=t.fileType||h,p=t.flipU||!1,d=t.flipV||!1):"boolean"==typeof t?(a=t,n=arguments[2],r=arguments[3],void 0!==arguments[4]&&(h=arguments[4])):(n="function"==typeof t?t:void 0,r=arguments[2],void 0!==arguments[3]&&(h=arguments[3])),new i.default.Geometry),f=(m.gid="".concat(e,"|").concat(a),this);function g(){return(g=s(regeneratorRuntime.mark((function t(n){var r,i,a,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=[],i=0;i<n.length;i++)(a=n[i].match(/^mtllib (.+)/))&&function(){var t,n=a[1],i=e.split("/");t=1<i.length?(i.pop(),i.join("/")+"/"+n):n,r.push(function(){return y.apply(this,arguments)}(t).then((function(e){return e?(n=f,r=t,new Promise((function(e,t){var i=null,o={};n.loadStrings(r,(function(t){for(var n=0;n<t.length;++n){var r,a=t[n].trim().split(/\s+/);"newmtl"===a[0]?(r=a[1],o[i=r]={}):"Kd"===a[0]?o[i].diffuseColor=[parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3])]:"Ka"===a[0]?o[i].ambientColor=[parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3])]:"Ks"===a[0]?o[i].specularColor=[parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3])]:"map_Kd"===a[0]&&(o[i].texturePath=a[1])}e(o)}),t)}))):(console.warn("MTL file not found or error in parsing; proceeding without materials: ".concat(t)),{});var n,r})).catch((function(e){return console.warn("Error loading MTL file: ".concat(t),e),{}})))}();return t.prev=2,t.next=5,Promise.all(r);case 5:return s=t.sent,s=Object.assign.apply(Object,[{}].concat(o(s))),t.abrupt("return",s);case 10:return t.prev=10,t.t0=t.catch(2),t.abrupt("return",{});case 13:case"end":return t.stop()}}),t,null,[[2,10]])})))).apply(this,arguments)}function y(){return(y=s(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{method:"HEAD"});case 3:return n=e.sent,e.abrupt("return",n.ok);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return h.match(/\.stl$/i)?this.httpDo(e,"GET","arrayBuffer",(function(e){u(m,e),a&&m.normalize(),p&&m.flipU(),d&&m.flipV(),f._decrementPreload(),"function"==typeof n&&n(m)}),r):h.match(/\.obj$/i)?this.loadStrings(e,function(){var e=s(regeneratorRuntime.mark((function e(t){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(){return g.apply(this,arguments)}(t);case 3:o=e.sent,c(m,t,o),e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),r?r(e.t0):i.default._friendlyError("Error during parsing: "+e.t0.message),e.abrupt("return");case 11:return e.prev=11,a&&m.normalize(),p&&m.flipU(),d&&m.flipV(),m._makeTriangleEdges(),f._decrementPreload(),"function"==typeof n&&n(m),e.finish(11);case 19:case"end":return e.stop()}}),e,null,[[0,7,11,19]])})));return function(t){return e.apply(this,arguments)}}(),r):(i.default._friendlyFileLoadError(3,e),r?r():i.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),m},i.default.prototype.model=function(e){this._assert3d("model"),i.default._validateParameters("model",arguments),0<e.vertices.length&&(this._renderer.geometryInHash(e.gid)||(e._edgesToVertices(),this._renderer.createBuffers(e.gid,e)),this._renderer.drawBuffers(e.gid))};var p=0,d=(i.default.prototype.createModel=function(e){var t,n,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:" ",o=2<arguments.length?arguments[2]:void 0,a=(i.default._validateParameters("createModel",arguments),!1),s=!1,d=!1;if((o&&"object"===l(o)?(a=o.normalize||!1,t=o.successCallback,n=o.failureCallback,s=o.flipU||!1,d=o.flipV||!1):n="boolean"==typeof o?(a=o,t=arguments[3],arguments[4]):(t="function"==typeof arguments[2]?arguments[2]:void 0,arguments[3]),o=new i.default.Geometry).gid="".concat(r,"|").concat(a,"|").concat(p++),r.match(/\.stl$/i))try{u(o,(new TextEncoder).encode(e).buffer)}catch(e){return void(n?n(e):i.default._friendlyError("Error during parsing: "+e.message))}else if(r.match(/\.obj$/i))try{c(o,e.split("\n"))}catch(e){return void(n?n(e):i.default._friendlyError("Error during parsing: "+e.message))}else i.default._friendlyFileLoadError(3,e),n?n():i.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.");return a&&o.normalize(),s&&o.flipU(),d&&o.flipV(),o._makeTriangleEdges(),"function"==typeof t&&t(o),o},i.default);n.default=d},{"../core/main":283,"./p5.Geometry":335,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.from":162,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246,"regenerator-runtime/runtime":260}],331:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.join"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(l=e("../core/main"))&&l.__esModule?l:{default:l},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function s(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,s=function(){return e},e)}e("./p5.Texture"),o.default.prototype.loadShader=function(e,t,n,r){function i(){s._decrementPreload(),n&&n(a)}o.default._validateParameters("loadShader",arguments),r=r||console.error;var a=new o.default.Shader,s=this,l=!1,c=!1;return this.loadStrings(e,(function(e){a._vertSrc=e.join("\n"),c=!0,l&&i()}),r),this.loadStrings(t,(function(e){a._fragSrc=e.join("\n"),l=!0,c&&i()}),r),a},o.default.prototype.createShader=function(e,t,n){return o.default._validateParameters("createShader",arguments),new o.default.Shader(this._renderer,e,t,n)},o.default.prototype.createFilterShader=function(e){o.default._validateParameters("createFilterShader",arguments);var t=e.includes("#version 300 es")?"#version 300 es\n    uniform mat4 uModelViewMatrix;\n    uniform mat4 uProjectionMatrix;\n\n    in vec3 aPosition;\n    in vec2 aTexCoord;\n    out vec2 vTexCoord;\n\n    void main() {\n      // transferring texcoords for the frag shader\n      vTexCoord = aTexCoord;\n\n      // copy position with a fourth coordinate for projection (1.0 is normal)\n      vec4 positionVec4 = vec4(aPosition, 1.0);\n\n      // project to 3D space\n      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n    }\n  ":"\n    uniform mat4 uModelViewMatrix;\n    uniform mat4 uProjectionMatrix;\n\n    attribute vec3 aPosition;\n    // texcoords only come from p5 to vertex shader\n    // so pass texcoords on to the fragment shader in a varying variable\n    attribute vec2 aTexCoord;\n    varying vec2 vTexCoord;\n\n    void main() {\n      // transferring texcoords for the frag shader\n      vTexCoord = aTexCoord;\n\n      // copy position with a fourth coordinate for projection (1.0 is normal)\n      vec4 positionVec4 = vec4(aPosition, 1.0);\n\n      // project to 3D space\n      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n    }\n  ";return t=new o.default.Shader(this._renderer,t,e),this._renderer.GL?t.ensureCompiledOnContext(this):t.ensureCompiledOnContext(this._renderer.getFilterGraphicsLayer()),t},o.default.prototype.shader=function(e){return this._assert3d("shader"),o.default._validateParameters("shader",arguments),e.ensureCompiledOnContext(this),e.isStrokeShader()?this._renderer.userStrokeShader=e:(this._renderer.userFillShader=e,this._renderer._useNormalMaterial=!1),e.setDefaultUniforms(),this},o.default.prototype.baseMaterialShader=function(){return this._assert3d("baseMaterialShader"),this._renderer.baseMaterialShader()},o.default.prototype.baseNormalShader=function(){return this._assert3d("baseNormalShader"),this._renderer.baseNormalShader()},o.default.prototype.baseColorShader=function(){return this._assert3d("baseColorShader"),this._renderer.baseColorShader()},o.default.prototype.baseStrokeShader=function(){return this._assert3d("baseStrokeShader"),this._renderer.baseStrokeShader()},o.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},o.default.prototype.texture=function(e){return this._assert3d("texture"),o.default._validateParameters("texture",arguments),e.gifProperties&&e._animateGif(this),this._renderer.drawMode=a.TEXTURE,this._renderer._useNormalMaterial=!1,this._renderer._tex=e,this._renderer._setProperty("_doFill",!0),this},o.default.prototype.textureMode=function(e){e!==a.IMAGE&&e!==a.NORMAL?console.warn("You tried to set ".concat(e," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=e},o.default.prototype.textureWrap=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e,n=(this._renderer.textureWrapX=e,this._renderer.textureWrapY=t,!0),r=!1,i=void 0;try{for(var o,a=this._renderer.textures.values()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)o.value.setWrapMode(e,t)}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}},o.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.default._validateParameters("normalMaterial",t),this._renderer.drawMode=a.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},o.default.prototype.ambientMaterial=function(e,t,n){this._assert3d("ambientMaterial"),o.default._validateParameters("ambientMaterial",arguments);var r=o.default.prototype.color.apply(this,arguments);return this._renderer._hasSetAmbient=!0,this._renderer.curAmbientColor=r._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._setProperty("_doFill",!0),this},o.default.prototype.emissiveMaterial=function(e,t,n,r){this._assert3d("emissiveMaterial"),o.default._validateParameters("emissiveMaterial",arguments);var i=o.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=i._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},o.default.prototype.specularMaterial=function(e,t,n,r){this._assert3d("specularMaterial"),o.default._validateParameters("specularMaterial",arguments);var i=o.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=i._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},o.default.prototype.shininess=function(e){return this._assert3d("shininess"),o.default._validateParameters("shininess",arguments),this._renderer._useShininess=e=e<1?1:e,this},o.default.prototype.metalness=function(e){return this._assert3d("metalness"),e=1-Math.exp(-e/100),this._renderer._useMetalness=e,this},o.default.RendererGL.prototype._applyColorBlend=function(e,t){var n=this.GL,r=this.drawMode===a.TEXTURE;return(t=t||this.userFillShader||this.userStrokeShader||this.userPointShader||r||this.curBlendMode!==a.BLEND||e[e.length-1]<1||this._isErasing)!==this._isBlending&&(t||this.curBlendMode!==a.BLEND&&this.curBlendMode!==a.ADD?n.enable(n.BLEND):n.disable(n.BLEND),n.depthMask(!0),this._isBlending=t),this._applyBlendMode(),e},o.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var e=this.GL;switch(this.curBlendMode){case a.BLEND:e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case a.ADD:e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ONE);break;case a.REMOVE:e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_ALPHA);break;case a.MULTIPLY:e.blendEquation(e.FUNC_ADD),e.blendFunc(e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA);break;case a.SCREEN:e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_COLOR);break;case a.EXCLUSION:e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE_MINUS_DST_COLOR,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE);break;case a.REPLACE:e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO);break;case a.SUBTRACT:e.blendEquationSeparate(e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case a.DARKEST:this.blendExt?(e.blendEquationSeparate(this.blendExt.MIN||this.blendExt.MIN_EXT,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case a.LIGHTEST:this.blendExt?(e.blendEquationSeparate(this.blendExt.MAX||this.blendExt.MAX_EXT,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var l=o.default;n.default=l},{"../core/constants":272,"../core/main":283,"./p5.Texture":343,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],332:[function(e,t,n){"use strict";e("core-js/modules/es.array.slice"),e("core-js/modules/es.math.hypot"),e("core-js/modules/es.string.sub"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.math.hypot"),e("core-js/modules/es.string.sub"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e};r.default.prototype.camera=function(){var e;this._assert3d("camera");for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return r.default._validateParameters("camera",n),(e=this._renderer._curCamera).camera.apply(e,n),this},r.default.prototype.perspective=function(){var e;this._assert3d("perspective");for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return r.default._validateParameters("perspective",n),(e=this._renderer._curCamera).perspective.apply(e,n),this},r.default.prototype.linePerspective=function(e){if(r.default._validateParameters("linePerspective",arguments),!(this._renderer instanceof r.default.RendererGL))throw new Error("linePerspective() must be called in WebGL mode.");if(void 0===e)return this._renderer._curCamera.useLinePerspective;this._renderer._curCamera.useLinePerspective=e},r.default.prototype.ortho=function(){var e;this._assert3d("ortho");for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return r.default._validateParameters("ortho",n),(e=this._renderer._curCamera).ortho.apply(e,n),this},r.default.prototype.frustum=function(){var e;this._assert3d("frustum");for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return r.default._validateParameters("frustum",n),(e=this._renderer._curCamera).frustum.apply(e,n),this},r.default.prototype.createCamera=function(){this._assert3d("createCamera");var e=new r.default.Camera(this._renderer);return e._computeCameraDefaultSettings(),e._setDefaultCamera(),this._renderer._curCamera=e},r.default.Camera=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this._renderer=t,this.cameraType="default",this.useLinePerspective=!0,this.cameraMatrix=new r.default.Matrix,this.projMatrix=new r.default.Matrix,this.yScale=1}var t;return(t=[{key:"perspective",value:function(e,t,n,i){this.cameraType=0<arguments.length?"custom":"default",void 0===e?(e=this.defaultCameraFOV,this.cameraFOV=e):this.cameraFOV=this._renderer._pInst._toRadians(e),void 0===t&&(t=this.defaultAspectRatio),void 0===n&&(n=this.defaultCameraNear),void 0===i&&(i=this.defaultCameraFar),n<=1e-4&&(n=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),i<n&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=t,this.cameraNear=n,this.cameraFar=i,this.projMatrix=r.default.Matrix.identity(),e=1/Math.tan(this.cameraFOV/2);var o=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(e/t,0,0,0,0,-e*this.yScale,0,0,0,0,(i+n)*o,-1,0,0,2*i*n*o,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix)}},{key:"ortho",value:function(e,t,n,i,o,a){var s=this.fbo||this._renderer,l=(void 0===e&&(e=-s.width/2),void 0===t&&(t=+s.width/2),void 0===n&&(n=-s.height/2),void 0===i&&(i=+s.height/2),void 0===o&&(o=0),void 0===a&&(a=Math.max(s.width,s.height)+800),this.cameraNear=o,s=t-e,i-n),c=(this.cameraFar=a)-o,u=2/s,p=2/l*this.yScale,d=-2/c;t=-(t+e)/s,e=-(i+n)/l,s=-(a+o)/c,this.projMatrix=r.default.Matrix.identity(),this.projMatrix.set(u,0,0,0,0,-p,0,0,0,0,d,0,t,e,s,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"frustum",value:function(e,t,n,i,o,a){void 0===e&&(e=.05*-this._renderer.width),void 0===t&&(t=.05*+this._renderer.width),void 0===n&&(n=.05*+this._renderer.height),void 0===i&&(i=.05*-this._renderer.height),void 0===o&&(o=this.defaultCameraNear),void 0===a&&(a=this.defaultCameraFar),this.cameraNear=o;var s=t-e,l=i-n,c=(this.cameraFar=a)-o,u=2*o/s,p=2*o/l*this.yScale,d=-2*a*o/c;t=(t+e)/s,e=(i+n)/l,s=-(a+o)/c,this.projMatrix=r.default.Matrix.identity(),this.projMatrix.set(u,0,0,0,0,-p,0,0,t,e,s,-1,0,0,d,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"_rotateView",value:function(e,t,n,i){var o=this.centerX,a=this.centerY,s=this.centerZ,l=(o-=this.eyeX,a-=this.eyeY,s-=this.eyeZ,r.default.Matrix.identity(this._renderer._pInst));(l.rotate(this._renderer._pInst._toRadians(e),t,n,i),e=[o*l.mat4[0]+a*l.mat4[4]+s*l.mat4[8],o*l.mat4[1]+a*l.mat4[5]+s*l.mat4[9],o*l.mat4[2]+a*l.mat4[6]+s*l.mat4[10]])[0]+=this.eyeX,e[1]+=this.eyeY,e[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,e[0],e[1],e[2],this.upX,this.upY,this.upZ)}},{key:"roll",value:function(e){var t=this._getLocalAxes();e=r.default.Quat.fromAxisAngle(this._renderer._pInst._toRadians(e),t.z[0],t.z[1],t.z[2]).rotateVector(new r.default.Vector(this.upX,this.upY,this.upZ)),this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,e.x,e.y,e.z)}},{key:"pan",value:function(e){var t=this._getLocalAxes();this._rotateView(e,t.y[0],t.y[1],t.y[2])}},{key:"tilt",value:function(e){var t=this._getLocalAxes();this._rotateView(e,t.x[0],t.x[1],t.x[2])}},{key:"lookAt",value:function(e,t,n){this.camera(this.eyeX,this.eyeY,this.eyeZ,e,t,n,this.upX,this.upY,this.upZ)}},{key:"camera",value:function(e,t,n,r,i,o,a,s,l){return void 0===e&&(e=this.defaultEyeX,t=this.defaultEyeY,n=this.defaultEyeZ,r=e,i=t,s=1,l=a=o=0),this.eyeX=e,this.eyeY=t,this.eyeZ=n,void 0!==r&&(this.centerX=r,this.centerY=i,this.centerZ=o),void 0!==a&&(this.upX=a,this.upY=s,this.upZ=l),r=this._getLocalAxes(),this.cameraMatrix.set(r.x[0],r.y[0],r.z[0],0,r.x[1],r.y[1],r.z[1],0,r.x[2],r.y[2],r.z[2],0,0,0,0,1),i=-e,this.cameraMatrix.translate([i,-t,-n]),this._isActive()&&this._renderer.uViewMatrix.set(this.cameraMatrix),this}},{key:"move",value:function(e,t,n){e=[(r=this._getLocalAxes()).x[0]*e,r.x[1]*e,r.x[2]*e],t=[r.y[0]*t,r.y[1]*t,r.y[2]*t];var r=[r.z[0]*n,r.z[1]*n,r.z[2]*n];this.camera(this.eyeX+e[0]+t[0]+r[0],this.eyeY+e[1]+t[1]+r[1],this.eyeZ+e[2]+t[2]+r[2],this.centerX+e[0]+t[0]+r[0],this.centerY+e[1]+t[1]+r[1],this.centerZ+e[2]+t[2]+r[2],this.upX,this.upY,this.upZ)}},{key:"setPosition",value:function(e,t,n){var r=e-this.eyeX,i=t-this.eyeY,o=n-this.eyeZ;this.camera(e,t,n,this.centerX+r,this.centerY+i,this.centerZ+o,this.upX,this.upY,this.upZ)}},{key:"set",value:function(e){for(var t=0,n=["eyeX","eyeY","eyeZ","centerX","centerY","centerZ","upX","upY","upZ","cameraFOV","aspectRatio","cameraNear","cameraFar","cameraType","yScale","useLinePerspective"];t<n.length;t++){var r=n[t];this[r]=e[r]}this.cameraMatrix=e.cameraMatrix.copy(),this.projMatrix=e.projMatrix.copy(),this._isActive()&&(this._renderer.uModelMatrix.reset(),this._renderer.uViewMatrix.set(this.cameraMatrix),this._renderer.uPMatrix.set(this.projMatrix))}},{key:"slerp",value:function(e,t,n){var i,o,a,s,l,c,u,p,d,h,m,f,g,y,_,v,b,w;0===n?this.set(e):1===n?this.set(t):(0!==this.projMatrix.mat4[15]&&(this.projMatrix.mat4[0]=e.projMatrix.mat4[0]*Math.pow(t.projMatrix.mat4[0]/e.projMatrix.mat4[0],n),this.projMatrix.mat4[5]=e.projMatrix.mat4[5]*Math.pow(t.projMatrix.mat4[5]/e.projMatrix.mat4[5],n),this._isActive()&&(this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())),s=new r.default.Vector(e.eyeX,e.eyeY,e.eyeZ),l=new r.default.Vector(t.eyeX,t.eyeY,t.eyeZ),v=new r.default.Vector(e.centerX,e.centerY,e.centerZ),w=new r.default.Vector(t.centerX,t.centerY,t.centerZ),a=r.default.Vector.dist(s,v),i=r.default.Vector.dist(l,w),i=a*Math.pow(i/a,n),a=r.default.Vector.sub(s,l),o=1,1e-6<(b=(y=s.copy().sub(l).sub(v).add(w)).magSq())&&(o=r.default.Vector.dot(a,y)/b,o=Math.max(0,Math.min(o,1))),a=r.default.Vector.lerp(r.default.Vector.lerp(s,v,o),r.default.Vector.lerp(l,w,o),n),y=e.cameraMatrix.createSubMatrix3x3(),b=t.cameraMatrix.createSubMatrix3x3(),s=y.row(2),v=b.row(2),l=y.row(1),w=b.row(1),e=new r.default.Vector,t=new r.default.Vector,c=new r.default.Vector,u=new r.default.Vector,1-(p=.5*((y=(b=b.mult3x3(y.copy().transpose3x3())).diagonal())[0]+y[1]+y[2]-1))<1e-7?(e.set(r.default.Vector.lerp(s,v,n)).normalize(),c.set(e).mult(o*i).add(a),u.set(e).mult((o-1)*i).add(a),t.set(r.default.Vector.lerp(l,w,n)).normalize()):(v=1/(1-p),w=Math.max(y[0],y[1],y[2]),f=b.mat3[1]+b.mat3[3],g=b.mat3[2]+b.mat3[6],_=b.mat3[5]+b.mat3[7],w=w===y[0]?(h=.5*f*(v/=d=Math.sqrt((y[0]-p)*v)),m=.5*g*v,.5*(b.mat3[7]-b.mat3[5])/d):w===y[1]?(m=.5*_*(v/=h=Math.sqrt((y[1]-p)*v)),d=.5*f*v,.5*(b.mat3[2]-b.mat3[6])/h):(d=.5*g*(v/=m=Math.sqrt((y[2]-p)*v)),h=.5*_*v,.5*(b.mat3[3]-b.mat3[1])/m),f=n*Math.atan2(w,p),g=Math.cos(f),y=Math.sin(f),(w=new r.default.Matrix("mat3",[g+(_=1-g)*d*d,_*(v=d*h)+y*m,_*(b=m*d)-y*h,_*v-y*m,g+_*h*h,_*(n=h*m)+y*d,_*b+y*h,_*n-y*d,g+_*m*m])).multiplyVec3(s,e),c.set(e).mult(o*i).add(a),u.set(e).mult((o-1)*i).add(a),w.multiplyVec3(l,t)),this.camera(c.x,c.y,c.z,u.x,u.y,u.z,t.x,t.y,t.z))}},{key:"_computeCameraDefaultSettings",value:function(){this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=800,this.defaultCameraFOV=2*Math.atan(this._renderer.height/2/this.defaultEyeZ),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ}},{key:"_setDefaultCamera",value:function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"}},{key:"_resize",value:function(){"default"===this.cameraType&&(this._computeCameraDefaultSettings(),this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.perspective())}},{key:"copy",value:function(){var e=new r.default.Camera(this._renderer);return e.cameraFOV=this.cameraFOV,e.aspectRatio=this.aspectRatio,e.eyeX=this.eyeX,e.eyeY=this.eyeY,e.eyeZ=this.eyeZ,e.centerX=this.centerX,e.centerY=this.centerY,e.centerZ=this.centerZ,e.upX=this.upX,e.upY=this.upY,e.upZ=this.upZ,e.cameraNear=this.cameraNear,e.cameraFar=this.cameraFar,e.cameraType=this.cameraType,e.useLinePerspective=this.useLinePerspective,e.cameraMatrix=this.cameraMatrix.copy(),e.projMatrix=this.projMatrix.copy(),e.yScale=this.yScale,e}},{key:"_getLocalAxes",value:function(){var e,t=this.eyeX-this.centerX,n=this.eyeY-this.centerY,r=this.eyeZ-this.centerZ,i=(0!==(i=Math.sqrt(t*t+n*n+r*r))&&(t/=i,n/=i,r/=i),this.upX),o=(l=this.upY)*r-(c=this.upZ)*n,a=-i*r+c*t,s=i*n-l*t,l=(i=n*s-r*a,-t*s+r*o),c=t*a-n*o;return 0!==(0!==(e=Math.sqrt(o*o+a*a+s*s))&&(o/=e,a/=e,s/=e),e=Math.sqrt(i*i+l*l+c*c))&&(i/=e,l/=e,c/=e),{x:[o,a,s],y:[i,l,c],z:[t,n,r]}}},{key:"_orbit",value:function(e,t,n){var i=this.eyeX-this.centerX,o=this.eyeY-this.centerY,a=this.eyeZ-this.centerZ,s=Math.hypot(i,o,a),l=(i=new r.default.Vector(i,o,a).normalize(),o=new r.default.Vector(this.upX,this.upY,this.upZ).normalize(),a=r.default.Vector.cross(o,i).normalize(),r.default.Vector.cross(a,o));(s=(s*=Math.pow(10,n))<this.cameraNear?this.cameraNear:s)>this.cameraFar&&(s=this.cameraFar),n=Math.acos(Math.max(-1,Math.min(1,r.default.Vector.dot(i,o))))+t,t=e,(n<=0||n>=Math.PI)&&(this.upX*=-1,this.upY*=-1,this.upZ*=-1),o.mult(Math.cos(n)),l.mult(Math.cos(t)*Math.sin(n)),a.mult(Math.sin(t)*Math.sin(n)),i.set(o).add(l).add(a),this.eyeX=s*i.x+this.centerX,this.eyeY=s*i.y+this.centerY,this.eyeZ=s*i.z+this.centerZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,this.upX,this.upY,this.upZ)}},{key:"_orbitFree",value:function(e,t,n){var i=this.eyeX-this.centerX,o=this.eyeY-this.centerY,a=this.eyeZ-this.centerZ,s=Math.hypot(i,o,a),l=(i=new r.default.Vector(i,o,a).normalize(),o=new r.default.Vector(this.upX,this.upY,this.upZ),a=r.default.Vector.cross(o,i).normalize(),r.default.Vector.cross(i,a)),c=Math.atan2(t,e),u=(l.mult(Math.sin(c)),a.mult(Math.cos(c)).add(l),c=Math.sqrt(e*e+t*t),l=r.default.Vector.cross(i,a),(s=(s*=Math.pow(10,n))<this.cameraNear?this.cameraNear:s)>this.cameraFar&&(s=this.cameraFar),e=Math.cos(c),t=Math.sin(c),(n=o.dot(i))*e+(c=o.dot(a))*t);n=-n*t+c*e,c=o.dot(l),o.x=u*i.x+n*a.x+c*l.x,o.y=u*i.y+n*a.y+c*l.y,o.z=u*i.z+n*a.z+c*l.z,a.mult(-t),i.mult(e).add(a).mult(s),this.camera(i.x+this.centerX,i.y+this.centerY,i.z+this.centerZ,this.centerX,this.centerY,this.centerZ,o.x,o.y,o.z)}},{key:"_isActive",value:function(){return this===this._renderer._curCamera}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}(),r.default.prototype.setCamera=function(e){this._renderer._curCamera=e,this._renderer.uPMatrix.set(e.projMatrix),this._renderer.uViewMatrix.set(e.cameraMatrix)},e=r.default.Camera,n.default=e},{"../core/main":283,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.string.sub":208}],333:[function(e,t,n){"use strict";e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.math.log2"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.math.log2"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,(e=(e=e("../core/main"))&&e.__esModule?e:{default:e}).default.DataArray=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:128;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.length=0,this.data=new Float32Array(t),this.initialLength=t}var t;return(t=[{key:"dataArray",value:function(){return this.subArray(0,this.length)}},{key:"clear",value:function(){this.length=0}},{key:"rescale",value:function(){var e;this.length<this.data.length/2&&(e=1<<Math.ceil(Math.log2(this.length)),(e=new Float32Array(e)).set(this.data.subarray(0,this.length),0),this.data=e)}},{key:"reset",value:function(){this.clear(),this.data=new Float32Array(this.initialLength)}},{key:"push",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.ensureLength(this.length+t.length),this.data.set(t,this.length),this.length+=t.length}},{key:"slice",value:function(e,t){return this.data.slice(e,Math.min(t,this.length))}},{key:"subArray",value:function(e,t){return this.data.subarray(e,Math.min(t,this.length))}},{key:"ensureLength",value:function(e){for(;this.data.length<e;){var t=new Float32Array(2*this.data.length);t.set(this.data,0),this.data=t}}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}(),e=e.default.DataArray,n.default=e},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.log2":177,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239}],334:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.reflect.get"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint8-clamped-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(b=e("../core/main"))&&b.__esModule?b:{default:b},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants")),s=e("./p5.Texture"),l=e("./p5.RendererGL");function c(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,c=function(){return e},e)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){t&&h(e.prototype,t),n&&h(e,n)}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){if(e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t),e)return(e=Object.getOwnPropertyDescriptor(e,t)).get?e.get.call(n):e.value})(e,t,n||e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e);var n=function(e){return function(){var t,n=y(e);if(t=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),1}catch(e){}}}()?(t=y(this).constructor,Reflect.construct(n,arguments,t)):n.apply(this,arguments),n=this,!t||"object"!==i(t)&&"function"!=typeof t){if(void 0!==n)return n;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}}(r);function r(e){var t;return d(this,r),(t=n.call(this,e.target._renderer)).fbo=e,t.yScale=-1,t}return m(r,[{key:"_computeCameraDefaultSettings",value:function(){f(y(r.prototype),"_computeCameraDefaultSettings",this).call(this),this.defaultAspectRatio=this.fbo.width/this.fbo.height,this.defaultCameraFOV=2*Math.atan(this.fbo.height/2/this.defaultEyeZ)}}]),r}(o.default.Camera),v=(o.default.FramebufferCamera=_,function(){function e(t,n){d(this,e),this.framebuffer=t,this.property=n}return m(e,[{key:"rawTexture",value:function(){return this.framebuffer[this.property]}},{key:"width",get:function(){return this.framebuffer.width*this.framebuffer.density}},{key:"height",get:function(){return this.framebuffer.height*this.framebuffer.density}}]),e}()),b=(o.default.FramebufferTexture=v,function(){function e(t){var n=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=(d(this,e),this.target=t,this.target._renderer.framebuffers.add(this),this._isClipApplied=!1,this.pixels=[],this.format=r.format||a.UNSIGNED_BYTE,this.channels=r.channels||(t._renderer._pInst._glAttributes.alpha?a.RGBA:a.RGB),this.useDepth=void 0===r.depth||r.depth,this.depthFormat=r.depthFormat||a.FLOAT,this.textureFiltering=r.textureFiltering||a.LINEAR,void 0===r.antialias?this.antialiasSamples=t._renderer._pInst._glAttributes.antialias?2:0:"number"==typeof r.antialias?this.antialiasSamples=r.antialias:this.antialiasSamples=r.antialias?2:0,this.antialias=0<this.antialiasSamples,this.antialias&&t.webglVersion!==a.WEBGL2&&(console.warn("Antialiasing is unsupported in a WebGL 1 context"),this.antialias=!1),this.density=r.density||t.pixelDensity(),t._renderer.GL);if(this.gl=i,r.width&&r.height?(o=t._renderer._adjustDimensions(r.width,r.height),this.width=o.adjustedWidth,this.height=o.adjustedHeight,this._autoSized=!1):(void 0===r.width!=(void 0===r.height)&&console.warn("Please supply both width and height for a framebuffer to give it a size. Only one was given, so the framebuffer will match the size of its canvas."),this.width=t.width,this.height=t.height,this._autoSized=!0),this._checkIfFormatsAvailable(),r.stencil&&!this.useDepth&&console.warn("A stencil buffer can only be used if also using depth. Since the framebuffer has no depth buffer, the stencil buffer will be ignored."),this.useStencil=this.useDepth&&(void 0===r.stencil||r.stencil),this.framebuffer=i.createFramebuffer(),!this.framebuffer)throw new Error("Unable to create a framebuffer");if(this.antialias&&(this.aaFramebuffer=i.createFramebuffer(),!this.aaFramebuffer))throw new Error("Unable to create a framebuffer for antialiasing");this._recreateTextures();var o=this.target._renderer._curCamera;this.defaultCamera=this.createCamera(),this.filterCamera=this.createCamera(),this.target._renderer._curCamera=o,this.draw((function(){return n.target.clear()}))}return m(e,[{key:"resize",value:function(e,t){this._autoSized=!1;var n=this.target._renderer._adjustDimensions(e,t);e=n.adjustedWidth,t=n.adjustedHeight,this.width=e,this.height=t,this._handleResize()}},{key:"pixelDensity",value:function(e){if(!e)return this.density;this._autoSized=!1,this.density=e,this._handleResize()}},{key:"autoSized",value:function(e){if(void 0===e)return this._autoSized;this._autoSized=e,this._handleResize()}},{key:"_checkIfFormatsAvailable",value:function(){var e=this.gl;(this.useDepth&&this.target.webglVersion===a.WEBGL&&!e.getExtension("WEBGL_depth_texture")&&(console.warn("Unable to create depth textures in this environment. Falling back to a framebuffer without depth."),this.useDepth=!1),this.useDepth&&this.target.webglVersion===a.WEBGL&&this.depthFormat===a.FLOAT&&(console.warn("FLOAT depth format is unavailable in WebGL 1. Defaulting to UNSIGNED_INT."),this.depthFormat=a.UNSIGNED_INT),[a.UNSIGNED_BYTE,a.FLOAT,a.HALF_FLOAT].includes(this.format)||(console.warn("Unknown Framebuffer format. Please use UNSIGNED_BYTE, FLOAT, or HALF_FLOAT. Defaulting to UNSIGNED_BYTE."),this.format=a.UNSIGNED_BYTE),this.useDepth&&![a.UNSIGNED_INT,a.FLOAT].includes(this.depthFormat)&&(console.warn("Unknown Framebuffer depth format. Please use UNSIGNED_INT or FLOAT. Defaulting to FLOAT."),this.depthFormat=a.FLOAT),e=(0,s.checkWebGLCapabilities)(this.target._renderer)).float||this.format!==a.FLOAT||(console.warn("This environment does not support FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=a.UNSIGNED_BYTE),this.useDepth&&!e.float&&this.depthFormat===a.FLOAT&&(console.warn("This environment does not support FLOAT depth textures. Falling back to UNSIGNED_INT."),this.depthFormat=a.UNSIGNED_INT),e.halfFloat||this.format!==a.HALF_FLOAT||(console.warn("This environment does not support HALF_FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=a.UNSIGNED_BYTE),this.channels===a.RGB&&[a.FLOAT,a.HALF_FLOAT].includes(this.format)&&(console.warn("FLOAT and HALF_FLOAT formats do not work cross-platform with only RGB channels. Falling back to RGBA."),this.channels=a.RGBA)}},{key:"_recreateTextures",value:function(){var e=this.gl,t=(this._updateSize(),e.getParameter(e.TEXTURE_BINDING_2D)),n=e.getParameter(e.FRAMEBUFFER_BINDING);if(!(i=e.createTexture()))throw new Error("Unable to create color texture");e.bindTexture(e.TEXTURE_2D,i);var r=this._glColorFormat();if(e.texImage2D(e.TEXTURE_2D,0,r.internalFormat,this.width*this.density,this.height*this.density,0,r.format,r.type,null),this.colorTexture=i,e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0),this.useDepth){var i;if(!(i=e.createTexture()))throw new Error("Unable to create depth texture");var s=this._glDepthFormat();e.bindTexture(e.TEXTURE_2D,i),e.texImage2D(e.TEXTURE_2D,0,s.internalFormat,this.width*this.density,this.height*this.density,0,s.format,s.type,null),e.framebufferTexture2D(e.FRAMEBUFFER,this.useStencil?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,e.TEXTURE_2D,i,0),this.depthTexture=i}this.antialias&&(this.colorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.colorRenderbuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,e.getParameter(e.MAX_SAMPLES))),r.internalFormat,this.width*this.density,this.height*this.density),this.useDepth&&(s=this._glDepthFormat(),this.depthRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.depthRenderbuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,e.getParameter(e.MAX_SAMPLES))),s.internalFormat,this.width*this.density,this.height*this.density)),e.bindFramebuffer(e.FRAMEBUFFER,this.aaFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,this.colorRenderbuffer),this.useDepth&&e.framebufferRenderbuffer(e.FRAMEBUFFER,this.useStencil?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,e.RENDERBUFFER,this.depthRenderbuffer)),this.useDepth&&(this.depth=new v(this,"depthTexture"),i=e.NEAREST,this.depthP5Texture=new o.default.Texture(this.target._renderer,this.depth,{minFilter:i,magFilter:i}),this.target._renderer.textures.set(this.depth,this.depthP5Texture)),this.color=new v(this,"colorTexture"),r=this.textureFiltering===a.LINEAR?e.LINEAR:e.NEAREST,this.colorP5Texture=new o.default.Texture(this.target._renderer,this.color,{minFilter:r,magFilter:r}),this.target._renderer.textures.set(this.color,this.colorP5Texture),e.bindTexture(e.TEXTURE_2D,t),e.bindFramebuffer(e.FRAMEBUFFER,n)}},{key:"_glColorFormat",value:function(){var e,t,n=this.gl,r=this.format===a.FLOAT?n.FLOAT:this.format===a.HALF_FLOAT?this.target.webglVersion===a.WEBGL2?n.HALF_FLOAT:n.getExtension("OES_texture_half_float").HALF_FLOAT_OES:n.UNSIGNED_BYTE,i=this.channels===a.RGBA?n.RGBA:n.RGB;return{internalFormat:this.target.webglVersion===a.WEBGL2?(p(t={},n.FLOAT,p({},n.RGBA,n.RGBA32F)),p(t,n.HALF_FLOAT,p({},n.RGBA,n.RGBA16F)),p(t,n.UNSIGNED_BYTE,(p(e={},n.RGBA,n.RGBA8),p(e,n.RGB,n.RGB8),e)),t[r][i]):this.format===a.HALF_FLOAT?n.RGBA:i,format:i,type:r}}},{key:"_glDepthFormat",value:function(){var e=this.gl,t=this.useStencil?this.depthFormat===a.FLOAT?e.FLOAT_32_UNSIGNED_INT_24_8_REV:this.target.webglVersion===a.WEBGL2?e.UNSIGNED_INT_24_8:e.getExtension("WEBGL_depth_texture").UNSIGNED_INT_24_8_WEBGL:this.depthFormat===a.FLOAT?e.FLOAT:e.UNSIGNED_INT,n=this.useStencil?e.DEPTH_STENCIL:e.DEPTH_COMPONENT;return{internalFormat:e=this.useStencil?this.depthFormat===a.FLOAT?e.DEPTH32F_STENCIL8:this.target.webglVersion===a.WEBGL2?e.DEPTH24_STENCIL8:e.DEPTH_STENCIL:this.target.webglVersion===a.WEBGL2?this.depthFormat===a.FLOAT?e.DEPTH_COMPONENT32F:e.DEPTH_COMPONENT24:e.DEPTH_COMPONENT,format:n,type:t}}},{key:"_updateSize",value:function(){this._autoSized&&(this.width=this.target.width,this.height=this.target.height,this.density=this.target.pixelDensity())}},{key:"_canvasSizeChanged",value:function(){this._autoSized&&this._handleResize()}},{key:"_handleResize",value:function(){var e=this.color,t=this.depth,n=this.colorRenderbuffer,r=this.depthRenderbuffer;this._deleteTexture(e),t&&this._deleteTexture(t),e=this.gl,n&&e.deleteRenderbuffer(n),r&&e.deleteRenderbuffer(r),this._recreateTextures(),this.defaultCamera._resize()}},{key:"createCamera",value:function(){var e=new _(this);return e._computeCameraDefaultSettings(),e._setDefaultCamera(),this.target._renderer._curCamera=e}},{key:"_deleteTexture",value:function(e){this.gl.deleteTexture(e.rawTexture()),this.target._renderer.textures.delete(e)}},{key:"remove",value:function(){var e=this.gl;this._deleteTexture(this.color),this.depth&&this._deleteTexture(this.depth),e.deleteFramebuffer(this.framebuffer),this.aaFramebuffer&&e.deleteFramebuffer(this.aaFramebuffer),this.depthRenderbuffer&&e.deleteRenderbuffer(this.depthRenderbuffer),this.colorRenderbuffer&&e.deleteRenderbuffer(this.colorRenderbuffer),this.target._renderer.framebuffers.delete(this)}},{key:"begin",value:function(){this.prevFramebuffer=this.target._renderer.activeFramebuffer(),this.prevFramebuffer&&this.prevFramebuffer._beforeEnd(),this.target._renderer.activeFramebuffers.push(this),this._beforeBegin(),this.target.push(),this.target.setCamera(this.defaultCamera),this.target.resetMatrix(),this.target._renderer.uViewMatrix.set(this.target._renderer._curCamera.cameraMatrix),this.target._renderer.uModelMatrix.reset(),this.target._renderer._applyStencilTestIfClipping()}},{key:"_framebufferToBind",value:function(){return this.antialias?this.aaFramebuffer:this.framebuffer}},{key:"_beforeBegin",value:function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this._framebufferToBind()),this.target._renderer.viewport(this.width*this.density,this.height*this.density)}},{key:"_beforeEnd",value:function(){if(this.antialias){var e=this.gl,t=(e.bindFramebuffer(e.READ_FRAMEBUFFER,this.aaFramebuffer),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,this.framebuffer),[[e.COLOR_BUFFER_BIT,this.colorP5Texture.glMagFilter]]);this.useDepth&&t.push([e.DEPTH_BUFFER_BIT,this.depthP5Texture.glMagFilter]);for(var n=0,r=t;n<r.length;n++){var i=(o=u(r[n],2))[0],o=o[1];e.blitFramebuffer(0,0,this.width*this.density,this.height*this.density,0,0,this.width*this.density,this.height*this.density,i,o)}}}},{key:"end",value:function(){var e=this.gl;if(this.target.pop(),this.target._renderer.activeFramebuffers.pop()!==this)throw new Error("It looks like you've called end() while another Framebuffer is active.");this._beforeEnd(),this.prevFramebuffer?this.prevFramebuffer._beforeBegin():(e.bindFramebuffer(e.FRAMEBUFFER,null),this.target._renderer.viewport(this.target._renderer._origViewport.width,this.target._renderer._origViewport.height)),this.target._renderer._applyStencilTestIfClipping()}},{key:"draw",value:function(e){this.begin(),e(),this.end()}},{key:"loadPixels",value:function(){var e=this.gl,t=this.target._renderer.activeFramebuffer(),n=(e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer),this._glColorFormat());this.pixels=(0,l.readPixelsWebGL)(this.pixels,e,this.framebuffer,0,0,this.width*this.density,this.height*this.density,n.format,n.type),t?e.bindFramebuffer(e.FRAMEBUFFER,t._framebufferToBind()):e.bindFramebuffer(e.FRAMEBUFFER,null)}},{key:"get",value:function(e,t,n,r){o.default._validateParameters("p5.Framebuffer.get",arguments);var i=this._glColorFormat();if(void 0===e&&void 0===t)t=e=0,n=this.width,r=this.height;else if(void 0===n&&void 0===r)return(e<0||t<0||e>=this.width||t>=this.height)&&(console.warn("The x and y values passed to p5.Framebuffer.get are outside of its range and will be clamped."),e=this.target.constrain(e,0,this.width-1),t=this.target.constrain(t,0,this.height-1)),(0,l.readPixelWebGL)(this.gl,this.framebuffer,e*this.density,t*this.density,i.format,i.type);e=this.target.constrain(e,0,this.width-1),t=this.target.constrain(t,0,this.height-1),n=this.target.constrain(n,1,this.width-e),r=this.target.constrain(r,1,this.height-t);for(var a=(0,l.readPixelsWebGL)(void 0,this.gl,this.framebuffer,e*this.density,t*this.density,n*this.density,r*this.density,i.format,i.type),s=new Uint8ClampedArray(n*r*this.density*this.density*4),c=(s.fill(255),i.type===this.gl.RGB?3:4),u=0;u<r*this.density;u++)for(var p=0;p<n*this.density;p++)for(var d=0;d<4;d++){var h,m=4*(u*n*this.density+p)+d;d<c&&(h=4==c?m:(u*n*this.density+p)*c+d,s[m]=a[h])}return(e=new o.default.Image(n*this.density,r*this.density)).imageData=e.canvas.getContext("2d").createImageData(e.width,e.height),e.imageData.data.set(s),e.pixels=e.imageData.data,e.updatePixels(),1!==this.density&&e.resize(n,r),e}},{key:"updatePixels",value:function(){var e=this.gl,t=(this.colorP5Texture.bindTexture(),this._glColorFormat()),n=t.format===e.RGBA?4:3,r=(n=this.width*this.height*this.density*this.density*n,t.type===e.UNSIGNED_BYTE?Uint8Array:Float32Array);if(!(this.pixels instanceof r)||this.pixels.length!==n)throw new Error("The pixels array has not been set correctly. Please call loadPixels() before updatePixels().");e.texImage2D(e.TEXTURE_2D,0,t.internalFormat,this.width*this.density,this.height*this.density,0,t.format,t.type,this.pixels),this.colorP5Texture.unbindTexture(),r=this.target._renderer.activeFramebuffer(),this.antialias?(this.begin(),this.target.push(),this.target.imageMode(this.target.CENTER),this.target.resetMatrix(),this.target.noStroke(),this.target.clear(),this.target.image(this,0,0),this.target.pop(),this.useDepth&&(e.clearDepth(1),e.clear(e.DEPTH_BUFFER_BIT)),this.end()):(e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer),this.useDepth&&(e.clearDepth(1),e.clear(e.DEPTH_BUFFER_BIT)),r?e.bindFramebuffer(e.FRAMEBUFFER,r._framebufferToBind()):e.bindFramebuffer(e.FRAMEBUFFER,null))}}]),e}());e=o.default.Framebuffer=b,n.default=e},{"../core/constants":272,"../core/main":283,"./p5.RendererGL":341,"./p5.Texture":343,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.typed-array.uint8-clamped-array":243,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],335:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.flat"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.unscopables.flat"),e("core-js/modules/es.array-buffer.constructor"),e("core-js/modules/es.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.entries"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.sub"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.flat"),e("core-js/modules/es.array.for-each"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.last-index-of"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.unscopables.flat"),e("core-js/modules/es.array-buffer.constructor"),e("core-js/modules/es.map"),e("core-js/modules/es.number.constructor"),e("core-js/modules/es.object.entries"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.sub"),e("core-js/modules/web.dom-collections.for-each"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(u=e("../core/main"))&&u.__esModule?u:{default:u},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function s(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,s=function(){return e},e)}function l(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}o.default.Geometry=function(){function e(t,n,r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.vertices=[],this.boundingBoxCache=null,this.lineVertices=new o.default.DataArray,this.lineTangentsIn=new o.default.DataArray,this.lineTangentsOut=new o.default.DataArray,this.lineSides=new o.default.DataArray,this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.vertexStrokeColors=[],this.lineVertexColors=new o.default.DataArray,this.detailX=void 0!==t?t:1,this.detailY=void 0!==n?n:1,this.dirtyFlags={},this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,r instanceof Function&&r.call(this)}var t;return(t=[{key:"calculateBoundingBox",value:function(){if(!this.boundingBoxCache){for(var e=new o.default.Vector(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),t=new o.default.Vector(Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE),n=0;n<this.vertices.length;n++){var r=this.vertices[n];e.x=Math.min(e.x,r.x),e.y=Math.min(e.y,r.y),e.z=Math.min(e.z,r.z),t.x=Math.max(t.x,r.x),t.y=Math.max(t.y,r.y),t.z=Math.max(t.z,r.z)}var i=new o.default.Vector(t.x-e.x,t.y-e.y,t.z-e.z),a=new o.default.Vector((e.x+t.x)/2,(e.y+t.y)/2,(e.z+t.z)/2);this.boundingBoxCache={min:e,max:t,size:i,offset:a}}return this.boundingBoxCache}},{key:"reset",value:function(){this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear(),this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexStrokeColors.length=0,this.lineVertexColors.clear(),this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}}},{key:"hasFillTransparency",value:function(){if(void 0===this._hasFillTransparency){this._hasFillTransparency=!1;for(var e=0;e<this.vertexColors.length;e+=4)if(this.vertexColors[e+3]<1){this._hasFillTransparency=!0;break}}return this._hasFillTransparency}},{key:"hasStrokeTransparency",value:function(){if(void 0===this._hasStrokeTransparency){this._hasStrokeTransparency=!1;for(var e=0;e<this.lineVertexColors.length;e+=4)if(this.lineVertexColors[e+3]<1){this._hasStrokeTransparency=!0;break}}return this._hasStrokeTransparency}},{key:"clearColors",value:function(){return this.vertexColors=[],this}},{key:"saveObj",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"model.obj",n="";if(this.vertices.forEach((function(e){n+="v ".concat(e.x," ").concat(e.y," ").concat(e.z,"\n")})),this.uvs&&0<this.uvs.length)for(var r=0;r<this.uvs.length;r+=2)n+="vt ".concat(this.uvs[r]," ").concat(this.uvs[r+1],"\n");this.vertexNormals&&0<this.vertexNormals.length&&this.vertexNormals.forEach((function(e){n+="vn ".concat(e.x," ").concat(e.y," ").concat(e.z,"\n")})),this.faces.forEach((function(t){var r="f";t.forEach((function(t){r=r+" "+(t+1),(0<e.vertexNormals.length||0<e.uvs.length)&&(r+="/",0<e.uvs.length&&(r+=t+1),r+="/",0<e.vertexNormals.length&&(r+=t+1))})),n+=r+"\n"}));var i=new Blob([n],{type:"text/plain"});o.default.prototype.downloadFile(i,t,"obj")}},{key:"saveStl",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"model.stl",t=void 0!==(t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).binary)&&t,n=e.substring(0,e.lastIndexOf(".")),r=[],i=!0,a=!1,s=void 0;try{for(var l,u=this.faces[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var p=l.value,d=o.default.Vector.sub(this.vertices[p[1]],this.vertices[p[0]]),h=o.default.Vector.sub(this.vertices[p[2]],this.vertices[p[0]]),m=d.y*h.z-d.z*h.y,f=d.z*h.x-d.x*h.z,g=d.x*h.y-d.y*h.x;r.push(new o.default.Vector(m,f,g).normalize())}}catch(e){a=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}if(t){var y,_=80;a=2*this.faces.length+3*this.faces.length*4*4+80+4,s=new ArrayBuffer(a),(y=new DataView(s)).setUint32(_,this.faces.length,!0),_+=4;for(var v=0,b=Object.entries(this.faces);v<b.length;v++){var w=(x=c(b[v],2))[0],x=x[1],S=(w=r[w],y.setFloat32(_,w.x,!0),_+=4,y.setFloat32(_,w.y,!0),_+=4,y.setFloat32(_,w.z,!0),_+=4,!0),T=void(w=!1);try{for(var E,I=x[Symbol.iterator]();!(S=(E=I.next()).done);S=!0){var k=E.value,j=this.vertices[k];y.setFloat32(_,j.x,!0),_+=4,y.setFloat32(_,j.y,!0),_+=4,y.setFloat32(_,j.z,!0),_+=4}}catch(e){w=!0,T=e}finally{try{S||null==I.return||I.return()}finally{if(w)throw T}}y.setUint16(_,0,!0),_+=2}}else{y="solid "+n+"\n";for(var A=0,C=Object.entries(this.faces);A<C.length;A++){var O=(M=c(C[A],2))[0],M=M[1],N=(y=y+" facet norm "+(O=r[O]).x+" "+O.y+" "+O.z+"\n  outer loop\n",!0),R=void(O=!1);try{for(var P,D=M[Symbol.iterator]();!(N=(P=D.next()).done);N=!0){var L=P.value,F=this.vertices[L];y+="   vertex "+F.x+" "+F.y+" "+F.z+"\n"}}catch(e){O=!0,R=e}finally{try{N||null==D.return||D.return()}finally{if(O)throw R}}y+="  endloop\n endfacet\n"}y+="endsolid "+n+"\n"}t=new Blob([y],{type:"text/plain"}),o.default.prototype.downloadFile(t,e,"stl")}},{key:"flipU",value:function(){this.uvs=this.uvs.flat().map((function(e,t){return t%2==0?1-e:e}))}},{key:"flipV",value:function(){this.uvs=this.uvs.flat().map((function(e,t){return t%2==0?e:1-e}))}},{key:"computeFaces",value:function(){this.faces.length=0;for(var e,t,n,r=this.detailX+1,i=0;i<this.detailY;i++)for(var o=0;o<this.detailX;o++)t=(i+1)*r+o+1,this.faces.push([i*r+o,e=i*r+o+1,n=(i+1)*r+o]),this.faces.push([n,e,t]);return this}},{key:"_getFaceNormal",value:function(e){e=this.faces[e];var t=this.vertices[e[0]],n=this.vertices[e[1]],r=(e=this.vertices[e[2]],n=o.default.Vector.sub(n,t),e=o.default.Vector.sub(e,t),t=o.default.Vector.cross(n,e),o.default.Vector.mag(t));return 0==(n=r/(o.default.Vector.mag(n)*o.default.Vector.mag(e)))||isNaN(n)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),t):(1<n&&(n=1),t.mult(Math.asin(n)/r))}},{key:"computeNormals",value:function(){var e,t=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a.FLAT,r=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).roundToPrecision,i=this.vertexNormals,s=this.vertices,l=this.faces;if(n===a.SMOOTH){for(var c={},u=[],p=Math.pow(10,void 0===r?3:r),d=function(e){return Math.round(e*p)/p},h=function(e){return"".concat(d(e.x),",").concat(d(e.y),",").concat(d(e.z))},m=0;m<s.length;m++){var f=s[m],g=h(f);void 0===c[g]&&(c[g]=u.length,u.push(f))}l.forEach((function(e){for(var t=0;t<3;++t){var n=e[t];n=s[n],n=h(n),e[t]=c[n]}})),this.edges.forEach((function(e){for(var t=0;t<2;++t){var n=e[t];n=s[n],n=h(n),e[t]=c[n]}})),this.vertices=s=u}for(e=i.length=0;e<s.length;++e)i.push(new o.default.Vector);for(l.forEach((function(e,n){for(var r=t._getFaceNormal(n),o=0;o<3;++o){var a=e[o];i[a].add(r)}})),e=0;e<s.length;++e)i[e].normalize();return this}},{key:"averageNormals",value:function(){for(var e=0;e<=this.detailY;e++){var t=this.detailX+1,n=o.default.Vector.add(this.vertexNormals[e*t],this.vertexNormals[e*t+this.detailX]);n=o.default.Vector.div(n,2),this.vertexNormals[e*t]=n,this.vertexNormals[e*t+this.detailX]=n}return this}},{key:"averagePoleNormals",value:function(){for(var e=new o.default.Vector(0,0,0),t=0;t<this.detailX;t++)e.add(this.vertexNormals[t]);e=o.default.Vector.div(e,this.detailX);for(var n=0;n<this.detailX;n++)this.vertexNormals[n]=e;e=new o.default.Vector(0,0,0);for(var r=this.vertices.length-1;r>this.vertices.length-1-this.detailX;r--)e.add(this.vertexNormals[r]);e=o.default.Vector.div(e,this.detailX);for(var i=this.vertices.length-1;i>this.vertices.length-1-this.detailX;i--)this.vertexNormals[i]=e;return this}},{key:"_makeTriangleEdges",value:function(){for(var e=this.edges.length=0;e<this.faces.length;e++)this.edges.push([this.faces[e][0],this.faces[e][1]]),this.edges.push([this.faces[e][1],this.faces[e][2]]),this.edges.push([this.faces[e][2],this.faces[e][0]]);return this}},{key:"_edgesToVertices",value:function(){this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear();for(var e,t=new Map,n=new Set,r=0;r<this.edges.length;r++){var i,o=this.edges[r-1],a=this.edges[r],s=this.vertices[a[0]],l=this.vertices[a[1]],c=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*a[0],4*(a[0]+1)):[0,0,0,0],u=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*a[1],4*(a[1]+1)):[0,0,0,0],p=l.copy().sub(s).normalize(),d=0<p.magSq();d&&this._addSegment(s,l,c,u,p),0<r&&o[1]===a[0]?n.has(a[0])||(n.add(a[0]),t.delete(a[0]),e&&d&&p.dot(e)<1-1e-8&&this._addJoin(s,e,p,c)):(d&&!n.has(a[0])&&((i=t.get(a[0]))?(this._addJoin(s,i.dir,p,c),t.delete(a[0]),n.add(a[0])):t.set(a[0],{point:s,dir:p.copy().mult(-1),color:c})),e&&!n.has(o[1])&&((i=t.get(o[1]))?(this._addJoin(this.vertices[o[1]],e,i.dir.copy().mult(-1),c),t.delete(o[1]),n.add(o[1])):t.set(o[1],{point:this.vertices[o[1]],dir:e,color:c}),e=void 0)),r!==this.edges.length-1||n.has(a[1])||((s=t.get(a[1]))?(this._addJoin(l,p,s.dir.copy().mult(-1),u),t.delete(a[1]),n.add(a[1])):t.set(a[1],{point:l,dir:p,color:u})),d&&(e=p)}var h=!0,m=!1,f=void 0;try{for(var g,y=t.values()[Symbol.iterator]();!(h=(g=y.next()).done);h=!0){var _=g.value,v=_.point,b=_.dir,w=_.color;this._addCap(v,b,w)}}catch(e){m=!0,f=e}finally{try{h||null==y.return||y.return()}finally{if(m)throw f}}return this}},{key:"_addSegment",value:function(e,t,n,r,i){e=e.array(),t=t.array();var o=i.array();this.lineSides.push(1,1,-1,1,-1,-1);for(var a=0,s=[this.lineTangentsIn,this.lineTangentsOut];a<s.length;a++)for(var c=s[a],u=0;u<6;u++)c.push.apply(c,l(o));return(i=this.lineVertices).push.apply(i,l(e).concat(l(t),l(e),l(t),l(t),l(e))),(i=this.lineVertexColors).push.apply(i,l(n).concat(l(r),l(n),l(r),l(r),l(n))),this}},{key:"_addCap",value:function(e,t,n){for(var r,i=e.array(),o=t.array(),a=[0,0,0],s=0;s<6;s++)(r=this.lineVertices).push.apply(r,l(i)),(r=this.lineTangentsIn).push.apply(r,l(o)),(r=this.lineTangentsOut).push.apply(r,a),(r=this.lineVertexColors).push.apply(r,l(n));return this.lineSides.push(-1,2,-2,1,2,-1),this}},{key:"_addJoin",value:function(e,t,n,r){for(var i,o=e.array(),a=t.array(),s=n.array(),c=0;c<12;c++)(i=this.lineVertices).push.apply(i,l(o)),(i=this.lineTangentsIn).push.apply(i,l(a)),(i=this.lineTangentsOut).push.apply(i,l(s)),(i=this.lineVertexColors).push.apply(i,l(r));return this.lineSides.push(-1,-3,-2,-1,0,-3),this.lineSides.push(3,1,2,3,0,1),this}},{key:"normalize",value:function(){if(0<this.vertices.length){for(var e=this.vertices[0].copy(),t=this.vertices[0].copy(),n=0;n<this.vertices.length;n++)e.x=Math.max(e.x,this.vertices[n].x),t.x=Math.min(t.x,this.vertices[n].x),e.y=Math.max(e.y,this.vertices[n].y),t.y=Math.min(t.y,this.vertices[n].y),e.z=Math.max(e.z,this.vertices[n].z),t.z=Math.min(t.z,this.vertices[n].z);for(var r=o.default.Vector.lerp(e,t,.5),i=o.default.Vector.sub(e,t),a=200/Math.max(Math.max(i.x,i.y),i.z),s=0;s<this.vertices.length;s++)this.vertices[s].sub(r),this.vertices[s].mult(a)}return this}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}();var u=o.default.Geometry;n.default=u},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array-buffer.constructor":152,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.flat":160,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.unscopables.flat":173,"core-js/modules/es.map":175,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.entries":184,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],336:[function(e,t,n){"use strict";e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=Array,a=function(e){return Array.isArray(e)};"undefined"!=typeof Float32Array&&(o=Float32Array,a=function(e){return Array.isArray(e)||e instanceof Float32Array}),r.default.Matrix=function(){function e(){var t=this,n=e;if(t instanceof n)return arguments.length&&((t=arguments.length-1)<0||arguments.length<=t?void 0:arguments[t])instanceof r.default&&(this.p5=(n=arguments.length-1)<0||arguments.length<=n?void 0:arguments[n]),"mat3"===(arguments.length<=0?void 0:arguments[0])?this.mat3=Array.isArray(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:new o([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:new o([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this;throw new TypeError("Cannot call a class as a function")}var t,n,s;return t=e,s=[{key:"identity",value:function(e){return new r.default.Matrix(e)}}],(n=[{key:"reset",value:function(){return this.mat3?this.mat3.set([1,0,0,0,1,0,0,0,1]):this.mat4&&this.mat4.set([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this}},{key:"set",value:function(e){var t=arguments;if(e instanceof r.default.Matrix?t=e.mat4:a(e)&&(t=e),16!==t.length)r.default._friendlyError("Expected 16 values but received ".concat(t.length,"."),"p5.Matrix.set");else for(var n=0;n<16;n++)this.mat4[n]=t[n];return this}},{key:"get",value:function(){return new r.default.Matrix(this.mat4,this.p5)}},{key:"copy",value:function(){var e;return void 0!==this.mat3?((e=new r.default.Matrix("mat3",this.p5)).mat3[0]=this.mat3[0],e.mat3[1]=this.mat3[1],e.mat3[2]=this.mat3[2],e.mat3[3]=this.mat3[3],e.mat3[4]=this.mat3[4],e.mat3[5]=this.mat3[5],e.mat3[6]=this.mat3[6],e.mat3[7]=this.mat3[7],e.mat3[8]=this.mat3[8]):((e=new r.default.Matrix(this.p5)).mat4[0]=this.mat4[0],e.mat4[1]=this.mat4[1],e.mat4[2]=this.mat4[2],e.mat4[3]=this.mat4[3],e.mat4[4]=this.mat4[4],e.mat4[5]=this.mat4[5],e.mat4[6]=this.mat4[6],e.mat4[7]=this.mat4[7],e.mat4[8]=this.mat4[8],e.mat4[9]=this.mat4[9],e.mat4[10]=this.mat4[10],e.mat4[11]=this.mat4[11],e.mat4[12]=this.mat4[12],e.mat4[13]=this.mat4[13],e.mat4[14]=this.mat4[14],e.mat4[15]=this.mat4[15]),e}},{key:"transpose",value:function(e){var t,n,i,o,s,l;return e instanceof r.default.Matrix?(t=e.mat4[1],n=e.mat4[2],i=e.mat4[3],o=e.mat4[6],s=e.mat4[7],l=e.mat4[11],this.mat4[0]=e.mat4[0],this.mat4[1]=e.mat4[4],this.mat4[2]=e.mat4[8],this.mat4[3]=e.mat4[12],this.mat4[4]=t,this.mat4[5]=e.mat4[5],this.mat4[6]=e.mat4[9],this.mat4[7]=e.mat4[13],this.mat4[8]=n,this.mat4[9]=o,this.mat4[10]=e.mat4[10],this.mat4[11]=e.mat4[14],this.mat4[12]=i,this.mat4[13]=s,this.mat4[14]=l,this.mat4[15]=e.mat4[15]):a(e)&&(t=e[1],n=e[2],i=e[3],o=e[6],s=e[7],l=e[11],this.mat4[0]=e[0],this.mat4[1]=e[4],this.mat4[2]=e[8],this.mat4[3]=e[12],this.mat4[4]=t,this.mat4[5]=e[5],this.mat4[6]=e[9],this.mat4[7]=e[13],this.mat4[8]=n,this.mat4[9]=o,this.mat4[10]=e[10],this.mat4[11]=e[14],this.mat4[12]=i,this.mat4[13]=s,this.mat4[14]=l,this.mat4[15]=e[15]),this}},{key:"invert",value:function(e){e instanceof r.default.Matrix?(t=e.mat4[0],n=e.mat4[1],i=e.mat4[2],o=e.mat4[3],s=e.mat4[4],l=e.mat4[5],c=e.mat4[6],u=e.mat4[7],p=e.mat4[8],d=e.mat4[9],h=e.mat4[10],m=e.mat4[11],f=e.mat4[12],g=e.mat4[13],y=e.mat4[14],_=e.mat4[15]):a(e)&&(t=e[0],n=e[1],i=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],p=e[8],d=e[9],h=e[10],m=e[11],f=e[12],g=e[13],y=e[14],_=e[15]);var t,n,i,o,s,l,c,u,p,d,h,m,f,g,y,_,v=t*c-i*s,b=t*u-o*s,w=n*c-i*l,x=n*u-o*l,S=i*u-o*c,T=p*g-d*f,E=p*y-h*f,I=p*_-m*f,k=d*y-h*g,j=d*_-m*g,A=h*_-m*y,C=(e=t*l-n*s)*A-v*j+b*k+w*I-x*E+S*T;return C?(this.mat4[0]=(l*A-c*j+u*k)*(C=1/C),this.mat4[1]=(i*j-n*A-o*k)*C,this.mat4[2]=(g*S-y*x+_*w)*C,this.mat4[3]=(h*x-d*S-m*w)*C,this.mat4[4]=(c*I-s*A-u*E)*C,this.mat4[5]=(t*A-i*I+o*E)*C,this.mat4[6]=(y*b-f*S-_*v)*C,this.mat4[7]=(p*S-h*b+m*v)*C,this.mat4[8]=(s*j-l*I+u*T)*C,this.mat4[9]=(n*I-t*j-o*T)*C,this.mat4[10]=(f*x-g*b+_*e)*C,this.mat4[11]=(d*b-p*x-m*e)*C,this.mat4[12]=(l*E-s*k-c*T)*C,this.mat4[13]=(t*k-n*E+i*T)*C,this.mat4[14]=(g*v-f*w-y*e)*C,this.mat4[15]=(p*w-d*v+h*e)*C,this):null}},{key:"invert3x3",value:function(){var e=this.mat3[0],t=this.mat3[1],n=this.mat3[2],r=this.mat3[3],i=this.mat3[4],o=this.mat3[5],a=this.mat3[6],s=this.mat3[7],l=this.mat3[8],c=l*i-o*s,u=-l*r+o*a,p=s*r-i*a,d=e*c+t*u+n*p;return d?(this.mat3[0]=c*(d=1/d),this.mat3[1]=(-l*t+n*s)*d,this.mat3[2]=(o*t-n*i)*d,this.mat3[3]=u*d,this.mat3[4]=(l*e-n*a)*d,this.mat3[5]=(-o*e+n*r)*d,this.mat3[6]=p*d,this.mat3[7]=(-s*e+t*a)*d,this.mat3[8]=(i*e-t*r)*d,this):null}},{key:"transpose3x3",value:function(e){var t=(e=void 0===e?this.mat3:e)[1],n=e[2],r=e[5];return this.mat3[0]=e[0],this.mat3[1]=e[3],this.mat3[2]=e[6],this.mat3[3]=t,this.mat3[4]=e[4],this.mat3[5]=e[7],this.mat3[6]=n,this.mat3[7]=r,this.mat3[8]=e[8],this}},{key:"inverseTranspose",value:function(e){if(e=e.mat4,void 0===this.mat3?r.default._friendlyError("sorry, this function only works with mat3"):(this.mat3[0]=e[0],this.mat3[1]=e[1],this.mat3[2]=e[2],this.mat3[3]=e[4],this.mat3[4]=e[5],this.mat3[5]=e[6],this.mat3[6]=e[8],this.mat3[7]=e[9],this.mat3[8]=e[10]),e=this.invert3x3())e.transpose3x3(this.mat3);else for(var t=0;t<9;t++)this.mat3[t]=0;return this}},{key:"determinant",value:function(){var e=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],t=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],n=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],r=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],i=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],o=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],a=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],s=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],l=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],c=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],u=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return e*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-t*u+n*c+r*l-i*s+o*a}},{key:"mult",value:function(e){var t;if(e===this||e===this.mat4)t=this.copy().mat4;else if(e instanceof r.default.Matrix)t=e.mat4;else if(a(e))t=e;else{if(16!==arguments.length)return;t=arguments}e=this.mat4[0];var n=this.mat4[1],i=this.mat4[2],o=this.mat4[3];return this.mat4[0]=e*t[0]+n*t[4]+i*t[8]+o*t[12],this.mat4[1]=e*t[1]+n*t[5]+i*t[9]+o*t[13],this.mat4[2]=e*t[2]+n*t[6]+i*t[10]+o*t[14],this.mat4[3]=e*t[3]+n*t[7]+i*t[11]+o*t[15],e=this.mat4[4],n=this.mat4[5],i=this.mat4[6],o=this.mat4[7],this.mat4[4]=e*t[0]+n*t[4]+i*t[8]+o*t[12],this.mat4[5]=e*t[1]+n*t[5]+i*t[9]+o*t[13],this.mat4[6]=e*t[2]+n*t[6]+i*t[10]+o*t[14],this.mat4[7]=e*t[3]+n*t[7]+i*t[11]+o*t[15],e=this.mat4[8],n=this.mat4[9],i=this.mat4[10],o=this.mat4[11],this.mat4[8]=e*t[0]+n*t[4]+i*t[8]+o*t[12],this.mat4[9]=e*t[1]+n*t[5]+i*t[9]+o*t[13],this.mat4[10]=e*t[2]+n*t[6]+i*t[10]+o*t[14],this.mat4[11]=e*t[3]+n*t[7]+i*t[11]+o*t[15],e=this.mat4[12],n=this.mat4[13],i=this.mat4[14],o=this.mat4[15],this.mat4[12]=e*t[0]+n*t[4]+i*t[8]+o*t[12],this.mat4[13]=e*t[1]+n*t[5]+i*t[9]+o*t[13],this.mat4[14]=e*t[2]+n*t[6]+i*t[10]+o*t[14],this.mat4[15]=e*t[3]+n*t[7]+i*t[11]+o*t[15],this}},{key:"apply",value:function(e){var t;if(e===this||e===this.mat4)t=this.copy().mat4;else if(e instanceof r.default.Matrix)t=e.mat4;else if(a(e))t=e;else{if(16!==arguments.length)return;t=arguments}var n=(e=this.mat4)[0],i=e[4],o=e[8],s=e[12];return e[0]=t[0]*n+t[1]*i+t[2]*o+t[3]*s,e[4]=t[4]*n+t[5]*i+t[6]*o+t[7]*s,e[8]=t[8]*n+t[9]*i+t[10]*o+t[11]*s,e[12]=t[12]*n+t[13]*i+t[14]*o+t[15]*s,n=e[1],i=e[5],o=e[9],s=e[13],e[1]=t[0]*n+t[1]*i+t[2]*o+t[3]*s,e[5]=t[4]*n+t[5]*i+t[6]*o+t[7]*s,e[9]=t[8]*n+t[9]*i+t[10]*o+t[11]*s,e[13]=t[12]*n+t[13]*i+t[14]*o+t[15]*s,n=e[2],i=e[6],o=e[10],s=e[14],e[2]=t[0]*n+t[1]*i+t[2]*o+t[3]*s,e[6]=t[4]*n+t[5]*i+t[6]*o+t[7]*s,e[10]=t[8]*n+t[9]*i+t[10]*o+t[11]*s,e[14]=t[12]*n+t[13]*i+t[14]*o+t[15]*s,n=e[3],i=e[7],o=e[11],s=e[15],e[3]=t[0]*n+t[1]*i+t[2]*o+t[3]*s,e[7]=t[4]*n+t[5]*i+t[6]*o+t[7]*s,e[11]=t[8]*n+t[9]*i+t[10]*o+t[11]*s,e[15]=t[12]*n+t[13]*i+t[14]*o+t[15]*s,this}},{key:"scale",value:function(e,t,n){return e instanceof r.default.Vector?(t=e.y,n=e.z,e=e.x):e instanceof Array&&(t=e[1],n=e[2],e=e[0]),this.mat4[0]*=e,this.mat4[1]*=e,this.mat4[2]*=e,this.mat4[3]*=e,this.mat4[4]*=t,this.mat4[5]*=t,this.mat4[6]*=t,this.mat4[7]*=t,this.mat4[8]*=n,this.mat4[9]*=n,this.mat4[10]*=n,this.mat4[11]*=n,this}},{key:"rotate",value:function(e,t,n,i){t instanceof r.default.Vector?(n=t.y,i=t.z,t=t.x):t instanceof Array&&(n=t[1],i=t[2],t=t[0]);var o=(t*=1/(o=Math.sqrt(t*t+n*n+i*i)),n*=1/o,i*=1/o,this.mat4[0]),a=this.mat4[1],s=this.mat4[2],l=this.mat4[3],c=this.mat4[4],u=this.mat4[5],p=this.mat4[6],d=this.mat4[7],h=this.mat4[8],m=this.mat4[9],f=this.mat4[10],g=this.mat4[11],y=Math.sin(e),_=1-(e=Math.cos(e)),v=t*t*_+e,b=n*t*_+i*y,w=i*t*_-n*y,x=t*n*_-i*y,S=n*n*_+e,T=i*n*_+t*y,E=t*i*_+n*y;return n=n*i*_-t*y,t=i*i*_+e,this.mat4[0]=o*v+c*b+h*w,this.mat4[1]=a*v+u*b+m*w,this.mat4[2]=s*v+p*b+f*w,this.mat4[3]=l*v+d*b+g*w,this.mat4[4]=o*x+c*S+h*T,this.mat4[5]=a*x+u*S+m*T,this.mat4[6]=s*x+p*S+f*T,this.mat4[7]=l*x+d*S+g*T,this.mat4[8]=o*E+c*n+h*t,this.mat4[9]=a*E+u*n+m*t,this.mat4[10]=s*E+p*n+f*t,this.mat4[11]=l*E+d*n+g*t,this}},{key:"translate",value:function(e){var t=e[0],n=e[1];e=e[2]||0,this.mat4[12]+=this.mat4[0]*t+this.mat4[4]*n+this.mat4[8]*e,this.mat4[13]+=this.mat4[1]*t+this.mat4[5]*n+this.mat4[9]*e,this.mat4[14]+=this.mat4[2]*t+this.mat4[6]*n+this.mat4[10]*e,this.mat4[15]+=this.mat4[3]*t+this.mat4[7]*n+this.mat4[11]*e}},{key:"rotateX",value:function(e){this.rotate(e,1,0,0)}},{key:"rotateY",value:function(e){this.rotate(e,0,1,0)}},{key:"rotateZ",value:function(e){this.rotate(e,0,0,1)}},{key:"perspective",value:function(e,t,n,r){e=1/Math.tan(e/2);var i=1/(n-r);return this.mat4[0]=e/t,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=e,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(r+n)*i,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*r*n*i,this.mat4[15]=0,this}},{key:"ortho",value:function(e,t,n,r,i,o){var a=1/(e-t),s=1/(n-r),l=1/(i-o);return this.mat4[0]=-2*a,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*s,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*l,this.mat4[11]=0,this.mat4[12]=(e+t)*a,this.mat4[13]=(r+n)*s,this.mat4[14]=(o+i)*l,this.mat4[15]=1,this}},{key:"multiplyVec4",value:function(e,t,n,r){var i=new Array(4),o=this.mat4;return i[0]=o[0]*e+o[4]*t+o[8]*n+o[12]*r,i[1]=o[1]*e+o[5]*t+o[9]*n+o[13]*r,i[2]=o[2]*e+o[6]*t+o[10]*n+o[14]*r,i[3]=o[3]*e+o[7]*t+o[11]*n+o[15]*r,i}},{key:"multiplyPoint",value:function(e){var t=e.x,n=e.y;return e=e.z,t=this.multiplyVec4(t,n,e,1),new r.default.Vector(t[0],t[1],t[2])}},{key:"multiplyAndNormalizePoint",value:function(e){var t=e.x,n=e.y;return e=e.z,(t=this.multiplyVec4(t,n,e,1))[0]/=t[3],t[1]/=t[3],t[2]/=t[3],new r.default.Vector(t[0],t[1],t[2])}},{key:"multiplyDirection",value:function(e){var t=e.x,n=e.y;return e=e.z,t=this.multiplyVec4(t,n,e,0),new r.default.Vector(t[0],t[1],t[2])}},{key:"mult3x3",value:function(e){var t;if(e===this||e===this.mat3)t=this.copy().mat3;else if(e instanceof r.default.Matrix)t=e.mat3;else if(a(e))t=e;else{if(9!==arguments.length)return;t=arguments}e=this.mat3[0];var n=this.mat3[1],i=this.mat3[2];return this.mat3[0]=e*t[0]+n*t[3]+i*t[6],this.mat3[1]=e*t[1]+n*t[4]+i*t[7],this.mat3[2]=e*t[2]+n*t[5]+i*t[8],e=this.mat3[3],n=this.mat3[4],i=this.mat3[5],this.mat3[3]=e*t[0]+n*t[3]+i*t[6],this.mat3[4]=e*t[1]+n*t[4]+i*t[7],this.mat3[5]=e*t[2]+n*t[5]+i*t[8],e=this.mat3[6],n=this.mat3[7],i=this.mat3[8],this.mat3[6]=e*t[0]+n*t[3]+i*t[6],this.mat3[7]=e*t[1]+n*t[4]+i*t[7],this.mat3[8]=e*t[2]+n*t[5]+i*t[8],this}},{key:"column",value:function(e){return new r.default.Vector(this.mat3[3*e],this.mat3[3*e+1],this.mat3[3*e+2])}},{key:"row",value:function(e){return new r.default.Vector(this.mat3[e],this.mat3[e+3],this.mat3[e+6])}},{key:"diagonal",value:function(){return void 0!==this.mat3?[this.mat3[0],this.mat3[4],this.mat3[8]]:[this.mat4[0],this.mat4[5],this.mat4[10],this.mat4[15]]}},{key:"multiplyVec3",value:function(e,t){return(t=void 0===t?e.copy():t).x=this.row(0).dot(e),t.y=this.row(1).dot(e),t.z=this.row(2).dot(e),t}},{key:"createSubMatrix3x3",value:function(){var e=new r.default.Matrix("mat3");return e.mat3[0]=this.mat4[0],e.mat3[1]=this.mat4[1],e.mat3[2]=this.mat4[2],e.mat3[3]=this.mat4[4],e.mat3[4]=this.mat4[5],e.mat3[5]=this.mat4[6],e.mat3[6]=this.mat4[8],e.mat3[7]=this.mat4[9],e.mat3[8]=this.mat4[10],e}}])&&i(t.prototype,n),s&&i(t,s),e}(),e=r.default.Matrix,n.default=e},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239}],337:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.default.Quat=function(){function e(t,n,i,o){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.w=t,this.vec=new r.default.Vector(n,i,o)}var t,n,o;return t=e,o=[{key:"fromAxisAngle",value:function(e,t,n,i){var o=Math.cos(e/2);return t=new r.default.Vector(t,n,i).normalize().mult(Math.sin(e/2)),new r.default.Quat(o,t.x,t.y,t.z)}}],(n=[{key:"conjugate",value:function(){return new r.default.Quat(this.w,-this.vec.x,-this.vec.y,-this.vec.z)}},{key:"multiply",value:function(e){return new r.default.Quat(this.w*e.w-this.vec.x*e.vec.x-this.vec.y*e.vec.y-this.vec.z-e.vec.z,this.w*e.vec.x+this.vec.x*e.w+this.vec.y*e.vec.z-this.vec.z*e.vec.y,this.w*e.vec.y-this.vec.x*e.vec.z+this.vec.y*e.w+this.vec.z*e.vec.x,this.w*e.vec.z+this.vec.x*e.vec.y-this.vec.y*e.vec.x+this.vec.z*e.w)}},{key:"rotateVector",value:function(e){return new r.default.Vector.mult(e,this.w*this.w-this.vec.dot(this.vec)).add(r.default.Vector.mult(this.vec,2*e.dot(this.vec))).add(r.default.Vector.mult(this.vec,2*this.w).cross(e)).clampToZero()}},{key:"rotateBy",value:function(e){return e.multiply(this).multiply(e.conjugate()).vec.clampToZero()}}])&&i(t.prototype,n),o&&i(t,o),e}(),e=r.default.Quat,n.default=e},{"../core/main":283}],338:[function(e,t,n){"use strict";e("core-js/modules/es.array.map"),e("core-js/modules/es.array.map"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,(e=(e=e("../core/main"))&&e.__esModule?e:{default:e}).default.RenderBuffer=function(){function e(t,n,r,i,o,a){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.size=t,this.src=n,this.dst=r,this.attr=i,this._renderer=o,this.map=a}var t;return(t=[{key:"_prepareBuffer",value:function(e,t){var n,r,i,o=t.attributes,a=this._renderer.GL,s=e.model||e;(o=o[this.attr])&&(n=e[this.dst],0<(r=s[this.src]).length?((i=!n)&&(e[this.dst]=n=a.createBuffer()),a.bindBuffer(a.ARRAY_BUFFER,n),!i&&!1===s.dirtyFlags[this.src]||(i=(e=this.map)?e(r):r,this._renderer._bindBuffer(n,a.ARRAY_BUFFER,i),s.dirtyFlags[this.src]=!1),t.enableAttrib(o,this.size)):-1!==(e=o.location)&&this._renderer.registerEnabled.has(e)&&(a.disableVertexAttribArray(e),this._renderer.registerEnabled.delete(e)))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}(),e=e.default.RenderBuffer,n.default=e},{"../core/main":283,"core-js/modules/es.array.map":168}],339:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.find-index"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.map"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.find-index"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.map"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(u=e("../core/main"))&&u.__esModule?u:{default:u},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function s(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,s=function(){return e},e)}function l(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e("./p5.RenderBuffer"),o.default.RendererGL.prototype.beginShape=function(e){return this.immediateMode.shapeMode=void 0!==e?e:a.TESS,this.immediateMode.geometry.reset(),this.immediateMode.contourIndices=[],this};var c={vertices:1,vertexNormals:1,vertexColors:4,vertexStrokeColors:4,uvs:2},u=(o.default.RendererGL.prototype.beginContour=function(){if(this.immediateMode.shapeMode!==a.TESS)throw new Error("WebGL mode can only use contours with beginShape(TESS).");this.immediateMode.contourIndices.push(this.immediateMode.geometry.vertices.length)},o.default.RendererGL.prototype.vertex=function(e,t){if(this.immediateMode.shapeMode===a.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var n in c){var r=c[n];(n=this.immediateMode.geometry[n]).push.apply(n,l(n.slice(n.length-3*r,n.length-2*r)).concat(l(n.slice(n.length-r,n.length))))}var i,s,u=i=s=0,p=(3===arguments.length?u=arguments[2]:4===arguments.length?(i=arguments[2],s=arguments[3]):5===arguments.length&&(u=arguments[2],i=arguments[3],s=arguments[4]),new o.default.Vector(e,t,u));return this.immediateMode.geometry.vertices.push(p),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),p=this.curFillColor||[.5,.5,.5,1],this.immediateMode.geometry.vertexColors.push(p[0],p[1],p[2],p[3]),p=this.curStrokeColor||[.5,.5,.5,1],this.immediateMode.geometry.vertexStrokeColors.push(p[0],p[1],p[2],p[3]),this.textureMode!==a.IMAGE||this.isProcessingVertices||(null!==this._tex?0<this._tex.width&&0<this._tex.height&&(i/=this._tex.width,s/=this._tex.height):void 0===this.userFillShader&&void 0===this.userStrokeShader&&void 0===this.userPointShader&&null===this._tex&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(i,s),this.immediateMode._bezierVertex[0]=e,this.immediateMode._bezierVertex[1]=t,this.immediateMode._bezierVertex[2]=u,this.immediateMode._quadraticVertex[0]=e,this.immediateMode._quadraticVertex[1]=t,this.immediateMode._quadraticVertex[2]=u,this},o.default.RendererGL.prototype.normal=function(e,t,n){return e instanceof o.default.Vector?this._currentNormal=e:this._currentNormal=new o.default.Vector(e,t,n),this},o.default.RendererGL.prototype.endShape=function(e,t,n,r,i,o){var s,l=6<arguments.length&&void 0!==arguments[6]?arguments[6]:1;return this.immediateMode.shapeMode===a.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(3===this.immediateMode.geometry.vertices.length&&this.immediateMode.shapeMode===a.TESS&&(this.immediateMode.shapeMode=a.TRIANGLES),this.isProcessingVertices=!0,this._processVertices.apply(this,arguments),s=this.isProcessingVertices=!1,this.immediateMode.shapeMode!==a.LINE_STRIP&&this.immediateMode.shapeMode!==a.LINES||(this.immediateMode.shapeMode=a.TRIANGLE_FAN,s=!0),this.immediateMode.shapeMode===a.QUADS?this.immediateMode.shapeMode=a.TRIANGLES:this.immediateMode.shapeMode===a.QUAD_STRIP&&(this.immediateMode.shapeMode=a.TRIANGLE_STRIP),this._doFill&&!s&&!this.geometryBuilder&&3<=this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(l),this._doStroke&&!this.geometryBuilder&&1<=this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.geometryBuilder&&this.geometryBuilder.addImmediate(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},o.default.RendererGL.prototype._processVertices=function(e){var t;0!==this.immediateMode.geometry.vertices.length&&(t=this._doStroke,e=e===a.CLOSE,t&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,e),this.geometryBuilder||this.immediateMode.geometry._edgesToVertices()),t=this.immediateMode.shapeMode===a.TESS,e=0<this.immediateMode.contourIndices.length,this._doFill&&(this.isBezier||this.isQuadratic||this.isCurve||t||e)&&this.immediateMode.shapeMode!==a.LINES&&this._tesselateShape())},o.default.RendererGL.prototype._calculateEdges=function(e,t,n){var r=[],i=0,o=this.immediateMode.contourIndices.slice(),s=0;switch(e){case a.TRIANGLE_STRIP:for(i=0;i<t.length-2;i++)r.push([i,i+1]),r.push([i,i+2]);r.push([i,i+1]);break;case a.TRIANGLE_FAN:for(i=1;i<t.length-1;i++)r.push([0,i]),r.push([i,i+1]);r.push([0,t.length-1]);break;case a.TRIANGLES:for(i=0;i<t.length-2;i+=3)r.push([i,i+1]),r.push([i+1,i+2]),r.push([i+2,i]);break;case a.LINES:for(i=0;i<t.length-1;i+=2)r.push([i,i+1]);break;case a.QUADS:for(i=0;i<t.length-5;i+=6)r.push([i,i+1]),r.push([i+1,i+2]),r.push([i+3,i+5]),r.push([i+4,i+5]);break;case a.QUAD_STRIP:for(i=0;i<t.length-2;i+=2)r.push([i,i+1]),r.push([i,i+2]),r.push([i+1,i+3]);r.push([i,i+1]);break;default:for(i=0;i<t.length;i++)i+1<t.length&&i+1!==o[0]?r.push([i,i+1]):((n||s)&&r.push([i,s]),0<o.length&&(s=o.shift()))}return e!==a.TESS&&n&&r.push([t.length-1,0]),r},o.default.RendererGL.prototype._tesselateShape=function(){for(var e=this,t=(this.immediateMode.shapeMode=a.TRIANGLES,[[]]),n=0;n<this.immediateMode.geometry.vertices.length;n++)0<this.immediateMode.contourIndices.length&&this.immediateMode.contourIndices[0]===n&&(this.immediateMode.contourIndices.shift(),t.push([])),t[t.length-1].push(this.immediateMode.geometry.vertices[n].x,this.immediateMode.geometry.vertices[n].y,this.immediateMode.geometry.vertices[n].z,this.immediateMode.geometry.uvs[2*n],this.immediateMode.geometry.uvs[2*n+1],this.immediateMode.geometry.vertexColors[4*n],this.immediateMode.geometry.vertexColors[4*n+1],this.immediateMode.geometry.vertexColors[4*n+2],this.immediateMode.geometry.vertexColors[4*n+3],this.immediateMode.geometry.vertexNormals[n].x,this.immediateMode.geometry.vertexNormals[n].y,this.immediateMode.geometry.vertexNormals[n].z);for(var r,i=this._triangulate(t),s=this.immediateMode.geometry.vertices,c=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),u=0,p=i.length;u<p;u+=o.default.RendererGL.prototype.tessyVertexSize)c.push.apply(c,l(i.slice(u+5,u+9))),this.normal.apply(this,l(i.slice(u+9,u+12))),this.vertex.apply(this,l(i.slice(u,u+5)));this.geometryBuilder&&(r=new Map,this.immediateMode.geometry.edges=this.immediateMode.geometry.edges.map((function(t){return t.map((function(t){if(!r.has(t)){var n=s[t],i=e.immediateMode.geometry.vertices.findIndex((function(e){return n.x===e.x&&n.y===e.y&&n.z===e.z}));if(-1===i){for(var o=1/0,a=0,l=0;l<e.immediateMode.geometry.vertices.length;l++){var c=e.immediateMode.geometry.vertices[l],u=n.x-c.x,p=n.y-c.y;(u=u*u+p*p+(c=n.z-c.z)*c)<o&&(o=u,a=l)}i=a}r.set(t,i)}return r.get(t)}))}))),this.immediateMode.geometry.vertexColors=c},o.default.RendererGL.prototype._drawImmediateFill=function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,n=this.GL,r=(this._useVertexColor=0<this.immediateMode.geometry.vertexColors.length,e=this._getImmediateFillShader(),this._setFillUniforms(e),!0),i=!1,o=void 0;try{for(var a,s=this.immediateMode.buffers.fill[Symbol.iterator]();!(r=(a=s.next()).done);r=!0)a.value._prepareBuffer(this.immediateMode.geometry,e)}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}if(e.disableRemainingAttributes(),this._applyColorBlend(this.curFillColor,this.immediateMode.geometry.hasFillTransparency()),1===t)n.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length);else try{n.drawArraysInstanced(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length,t)}catch(e){console.log("🌸 p5.js says: Instancing is only supported in WebGL2 mode")}e.unbindShader()},o.default.RendererGL.prototype._drawImmediateStroke=function(){var e=this.GL,t=(this._useLineColor=0<this.immediateMode.geometry.vertexStrokeColors.length,this._getImmediateStrokeShader()),n=(this._setStrokeUniforms(t),!0),r=!1,i=void 0;try{for(var o,a=this.immediateMode.buffers.stroke[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)o.value._prepareBuffer(this.immediateMode.geometry,t)}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}t.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,this.immediateMode.geometry.hasFillTransparency()),e.drawArrays(e.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length/3),t.unbindShader()},o.default.RendererGL);n.default=u},{"../core/constants":272,"../core/main":283,"./p5.RenderBuffer":338,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.find-index":158,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.map":175,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],340:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.some"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.uint16-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.some"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.uint16-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=(l=e("../core/main"))&&l.__esModule?l:{default:l},a=(e("./p5.RendererGL"),e("./p5.RenderBuffer"),function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants")));function s(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,s=function(){return e},e)}o.default.RendererGL.prototype.freeGeometry=function(e){e.gid?this._freeBuffers(e.gid):console.warn("The model you passed to freeGeometry does not have an id!")},o.default.RendererGL.prototype._initBufferDefaults=function(e){var t;return this._freeBuffers(e),1e3<Object.keys(this.retainedMode.geometry).length&&(t=Object.keys(this.retainedMode.geometry)[0],this._freeBuffers(t)),this.retainedMode.geometry[e]={}},o.default.RendererGL.prototype._freeBuffers=function(e){var t,n=this.retainedMode.geometry[e];function r(e){var r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;n[l.dst]&&(t.deleteBuffer(n[l.dst]),n[l.dst]=null)}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}}n&&(delete this.retainedMode.geometry[e],t=this.GL,n.indexBuffer&&t.deleteBuffer(n.indexBuffer),r(this.retainedMode.buffers.stroke),r(this.retainedMode.buffers.fill))},o.default.RendererGL.prototype.createBuffers=function(e,t){var n,r,i,a=this.GL,s=((e=this._initBufferDefaults(e)).model=t,e.indexBuffer);return t.faces.length?(s=s||(e.indexBuffer=a.createBuffer()),i=(r=(n=o.default.RendererGL.prototype._flatten(t.faces)).some((function(e){return 65535<e})))?Uint32Array:Uint16Array,this._bindBuffer(s,a.ELEMENT_ARRAY_BUFFER,n,i),e.indexBufferType=r?a.UNSIGNED_INT:a.UNSIGNED_SHORT,e.vertexCount=3*t.faces.length):(s&&(a.deleteBuffer(s),e.indexBuffer=null),e.vertexCount=t.vertices?t.vertices.length:0),e.lineVertexCount=t.lineVertices?t.lineVertices.length/3:0,e},o.default.RendererGL.prototype.drawBuffers=function(e){var t=this.GL,n=this.retainedMode.geometry[e];if(!this.geometryBuilder&&this._doFill&&0<this.retainedMode.geometry[e].vertexCount){this._useVertexColor=0<n.model.vertexColors.length;var r=this._getRetainedFillShader(),i=(this._setFillUniforms(r),!0),o=!1,a=void 0;try{for(var s,l=this.retainedMode.buffers.fill[Symbol.iterator]();!(i=(s=l.next()).done);i=!0)s.value._prepareBuffer(n,r)}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}r.disableRemainingAttributes(),n.indexBuffer&&this._bindBuffer(n.indexBuffer,t.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor,n.model.hasFillTransparency()),this._drawElements(t.TRIANGLES,e),r.unbindShader()}if(!this.geometryBuilder&&this._doStroke&&0<n.lineVertexCount){this._useLineColor=0<n.model.vertexStrokeColors.length;var c=this._getRetainedStrokeShader(),u=(this._setStrokeUniforms(c),!0);o=!1,a=void 0;try{for(var p,d=this.retainedMode.buffers.stroke[Symbol.iterator]();!(u=(p=d.next()).done);u=!0)p.value._prepareBuffer(n,c)}catch(e){o=!0,a=e}finally{try{u||null==d.return||d.return()}finally{if(o)throw a}}c.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,n.model.hasStrokeTransparency()),this._drawArrays(t.TRIANGLES,e),c.unbindShader()}return this.geometryBuilder&&this.geometryBuilder.addRetained(n),this},o.default.RendererGL.prototype.drawBuffersScaled=function(e,t,n,r){var i=this.uModelMatrix.copy();try{this.uModelMatrix.scale(t,n,r),this.drawBuffers(e)}finally{this.uModelMatrix=i}},o.default.RendererGL.prototype._drawArrays=function(e,t){return this.GL.drawArrays(e,0,this.retainedMode.geometry[t].lineVertexCount),this},o.default.RendererGL.prototype._drawElements=function(e,t){t=this.retainedMode.geometry[t];var n=this.GL;if(t.indexBuffer){if(this._pInst.webglVersion!==a.WEBGL2&&t.indexBufferType===n.UNSIGNED_INT&&!n.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");n.drawElements(n.TRIANGLES,t.vertexCount,t.indexBufferType,0)}else n.drawArrays(e||n.TRIANGLES,0,t.vertexCount)},o.default.RendererGL.prototype._drawPoints=function(e,t){var n=this.GL,r=this._getImmediatePointShader();this._setPointUniforms(r),this._bindBuffer(t,n.ARRAY_BUFFER,this._vToNArray(e),Float32Array,n.STATIC_DRAW),r.enableAttrib(r.attributes.aPosition,3),this._applyColorBlend(this.curStrokeColor),n.drawArrays(n.Points,0,e.length),r.unbindShader()};var l=o.default.RendererGL;n.default=l},{"../core/constants":272,"../core/main":283,"./p5.RenderBuffer":338,"./p5.RendererGL":341,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.some":170,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint16-array":240,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],341:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.copy-within"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.flat"),e("core-js/modules/es.array.flat-map"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.array.unscopables.flat"),e("core-js/modules/es.array.unscopables.flat-map"),e("core-js/modules/es.map"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.reflect.get"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.float64-array"),e("core-js/modules/es.typed-array.int16-array"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint16-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.copy-within"),e("core-js/modules/es.array.every"),e("core-js/modules/es.array.fill"),e("core-js/modules/es.array.flat"),e("core-js/modules/es.array.flat-map"),e("core-js/modules/es.array.from"),e("core-js/modules/es.array.includes"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.map"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.array.unscopables.flat"),e("core-js/modules/es.array.unscopables.flat-map"),e("core-js/modules/es.map"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.set"),e("core-js/modules/es.string.includes"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.float32-array"),e("core-js/modules/es.typed-array.float64-array"),e("core-js/modules/es.typed-array.int16-array"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.uint16-array"),e("core-js/modules/es.typed-array.uint32-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.readPixelsWebGL=k,n.readPixelWebGL=j,n.default=void 0;var o=p(e("../core/main")),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants")),s=p(e("./GeometryBuilder")),l=p(e("libtess")),c=(e("./p5.Shader"),e("./p5.Camera"),e("../core/p5.Renderer"),e("./p5.Matrix"),e("./p5.Framebuffer"),e("path"),e("./p5.Texture"));function u(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,u=function(){return e},e)}function p(e){return e&&e.__esModule?e:{default:e}}function d(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(e,t,n){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){if(e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}(e,t),e)return(e=Object.getOwnPropertyDescriptor(e,t)).get?e.get.call(n):e.value})(e,t,n||e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function _(e,t){S+="#define STROKE_CAP_".concat(e," ").concat(t,"\n"),w[a[e]]=t}function v(e,t){S+="#define STROKE_JOIN_".concat(e," ").concat(t,"\n"),x[a[e]]=t}var b,w={},x={},S="",T={sphereMappingFrag:"#define PI 3.141592\n\nprecision highp float;\n  \nuniform sampler2D uSampler;\nuniform mat3 uNewNormalMatrix;\nuniform float uFovY;\nuniform float uAspect;\n\nvarying vec2 vTexCoord;\n  \nvoid main() {\n    float uFovX = uFovY * uAspect; \n    vec4 newTexColor = texture2D(uSampler, vTexCoord);\n    float angleY = mix(uFovY/2.0,  -uFovY/2.0, vTexCoord.y);\n    float angleX = mix(uFovX/2.0, -uFovX/2.0, vTexCoord.x);\n    vec3 rotatedNormal = vec3( angleX, angleY, 1.0 );\n    rotatedNormal = uNewNormalMatrix * normalize(rotatedNormal);\n    float temp = rotatedNormal.z;\n    rotatedNormal.z = rotatedNormal.x;\n    rotatedNormal.x = -temp;\n    vec2 suv;\n    suv.y = 0.5 + 0.5 * (-rotatedNormal.y);\n    suv.x = atan(rotatedNormal.z, rotatedNormal.x) / (2.0 * PI) + 0.5;\n    newTexColor = texture2D(uSampler, suv.xy);\n    gl_FragColor = newTexColor;\n}\n",immediateVert:"IN vec3 aPosition;\nIN vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uResolution;\nuniform float uPointSize;\n\nOUT vec4 vColor;\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n  gl_PointSize = uPointSize;\n}\n",vertexColorVert:"IN vec3 aPosition;\nIN vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nOUT vec4 vColor;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n}\n",vertexColorFrag:"IN vec4 vColor;\nvoid main(void) {\n  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;\n}\n",normalVert:"IN vec3 aPosition;\nIN vec3 aNormal;\nIN vec2 aTexCoord;\nIN vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nuniform vec4 uMaterialColor;\nuniform bool uUseVertexColor;\n\nOUT vec3 vVertexNormal;\nOUT highp vec2 vVertTexCoord;\nOUT vec4 vColor;\n\nvoid main(void) {\n  HOOK_beforeVertex();\n  vec4 positionVec4 = vec4(HOOK_getWorldPosition(\n    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz\n  ), 1.);\n\n  gl_Position = uProjectionMatrix * positionVec4;\n\n  vVertexNormal = HOOK_getWorldNormal(normalize(uNormalMatrix * HOOK_getLocalNormal(aNormal)));\n  vVertTexCoord = HOOK_getUV(aTexCoord);\n  vColor = HOOK_getVertexColor(uUseVertexColor ? aVertexColor : uMaterialColor);\n  HOOK_afterVertex();\n}\n",normalFrag:"IN vec3 vVertexNormal;\nvoid main(void) {\n  HOOK_beforeFragment();\n  OUT_COLOR = HOOK_getFinalColor(vec4(vVertexNormal, 1.0));\n  HOOK_afterFragment();\n}\n",basicFrag:"IN vec4 vColor;\nvoid main(void) {\n  HOOK_beforeFragment();\n  OUT_COLOR = HOOK_getFinalColor(vec4(vColor.rgb, 1.) * vColor.a);\n  HOOK_afterFragment();\n}\n",lightVert:(_("ROUND",0),_("PROJECT",1),_("SQUARE",2),v("ROUND",0),v("MITER",1),v("BEVEL",2),(e='#define PI 3.141592\n\nprecision highp float;\nprecision highp int;\n\nuniform mat4 uViewMatrix;\n\nuniform bool uUseLighting;\n\nuniform int uAmbientLightCount;\nuniform vec3 uAmbientColor[5];\nuniform mat3 uCameraRotation;\nuniform int uDirectionalLightCount;\nuniform vec3 uLightingDirection[5];\nuniform vec3 uDirectionalDiffuseColors[5];\nuniform vec3 uDirectionalSpecularColors[5];\n\nuniform int uPointLightCount;\nuniform vec3 uPointLightLocation[5];\nuniform vec3 uPointLightDiffuseColors[5];\t\nuniform vec3 uPointLightSpecularColors[5];\n\nuniform int uSpotLightCount;\nuniform float uSpotLightAngle[5];\nuniform float uSpotLightConc[5];\nuniform vec3 uSpotLightDiffuseColors[5];\nuniform vec3 uSpotLightSpecularColors[5];\nuniform vec3 uSpotLightLocation[5];\nuniform vec3 uSpotLightDirection[5];\n\nuniform bool uSpecular;\nuniform float uShininess;\nuniform float uMetallic;\n\nuniform float uConstantAttenuation;\nuniform float uLinearAttenuation;\nuniform float uQuadraticAttenuation;\n\n// setting from  _setImageLightUniforms()\n// boolean to initiate the calculateImageDiffuse and calculateImageSpecular\nuniform bool uUseImageLight;\n// texture for use in calculateImageDiffuse\nuniform sampler2D environmentMapDiffused;\n// texture for use in calculateImageSpecular\nuniform sampler2D environmentMapSpecular;\n\nconst float specularFactor = 2.0;\nconst float diffuseFactor = 0.73;\n\nstruct LightResult {\n  float specular;\n  float diffuse;\n};\n\nfloat _phongSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float shininess) {\n\n  vec3 R = reflect(lightDirection, surfaceNormal);\n  return pow(max(0.0, dot(R, viewDirection)), shininess);\n}\n\nfloat _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {\n  return max(0.0, dot(-lightDirection, surfaceNormal));\n}\n\nLightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector, float shininess, float metallic) {\n\n  vec3 lightDir = normalize(lightVector);\n\n  //compute our diffuse & specular terms\n  LightResult lr;\n  float specularIntensity = mix(1.0, 0.4, metallic);\n  float diffuseIntensity = mix(1.0, 0.1, metallic);\n  if (uSpecular)\n    lr.specular = (_phongSpecular(lightDir, viewDirection, normal, shininess)) * specularIntensity;\n    lr.diffuse = _lambertDiffuse(lightDir, normal) * diffuseIntensity;\n  return lr;\n}\n\n// converts the range of "value" from [min1 to max1] to [min2 to max2]\nfloat map(float value, float min1, float max1, float min2, float max2) {\n  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);\n}\n\nvec2 mapTextureToNormal( vec3 v ){\n  // x = r sin(phi) cos(theta)   \n  // y = r cos(phi)  \n  // z = r sin(phi) sin(theta)\n  float phi = acos( v.y );\n  // if phi is 0, then there are no x, z components\n  float theta = 0.0;\n  // else \n  theta = acos(v.x / sin(phi));\n  float sinTheta = v.z / sin(phi);\n  if (sinTheta < 0.0) {\n    // Turn it into -theta, but in the 0-2PI range\n    theta = 2.0 * PI - theta;\n  }\n  theta = theta / (2.0 * 3.14159);\n  phi = phi / 3.14159 ;\n  \n  vec2 angles = vec2( fract(theta + 0.25), 1.0 - phi );\n  return angles;\n}\n\n\nvec3 calculateImageDiffuse(vec3 vNormal, vec3 vViewPosition, float metallic){\n  // make 2 seperate builds \n  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);  // hardcoded world camera position\n  vec3 worldNormal = normalize(vNormal * uCameraRotation);\n  vec2 newTexCoor = mapTextureToNormal( worldNormal );\n  vec4 texture = TEXTURE( environmentMapDiffused, newTexCoor );\n  // this is to make the darker sections more dark\n  // png and jpg usually flatten the brightness so it is to reverse that\n  return mix(smoothstep(vec3(0.0), vec3(1.0), texture.xyz), vec3(0.0), metallic);\n}\n\nvec3 calculateImageSpecular(vec3 vNormal, vec3 vViewPosition, float shininess, float metallic){\n  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);\n  vec3 worldNormal = normalize(vNormal);\n  vec3 lightDirection = normalize( vViewPosition - worldCameraPosition );\n  vec3 R = reflect(lightDirection, worldNormal) * uCameraRotation;\n  vec2 newTexCoor = mapTextureToNormal( R );\n#ifdef WEBGL2\n  // In p5js the range of shininess is >= 1,\n  // Therefore roughness range will be ([0,1]*8)*20 or [0, 160]\n  // The factor of 8 is because currently the getSpecularTexture\n  // only calculated 8 different levels of roughness\n  // The factor of 20 is just to spread up this range so that,\n  // [1, max] of shininess is converted to [0,160] of roughness\n  float roughness = 20. / shininess;\n  vec4 outColor = textureLod(environmentMapSpecular, newTexCoor, roughness * 8.);\n#else\n  vec4 outColor = TEXTURE(environmentMapSpecular, newTexCoor);\n#endif\n  // this is to make the darker sections more dark\n  // png and jpg usually flatten the brightness so it is to reverse that\n  return mix(\n    pow(outColor.xyz, vec3(10)),\n    pow(outColor.xyz, vec3(1.2)),\n    metallic \n  );\n}\n\nvoid totalLight(\n  vec3 modelPosition,\n  vec3 normal,\n  float shininess,\n  float metallic,\n  out vec3 totalDiffuse,\n  out vec3 totalSpecular\n) {\n\n  totalSpecular = vec3(0.0);\n\n  if (!uUseLighting) {\n    totalDiffuse = vec3(1.0);\n    return;\n  }\n\n  totalDiffuse = vec3(0.0);\n\n  vec3 viewDirection = normalize(-modelPosition);\n\n  for (int j = 0; j < 5; j++) {\n    if (j < uDirectionalLightCount) {\n      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;\n      vec3 lightColor = uDirectionalDiffuseColors[j];\n      vec3 specularColor = uDirectionalSpecularColors[j];\n      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);\n      totalDiffuse += result.diffuse * lightColor;\n      totalSpecular += result.specular * lightColor * specularColor;\n    }\n\n    if (j < uPointLightCount) {\n      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;\n      vec3 lightVector = modelPosition - lightPosition;\n      //calculate attenuation\n      float lightDistance = length(lightVector);\n      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);\n      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];\n      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];\n\n      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);\n      totalDiffuse += result.diffuse * lightColor;\n      totalSpecular += result.specular * lightColor * specularColor;\n    }\n\n    if(j < uSpotLightCount) {\n      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;\n      vec3 lightVector = modelPosition - lightPosition;\n    \n      float lightDistance = length(lightVector);\n      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);\n\n      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;\n      float spotDot = dot(normalize(lightVector), normalize(lightDirection));\n      float spotFalloff;\n      if(spotDot < uSpotLightAngle[j]) {\n        spotFalloff = 0.0;\n      }\n      else {\n        spotFalloff = pow(spotDot, uSpotLightConc[j]);\n      }\n      lightFalloff *= spotFalloff;\n\n      vec3 lightColor = uSpotLightDiffuseColors[j];\n      vec3 specularColor = uSpotLightSpecularColors[j];\n     \n      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);\n      \n      totalDiffuse += result.diffuse * lightColor * lightFalloff;\n      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;\n    }\n  }\n\n  if( uUseImageLight ){\n    totalDiffuse += calculateImageDiffuse(normal, modelPosition, metallic);\n    totalSpecular += calculateImageSpecular(normal, modelPosition, shininess, metallic);\n  }\n\n  totalDiffuse *= diffuseFactor;\n  totalSpecular *= specularFactor;\n}\n')+"// include lighting.glgl\n\nIN vec3 aPosition;\nIN vec3 aNormal;\nIN vec2 aTexCoord;\nIN vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nuniform bool uUseVertexColor;\nuniform vec4 uMaterialColor;\n\nOUT highp vec2 vVertTexCoord;\nOUT vec3 vDiffuseColor;\nOUT vec3 vSpecularColor;\nOUT vec4 vColor;\n\nvoid main(void) {\n\n  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * viewModelPosition;\n\n  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);\n  vVertTexCoord = aTexCoord;\n\n  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);\n\n  for (int i = 0; i < 8; i++) {\n    if (i < uAmbientLightCount) {\n      vDiffuseColor += uAmbientColor[i];\n    }\n  }\n  \n  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);\n}\n"),lightTextureFrag:"uniform vec4 uTint;\nuniform sampler2D uSampler;\nuniform bool isTexture;\nuniform bool uEmissive;\n\nIN highp vec2 vVertTexCoord;\nIN vec3 vDiffuseColor;\nIN vec3 vSpecularColor;\nIN vec4 vColor;\n\nvoid main(void) {\n  if(uEmissive && !isTexture) {\n    OUT_COLOR = vColor;\n  }\n  else {\n    vec4 baseColor = isTexture\n      // Textures come in with premultiplied alpha. To apply tint and still have\n      // premultiplied alpha output, we need to multiply the RGB channels by the\n      // tint RGB, and all channels by the tint alpha.\n      ? TEXTURE(uSampler, vVertTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)\n      // Colors come in with unmultiplied alpha, so we need to multiply the RGB\n      // channels by alpha to convert it to premultiplied alpha.\n      : vec4(vColor.rgb * vColor.a, vColor.a);\n    OUT_COLOR = vec4(baseColor.rgb * vDiffuseColor + vSpecularColor, baseColor.a);\n  }\n}\n",phongVert:"precision highp int;\n\nIN vec3 aPosition;\nIN vec3 aNormal;\nIN vec2 aTexCoord;\nIN vec4 aVertexColor;\n\nuniform vec3 uAmbientColor[5];\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\nuniform int uAmbientLightCount;\n\nuniform bool uUseVertexColor;\nuniform vec4 uMaterialColor;\n\nOUT vec3 vNormal;\nOUT vec2 vTexCoord;\nOUT vec3 vViewPosition;\nOUT vec3 vAmbientColor;\nOUT vec4 vColor;\n\nvoid main(void) {\n  HOOK_beforeVertex();\n  vec4 viewModelPosition = vec4(HOOK_getWorldPosition(\n    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz\n  ), 1.);\n\n  // Pass varyings to fragment shader\n  vViewPosition = viewModelPosition.xyz;\n  gl_Position = uProjectionMatrix * viewModelPosition;  \n\n  vNormal = HOOK_getWorldNormal(uNormalMatrix * HOOK_getLocalNormal(aNormal));\n  vTexCoord = HOOK_getUV(aTexCoord);\n\n  // TODO: this should be a uniform\n  vAmbientColor = vec3(0.0);\n  for (int i = 0; i < 5; i++) {\n    if (i < uAmbientLightCount) {\n      vAmbientColor += uAmbientColor[i];\n    }\n  }\n  \n  vColor = HOOK_getVertexColor((uUseVertexColor ? aVertexColor : uMaterialColor));\n  HOOK_afterVertex();\n}\n",phongFrag:e+"// include lighting.glsl\nprecision highp int;\n\nuniform bool uHasSetAmbient;\nuniform vec4 uSpecularMatColor;\nuniform vec4 uAmbientMatColor;\nuniform vec4 uEmissiveMatColor;\n\nuniform vec4 uTint;\nuniform sampler2D uSampler;\nuniform bool isTexture;\n\nIN vec3 vNormal;\nIN vec2 vTexCoord;\nIN vec3 vViewPosition;\nIN vec3 vAmbientColor;\nIN vec4 vColor;\n\nstruct ColorComponents {\n  vec3 baseColor;\n  float opacity;\n  vec3 ambientColor;\n  vec3 specularColor;\n  vec3 diffuse;\n  vec3 ambient;\n  vec3 specular;\n  vec3 emissive;\n};\n\nstruct Inputs {\n  vec3 normal;\n  vec2 texCoord;\n  vec3 ambientLight;\n  vec3 ambientMaterial;\n  vec3 specularMaterial;\n  vec3 emissiveMaterial;\n  vec4 color;\n  float shininess;\n  float metalness;\n};\n\nvoid main(void) {\n  HOOK_beforeFragment();\n\n  Inputs inputs;\n  inputs.normal = normalize(vNormal);\n  inputs.texCoord = vTexCoord;\n  inputs.ambientLight = vAmbientColor;\n  inputs.color = isTexture\n      // Textures come in with premultiplied alpha. To apply tint and still have\n      // premultiplied alpha output, we need to multiply the RGB channels by the\n      // tint RGB, and all channels by the tint alpha.\n      ? TEXTURE(uSampler, vTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)\n      // Colors come in with unmultiplied alpha, so we need to multiply the RGB\n      // channels by alpha to convert it to premultiplied alpha.\n      : vec4(vColor.rgb * vColor.a, vColor.a);\n  inputs.shininess = uShininess;\n  inputs.metalness = uMetallic;\n  inputs.ambientMaterial = uHasSetAmbient ? uAmbientMatColor.rgb : inputs.color.rgb;\n  inputs.specularMaterial = uSpecularMatColor.rgb;\n  inputs.emissiveMaterial = uEmissiveMatColor.rgb;\n  inputs = HOOK_getPixelInputs(inputs);\n\n  vec3 diffuse;\n  vec3 specular;\n  totalLight(vViewPosition, inputs.normal, inputs.shininess, inputs.metalness, diffuse, specular);\n\n  // Calculating final color as result of all lights (plus emissive term).\n\n  vec2 texCoord = inputs.texCoord;\n  vec4 baseColor = inputs.color;\n  ColorComponents c;\n  c.opacity = baseColor.a;\n  c.baseColor = baseColor.rgb;\n  c.ambientColor = inputs.ambientMaterial;\n  c.specularColor = inputs.specularMaterial;\n  c.diffuse = diffuse;\n  c.ambient = inputs.ambientLight;\n  c.specular = specular;\n  c.emissive = inputs.emissiveMaterial;\n  OUT_COLOR = HOOK_getFinalColor(HOOK_combineColors(c));\n  HOOK_afterFragment();\n}\n",fontVert:"IN vec3 aPosition;\nIN vec2 aTexCoord;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nuniform vec4 uGlyphRect;\nuniform float uGlyphOffset;\n\nOUT vec2 vTexCoord;\nOUT float w;\n\nvoid main() {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n\n  // scale by the size of the glyph's rectangle\n  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;\n\n  // Expand glyph bounding boxes by 1px on each side to give a bit of room\n  // for antialiasing\n  vec3 newOrigin = (uModelViewMatrix * vec4(0., 0., 0., 1.)).xyz;\n  vec3 newDX = (uModelViewMatrix * vec4(1., 0., 0., 1.)).xyz;\n  vec3 newDY = (uModelViewMatrix * vec4(0., 1., 0., 1.)).xyz;\n  vec2 pixelScale = vec2(\n    1. / length(newOrigin - newDX),\n    1. / length(newOrigin - newDY)\n  );\n  vec2 offset = pixelScale * normalize(aTexCoord - vec2(0.5, 0.5)) * vec2(1., -1.);\n  vec2 textureOffset = offset * (1. / vec2(\n    uGlyphRect.z - uGlyphRect.x,\n    uGlyphRect.w - uGlyphRect.y\n  ));\n\n  // move to the corner of the glyph\n  positionVec4.xy += uGlyphRect.xy;\n\n  // move to the letter's line offset\n  positionVec4.x += uGlyphOffset;\n\n  positionVec4.xy += offset;\n  \n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vTexCoord = aTexCoord + textureOffset;\n  w = gl_Position.w;\n}\n",fontFrag:"#ifndef WEBGL2\n#extension GL_OES_standard_derivatives : enable\n#endif\n\n#if 0\n  // simulate integer math using floats\n\t#define int float\n\t#define ivec2 vec2\n\t#define INT(x) float(x)\n\n\tint ifloor(float v) { return floor(v); }\n\tivec2 ifloor(vec2 v) { return floor(v); }\n\n#else\n  // use native integer math\n\tprecision highp int;\n\t#define INT(x) x\n\n\tint ifloor(float v) { return int(v); }\n\tint ifloor(int v) { return v; }\n\tivec2 ifloor(vec2 v) { return ivec2(v); }\n\n#endif\n\nuniform sampler2D uSamplerStrokes;\nuniform sampler2D uSamplerRowStrokes;\nuniform sampler2D uSamplerRows;\nuniform sampler2D uSamplerColStrokes;\nuniform sampler2D uSamplerCols;\n\nuniform ivec2 uStrokeImageSize;\nuniform ivec2 uCellsImageSize;\nuniform ivec2 uGridImageSize;\n\nuniform ivec2 uGridOffset;\nuniform ivec2 uGridSize;\nuniform vec4 uMaterialColor;\n\nIN vec2 vTexCoord;\n\n// some helper functions\nint ROUND(float v) { return ifloor(v + 0.5); }\nivec2 ROUND(vec2 v) { return ifloor(v + 0.5); }\nfloat saturate(float v) { return clamp(v, 0.0, 1.0); }\nvec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }\n\nint mul(float v1, int v2) {\n  return ifloor(v1 * float(v2));\n}\n\nivec2 mul(vec2 v1, ivec2 v2) {\n  return ifloor(v1 * vec2(v2) + 0.5);\n}\n\n// unpack a 16-bit integer from a float vec2\nint getInt16(vec2 v) {\n  ivec2 iv = ROUND(v * 255.0);\n  return iv.x * INT(128) + iv.y;\n}\n\nvec2 pixelScale;\nvec2 coverage = vec2(0.0);\nvec2 weight = vec2(0.5);\nconst float minDistance = 1.0/8192.0;\nconst float hardness = 1.05; // amount of antialias\n\n// the maximum number of curves in a glyph\nconst int N = INT(250);\n\n// retrieves an indexed pixel from a sampler\nvec4 getTexel(sampler2D sampler, int pos, ivec2 size) {\n  int width = size.x;\n  int y = ifloor(pos / width);\n  int x = pos - y * width;  // pos % width\n\n  return TEXTURE(sampler, (vec2(x, y) + 0.5) / vec2(size));\n}\n\nvoid calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {\n\n  // get the coefficients of the quadratic in t\n  vec2 a = p0 - p1 * 2.0 + p2;\n  vec2 b = p0 - p1;\n  vec2 c = p0 - vTexCoord;\n\n  // found out which values of 't' it crosses the axes\n  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));\n  vec2 t1 = ((b - surd) / a).yx;\n  vec2 t2 = ((b + surd) / a).yx;\n\n  // approximate straight lines to avoid rounding errors\n  if (abs(a.y) < 0.001)\n    t1.x = t2.x = c.y / (2.0 * b.y);\n\n  if (abs(a.x) < 0.001)\n    t1.y = t2.y = c.x / (2.0 * b.x);\n\n  // plug into quadratic formula to find the corrdinates of the crossings\n  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;\n  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;\n}\n\nvoid coverageX(vec2 p0, vec2 p1, vec2 p2) {\n\n  vec2 C1, C2;\n  calulateCrossings(p0, p1, p2, C1, C2);\n\n  // determine on which side of the x-axis the points lie\n  bool y0 = p0.y > vTexCoord.y;\n  bool y1 = p1.y > vTexCoord.y;\n  bool y2 = p2.y > vTexCoord.y;\n\n  // could web be under the curve (after t1)?\n  if (y1 ? !y2 : y0) {\n    // add the coverage for t1\n    coverage.x += saturate(C1.x + 0.5);\n    // calculate the anti-aliasing for t1\n    weight.x = min(weight.x, abs(C1.x));\n  }\n\n  // are we outside the curve (after t2)?\n  if (y1 ? !y0 : y2) {\n    // subtract the coverage for t2\n    coverage.x -= saturate(C2.x + 0.5);\n    // calculate the anti-aliasing for t2\n    weight.x = min(weight.x, abs(C2.x));\n  }\n}\n\n// this is essentially the same as coverageX, but with the axes swapped\nvoid coverageY(vec2 p0, vec2 p1, vec2 p2) {\n\n  vec2 C1, C2;\n  calulateCrossings(p0, p1, p2, C1, C2);\n\n  bool x0 = p0.x > vTexCoord.x;\n  bool x1 = p1.x > vTexCoord.x;\n  bool x2 = p2.x > vTexCoord.x;\n\n  if (x1 ? !x2 : x0) {\n    coverage.y -= saturate(C1.y + 0.5);\n    weight.y = min(weight.y, abs(C1.y));\n  }\n\n  if (x1 ? !x0 : x2) {\n    coverage.y += saturate(C2.y + 0.5);\n    weight.y = min(weight.y, abs(C2.y));\n  }\n}\n\nvoid main() {\n\n  // calculate the pixel scale based on screen-coordinates\n  pixelScale = hardness / fwidth(vTexCoord);\n\n  // which grid cell is this pixel in?\n  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));\n\n  // intersect curves in this row\n  {\n    // the index into the row info bitmap\n    int rowIndex = gridCoord.y + uGridOffset.y;\n    // fetch the info texel\n    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);\n    // unpack the rowInfo\n    int rowStrokeIndex = getInt16(rowInfo.xy);\n    int rowStrokeCount = getInt16(rowInfo.zw);\n\n    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {\n      if (iRowStroke >= rowStrokeCount)\n        break;\n\n      // each stroke is made up of 3 points: the start and control point\n      // and the start of the next curve.\n      // fetch the indices of this pair of strokes:\n      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);\n\n      // unpack the stroke index\n      int strokePos = getInt16(strokeIndices.xy);\n\n      // fetch the two strokes\n      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);\n      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);\n\n      // calculate the coverage\n      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);\n    }\n  }\n\n  // intersect curves in this column\n  {\n    int colIndex = gridCoord.x + uGridOffset.x;\n    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);\n    int colStrokeIndex = getInt16(colInfo.xy);\n    int colStrokeCount = getInt16(colInfo.zw);\n    \n    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {\n      if (iColStroke >= colStrokeCount)\n        break;\n\n      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);\n\n      int strokePos = getInt16(strokeIndices.xy);\n      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);\n      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);\n      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);\n    }\n  }\n\n  weight = saturate(1.0 - weight * 2.0);\n  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.\n  float antialias = abs(dot(coverage, weight) / distance);\n  float cover = min(abs(coverage.x), abs(coverage.y));\n  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;\n  OUT_COLOR *= saturate(max(antialias, cover));\n}\n",lineVert:S+"/*\n  Part of the Processing project - http://processing.org\n  Copyright (c) 2012-15 The Processing Foundation\n  Copyright (c) 2004-12 Ben Fry and Casey Reas\n  Copyright (c) 2001-04 Massachusetts Institute of Technology\n  This library is free software; you can redistribute it and/or\n  modify it under the terms of the GNU Lesser General Public\n  License as published by the Free Software Foundation, version 2.1.\n  This library is distributed in the hope that it will be useful,\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n  Lesser General Public License for more details.\n  You should have received a copy of the GNU Lesser General\n  Public License along with this library; if not, write to the\n  Free Software Foundation, Inc., 59 Temple Place, Suite 330,\n  Boston, MA  02111-1307  USA\n*/\n\n#define PROCESSING_LINE_SHADER\n\nprecision mediump int;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uStrokeWeight;\n\nuniform bool uUseLineColor;\nuniform vec4 uMaterialColor;\n\nuniform vec4 uViewport;\nuniform int uPerspective;\nuniform int uStrokeJoin;\n\nIN vec4 aPosition;\nIN vec3 aTangentIn;\nIN vec3 aTangentOut;\nIN float aSide;\nIN vec4 aVertexColor;\n\nOUT vec4 vColor;\nOUT vec2 vTangent;\nOUT vec2 vCenter;\nOUT vec2 vPosition;\nOUT float vMaxDist;\nOUT float vCap;\nOUT float vJoin;\nOUT float vStrokeWeight;\n\nvec2 lineIntersection(vec2 aPoint, vec2 aDir, vec2 bPoint, vec2 bDir) {\n  // Rotate and translate so a starts at the origin and goes out to the right\n  bPoint -= aPoint;\n  vec2 rotatedBFrom = vec2(\n    bPoint.x*aDir.x + bPoint.y*aDir.y,\n    bPoint.y*aDir.x - bPoint.x*aDir.y\n  );\n  vec2 bTo = bPoint + bDir;\n  vec2 rotatedBTo = vec2(\n    bTo.x*aDir.x + bTo.y*aDir.y,\n    bTo.y*aDir.x - bTo.x*aDir.y\n  );\n  float intersectionDistance =\n    rotatedBTo.x + (rotatedBFrom.x - rotatedBTo.x) * rotatedBTo.y /\n    (rotatedBTo.y - rotatedBFrom.y);\n  return aPoint + aDir * intersectionDistance;\n}\n\nvoid main() {\n  HOOK_beforeVertex();\n  // Caps have one of either the in or out tangent set to 0\n  vCap = (aTangentIn == vec3(0.)) != (aTangentOut == (vec3(0.)))\n    ? 1. : 0.;\n\n  // Joins have two unique, defined tangents\n  vJoin = (\n    aTangentIn != vec3(0.) &&\n    aTangentOut != vec3(0.) &&\n    aTangentIn != aTangentOut\n  ) ? 1. : 0.;\n\n  vec4 localPosition = vec4(HOOK_getLocalPosition(aPosition.xyz), 1.);\n  vec4 posp = vec4(HOOK_getWorldPosition((uModelViewMatrix * localPosition).xyz), 1.);\n  vec4 posqIn = posp + uModelViewMatrix * vec4(aTangentIn, 0);\n  vec4 posqOut = posp + uModelViewMatrix * vec4(aTangentOut, 0);\n  float strokeWeight = HOOK_getStrokeWeight(uStrokeWeight);\n  vStrokeWeight = strokeWeight;\n\n  float facingCamera = pow(\n    // The word space tangent's z value is 0 if it's facing the camera\n    abs(normalize(posqIn-posp).z),\n\n    // Using pow() here to ramp `facingCamera` up from 0 to 1 really quickly\n    // so most lines get scaled and don't get clipped\n    0.25\n  );\n\n  // Moving vertices slightly toward the camera\n  // to avoid depth-fighting with the fill triangles.\n  // A mix of scaling and offsetting is used based on distance\n  // Discussion here:\n  // https://github.com/processing/p5.js/issues/7200 \n\n  // using a scale <1 moves the lines towards nearby camera\n  // in order to prevent popping effects due to half of\n  // the line disappearing behind the geometry faces.\n  float zDistance = -posp.z; \n  float distanceFactor = smoothstep(0.0, 800.0, zDistance); \n  \n  // Discussed here:\n  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  \n  float scale = mix(1., 0.995, facingCamera);\n  float dynamicScale = mix(scale, 1.0, distanceFactor); // Closer = more scale, farther = less\n\n  posp.xyz = posp.xyz * dynamicScale;\n  posqIn.xyz = posqIn.xyz * dynamicScale;\n  posqOut.xyz = posqOut.xyz * dynamicScale;\n\n  // Moving vertices slightly toward camera when far away \n  // https://github.com/processing/p5.js/issues/6956 \n  float zOffset = mix(-0.00045, -1., facingCamera);\n  float dynamicZAdjustment = mix(0.0, zOffset, distanceFactor); // Closer = less zAdjustment, farther = more\n\n  posp.z -= dynamicZAdjustment;\n  posqIn.z -= dynamicZAdjustment;\n  posqOut.z -= dynamicZAdjustment;\n  \n  vec4 p = uProjectionMatrix * posp;\n  vec4 qIn = uProjectionMatrix * posqIn;\n  vec4 qOut = uProjectionMatrix * posqOut;\n  vCenter = HOOK_getLineCenter(p.xy);\n\n  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])\n  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw\n\n  // prevent division by W by transforming the tangent formula (div by 0 causes\n  // the line to disappear, see https://github.com/processing/processing/issues/5183)\n  // t = screen_q - screen_p\n  //\n  // tangent is normalized and we don't care which aDirection it points to (+-)\n  // t = +- normalize( screen_q - screen_p )\n  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )\n  //\n  // extract common factor, <1,1> - <1,1> cancels out\n  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )\n  //\n  // convert to common divisor\n  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )\n  //\n  // remove the common scalar divisor/factor, not needed due to normalize and +-\n  // (keep uViewport - can't remove because it has different components for x and y\n  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)\n  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )\n\n  vec2 tangentIn = normalize((qIn.xy*p.w - p.xy*qIn.w) * uViewport.zw);\n  vec2 tangentOut = normalize((qOut.xy*p.w - p.xy*qOut.w) * uViewport.zw);\n\n  vec2 curPerspScale;\n  if(uPerspective == 1) {\n    // Perspective ---\n    // convert from world to clip by multiplying with projection scaling factor\n    // to get the right thickness (see https://github.com/processing/processing/issues/5182)\n\n    // The y value of the projection matrix may be flipped if rendering to a Framebuffer.\n    // Multiplying again by its sign here negates the flip to get just the scale.\n    curPerspScale = (uProjectionMatrix * vec4(1, sign(uProjectionMatrix[1][1]), 0, 0)).xy;\n  } else {\n    // No Perspective ---\n    // multiply by W (to cancel out division by W later in the pipeline) and\n    // convert from screen to clip (derived from clip to screen above)\n    curPerspScale = p.w / (0.5 * uViewport.zw);\n  }\n\n  vec2 offset;\n  if (vJoin == 1.) {\n    vTangent = normalize(tangentIn + tangentOut);\n    vec2 normalIn = vec2(-tangentIn.y, tangentIn.x);\n    vec2 normalOut = vec2(-tangentOut.y, tangentOut.x);\n    float side = sign(aSide);\n    float sideEnum = abs(aSide);\n\n    // We generate vertices for joins on either side of the centerline, but\n    // the \"elbow\" side is the only one needing a join. By not setting the\n    // offset for the other side, all its vertices will end up in the same\n    // spot and not render, effectively discarding it.\n    if (sign(dot(tangentOut, vec2(-tangentIn.y, tangentIn.x))) != side) {\n      // Side enums:\n      //   1: the side going into the join\n      //   2: the middle of the join\n      //   3: the side going out of the join\n      if (sideEnum == 2.) {\n        // Calculate the position + tangent on either side of the join, and\n        // find where the lines intersect to find the elbow of the join\n        vec2 c = (posp.xy/posp.w + vec2(1.,1.)) * 0.5 * uViewport.zw;\n        vec2 intersection = lineIntersection(\n          c + (side * normalIn * strokeWeight / 2.),\n          tangentIn,\n          c + (side * normalOut * strokeWeight / 2.),\n          tangentOut\n        );\n        offset = (intersection - c);\n\n        // When lines are thick and the angle of the join approaches 180, the\n        // elbow might be really far from the center. We'll apply a limit to\n        // the magnitude to avoid lines going across the whole screen when this\n        // happens.\n        float mag = length(offset);\n        float maxMag = 3. * strokeWeight;\n        if (mag > maxMag) {\n          offset *= maxMag / mag;\n        }\n      } else if (sideEnum == 1.) {\n        offset = side * normalIn * strokeWeight / 2.;\n      } else if (sideEnum == 3.) {\n        offset = side * normalOut * strokeWeight / 2.;\n      }\n    }\n    if (uStrokeJoin == STROKE_JOIN_BEVEL) {\n      vec2 avgNormal = vec2(-vTangent.y, vTangent.x);\n      vMaxDist = abs(dot(avgNormal, normalIn * strokeWeight / 2.));\n    } else {\n      vMaxDist = strokeWeight / 2.;\n    }\n  } else {\n    vec2 tangent = aTangentIn == vec3(0.) ? tangentOut : tangentIn;\n    vTangent = tangent;\n    vec2 normal = vec2(-tangent.y, tangent.x);\n\n    float normalOffset = sign(aSide);\n    // Caps will have side values of -2 or 2 on the edge of the cap that\n    // extends out from the line\n    float tangentOffset = abs(aSide) - 1.;\n    offset = (normal * normalOffset + tangent * tangentOffset) *\n      strokeWeight * 0.5;\n    vMaxDist = strokeWeight / 2.;\n  }\n  vPosition = HOOK_getLinePosition(vCenter + offset);\n\n  gl_Position.xy = p.xy + offset.xy * curPerspScale;\n  gl_Position.zw = p.zw;\n  \n  vColor = HOOK_getVertexColor(uUseLineColor ? aVertexColor : uMaterialColor);\n  HOOK_afterVertex();\n}\n",lineFrag:S+"precision mediump int;\n\nuniform vec4 uMaterialColor;\nuniform int uStrokeCap;\nuniform int uStrokeJoin;\n\nIN vec4 vColor;\nIN vec2 vTangent;\nIN vec2 vCenter;\nIN vec2 vPosition;\nIN float vStrokeWeight;\nIN float vMaxDist;\nIN float vCap;\nIN float vJoin;\n\nfloat distSquared(vec2 a, vec2 b) {\n  vec2 aToB = b - a;\n  return dot(aToB, aToB);\n}\n\nstruct Inputs {\n  vec4 color;\n  vec2 tangent;\n  vec2 center;\n  vec2 position;\n  float strokeWeight;\n};\n\nvoid main() {\n  HOOK_beforeFragment();\n\n  Inputs inputs;\n  inputs.color = vColor;\n  inputs.tangent = vTangent;\n  inputs.center = vCenter;\n  inputs.position = vPosition;\n  inputs.strokeWeight = vStrokeWeight;\n  inputs = HOOK_getPixelInputs(inputs);\n\n  if (vCap > 0.) {\n    if (\n      uStrokeCap == STROKE_CAP_ROUND &&\n      HOOK_shouldDiscard(distSquared(inputs.position, inputs.center) > inputs.strokeWeight * inputs.strokeWeight * 0.25)\n    ) {\n      discard;\n    } else if (\n      uStrokeCap == STROKE_CAP_SQUARE &&\n      HOOK_shouldDiscard(dot(inputs.position - inputs.center, inputs.tangent) > 0.)\n    ) {\n      discard;\n    // Use full area for PROJECT\n    } else if (HOOK_shouldDiscard(false)) {\n      discard;\n    }\n  } else if (vJoin > 0.) {\n    if (\n      uStrokeJoin == STROKE_JOIN_ROUND &&\n      HOOK_shouldDiscard(distSquared(inputs.position, inputs.center) > inputs.strokeWeight * inputs.strokeWeight * 0.25)\n    ) {\n      discard;\n    } else if (uStrokeJoin == STROKE_JOIN_BEVEL) {\n      vec2 normal = vec2(-inputs.tangent.y, inputs.tangent.x);\n      if (HOOK_shouldDiscard(abs(dot(inputs.position - inputs.center, normal)) > vMaxDist)) {\n        discard;\n      }\n    // Use full area for MITER\n    } else if (HOOK_shouldDiscard(false)) {\n      discard;\n    }\n  }\n  OUT_COLOR = HOOK_getFinalColor(vec4(inputs.color.rgb, 1.) * inputs.color.a);\n  HOOK_afterFragment();\n}\n",pointVert:"IN vec3 aPosition;\nuniform float uPointSize;\nOUT float vStrokeWeight;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvoid main() {\n  HOOK_beforeVertex();\n  vec4 viewModelPosition = vec4(HOOK_getWorldPosition(\n    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz\n  ), 1.);\n  gl_Position = uProjectionMatrix * viewModelPosition;  \n\n  float pointSize = HOOK_getPointSize(uPointSize);\n\n\tgl_PointSize = pointSize;\n\tvStrokeWeight = pointSize;\n  HOOK_afterVertex();\n}\n",pointFrag:"precision mediump int;\nuniform vec4 uMaterialColor;\nIN float vStrokeWeight;\n\nvoid main(){\n  HOOK_beforeFragment();\n  float mask = 0.0;\n\n  // make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)\n  // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant\n\n  mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));\n\n  // if strokeWeight is 1 or less lets just draw a square\n  // this prevents weird artifacting from carving circles when our points are really small\n  // if strokeWeight is larger than 1, we just use it as is\n\n  mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));\n\n  // throw away the borders of the mask\n  // otherwise we get weird alpha blending issues\n\n  if(HOOK_shouldDiscard(mask > 0.98)){\n    discard;\n  }\n\n  OUT_COLOR = HOOK_getFinalColor(vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a);\n  HOOK_afterFragment();\n}\n",imageLightVert:"precision highp float;\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nvarying vec3 localPos;\nvarying vec3 vWorldNormal;\nvarying vec3 vWorldPosition;\nvarying vec2 vTexCoord;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nvoid main() {\n  // Multiply the position by the matrix.\n  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * viewModelPosition;  \n  \n  // orient the normals and pass to the fragment shader\n  vWorldNormal = uNormalMatrix * aNormal;\n  \n  // send the view position to the fragment shader\n  vWorldPosition = (uModelViewMatrix * vec4(aPosition, 1.0)).xyz;\n  \n  localPos = vWorldPosition;\n  vTexCoord = aTexCoord;\n}\n\n\n/*\nin the vertex shader we'll compute the world position and world oriented normal of the vertices and pass those to the fragment shader as varyings.\n*/\n",imageLightDiffusedFrag:"precision highp float;\nvarying vec3 localPos;\n\n// the HDR cubemap converted (can be from an equirectangular environment map.)\nuniform sampler2D environmentMap;\nvarying vec2 vTexCoord;\n\nconst float PI = 3.14159265359;\n\nvec2 nTOE( vec3 v ){\n  // x = r sin(phi) cos(theta)   \n  // y = r cos(phi)  \n  // z = r sin(phi) sin(theta)\n  float phi = acos( v.y );\n  // if phi is 0, then there are no x, z components\n  float theta = 0.0;\n  // else \n  theta = acos(v.x / sin(phi));\n  float sinTheta = v.z / sin(phi);\n  if (sinTheta < 0.0) {\n    // Turn it into -theta, but in the 0-2PI range\n    theta = 2.0 * PI - theta;\n  }\n  theta = theta / (2.0 * 3.14159);\n  phi = phi / 3.14159 ;\n  \n  vec2 angles = vec2( phi, theta );\n  return angles;\n}\n\nfloat random(vec2 p) {\n  vec3 p3  = fract(vec3(p.xyx) * .1031);\n  p3 += dot(p3, p3.yzx + 33.33);\n  return fract((p3.x + p3.y) * p3.z);\n}\n\nvoid main()\n{   \t \n\t// the sample direction equals the hemisphere's orientation\n  float phi = vTexCoord.x * 2.0 * PI;\n  float theta = vTexCoord.y * PI;\n  float x = sin(theta) * cos(phi);\n  float y = sin(theta) * sin(phi);\n  float z = cos(theta);\n  vec3 normal = vec3( x, y, z);\n\n\t// Discretely sampling the hemisphere given the integral's\n  // spherical coordinates translates to the following fragment code:\n\tvec3 irradiance = vec3(0.0);  \n\tvec3 up\t= vec3(0.0, 1.0, 0.0);\n\tvec3 right = normalize(cross(up, normal));\n\tup = normalize(cross(normal, right));\n\n\t//  We specify a fixed sampleDelta delta value to traverse\n  // the hemisphere; decreasing or increasing the sample delta\n  // will increase or decrease the accuracy respectively.\n\tconst float sampleDelta = 0.100;\n\tfloat nrSamples = 0.0;\n  float randomOffset = random(gl_FragCoord.xy) * sampleDelta;\n\tfor(float rawPhi = 0.0; rawPhi < 2.0 * PI; rawPhi += sampleDelta)\n\t{\n    float phi = rawPhi + randomOffset;\n    for(float rawTheta = 0.0; rawTheta < ( 0.5 ) * PI; rawTheta += sampleDelta)\n    {\n      float theta = rawTheta + randomOffset;\n      // spherical to cartesian (in tangent space) // tangent space to world // add each sample result to irradiance\n      float x = sin(theta) * cos(phi);\n      float y = sin(theta) * sin(phi);\n      float z = cos(theta);\n      vec3 tangentSample = vec3( x, y, z);\n      \n      vec3 sampleVec = tangentSample.x * right + tangentSample.y * up + tangentSample.z * normal;\n        irradiance += (texture2D(environmentMap, nTOE(sampleVec)).xyz) * cos(theta) * sin(theta);\n      nrSamples++;\n    }\n\t}\n\t// divide by the total number of samples taken, giving us the average sampled irradiance.\n\tirradiance = PI * irradiance * (1.0 / float(nrSamples )) ;\n  \n \n\tgl_FragColor = vec4(irradiance, 1.0);\n}",imageLightSpecularFrag:"precision highp float;\r\nvarying vec3 localPos;\r\nvarying vec2 vTexCoord;\r\n\r\n// our texture\r\nuniform sampler2D environmentMap;\r\nuniform float roughness;\r\n\r\nconst float PI = 3.14159265359;\r\n\r\nfloat VanDerCorput(int bits);\r\nvec2 HammersleyNoBitOps(int i, int N);\r\nvec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness);\r\n\r\n\r\nvec2 nTOE( vec3 v ){\r\n  // x = r sin(phi) cos(theta)   \r\n  // y = r cos(phi)  \r\n  // z = r sin(phi) sin(theta)\r\n  float phi = acos( v.y );\r\n  // if phi is 0, then there are no x, z components\r\n  float theta = 0.0;\r\n  // else \r\n  theta = acos(v.x / sin(phi));\r\n  float sinTheta = v.z / sin(phi);\r\n  if (sinTheta < 0.0) {\r\n    // Turn it into -theta, but in the 0-2PI range\r\n    theta = 2.0 * PI - theta;\r\n  }\r\n  theta = theta / (2.0 * 3.14159);\r\n  phi = phi / 3.14159 ;\r\n  \r\n  vec2 angles = vec2( phi, theta );\r\n  return angles;\r\n}\r\n\r\n\r\nvoid main(){\r\n  const int SAMPLE_COUNT = 400; // 4096\r\n  int lowRoughnessLimit = int(pow(2.0,(roughness+0.1)*20.0));\r\n  float totalWeight = 0.0;\r\n  vec3 prefilteredColor = vec3(0.0);\r\n  float phi = vTexCoord.x * 2.0 * PI;\r\n  float theta = vTexCoord.y * PI;\r\n  float x = sin(theta) * cos(phi);\r\n  float y = sin(theta) * sin(phi);\r\n  float z = cos(theta);\r\n  vec3 N = vec3(x,y,z);\r\n  vec3 V = N;\r\n  for (int i = 0; i < SAMPLE_COUNT; ++i)\r\n  {\r\n    // break at smaller sample numbers for low roughness levels\r\n    if(i == lowRoughnessLimit)\r\n    {\r\n      break;\r\n    }\r\n    vec2 Xi = HammersleyNoBitOps(i, SAMPLE_COUNT);\r\n    vec3 H = ImportanceSampleGGX(Xi, N, roughness);\r\n    vec3 L = normalize(2.0 * dot(V, H) * H - V);\r\n\r\n    float NdotL = max(dot(N, L), 0.0);\r\n    if (NdotL > 0.0)\r\n    {\r\n      prefilteredColor += texture2D(environmentMap, nTOE(L)).xyz * NdotL;\r\n      totalWeight += NdotL;\r\n    }\r\n  }\r\n  prefilteredColor = prefilteredColor / totalWeight;\r\n\r\n  gl_FragColor = vec4(prefilteredColor, 1.0);\r\n}\r\n\r\nvec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness){\r\n  float a = roughness * roughness;\r\n\r\n  float phi = 2.0 * PI * Xi.x;\r\n  float cosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a * a - 1.0) * Xi.y));\r\n  float sinTheta = sqrt(1.0 - cosTheta * cosTheta);\r\n  // from spherical coordinates to cartesian coordinates\r\n  vec3 H;\r\n  H.x = cos(phi) * sinTheta;\r\n  H.y = sin(phi) * sinTheta;\r\n  H.z = cosTheta;\r\n\r\n  // from tangent-space vector to world-space sample vector\r\n  vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\r\n  vec3 tangent = normalize(cross(up, N));\r\n  vec3 bitangent = cross(N, tangent);\r\n\r\n  vec3 sampleVec = tangent * H.x + bitangent * H.y + N * H.z;\r\n  return normalize(sampleVec);\r\n}\r\n\r\n\r\nfloat VanDerCorput(int n, int base)\r\n{\r\n#ifdef WEBGL2\r\n\r\n    uint bits = uint(n);\r\n    bits = (bits << 16u) | (bits >> 16u);\r\n    bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);\r\n    bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);\r\n    bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);\r\n    bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);\r\n    return float(bits) * 2.3283064365386963e-10; // / 0x100000000\r\n\r\n#else\r\n\r\n  float invBase = 1.0 / float(base);\r\n  float denom = 1.0;\r\n  float result = 0.0;\r\n\r\n\r\n  for (int i = 0; i < 32; ++i)\r\n  {\r\n        if (n > 0)\r\n        {\r\n        denom = mod(float(n), 2.0);\r\n        result += denom * invBase;\r\n        invBase = invBase / 2.0;\r\n        n = int(float(n) / 2.0);\r\n        }\r\n  }\r\n\r\n\r\n  return result;\r\n\r\n#endif\r\n}\r\n\r\nvec2 HammersleyNoBitOps(int i, int N)\r\n{\r\n  return vec2(float(i) / float(N), VanDerCorput(i, 2));\r\n}\r\n"},E=T.sphereMappingFrag;for(b in T)T[b]="#ifdef WEBGL2\n\n#define IN in\n#define OUT out\n\n#ifdef FRAGMENT_SHADER\nout vec4 outColor;\n#define OUT_COLOR outColor\n#endif\n#define TEXTURE texture\n\n#else\n\n#ifdef FRAGMENT_SHADER\n#define IN varying\n#else\n#define IN attribute\n#endif\n#define OUT varying\n#define TEXTURE texture2D\n\n#ifdef FRAGMENT_SHADER\n#define OUT_COLOR gl_FragColor\n#endif\n\n#endif\n"+T[b];y(e={},a.GRAY,"precision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\n\nfloat luma(vec3 color) {\n  // weighted grayscale with luminance values\n  return dot(color, vec3(0.2126, 0.7152, 0.0722));\n}\n\nvoid main() {\n  vec4 tex = texture2D(tex0, vTexCoord);\n  float gray = luma(tex.rgb);\n  gl_FragColor = vec4(gray, gray, gray, tex.a);\n}\n"),y(e,a.ERODE,"// Reduces the bright areas in an image\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\nuniform vec2 texelSize;\n\nfloat luma(vec3 color) {\n  // weighted grayscale with luminance values\n  // weights 77, 151, 28 taken from src/image/filters.js\n  return dot(color, vec3(0.300781, 0.589844, 0.109375));\n}\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n  float lum = luma(color.rgb);\n\n  // set current color as the darkest neighbor color\n\n  vec4 neighbors[4];\n  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));\n  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));\n  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));\n  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));\n\n  for (int i = 0; i < 4; i++) {\n    vec4 neighborColor = neighbors[i];\n    float neighborLum = luma(neighborColor.rgb);\n\n    if (neighborLum < lum) {\n      color = neighborColor;\n      lum = neighborLum;\n    }\n  }\n\n  gl_FragColor = color;\n}\n"),y(e,a.DILATE,"// Increase the bright areas in an image\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\nuniform vec2 texelSize;\n\nfloat luma(vec3 color) {\n  // weighted grayscale with luminance values\n  // weights 77, 151, 28 taken from src/image/filters.js\n  return dot(color, vec3(0.300781, 0.589844, 0.109375));\n}\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n  float lum = luma(color.rgb);\n\n  // set current color as the brightest neighbor color\n\n  vec4 neighbors[4];\n  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));\n  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));\n  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));\n  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));\n\n  for (int i = 0; i < 4; i++) {\n    vec4 neighborColor = neighbors[i];\n    float neighborLum = luma(neighborColor.rgb);\n\n    if (neighborLum > lum) {\n      color = neighborColor;\n      lum = neighborLum;\n    }\n  }\n\n  gl_FragColor = color;\n}\n"),y(e,a.BLUR,"precision highp float;\n\n// Two-pass blur filter, unweighted kernel.\n// See also a similar blur at Adam Ferriss' repo of shader examples:\n// https://github.com/aferriss/p5jsShaderExamples/blob/gh-pages/4_image-effects/4-9_single-pass-blur/effect.frag\n\n\nuniform sampler2D tex0;\nvarying vec2 vTexCoord;\nuniform vec2 direction;\nuniform vec2 canvasSize;\nuniform float radius;\n\nfloat random(vec2 p) {\n  vec3 p3  = fract(vec3(p.xyx) * .1031);\n  p3 += dot(p3, p3.yzx + 33.33);\n  return fract((p3.x + p3.y) * p3.z);\n}\n\n// This isn't a real Gaussian weight, it's a quadratic weight. It's what the\n// CPU mode's blur uses though, so we also use it here to match.\nfloat quadWeight(float x, float e) {\n  return pow(e-abs(x), 2.);\n}\n\nvoid main(){\n  vec2 uv = vTexCoord;\n\n  // A reasonable maximum number of samples\n  const float maxSamples = 64.0;\n\n  float numSamples = floor(7. * radius);\n  if (fract(numSamples / 2.) == 0.) {\n    numSamples++;\n  }\n  vec4 avg = vec4(0.0);\n  float total = 0.0;\n\n  // Calculate the spacing to avoid skewing if numSamples > maxSamples\n  float spacing = 1.0;\n  if (numSamples > maxSamples) {\n    spacing = numSamples / maxSamples;\n    numSamples = maxSamples;\n  }\n\n  float randomOffset = (spacing - 1.0) * mix(-0.5, 0.5, random(gl_FragCoord.xy));\n  for (float i = 0.0; i < maxSamples; i++) {\n    if (i >= numSamples) break;\n\n    float sample = i * spacing - (numSamples - 1.0) * 0.5 * spacing + randomOffset;\n    vec2 sampleCoord = uv + vec2(sample, sample) / canvasSize * direction;\n    float weight = quadWeight(sample, (numSamples - 1.0) * 0.5 * spacing);\n\n    avg += weight * texture2D(tex0, sampleCoord);\n    total += weight;\n  }\n\n  avg /= total;\n  gl_FragColor = avg;\n}\n"),y(e,a.POSTERIZE,"// Limit color space for a stylized cartoon / poster effect\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\nuniform float filterParameter;\n\nvec3 quantize(vec3 color, float n) {\n  // restrict values to N options/bins\n  // and floor each channel to nearest value\n  //\n  // eg. when N = 5, values = 0.0, 0.25, 0.50, 0.75, 1.0\n  // then quantize (0.1, 0.7, 0.9) -> (0.0, 0.5, 1.0)\n\n  color = color * n;\n  color = floor(color);\n  color = color / (n - 1.0);\n  return color;\n}\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n\n  vec3 restrictedColor = quantize(color.rgb / color.a, filterParameter);\n\n  gl_FragColor = vec4(restrictedColor.rgb * color.a, color.a);\n}\n"),y(e,a.OPAQUE,"// Set alpha channel to entirely opaque\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n  gl_FragColor = vec4(color.rgb / color.a, 1.0);\n}\n"),y(e,a.INVERT,"// Set each pixel to inverse value\n// Note that original INVERT does not change the opacity, so this follows suit\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\n\nvoid main() {\nvec4 color = texture2D(tex0, vTexCoord);\nvec3 origColor = color.rgb / color.a;\nvec3 invertedColor = vec3(1.0) - origColor;\ngl_FragColor = vec4(invertedColor * color.a, color.a);\n}\n"),y(e,a.THRESHOLD,"// Convert pixels to either white or black, \n// depending on if their luma is above or below filterParameter\n\nprecision highp float;\n\nvarying vec2 vTexCoord;\n\nuniform sampler2D tex0;\nuniform float filterParameter;\n\nfloat luma(vec3 color) {\n  // weighted grayscale with luminance values\n  return dot(color, vec3(0.2126, 0.7152, 0.0722));\n}\n\nvoid main() {\n  vec4 color = texture2D(tex0, vTexCoord);\n  float gray = luma(color.rgb / color.a);\n  // floor() used to match src/image/filters.js\n  float threshold = floor(filterParameter * 255.0) / 255.0;\n  float blackOrWhite = step(threshold, gray);\n  gl_FragColor = vec4(vec3(blackOrWhite) * color.a, color.a);\n}\n");var I=e;function k(e,t,n,r,i,o,a,s,l,c){var u=t.getParameter(t.FRAMEBUFFER_BINDING),p=o*a*(t.bindFramebuffer(t.FRAMEBUFFER,n),n=s===t.RGBA?4:3),d=l===t.UNSIGNED_BYTE?Uint8Array:Float32Array;if(e instanceof d&&e.length===p||(e=new d(p)),t.readPixels(r,c?c-i-a:i,o,a,s,l,e),t.bindFramebuffer(t.FRAMEBUFFER,u),c)for(var h=Math.floor(a/2),m=new d(o*n),f=0;f<h;f++){var g=f*o*4,y=(a-f-1)*o*4;m.set(e.subarray(g,g+4*o)),e.copyWithin(g,y,y+4*o),e.set(m,y)}return e}function j(e,t,n,r,i,o,a){var s=e.getParameter(e.FRAMEBUFFER_BINDING);return e.bindFramebuffer(e.FRAMEBUFFER,t),t=i===e.RGBA?4:3,t=new(o===e.UNSIGNED_BYTE?Uint8Array:Float32Array)(t),e.readPixels(n,a?a-r-1:r,1,1,i,o,t),e.bindFramebuffer(e.FRAMEBUFFER,s),Array.from(t)}o.default.prototype.setAttributes=function(e,t){if(void 0===this._glAttributes)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else{var n=!0;if(void 0!==t?(null===this._glAttributes&&(this._glAttributes={}),this._glAttributes[e]!==t&&(this._glAttributes[e]=t,n=!1)):e instanceof Object&&this._glAttributes!==e&&(this._glAttributes=e,n=!1),this._renderer.isP3D&&!n){if(!this._setupDone)for(var r in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(r))return void o.default._friendlyError("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()");this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}},o.default.RendererGL=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e);var n=function(e){return function(){var t,n,r=g(e);return t=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),1}catch(e){}}}()?(t=g(this).constructor,Reflect.construct(r,arguments,t)):r.apply(this,arguments),r=this,!(n=t)||"object"!==i(n)&&"function"!=typeof n?f(r):n}}(r);function r(e,t,i,s){if(this instanceof r)return(e=n.call(this,e,t,i))._setAttributeDefaults(t),e._initContext(),e.isP3D=!0,e.geometryBuilder=void 0,e.GL=e.drawingContext,e._pInst._setProperty("drawingContext",e.drawingContext),e._isErasing=!1,e._clipDepths=[],e._isClipApplied=!1,e._stencilTestOn=!1,e._enableLighting=!1,e.ambientLightColors=[],e.mixedAmbientLight=[],e.mixedSpecularColor=[],e.specularColors=[1,1,1],e.directionalLightDirections=[],e.directionalLightDiffuseColors=[],e.directionalLightSpecularColors=[],e.pointLightPositions=[],e.pointLightDiffuseColors=[],e.pointLightSpecularColors=[],e.spotLightPositions=[],e.spotLightDirections=[],e.spotLightDiffuseColors=[],e.spotLightSpecularColors=[],e.spotLightAngle=[],e.spotLightConc=[],e.activeImageLight=null,e.diffusedTextures=new Map,e.specularTextures=new Map,e.drawMode=a.FILL,e.curFillColor=e._cachedFillStyle=[1,1,1,1],e.curAmbientColor=e._cachedFillStyle=[1,1,1,1],e.curSpecularColor=e._cachedFillStyle=[0,0,0,0],e.curEmissiveColor=e._cachedFillStyle=[0,0,0,0],e.curStrokeColor=e._cachedStrokeStyle=[0,0,0,1],e.curBlendMode=a.BLEND,e.preEraseBlend=void 0,e._cachedBlendMode=void 0,e.webglVersion===a.WEBGL2?e.blendExt=e.GL:e.blendExt=e.GL.getExtension("EXT_blend_minmax"),e._isBlending=!1,e._hasSetAmbient=!1,e._useSpecularMaterial=!1,e._useEmissiveMaterial=!1,e._useNormalMaterial=!1,e._useShininess=1,e._useMetalness=0,e._useLineColor=!1,e._useVertexColor=!1,e.registerEnabled=new Set,e._tint=[255,255,255,255],e.constantAttenuation=1,e.linearAttenuation=0,e.quadraticAttenuation=0,e.uModelMatrix=new o.default.Matrix,e.uViewMatrix=new o.default.Matrix,e.uMVMatrix=new o.default.Matrix,e.uPMatrix=new o.default.Matrix,e.uNMatrix=new o.default.Matrix("mat3"),e.curMatrix=new o.default.Matrix("mat3"),e._currentNormal=new o.default.Vector(0,0,1),e._curCamera=new o.default.Camera(f(e)),e._curCamera._computeCameraDefaultSettings(),e._curCamera._setDefaultCamera(),e.filterCamera=new o.default.Camera(f(e)),e.filterCamera._computeCameraDefaultSettings(),e.filterCamera._setDefaultCamera(),e.prevTouches=[],e.zoomVelocity=0,e.rotateVelocity=new o.default.Vector(0,0),e.moveVelocity=new o.default.Vector(0,0),e.executeZoom=!1,e.executeRotateAndMove=!1,e.specularShader=void 0,e.sphereMapping=void 0,e.diffusedShader=void 0,e._defaultLightShader=void 0,e._defaultImmediateModeShader=void 0,e._defaultNormalShader=void 0,e._defaultColorShader=void 0,e._defaultPointShader=void 0,e.userFillShader=void 0,e.userStrokeShader=void 0,e.userPointShader=void 0,e.retainedMode={geometry:{},buffers:{stroke:[new o.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",f(e)),new o.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",f(e)),new o.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",f(e)),new o.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",f(e)),new o.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",f(e))],fill:[new o.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",f(e),e._vToNArray),new o.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",f(e),e._vToNArray),new o.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",f(e)),new o.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",f(e)),new o.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",f(e),e._flatten)],text:[new o.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",f(e),e._vToNArray),new o.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",f(e),e._flatten)]}},e.immediateMode={geometry:new o.default.Geometry,shapeMode:a.TRIANGLE_FAN,contourIndices:[],_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new o.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",f(e),e._vToNArray),new o.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",f(e),e._vToNArray),new o.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",f(e)),new o.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",f(e)),new o.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",f(e),e._flatten)],stroke:[new o.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",f(e)),new o.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",f(e)),new o.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",f(e)),new o.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",f(e)),new o.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",f(e))],point:e.GL.createBuffer()}},e.pointSize=5,e.curStrokeWeight=1,e.curStrokeCap=a.ROUND,e.curStrokeJoin=a.ROUND,e.textures=new Map,e.framebuffers=new Set,e.activeFramebuffers=[],e.filterShader=void 0,e.filterLayer=void 0,e.filterLayerTemp=void 0,e.defaultFilterShaders={},e.textureMode=a.IMAGE,e.textureWrapX=a.CLAMP,e.textureWrapY=a.CLAMP,e._tex=null,e._curveTightness=6,e._lookUpTableBezier=[],e._lookUpTableQuadratic=[],e._lutBezierDetail=0,e._lutQuadraticDetail=0,e.isProcessingVertices=!1,e._tessy=e._initTessy(),e.fontInfos={},e._curShader=void 0,e;throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"beginGeometry",value:function(){if(this.geometryBuilder)throw new Error("It looks like `beginGeometry()` is being called while another p5.Geometry is already being build.");this.geometryBuilder=new s.default(this)}},{key:"endGeometry",value:function(){var e;if(this.geometryBuilder)return e=this.geometryBuilder.finish(),this.geometryBuilder=void 0,e;throw new Error("Make sure you call beginGeometry() before endGeometry()!")}},{key:"buildGeometry",value:function(e){return this.beginGeometry(),e(),this.endGeometry()}},{key:"_setAttributeDefaults",value:function(e){var t={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!0,preserveDrawingBuffer:!0,perPixelLighting:!0,version:2};null===e._glAttributes?e._glAttributes=t:e._glAttributes=Object.assign(t,e._glAttributes)}},{key:"_initContext",value:function(){if(1!==this._pInst._glAttributes.version&&(this.drawingContext=this.canvas.getContext("webgl2",this._pInst._glAttributes)),this.webglVersion=this.drawingContext?a.WEBGL2:a.WEBGL,this._pInst._setProperty("webglVersion",this.webglVersion),this.drawingContext||(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes)),null===this.drawingContext)throw new Error("Error creating webgl context");var e=this.drawingContext;e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}},{key:"_getParam",value:function(){var e=this.drawingContext;return e.getParameter(e.MAX_TEXTURE_SIZE)}},{key:"_adjustDimensions",value:function(e,t){this._maxTextureSize||(this._maxTextureSize=this._getParam());var n=this._maxTextureSize,r=(o.default.prototype._maxAllowedPixelDimensions,n=Math.floor(n/this.pixelDensity()),Math.min(e,n));return n=Math.min(t,n),r===e&&n===t||console.warn("Warning: The requested width/height exceeds hardware limits. "+"Adjusting dimensions to width: ".concat(r,", height: ").concat(n,".")),{adjustedWidth:r,adjustedHeight:n}}},{key:"_resetContext",value:function(e,t){var n,r=this.width,i=this.height,a=this.canvas.id,s=this._pInst instanceof o.default.Graphics;s?((n=this._pInst).canvas.parentNode.removeChild(n.canvas),n.canvas=document.createElement("canvas"),(n._pInst._userNode||document.body).appendChild(n.canvas),o.default.Element.call(n,n.canvas,n._pInst),n.width=r,n.height=i):((n=this.canvas)&&n.parentNode.removeChild(n),(n=document.createElement("canvas")).id=a,(this._pInst._userNode||document.body).appendChild(n),this._pInst.canvas=n,this.canvas=n),a=new o.default.RendererGL(this._pInst.canvas,this._pInst,!s),this._pInst._setProperty("_renderer",a),a.resize(r,i),a._applyDefaults(),s||this._pInst._elements.push(a),"function"==typeof t&&setTimeout((function(){t.apply(window._renderer,e)}),0)}},{key:"_update",value:function(){this.uModelMatrix.reset(),this.uViewMatrix.set(this._curCamera.cameraMatrix),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clearStencil(0),this.GL.clear(this.GL.DEPTH_BUFFER_BIT|this.GL.STENCIL_BUFFER_BIT),this.GL.disable(this.GL.STENCIL_TEST)}},{key:"background",value:function(){var e=(r=(r=this._pInst).color.apply(r,arguments)).levels[0]/255,t=r.levels[1]/255,n=r.levels[2]/255,r=r.levels[3]/255;this.clear(e,t,n,r)}},{key:"fill",value:function(e,t,n,r){var i=o.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=i._array,this.drawMode=a.FILL,this._useNormalMaterial=!1,this._tex=null}},{key:"stroke",value:function(e,t,n,r){var i=o.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=i._array}},{key:"strokeCap",value:function(e){this.curStrokeCap=e}},{key:"strokeJoin",value:function(e){this.curStrokeJoin=e}},{key:"getFilterLayer",value:function(){return this.filterLayer||(this.filterLayer=this._pInst.createFramebuffer()),this.filterLayer}},{key:"getFilterLayerTemp",value:function(){return this.filterLayerTemp||(this.filterLayerTemp=this._pInst.createFramebuffer()),this.filterLayerTemp}},{key:"matchSize",value:function(e,t){e.width===t.width&&e.height===t.height||e.resize(t.width,t.height),e.pixelDensity()!==t.pixelDensity()&&e.pixelDensity(t.pixelDensity())}},{key:"filter",value:function(){var e,t,n=this,r=this.getFilterLayer(),i=void 0,s=void 0,l=("string"==typeof(arguments.length<=0?void 0:arguments[0])?(s=arguments.length<=0?void 0:arguments[0],y(e={},a.BLUR,3),y(e,a.POSTERIZE,4),y(e,a.THRESHOLD,.5),i=s in e&&void 0===(arguments.length<=1?void 0:arguments[1])?e[s]:arguments.length<=1?void 0:arguments[1],s in this.defaultFilterShaders||(this.defaultFilterShaders[s]=new o.default.Shader(r._renderer,"uniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nattribute vec3 aPosition;\n// texcoords only come from p5 to vertex shader\n// so pass texcoords on to the fragment shader in a varying variable\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main() {\n  // transferring texcoords for the frag shader\n  vTexCoord = aTexCoord;\n\n  // copy position with a fourth coordinate for projection (1.0 is normal)\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n}\n",I[s])),this.filterShader=this.defaultFilterShaders[s]):this.filterShader=arguments.length<=0?void 0:arguments[0],this.activeFramebuffer()||this),c=(this.matchSize(r,l),r.draw((function(){return n._pInst.clear()})),[1/(l.width*l.pixelDensity()),1/(l.height*l.pixelDensity())]);s===a.BLUR?(t=this.getFilterLayerTemp(),this.matchSize(t,l),this._pInst.push(),this._pInst.noStroke(),this._pInst.blendMode(a.BLEND),this._pInst.shader(this.filterShader),this.filterShader.setUniform("texelSize",c),this.filterShader.setUniform("canvasSize",[l.width,l.height]),this.filterShader.setUniform("radius",Math.max(1,i)),t.draw((function(){n.filterShader.setUniform("direction",[1,0]),n.filterShader.setUniform("tex0",l),n._pInst.clear(),n._pInst.shader(n.filterShader),n._pInst.noLights(),n._pInst.plane(l.width,l.height)})),r.draw((function(){n.filterShader.setUniform("direction",[0,1]),n.filterShader.setUniform("tex0",t),n._pInst.clear(),n._pInst.shader(n.filterShader),n._pInst.noLights(),n._pInst.plane(l.width,l.height)})),this._pInst.pop()):r.draw((function(){n._pInst.noStroke(),n._pInst.blendMode(a.BLEND),n._pInst.shader(n.filterShader),n.filterShader.setUniform("tex0",l),n.filterShader.setUniform("texelSize",c),n.filterShader.setUniform("canvasSize",[l.width,l.height]),n.filterShader.setUniform("filterParameter",i),n._pInst.noLights(),n._pInst.plane(l.width,l.height)})),this._pInst.push(),this._pInst.noStroke(),this.clear(),this._pInst.push(),this._pInst.imageMode(a.CORNER),this._pInst.blendMode(a.BLEND),l.filterCamera._resize(),this._pInst.setCamera(l.filterCamera),this._pInst.resetMatrix(),this._pInst.image(r,-l.width/2,-l.height/2,l.width,l.height),this._pInst.clearDepth(),this._pInst.pop(),this._pInst.pop()}},{key:"pixelDensity",value:function(e){return e?this._pInst.pixelDensity(e):this._pInst.pixelDensity()}},{key:"blendMode",value:function(e){e===a.DARKEST||e===a.LIGHTEST||e===a.ADD||e===a.BLEND||e===a.SUBTRACT||e===a.SCREEN||e===a.EXCLUSION||e===a.REPLACE||e===a.MULTIPLY||e===a.REMOVE?this.curBlendMode=e:e!==a.BURN&&e!==a.OVERLAY&&e!==a.HARD_LIGHT&&e!==a.SOFT_LIGHT&&e!==a.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")}},{key:"erase",value:function(e,t){this._isErasing||(this.preEraseBlend=this.curBlendMode,this._isErasing=!0,this.blendMode(a.REMOVE),this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,e/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,t/255])}},{key:"noErase",value:function(){this._isErasing&&(this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.curBlendMode=this.preEraseBlend,this.blendMode(this.preEraseBlend),this._isErasing=!1,this._applyBlendMode())}},{key:"drawTarget",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||this}},{key:"beginClip",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};(h(g(r.prototype),"beginClip",this).call(this,e),this.drawTarget()._isClipApplied=!0,e=this.GL).clearStencil(0),e.clear(e.STENCIL_BUFFER_BIT),e.enable(e.STENCIL_TEST),this._stencilTestOn=!0,e.stencilFunc(e.ALWAYS,1,255),e.stencilOp(e.KEEP,e.KEEP,e.REPLACE),e.disable(e.DEPTH_TEST),this._pInst.push(),this._pInst.resetShader(),this._doFill&&this._pInst.fill(0,0),this._doStroke&&this._pInst.stroke(0,0)}},{key:"endClip",value:function(){this._pInst.pop();var e=this.GL;e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.stencilFunc(this._clipInvert?e.EQUAL:e.NOTEQUAL,0,255),e.enable(e.DEPTH_TEST),this._clipDepths.push(this._pushPopDepth),h(g(r.prototype),"endClip",this).call(this)}},{key:"_clearClip",value:function(){this.GL.clearStencil(1),this.GL.clear(this.GL.STENCIL_BUFFER_BIT),0<this._clipDepths.length&&this._clipDepths.pop(),this.drawTarget()._isClipApplied=!1}},{key:"strokeWeight",value:function(e){this.curStrokeWeight!==e&&(this.pointSize=e,this.curStrokeWeight=e)}},{key:"_getPixel",value:function(e,t){var n=this.GL;return j(n,null,e,t,n.RGBA,n.UNSIGNED_BYTE,this._pInst.height*this._pInst.pixelDensity())}},{key:"loadPixels",value:function(){var e,t,n=this._pixelsState;!0!==this._pInst._glAttributes.preserveDrawingBuffer?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):(e=this._pInst._pixelDensity,t=this.GL,n._setProperty("pixels",k(n.pixels,t,null,0,0,this.width*e,this.height*e,t.RGBA,t.UNSIGNED_BYTE,this.height*e)))}},{key:"updatePixels",value:function(){var e=this._getTempFramebuffer();e.pixels=this._pixelsState.pixels,e.updatePixels(),this._pInst.push(),this._pInst.resetMatrix(),this._pInst.clear(),this._pInst.imageMode(a.CENTER),this._pInst.image(e,0,0),this._pInst.pop(),this.GL.clearDepth(1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"_getTempFramebuffer",value:function(){return this._tempFramebuffer||(this._tempFramebuffer=this._pInst.createFramebuffer({format:a.UNSIGNED_BYTE,useDepth:this._pInst._glAttributes.depth,depthFormat:a.UNSIGNED_INT,antialias:this._pInst._glAttributes.antialias})),this._tempFramebuffer}},{key:"geometryInHash",value:function(e){return void 0!==this.retainedMode.geometry[e]}},{key:"viewport",value:function(e,t){this._viewport=[0,0,e,t],this.GL.viewport(0,0,e,t)}},{key:"resize",value:function(e,t){o.default.Renderer.prototype.resize.call(this,e,t),this._origViewport={width:this.GL.drawingBufferWidth,height:this.GL.drawingBufferHeight},this.viewport(this._origViewport.width,this._origViewport.height),this._curCamera._resize();var n=(void 0!==(e=this._pixelsState).pixels&&e._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4)),!0);t=!1,e=void 0;try{for(var r,i=this.framebuffers[Symbol.iterator]();!(n=(r=i.next()).done);n=!0)r.value._canvasSizeChanged()}catch(n){t=!0,e=n}finally{try{n||null==i.return||i.return()}finally{if(t)throw e}}}},{key:"clear",value:function(){var e=(arguments.length<=0?void 0:arguments[0])||0,t=(arguments.length<=1?void 0:arguments[1])||0,n=(arguments.length<=2?void 0:arguments[2])||0,r=(arguments.length<=3?void 0:arguments[3])||0,i=this.activeFramebuffer();i&&i.format===a.UNSIGNED_BYTE&&!i.antialias&&0===r&&(r=1e-10),this.GL.clearColor(e*r,t*r,n*r,r),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)}},{key:"clearDepth",value:function(){this.GL.clearDepth(0<arguments.length&&void 0!==arguments[0]?arguments[0]:1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"applyMatrix",value:function(e,t,n,r,i,a){16===arguments.length?o.default.Matrix.prototype.apply.apply(this.uModelMatrix,arguments):this.uModelMatrix.apply([e,t,0,0,n,r,0,0,0,0,1,0,i,a,0,1])}},{key:"translate",value:function(e,t,n){return e instanceof o.default.Vector&&(n=e.z,t=e.y,e=e.x),this.uModelMatrix.translate([e,t,n]),this}},{key:"scale",value:function(e,t,n){return this.uModelMatrix.scale(e,t,n),this}},{key:"rotate",value:function(e,t){return void 0===t?this.rotateZ(e):(o.default.Matrix.prototype.rotate.apply(this.uModelMatrix,arguments),this)}},{key:"rotateX",value:function(e){return this.rotate(e,1,0,0),this}},{key:"rotateY",value:function(e){return this.rotate(e,0,1,0),this}},{key:"rotateZ",value:function(e){return this.rotate(e,0,0,1),this}},{key:"push",value:function(){var e=o.default.Renderer.prototype.push.apply(this),t=e.properties;return t.uModelMatrix=this.uModelMatrix.copy(),t.uViewMatrix=this.uViewMatrix.copy(),t.uPMatrix=this.uPMatrix.copy(),t._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),t.ambientLightColors=this.ambientLightColors.slice(),t.specularColors=this.specularColors.slice(),t.directionalLightDirections=this.directionalLightDirections.slice(),t.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),t.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),t.pointLightPositions=this.pointLightPositions.slice(),t.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),t.pointLightSpecularColors=this.pointLightSpecularColors.slice(),t.spotLightPositions=this.spotLightPositions.slice(),t.spotLightDirections=this.spotLightDirections.slice(),t.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),t.spotLightSpecularColors=this.spotLightSpecularColors.slice(),t.spotLightAngle=this.spotLightAngle.slice(),t.spotLightConc=this.spotLightConc.slice(),t.userFillShader=this.userFillShader,t.userStrokeShader=this.userStrokeShader,t.userPointShader=this.userPointShader,t.pointSize=this.pointSize,t.curStrokeWeight=this.curStrokeWeight,t.curStrokeColor=this.curStrokeColor,t.curFillColor=this.curFillColor,t.curAmbientColor=this.curAmbientColor,t.curSpecularColor=this.curSpecularColor,t.curEmissiveColor=this.curEmissiveColor,t._hasSetAmbient=this._hasSetAmbient,t._useSpecularMaterial=this._useSpecularMaterial,t._useEmissiveMaterial=this._useEmissiveMaterial,t._useShininess=this._useShininess,t._useMetalness=this._useMetalness,t.constantAttenuation=this.constantAttenuation,t.linearAttenuation=this.linearAttenuation,t.quadraticAttenuation=this.quadraticAttenuation,t._enableLighting=this._enableLighting,t._useNormalMaterial=this._useNormalMaterial,t._tex=this._tex,t.drawMode=this.drawMode,t._currentNormal=this._currentNormal,t.curBlendMode=this.curBlendMode,t.activeImageLight=this.activeImageLight,e}},{key:"pop",value:function(){var e;0<this._clipDepths.length&&this._pushPopDepth===this._clipDepths[this._clipDepths.length-1]&&this._clearClip();for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];(e=h(g(r.prototype),"pop",this)).call.apply(e,[this].concat(n)),this._applyStencilTestIfClipping()}},{key:"_applyStencilTestIfClipping",value:function(){var e=this.drawTarget();e._isClipApplied!==this._stencilTestOn&&(e._isClipApplied?(this.GL.enable(this.GL.STENCIL_TEST),this._stencilTestOn=!0):(this.GL.disable(this.GL.STENCIL_TEST),this._stencilTestOn=!1))}},{key:"resetMatrix",value:function(){return this.uModelMatrix.reset(),this.uViewMatrix.set(this._curCamera.cameraMatrix),this}},{key:"_getImmediateStrokeShader",value:function(){var e=this.userStrokeShader;return e&&e.isStrokeShader()?e:this._getLineShader()}},{key:"_getRetainedStrokeShader",value:function(){return this._getImmediateStrokeShader()}},{key:"_getSphereMapping",value:function(e){return this.sphereMapping||(this.sphereMapping=this._pInst.createFilterShader(E)),this.uNMatrix.inverseTranspose(this.uViewMatrix),this.uNMatrix.invert3x3(this.uNMatrix),this.sphereMapping.setUniform("uFovY",this._curCamera.cameraFOV),this.sphereMapping.setUniform("uAspect",this._curCamera.aspectRatio),this.sphereMapping.setUniform("uNewNormalMatrix",this.uNMatrix.mat3),this.sphereMapping.setUniform("uSampler",e),this.sphereMapping}},{key:"_getImmediateFillShader",value:function(){var e=this.userFillShader;if(this._useNormalMaterial&&(!e||!e.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!e||!e.isLightShader())return this._getLightShader()}else if(this._tex){if(!e||!e.isTextureShader())return this._getLightShader()}else if(!e)return this._getImmediateModeShader();return e}},{key:"_getRetainedFillShader",value:function(){if(this._useNormalMaterial)return this._getNormalShader();var e=this.userFillShader;if(this._enableLighting){if(!e||!e.isLightShader())return this._getLightShader()}else if(this._tex){if(!e||!e.isTextureShader())return this._getLightShader()}else if(!e)return this._getColorShader();return e}},{key:"_getImmediatePointShader",value:function(){var e=this.userPointShader;return e&&e.isPointShader()?e:this._getPointShader()}},{key:"_getRetainedLineShader",value:function(){return this._getImmediateLineShader()}},{key:"baseMaterialShader",value:function(){if(this._pInst._glAttributes.perPixelLighting)return this._getLightShader();throw new Error("The material shader does not support hooks without perPixelLighting. Try turning it back on.")}},{key:"_getLightShader",value:function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new o.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+T.phongVert,this._webGL2CompatibilityPrefix("frag","highp")+T.phongFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","vec3 getLocalNormal":"(vec3 normal) { return normal; }","vec3 getWorldNormal":"(vec3 normal) { return normal; }","vec2 getUV":"(vec2 uv) { return uv; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","Inputs getPixelInputs":"(Inputs inputs) { return inputs; }","vec4 combineColors":"(ColorComponents components) {\n                vec4 color = vec4(0.);\n                color.rgb += components.diffuse * components.baseColor;\n                color.rgb += components.ambient * components.ambientColor;\n                color.rgb += components.specular * components.specularColor;\n                color.rgb += components.emissive;\n                color.a = components.opacity;\n                return color;\n              }","vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}}):this._defaultLightShader=new o.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+T.lightVert,this._webGL2CompatibilityPrefix("frag","highp")+T.lightTextureFrag)),this._defaultLightShader}},{key:"_getImmediateModeShader",value:function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new o.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+T.immediateVert,this._webGL2CompatibilityPrefix("frag","mediump")+T.vertexColorFrag)),this._defaultImmediateModeShader}},{key:"baseNormalShader",value:function(){return this._getNormalShader()}},{key:"_getNormalShader",value:function(){return this._defaultNormalShader||(this._defaultNormalShader=new o.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+T.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+T.normalFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","vec3 getLocalNormal":"(vec3 normal) { return normal; }","vec3 getWorldNormal":"(vec3 normal) { return normal; }","vec2 getUV":"(vec2 uv) { return uv; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}})),this._defaultNormalShader}},{key:"baseColorShader",value:function(){return this._getColorShader()}},{key:"_getColorShader",value:function(){return this._defaultColorShader||(this._defaultColorShader=new o.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+T.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+T.basicFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","vec3 getLocalNormal":"(vec3 normal) { return normal; }","vec3 getWorldNormal":"(vec3 normal) { return normal; }","vec2 getUV":"(vec2 uv) { return uv; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}})),this._defaultColorShader}},{key:"pointShader",value:function(){return this._getPointShader()}},{key:"_getPointShader",value:function(){return this._defaultPointShader||(this._defaultPointShader=new o.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+T.pointVert,this._webGL2CompatibilityPrefix("frag","mediump")+T.pointFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","float getPointSize":"(float size) { return size; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","bool shouldDiscard":"(bool outside) { return outside; }","void afterFragment":"() {}"}})),this._defaultPointShader}},{key:"baseStrokeShader",value:function(){return this._getLineShader()}},{key:"_getLineShader",value:function(){return this._defaultLineShader||(this._defaultLineShader=new o.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+T.lineVert,this._webGL2CompatibilityPrefix("frag","mediump")+T.lineFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","float getStrokeWeight":"(float weight) { return weight; }","vec2 getLineCenter":"(vec2 center) { return center; }","vec2 getLinePosition":"(vec2 position) { return position; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","Inputs getPixelInputs":"(Inputs inputs) { return inputs; }","vec4 getFinalColor":"(vec4 color) { return color; }","bool shouldDiscard":"(bool outside) { return outside; }","void afterFragment":"() {}"}})),this._defaultLineShader}},{key:"_getFontShader",value:function(){return this._defaultFontShader||(this.webglVersion===a.WEBGL&&this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new o.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+T.fontVert,this._webGL2CompatibilityPrefix("frag","mediump")+T.fontFrag)),this._defaultFontShader}},{key:"_webGL2CompatibilityPrefix",value:function(e,t){var n="";return this.webglVersion===a.WEBGL2&&(n+="#version 300 es\n#define WEBGL2\n"),"vert"===e?n+="#define VERTEX_SHADER\n":"frag"===e&&(n+="#define FRAGMENT_SHADER\n"),t&&(n+="precision ".concat(t," float;\n")),n}},{key:"_getEmptyTexture",value:function(){var e;return this._emptyTexture||((e=new o.default.Image(1,1)).set(0,0,255),this._emptyTexture=new o.default.Texture(this,e)),this._emptyTexture}},{key:"getTexture",value:function(e){e instanceof o.default.Framebuffer&&(e=e.color);var t=this.textures.get(e);return t||(t=new o.default.Texture(this,e),this.textures.set(e,t),t)}},{key:"getDiffusedTexture",value:function(e){var t,n,r=this;return null!=this.diffusedTextures.get(e)?this.diffusedTextures.get(e):(t=Math.floor(e.height/e.width*200),n=this._pInst.createFramebuffer({width:200,height:t,density:1}),this.diffusedShader||(this.diffusedShader=this._pInst.createShader(T.imageLightVert,T.imageLightDiffusedFrag)),n.draw((function(){r._pInst.shader(r.diffusedShader),r.diffusedShader.setUniform("environmentMap",e),r._pInst.noStroke(),r._pInst.rectMode(a.CENTER),r._pInst.noLights(),r._pInst.rect(0,0,200,t)})),this.diffusedTextures.set(e,n),n)}},{key:"getSpecularTexture",value:function(e){var t=this;if(null!=this.specularTextures.get(e))return this.specularTextures.get(e);for(var n,r=[],i=this._pInst.createFramebuffer({width:512,height:512,density:1}),o=Math.log(512)/Math.log(2),a=(this.specularShader||(this.specularShader=this._pInst.createShader(T.imageLightVert,T.imageLightSpecularFrag)),512);1<=a;a/=2)!function(n){i.resize(n,n);var a=1-Math.log(n)/Math.log(2)/o;i.draw((function(){t._pInst.shader(t.specularShader),t._pInst.clear(),t.specularShader.setUniform("environmentMap",e),t.specularShader.setUniform("roughness",a),t._pInst.noStroke(),t._pInst.noLights(),t._pInst.plane(n,n)})),r.push(i.get().drawingContext.getImageData(0,0,n,n))}(a);return i.remove(),n=new c.MipmapTexture(this,r,{}),this.specularTextures.set(e,n),n}},{key:"activeFramebuffer",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||null}},{key:"createFramebuffer",value:function(e){return new o.default.Framebuffer(this,e)}},{key:"_setStrokeUniforms",value:function(e){e.bindShader(),e.setUniform("uUseLineColor",this._useLineColor),e.setUniform("uMaterialColor",this.curStrokeColor),e.setUniform("uStrokeWeight",this.curStrokeWeight),e.setUniform("uStrokeCap",w[this.curStrokeCap]),e.setUniform("uStrokeJoin",x[this.curStrokeJoin])}},{key:"_setFillUniforms",value:function(e){var t=this,n=(e.bindShader(),this.mixedSpecularColor=d(this.curSpecularColor),0<this._useMetalness&&(this.mixedSpecularColor=this.mixedSpecularColor.map((function(e,n){return t.curFillColor[n]*t._useMetalness+e*(1-t._useMetalness)}))),e.setUniform("uUseVertexColor",this._useVertexColor),e.setUniform("uMaterialColor",this.curFillColor),e.setUniform("isTexture",!!this._tex),this._tex&&e.setUniform("uSampler",this._tex),e.setUniform("uTint",this._tint),e.setUniform("uHasSetAmbient",this._hasSetAmbient),e.setUniform("uAmbientMatColor",this.curAmbientColor),e.setUniform("uSpecularMatColor",this.mixedSpecularColor),e.setUniform("uEmissiveMatColor",this.curEmissiveColor),e.setUniform("uSpecular",this._useSpecularMaterial),e.setUniform("uEmissive",this._useEmissiveMaterial),e.setUniform("uShininess",this._useShininess),e.setUniform("uMetallic",this._useMetalness),this._setImageLightUniforms(e),e.setUniform("uUseLighting",this._enableLighting),this.pointLightDiffuseColors.length/3);e.setUniform("uPointLightCount",n),e.setUniform("uPointLightLocation",this.pointLightPositions),e.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),e.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),n=this.directionalLightDiffuseColors.length/3,e.setUniform("uDirectionalLightCount",n),e.setUniform("uLightingDirection",this.directionalLightDirections),e.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),e.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),n=this.ambientLightColors.length/3,this.mixedAmbientLight=d(this.ambientLightColors),0<this._useMetalness&&(this.mixedAmbientLight=this.mixedAmbientLight.map((function(e){return e-=t._useMetalness,Math.max(0,e)}))),e.setUniform("uAmbientLightCount",n),e.setUniform("uAmbientColor",this.mixedAmbientLight),n=this.spotLightDiffuseColors.length/3,e.setUniform("uSpotLightCount",n),e.setUniform("uSpotLightAngle",this.spotLightAngle),e.setUniform("uSpotLightConc",this.spotLightConc),e.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),e.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),e.setUniform("uSpotLightLocation",this.spotLightPositions),e.setUniform("uSpotLightDirection",this.spotLightDirections),e.setUniform("uConstantAttenuation",this.constantAttenuation),e.setUniform("uLinearAttenuation",this.linearAttenuation),e.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),e.bindTextures()}},{key:"_setImageLightUniforms",value:function(e){var t;e.setUniform("uUseImageLight",null!=this.activeImageLight),this.activeImageLight&&(t=this.getDiffusedTexture(this.activeImageLight),e.setUniform("environmentMapDiffused",t),t=this.getSpecularTexture(this.activeImageLight),e.setUniform("environmentMapSpecular",t))}},{key:"_setPointUniforms",value:function(e){e.bindShader(),e.setUniform("uMaterialColor",this.curStrokeColor),e.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)}},{key:"_bindBuffer",value:function(e,t,n,r,i){t=t||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(t,e),void 0!==n&&((e=n)instanceof o.default.DataArray?e=n.dataArray():e instanceof(r||Float32Array)||(e=new(r||Float32Array)(e)),this.GL.bufferData(t,e,i||this.GL.STATIC_DRAW))}},{key:"_arraysEqual",value:function(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))}},{key:"_isTypedArray",value:function(e){return[Float32Array,Float64Array,Int16Array,Uint16Array,Uint32Array].some((function(t){return e instanceof t}))}},{key:"_flatten",value:function(e){return e.flat()}},{key:"_vToNArray",value:function(e){return e.flatMap((function(e){return[e.x,e.y,e.z]}))}},{key:"_bezierCoefficients",value:function(e){var t=e*e,n=1-e,r=n*n;return[r*n,3*r*e,3*n*t,t*e]}},{key:"_quadraticCoefficients",value:function(e){var t=1-e;return[t*t,2*t*e,e*e]}},{key:"_bezierToCatmull",value:function(e){return[e[1],e[1]+(e[2]-e[0])/this._curveTightness,e[2]-(e[3]-e[1])/this._curveTightness,e[2]]}},{key:"_initTessy",value:function(){var e=new l.default.GluTesselator;return e.gluTessCallback(l.default.gluEnum.GLU_TESS_VERTEX_DATA,(function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t.push(s)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}})),e.gluTessCallback(l.default.gluEnum.GLU_TESS_BEGIN,(function(e){e!==l.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(e))})),e.gluTessCallback(l.default.gluEnum.GLU_TESS_ERROR,(function(e){console.log("error callback"),console.log("error number: ".concat(e))})),e.gluTessCallback(l.default.gluEnum.GLU_TESS_COMBINE,(function(e,t,n){for(var r=new Array(o.default.RendererGL.prototype.tessyVertexSize).fill(0),i=0;i<n.length;i++)for(var a=0;a<r.length;a++)0!==n[i]&&t[i]&&(r[a]+=t[i][a]*n[i]);return r})),e.gluTessCallback(l.default.gluEnum.GLU_TESS_EDGE_FLAG,(function(e){})),e.gluTessProperty(l.default.gluEnum.GLU_TESS_WINDING_RULE,l.default.windingRule.GLU_TESS_WINDING_NONZERO),e}},{key:"_triangulate",value:function(e){var t=e[0]?e[0][2]:void 0,n=!0,r=!0,i=!1,a=void 0;try{for(var s,l=e[Symbol.iterator]();!(r=(s=l.next()).done);r=!0)for(var c=s.value,u=0;u<c.length;u+=o.default.RendererGL.prototype.tessyVertexSize)if(c[u+2]!==t){n=!1;break}}catch(e){i=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}n?this._tessy.gluTessNormal(0,0,1):this._tessy.gluTessNormal(0,0,0),i=[];var p=(this._tessy.gluTessBeginPolygon(i),!0),d=void(a=!1);try{for(var h,m=e[Symbol.iterator]();!(p=(h=m.next()).done);p=!0){var f=h.value;this._tessy.gluTessBeginContour();for(var g=0;g<f.length;g+=o.default.RendererGL.prototype.tessyVertexSize){var y=f.slice(g,g+o.default.RendererGL.prototype.tessyVertexSize);this._tessy.gluTessVertex(y,y)}this._tessy.gluTessEndContour()}}catch(e){a=!0,d=e}finally{try{p||null==m.return||m.return()}finally{if(a)throw d}}return this._tessy.gluTessEndPolygon(),i}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),r}(o.default.Renderer),o.default.prototype._assert3d=function(e){if(!this._renderer.isP3D)throw new Error("".concat(e,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},o.default.RendererGL.prototype.tessyVertexSize=12,e=o.default.RendererGL,n.default=e},{"../core/constants":272,"../core/main":283,"../core/p5.Renderer":286,"./GeometryBuilder":327,"./p5.Camera":332,"./p5.Framebuffer":334,"./p5.Matrix":336,"./p5.Shader":342,"./p5.Texture":343,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.copy-within":154,"core-js/modules/es.array.every":155,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.flat":160,"core-js/modules/es.array.flat-map":159,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.array.unscopables.flat":173,"core-js/modules/es.array.unscopables.flat-map":172,"core-js/modules/es.map":175,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.float64-array":220,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.int16-array":224,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint16-array":240,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,libtess:255,path:258}],342:[function(e,t,n){"use strict";e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.concat"),e("core-js/modules/es.array.index-of"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.array.slice"),e("core-js/modules/es.array.some"),e("core-js/modules/es.function.name"),e("core-js/modules/es.object.assign"),e("core-js/modules/es.object.keys"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(e=e("../core/main"))&&e.__esModule?e:{default:e};function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}r.default.Shader=function(){function e(t,n,r){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this._renderer=t,this._vertSrc=n,this._fragSrc=r,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[],this.hooks={uniforms:i.uniforms||{},declarations:i.declarations,helpers:i.helpers||{},vertex:i.vertex||{},fragment:i.fragment||{},modified:{vertex:i.modified&&i.modified.vertex||{},fragment:i.modified&&i.modified.fragment||{}}}}var t;return(t=[{key:"shaderSrc",value:function(e,t){var n,r,o,a,s,l=(e=i(e.split("void main"),2))[0],c=(e=e[1],"");for(n in this.hooks.uniforms)c+="uniform ".concat(n,";\n");for(r in this.hooks.declarations&&(c+=this.hooks.declarations+"\n"),this.hooks[t].declarations&&(c+=this.hooks[t].declarations+"\n"),this.hooks.helpers)c+="".concat(r).concat(this.hooks.helpers[r],"\n");for(o in this.hooks[t])"declarations"!==o&&(a=(s=i(o.split(" "),2))[0],s=s[1],this.hooks.modified[t][o]&&(c+="#define AUGMENTED_HOOK_"+s+"\n"),c+=a+" HOOK_"+s+this.hooks[t][o]+"\n");return l+c+"void main"+e}},{key:"version",value:function(){var e=/#version (.+)$/.exec(this.vertSrc());return e?e[1]:"100 es"}},{key:"vertSrc",value:function(){return this.shaderSrc(this._vertSrc,"vertex")}},{key:"fragSrc",value:function(){return this.shaderSrc(this._fragSrc,"fragment")}},{key:"inspectHooks",value:function(){for(var e in console.log("==== Vertex shader hooks: ===="),this.hooks.vertex)console.log((this.hooks.modified.vertex[e]?"[MODIFIED] ":"")+e+this.hooks.vertex[e]);for(var t in console.log(""),console.log("==== Fragment shader hooks: ===="),this.hooks.fragment)console.log((this.hooks.modified.fragment[t]?"[MODIFIED] ":"")+t+this.hooks.fragment[t]);for(var n in console.log(""),console.log("==== Helper functions: ===="),this.hooks.helpers)console.log(n+this.hooks.helpers[n])}},{key:"modify",value:function(e){r.default._validateParameters("p5.Shader.modify",arguments);var t,n={vertex:{},fragment:{},helpers:{}};for(t in e)"declarations"!==t&&"uniforms"!==t&&("vertexDeclarations"===t?n.vertex.declarations=(n.vertex.declarations||"")+"\n"+e[t]:"fragmentDeclarations"===t?n.fragment.declarations=(n.fragment.declarations||"")+"\n"+e[t]:this.hooks.vertex[t]?n.vertex[t]=e[t]:this.hooks.fragment[t]?n.fragment[t]=e[t]:n.helpers[t]=e[t]);var i,o,a=Object.assign({},this.hooks.modified.vertex),s=Object.assign({},this.hooks.modified.fragment);for(i in n.vertex||{})"declarations"!==i&&(a[i]=!0);for(o in n.fragment||{})"declarations"!==o&&(s[o]=!0);return new r.default.Shader(this._renderer,this._vertSrc,this._fragSrc,{declarations:(this.hooks.declarations||"")+"\n"+(e.declarations||""),uniforms:Object.assign({},this.hooks.uniforms,e.uniforms||{}),fragment:Object.assign({},this.hooks.fragment,n.fragment||{}),vertex:Object.assign({},this.hooks.vertex,n.vertex||{}),helpers:Object.assign({},this.hooks.helpers,n.helpers||{}),modified:{vertex:a,fragment:s}})}},{key:"init",value:function(){if(0===this._glProgram){var e,t=this._renderer.GL;if(this._vertShader=t.createShader(t.VERTEX_SHADER),t.shaderSource(this._vertShader,this.vertSrc()),t.compileShader(this._vertShader),!t.getShaderParameter(this._vertShader,t.COMPILE_STATUS))return e=t.getShaderInfoLog(this._vertShader),console.error(e),null;if(this._fragShader=t.createShader(t.FRAGMENT_SHADER),t.shaderSource(this._fragShader,this.fragSrc()),t.compileShader(this._fragShader),!t.getShaderParameter(this._fragShader,t.COMPILE_STATUS))return e=t.getShaderInfoLog(this._fragShader),console.error(e),null;this._glProgram=t.createProgram(),t.attachShader(this._glProgram,this._vertShader),t.attachShader(this._glProgram,this._fragShader),t.linkProgram(this._glProgram),t.getProgramParameter(this._glProgram,t.LINK_STATUS)||r.default._friendlyError("Snap! Error linking shader program: ".concat(t.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this}},{key:"setDefaultUniforms",value:function(){for(var e in this.hooks.uniforms){var t,n=i(e.split(" "),2)[1];null!=(t=(e=this.hooks.uniforms[e])instanceof Function?e():e)&&this.setUniform(n,t)}}},{key:"copyToContext",value:function(e){var t=new r.default.Shader(e._renderer,this._vertSrc,this._fragSrc);return t.ensureCompiledOnContext(e),t}},{key:"ensureCompiledOnContext",value:function(e){if(0!==this._glProgram&&this._renderer!==e._renderer)throw new Error("The shader being run is attached to a different context. Do you need to copy it to this context first with .copyToContext()?");0===this._glProgram&&(this._renderer=e._renderer,this.init())}},{key:"_loadAttributes",value:function(){if(!this._loadedAttributes){this.attributes={};for(var e=this._renderer.GL,t=e.getProgramParameter(this._glProgram,e.ACTIVE_ATTRIBUTES),n=0;n<t;++n){var r=e.getActiveAttrib(this._glProgram,n),i=r.name,o=e.getAttribLocation(this._glProgram,i),a={};a.name=i,a.location=o,a.index=n,a.type=r.type,a.size=r.size,this.attributes[i]=a}this._loadedAttributes=!0}}},{key:"_loadUniforms",value:function(){if(!this._loadedUniforms){for(var e=this._renderer.GL,t=e.getProgramParameter(this._glProgram,e.ACTIVE_UNIFORMS),n=0,r=0;r<t;++r){var i=e.getActiveUniform(this._glProgram,r),o={},a=(o.location=e.getUniformLocation(this._glProgram,i.name),o.size=i.size,i.name);1<i.size&&(a=a.substring(0,a.indexOf("[0]"))),o.name=a,o.type=i.type,o._cachedData=void 0,o.type===e.SAMPLER_2D&&(o.samplerIndex=n,n++,this.samplers.push(o)),o.isArray=1<i.size||o.type===e.FLOAT_MAT3||o.type===e.FLOAT_MAT4||o.type===e.FLOAT_VEC2||o.type===e.FLOAT_VEC3||o.type===e.FLOAT_VEC4||o.type===e.INT_VEC2||o.type===e.INT_VEC4||o.type===e.INT_VEC3,this.uniforms[a]=o}this._loadedUniforms=!0}}},{key:"compile",value:function(){}},{key:"bindShader",value:function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))}},{key:"unbindShader",value:function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this}},{key:"bindTextures",value:function(){var e=this._renderer.GL,t=!0,n=!1,r=void 0;try{for(var i,o=this.samplers[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,s=a.texture;void 0===s&&(s=this._renderer._getEmptyTexture()),e.activeTexture(e.TEXTURE0+a.samplerIndex),s.bindTexture(),s.update(),e.uniform1i(a.location,a.samplerIndex)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"updateTextures",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.samplers[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value.texture;o&&o.update()}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"unbindTextures",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.samplers[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;this.setUniform(o.name,this._renderer._getEmptyTexture())}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"_setMatrixUniforms",value:function(){var e=this._renderer.uModelMatrix,t=this._renderer.uViewMatrix,n=this._renderer.uPMatrix,r=e.copy().mult(t),i=(this._renderer.uMVMatrix=r).copy();i.mult(n),this.isStrokeShader()&&this.setUniform("uPerspective",this._renderer._curCamera.useLinePerspective?1:0),this.setUniform("uViewMatrix",t.mat4),this.setUniform("uProjectionMatrix",n.mat4),this.setUniform("uModelMatrix",e.mat4),this.setUniform("uModelViewMatrix",r.mat4),this.setUniform("uModelViewProjectionMatrix",i.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3)),this.uniforms.uCameraRotation&&(this._renderer.curMatrix.inverseTranspose(this._renderer.uViewMatrix),this.setUniform("uCameraRotation",this._renderer.curMatrix.mat3))}},{key:"useProgram",value:function(){var e=this._renderer.GL;return this._renderer._curShader!==this&&(e.useProgram(this._glProgram),this._renderer._curShader=this),this}},{key:"setUniform",value:function(e,t){var n=this.uniforms[e];if(n){var i=this._renderer.GL;if(n.isArray){if(n._cachedData&&this._renderer._arraysEqual(n._cachedData,t))return;n._cachedData=t.slice(0)}else{if(n._cachedData&&n._cachedData===t)return;Array.isArray(t)?n._cachedData=t.slice(0):n._cachedData=t}var o=n.location;switch(this.useProgram(),n.type){case i.BOOL:!0===t?i.uniform1i(o,1):i.uniform1i(o,0);break;case i.INT:1<n.size?t.length&&i.uniform1iv(o,t):i.uniform1i(o,t);break;case i.FLOAT:1<n.size?t.length&&i.uniform1fv(o,t):i.uniform1f(o,t);break;case i.FLOAT_MAT3:i.uniformMatrix3fv(o,!1,t);break;case i.FLOAT_MAT4:i.uniformMatrix4fv(o,!1,t);break;case i.FLOAT_VEC2:1<n.size?t.length&&i.uniform2fv(o,t):i.uniform2f(o,t[0],t[1]);break;case i.FLOAT_VEC3:1<n.size?t.length&&i.uniform3fv(o,t):i.uniform3f(o,t[0],t[1],t[2]);break;case i.FLOAT_VEC4:1<n.size?t.length&&i.uniform4fv(o,t):i.uniform4f(o,t[0],t[1],t[2],t[3]);break;case i.INT_VEC2:1<n.size?t.length&&i.uniform2iv(o,t):i.uniform2i(o,t[0],t[1]);break;case i.INT_VEC3:1<n.size?t.length&&i.uniform3iv(o,t):i.uniform3i(o,t[0],t[1],t[2]);break;case i.INT_VEC4:1<n.size?t.length&&i.uniform4iv(o,t):i.uniform4i(o,t[0],t[1],t[2],t[3]);break;case i.SAMPLER_2D:i.activeTexture(i.TEXTURE0+n.samplerIndex),n.texture=t instanceof r.default.Texture?t:this._renderer.getTexture(t),i.uniform1i(o,n.samplerIndex),n.texture.src.gifProperties&&n.texture.src._animateGif(this._renderer._pInst)}return this}}},{key:"isLightShader",value:function(){return[this.attributes.aNormal,this.uniforms.uUseLighting,this.uniforms.uAmbientLightCount,this.uniforms.uDirectionalLightCount,this.uniforms.uPointLightCount,this.uniforms.uAmbientColor,this.uniforms.uDirectionalDiffuseColors,this.uniforms.uDirectionalSpecularColors,this.uniforms.uPointLightLocation,this.uniforms.uPointLightDiffuseColors,this.uniforms.uPointLightSpecularColors,this.uniforms.uLightingDirection,this.uniforms.uSpecular].some((function(e){return void 0!==e}))}},{key:"isNormalShader",value:function(){return void 0!==this.attributes.aNormal}},{key:"isTextureShader",value:function(){return 0<this.samplers.length}},{key:"isColorShader",value:function(){return void 0!==this.attributes.aVertexColor||void 0!==this.uniforms.uMaterialColor}},{key:"isTexLightShader",value:function(){return this.isLightShader()&&this.isTextureShader()}},{key:"isStrokeShader",value:function(){return void 0!==this.uniforms.uStrokeWeight}},{key:"enableAttrib",value:function(e,t,n,r,i,o){var a;return e&&-1!==(e=e.location)&&(a=this._renderer.GL,this._renderer.registerEnabled.has(e)||(a.enableVertexAttribArray(e),this._renderer.registerEnabled.add(e)),this._renderer.GL.vertexAttribPointer(e,t,n||a.FLOAT,r||!1,i||0,o||0)),this}},{key:"disableRemainingAttributes",value:function(){var e=this,t=!0,n=!1,r=void 0;try{for(var i,o=this._renderer.registerEnabled.values()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0)!function(){var t=i.value;Object.keys(e.attributes).some((function(n){return e.attributes[n].location===t}))||(e._renderer.GL.disableVertexAttribArray(t),e._renderer.registerEnabled.delete(t))}()}catch(t){n=!0,r=t}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}(),e=r.default.Shader,n.default=e},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],343:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.get-prototype-of"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.reflect.construct"),e("core-js/modules/es.regexp.to-string"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.typed-array.uint8-array"),e("core-js/modules/es.typed-array.copy-within"),e("core-js/modules/es.typed-array.every"),e("core-js/modules/es.typed-array.fill"),e("core-js/modules/es.typed-array.filter"),e("core-js/modules/es.typed-array.find"),e("core-js/modules/es.typed-array.find-index"),e("core-js/modules/es.typed-array.for-each"),e("core-js/modules/es.typed-array.includes"),e("core-js/modules/es.typed-array.index-of"),e("core-js/modules/es.typed-array.iterator"),e("core-js/modules/es.typed-array.join"),e("core-js/modules/es.typed-array.last-index-of"),e("core-js/modules/es.typed-array.map"),e("core-js/modules/es.typed-array.reduce"),e("core-js/modules/es.typed-array.reduce-right"),e("core-js/modules/es.typed-array.reverse"),e("core-js/modules/es.typed-array.set"),e("core-js/modules/es.typed-array.slice"),e("core-js/modules/es.typed-array.some"),e("core-js/modules/es.typed-array.sort"),e("core-js/modules/es.typed-array.subarray"),e("core-js/modules/es.typed-array.to-locale-string"),e("core-js/modules/es.typed-array.to-string"),Object.defineProperty(n,"__esModule",{value:!0}),n.checkWebGLCapabilities=f,n.default=n.MipmapTexture=void 0;var o=(m=e("../core/main"))&&m.__esModule?m:{default:m},a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function s(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,s=function(){return e},e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return function(){var t,n=u(e);if(t=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),1}catch(e){}}}()?(t=u(this).constructor,Reflect.construct(n,arguments,t)):n.apply(this,arguments),n=this,!t||"object"!==i(t)&&"function"!=typeof t){if(void 0!==n)return n;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){t&&d(e.prototype,t),n&&d(e,n)}o.default.Texture=function(){function e(t,n,r){p(this,e),this._renderer=t;var i=this._renderer.GL;return r=r||{},this.src=n,this.glTex=void 0,this.glTarget=i.TEXTURE_2D,this.glFormat=r.format||i.RGBA,this.mipmaps=!1,this.glMinFilter=r.minFilter||i.LINEAR,this.glMagFilter=r.magFilter||i.LINEAR,this.glWrapS=r.wrapS||i.CLAMP_TO_EDGE,this.glWrapT=r.wrapT||i.CLAMP_TO_EDGE,this.glDataType=r.dataType||i.UNSIGNED_BYTE,r=f(t),this.glFormat!==i.HALF_FLOAT||r.halfFloat||(console.log("This device does not support dataType HALF_FLOAT. Falling back to FLOAT."),this.glDataType=i.FLOAT),this.glFormat!==i.HALF_FLOAT||this.glMinFilter!==i.LINEAR&&this.glMagFilter!==i.LINEAR||r.halfFloatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===i.LINEAR&&(this.glMinFilter=i.NEAREST),this.glMagFilter===i.LINEAR&&(this.glMagFilter=i.NEAREST)),this.glFormat!==i.FLOAT||r.float||(console.log("This device does not support dataType FLOAT. Falling back to UNSIGNED_BYTE."),this.glDataType=i.UNSIGNED_BYTE),this.glFormat!==i.FLOAT||this.glMinFilter!==i.LINEAR&&this.glMagFilter!==i.LINEAR||r.floatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===i.LINEAR&&(this.glMinFilter=i.NEAREST),this.glMagFilter===i.LINEAR&&(this.glMagFilter=i.NEAREST)),this.isSrcMediaElement=void 0!==o.default.MediaElement&&n instanceof o.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=void 0!==o.default.Element&&n instanceof o.default.Element&&!(n instanceof o.default.Graphics)&&!(n instanceof o.default.Renderer),this.isSrcP5Image=n instanceof o.default.Image,this.isSrcP5Graphics=n instanceof o.default.Graphics,this.isSrcP5Renderer=n instanceof o.default.Renderer,this.isImageData="undefined"!=typeof ImageData&&n instanceof ImageData,this.isFramebufferTexture=n instanceof o.default.FramebufferTexture,t=this._getTextureDataFromSource(),this.width=t.width,this.height=t.height,this.init(t),this}return h(e,[{key:"_getTextureDataFromSource",value:function(){var e;return this.isFramebufferTexture?e=this.src.rawTexture():this.isSrcP5Image?e=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?e=this.src.elt:this.isImageData&&(e=this.src),e}},{key:"init",value:function(e){var t,n=this._renderer.GL;this.isFramebufferTexture||(this.glTex=n.createTexture()),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,this.glMagFilter),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,this.glMinFilter),this.isFramebufferTexture||(0===this.width||0===this.height||this.isSrcMediaElement&&!this.src.loadedmetadata?(t=new Uint8Array([1,1,1,1]),n.texImage2D(this.glTarget,0,n.RGBA,1,1,0,this.glFormat,this.glDataType,t)):n.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,e))}},{key:"update",value:function(){var e,t,n,r=this.src;return 0!==r.width&&0!==r.height&&!this.isFramebufferTexture&&(e=this._getTextureDataFromSource(),t=!1,n=this._renderer.GL,e.width!==this.width||e.height!==this.height?(t=!0,this.width=e.width||r.width,this.height=e.height||r.height,this.isSrcP5Image?r.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&r.setModified(!0)):this.isSrcP5Image?r.isModified()&&r.setModified(!(t=!0)):this.isSrcMediaElement?r.isModified()?r.setModified(!(t=!0)):r.loadedmetadata&&this._videoPrevUpdateTime!==r.time()&&(this._videoPrevUpdateTime=r.time(),t=!0):this.isImageData?r._dirty&&(t=!(r._dirty=!1)):t=!0,t&&(this.bindTexture(),n.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,e)),t)}},{key:"bindTexture",value:function(){return this._renderer.GL.bindTexture(this.glTarget,this.getTexture()),this}},{key:"unbindTexture",value:function(){this._renderer.GL.bindTexture(this.glTarget,null)}},{key:"getTexture",value:function(){return this.isFramebufferTexture?this.src.rawTexture():this.glTex}},{key:"setInterpolation",value:function(e,t){var n=this._renderer.GL;this.glMinFilter=this.glFilter(e),this.glMagFilter=this.glFilter(t),this.bindTexture(),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,this.glMinFilter),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()}},{key:"glFilter",value:function(e){var t=this._renderer.GL;return e===a.NEAREST?t.NEAREST:t.LINEAR}},{key:"setWrapMode",value:function(e,t){function n(e){return!(e&e-1)}var r=this._renderer.GL,i=(i=this._getTextureDataFromSource()).naturalWidth&&i.naturalHeight?(o=i.naturalWidth,i.naturalHeight):(o=this.width,this.height),o=n(o);i=n(i),e===a.REPEAT?this._renderer.webglVersion===a.WEBGL2||o&&i?this.glWrapS=r.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=r.CLAMP_TO_EDGE):e===a.MIRROR?this._renderer.webglVersion===a.WEBGL2||o&&i?this.glWrapS=r.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=r.CLAMP_TO_EDGE):this.glWrapS=r.CLAMP_TO_EDGE,t===a.REPEAT?this._renderer.webglVersion===a.WEBGL2||o&&i?this.glWrapT=r.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=r.CLAMP_TO_EDGE):t===a.MIRROR?this._renderer.webglVersion===a.WEBGL2||o&&i?this.glWrapT=r.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=r.CLAMP_TO_EDGE):this.glWrapT=r.CLAMP_TO_EDGE,this.bindTexture(),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,this.glWrapS),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()}}]),e}();var m=function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e);var n=c(r);function r(e,t,i){return p(this,r),t=(e=n.call(this,e,t,i))._renderer.GL,e.glMinFilter===t.LINEAR&&(e.glMinFilter=t.LINEAR_MIPMAP_LINEAR),e}return h(r,[{key:"glFilter",value:function(e){return this._renderer.GL.LINEAR_MIPMAP_LINEAR}},{key:"_getTextureDataFromSource",value:function(){return this.src}},{key:"init",value:function(e){var t=this._renderer.GL;this.glTex=t.createTexture(),this.bindTexture();for(var n=0;n<e.length;n++)t.texImage2D(this.glTarget,n,this.glFormat,this.glFormat,this.glDataType,e[n]);this.glMinFilter=t.LINEAR_MIPMAP_LINEAR,t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,this.glMagFilter),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,this.glMinFilter),this.unbindTexture()}},{key:"update",value:function(){}}]),r}(o.default.Texture);function f(e){var t=e.GL,n=(e=e.webglVersion)===a.WEBGL2?t.getExtension("EXT_color_buffer_float")&&t.getExtension("EXT_float_blend"):t.getExtension("OES_texture_float");return{float:n,floatLinear:n&&t.getExtension("OES_texture_float_linear"),halfFloat:e=e===a.WEBGL2?t.getExtension("EXT_color_buffer_float"):t.getExtension("OES_texture_half_float"),halfFloatLinear:e&&t.getExtension("OES_texture_half_float_linear")}}n.MipmapTexture=m,e=o.default.Texture,n.default=e},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],344:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.get-own-property-descriptor"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.sub"),e("core-js/modules/es.weak-map"),e("core-js/modules/web.dom-collections.iterator"),e("core-js/modules/es.symbol"),e("core-js/modules/es.symbol.description"),e("core-js/modules/es.symbol.iterator"),e("core-js/modules/es.array.iterator"),e("core-js/modules/es.object.to-string"),e("core-js/modules/es.regexp.exec"),e("core-js/modules/es.string.iterator"),e("core-js/modules/es.string.split"),e("core-js/modules/es.string.sub"),e("core-js/modules/web.dom-collections.iterator");var o,a=(o=e("../core/main"))&&o.__esModule?o:{default:o},s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n,r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e){var a;Object.prototype.hasOwnProperty.call(e,n)&&((a=o?Object.getOwnPropertyDescriptor(e,n):null)&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=e[n])}return r.default=e,t&&t.set(e,r),r}(e("../core/constants"));function l(){var e;return"function"!=typeof WeakMap?null:(e=new WeakMap,l=function(){return e},e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){t&&u(e.prototype,t),n&&u(e,n)}e("./p5.Shader"),e("./p5.RendererGL.Retained"),a.default.RendererGL.prototype._applyTextProperties=function(){this._setProperty("_textAscent",null),this._setProperty("_textDescent",null)},a.default.RendererGL.prototype.textWidth=function(e){return this._isOpenType()?this._textFont._textWidth(e,this._textSize):0};var d=function(){function e(t,n){c(this,e),this.width=t,this.height=n,this.infos=[]}return p(e,[{key:"findImage",value:function(e){var t,n,r=this.width*this.height;if(r<e)throw new Error("font is too complex to render in 3D");for(var i=this.infos.length-1;0<=i;--i){var o=this.infos[i];if(o.index+e<r){n=(t=o).imageData;break}}if(!t){try{n=new ImageData(this.width,this.height)}catch(e){var a=document.getElementsByTagName("canvas")[0],s=!a,l=(a||((a=document.createElement("canvas")).style.display="none",document.body.appendChild(a)),a.getContext("2d"));l&&(n=l.createImageData(this.width,this.height)),s&&document.body.removeChild(a)}this.infos.push(t={index:0,imageData:n})}return l=t.index,t.index+=e,n._dirty=!0,{imageData:n,index:l}}}]),e}();function h(e,t,n,r,i){var o=e.imageData.data;e=4*e.index++,o[e++]=t,o[e++]=n,o[e++]=r,o[+e]=i}var m=Math.sqrt(3),f=function(){function e(t){c(this,e),this.font=t,this.strokeImageInfos=new d(64,64),this.colDimImageInfos=new d(64,64),this.rowDimImageInfos=new d(64,64),this.colCellImageInfos=new d(64,64),this.rowCellImageInfos=new d(64,64),this.glyphInfos={}}return p(e,[{key:"getGlyphInfo",value:function(e){var t=this.glyphInfos[e.index];if(!t){var n=e.getBoundingBox(),r=n.x1,i=n.y1,o=n.x2-r,s=n.y2-i,l=e.path.commands;if(0==o||0==s||!l.length)return this.glyphInfos[e.index]={};for(var u=[],d=[],f=[],g=8;0<=g;--g)f.push([]);for(g=8;0<=g;--g)d.push([]);var y,_,v,b,w=function(){function e(t,n,r,i){c(this,e),this.p0=t,this.c0=n,this.c1=r,this.p1=i}return p(e,[{key:"toQuadratic",value:function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}}},{key:"quadError",value:function(){return a.default.Vector.sub(a.default.Vector.sub(this.p1,this.p0),a.default.Vector.mult(a.default.Vector.sub(this.c1,this.c0),3)).mag()/2}},{key:"split",value:function(t){var n=a.default.Vector.lerp(this.p0,this.c0,t),r=a.default.Vector.lerp(this.c0,this.c1,t),i=a.default.Vector.lerp(n,r,t);return this.c1=a.default.Vector.lerp(this.c1,this.p1,t),this.c0=a.default.Vector.lerp(r,this.c1,t),r=a.default.Vector.lerp(i,this.c0,t),t=new e(this.p0,n,i,r),this.p0=r,t}},{key:"splitInflections",value:function(){var e=a.default.Vector.sub(this.c0,this.p0),t=a.default.Vector.sub(a.default.Vector.sub(this.c1,this.c0),e),n=a.default.Vector.sub(a.default.Vector.sub(a.default.Vector.sub(this.p1,this.c1),e),a.default.Vector.mult(t,2)),r=[],i=t.x*n.y-t.y*n.x;return 0!==i&&0<=(e=(n=e.x*n.y-e.y*n.x)*n-4*i*(e.x*t.y-e.y*t.x))&&(i<0&&(i=-i,n=-n),e=(-n+(t=Math.sqrt(e)))/(2*i),0<(n=(-n-t)/(2*i))&&n<1&&(r.push(this.split(n)),e=1-(1-e)/(1-n)),0<e&&e<1&&r.push(this.split(e))),r.push(this),r}}]),e}(),x=!0,S=!1,T=void 0;try{for(var E,I=l[Symbol.iterator]();!(x=(E=I.next()).done);x=!0){var k=E.value,j=(k.x-r)/o,A=(k.y-i)/s;if(!z(y,_,j,A)){switch(k.type){case"M":v=j,b=A;break;case"L":G(y,_,j,A);break;case"Q":var C=(k.x1-r)/o,O=(k.y1-i)/s;U([y,j,C],[_,A,O],{x:y,y:_,cx:C,cy:O});break;case"Z":z(y,_,v,b)?u.push({x:y,y:_}):(G(y,_,v,b),u.push({x:v,y:b}));break;case"C":for(var M=function(e,t,n,r,i,o,s,l){e=new w(new a.default.Vector(e,t),new a.default.Vector(n,r),new a.default.Vector(i,o),new a.default.Vector(s,l)).splitInflections();var c=[],u=30/m,p=!0;t=!1,n=void 0;try{for(var d,h=e[Symbol.iterator]();!(p=(d=h.next()).done);p=!0){for(var f=d.value,g=[],y=void 0;!(.125<=(y=u/f.quadError()));){var _=Math.pow(y,1/3),v=f.split(_),b=f.split(1-_/(1-_));c.push(v),g.push(f),f=b}y<1&&c.push(f.split(.5)),c.push(f),Array.prototype.push.apply(c,g.reverse())}}catch(e){t=!0,n=e}finally{try{p||null==h.return||h.return()}finally{if(t)throw n}}return c}(y,_,(k.x1-r)/o,(k.y1-i)/s,(k.x2-r)/o,(k.y2-i)/s,j,A),N=0;N<M.length;N++){var R=M[N].toQuadratic();U([R.x,R.x1,R.cx],[R.y,R.y1,R.cy],R)}break;default:throw new Error("unknown command type: ".concat(k.type))}y=j,_=A}}}catch(e){S=!0,T=e}finally{try{x||null==I.return||I.return()}finally{if(S)throw T}}for(var P=u.length,D=this.strokeImageInfos.findImage(P),L=D.index,F=0;F<P;++F){var B=u[F];h(D,V(B.x),V(B.y),V(B.cx),V(B.cy))}(t=this.glyphInfos[e.index]={glyph:e,uGlyphRect:[n.x1,-n.y1,n.x2,-n.y2],strokeImageInfo:D,strokes:u,colInfo:$(f,this.colDimImageInfos,this.colCellImageInfos),rowInfo:$(d,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[t.colInfo.dimOffset,t.rowInfo.dimOffset]}return t;function U(e,t,n){var r=u.length;function i(e,t,n){for(var r=e.length;0<r--;){var i=e[r];i<t&&(t=i),n<i&&(n=i)}return{min:t,max:n}}u.push(n),n=i(e,1,0),e=Math.max(Math.floor(9*n.min-.5),0);for(var o=Math.min(Math.ceil(9*n.max+.5),9),a=e;a<o;++a)f[a].push(r);n=i(t,1,0),e=Math.max(Math.floor(9*n.min-.5),0);for(var s=Math.min(Math.ceil(9*n.max+.5),9),l=e;l<s;++l)d[l].push(r)}function V(e){return(e*=255)<0?0:255<e?255:e}function G(e,t,n,r){U([e,n],[t,r],{x:e,y:t,cx:(e+n)/2,cy:(t+r)/2})}function z(e,t,n,r){return Math.abs(n-e)<1e-5&&Math.abs(r-t)<1e-5}function $(e,t,n){for(var r=e.length,i=t.findImage(r),o=(t=i.index,0),a=0;a<r;++a)o+=e[a].length;for(var s=n.findImage(o),l=0;l<r;++l){var c=e[l],u=c.length,p=s.index;h(i,p>>7,127&p,u>>7,127&u);for(var d=0;d<u;++d){var m=c[d]+L;h(s,m>>7,127&m,0,0)}}return{cellImageInfo:s,dimOffset:t,dimImageInfo:i}}}}]),e}();a.default.RendererGL.prototype._renderText=function(e,t,n,r,i){if(this._textFont&&"string"!=typeof this._textFont){if(!(i<=r)&&this._doFill){if(this._isOpenType()){e.push(),i=this._doStroke;var o=this.drawMode,l=(this._doStroke=!1,this.drawMode=s.TEXTURE,this._textFont.font),c=(c=this._textFont._fontInfo)||(this._textFont._fontInfo=new f(l)),u=(n=this._textFont._handleAlignment(this,t,n,r),r=this._textSize/l.unitsPerEm,this.translate(n.x,n.y,0),this.scale(r,r,1),this.GL),p=(n=!this._defaultFontShader,this._getFontShader()),d=(p.init(),p.bindShader(),n&&(p.setUniform("uGridImageSize",[64,64]),p.setUniform("uCellsImageSize",[64,64]),p.setUniform("uStrokeImageSize",[64,64]),p.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),h=(d||((r=this._textGeom=new a.default.Geometry(1,1,(function(){for(var e=0;e<=1;e++)for(var t=0;t<=1;t++)this.vertices.push(new a.default.Vector(t,e,0)),this.uvs.push(t,e)}))).computeFaces().computeNormals(),d=this.createBuffers("glyph",r)),!0);n=!1,r=void 0;try{for(var m,g=this.retainedMode.buffers.text[Symbol.iterator]();!(h=(m=g.next()).done);h=!0)m.value._prepareBuffer(d,p)}catch(e){n=!0,r=e}finally{try{h||null==g.return||g.return()}finally{if(n)throw r}}this._bindBuffer(d.indexBuffer,u.ELEMENT_ARRAY_BUFFER),p.setUniform("uMaterialColor",this.curFillColor),u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);try{var y=0,_=null,v=l.stringToGlyphs(t),b=!0,w=!1,x=void 0;try{for(var S,T=v[Symbol.iterator]();!(b=(S=T.next()).done);b=!0){var E,I,k=S.value,j=(_&&(y+=l.getKerningValue(_,k)),c.getGlyphInfo(k));j.uGlyphRect&&(E=j.rowInfo,I=j.colInfo,p.setUniform("uSamplerStrokes",j.strokeImageInfo.imageData),p.setUniform("uSamplerRowStrokes",E.cellImageInfo.imageData),p.setUniform("uSamplerRows",E.dimImageInfo.imageData),p.setUniform("uSamplerColStrokes",I.cellImageInfo.imageData),p.setUniform("uSamplerCols",I.dimImageInfo.imageData),p.setUniform("uGridOffset",j.uGridOffset),p.setUniform("uGlyphRect",j.uGlyphRect),p.setUniform("uGlyphOffset",y),p.bindTextures(),u.drawElements(u.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),y+=k.advanceWidth,_=k}}catch(e){w=!0,x=e}finally{try{b||null==T.return||T.return()}finally{if(w)throw x}}}finally{p.unbindShader(),this._doStroke=i,this.drawMode=o,u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.pop()}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return e}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":272,"../core/main":283,"./p5.RendererGL.Retained":340,"./p5.Shader":342,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}]},{},[267])(267)}))},6578:e=>{"use strict";e.exports=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]},4841:e=>{!function(){function t(e,t){var n=r("div",null,"qs_label",t);return n.innerHTML=e,n}function n(e,t,n,i){var o=r("input",t,n,i);return o.type=e,o}function r(e,t,n,r){var i=document.createElement(e);if(i)return i.id=t,n&&(i.className=n),r&&r.appendChild(i),i}function i(){return-1!=navigator.userAgent.indexOf("rv:11")||-1!=navigator.userAgent.indexOf("MSIE")}var o=!1,a={_version:"2.1",_topZ:1,_panel:null,_titleBar:null,_content:null,_startX:0,_startY:0,_hidden:!1,_collapsed:!1,_controls:null,_keyCode:-1,_draggable:!0,_collapsible:!0,_globalChangeHandler:null,useExtStyleSheet:function(){o=!0},create:function(e,t,n,r){var i=Object.create(this);return i._init(e,t,n,r),i},destroy:function(){for(var e in this._panel.parentElement&&this._panel.parentElement.removeChild(this._panel),this)this[e]=null},_init:function(e,t,n,r){o||function(){var e=document.createElement("style");e.innerText=".qs_main{background-color:#dddddd;text-align:left;position:absolute;width:200px;font:12px sans-serif;box-shadow:5px 5px 8px rgba(0,0,0,0.35);user-select:none;-webkit-user-select:none;color:#000000;border:none}.qs_content{background-color:#cccccc;overflow-y:auto}.qs_title_bar{background-color:#eeeeee;user-select:none;-webkit-user-select:none;cursor:pointer;padding:5px;font-weight:bold;border:none;color:#000000}.qs_container{margin:5px;padding:5px;background-color:#eeeeee;border:none;position:relative}.qs_container_selected{border:none;background-color:#ffffff}.qs_range{-webkit-appearance:none;-moz-appearance:none;width:100%;height:17px;padding:0;margin:0;background-color:transparent;border:none;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.qs_range:focus{outline:none;border:none}.qs_range::-webkit-slider-runnable-track{width:100%;height:15px;cursor:pointer;background:#cccccc;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.qs_range:focus::-webkit-slider-runnable-track{background:#cccccc}.qs_range::-webkit-slider-thumb{-webkit-appearance:none;height:15px;width:15px;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;background:#999999;cursor:pointer;margin-top:0}.qs_range::-moz-range-track{width:100%;height:15px;cursor:pointer;background:#cccccc;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.qs_range::-moz-range-thumb{height:15px;width:15px;border:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;background:#999999;cursor:pointer}.qs_range::-ms-track{width:100%;height:15px;cursor:pointer;visibility:hidden;background:transparent}.qs_range::-ms-thumb{height:15px;width:15px;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;background:#999999;cursor:pointer;border:none}.qs_range::-ms-fill-lower{background:#cccccc;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.qs_range:focus::-ms-fill-lower{background:#cccccc}.qs_range::-ms-fill-upper{background:#cccccc;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.qs_range:focus::-ms-fill-upper{background:#cccccc}.qs_button{background-color:#f6f6f6;color:#000000;height:30px;border:1px solid #aaaaaa;font:12px sans-serif}.qs_button:active{background-color:#ffffff;border:1px solid #aaaaaa}.qs_button:focus{border:1px solid #aaaaaa;outline:none}.qs_checkbox{cursor:pointer}.qs_checkbox input{position:absolute;left:-99999px}.qs_checkbox span{height:16px;width:100%;display:block;text-indent:20px;background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAALklEQVQ4T2OcOXPmfwYKACPIgLS0NLKMmDVrFsOoAaNhMJoOGBioFwZkZUWoJgApdFaxjUM1YwAAAABJRU5ErkJggg==') no-repeat}.qs_checkbox input:checked+span{background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAvElEQVQ4T63Tyw2EIBAA0OFKBxBL40wDRovAUACcKc1IB1zZDAkG18GYZTmSmafzgTnnMgwchoDWGlJKheGcP3JtnPceCqCUAmttSZznuYtgchsXQrgC+77DNE0kUpPbmBOoJaBOIVQylnqWgAAeKhDve/AN+EaklJBzhhgjWRoJVGTbNjiOowAIret6a+4jYIwpX8aDwLIs74C2D0IIYIyVP6Gm898m9kbVm85ljHUTf16k4VUefkwDrxk+zoUEwCt0GbUAAAAASUVORK5CYII=') no-repeat}.qs_checkbox_label{position:absolute;top:7px;left:30px}.qs_label{margin-bottom:3px;user-select:none;-webkit-user-select:none;cursor:default;font:12px sans-serif}.qs_text_input{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;width:100%;padding:0 0 0 5px;height:24px;border:1px inset #ffffff;background-color:#ffffff;color:#000000;font-size:12px}.qs_text_input:focus{outline:none;background:#ffffff;border:1px inset #ffffff}.qs_select{background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAp0lEQVRIS+2SsQ3FIAwF7RVYhA5mgQFhFuhYhJKWL0eKxI8SGylKZ0p4+OBsHGNM+HChAiS7qkgyBKrovaLeOxhjbgtxZ+cFtgelFMg5QwgBvPd/EO5sDbKAlBLUWo/8CjmL075zDmKMj6rEKbpCqBL9aqc4ZUQAhVbInBMQUXz5Vg/WfxOktXZsWWtZLds9uIqlqaH1NFV3jdhSJA47E1CAaE8ViYp+wGiWMZ/T+cgAAAAASUVORK5CYII=') no-repeat right #f6f6f6;-webkit-appearance:none;-moz-appearance:none;appearance:none;color:#000000;width:100%;height:24px;border:1px solid #aaaaaa;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;padding:0 5px;-moz-outline:none;font-size:14px}.qs_select option{font-size:14px}.qs_select::-ms-expand{display:none}.qs_select:focus{outline:none}.qs_number{height:24px}.qs_image{width:100%}.qs_progress{width:100%;height:15px;background-color:#cccccc;border:none;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.qs_progress_value{height:100%;background-color:#999999}.qs_textarea{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;resize:vertical;width:100%;padding:3px 5px;border:1px inset #ffffff;background-color:#ffffff;color:#000000;font-size:12px}.qs_textarea:focus{outline:none;background:#ffffff;border:1px inset #ffffff}.qs_color{position:absolute;left:-999999px}.qs_color_label{width:100%;height:20px;display:block;border:1px solid #aaaaaa;cursor:pointer;padding:0 0 0 5px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.qs_file_chooser{position:absolute;left:-999999px}.qs_file_chooser_label{background-color:#f6f6f6;color:#000000;height:30px;border:1px solid #aaaaaa;font:12px sans-serif;width:100%;display:block;cursor:pointer;padding:7px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}",document.head.appendChild(e),o=!0}(),this._bindHandlers(),this._createPanel(e,t,r),this._createTitleBar(n||"QuickSettings"),this._createContent()},_bindHandlers:function(){this._startDrag=this._startDrag.bind(this),this._drag=this._drag.bind(this),this._endDrag=this._endDrag.bind(this),this._doubleClickTitle=this._doubleClickTitle.bind(this),this._onKeyUp=this._onKeyUp.bind(this)},getValuesAsJSON:function(e){var t={};for(var n in this._controls)this._controls[n].getValue&&(t[n]=this._controls[n].getValue());return e&&(t=JSON.stringify(t)),t},setValuesFromJSON:function(e){for(var t in"string"==typeof e&&(e=JSON.parse(e)),e)this._controls[t].setValue&&this._controls[t].setValue(e[t]);return this},saveInLocalStorage:function(e){return this._localStorageName=e,this._readFromLocalStorage(e),this},clearLocalStorage:function(e){return localStorage.removeItem(e),this},_saveInLocalStorage:function(e){localStorage.setItem(e,this.getValuesAsJSON(!0))},_readFromLocalStorage:function(e){var t=localStorage.getItem(e);t&&this.setValuesFromJSON(t)},_createPanel:function(e,t,n){this._panel=r("div",null,"qs_main",n||document.body),this._panel.style.zIndex=++a._topZ,this.setPosition(e||0,t||0),this._controls={}},_createTitleBar:function(e){this._titleBar=r("div",null,"qs_title_bar",this._panel),this._titleBar.textContent=e,this._titleBar.addEventListener("mousedown",this._startDrag),this._titleBar.addEventListener("dblclick",this._doubleClickTitle)},_createContent:function(){this._content=r("div",null,"qs_content",this._panel)},_createContainer:function(){var e=r("div",null,"qs_container");return e.addEventListener("focus",(function(){this.className+=" qs_container_selected"}),!0),e.addEventListener("blur",(function(){var e=this.className.indexOf(" qs_container_selected");e>-1&&(this.className=this.className.substr(0,e))}),!0),this._content.appendChild(e),e},setPosition:function(e,t){return this._panel.style.left=e+"px",this._panel.style.top=Math.max(t,0)+"px",this},setSize:function(e,t){return this._panel.style.width=e+"px",this._content.style.width=e+"px",this._content.style.height=t-this._titleBar.offsetHeight+"px",this},setWidth:function(e){return this._panel.style.width=e+"px",this._content.style.width=e+"px",this},setHeight:function(e){return this._content.style.height=e-this._titleBar.offsetHeight+"px",this},setDraggable:function(e){return this._draggable=e,this._draggable||this._collapsible?this._titleBar.style.cursor="pointer":this._titleBar.style.cursor="default",this},_startDrag:function(e){this._draggable&&(this._panel.style.zIndex=++a._topZ,document.addEventListener("mousemove",this._drag),document.addEventListener("mouseup",this._endDrag),this._startX=e.clientX,this._startY=e.clientY),e.preventDefault()},_drag:function(e){var t=parseInt(this._panel.style.left),n=parseInt(this._panel.style.top),r=e.clientX,i=e.clientY;this.setPosition(t+r-this._startX,n+i-this._startY),this._startX=r,this._startY=i,e.preventDefault()},_endDrag:function(e){document.removeEventListener("mousemove",this._drag),document.removeEventListener("mouseup",this._endDrag),e.preventDefault()},setGlobalChangeHandler:function(e){return this._globalChangeHandler=e,this},_callGCH:function(){this._localStorageName&&this._saveInLocalStorage(this._localStorageName),this._globalChangeHandler&&this._globalChangeHandler()},hide:function(){return this._panel.style.visibility="hidden",this._hidden=!0,this},show:function(){return this._panel.style.visibility="visible",this._panel.style.zIndex=++a._topZ,this._hidden=!1,this},toggleVisibility:function(){return this._hidden?this.show():this.hide(),this},setCollapsible:function(e){return this._collapsible=e,this._draggable||this._collapsible?this._titleBar.style.cursor="pointer":this._titleBar.style.cursor="default",this},collapse:function(){return this._panel.removeChild(this._content),this._collapsed=!0,this},expand:function(){return this._panel.appendChild(this._content),this._collapsed=!1,this},toggleCollapsed:function(){return this._collapsed?this.expand():this.collapse(),this},setKey:function(e){return this._keyCode=e.toUpperCase().charCodeAt(0),document.body.addEventListener("keyup",this.onKeyUp),this},_onKeyUp:function(e){e.keyCode===this._keyCode&&this.toggleVisibility()},_doubleClickTitle:function(){this._collapsible&&this.toggleCollapsed()},removeControl:function(e){if(this._controls[e])var t=this._controls[e].container;return t&&t.parentElement&&t.parentElement.removeChild(t),this._controls[e]=null,this},enableControl:function(e){return this._controls[e]&&(this._controls[e].control.disabled=!1),this},disableControl:function(e){return this._controls[e]&&(this._controls[e].control.disabled=!0),this},hideControl:function(e){return this._controls[e]&&(this._controls[e].container.style.display="none"),this},showControl:function(e){return this._controls[e]&&(this._controls[e].container.style.display="block"),this},overrideStyle:function(e,t,n){return this._controls[e]&&(this._controls[e].control.style[t]=n),this},hideTitle:function(e){var t=this._controls[e].label;return t&&(t.style.display="none"),this},showTitle:function(e){var t=this._controls[e].label;return t&&(t.style.display="block"),this},hideAllTitles:function(){for(var e in this._controls){var t=this._controls[e].label;t&&(t.style.display="none")}return this},showAllTitles:function(){for(var e in this._controls){var t=this._controls[e].label;t&&(t.style.display="block")}return this},getValue:function(e){return this._controls[e].getValue()},setValue:function(e,t){return this._controls[e].setValue(t),this._callGCH(),this},addBoolean:function(e,t,i){var o=this._createContainer(),a=r("label",null,"qs_checkbox_label",o);a.textContent=e,a.setAttribute("for",e);var s=r("label",null,"qs_checkbox",o);s.setAttribute("for",e);var l=n("checkbox",e,null,s);l.checked=t,r("span",null,null,s),this._controls[e]={container:o,control:l,getValue:function(){return this.control.checked},setValue:function(e){this.control.checked=e,i&&i(e)}};var c=this;return l.addEventListener("change",(function(){i&&i(l.checked),c._callGCH()})),this},bindBoolean:function(e,t,n){return this.addBoolean(e,t,(function(t){n[e]=t}))},addButton:function(e,t){var r=this._createContainer(),i=n("button",e,"qs_button",r);i.value=e,this._controls[e]={container:r,control:i};var o=this;return i.addEventListener("click",(function(){t&&t(i),o._callGCH()})),this},addColor:function(e,o,a){if(function(){var e=navigator.userAgent.toLowerCase();return!(e.indexOf("chrome")>-1||e.indexOf("firefox")>-1||e.indexOf("epiphany")>-1)&&e.indexOf("safari/")>-1}()||navigator.userAgent.toLowerCase().indexOf("edge")>-1||i())return this.addText(e,o,a);var s=this._createContainer(),l=t("<b>"+e+":</b> "+o,s),c=n("color",e,"qs_color",s);c.value=o||"#ff0000";var u=r("label",null,"qs_color_label",s);u.setAttribute("for",e),u.style.backgroundColor=c.value,this._controls[e]={container:s,control:c,colorLabel:u,label:l,title:e,getValue:function(){return this.control.value},setValue:function(e){this.control.value=e,this.colorLabel.style.backgroundColor=c.value,this.label.innerHTML="<b>"+this.title+":</b> "+this.control.value,a&&a(e)}};var p=this;return c.addEventListener("input",(function(){l.innerHTML="<b>"+e+":</b> "+c.value,u.style.backgroundColor=c.value,a&&a(c.value),p._callGCH()})),this},bindColor:function(e,t,n){return this.addColor(e,t,(function(t){n[e]=t}))},addDate:function(e,r,o){var a;if(r instanceof Date){var s=r.getFullYear(),l=r.getMonth()+1;l<10&&(l="0"+l),a=s+"-"+l+"-"+r.getDate()}else a=r;if(i())return this.addText(e,a,o);var c=this._createContainer(),u=t("<b>"+e+"</b>",c),p=n("date",e,"qs_text_input",c);p.value=a||"",this._controls[e]={container:c,control:p,label:u,getValue:function(){return this.control.value},setValue:function(e){var t;if(e instanceof Date){var n=e.getFullYear(),r=e.getMonth()+1;r<10&&(r="0"+r);var i=e.getDate();i<10&&(i="0"+i),t=n+"-"+r+"-"+i}else t=e;this.control.value=t||"",o&&o(t)}};var d=this;return p.addEventListener("input",(function(){o&&o(p.value),d._callGCH()})),this},bindDate:function(e,t,n){return this.addDate(e,t,(function(t){n[e]=t}))},addDropDown:function(e,n,i){for(var o=this._createContainer(),a=t("<b>"+e+"</b>",o),s=r("select",null,"qs_select",o),l=0;l<n.length;l++){var c=r("option");c.label=n[l],c.innerText=n[l],s.add(c)}var u=this;return s.addEventListener("change",(function(){var e=s.selectedIndex,t=s.options;i&&i({index:e,value:t[e].label}),u._callGCH()})),this._controls[e]={container:o,control:s,label:a,getValue:function(){var e=this.control.selectedIndex;return{index:e,value:this.control.options[e].label}},setValue:function(e){var t;t=null!=e.index?e.index:e;var n=this.control.options;this.control.selectedIndex=t,i&&i({index:t,value:n[t].label})}},this},bindDropDown:function(e,t,n){return this.addDropDown(e,t,(function(t){n[e]=t.value}))},addElement:function(e,n){var r=this._createContainer(),i=t("<b>"+e+"</b>",r);return r.appendChild(n),this._controls[e]={container:r,label:i},this},addFileChooser:function(e,i,o,a){var s=this._createContainer(),l=t("<b>"+e+"</b>",s),c=n("file",e,"qs_file_chooser",s);o&&(c.accept=o);var u=r("label",null,"qs_file_chooser_label",s);u.setAttribute("for",e),u.textContent=i||"Choose a file...",this._controls[e]={container:s,control:c,label:l,getValue:function(){return this.control.files[0]}};var p=this;return c.addEventListener("change",(function(){c.files&&c.files.length&&(u.textContent=c.files[0].name,a&&a(c.files[0]),p._callGCH())})),this},addHTML:function(e,n){var i=this._createContainer(),o=t("<b>"+e+":</b> ",i),a=r("div",null,null,i);return a.innerHTML=n,this._controls[e]={label:o,control:a,getValue:function(){return this.control.innerHTML},setValue:function(e){this.control.innerHTML=e}},this},addImage:function(e,n){var i=this._createContainer(),o=t("<b>"+e+"</b>",i);return img=r("img",null,"qs_image",i),img.src=n,this._controls[e]={container:i,control:img,label:o,getValue:function(){return this.control.src},setValue:function(e){this.control.src=e}},this},addRange:function(e,t,n,r,i,o){return this._addNumber("range",e,t,n,r,i,o)},addNumber:function(e,t,n,r,i,o){return this._addNumber("number",e,t,n,r,i,o)},_addNumber:function(e,r,o,a,s,l,c){var u=this._createContainer(),p=t("",u),d=n(e,r,"range"===e?"qs_range":"qs_text_input qs_number",u);d.min=o||0,d.max=a||100,d.step=l||1,d.value=s||0,p.innerHTML="<b>"+r+":</b> "+d.value,this._controls[r]={container:u,control:d,label:p,title:r,callback:c,getValue:function(){return parseFloat(this.control.value)},setValue:function(e){this.control.value=e,this.label.innerHTML="<b>"+this.title+":</b> "+this.control.value,c&&c(parseFloat(e))}};var h="input";"range"===e&&i()&&(h="change");var m=this;return d.addEventListener(h,(function(){p.innerHTML="<b>"+r+":</b> "+d.value,c&&c(parseFloat(d.value)),m._callGCH()})),this},bindRange:function(e,t,n,r,i,o){return this.addRange(e,t,n,r,i,(function(t){o[e]=t}))},bindNumber:function(e,t,n,r,i,o){return this.addNumber(e,t,n,r,i,(function(t){o[e]=t}))},setRangeParameters:function(e,t,n,r){return this.setNumberParameters(e,t,n,r)},setNumberParameters:function(e,t,n,r){var i=this._controls[e],o=i.control.value;return i.control.min=t,i.control.max=n,i.control.step=r,i.control.value!==o&&i.callback&&i.callback(i.control.value),this},addPassword:function(e,t,n){return this._addText("password",e,t,n)},bindPassword:function(e,t,n){return this.addPassword(e,t,(function(t){n[e]=t}))},addProgressBar:function(e,n,i,o){var a=this._createContainer(),s=t("",a),l=r("div",null,"qs_progress",a),c=r("div",null,"qs_progress_value",l);return c.style.width=i/n*100+"%",s.innerHTML="numbers"===o?"<b>"+e+":</b> "+i+" / "+n:"percent"===o?"<b>"+e+":</b> "+Math.round(i/n*100)+"%":"<b>"+e+"</b>",this._controls[e]={container:a,control:l,valueDiv:c,valueDisplay:o,label:s,value:i,max:n,title:e,getValue:function(){return this.value},setValue:function(e){this.value=Math.max(0,Math.min(e,this.max)),this.valueDiv.style.width=this.value/this.max*100+"%","numbers"===this.valueDisplay?this.label.innerHTML="<b>"+this.title+":</b> "+this.value+" / "+this.max:"percent"===this.valueDisplay&&(this.label.innerHTML="<b>"+this.title+":</b> "+Math.round(this.value/this.max*100)+"%")}},this},setProgressMax:function(e,t){var n=this._controls[e];return n.max=t,n.value=Math.min(n.value,n.max),n.valueDiv.style.width=n.value/n.max*100+"%","numbers"===n.valueDisplay?n.label.innerHTML="<b>"+n.title+":</b> "+n.value+" / "+n.max:"percent"===n.valueDisplay?n.label.innerHTML="<b>"+n.title+":</b> "+Math.round(n.value/n.max*100)+"%":n.label.innerHTML="<b>"+n.title+"</b>",this},addText:function(e,t,n){return this._addText("text",e,t,n)},_addText:function(e,i,o,a){var s,l=this._createContainer(),c=t("<b>"+i+"</b>",l);"textarea"===e?(s=r("textarea",i,"qs_textarea",l)).rows=5:s=n(e,i,"qs_text_input",l),s.value=o||"",this._controls[i]={container:l,control:s,label:c,getValue:function(){return this.control.value},setValue:function(e){this.control.value=e,a&&a(e)}};var u=this;return s.addEventListener("input",(function(){a&&a(s.value),u._callGCH()})),this},bindText:function(e,t,n){return this.addText(e,t,(function(t){n[e]=t}))},addTextArea:function(e,t,n){return this._addText("textarea",e,t,n)},setTextAreaRows:function(e,t){return this._controls[e].control.rows=t,this},bindTextArea:function(e,t,n){return this.addTextArea(e,t,(function(t){n[e]=t}))},addTime:function(e,r,o){var a;if(r instanceof Date){var s=r.getHours();s<10&&(s="0"+s);var l=r.getMinutes();l<10&&(l="0"+l);var c=r.getSeconds();c<10&&(c="0"+c),a=s+":"+l+":"+c}else a=r;if(i())return this.addText(e,a,o);var u=this._createContainer(),p=t("<b>"+e+"</b>",u),d=n("time",e,"qs_text_input",u);d.value=a||"",this._controls[e]={container:u,control:d,label:p,getValue:function(){return this.control.value},setValue:function(e){var t;if(e instanceof Date){var n=e.getHours();n<10&&(n="0"+n);var r=e.getMinutes();r<10&&(r="0"+r);var i=e.getSeconds();i<10&&(i="0"+i),t=n+":"+r+":"+i}else t=e;this.control.value=t||"",o&&o(t)}};var h=this;return d.addEventListener("input",(function(){o&&o(d.value),h._callGCH()})),this},bindTime:function(e,t,n){return this.addTime(e,t,(function(t){n[e]=t}))}};e.exports=a}()},7391:(e,t,n)=>{var r=n(7180),i=n(3181),o=n(3031),a=n(9067),s=n(6833),l=n(3717),c=n(4801);c.alea=r,c.xor128=i,c.xorwow=o,c.xorshift7=a,c.xor4096=s,c.tychei=l,e.exports=c},7180:function(e,t,n){var r;!function(e,i){function o(e){var t,n=this,r=(t=4022871197,function(e){e=String(e);for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function a(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function s(e,t){var n=new o(e),r=t&&t.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,r&&("object"==typeof r&&a(r,n),i.state=function(){return a(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.alea=s}(0,e=n.nmd(e),n.amdD)},3717:function(e,t,n){var r;!function(e,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,i=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^i,t.a=i-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function s(e,t){var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&a(r,n),i.state=function(){return a(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.tychei=s}(0,e=n.nmd(e),n.amdD)},3181:function(e,t,n){var r;!function(e,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function s(e,t){var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&a(r,n),i.state=function(){return a(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.xor128=s}(0,e=n.nmd(e),n.amdD)},6833:function(e,t,n){var r;!function(e,i){function o(e){var t=this;t.next=function(){var e,n,r=t.w,i=t.X,o=t.i;return t.w=r=r+1640531527|0,n=i[o+34&127],e=i[o=o+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=i[o]=n^e,t.i=o,n+(r^r>>>16)|0},function(e,t){var n,r,i,o,a,s=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),i=0,o=-32;o<l;++o)t&&(r^=t.charCodeAt((o+32)%t.length)),0===o&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(a=a+1640531527|0,i=0==(n=s[127&o]^=r+a)?i+1:0);for(i>=128&&(s[127&(t&&t.length||0)]=-1),i=127,o=512;o>0;--o)r=s[i+34&127],n=s[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[i]=r^n;e.w=a,e.X=s,e.i=i}(t,e)}function a(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function s(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&(r.X&&a(r,n),i.state=function(){return a(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.xor4096=s}(0,e=n.nmd(e),n.amdD)},9067:function(e,t,n){var r;!function(e,i){function o(e){var t=this;t.next=function(){var e,n,r=t.x,i=t.i;return e=r[i],n=(e^=e>>>7)^e<<24,n^=(e=r[i+1&7])^e>>>10,n^=(e=r[i+3&7])^e>>>3,n^=(e=r[i+4&7])^e<<7,e=r[i+7&7],n^=(e^=e<<13)^e<<9,r[i]=n,t.i=i+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function a(e,t){return t.x=e.x.slice(),t.i=e.i,t}function s(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&(r.x&&a(r,n),i.state=function(){return a(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.xorshift7=s}(0,e=n.nmd(e),n.amdD)},3031:function(e,t,n){var r;!function(e,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function s(e,t){var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&a(r,n),i.state=function(){return a(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.xorwow=s}(0,e=n.nmd(e),n.amdD)},4801:function(e,t,n){var r;!function(i,o,a){var s,l=256,c=a.pow(l,6),u=a.pow(2,52),p=2*u,d=255;function h(e,t,n){var r=[],d=y(g((t=1==t?{entropy:!0}:t||{}).entropy?[e,_(o)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(l):(e=new Uint8Array(l),(i.crypto||i.msCrypto).getRandomValues(e)),_(e)}catch(e){var t=i.navigator,n=t&&t.plugins;return[+new Date,i,n,i.screen,_(o)]}}():e,3),r),h=new m(r),v=function(){for(var e=h.g(6),t=c,n=0;e<u;)e=(e+n)*l,t*=l,n=h.g(1);for(;e>=p;)e/=2,t/=2,n>>>=1;return(e+n)/t};return v.int32=function(){return 0|h.g(4)},v.quick=function(){return h.g(4)/4294967296},v.double=v,y(_(h.S),o),(t.pass||n||function(e,t,n,r){return r&&(r.S&&f(r,h),e.state=function(){return f(h,{})}),n?(a.random=e,t):e})(v,d,"global"in t?t.global:this==a,t.state)}function m(e){var t,n=e.length,r=this,i=0,o=r.i=r.j=0,a=r.S=[];for(n||(e=[n++]);i<l;)a[i]=i++;for(i=0;i<l;i++)a[i]=a[o=d&o+e[i%n]+(t=a[i])],a[o]=t;(r.g=function(e){for(var t,n=0,i=r.i,o=r.j,a=r.S;e--;)t=a[i=d&i+1],n=n*l+a[d&(a[i]=a[o=d&o+t])+(a[o]=t)];return r.i=i,r.j=o,n})(l)}function f(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){var n,r=[],i=typeof e;if(t&&"object"==i)for(n in e)try{r.push(g(e[n],t-1))}catch(e){}return r.length?r:"string"==i?e:e+"\0"}function y(e,t){for(var n,r=e+"",i=0;i<r.length;)t[d&i]=d&(n^=19*t[d&i])+r.charCodeAt(i++);return _(t)}function _(e){return String.fromCharCode.apply(0,e)}if(y(a.random(),o),e.exports){e.exports=h;try{s=n(1234)}catch(e){}}else void 0===(r=function(){return h}.call(t,n,t,e))||(e.exports=r)}("undefined"!=typeof self?self:this,[],Math)},6897:(e,t,n)=>{"use strict";var r=n(453),i=n(41),o=n(592)(),a=n(5795),s=n(9675),l=r("%Math.floor%");e.exports=function(e,t){if("function"!=typeof e)throw new s("`fn` is not a function");if("number"!=typeof t||t<0||t>4294967295||l(t)!==t)throw new s("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],r=!0,c=!0;if("length"in e&&a){var u=a(e,"length");u&&!u.configurable&&(r=!1),u&&!u.writable&&(c=!1)}return(r||c||!n)&&(o?i(e,"length",t,!0,!0):i(e,"length",t)),e}},5072:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var o={},a=[],s=0;s<e.length;s++){var l=e[s],c=r.base?l[0]+r.base:l[0],u=o[c]||0,p="".concat(c," ").concat(u);o[c]=u+1;var d=n(p),h={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)t[d].references++,t[d].updater(h);else{var m=i(h,r);r.byIndex=s,t.splice(s,0,{identifier:p,updater:m,references:1})}a.push(p)}return a}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var o=r(e=e||[],i=i||{});return function(e){e=e||[];for(var a=0;a<o.length;a++){var s=n(o[a]);t[s].references--}for(var l=r(e,i),c=0;c<o.length;c++){var u=n(o[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}o=l}}},7659:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},540:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},5056:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},7825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},1113:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},8465:function(e){e.exports=function(){"use strict";function e(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function t(t,n){return t.get(e(t,n))}function n(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}const r={},i=e=>new Promise((t=>{if(!e)return t();const n=window.scrollX,i=window.scrollY;r.restoreFocusTimeout=setTimeout((()=>{r.previousActiveElement instanceof HTMLElement?(r.previousActiveElement.focus(),r.previousActiveElement=null):document.body&&document.body.focus(),t()}),100),window.scrollTo(n,i)})),o="swal2-",a=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"].reduce(((e,t)=>(e[t]=o+t,e)),{}),s=["success","warning","info","question","error"].reduce(((e,t)=>(e[t]=o+t,e)),{}),l="SweetAlert2:",c=e=>e.charAt(0).toUpperCase()+e.slice(1),u=e=>{console.warn(`${l} ${"object"==typeof e?e.join(" "):e}`)},p=e=>{console.error(`${l} ${e}`)},d=[],h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var n;n=`"${e}" is deprecated and will be removed in the next major release.${t?` Use "${t}" instead.`:""}`,d.includes(n)||(d.push(n),u(n))},m=e=>"function"==typeof e?e():e,f=e=>e&&"function"==typeof e.toPromise,g=e=>f(e)?e.toPromise():Promise.resolve(e),y=e=>e&&Promise.resolve(e)===e,_=()=>document.body.querySelector(`.${a.container}`),v=e=>{const t=_();return t?t.querySelector(e):null},b=e=>v(`.${e}`),w=()=>b(a.popup),x=()=>b(a.icon),S=()=>b(a.title),T=()=>b(a["html-container"]),E=()=>b(a.image),I=()=>b(a["progress-steps"]),k=()=>b(a["validation-message"]),j=()=>v(`.${a.actions} .${a.confirm}`),A=()=>v(`.${a.actions} .${a.cancel}`),C=()=>v(`.${a.actions} .${a.deny}`),O=()=>v(`.${a.loader}`),M=()=>b(a.actions),N=()=>b(a.footer),R=()=>b(a["timer-progress-bar"]),P=()=>b(a.close),D=()=>{const e=w();if(!e)return[];const t=e.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),n=Array.from(t).sort(((e,t)=>{const n=parseInt(e.getAttribute("tabindex")||"0"),r=parseInt(t.getAttribute("tabindex")||"0");return n>r?1:n<r?-1:0})),r=e.querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n'),i=Array.from(r).filter((e=>"-1"!==e.getAttribute("tabindex")));return[...new Set(n.concat(i))].filter((e=>ee(e)))},L=()=>U(document.body,a.shown)&&!U(document.body,a["toast-shown"])&&!U(document.body,a["no-backdrop"]),F=()=>{const e=w();return!!e&&U(e,a.toast)},B=(e,t)=>{if(e.textContent="",t){const n=(new DOMParser).parseFromString(t,"text/html"),r=n.querySelector("head");r&&Array.from(r.childNodes).forEach((t=>{e.appendChild(t)}));const i=n.querySelector("body");i&&Array.from(i.childNodes).forEach((t=>{t instanceof HTMLVideoElement||t instanceof HTMLAudioElement?e.appendChild(t.cloneNode(!0)):e.appendChild(t)}))}},U=(e,t)=>{if(!t)return!1;const n=t.split(/\s+/);for(let t=0;t<n.length;t++)if(!e.classList.contains(n[t]))return!1;return!0},V=(e,t,n)=>{if(((e,t)=>{Array.from(e.classList).forEach((n=>{Object.values(a).includes(n)||Object.values(s).includes(n)||Object.values(t.showClass||{}).includes(n)||e.classList.remove(n)}))})(e,t),!t.customClass)return;const r=t.customClass[n];r&&("string"==typeof r||r.forEach?q(e,r):u(`Invalid type of customClass.${n}! Expected string or iterable object, got "${typeof r}"`))},G=(e,t)=>{if(!t)return null;switch(t){case"select":case"textarea":case"file":return e.querySelector(`.${a.popup} > .${a[t]}`);case"checkbox":return e.querySelector(`.${a.popup} > .${a.checkbox} input`);case"radio":return e.querySelector(`.${a.popup} > .${a.radio} input:checked`)||e.querySelector(`.${a.popup} > .${a.radio} input:first-child`);case"range":return e.querySelector(`.${a.popup} > .${a.range} input`);default:return e.querySelector(`.${a.popup} > .${a.input}`)}},z=e=>{if(e.focus(),"file"!==e.type){const t=e.value;e.value="",e.value=t}},$=(e,t,n)=>{e&&t&&("string"==typeof t&&(t=t.split(/\s+/).filter(Boolean)),t.forEach((t=>{Array.isArray(e)?e.forEach((e=>{n?e.classList.add(t):e.classList.remove(t)})):n?e.classList.add(t):e.classList.remove(t)})))},q=(e,t)=>{$(e,t,!0)},H=(e,t)=>{$(e,t,!1)},W=(e,t)=>{const n=Array.from(e.children);for(let e=0;e<n.length;e++){const r=n[e];if(r instanceof HTMLElement&&U(r,t))return r}},K=(e,t,n)=>{n===`${parseInt(n)}`&&(n=parseInt(n)),n||0===parseInt(n)?e.style.setProperty(t,"number"==typeof n?`${n}px`:n):e.style.removeProperty(t)},X=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex";e&&(e.style.display=t)},Y=e=>{e&&(e.style.display="none")},J=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block";e&&new MutationObserver((()=>{Z(e,e.innerHTML,t)})).observe(e,{childList:!0,subtree:!0})},Q=(e,t,n,r)=>{const i=e.querySelector(t);i&&i.style.setProperty(n,r)},Z=function(e,t){t?X(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"flex"):Y(e)},ee=e=>!(!e||!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)),te=e=>!!(e.scrollHeight>e.clientHeight),ne=e=>{const t=window.getComputedStyle(e),n=parseFloat(t.getPropertyValue("animation-duration")||"0"),r=parseFloat(t.getPropertyValue("transition-duration")||"0");return n>0||r>0},re=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=R();n&&ee(n)&&(t&&(n.style.transition="none",n.style.width="100%"),setTimeout((()=>{n.style.transition=`width ${e/1e3}s linear`,n.style.width="0%"}),10))},ie=`\n <div aria-labelledby="${a.title}" aria-describedby="${a["html-container"]}" class="${a.popup}" tabindex="-1">\n   <button type="button" class="${a.close}"></button>\n   <ul class="${a["progress-steps"]}"></ul>\n   <div class="${a.icon}"></div>\n   <img class="${a.image}" />\n   <h2 class="${a.title}" id="${a.title}"></h2>\n   <div class="${a["html-container"]}" id="${a["html-container"]}"></div>\n   <input class="${a.input}" id="${a.input}" />\n   <input type="file" class="${a.file}" />\n   <div class="${a.range}">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="${a.select}" id="${a.select}"></select>\n   <div class="${a.radio}"></div>\n   <label class="${a.checkbox}">\n     <input type="checkbox" id="${a.checkbox}" />\n     <span class="${a.label}"></span>\n   </label>\n   <textarea class="${a.textarea}" id="${a.textarea}"></textarea>\n   <div class="${a["validation-message"]}" id="${a["validation-message"]}"></div>\n   <div class="${a.actions}">\n     <div class="${a.loader}"></div>\n     <button type="button" class="${a.confirm}"></button>\n     <button type="button" class="${a.deny}"></button>\n     <button type="button" class="${a.cancel}"></button>\n   </div>\n   <div class="${a.footer}"></div>\n   <div class="${a["timer-progress-bar-container"]}">\n     <div class="${a["timer-progress-bar"]}"></div>\n   </div>\n </div>\n`.replace(/(^|\n)\s*/g,""),oe=()=>{r.currentInstance.resetValidationMessage()},ae=e=>{const t=(()=>{const e=_();return!!e&&(e.remove(),H([document.documentElement,document.body],[a["no-backdrop"],a["toast-shown"],a["has-column"]]),!0)})();if("undefined"==typeof window||"undefined"==typeof document)return void p("SweetAlert2 requires document to initialize");const n=document.createElement("div");n.className=a.container,t&&q(n,a["no-transition"]),B(n,ie);const r="string"==typeof(i=e.target)?document.querySelector(i):i;var i;r.appendChild(n),(e=>{const t=w();t.setAttribute("role",e.toast?"alert":"dialog"),t.setAttribute("aria-live",e.toast?"polite":"assertive"),e.toast||t.setAttribute("aria-modal","true")})(e),(e=>{"rtl"===window.getComputedStyle(e).direction&&q(_(),a.rtl)})(r),(()=>{const e=w(),t=W(e,a.input),n=W(e,a.file),r=e.querySelector(`.${a.range} input`),i=e.querySelector(`.${a.range} output`),o=W(e,a.select),s=e.querySelector(`.${a.checkbox} input`),l=W(e,a.textarea);t.oninput=oe,n.onchange=oe,o.onchange=oe,s.onchange=oe,l.oninput=oe,r.oninput=()=>{oe(),i.value=r.value},r.onchange=()=>{oe(),i.value=r.value}})()},se=(e,t)=>{e instanceof HTMLElement?t.appendChild(e):"object"==typeof e?le(e,t):e&&B(t,e)},le=(e,t)=>{e.jquery?ce(t,e):B(t,e.toString())},ce=(e,t)=>{if(e.textContent="",0 in t)for(let n=0;n in t;n++)e.appendChild(t[n].cloneNode(!0));else e.appendChild(t.cloneNode(!0))},ue=(e,t)=>{const n=M(),r=O();n&&r&&(t.showConfirmButton||t.showDenyButton||t.showCancelButton?X(n):Y(n),V(n,t,"actions"),function(e,t,n){const r=j(),i=C(),o=A();r&&i&&o&&(pe(r,"confirm",n),pe(i,"deny",n),pe(o,"cancel",n),function(e,t,n,r){r.buttonsStyling?(q([e,t,n],a.styled),r.confirmButtonColor&&(e.style.backgroundColor=r.confirmButtonColor,q(e,a["default-outline"])),r.denyButtonColor&&(t.style.backgroundColor=r.denyButtonColor,q(t,a["default-outline"])),r.cancelButtonColor&&(n.style.backgroundColor=r.cancelButtonColor,q(n,a["default-outline"]))):H([e,t,n],a.styled)}(r,i,o,n),n.reverseButtons&&(n.toast?(e.insertBefore(o,r),e.insertBefore(i,r)):(e.insertBefore(o,t),e.insertBefore(i,t),e.insertBefore(r,t))))}(n,r,t),B(r,t.loaderHtml||""),V(r,t,"loader"))};function pe(e,t,n){const r=c(t);Z(e,n[`show${r}Button`],"inline-block"),B(e,n[`${t}ButtonText`]||""),e.setAttribute("aria-label",n[`${t}ButtonAriaLabel`]||""),e.className=a[t],V(e,n,`${t}Button`)}const de=(e,t)=>{const n=_();n&&(function(e,t){"string"==typeof t?e.style.background=t:t||q([document.documentElement,document.body],a["no-backdrop"])}(n,t.backdrop),function(e,t){t&&(t in a?q(e,a[t]):(u('The "position" parameter is not valid, defaulting to "center"'),q(e,a.center)))}(n,t.position),function(e,t){t&&q(e,a[`grow-${t}`])}(n,t.grow),V(n,t,"container"))};var he={innerParams:new WeakMap,domCache:new WeakMap};const me=["input","file","range","select","radio","checkbox","textarea"],fe=e=>{if(!e.input)return;if(!xe[e.input])return void p(`Unexpected type of input! Expected ${Object.keys(xe).join(" | ")}, got "${e.input}"`);const t=be(e.input);if(!t)return;const n=xe[e.input](t,e);X(t),e.inputAutoFocus&&setTimeout((()=>{z(n)}))},ge=(e,t)=>{const n=w();if(!n)return;const r=G(n,e);if(r){(e=>{for(let t=0;t<e.attributes.length;t++){const n=e.attributes[t].name;["id","type","value","style"].includes(n)||e.removeAttribute(n)}})(r);for(const e in t)r.setAttribute(e,t[e])}},ye=e=>{if(!e.input)return;const t=be(e.input);t&&V(t,e,"input")},_e=(e,t)=>{!e.placeholder&&t.inputPlaceholder&&(e.placeholder=t.inputPlaceholder)},ve=(e,t,n)=>{if(n.inputLabel){const r=document.createElement("label"),i=a["input-label"];r.setAttribute("for",e.id),r.className=i,"object"==typeof n.customClass&&q(r,n.customClass.inputLabel),r.innerText=n.inputLabel,t.insertAdjacentElement("beforebegin",r)}},be=e=>{const t=w();if(t)return W(t,a[e]||a.input)},we=(e,t)=>{["string","number"].includes(typeof t)?e.value=`${t}`:y(t)||u(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof t}"`)},xe={};xe.text=xe.email=xe.password=xe.number=xe.tel=xe.url=xe.search=xe.date=xe["datetime-local"]=xe.time=xe.week=xe.month=(e,t)=>(we(e,t.inputValue),ve(e,e,t),_e(e,t),e.type=t.input,e),xe.file=(e,t)=>(ve(e,e,t),_e(e,t),e),xe.range=(e,t)=>{const n=e.querySelector("input"),r=e.querySelector("output");return we(n,t.inputValue),n.type=t.input,we(r,t.inputValue),ve(n,e,t),e},xe.select=(e,t)=>{if(e.textContent="",t.inputPlaceholder){const n=document.createElement("option");B(n,t.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,e.appendChild(n)}return ve(e,e,t),e},xe.radio=e=>(e.textContent="",e),xe.checkbox=(e,t)=>{const n=G(w(),"checkbox");n.value="1",n.checked=Boolean(t.inputValue);const r=e.querySelector("span");return B(r,t.inputPlaceholder||t.inputLabel),n},xe.textarea=(e,t)=>{we(e,t.inputValue),_e(e,t),ve(e,e,t);return setTimeout((()=>{if("MutationObserver"in window){const n=parseInt(window.getComputedStyle(w()).width);new MutationObserver((()=>{if(!document.body.contains(e))return;const r=e.offsetWidth+(i=e,parseInt(window.getComputedStyle(i).marginLeft)+parseInt(window.getComputedStyle(i).marginRight));var i;r>n?w().style.width=`${r}px`:K(w(),"width",t.width)})).observe(e,{attributes:!0,attributeFilter:["style"]})}})),e};const Se=(e,t)=>{const n=T();n&&(J(n),V(n,t,"htmlContainer"),t.html?(se(t.html,n),X(n,"block")):t.text?(n.textContent=t.text,X(n,"block")):Y(n),((e,t)=>{const n=w();if(!n)return;const r=he.innerParams.get(e),i=!r||t.input!==r.input;me.forEach((e=>{const r=W(n,a[e]);r&&(ge(e,t.inputAttributes),r.className=a[e],i&&Y(r))})),t.input&&(i&&fe(t),ye(t))})(e,t))},Te=(e,t)=>{for(const[n,r]of Object.entries(s))t.icon!==n&&H(e,r);q(e,t.icon&&s[t.icon]),ke(e,t),Ee(),V(e,t,"icon")},Ee=()=>{const e=w();if(!e)return;const t=window.getComputedStyle(e).getPropertyValue("background-color"),n=e.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let e=0;e<n.length;e++)n[e].style.backgroundColor=t},Ie=(e,t)=>{if(!t.icon&&!t.iconHtml)return;let n=e.innerHTML,r="";t.iconHtml?r=je(t.iconHtml):"success"===t.icon?(r='\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n',n=n.replace(/ style=".*?"/g,"")):"error"===t.icon?r='\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n':t.icon&&(r=je({question:"?",warning:"!",info:"i"}[t.icon])),n.trim()!==r.trim()&&B(e,r)},ke=(e,t)=>{if(t.iconColor){e.style.color=t.iconColor,e.style.borderColor=t.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Q(e,n,"background-color",t.iconColor);Q(e,".swal2-success-ring","border-color",t.iconColor)}},je=e=>`<div class="${a["icon-content"]}">${e}</div>`,Ae=(e,t)=>{const n=t.showClass||{};e.className=`${a.popup} ${ee(e)?n.popup:""}`,t.toast?(q([document.documentElement,document.body],a["toast-shown"]),q(e,a.toast)):q(e,a.modal),V(e,t,"popup"),"string"==typeof t.customClass&&q(e,t.customClass),t.icon&&q(e,a[`icon-${t.icon}`])},Ce=e=>{const t=document.createElement("li");return q(t,a["progress-step"]),B(t,e),t},Oe=e=>{const t=document.createElement("li");return q(t,a["progress-step-line"]),e.progressStepsDistance&&K(t,"width",e.progressStepsDistance),t},Me=(e,t)=>{((e,t)=>{const n=_(),r=w();if(n&&r){if(t.toast){K(n,"width",t.width),r.style.width="100%";const e=O();e&&r.insertBefore(e,x())}else K(r,"width",t.width);K(r,"padding",t.padding),t.color&&(r.style.color=t.color),t.background&&(r.style.background=t.background),Y(k()),Ae(r,t)}})(0,t),de(0,t),((e,t)=>{const n=I();if(!n)return;const{progressSteps:r,currentProgressStep:i}=t;r&&0!==r.length&&void 0!==i?(X(n),n.textContent="",i>=r.length&&u("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),r.forEach(((e,o)=>{const s=Ce(e);if(n.appendChild(s),o===i&&q(s,a["active-progress-step"]),o!==r.length-1){const e=Oe(t);n.appendChild(e)}}))):Y(n)})(0,t),((e,t)=>{const n=he.innerParams.get(e),r=x();if(r){if(n&&t.icon===n.icon)return Ie(r,t),void Te(r,t);if(t.icon||t.iconHtml){if(t.icon&&-1===Object.keys(s).indexOf(t.icon))return p(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${t.icon}"`),void Y(r);X(r),Ie(r,t),Te(r,t),q(r,t.showClass&&t.showClass.icon)}else Y(r)}})(e,t),((e,t)=>{const n=E();n&&(t.imageUrl?(X(n,""),n.setAttribute("src",t.imageUrl),n.setAttribute("alt",t.imageAlt||""),K(n,"width",t.imageWidth),K(n,"height",t.imageHeight),n.className=a.image,V(n,t,"image")):Y(n))})(0,t),((e,t)=>{const n=S();n&&(J(n),Z(n,t.title||t.titleText,"block"),t.title&&se(t.title,n),t.titleText&&(n.innerText=t.titleText),V(n,t,"title"))})(0,t),((e,t)=>{const n=P();n&&(B(n,t.closeButtonHtml||""),V(n,t,"closeButton"),Z(n,t.showCloseButton),n.setAttribute("aria-label",t.closeButtonAriaLabel||""))})(0,t),Se(e,t),ue(0,t),((e,t)=>{const n=N();n&&(J(n),Z(n,t.footer,"block"),t.footer&&se(t.footer,n),V(n,t,"footer"))})(0,t);const n=w();"function"==typeof t.didRender&&n&&t.didRender(n),r.eventEmitter.emit("didRender",n)},Ne=()=>{var e;return null===(e=j())||void 0===e?void 0:e.click()},Re=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Pe=e=>{e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1)},De=(e,t)=>{var n;const r=D();if(r.length)return(e+=t)===r.length?e=0:-1===e&&(e=r.length-1),void r[e].focus();null===(n=w())||void 0===n||n.focus()},Le=["ArrowRight","ArrowDown"],Fe=["ArrowLeft","ArrowUp"],Be=(e,t,n)=>{e&&(t.isComposing||229===t.keyCode||(e.stopKeydownPropagation&&t.stopPropagation(),"Enter"===t.key?Ue(t,e):"Tab"===t.key?Ve(t):[...Le,...Fe].includes(t.key)?Ge(t.key):"Escape"===t.key&&ze(t,e,n)))},Ue=(e,t)=>{if(!m(t.allowEnterKey))return;const n=G(w(),t.input);if(e.target&&n&&e.target instanceof HTMLElement&&e.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(t.input))return;Ne(),e.preventDefault()}},Ve=e=>{const t=e.target,n=D();let r=-1;for(let e=0;e<n.length;e++)if(t===n[e]){r=e;break}e.shiftKey?De(r,-1):De(r,1),e.stopPropagation(),e.preventDefault()},Ge=e=>{const t=M(),n=j(),r=C(),i=A();if(!(t&&n&&r&&i))return;const o=[n,r,i];if(document.activeElement instanceof HTMLElement&&!o.includes(document.activeElement))return;const a=Le.includes(e)?"nextElementSibling":"previousElementSibling";let s=document.activeElement;if(s){for(let e=0;e<t.children.length;e++){if(s=s[a],!s)return;if(s instanceof HTMLButtonElement&&ee(s))break}s instanceof HTMLButtonElement&&s.focus()}},ze=(e,t,n)=>{m(t.allowEscapeKey)&&(e.preventDefault(),n(Re.esc))};var $e={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const qe=()=>{Array.from(document.body.children).forEach((e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")}))},He="undefined"!=typeof window&&!!window.GestureEvent,We=()=>{const e=_();if(!e)return;let t;e.ontouchstart=e=>{t=Ke(e)},e.ontouchmove=e=>{t&&(e.preventDefault(),e.stopPropagation())}},Ke=e=>{const t=e.target,n=_(),r=T();return!(!n||!r||Xe(e)||Ye(e)||t!==n&&(te(n)||!(t instanceof HTMLElement)||"INPUT"===t.tagName||"TEXTAREA"===t.tagName||te(r)&&r.contains(t)))},Xe=e=>e.touches&&e.touches.length&&"stylus"===e.touches[0].touchType,Ye=e=>e.touches&&e.touches.length>1;let Je=null;const Qe=e=>{null===Je&&(document.body.scrollHeight>window.innerHeight||"scroll"===e)&&(Je=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${Je+(()=>{const e=document.createElement("div");e.className=a["scrollbar-measure"],document.body.appendChild(e);const t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t})()}px`)};function Ze(e,t,n,o){F()?st(e,o):(i(n).then((()=>st(e,o))),Pe(r)),He?(t.setAttribute("style","display:none !important"),t.removeAttribute("class"),t.innerHTML=""):t.remove(),L()&&(null!==Je&&(document.body.style.paddingRight=`${Je}px`,Je=null),(()=>{if(U(document.body,a.iosfix)){const e=parseInt(document.body.style.top,10);H(document.body,a.iosfix),document.body.style.top="",document.body.scrollTop=-1*e}})(),qe()),H([document.documentElement,document.body],[a.shown,a["height-auto"],a["no-backdrop"],a["toast-shown"]])}function et(e){e=it(e);const t=$e.swalPromiseResolve.get(this),n=tt(this);this.isAwaitingPromise?e.isDismissed||(rt(this),t(e)):n&&t(e)}const tt=e=>{const t=w();if(!t)return!1;const n=he.innerParams.get(e);if(!n||U(t,n.hideClass.popup))return!1;H(t,n.showClass.popup),q(t,n.hideClass.popup);const r=_();return H(r,n.showClass.backdrop),q(r,n.hideClass.backdrop),ot(e,t,n),!0};function nt(e){const t=$e.swalPromiseReject.get(this);rt(this),t&&t(e)}const rt=e=>{e.isAwaitingPromise&&(delete e.isAwaitingPromise,he.innerParams.get(e)||e._destroy())},it=e=>void 0===e?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},e),ot=(e,t,n)=>{const i=_(),o=ne(t);"function"==typeof n.willClose&&n.willClose(t),r.eventEmitter.emit("willClose",t),o?at(e,t,i,n.returnFocus,n.didClose):Ze(e,i,n.returnFocus,n.didClose)},at=(e,t,n,i,o)=>{r.swalCloseEventFinishedCallback=Ze.bind(null,e,n,i,o);const a=function(e){e.target===t&&(r.swalCloseEventFinishedCallback(),delete r.swalCloseEventFinishedCallback,t.removeEventListener("animationend",a),t.removeEventListener("transitionend",a))};t.addEventListener("animationend",a),t.addEventListener("transitionend",a)},st=(e,t)=>{setTimeout((()=>{"function"==typeof t&&t.bind(e.params)(),r.eventEmitter.emit("didClose"),e._destroy&&e._destroy()}))},lt=e=>{let t=w();if(t||new Vn,t=w(),!t)return;const n=O();F()?Y(x()):ct(t,e),X(n),t.setAttribute("data-loading","true"),t.setAttribute("aria-busy","true"),t.focus()},ct=(e,t)=>{const n=M(),r=O();n&&r&&(!t&&ee(j())&&(t=j()),X(n),t&&(Y(t),r.setAttribute("data-button-to-replace",t.className),n.insertBefore(r,t)),q([e,n],a.loading))},ut=e=>e.checked?1:0,pt=e=>e.checked?e.value:null,dt=e=>e.files&&e.files.length?null!==e.getAttribute("multiple")?e.files:e.files[0]:null,ht=(e,t)=>{const n=w();if(!n)return;const r=e=>{"select"===t.input?function(e,t,n){const r=W(e,a.select);if(!r)return;const i=(e,t,r)=>{const i=document.createElement("option");i.value=r,B(i,t),i.selected=gt(r,n.inputValue),e.appendChild(i)};t.forEach((e=>{const t=e[0],n=e[1];if(Array.isArray(n)){const e=document.createElement("optgroup");e.label=t,e.disabled=!1,r.appendChild(e),n.forEach((t=>i(e,t[1],t[0])))}else i(r,n,t)})),r.focus()}(n,ft(e),t):"radio"===t.input&&function(e,t,n){const r=W(e,a.radio);if(!r)return;t.forEach((e=>{const t=e[0],i=e[1],o=document.createElement("input"),s=document.createElement("label");o.type="radio",o.name=a.radio,o.value=t,gt(t,n.inputValue)&&(o.checked=!0);const l=document.createElement("span");B(l,i),l.className=a.label,s.appendChild(o),s.appendChild(l),r.appendChild(s)}));const i=r.querySelectorAll("input");i.length&&i[0].focus()}(n,ft(e),t)};f(t.inputOptions)||y(t.inputOptions)?(lt(j()),g(t.inputOptions).then((t=>{e.hideLoading(),r(t)}))):"object"==typeof t.inputOptions?r(t.inputOptions):p("Unexpected type of inputOptions! Expected object, Map or Promise, got "+typeof t.inputOptions)},mt=(e,t)=>{const n=e.getInput();n&&(Y(n),g(t.inputValue).then((r=>{n.value="number"===t.input?`${parseFloat(r)||0}`:`${r}`,X(n),n.focus(),e.hideLoading()})).catch((t=>{p(`Error in inputValue promise: ${t}`),n.value="",X(n),n.focus(),e.hideLoading()})))};const ft=e=>{const t=[];return e instanceof Map?e.forEach(((e,n)=>{let r=e;"object"==typeof r&&(r=ft(r)),t.push([n,r])})):Object.keys(e).forEach((n=>{let r=e[n];"object"==typeof r&&(r=ft(r)),t.push([n,r])})),t},gt=(e,t)=>!!t&&t.toString()===e.toString(),yt=(e,t)=>{const n=he.innerParams.get(e);if(!n.input)return void p(`The "input" parameter is needed to be set when using returnInputValueOn${c(t)}`);const r=e.getInput(),i=((e,t)=>{const n=e.getInput();if(!n)return null;switch(t.input){case"checkbox":return ut(n);case"radio":return pt(n);case"file":return dt(n);default:return t.inputAutoTrim?n.value.trim():n.value}})(e,n);n.inputValidator?_t(e,i,t):r&&!r.checkValidity()?(e.enableButtons(),e.showValidationMessage(n.validationMessage||r.validationMessage)):"deny"===t?vt(e,i):xt(e,i)},_t=(e,t,n)=>{const r=he.innerParams.get(e);e.disableInput(),Promise.resolve().then((()=>g(r.inputValidator(t,r.validationMessage)))).then((r=>{e.enableButtons(),e.enableInput(),r?e.showValidationMessage(r):"deny"===n?vt(e,t):xt(e,t)}))},vt=(e,t)=>{const n=he.innerParams.get(e||void 0);n.showLoaderOnDeny&&lt(C()),n.preDeny?(e.isAwaitingPromise=!0,Promise.resolve().then((()=>g(n.preDeny(t,n.validationMessage)))).then((n=>{!1===n?(e.hideLoading(),rt(e)):e.close({isDenied:!0,value:void 0===n?t:n})})).catch((t=>wt(e||void 0,t)))):e.close({isDenied:!0,value:t})},bt=(e,t)=>{e.close({isConfirmed:!0,value:t})},wt=(e,t)=>{e.rejectPromise(t)},xt=(e,t)=>{const n=he.innerParams.get(e||void 0);n.showLoaderOnConfirm&&lt(),n.preConfirm?(e.resetValidationMessage(),e.isAwaitingPromise=!0,Promise.resolve().then((()=>g(n.preConfirm(t,n.validationMessage)))).then((n=>{ee(k())||!1===n?(e.hideLoading(),rt(e)):bt(e,void 0===n?t:n)})).catch((t=>wt(e||void 0,t)))):bt(e,t)};function St(){const e=he.innerParams.get(this);if(!e)return;const t=he.domCache.get(this);Y(t.loader),F()?e.icon&&X(x()):Tt(t),H([t.popup,t.actions],a.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}const Tt=e=>{const t=e.popup.getElementsByClassName(e.loader.getAttribute("data-button-to-replace"));t.length?X(t[0],"inline-block"):!ee(j())&&!ee(C())&&!ee(A())&&Y(e.actions)};function Et(){const e=he.innerParams.get(this),t=he.domCache.get(this);return t?G(t.popup,e.input):null}function It(e,t,n){const r=he.domCache.get(e);t.forEach((e=>{r[e].disabled=n}))}function kt(e,t){const n=w();if(n&&e)if("radio"===e.type){const e=n.querySelectorAll(`[name="${a.radio}"]`);for(let n=0;n<e.length;n++)e[n].disabled=t}else e.disabled=t}function jt(){It(this,["confirmButton","denyButton","cancelButton"],!1)}function At(){It(this,["confirmButton","denyButton","cancelButton"],!0)}function Ct(){kt(this.getInput(),!1)}function Ot(){kt(this.getInput(),!0)}function Mt(e){const t=he.domCache.get(this),n=he.innerParams.get(this);B(t.validationMessage,e),t.validationMessage.className=a["validation-message"],n.customClass&&n.customClass.validationMessage&&q(t.validationMessage,n.customClass.validationMessage),X(t.validationMessage);const r=this.getInput();r&&(r.setAttribute("aria-invalid","true"),r.setAttribute("aria-describedby",a["validation-message"]),z(r),q(r,a.inputerror))}function Nt(){const e=he.domCache.get(this);e.validationMessage&&Y(e.validationMessage);const t=this.getInput();t&&(t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedby"),H(t,a.inputerror))}const Rt={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Pt=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],Dt={allowEnterKey:void 0},Lt=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Ft=e=>Object.prototype.hasOwnProperty.call(Rt,e),Bt=e=>-1!==Pt.indexOf(e),Ut=e=>Dt[e],Vt=e=>{Ft(e)||u(`Unknown parameter "${e}"`)},Gt=e=>{Lt.includes(e)&&u(`The parameter "${e}" is incompatible with toasts`)},zt=e=>{const t=Ut(e);t&&h(e,t)};function $t(e){const t=w(),n=he.innerParams.get(this);if(!t||U(t,n.hideClass.popup))return void u("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const r=qt(e),i=Object.assign({},n,r);Me(this,i),he.innerParams.set(this,i),Object.defineProperties(this,{params:{value:Object.assign({},this.params,e),writable:!1,enumerable:!0}})}const qt=e=>{const t={};return Object.keys(e).forEach((n=>{Bt(n)?t[n]=e[n]:u(`Invalid parameter to update: ${n}`)})),t};function Ht(){const e=he.domCache.get(this),t=he.innerParams.get(this);t?(e.popup&&r.swalCloseEventFinishedCallback&&(r.swalCloseEventFinishedCallback(),delete r.swalCloseEventFinishedCallback),"function"==typeof t.didDestroy&&t.didDestroy(),r.eventEmitter.emit("didDestroy"),Wt(this)):Kt(this)}const Wt=e=>{Kt(e),delete e.params,delete r.keydownHandler,delete r.keydownTarget,delete r.currentInstance},Kt=e=>{e.isAwaitingPromise?(Xt(he,e),e.isAwaitingPromise=!0):(Xt($e,e),Xt(he,e),delete e.isAwaitingPromise,delete e.disableButtons,delete e.enableButtons,delete e.getInput,delete e.disableInput,delete e.enableInput,delete e.hideLoading,delete e.disableLoading,delete e.showValidationMessage,delete e.resetValidationMessage,delete e.close,delete e.closePopup,delete e.closeModal,delete e.closeToast,delete e.rejectPromise,delete e.update,delete e._destroy)},Xt=(e,t)=>{for(const n in e)e[n].delete(t)};var Yt=Object.freeze({__proto__:null,_destroy:Ht,close:et,closeModal:et,closePopup:et,closeToast:et,disableButtons:At,disableInput:Ot,disableLoading:St,enableButtons:jt,enableInput:Ct,getInput:Et,handleAwaitingPromise:rt,hideLoading:St,rejectPromise:nt,resetValidationMessage:Nt,showValidationMessage:Mt,update:$t});const Jt=(e,t,n)=>{t.popup.onclick=()=>{e&&(Qt(e)||e.timer||e.input)||n(Re.close)}},Qt=e=>!!(e.showConfirmButton||e.showDenyButton||e.showCancelButton||e.showCloseButton);let Zt=!1;const en=e=>{e.popup.onmousedown=()=>{e.container.onmouseup=function(t){e.container.onmouseup=()=>{},t.target===e.container&&(Zt=!0)}}},tn=e=>{e.container.onmousedown=t=>{t.target===e.container&&t.preventDefault(),e.popup.onmouseup=function(t){e.popup.onmouseup=()=>{},(t.target===e.popup||t.target instanceof HTMLElement&&e.popup.contains(t.target))&&(Zt=!0)}}},nn=(e,t,n)=>{t.container.onclick=r=>{Zt?Zt=!1:r.target===t.container&&m(e.allowOutsideClick)&&n(Re.backdrop)}},rn=e=>e instanceof Element||(e=>"object"==typeof e&&e.jquery)(e);const on=()=>{if(r.timeout)return(()=>{const e=R();if(!e)return;const t=parseInt(window.getComputedStyle(e).width);e.style.removeProperty("transition"),e.style.width="100%";const n=t/parseInt(window.getComputedStyle(e).width)*100;e.style.width=`${n}%`})(),r.timeout.stop()},an=()=>{if(r.timeout){const e=r.timeout.start();return re(e),e}};let sn=!1;const ln={};const cn=e=>{for(let t=e.target;t&&t!==document;t=t.parentNode)for(const e in ln){const n=t.getAttribute(e);if(n)return void ln[e].fire({template:n})}};r.eventEmitter=new class{constructor(){this.events={}}_getHandlersByEventName(e){return void 0===this.events[e]&&(this.events[e]=[]),this.events[e]}on(e,t){const n=this._getHandlersByEventName(e);n.includes(t)||n.push(t)}once(e,t){var n=this;const r=function(){n.removeListener(e,r);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];t.apply(n,o)};this.on(e,r)}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this._getHandlersByEventName(e).forEach((e=>{try{e.apply(this,n)}catch(e){console.error(e)}}))}removeListener(e,t){const n=this._getHandlersByEventName(e),r=n.indexOf(t);r>-1&&n.splice(r,1)}removeAllListeners(e){void 0!==this.events[e]&&(this.events[e].length=0)}reset(){this.events={}}};var un=Object.freeze({__proto__:null,argsToParams:e=>{const t={};return"object"!=typeof e[0]||rn(e[0])?["title","html","icon"].forEach(((n,r)=>{const i=e[r];"string"==typeof i||rn(i)?t[n]=i:void 0!==i&&p(`Unexpected type of ${n}! Expected "string" or "Element", got ${typeof i}`)})):Object.assign(t,e[0]),t},bindClickHandler:function(){ln[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,sn||(document.body.addEventListener("click",cn),sn=!0)},clickCancel:()=>{var e;return null===(e=A())||void 0===e?void 0:e.click()},clickConfirm:Ne,clickDeny:()=>{var e;return null===(e=C())||void 0===e?void 0:e.click()},enableLoading:lt,fire:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new this(...t)},getActions:M,getCancelButton:A,getCloseButton:P,getConfirmButton:j,getContainer:_,getDenyButton:C,getFocusableElements:D,getFooter:N,getHtmlContainer:T,getIcon:x,getIconContent:()=>b(a["icon-content"]),getImage:E,getInputLabel:()=>b(a["input-label"]),getLoader:O,getPopup:w,getProgressSteps:I,getTimerLeft:()=>r.timeout&&r.timeout.getTimerLeft(),getTimerProgressBar:R,getTitle:S,getValidationMessage:k,increaseTimer:e=>{if(r.timeout){const t=r.timeout.increase(e);return re(t,!0),t}},isDeprecatedParameter:Ut,isLoading:()=>{const e=w();return!!e&&e.hasAttribute("data-loading")},isTimerRunning:()=>!(!r.timeout||!r.timeout.isRunning()),isUpdatableParameter:Bt,isValidParameter:Ft,isVisible:()=>ee(w()),mixin:function(e){return class extends(this){_main(t,n){return super._main(t,Object.assign({},e,n))}}},off:(e,t)=>{e?t?r.eventEmitter.removeListener(e,t):r.eventEmitter.removeAllListeners(e):r.eventEmitter.reset()},on:(e,t)=>{r.eventEmitter.on(e,t)},once:(e,t)=>{r.eventEmitter.once(e,t)},resumeTimer:an,showLoading:lt,stopTimer:on,toggleTimer:()=>{const e=r.timeout;return e&&(e.running?on():an())}});class pn{constructor(e,t){this.callback=e,this.remaining=t,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(e){const t=this.running;return t&&this.stop(),this.remaining+=e,t&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const dn=["swal-title","swal-html","swal-footer"],hn=e=>{const t={};return Array.from(e.querySelectorAll("swal-param")).forEach((e=>{wn(e,["name","value"]);const n=e.getAttribute("name"),r=e.getAttribute("value");n&&r&&(t[n]="boolean"==typeof Rt[n]?"false"!==r:"object"==typeof Rt[n]?JSON.parse(r):r)})),t},mn=e=>{const t={};return Array.from(e.querySelectorAll("swal-function-param")).forEach((e=>{const n=e.getAttribute("name"),r=e.getAttribute("value");n&&r&&(t[n]=new Function(`return ${r}`)())})),t},fn=e=>{const t={};return Array.from(e.querySelectorAll("swal-button")).forEach((e=>{wn(e,["type","color","aria-label"]);const n=e.getAttribute("type");n&&["confirm","cancel","deny"].includes(n)&&(t[`${n}ButtonText`]=e.innerHTML,t[`show${c(n)}Button`]=!0,e.hasAttribute("color")&&(t[`${n}ButtonColor`]=e.getAttribute("color")),e.hasAttribute("aria-label")&&(t[`${n}ButtonAriaLabel`]=e.getAttribute("aria-label")))})),t},gn=e=>{const t={},n=e.querySelector("swal-image");return n&&(wn(n,["src","width","height","alt"]),n.hasAttribute("src")&&(t.imageUrl=n.getAttribute("src")||void 0),n.hasAttribute("width")&&(t.imageWidth=n.getAttribute("width")||void 0),n.hasAttribute("height")&&(t.imageHeight=n.getAttribute("height")||void 0),n.hasAttribute("alt")&&(t.imageAlt=n.getAttribute("alt")||void 0)),t},yn=e=>{const t={},n=e.querySelector("swal-icon");return n&&(wn(n,["type","color"]),n.hasAttribute("type")&&(t.icon=n.getAttribute("type")),n.hasAttribute("color")&&(t.iconColor=n.getAttribute("color")),t.iconHtml=n.innerHTML),t},_n=e=>{const t={},n=e.querySelector("swal-input");n&&(wn(n,["type","label","placeholder","value"]),t.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(t.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(t.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(t.inputValue=n.getAttribute("value")));const r=Array.from(e.querySelectorAll("swal-input-option"));return r.length&&(t.inputOptions={},r.forEach((e=>{wn(e,["value"]);const n=e.getAttribute("value");if(!n)return;const r=e.innerHTML;t.inputOptions[n]=r}))),t},vn=(e,t)=>{const n={};for(const r in t){const i=t[r],o=e.querySelector(i);o&&(wn(o,[]),n[i.replace(/^swal-/,"")]=o.innerHTML.trim())}return n},bn=e=>{const t=dn.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(e.children).forEach((e=>{const n=e.tagName.toLowerCase();t.includes(n)||u(`Unrecognized element <${n}>`)}))},wn=(e,t)=>{Array.from(e.attributes).forEach((n=>{-1===t.indexOf(n.name)&&u([`Unrecognized attribute "${n.name}" on <${e.tagName.toLowerCase()}>.`,t.length?`Allowed attributes are: ${t.join(", ")}`:"To set the value, use HTML within the element."])}))},xn=e=>{const t=_(),n=w();"function"==typeof e.willOpen&&e.willOpen(n),r.eventEmitter.emit("willOpen",n);const i=window.getComputedStyle(document.body).overflowY;In(t,n,e),setTimeout((()=>{Tn(t,n)}),10),L()&&(En(t,e.scrollbarPadding,i),(()=>{const e=_();Array.from(document.body.children).forEach((t=>{t.contains(e)||(t.hasAttribute("aria-hidden")&&t.setAttribute("data-previous-aria-hidden",t.getAttribute("aria-hidden")||""),t.setAttribute("aria-hidden","true"))}))})()),F()||r.previousActiveElement||(r.previousActiveElement=document.activeElement),"function"==typeof e.didOpen&&setTimeout((()=>e.didOpen(n))),r.eventEmitter.emit("didOpen",n),H(t,a["no-transition"])},Sn=e=>{const t=w();if(e.target!==t)return;const n=_();t.removeEventListener("animationend",Sn),t.removeEventListener("transitionend",Sn),n.style.overflowY="auto"},Tn=(e,t)=>{ne(t)?(e.style.overflowY="hidden",t.addEventListener("animationend",Sn),t.addEventListener("transitionend",Sn)):e.style.overflowY="auto"},En=(e,t,n)=>{(()=>{if(He&&!U(document.body,a.iosfix)){const e=document.body.scrollTop;document.body.style.top=-1*e+"px",q(document.body,a.iosfix),We()}})(),t&&"hidden"!==n&&Qe(n),setTimeout((()=>{e.scrollTop=0}))},In=(e,t,n)=>{q(e,n.showClass.backdrop),n.animation?(t.style.setProperty("opacity","0","important"),X(t,"grid"),setTimeout((()=>{q(t,n.showClass.popup),t.style.removeProperty("opacity")}),10)):X(t,"grid"),q([document.documentElement,document.body],a.shown),n.heightAuto&&n.backdrop&&!n.toast&&q([document.documentElement,document.body],a["height-auto"])};var kn=(e,t)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid email address"),jn=(e,t)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid URL");function An(e){(function(e){e.inputValidator||("email"===e.input&&(e.inputValidator=kn),"url"===e.input&&(e.inputValidator=jn))})(e),e.showLoaderOnConfirm&&!e.preConfirm&&u("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function(e){(!e.target||"string"==typeof e.target&&!document.querySelector(e.target)||"string"!=typeof e.target&&!e.target.appendChild)&&(u('Target parameter is not valid, defaulting to "body"'),e.target="body")}(e),"string"==typeof e.title&&(e.title=e.title.split("\n").join("<br />")),ae(e)}let Cn;var On=new WeakMap;class Mn{constructor(){if(n(this,On,void 0),"undefined"==typeof window)return;Cn=this;for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];const o=Object.freeze(this.constructor.argsToParams(r));var a,s,l;this.params=o,this.isAwaitingPromise=!1,a=On,s=this,l=this._main(Cn.params),a.set(e(a,s),l)}_main(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((e=>{!1===e.backdrop&&e.allowOutsideClick&&u('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const t in e)Vt(t),e.toast&&Gt(t),zt(t)})(Object.assign({},t,e)),r.currentInstance){const e=$e.swalPromiseResolve.get(r.currentInstance),{isAwaitingPromise:t}=r.currentInstance;r.currentInstance._destroy(),t||e({isDismissed:!0}),L()&&qe()}r.currentInstance=Cn;const n=Rn(e,t);An(n),Object.freeze(n),r.timeout&&(r.timeout.stop(),delete r.timeout),clearTimeout(r.restoreFocusTimeout);const i=Pn(Cn);return Me(Cn,n),he.innerParams.set(Cn,n),Nn(Cn,i,n)}then(e){return t(On,this).then(e)}finally(e){return t(On,this).finally(e)}}const Nn=(e,t,n)=>new Promise(((i,o)=>{const a=t=>{e.close({isDismissed:!0,dismiss:t})};$e.swalPromiseResolve.set(e,i),$e.swalPromiseReject.set(e,o),t.confirmButton.onclick=()=>{(e=>{const t=he.innerParams.get(e);e.disableButtons(),t.input?yt(e,"confirm"):xt(e,!0)})(e)},t.denyButton.onclick=()=>{(e=>{const t=he.innerParams.get(e);e.disableButtons(),t.returnInputValueOnDeny?yt(e,"deny"):vt(e,!1)})(e)},t.cancelButton.onclick=()=>{((e,t)=>{e.disableButtons(),t(Re.cancel)})(e,a)},t.closeButton.onclick=()=>{a(Re.close)},((e,t,n)=>{e.toast?Jt(e,t,n):(en(t),tn(t),nn(e,t,n))})(n,t,a),((e,t,n)=>{Pe(e),t.toast||(e.keydownHandler=e=>Be(t,e,n),e.keydownTarget=t.keydownListenerCapture?window:w(),e.keydownListenerCapture=t.keydownListenerCapture,e.keydownTarget.addEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)})(r,n,a),((e,t)=>{"select"===t.input||"radio"===t.input?ht(e,t):["text","email","number","tel","textarea"].some((e=>e===t.input))&&(f(t.inputValue)||y(t.inputValue))&&(lt(j()),mt(e,t))})(e,n),xn(n),Dn(r,n,a),Ln(t,n),setTimeout((()=>{t.container.scrollTop=0}))})),Rn=(e,t)=>{const n=(e=>{const t="string"==typeof e.template?document.querySelector(e.template):e.template;if(!t)return{};const n=t.content;return bn(n),Object.assign(hn(n),mn(n),fn(n),gn(n),yn(n),_n(n),vn(n,dn))})(e),r=Object.assign({},Rt,t,n,e);return r.showClass=Object.assign({},Rt.showClass,r.showClass),r.hideClass=Object.assign({},Rt.hideClass,r.hideClass),!1===r.animation&&(r.showClass={backdrop:"swal2-noanimation"},r.hideClass={}),r},Pn=e=>{const t={popup:w(),container:_(),actions:M(),confirmButton:j(),denyButton:C(),cancelButton:A(),loader:O(),closeButton:P(),validationMessage:k(),progressSteps:I()};return he.domCache.set(e,t),t},Dn=(e,t,n)=>{const r=R();Y(r),t.timer&&(e.timeout=new pn((()=>{n("timer"),delete e.timeout}),t.timer),t.timerProgressBar&&(X(r),V(r,t,"timerProgressBar"),setTimeout((()=>{e.timeout&&e.timeout.running&&re(t.timer)}))))},Ln=(e,t)=>{if(!t.toast)return m(t.allowEnterKey)?void(Fn(e)||Bn(e,t)||De(-1,1)):(h("allowEnterKey"),void Un())},Fn=e=>{const t=e.popup.querySelectorAll("[autofocus]");for(const e of t)if(e instanceof HTMLElement&&ee(e))return e.focus(),!0;return!1},Bn=(e,t)=>t.focusDeny&&ee(e.denyButton)?(e.denyButton.focus(),!0):t.focusCancel&&ee(e.cancelButton)?(e.cancelButton.focus(),!0):!(!t.focusConfirm||!ee(e.confirmButton)||(e.confirmButton.focus(),0)),Un=()=>{document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};if("undefined"!=typeof window&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const e=new Date,t=localStorage.getItem("swal-initiation");t?(e.getTime()-Date.parse(t))/864e5>3&&setTimeout((()=>{document.body.style.pointerEvents="none";const e=document.createElement("audio");e.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",e.loop=!0,document.body.appendChild(e),setTimeout((()=>{e.play().catch((()=>{}))}),2500)}),500):localStorage.setItem("swal-initiation",`${e}`)}Mn.prototype.disableButtons=At,Mn.prototype.enableButtons=jt,Mn.prototype.getInput=Et,Mn.prototype.disableInput=Ot,Mn.prototype.enableInput=Ct,Mn.prototype.hideLoading=St,Mn.prototype.disableLoading=St,Mn.prototype.showValidationMessage=Mt,Mn.prototype.resetValidationMessage=Nt,Mn.prototype.close=et,Mn.prototype.closePopup=et,Mn.prototype.closeModal=et,Mn.prototype.closeToast=et,Mn.prototype.rejectPromise=nt,Mn.prototype.update=$t,Mn.prototype._destroy=Ht,Object.assign(Mn,un),Object.keys(Yt).forEach((e=>{Mn[e]=function(){return Cn&&Cn[e]?Cn[e](...arguments):null}})),Mn.DismissReason=Re,Mn.version="11.14.4";const Vn=Mn;return Vn.default=Vn,Vn}(),void 0!==this&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),"undefined"!=typeof document&&function(e,t){var n=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=t);else try{n.innerHTML=t}catch(e){n.innerText=t}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:hsl(0,0%,33%);font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid hsl(0,0%,85%);border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:hsl(0,0%,94%);color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:rgb(249.95234375,205.965625,167.74765625);color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:rgb(156.7033492823,224.2822966507,246.2966507177);color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:rgb(200.8064516129,217.9677419355,225.1935483871);color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')},5139:(e,t,n)=>{"use strict";var r=n(973),i=n(5343),o=n(8287).hp;n.g.__TYPEDARRAY_POOL||(n.g.__TYPEDARRAY_POOL={UINT8:i([32,0]),UINT16:i([32,0]),UINT32:i([32,0]),BIGUINT64:i([32,0]),INT8:i([32,0]),INT16:i([32,0]),INT32:i([32,0]),BIGINT64:i([32,0]),FLOAT:i([32,0]),DOUBLE:i([32,0]),DATA:i([32,0]),UINT8C:i([32,0]),BUFFER:i([32,0])});var a="undefined"!=typeof Uint8ClampedArray,s="undefined"!=typeof BigUint64Array,l="undefined"!=typeof BigInt64Array,c=n.g.__TYPEDARRAY_POOL;c.UINT8C||(c.UINT8C=i([32,0])),c.BIGUINT64||(c.BIGUINT64=i([32,0])),c.BIGINT64||(c.BIGINT64=i([32,0])),c.BUFFER||(c.BUFFER=i([32,0]));var u=c.DATA,p=c.BUFFER;function d(e){if(e){var t=e.length||e.byteLength,n=r.log2(t);u[n].push(e)}}function h(e){e=r.nextPow2(e);var t=r.log2(e),n=u[t];return n.length>0?n.pop():new ArrayBuffer(e)}function m(e){return new Uint8Array(h(e),0,e)}function f(e){return new Uint16Array(h(2*e),0,e)}function g(e){return new Uint32Array(h(4*e),0,e)}function y(e){return new Int8Array(h(e),0,e)}function _(e){return new Int16Array(h(2*e),0,e)}function v(e){return new Int32Array(h(4*e),0,e)}function b(e){return new Float32Array(h(4*e),0,e)}function w(e){return new Float64Array(h(8*e),0,e)}function x(e){return a?new Uint8ClampedArray(h(e),0,e):m(e)}function S(e){return s?new BigUint64Array(h(8*e),0,e):null}function T(e){return l?new BigInt64Array(h(8*e),0,e):null}function E(e){return new DataView(h(e),0,e)}function I(e){e=r.nextPow2(e);var t=r.log2(e),n=p[t];return n.length>0?n.pop():new o(e)}t.free=function(e){if(o.isBuffer(e))p[r.log2(e.length)].push(e);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(e)&&(e=e.buffer),!e)return;var t=e.length||e.byteLength,n=0|r.log2(t);u[n].push(e)}},t.freeUint8=t.freeUint16=t.freeUint32=t.freeBigUint64=t.freeInt8=t.freeInt16=t.freeInt32=t.freeBigInt64=t.freeFloat32=t.freeFloat=t.freeFloat64=t.freeDouble=t.freeUint8Clamped=t.freeDataView=function(e){d(e.buffer)},t.freeArrayBuffer=d,t.freeBuffer=function(e){p[r.log2(e.length)].push(e)},t.malloc=function(e,t){if(void 0===t||"arraybuffer"===t)return h(e);switch(t){case"uint8":return m(e);case"uint16":return f(e);case"uint32":return g(e);case"int8":return y(e);case"int16":return _(e);case"int32":return v(e);case"float":case"float32":return b(e);case"double":case"float64":return w(e);case"uint8_clamped":return x(e);case"bigint64":return T(e);case"biguint64":return S(e);case"buffer":return I(e);case"data":case"dataview":return E(e);default:return null}return null},t.mallocArrayBuffer=h,t.mallocUint8=m,t.mallocUint16=f,t.mallocUint32=g,t.mallocInt8=y,t.mallocInt16=_,t.mallocInt32=v,t.mallocFloat32=t.mallocFloat=b,t.mallocFloat64=t.mallocDouble=w,t.mallocUint8Clamped=x,t.mallocBigUint64=S,t.mallocBigInt64=T,t.mallocDataView=E,t.mallocBuffer=I,t.clearCache=function(){for(var e=0;e<32;++e)c.UINT8[e].length=0,c.UINT16[e].length=0,c.UINT32[e].length=0,c.INT8[e].length=0,c.INT16[e].length=0,c.INT32[e].length=0,c.FLOAT[e].length=0,c.DOUBLE[e].length=0,c.BIGUINT64[e].length=0,c.BIGINT64[e].length=0,c.UINT8C[e].length=0,u[e].length=0,p[e].length=0}},7887:e=>{"use strict";e.exports=function(e,t,n){return 0===e.length?e:t?(n||e.sort(t),function(e,t){for(var n=1,r=e.length,i=e[0],o=e[0],a=1;a<r;++a)if(o=i,t(i=e[a],o)){if(a===n){n++;continue}e[n++]=i}return e.length=n,e}(e,t)):(n||e.sort(),function(e){for(var t=1,n=e.length,r=e[0],i=e[0],o=1;o<n;++o,i=r)if(i=r,(r=e[o])!==i){if(o===t){t++;continue}e[t++]=r}return e.length=t,e}(e))}},1135:e=>{e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},9032:(e,t,n)=>{"use strict";var r=n(7244),i=n(8184),o=n(5767),a=n(5680);function s(e){return e.call.bind(e)}var l="undefined"!=typeof BigInt,c="undefined"!=typeof Symbol,u=s(Object.prototype.toString),p=s(Number.prototype.valueOf),d=s(String.prototype.valueOf),h=s(Boolean.prototype.valueOf);if(l)var m=s(BigInt.prototype.valueOf);if(c)var f=s(Symbol.prototype.valueOf);function g(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch(e){return!1}}function y(e){return"[object Map]"===u(e)}function _(e){return"[object Set]"===u(e)}function v(e){return"[object WeakMap]"===u(e)}function b(e){return"[object WeakSet]"===u(e)}function w(e){return"[object ArrayBuffer]"===u(e)}function x(e){return"undefined"!=typeof ArrayBuffer&&(w.working?w(e):e instanceof ArrayBuffer)}function S(e){return"[object DataView]"===u(e)}function T(e){return"undefined"!=typeof DataView&&(S.working?S(e):e instanceof DataView)}t.isArgumentsObject=r,t.isGeneratorFunction=i,t.isTypedArray=a,t.isPromise=function(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch},t.isArrayBufferView=function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):a(e)||T(e)},t.isUint8Array=function(e){return"Uint8Array"===o(e)},t.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===o(e)},t.isUint16Array=function(e){return"Uint16Array"===o(e)},t.isUint32Array=function(e){return"Uint32Array"===o(e)},t.isInt8Array=function(e){return"Int8Array"===o(e)},t.isInt16Array=function(e){return"Int16Array"===o(e)},t.isInt32Array=function(e){return"Int32Array"===o(e)},t.isFloat32Array=function(e){return"Float32Array"===o(e)},t.isFloat64Array=function(e){return"Float64Array"===o(e)},t.isBigInt64Array=function(e){return"BigInt64Array"===o(e)},t.isBigUint64Array=function(e){return"BigUint64Array"===o(e)},y.working="undefined"!=typeof Map&&y(new Map),t.isMap=function(e){return"undefined"!=typeof Map&&(y.working?y(e):e instanceof Map)},_.working="undefined"!=typeof Set&&_(new Set),t.isSet=function(e){return"undefined"!=typeof Set&&(_.working?_(e):e instanceof Set)},v.working="undefined"!=typeof WeakMap&&v(new WeakMap),t.isWeakMap=function(e){return"undefined"!=typeof WeakMap&&(v.working?v(e):e instanceof WeakMap)},b.working="undefined"!=typeof WeakSet&&b(new WeakSet),t.isWeakSet=function(e){return b(e)},w.working="undefined"!=typeof ArrayBuffer&&w(new ArrayBuffer),t.isArrayBuffer=x,S.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&S(new DataView(new ArrayBuffer(1),0,1)),t.isDataView=T;var E="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function I(e){return"[object SharedArrayBuffer]"===u(e)}function k(e){return void 0!==E&&(void 0===I.working&&(I.working=I(new E)),I.working?I(e):e instanceof E)}function j(e){return g(e,p)}function A(e){return g(e,d)}function C(e){return g(e,h)}function O(e){return l&&g(e,m)}function M(e){return c&&g(e,f)}t.isSharedArrayBuffer=k,t.isAsyncFunction=function(e){return"[object AsyncFunction]"===u(e)},t.isMapIterator=function(e){return"[object Map Iterator]"===u(e)},t.isSetIterator=function(e){return"[object Set Iterator]"===u(e)},t.isGeneratorObject=function(e){return"[object Generator]"===u(e)},t.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===u(e)},t.isNumberObject=j,t.isStringObject=A,t.isBooleanObject=C,t.isBigIntObject=O,t.isSymbolObject=M,t.isBoxedPrimitive=function(e){return j(e)||A(e)||C(e)||O(e)||M(e)},t.isAnyArrayBuffer=function(e){return"undefined"!=typeof Uint8Array&&(x(e)||k(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(e){Object.defineProperty(t,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})}))},537:(e,t,n)=>{var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},i=/%[sdj%]/g;t.format=function(e){if(!_(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(l(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,o=r.length,a=String(e).replace(i,(function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),s=r[n];n<o;s=r[++n])g(s)||!w(s)?a+=" "+s:a+=" "+l(s);return a},t.deprecate=function(e,n){if("undefined"!=typeof process&&!0===process.noDeprecation)return e;if("undefined"==typeof process)return function(){return t.deprecate(e,n).apply(this,arguments)};var r=!1;return function(){if(!r){if(process.throwDeprecation)throw new Error(n);process.traceDeprecation?console.trace(n):console.error(n),r=!0}return e.apply(this,arguments)}};var o={},a=/^$/;if({package_version:"1.0.23"}.NODE_DEBUG){var s={package_version:"1.0.23"}.NODE_DEBUG;s=s.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),a=new RegExp("^"+s+"$","i")}function l(e,n){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),f(n)?r.showHidden=n:n&&t._extend(r,n),v(r.showHidden)&&(r.showHidden=!1),v(r.depth)&&(r.depth=2),v(r.colors)&&(r.colors=!1),v(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=c),p(r,e,r.depth)}function c(e,t){var n=l.styles[t];return n?"["+l.colors[n][0]+"m"+e+"["+l.colors[n][1]+"m":e}function u(e,t){return e}function p(e,n,r){if(e.customInspect&&n&&T(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return _(i)||(i=p(e,i,r)),i}var o=function(e,t){if(v(t))return e.stylize("undefined","undefined");if(_(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return y(t)?e.stylize(""+t,"number"):f(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}(e,n);if(o)return o;var a=Object.keys(n),s=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),S(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return d(n);if(0===a.length){if(T(n)){var l=n.name?": "+n.name:"";return e.stylize("[Function"+l+"]","special")}if(b(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(x(n))return e.stylize(Date.prototype.toString.call(n),"date");if(S(n))return d(n)}var c,u="",w=!1,E=["{","}"];return m(n)&&(w=!0,E=["[","]"]),T(n)&&(u=" [Function"+(n.name?": "+n.name:"")+"]"),b(n)&&(u=" "+RegExp.prototype.toString.call(n)),x(n)&&(u=" "+Date.prototype.toUTCString.call(n)),S(n)&&(u=" "+d(n)),0!==a.length||w&&0!=n.length?r<0?b(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),c=w?function(e,t,n,r,i){for(var o=[],a=0,s=t.length;a<s;++a)j(t,String(a))?o.push(h(e,t,n,r,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(h(e,t,n,r,i,!0))})),o}(e,n,r,s,a):a.map((function(t){return h(e,n,r,s,t,w)})),e.seen.pop(),function(e,t,n){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(c,u,E)):E[0]+u+E[1]}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,r,i,o){var a,s,l;if((l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),j(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(l.value)<0?(s=g(n)?p(e,l.value,null):p(e,l.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(e){return"  "+e})).join("\n").slice(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),v(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.slice(1,-1),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function m(e){return Array.isArray(e)}function f(e){return"boolean"==typeof e}function g(e){return null===e}function y(e){return"number"==typeof e}function _(e){return"string"==typeof e}function v(e){return void 0===e}function b(e){return w(e)&&"[object RegExp]"===E(e)}function w(e){return"object"==typeof e&&null!==e}function x(e){return w(e)&&"[object Date]"===E(e)}function S(e){return w(e)&&("[object Error]"===E(e)||e instanceof Error)}function T(e){return"function"==typeof e}function E(e){return Object.prototype.toString.call(e)}function I(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(e=e.toUpperCase(),!o[e])if(a.test(e)){var n=process.pid;o[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else o[e]=function(){};return o[e]},t.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.types=n(9032),t.isArray=m,t.isBoolean=f,t.isNull=g,t.isNullOrUndefined=function(e){return null==e},t.isNumber=y,t.isString=_,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=v,t.isRegExp=b,t.types.isRegExp=b,t.isObject=w,t.isDate=x,t.types.isDate=x,t.isError=S,t.types.isNativeError=S,t.isFunction=T,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(1135);var k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function j(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){var e,n;console.log("%s - %s",(n=[I((e=new Date).getHours()),I(e.getMinutes()),I(e.getSeconds())].join(":"),[e.getDate(),k[e.getMonth()],n].join(" ")),t.format.apply(t,arguments))},t.inherits=n(6698),t._extend=function(e,t){if(!t||!w(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var A="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function C(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(A&&e[A]){var t;if("function"!=typeof(t=e[A]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,A,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,i)}catch(e){n(e)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),A&&Object.defineProperty(t,A,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=A,t.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var r=t.pop();if("function"!=typeof r)throw new TypeError("The last argument must be of type Function");var i=this,o=function(){return r.apply(i,arguments)};e.apply(this,t).then((function(e){process.nextTick(o.bind(null,null,e))}),(function(e){process.nextTick(C.bind(null,e,o))}))}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,r(e)),t}},5767:(e,t,n)=>{"use strict";var r=n(2682),i=n(9209),o=n(487),a=n(8075),s=n(5795),l=a("Object.prototype.toString"),c=n(9092)(),u="undefined"==typeof globalThis?n.g:globalThis,p=i(),d=a("String.prototype.slice"),h=Object.getPrototypeOf,m=a("Array.prototype.indexOf",!0)||function(e,t){for(var n=0;n<e.length;n+=1)if(e[n]===t)return n;return-1},f={__proto__:null};r(p,c&&s&&h?function(e){var t=new u[e];if(Symbol.toStringTag in t){var n=h(t),r=s(n,Symbol.toStringTag);if(!r){var i=h(n);r=s(i,Symbol.toStringTag)}f["$"+e]=o(r.get)}}:function(e){var t=new u[e],n=t.slice||t.set;n&&(f["$"+e]=o(n))}),e.exports=function(e){if(!e||"object"!=typeof e)return!1;if(!c){var t=d(l(e),8,-1);return m(p,t)>-1?t:"Object"===t&&function(e){var t=!1;return r(f,(function(n,r){if(!t)try{n(e),t=d(r,1)}catch(e){}})),t}(e)}return s?function(e){var t=!1;return r(f,(function(n,r){if(!t)try{"$"+n(e)===r&&(t=d(r,1))}catch(e){}})),t}(e):null}},5817:()=>{},8590:()=>{},1234:()=>{},9209:(e,t,n)=>{"use strict";var r=n(6578),i="undefined"==typeof globalThis?n.g:globalThis;e.exports=function(){for(var e=[],t=0;t<r.length;t++)"function"==typeof i[r[t]]&&(e[e.length]=r[t]);return e}}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.amdD=function(){throw new Error("define cannot be used indirect")},r.amdO={},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),r.nc=void 0,(()=>{"use strict";var e={};r.r(e),r.d(e,{ConfigError:()=>X,NotImplementedError:()=>Y,ValueError:()=>K});var t={};r.r(t),r.d(t,{NdArray:()=>ee,abs:()=>ze,add:()=>ue,arange:()=>Ae,arccos:()=>qe,arcsin:()=>We,arctan:()=>Xe,array:()=>lt,broadcast:()=>ce,clip:()=>Fe,concatenate:()=>Je,config:()=>B,convolve:()=>Ze,cos:()=>$e,diag:()=>rt,divide:()=>de,dot:()=>Ye,dtypes:()=>U,empty:()=>Me,equal:()=>me,errors:()=>e,exp:()=>ye,fft:()=>tt,fftconvolve:()=>et,flatten:()=>fe,flip:()=>at,float32:()=>gt,float64:()=>yt,identity:()=>it,ifft:()=>nt,int16:()=>dt,int32:()=>mt,int8:()=>ut,leakyRelu:()=>Ue,log:()=>_e,max:()=>Ee,mean:()=>xe,min:()=>Te,mod:()=>Ie,multiply:()=>pe,ndarray:()=>G(),negative:()=>je,ones:()=>Oe,power:()=>be,random:()=>Ne,remainder:()=>ct,reshape:()=>ge,rot90:()=>st,round:()=>Qe,sigmoid:()=>De,sin:()=>He,softmax:()=>Re,sqrt:()=>ve,stack:()=>ot,std:()=>Se,subtract:()=>he,sum:()=>we,tan:()=>Ke,tanh:()=>Ge,transpose:()=>ke,uint16:()=>ht,uint32:()=>ft,uint8:()=>pt,uint8Clamped:()=>_t,zeros:()=>Ce});var n={};r.r(n),r.d(n,{FirebaseError:()=>Pt,SDK_VERSION:()=>mr,_DEFAULT_ENTRY_NAME:()=>Qn,_addComponent:()=>rr,_addOrOverwriteComponent:()=>ir,_apps:()=>er,_clearComponents:()=>ur,_components:()=>nr,_getProvider:()=>ar,_isFirebaseApp:()=>lr,_isFirebaseServerApp:()=>cr,_registerComponent:()=>or,_removeServiceInstance:()=>sr,_serverApps:()=>tr,deleteApp:()=>vr,getApp:()=>yr,getApps:()=>_r,initializeApp:()=>fr,initializeServerApp:()=>gr,onLog:()=>wr,registerVersion:()=>br,setLogLevel:()=>xr});var i={};r.r(i),r.d(i,{CompositeArrayBuffer:()=>Yw,browserFiles:()=>lS,browserHTTPRequest:()=>yS,concatenateArrayBuffers:()=>dx,copyModel:()=>Jx,decodeWeights:()=>rx,decodeWeightsStream:()=>lx,encodeWeights:()=>nx,fromMemory:()=>wS,fromMemorySync:()=>xS,getLoadHandlers:()=>Sx,getModelArtifactsForJSON:()=>gx,getModelArtifactsForJSONSync:()=>fx,getModelArtifactsInfoForJSON:()=>yx,getSaveHandlers:()=>xx,getWeightSpecs:()=>_x,http:()=>gS,isHTTPScheme:()=>mS,listModels:()=>Xx,loadWeights:()=>pS,moveModel:()=>Qx,registerLoadRouter:()=>wx,registerSaveRouter:()=>bx,removeModel:()=>Yx,weightsLoaderFactory:()=>dS,withSaveHandler:()=>SS,withSaveHandlerSync:()=>TS});var o={};r.r(o),r.d(o,{assertParamsValid:()=>CS,computeFlatOffset:()=>zS,computeOutShape:()=>MS,getNormalizedAxes:()=>DS,isSliceContinous:()=>GS,maskToAxes:()=>OS,parseSliceParams:()=>$S,sliceInfo:()=>qS,startForAxis:()=>US,startIndicesWithElidedDims:()=>LS,stopForAxis:()=>VS,stopIndicesWithElidedDims:()=>FS,stridesForAxis:()=>BS,stridesWithElidedDims:()=>NS});var a={};r.r(a),r.d(a,{collectGatherOpShapeInfo:()=>mI,computeOutShape:()=>hI,segOpComputeOptimalWindowSize:()=>dI});var s={};r.r(s),r.d(s,{ERF_A1:()=>CE,ERF_A2:()=>OE,ERF_A3:()=>ME,ERF_A4:()=>NE,ERF_A5:()=>RE,ERF_P:()=>AE,PARALLELIZE_THRESHOLD:()=>fE,RowPartitionType:()=>uE,SELU_SCALE:()=>jE,SELU_SCALEALPHA:()=>kE,applyActivation:()=>lE,assertAndGetBroadcastShape:()=>kS,assertAxesAreInnerMostDims:()=>TT,assertParamsConsistent:()=>LT,assignToTypedArray:()=>UE,axesAreInnerMostDims:()=>bT,calculateShapes:()=>IE,checkEinsumDimSizes:()=>XE,checkPadOnDimRoundingMode:()=>ZT,combineLocations:()=>wT,combineRaggedTensorToTensorShapes:()=>pE,complexWithEvenIndex:()=>LE,complexWithOddIndex:()=>FE,computeConv2DInfo:()=>GT,computeConv3DInfo:()=>zT,computeDefaultPad:()=>$T,computeDilation2DInfo:()=>BT,computeOptimalWindowSize:()=>gE,computeOutAndReduceShapes:()=>xT,computeOutShape:()=>FT,computePool2DInfo:()=>UT,computePool3DInfo:()=>VT,convertConv2DDataFormat:()=>QT,decodeEinsumEquation:()=>WE,eitherStridesOrDilationsAreOne:()=>YT,expandShapeToKeepDim:()=>ST,exponent:()=>GE,exponents:()=>VE,fromStringArrayToUint8:()=>gI,fromUint8ToStringArray:()=>fI,getAxesPermutation:()=>ET,getBroadcastDims:()=>ES,getComplexWithIndex:()=>BE,getEinsumComputePath:()=>YE,getEinsumPermutation:()=>KE,getFusedBiasGradient:()=>sE,getFusedDyActivation:()=>aE,getImageCenter:()=>yE,getInnerMostAxes:()=>kT,getPermuted:()=>vE,getRaggedRank:()=>hE,getReductionAxes:()=>IS,getReshaped:()=>_E,getReshapedPermuted:()=>bE,getRowPartitionTypesHelper:()=>dE,getSliceBeginCoords:()=>wE,getSliceSize:()=>xE,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>eI,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>tI,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>nI,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>oI,getSparseReshapeInputOutputMismatchErrorMessage:()=>sI,getSparseReshapeInputOutputMultipleErrorMessage:()=>aI,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>rI,getSparseReshapeNegativeOutputDimErrorMessage:()=>iI,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>pI,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>lI,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>cI,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>uI,getUndoAxesPermutation:()=>IT,isIdentityPermutation:()=>JE,log:()=>Bv,mergeRealAndImagArrays:()=>PE,prepareAndValidate:()=>SE,prepareSplitSize:()=>ZE,segment_util:()=>a,shouldFuse:()=>cE,slice_util:()=>o,splitRealAndImagArrays:()=>DE,stridesOrDilationsArePositive:()=>JT,tupleValuesAreOne:()=>XT,upcastType:()=>Ew,validateDefaultValueShape:()=>mE,validateInput:()=>EE,validateUpdateShape:()=>TE,warn:()=>Fv});var l={};r.r(l),r.d(l,{json:()=>CI});var c={};r.r(c),r.d(c,{json:()=>OI});var u={};r.r(u),r.d(u,{json:()=>MI});var p={};r.r(p),r.d(p,{json:()=>NI});var d={};r.r(d),r.d(d,{json:()=>RI});var h={};r.r(h),r.d(h,{json:()=>PI});var m={};r.r(m),r.d(m,{json:()=>DI});var f={};r.r(f),r.d(f,{json:()=>LI});var g={};r.r(g),r.d(g,{json:()=>FI});var y={};r.r(y),r.d(y,{json:()=>BI});var _={};r.r(_),r.d(_,{json:()=>UI});var v={};r.r(v),r.d(v,{json:()=>VI});var b={};r.r(b),r.d(b,{json:()=>GI});var w={};r.r(w),r.d(w,{json:()=>zI});var x={};r.r(x),r.d(x,{json:()=>$I});var S={};r.r(S),r.d(S,{json:()=>qI});var T={};r.r(T),r.d(T,{json:()=>HI});var E={};r.r(E),r.d(E,{json:()=>WI});var I={};r.r(I),r.d(I,{json:()=>KI});var k={};r.r(k),r.d(k,{add:()=>pT,addN:()=>hk,broadcastTo:()=>KS,cast:()=>nS,concat:()=>XS,div:()=>hT,einsum:()=>lT,equal:()=>mk,exp:()=>RT,expandDims:()=>cT,fused:()=>xk,gather:()=>vk,gatherND:()=>bk,greaterEqual:()=>gT,less:()=>yT,logicalAnd:()=>_T,matMul:()=>OT,max:()=>jT,maximum:()=>fk,minimum:()=>vT,mul:()=>aT,neg:()=>rT,reciprocal:()=>_k,reshape:()=>WS,rsqrt:()=>yk,scalar:()=>JS,slice:()=>QS,square:()=>AT,squeeze:()=>CT,stack:()=>ZS,stridedSlice:()=>dk,sub:()=>mT,sum:()=>uT,tanh:()=>wk,tensor1d:()=>sT,tensorScatterUpdate:()=>gk,transpose:()=>oT,where:()=>fT});var j={};r.r(j),r.d(j,{mx:()=>Ej,XI:()=>aO,Nk:()=>sO,f6:()=>lO,ct:()=>aj,YG:()=>cO,hH:()=>cj,z3:()=>Uj,sG:()=>jA,uM:()=>uO,vS:()=>pO,qB:()=>UA,GG:()=>FA,lg:()=>zj,rq:()=>dO,cu:()=>hO,WR:()=>Mj,GE:()=>mO,px:()=>fO,jC:()=>EA,He:()=>nA,hE:()=>Zj,BF:()=>gA,Dk:()=>RA,cl:()=>gO,_B:()=>yO,ub:()=>vO,_f:()=>wO,Ku:()=>IO,qy:()=>kO,Zy:()=>wA,bu:()=>sA,zv:()=>vj,dH:()=>oO,HS:()=>Pj,yH:()=>jO,l3:()=>AO,z9:()=>CO,x6:()=>OO,_m:()=>MO,eW:()=>Fj,GK:()=>RO,SP:()=>DO,yr:()=>LO,dl:()=>Xj,Dw:()=>oA,xT:()=>UO,_X:()=>Xk,wz:()=>VO});var A=r(7953);function C(e){var t=["position","velocity","vertices","collisionPoint","aRelativePos","bRelativePos","globalPosition","accImpulse","relativePosition"],n={};for(var r in e)e.hasOwnProperty(r)&&(t.includes(r)?n[r]=e[r].clone():n[r]=e[r]);return n}function O(e){return{polygon:e.polygon.map(C),circle:e.circle.map(C),joint:e.joint.map(C),thruster:e.thruster.map(C),collisionMatrix:e.collisionMatrix.clone(),accRRManifolds:e.accRRManifolds.map(C),accCRManifolds:e.accCRManifolds.map(C),accCCManifolds:e.accCCManifolds.map(C),gravity:e.gravity.clone(),terminal:e.terminal}}function M(e,t){return t<e.polygon.length?e.polygon[t]:e.circle[t-e.polygon.length]}var N=r(1713),R=r.n(N),P=r(9231),D=r.n(P),L=r(6949),F=r.n(L);const B={printThreshold:7,nFloatingValues:5},U={int8:Int8Array,int16:Int16Array,int32:Int32Array,uint8:Uint8Array,uint16:Uint16Array,uint32:Uint32Array,float32:Float32Array,float64:Float64Array,uint8_clamped:Uint8ClampedArray,array:Array};var V=r(8655),G=r.n(V),z=r(431),$=r.n(z),q=r(5139),H=r(537),W=r.n(H);class K extends Error{}class X extends Error{}class Y extends Error{}function J(e){return"number"==typeof e}function Q(e){return"function"==typeof e}const Z={isNumber:J,isString:function(e){return"string"==typeof e},isFunction:Q,flatten:function e(t,n,r){r=r||[];let i=-1;const o=t.length;for(;++i<o;){let o=t[i];J(o)?r[r.length]=o:n?e(o,n,r):r.push(o)}return r},shapeSize:function(e){let t=1;for(let n=0;n<e.length;n++)t*=e[n];return t},getType:function(e){return Q(e)?e:U[e]||Array},getShape:function(e){let t,n;return"object"==typeof e?(t=e[0],"object"==typeof t?(n=t[0],"object"==typeof n?function(e){const t=[];for(;"object"==typeof e;)t.push(e.length),e=e[0];return t}(e):[e.length,t.length]):[e.length]):[]}};class ee{constructor(...e){if(1===e.length)this.selection=e[0];else{if(0===e.length)throw new K("Required argument 'data' not found");this.selection=G().apply(null,e)}}get size(){return this.selection.size}get shape(){return this.selection.shape}get ndim(){return this.selection.shape.length}get dtype(){return this.selection.dtype}set dtype(e){const t=Z.getType(e);t!==Z.getType(this.dtype)&&(this.selection=G()(new t(this.selection.data),this.selection.shape,this.selection.stride,this.selection.offset))}get T(){return this.transpose()}get(...e){const t=e.length;for(let n=0;n<t;n++)e[n]<0&&(e[n]+=this.shape[n]);return this.selection.get.apply(this.selection,e)}set(...e){return this.selection.set.apply(this.selection,e)}slice(...e){const t=this.ndim,n=new Array(t),r=new Array(t),i=new Array(t),o=this.shape;for(let a=0;a<t;a++){let t=e[a];if(void 0===t)break;if(null!==t)if(Z.isNumber(t))r[a]=t<0?t+o[a]:t,n[a]=null,i[a]=1;else if(4===t.length&&null===t[1]&&null===t[2]){const e=t[0]<0?t[0]+o[a]:t[0];r[a]=e,n[a]=null,i[a]=t[3]||1}else{const e=t[0]<0?t[0]+o[a]:t[0],s=t[1]<0?t[1]+o[a]:t[1];r[a]=s?e:0,n[a]=s?s-e:e,i[a]=t[2]||1}}const a=this.selection.lo.apply(this.selection,r),s=a.hi.apply(a,n),l=s.step.apply(s,i);return new ee(l)}pick(...e){return new ee(this.selection.pick.apply(this.selection,arguments))}lo(...e){return new ee(this.selection.lo.apply(this.selection,e))}hi(...e){return new ee(this.selection.hi.apply(this.selection,e))}step(...e){return new ee(this.selection.step.apply(this.selection,e))}flatten(){if(1===this.ndim)return new ee(this.selection);const e=Z.getType(this.dtype);let t=Z.flatten(this.tolist(),!0);return t instanceof e||(t=new e(t)),new ee(t,[this.size])}reshape(...e){if(0===arguments.length)throw new K("function takes at least one argument (0 given)");let t;if(1===arguments.length&&Z.isNumber(arguments[0])&&-1===arguments[0]&&(t=[Z.shapeSize(this.shape)]),1===arguments.length&&(t=Z.isNumber(arguments[0])?[arguments[0]]:arguments[0]),arguments.length>1&&(t=[].slice.call(arguments)),t.filter((function(e){return-1===e})).length>1)throw new K("can only specify one unknown dimension");const n=Z.shapeSize(t);if(t=t.map(function(e){return-1===e?-1*this.size/n:e}.bind(this)),this.size!==Z.shapeSize(t))throw new K("total size of new array must be unchanged");const r=this.selection.shape,i=this.selection.offset,o=this.selection.stride,a=r.length,s=t.length;let l,c,u,p;if(a===s){let e=!0;for(u=0;u<s;++u)if(r[u]!==t[u]){e=!1;break}if(e)return new ee(this.selection.data,r,o,i)}else if(1===a){for(l=new Array(s),u=s-1,p=1;u>=0;--u)l[u]=p,p*=t[u];for(c=i,u=0;u<s;++u)l[u]<0&&(c-=(t[u]-1)*l[u]);return new ee(this.selection.data,t,l,c)}const d=Math.min(a,s);let h=!0;for(u=0;u<d;u++)if(r[u]!==t[u]){h=!1;break}if(h){for(l=new Array(s),u=0;u<s;u++)l[u]=o[u]||1;return c=i,new ee(this.selection.data,t,l,c)}return this.flatten().reshape(t)}transpose(...e){let t;if(0===e.length){const e=this.ndim;t=new Array(e);for(let n=0;n<e;n++)t[n]=e-n-1}else t=e.length>1?e:e[0];return new ee(this.selection.transpose.apply(this.selection,t))}dot(e){e=e instanceof ee?e:ie(e,this.dtype);const t=this.shape,n=e.shape;if(2===t.length&&2===n.length&&t[1]===n[0]){const r=Z.getType(this.dtype),i=new ee(new r(t[0]*n[1]),[t[0],n[1]]);return $()(i.selection,this.selection,e.selection),i}if(1===t.length&&2===n.length&&t[0]===n[0])return this.reshape([t[0],1]).T.dot(e).reshape(n[1]);if(2===t.length&&1===n.length&&t[1]===n[0])return this.dot(e.reshape([n[0],1])).reshape(t[0]);if(1===t.length&&1===n.length&&t[0]===n[0])return this.reshape([t[0],1]).T.dot(e.reshape([n[0],1])).reshape([1]);throw new K("cannot compute the matrix product of given arrays")}assign(e,t=!0){1===arguments.length&&(t=!0);const n=t?this.clone():this;return Z.isNumber(e)?(D().assigns(n.selection,e),n):(e=ie(e,this.dtype),D().assign(n.selection,e.selection),n)}add(e,t=!0){1===arguments.length&&(t=!0);const n=t?this.clone():this;return Z.isNumber(e)?(D().addseq(n.selection,e),n):(e=ie(e,this.dtype),D().addeq(n.selection,e.selection),n)}subtract(e,t=!0){1===arguments.length&&(t=!0);const n=t?this.clone():this;return Z.isNumber(e)?(D().subseq(n.selection,e),n):(e=ie(e,this.dtype),D().subeq(n.selection,e.selection),n)}multiply(e,t=!0){1===arguments.length&&(t=!0);const n=t?this.clone():this;return Z.isNumber(e)?(D().mulseq(n.selection,e),n):(e=ie(e,this.dtype),D().muleq(n.selection,e.selection),n)}divide(e,t=!0){1===arguments.length&&(t=!0);const n=t?this.clone():this;return Z.isNumber(e)?(D().divseq(n.selection,e),n):(e=ie(e,this.dtype),D().diveq(n.selection,e.selection),n)}pow(e,t=!0){1===arguments.length&&(t=!0);const n=t?this.clone():this;return Z.isNumber(e)?(D().powseq(n.selection,e),n):(e=ie(e,this.dtype),D().poweq(n.selection,e.selection),n)}exp(e=!0){0===arguments.length&&(e=!0);const t=e?this.clone():this;return D().expeq(t.selection),t}log(e=!0){0===arguments.length&&(e=!0);const t=e?this.clone():this;return D().logeq(t.selection),t}sqrt(e=!0){0===arguments.length&&(e=!0);const t=e?this.clone():this;return D().sqrteq(t.selection),t}max(){return 0===this.selection.size?null:D().sup(this.selection)}min(){return 0===this.selection.size?null:D().inf(this.selection)}sum(){return D().sum(this.selection)}std(e){(null==e?void 0:e.ddof)||(e={ddof:0});const t=this.clone();D().powseq(t.selection,2);const n=this.mean(),r=Z.shapeSize(this.shape),i=D().sum(t.selection)/(r-e.ddof)-n*n*r/(r-e.ddof);return i>0?Math.sqrt(Math.abs(i)):0}mean(){return D().sum(this.selection)/Z.shapeSize(this.shape)}mod(e,t=!0){1===arguments.length&&(t=!0);const n=t?this.clone():this;return Z.isNumber(e)?(D().modseq(n.selection,e),n):(e=ie(e,this.dtype),D().modeq(n.selection,e.selection),n)}tolist(){return se(this.selection)}valueOf(){return this.tolist()}[W().inspect.custom](){return this.toString()}toString(){const e=le(this.max()).length,t=/\[\s+\[/g;let n=JSON.stringify(this.tolist(),(function t(n,r){if(Z.isString(r))return r;if(Z.isNumber(r)){const t=le(r);return new Array(Math.max(0,e-t.length+2)).join(" ")+t}let i;n=n||0;const o=B.printThreshold,a=o/2|0;return i=r.length>o?[].concat(r.slice(0,a),[" ..."],r.slice(r.length-a)):r,new Array(n+1).join(" ")+"["+i.map((function(e,r){return t(0===r&&0===n?1:n+1,e)})).join(",")+"]"})).replace(/\]\,(\s*)\[/g,"],\n$1      [").replace(t,"[[").replace(t,"[[").replace(/\]\,(\s+)...\,(\s+)\[/g,"],\n$2       ...\n$2      [").slice(2,-1);return"array"===this.dtype?"array(["+n+")":"array(["+n+", dtype="+this.dtype+")"}toJSON(){return JSON.stringify(this.tolist())}clone(){const e=this.selection;return void 0===e.data.slice?new ee(G()([].slice.apply(e.data),e.shape,e.stride,e.offset)):new ee(G()(e.data.slice(),e.shape,e.stride,e.offset))}equal(e){if(e=ie(e),this.size!==e.size||this.ndim!==e.ndim)return!1;const t=this.ndim;for(let n=0;n<t;n++)if(this.shape[n]!==e.shape[n])return!1;return D().equals(this.selection,e.selection)}round(e=!0){0===arguments.length&&(e=!0);const t=e?this.clone():this;return D().roundeq(t.selection),t}negative(){const e=this.clone();return D().neg(e.selection,this.selection),e}diag(){const e=this.ndim;if(1===e){const e=Z.getType(this.dtype),t=[this.shape[0],this.shape[0]],n=new ee(new e(Z.shapeSize(t)),t);"array"===n.dtype&&D().assigns(n.selection,0);for(let e=0;e<this.shape[0];e++)n.set(e,e,this.get(e));return n}const t=this.shape,n=this.selection.stride;let r=1<<30,i=0;for(let o=0;o<e;++o)r=0|Math.min(r,t[o]),i+=n[o];return new ee(this.selection.data,[r],[i],this.selection.offset)}iteraxis(e,t){const n=this.shape;if(-1===e&&(e=n.length-1),e<0||e>n.length-1)throw new K("invalid axis");for(let r=0;r<n[e];r++){const n=new Array(e+1);for(let t=0;t<e+1;t++)n[t]=t===e?r:null;t(ie(se(this.selection.pick.apply(this.selection,n)),this.dtype),r)}}convolve(e){e=ee.new(e);const t=this.ndim;if(t!==e.ndim)throw new K("arrays must have the same dimensions");const n=new Array(t),r=new Array(t),i=this.selection,o=this.shape,a=e.selection,s=e.shape;for(let e=0;e<t;e++){const t=o[e]-s[e]+1;if(t<0)throw new K("filter cannot be greater than the array");n[e]=t,r[e]=-1}if(2===t&&3===s[0]&&3===s[1]){const e=new ee(new Float32Array(Z.shapeSize(o)),o);return ne(e.selection,i,a.get(0,0),a.get(0,1),a.get(0,2),a.get(1,0),a.get(1,1),a.get(1,2),a.get(2,0),a.get(2,1),a.get(2,2)),e.lo(1,1).hi(n[0],n[1])}if(3===t&&1===s[2]&&1===o[2]&&3===s[0]&&3===s[1]){const e=new ee(new Float32Array(Z.shapeSize(o)),o);return ne(e.selection.pick(null,null,0),i.pick(null,null,0),a.get(0,0,0),a.get(0,1,0),a.get(0,2,0),a.get(1,0,0),a.get(1,1,0),a.get(1,2,0),a.get(2,0,0),a.get(2,1,0),a.get(2,2,0)),e.lo(1,1).hi(n[0],n[1])}if(2===t&&5===s[0]&&5===s[1]){const e=new ee(new Float32Array(Z.shapeSize(o)),o);return re(e.selection,i,a.get(0,0),a.get(0,1),a.get(0,2),a.get(0,3),a.get(0,4),a.get(1,0),a.get(1,1),a.get(1,2),a.get(1,3),a.get(1,4),a.get(2,0),a.get(2,1),a.get(2,2),a.get(2,3),a.get(2,4),a.get(3,0),a.get(3,1),a.get(3,2),a.get(3,3),a.get(3,4),a.get(4,0),a.get(4,1),a.get(4,2),a.get(4,3),a.get(4,4)),e.lo(2,2).hi(n[0],n[1])}if(3===t&&1===s[2]&&1===o[2]&&5===s[0]&&5===s[1]){const e=new ee(new Float32Array(Z.shapeSize(o)),o);return re(e.selection,i,a.get(0,0,0),a.get(0,1,0),a.get(0,2,0),a.get(0,3,0),a.get(0,4,0),a.get(1,0,0),a.get(1,1,0),a.get(1,2,0),a.get(1,3,0),a.get(1,4,0),a.get(2,0,0),a.get(2,1,0),a.get(2,2,0),a.get(2,3,0),a.get(2,4,0),a.get(3,0,0),a.get(3,1,0),a.get(3,2,0),a.get(3,3,0),a.get(3,4,0),a.get(4,0,0),a.get(4,1,0),a.get(4,2,0),a.get(4,3,0),a.get(4,4,0)),e.lo(2,2).hi(n[0],n[1])}return this.fftconvolve(e)}fftconvolve(e){if(e=ee.new(e),this.ndim!==e.ndim)throw new K("arrays must have the same dimensions");const t=this.selection,n=e.selection,r=this.ndim;let i=1;const o=new Array(r),a=new Array(r),s=new Array(r);let l;for(l=r-1;l>=0;--l)a[l]=t.shape[l],o[l]=i,i*=a[l],s[l]=t.shape[l]-n.shape[l]+1;const c=Z.getType(t.dtype),u=new ee(new c(Z.shapeSize(s)),s),p=u.selection,d=q.mallocDouble(i),h=G()(d,a,o,0);D().assigns(h,0),D().assign(h.hi.apply(h,t.shape),t);const m=q.mallocDouble(i),f=G()(m,a,o,0);D().assigns(f,0),F()(1,h,f);const g=q.mallocDouble(i),y=G()(g,a,o,0);D().assigns(y,0),D().assign(y.hi.apply(y,n.shape),n);const _=q.mallocDouble(i),v=G()(_,a,o,0);D().assigns(v,0),F()(1,y,v),te(h,f,y,v),F()(-1,h,f);const b=new Array(r),w=new Array(r);let x,S=!1;for(l=0;l<r;++l)p.shape[l]>a[l]&&(S=!0),w[l]=n.shape[l]-1,b[l]=Math.min(p.shape[l],a[l]-w[l]);return S&&D().assign(p,0),x=h.lo.apply(h,w),x=x.hi.apply(x,b),D().assign(p.hi.apply(p,b),x),q.freeDouble(d),q.freeDouble(m),q.freeDouble(g),q.freeDouble(_),u}static new(e,t){return ie(e,t)}}const te=R()({args:["array","array","array","array"],body:function(e,t,n,r){const i=e,o=i*(n+r);e=o-r*(i+t),t=o+n*(t-i)}}),ne=R()({args:["array","array","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar",{offset:[-1,-1],array:1},{offset:[-1,0],array:1},{offset:[-1,1],array:1},{offset:[0,-1],array:1},{offset:[0,1],array:1},{offset:[1,-1],array:1},{offset:[1,0],array:1},{offset:[1,1],array:1}],body:function(e,t,n,r,i,o,a,s,l,c,u,p,d,h,m,f,g,y,_){}}),re=R()({args:["index","array","array","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar","scalar",{offset:[-2,-2],array:1},{offset:[-2,-1],array:1},{offset:[-2,0],array:1},{offset:[-2,1],array:1},{offset:[-2,2],array:1},{offset:[-1,-2],array:1},{offset:[-1,-1],array:1},{offset:[-1,0],array:1},{offset:[-1,1],array:1},{offset:[-1,2],array:1},{offset:[0,-2],array:1},{offset:[0,-1],array:1},{offset:[0,1],array:1},{offset:[0,2],array:1},{offset:[1,-2],array:1},{offset:[1,-1],array:1},{offset:[1,0],array:1},{offset:[1,1],array:1},{offset:[1,2],array:1},{offset:[2,-2],array:1},{offset:[2,-1],array:1},{offset:[2,0],array:1},{offset:[2,1],array:1},{offset:[2,2],array:1}],body:function(e,t,n,r,i,o,a,s,l,c,u,p,d,h,m,f,g,y,_,v,b,w,x,S,T,E,I,k,j,A,C,O,M,N,R,P,D,L,F,B,U,V,G,z,$,q,H,W,K,X,Y,J){e[0]<2||e[1]}});function ie(e,t){if(e instanceof ee)return e;let n;if(t&&(n=Z.getType(t)),Z.isNumber(e))return new ee(n&&n!==Array?new n([e]):[e],[1]);const r=Z.getShape(e);if(r.length>1&&(e=Z.flatten(e,!0)),n&&!(e instanceof n))if(e instanceof Array)e=new n(e);else{if(n!==Array)throw new K("Passed TypedArray and (Typed) dtype are not the same types, not support these conversions yet");e=Array.from(e)}return new ee(e,r)}function oe(e,t){const n=0|e[t=t||0];if(n<=0)return[];const r=new Array(n);let i;if(t===e.length-1)for(i=0;i<n;++i)r[i]=0;else for(i=0;i<n;++i)r[i]=oe(e,t+1);return r}const ae=R()({args:["array","scalar","index"],body:function(e,t,n){let r,i=t;for(r=0;r<n.length-1;++r)i=i[n[r]];i[n[n.length-1]]=e}});function se(e){const t=oe(e.shape,0);return ae(e,t),t}function le(e){return String(Number((e||0).toFixed(B.nFloatingValues)))}function ce(e,t){if(0===e.length||0===t.length)return;const n=e.slice().reverse(),r=t.slice().reverse(),i=Math.max(e.length,t.length),o=new Array(i);for(let e=0;e<i;e++)if(n[e]&&1!==n[e])if(r[e]&&1!==r[e]){if(n[e]!==r[e])return;o[e]=n[e]}else o[e]=n[e];else o[e]=r[e];return o.reverse()}function ue(e,t){return ee.new(e).add(t)}function pe(e,t){return ee.new(e).multiply(t)}function de(e,t){return ee.new(e).divide(t)}function he(e,t){return ee.new(e).subtract(t)}function me(e,t){return ee.new(e).equal(t)}function fe(e){return ee.new(e).flatten()}function ge(e,t){return ee.new(e).reshape(t)}function ye(e){return ee.new(e).exp()}function _e(e){return ee.new(e).log()}function ve(e){return ee.new(e).sqrt()}function be(e,t){return ee.new(e).pow(t)}function we(e){return ee.new(e).sum()}function xe(e){return ee.new(e).mean()}function Se(e,t){return ee.new(e).std(t)}function Te(e){return ee.new(e).min()}function Ee(e){return ee.new(e).max()}function Ie(e,t){return ee.new(e).mod(t)}function ke(e,t){return ee.new(e).transpose(t)}function je(e){return ee.new(e).negative()}function Ae(...e){if(1===arguments.length)return Ae(0,arguments[0],1,void 0);if(2===arguments.length&&Z.isNumber(arguments[1]))return Ae(arguments[0],arguments[1],1,void 0);if(2===arguments.length)return Ae(0,arguments[0],1,arguments[1]);if(3===arguments.length&&!Z.isNumber(arguments[2]))return Ae(arguments[0],arguments[1],1,arguments[2]);let t=arguments[0];const n=arguments[1],r=arguments[2],i=arguments[3],o=[];let a=0;for(;t<n;)o[a++]=t,t+=r;return ee.new(o,i)}function Ce(e,t){Z.isNumber(e)&&e>=0&&(e=[e]);const n=Z.shapeSize(e),r=Z.getType(t),i=new ee(new r(n),e);return"array"===i.dtype&&D().assigns(i.selection,0),i}function Oe(e,t){Z.isNumber(e)&&e>=0&&(e=[e]);const n=Z.shapeSize(e),r=Z.getType(t),i=new ee(new r(n),e);return D().assigns(i.selection,1),i}function Me(e,t){Z.isNumber(e)&&e>=0&&(e=[e]);const n=Z.shapeSize(e),r=Z.getType(t);return new ee(new r(n),e)}function Ne(...e){let t;if(0===arguments.length)return ee.new(Math.random());t=1===arguments.length?Z.isNumber(e[0])?[0|e[0]]:e[0]:[].slice.call(arguments);const n=Z.shapeSize(t),r=new ee(new Float64Array(n),t);return D().random(r.selection),r}function Re(e){const t=ee.new(e).exp(),n=t.sum();return D().divseq(t.selection,n),t}const Pe=R()({args:["array","scalar"],body:function(e,t){e=e<-30?0:e>30?1:1/(1+Math.exp(-1*t*e))}});function De(e,t=1){return e=ee.new(e).clone(),t=t||1,Pe(e.selection,t),e}const Le=R()({args:["array","scalar","scalar"],body:function(e,t,n){e=Math.min(Math.max(t,e),n)}});function Fe(e,t=0,n=1){1===arguments.length?(t=0,n=1):2===arguments.length&&(n=1);const r=e instanceof ee?e.clone():ee.new(e);return Le(r.selection,t,n),r}const Be=R()({args:["array","scalar"],body:function(e,t){e=Math.max(t*e,e)}});function Ue(e,t){t=t||.001;const n=e instanceof ee?e.clone():ee.new(e);return Be(n.selection,t),n}const Ve=R()({args:["array"],body:function(e){e=(Math.exp(2*e)-1)/(Math.exp(2*e)+1)}});function Ge(e){const t=e instanceof ee?e.clone():ee.new(e);return Ve(t.selection),t}function ze(e){const t=e instanceof ee?e.clone():ee.new(e);return D().abseq(t.selection),t}function $e(e){const t=e instanceof ee?e.clone():ee.new(e);return D().coseq(t.selection),t}function qe(e){const t=e instanceof ee?e.clone():ee.new(e);return D().acoseq(t.selection),t}function He(e){const t=e instanceof ee?e.clone():ee.new(e);return D().sineq(t.selection),t}function We(e){const t=e instanceof ee?e.clone():ee.new(e);return D().asineq(t.selection),t}function Ke(e){const t=e instanceof ee?e.clone():ee.new(e);return D().taneq(t.selection),t}function Xe(e){const t=e instanceof ee?e.clone():ee.new(e);return D().ataneq(t.selection),t}function Ye(e,t){return ee.new(e).dot(t)}function Je(...e){let t,n,r;for(t=e.length>1?[].slice.call(e):e[0],n=0;n<t.length;n++)r=t[n],t[n]=r instanceof ee?r.tolist():Z.isNumber(r)?[r]:r;let i=t[0];for(n=1;n<t.length;n++){r=t[n];const e=Z.getShape(i),o=Z.getShape(r);if(e.length!==o.length)throw new K("all the input arrays must have same number of dimensions");if(1===e.length&&1===o.length)i=i.concat(r);else if(2===e.length&&2===o.length&&e[0]===o[0]||1===e.length&&2===o.length&&e[0]===o[0]||2===e.length&&1===o.length&&e[0]===o[0])for(let t=0;t<e[0];t++)i[t]=i[t].concat(r[t]);else{if(!(3===e.length&&3===o.length&&e[0]===o[0]&&e[1]===o[1]||2===e.length&&3===o.length&&e[0]===o[0]&&e[1]===o[1]||3===e.length&&2===o.length&&e[0]===o[0]&&e[1]===o[1]))throw new K('cannot concatenate  "'+e+'" with "'+o+'"');for(let t=0;t<e[0];t++){const n=new Array(e[1]);for(let o=0;o<e[1];o++)n[o]=i[t][o].concat(r[t][o]);i[t]=n}}}return ee.new(i,t[0].dtype)}function Qe(e){return ee.new(e).round()}function Ze(e,t){return ee.new(e).convolve(t)}function et(e,t){return ee.new(e).fftconvolve(t)}function tt(e){const t=(e=e instanceof ee?e.clone():ee.new(e)).shape,n=t.length;if(2!==t[n-1])throw new K("expect last dimension of the array to have 2 values (for both real and imaginary part)");let r=new Array(n),i=new Array(n);return r[n-1]=0,i[n-1]=1,F()(1,e.selection.pick.apply(e.selection,r),e.selection.pick.apply(e.selection,i)),e}function nt(e){const t=(e=e instanceof ee?e.clone():ee.new(e)).shape,n=t.length;if(2!==t[n-1])throw new K("expect last dimension of the array to have 2 values (for both real and imaginary part)");let r=new Array(n),i=new Array(n);return r[n-1]=0,i[n-1]=1,F()(-1,e.selection.pick.apply(e.selection,r),e.selection.pick.apply(e.selection,i)),e}function rt(e){return ee.new(e).diag()}function it(e,t){const n=Ce([e,e],t);for(let t=0;t<e;t++)n.set(t,t,1);return n}function ot(e,t=0){if(t=t||0,!e||0===e.length)throw new K("need at least one array to stack");const n=e.map((function(e){return Z.isNumber(e)?e:ee.new(e)})),r=n[0].shape||[];for(let e=1;e<n.length;e++){const t=n[e].shape||[],i=Math.max(r.length,t.length);for(let e=0;e<i;e++)if(r[e]!==t[e])throw new K("all input arrays must have the same shape")}let i;if(0===r.length)i=Je(n);else{i=Ce([n.length].concat(r));for(let e=0;e<n.length;e++)i.pick(e).assign(n[e],!1)}if(t){t<0&&(t=i.ndim+t);const e=i.ndim,n=new Array(e);for(let r=0;r<e;r++)n[r]=r<t?r+1:r===t?0:r;return i.transpose(n)}return i}function at(e,t){const n=Oe((e=ee.new(e)).ndim).tolist();let r=t;for(;r<0;)r+=e.ndim;if(void 0===n[r])throw new K("axis="+t+"invalid for the "+e.ndim+"-dimensional input array");return n[r]=-1,e.step.apply(e,n)}function st(e,t=1,n=[0,1]){for(t=t||1;t<0;)t+=4;t%=4,e=ee.new(e);let r=ee.new(n||[0,1]);if(1!==r.shape.length||2!==r.shape[0])throw new K("len(axes) must be 2");if(r=r.tolist(),r[0]===r[1]||ze(r[0]-r[1]).ndim===e.ndim)throw new K("Axes must be different.");if(0===t)return e;if(2===t)return at(at(e,r[0]),r[1]);const i=Ae(e.ndim).tolist(),o=i[r[0]];return i[r[0]]=i[r[1]],i[r[1]]=o,1===t?ke(at(e,r[1]),i):at(ke(e,i),r[1])}const lt=ee.new,ct=Ie;function ut(e){return ee.new(e,"int8")}function pt(e){return ee.new(e,"uint8")}function dt(e){return ee.new(e,"int16")}function ht(e){return ee.new(e,"uint16")}function mt(e){return ee.new(e,"int32")}function ft(e){return ee.new(e,"uint32")}function gt(e){return ee.new(e,"float32")}function yt(e){return ee.new(e,"float64")}function _t(e){return ee.new(e,"uint8_clamped")}const vt=t,bt=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},wt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){const i=e[t],o=t+1<e.length,a=o?e[t+1]:0,s=t+2<e.length,l=s?e[t+2]:0,c=i>>2,u=(3&i)<<4|a>>4;let p=(15&a)<<2|l>>6,d=63&l;s||(d=64,o||(p=64)),r.push(n[c],n[u],n[p],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(bt(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){const i=n[e.charAt(t++)],o=t<e.length?n[e.charAt(t)]:0;++t;const a=t<e.length?n[e.charAt(t)]:64;++t;const s=t<e.length?n[e.charAt(t)]:64;if(++t,null==i||null==o||null==a||null==s)throw new xt;const l=i<<2|o>>4;if(r.push(l),64!==a){const e=o<<4&240|a>>2;if(r.push(e),64!==s){const e=a<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class xt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const St=function(e){return function(e){const t=bt(e);return wt.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Tt=function(e){try{return wt.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Et(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Et(e[n],t[n]));return e}function It(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw new Error("Unable to locate global object.")}const kt=()=>{try{return It().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process)return;const e={package_version:"1.0.23"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&Tt(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},jt=()=>{var e;return null===(e=kt())||void 0===e?void 0:e.config},At=e=>{var t;return null===(t=kt())||void 0===t?void 0:t[`_${e}`]};class Ct{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Ot(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Mt(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function Nt(){return!function(){var e;const t=null===(e=kt())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(r.g.process)}catch(e){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Rt(){try{return"object"==typeof indexedDB}catch(e){return!1}}class Pt extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Pt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dt.prototype.create)}}class Dt{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?function(e,t){return e.replace(Lt,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Pt(r,a,n)}}const Lt=/\{\$([^}]+)}/g;function Ft(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Bt(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(Ut(n)&&Ut(o)){if(!Bt(n,o))return!1}else if(n!==o)return!1}for(const e of r)if(!n.includes(e))return!1;return!0}function Ut(e){return null!==e&&"object"==typeof e}function Vt(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Gt(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function zt(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function $t(e,t){const n=new qt(e,t);return n.subscribe.bind(n)}class qt{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e){if("object"!=typeof e||null===e)return!1;for(const t of["next","error","complete"])if(t in e&&"function"==typeof e[t])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Ht),void 0===r.error&&(r.error=Ht),void 0===r.complete&&(r.complete=Ht);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Ht(){}function Wt(e){return e&&e._delegate?e._delegate:e}class Kt{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Xt="[DEFAULT]";class Yt{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Ct;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Xt})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=Xt){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=Xt){return this.instances.has(e)}getOptions(e=Xt){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===Xt?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var r;return n||null}normalizeInstanceIdentifier(e=Xt){return this.component?this.component.multipleInstances?e:Xt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Jt{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Yt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Qt=[];var Zt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Zt||(Zt={}));const en={debug:Zt.DEBUG,verbose:Zt.VERBOSE,info:Zt.INFO,warn:Zt.WARN,error:Zt.ERROR,silent:Zt.SILENT},tn=Zt.INFO,nn={[Zt.DEBUG]:"log",[Zt.VERBOSE]:"log",[Zt.INFO]:"info",[Zt.WARN]:"warn",[Zt.ERROR]:"error"},rn=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=nn[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class on{constructor(e){this.name=e,this._logLevel=tn,this._logHandler=rn,this._userLogHandler=null,Qt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Zt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?en[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Zt.DEBUG,...e),this._logHandler(this,Zt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Zt.VERBOSE,...e),this._logHandler(this,Zt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Zt.INFO,...e),this._logHandler(this,Zt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Zt.WARN,...e),this._logHandler(this,Zt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Zt.ERROR,...e),this._logHandler(this,Zt.ERROR,...e)}}let an,sn;const ln=new WeakMap,cn=new WeakMap,un=new WeakMap,pn=new WeakMap,dn=new WeakMap;let hn={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return cn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||un.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return fn(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function mn(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(sn||(sn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(gn(this),e),fn(ln.get(this))}:function(...e){return fn(t.apply(gn(this),e))}:function(e,...n){const r=t.call(gn(this),e,...n);return un.set(r,e.sort?e.sort():[e]),fn(r)}:(e instanceof IDBTransaction&&function(e){if(cn.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));cn.set(e,t)}(e),((e,t)=>t.some((t=>e instanceof t)))(e,an||(an=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,hn):e);var t}function fn(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(fn(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&ln.set(t,e)})).catch((()=>{})),dn.set(t,e),t}(e);if(pn.has(e))return pn.get(e);const t=mn(e);return t!==e&&(pn.set(e,t),dn.set(t,e)),t}const gn=e=>dn.get(e),yn=["get","getKey","getAll","getAllKeys","count"],_n=["put","add","delete","clear"],vn=new Map;function bn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(vn.get(t))return vn.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=_n.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!yn.includes(n))return;const o=async function(e,...t){const o=this.transaction(e,i?"readwrite":"readonly");let a=o.store;return r&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),i&&o.done]))[0]};return vn.set(t,o),o}var wn;wn=hn,hn={...wn,get:(e,t,n)=>bn(e,t)||wn.get(e,t,n),has:(e,t)=>!!bn(e,t)||wn.has(e,t)};class xn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const Sn="@firebase/app",Tn="0.10.13",En=new on("@firebase/app"),In="@firebase/app-compat",kn="@firebase/analytics-compat",jn="@firebase/analytics",An="@firebase/app-check-compat",Cn="@firebase/app-check",On="@firebase/auth",Mn="@firebase/auth-compat",Nn="@firebase/database",Rn="@firebase/data-connect",Pn="@firebase/database-compat",Dn="@firebase/functions",Ln="@firebase/functions-compat",Fn="@firebase/installations",Bn="@firebase/installations-compat",Un="@firebase/messaging",Vn="@firebase/messaging-compat",Gn="@firebase/performance",zn="@firebase/performance-compat",$n="@firebase/remote-config",qn="@firebase/remote-config-compat",Hn="@firebase/storage",Wn="@firebase/storage-compat",Kn="@firebase/firestore",Xn="@firebase/vertexai-preview",Yn="@firebase/firestore-compat",Jn="firebase",Qn="[DEFAULT]",Zn={[Sn]:"fire-core",[In]:"fire-core-compat",[jn]:"fire-analytics",[kn]:"fire-analytics-compat",[Cn]:"fire-app-check",[An]:"fire-app-check-compat",[On]:"fire-auth",[Mn]:"fire-auth-compat",[Nn]:"fire-rtdb",[Rn]:"fire-data-connect",[Pn]:"fire-rtdb-compat",[Dn]:"fire-fn",[Ln]:"fire-fn-compat",[Fn]:"fire-iid",[Bn]:"fire-iid-compat",[Un]:"fire-fcm",[Vn]:"fire-fcm-compat",[Gn]:"fire-perf",[zn]:"fire-perf-compat",[$n]:"fire-rc",[qn]:"fire-rc-compat",[Hn]:"fire-gcs",[Wn]:"fire-gcs-compat",[Kn]:"fire-fst",[Yn]:"fire-fst-compat",[Xn]:"fire-vertex","fire-js":"fire-js",[Jn]:"fire-js-all"},er=new Map,tr=new Map,nr=new Map;function rr(e,t){try{e.container.addComponent(t)}catch(n){En.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ir(e,t){e.container.addOrOverwriteComponent(t)}function or(e){const t=e.name;if(nr.has(t))return En.debug(`There were multiple attempts to register component ${t}.`),!1;nr.set(t,e);for(const t of er.values())rr(t,e);for(const t of tr.values())rr(t,e);return!0}function ar(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function sr(e,t,n=Qn){ar(e,t).clearInstance(n)}function lr(e){return void 0!==e.options}function cr(e){return void 0!==e.settings}function ur(){nr.clear()}const pr=new Dt("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class dr{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Kt("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pr.create("app-deleted",{appName:this._name})}}class hr extends dr{constructor(e,t,n,r){const i=void 0!==t.automaticDataCollectionEnabled&&t.automaticDataCollectionEnabled,o={name:n,automaticDataCollectionEnabled:i};void 0!==e.apiKey?super(e,o,r):super(e.options,o,r),this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},t),this._finalizationRegistry=null,"undefined"!=typeof FinalizationRegistry&&(this._finalizationRegistry=new FinalizationRegistry((()=>{this.automaticCleanup()}))),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,br(Sn,Tn,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){vr(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw pr.create("server-app-deleted")}}const mr="10.14.1";function fr(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});const r=Object.assign({name:Qn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!=typeof i||!i)throw pr.create("bad-app-name",{appName:String(i)});if(n||(n=jt()),!n)throw pr.create("no-options");const o=er.get(i);if(o){if(Bt(n,o.options)&&Bt(r,o.config))return o;throw pr.create("duplicate-app",{appName:i})}const a=new Jt(i);for(const e of nr.values())a.addComponent(e);const s=new dr(n,r,a);return er.set(i,s),s}function gr(e,t){if(("undefined"!=typeof window||Mt())&&!Mt())throw pr.create("invalid-server-app-environment");let n;void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!1),n=lr(e)?e.options:e;const r=Object.assign(Object.assign({},t),n);if(void 0!==r.releaseOnDeref&&delete r.releaseOnDeref,void 0!==t.releaseOnDeref&&"undefined"==typeof FinalizationRegistry)throw pr.create("finalization-registry-not-supported",{});const i=""+(o=JSON.stringify(r),[...o].reduce(((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0),0));var o;const a=tr.get(i);if(a)return a.incRefCount(t.releaseOnDeref),a;const s=new Jt(i);for(const e of nr.values())s.addComponent(e);const l=new hr(n,t,i,s);return tr.set(i,l),l}function yr(e=Qn){const t=er.get(e);if(!t&&e===Qn&&jt())return fr();if(!t)throw pr.create("no-app",{appName:e});return t}function _r(){return Array.from(er.values())}async function vr(e){let t=!1;const n=e.name;er.has(n)?(t=!0,er.delete(n)):tr.has(n)&&e.decRefCount()<=0&&(tr.delete(n),t=!0),t&&(await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function br(e,t,n){var r;let i=null!==(r=Zn[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${i}" with version "${t}":`];return o&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void En.warn(e.join(" "))}or(new Kt(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}function wr(e,t){if(null!==e&&"function"!=typeof e)throw pr.create("invalid-log-argument");!function(e,t){for(const n of Qt){let r=null;t&&t.level&&(r=en[t.level]),n.userLogHandler=null===e?null:(t,n,...i)=>{const o=i.map((e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}})).filter((e=>e)).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:Zt[n].toLowerCase(),message:o,args:i,type:t.name})}}}(e,t)}function xr(e){var t;t=e,Qt.forEach((e=>{e.setLogLevel(t)}))}const Sr="firebase-heartbeat-store";let Tr=null;function Er(){return Tr||(Tr=function(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const a=indexedDB.open(e,t),s=fn(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(fn(a.result),e.oldVersion,e.newVersion,fn(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),s.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),s}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Sr)}catch(e){console.warn(e)}}}).catch((e=>{throw pr.create("idb-open",{originalErrorMessage:e.message})}))),Tr}async function Ir(e,t){try{const n=(await Er()).transaction(Sr,"readwrite"),r=n.objectStore(Sr);await r.put(t,kr(e)),await n.done}catch(e){if(e instanceof Pt)En.warn(e.message);else{const t=pr.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});En.warn(t.message)}}}function kr(e){return`${e.name}!${e.options.appId}`}class jr{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Cr(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ar();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}catch(e){En.warn(e)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Ar(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Or(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Or(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=St(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return En.warn(e),""}}}function Ar(){return(new Date).toISOString().substring(0,10)}class Cr{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Rt()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Er()).transaction(Sr),n=await t.objectStore(Sr).get(kr(e));return await t.done,n}catch(e){if(e instanceof Pt)En.warn(e.message);else{const t=pr.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});En.warn(t.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ir(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ir(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Or(e){return St(JSON.stringify({version:2,heartbeats:e})).length}or(new Kt("platform-logger",(e=>new xn(e)),"PRIVATE")),or(new Kt("heartbeat",(e=>new jr(e)),"PRIVATE")),br(Sn,Tn,""),br(Sn,Tn,"esm2017"),br("fire-js","");class Mr{constructor(e,t){this._delegate=e,this.firebase=t,rr(e,new Kt("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),vr(this._delegate))))}_getService(e,t=Qn){var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=Qn){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){rr(this._delegate,e)}_addOrOverwriteComponent(e){ir(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Nr=new Dt("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Rr=function e(){const t=function(e){const t={},r={__esModule:!0,initializeApp:function(n,i={}){const o=fr(n,i);if(Ft(t,o.name))return t[o.name];const a=new e(o,r);return t[o.name]=a,a},app:i,registerVersion:br,setLogLevel:xr,onLog:wr,apps:null,SDK_VERSION:mr,INTERNAL:{registerComponent:function(t){const n=t.name,o=n.replace("-compat","");if(or(t)&&"PUBLIC"===t.type){const a=(e=i())=>{if("function"!=typeof e[o])throw Nr.create("invalid-app-argument",{appName:n});return e[o]()};void 0!==t.serviceProps&&Et(a,t.serviceProps),r[o]=a,e.prototype[o]=function(...e){return this._getService.bind(this,n).apply(this,t.multipleInstances?e:[])}}return"PUBLIC"===t.type?r[o]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:n}};function i(e){if(!Ft(t,e=e||Qn))throw Nr.create("no-app",{appName:e});return t[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(t).map((e=>t[e]))}}),i.App=e,r}(Mr);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){Et(t,e)},createSubscribe:$t,ErrorFactory:Dt,deepExtend:Et}),t}(),Pr=new on("@firebase/app-compat");try{const e=It();if(void 0!==e.firebase){Pr.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const t=e.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&Pr.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch(e){}const Dr=Rr;br("@firebase/app-compat","0.2.43",void 0),Dr.registerVersion("firebase","10.14.1","app-compat");var Lr,Fr,Br="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ur={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],a=t+(o^n&(i^o))+r[0]+3614090360&4294967295;a=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=n+(a<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(o^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(o^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(o^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((o=(t=n+((a=t+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=o+((a=i+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,o=this.h,a=0;a<t;){if(0==o)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"==typeof e){for(;a<t;)if(i[o++]=e.charCodeAt(a++),o==this.blockSize){n(this,i),o=0;break}}else for(;a<t;)if(i[o++]=e[a++],o==this.blockSize){n(this,i),o=0;break}}this.h=o,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function o(e){return-128<=e&&128>e?function(e){var t=i;return Object.prototype.hasOwnProperty.call(t,e)?t[e]:t[e]=function(e){return new r([0|e],0>e?-1:0)}(e)}(e):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return s;if(0>e)return d(a(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var s=o(0),l=o(1),c=o(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function p(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function h(e,t){return e.add(d(t))}function m(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function f(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new f(s,s);if(p(e))return t=g(d(e),t),new f(d(t.g),d(t.h));if(p(t))return t=g(e,d(t)),new f(d(t.g),t.h);if(30<e.g.length){if(p(e)||p(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=_(n,1),o=_(r,1);for(r=_(r,2),n=_(n,2);!u(r);){var c=o.add(r);0>=c.l(e)&&(i=i.add(n),o=c),r=_(r,1),n=_(n,1)}return t=h(e,i.j(t)),new f(i,t)}for(i=s;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(o=a(n)).j(t);p(c)||0<c.l(e);)c=(o=a(n-=r)).j(t);u(o)&&(o=l),i=i.add(o),e=h(e,c)}return new f(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function _(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,o=[],a=0;a<i;a++)o[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(o,e.h)}(e=r.prototype).m=function(){if(p(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(p(this))return"-"+d(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,o=((0<(n=h(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return p(e=h(this,e))?-1:u(e)?0:1},e.abs=function(){return p(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,o=0;o<=t;o++){var a=i+(65535&this.i(o))+(65535&e.i(o)),s=(a>>>16)+(this.i(o)>>>16)+(e.i(o)>>>16);i=s>>>16,a&=65535,s&=65535,n[o]=s<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return s;if(p(this))return p(e)?d(this).j(d(e)):d(d(this).j(e));if(p(e))return d(this.j(d(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var o=0;o<e.g.length;o++){var l=this.i(i)>>>16,h=65535&this.i(i),f=e.i(o)>>>16,g=65535&e.i(o);n[2*i+2*o]+=h*g,m(n,2*i+2*o),n[2*i+2*o+1]+=l*g,m(n,2*i+2*o+1),n[2*i+2*o+1]+=h*f,m(n,2*i+2*o+1),n[2*i+2*o+2]+=l*f,m(n,2*i+2*o+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Fr=Ur.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),i=s,o=0;o<t.length;o+=8){var l=Math.min(8,t.length-o),c=parseInt(t.substring(o,o+l),n);8>l?(l=a(Math.pow(n,l)),i=i.j(l).add(a(c))):i=(i=i.j(r)).add(a(c))}return i},Lr=Ur.Integer=r}).apply(void 0!==Br?Br:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Vr,Gr,zr,$r,qr,Hr,Wr,Kr,Xr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Yr={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Xr&&Xr];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];if(!(a in i))break e;i=i[a]}(r=r(o=i[e=e[e.length-1]]))!=o&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(0,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function o(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function s(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?s:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function p(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function h(e,t){for(let t=1;t<arguments.length;t++){const n=arguments[t];if(o(n)){const t=e.length||0,r=n.length||0;e.length=t+r;for(let i=0;i<r;i++)e[t+i]=n[i]}else e.push(n)}}function m(e){return/^[\s\xa0]*$/.test(e)}function f(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=!(-1==f().indexOf("Gecko")||-1!=f().toLowerCase().indexOf("webkit")&&-1==f().indexOf("Edge")||-1!=f().indexOf("Trident")||-1!=f().indexOf("MSIE")||-1!=f().indexOf("Edge"));function _(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function v(e){const t={};for(const n in e)t[n]=e[n];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<b.length;t++)n=b[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function x(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function S(e){i.setTimeout((()=>{throw e}),0)}function T(){var e=A;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var E=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new I),(e=>e.reset()));class I{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let k,j=!1,A=new class{constructor(){this.h=this.g=null}add(e,t){const n=E.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},C=()=>{const e=i.Promise.resolve(void 0);k=()=>{e.then(O)}};var O=()=>{for(var e;e=T();){try{e.h.call(e.g)}catch(e){S(e)}var t=E;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}j=!1};function M(){this.s=this.s,this.C=this.C}function N(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}M.prototype.s=!1,M.prototype.ma=function(){this.s||(this.s=!0,this.N())},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},N.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(e){}return e}();function P(e,t){if(N.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:D[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&P.aa.h.call(this)}}p(P,N);var D={2:"touch",3:"pen",4:"mouse"};P.prototype.h=function(){P.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var L="closure_listenable_"+(1e6*Math.random()|0),F=0;function B(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function U(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function V(e){this.src=e,this.g={},this.h=0}function G(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=Array.prototype.indexOf.call(i,t,void 0);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(U(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function z(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.da&&o.listener==t&&o.capture==!!n&&o.ha==r)return i}return-1}V.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var a=z(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new B(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var $="closure_lm_"+(1e6*Math.random()|0),q={};function H(e,t,n,r,i){if(r&&r.once)return K(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)H(e,t[o],n,r,i);return null}return n=te(n),e&&e[L]?e.K(t,n,a(r)?!!r.capture:!!r,i):W(e,t,n,!1,r,i)}function W(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s=a(i)?!!i.capture:!!i,l=Z(e);if(l||(e[$]=l=new V(e)),(n=l.add(t,n,r,s,o)).proxy)return n;if(r=function(){const e=Q;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)R||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(J(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function K(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)K(e,t[o],n,r,i);return null}return n=te(n),e&&e[L]?e.L(t,n,a(r)?!!r.capture:!!r,i):W(e,t,n,!0,r,i)}function X(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)X(e,t[o],n,r,i);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[L]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=z(o=e.g[t],n,r,i))&&(U(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=z(t,n,r,i)),(n=-1<e?t[e]:null)&&Y(n))}function Y(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[L])G(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(J(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(G(n,e),0==n.h&&(n.src=null,t[$]=null)):U(e)}}}function J(e){return e in q?q[e]:q[e]="on"+e}function Q(e,t){if(e.da)e=!0;else{t=new P(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Y(e),e=n.call(r,t)}return e}function Z(e){return(e=e[$])instanceof V?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"==typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){M.call(this),this.i=new V(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"==typeof t)t=new N(t,e);else if(t instanceof N)t.target=t.target||e;else{var i=t;w(t=new N(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=t.g=n[o];i=ie(a,r,!0,t)&&i}if(i=ie(a=t.g=e,r,!0,t)&&i,i=ie(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=ie(a=t.g=n[o],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.da&&a.capture==n){var s=a.listener,l=a.ha||a.src;a.fa&&G(e.i,a),i=!1!==s.call(l,r)&&i}}return i&&!r.defaultPrevented}function oe(e,t,n){if("function"==typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ae(e){e.g=oe((()=>{e.g=null,e.i&&(e.i=!1,ae(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}p(ne,M),ne.prototype[L]=!0,ne.prototype.removeEventListener=function(e,t,n,r){X(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)U(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class se extends M{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){M.call(this),this.h=e,this.g={}}p(le,M);var ce=[];function ue(e){_(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Y(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pe=i.JSON.stringify,de=i.JSON.parse,he=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function me(){}function fe(e){return e.h||(e.h=e.i())}function ge(){}me.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function _e(){N.call(this,"d")}function ve(){N.call(this,"c")}p(_e,N),p(ve,N);var be={},we=null;function xe(){return we=we||new ne}function Se(e){N.call(this,be.La,e)}function Te(e){const t=xe();re(t,new Se(t))}function Ee(e,t){N.call(this,be.STAT_EVENT,e),this.stat=t}function Ie(e){const t=xe();re(t,new Ee(t,e))}function ke(e,t){N.call(this,be.Ma,e),this.size=t}function je(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Ae(){this.g=!0}function Ce(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return pe(n)}catch(e){return t}}(e,n)+(r?" "+r:"")}))}be.La="serverreachability",p(Se,N),be.STAT_EVENT="statevent",p(Ee,N),be.Ma="timingevent",p(ke,N),Ae.prototype.xa=function(){this.g=!1},Ae.prototype.info=function(){};var Oe,Me={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ne={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Re(){}function Pe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new De}function De(){this.i=null,this.g="",this.h=!1}p(Re,me),Re.prototype.g=function(){return new XMLHttpRequest},Re.prototype.i=function(){return{}},Oe=new Re;var Le={},Fe={};function Be(e,t,n){e.L=1,e.v=pt(at(t)),e.m=n,e.P=!0,Ue(e,null)}function Ue(e,t){e.F=Date.now(),ze(e),e.A=at(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Et(n.i,"t",r),e.C=0,n=e.j.J,e.h=new De,e.g=hn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new se(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var o=0;o<i.length;o++){var a=H(n,i[o],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?v(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Te(),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var a="",s=o.split("&"),l=0;l<s.length;l++){var c=s[l].split("=");if(1<c.length){var u=c[0];c=c[1];var p=u.split("_");a=2<=p.length&&"type"==p[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ve(e){return!!e.g&&"GET"==e.u&&2!=e.L&&e.j.Ca}function Ge(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Le:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function ze(e){e.S=Date.now()+e.I,$e(e,e.I)}function $e(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=je(c(e.ba,e),t)}function qe(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function He(e){0==e.j.G||e.J||ln(e.j,e)}function We(e){qe(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ke(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(e){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;sn(n),Yt(n)}rn(n),Ie(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=je(c(n.Za,n),6e3));if(1>=Qe(n.h)&&n.ca){try{n.ca()}catch(e){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&sn(n),!m(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const p=e.g;if(p){const e=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.h;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(et(o,o.h),o.h=null))}if(r.D){const e=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=dn(r,r.J?r.ia:null,r.W),a.K){tt(r.h,a);var s=a,l=r.L;l&&(s.I=l),s.B&&(qe(s),ze(s)),r.g=a}else nn(r);0<n.i.length&&Qt(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Xt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Te()}catch(e){}}Pe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==qt(e)?t.j():this.Y(e)},Pe.prototype.Y=function(e){try{if(e==this.g)e:{const d=qt(this.g);var t=this.g.Ba();if(this.g.Z(),!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Ht(this.g)))){this.J||4!=d||7==t||Te(),qe(this);var n=this.g.Z();this.X=n;t:if(Ve(this)){var r=Ht(this.g);e="";var o=r.length,a=4==qt(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){We(this),He(this);var s="";break t}this.h.i=new i.TextDecoder}for(t=0;t<o;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==o-1)});r.length=0,this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,o,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!m(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Ie(12),We(this),He(this);break e}Ce(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ke(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<s.length;){if(e=Ge(this,s),e==Fe){4==d&&(this.s=4,Ie(14),n=!1),Ce(this.i,this.l,null,"[Incomplete Response]");break}if(e==Le){this.s=4,Ie(15),Ce(this.i,this.l,s,"[Invalid Chunk]"),n=!1;break}Ce(this.i,this.l,e,null),Ke(this,e)}if(Ve(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=s.length||this.h.h||(this.s=1,Ie(16),n=!1),this.o=this.o&&n,n){if(0<s.length&&!this.W){this.W=!0;var p=this.j;p.g==this&&p.ba&&!p.M&&(p.j.info("Great, no buffering proxy detected. Bytes received: "+s.length),on(p),p.M=!0,Ie(11))}}else Ce(this.i,this.l,s,"[Invalid Chunked Response]"),We(this),He(this)}else Ce(this.i,this.l,s,null),Ke(this,s);4==d&&We(this),this.o&&!this.J&&(4==d?ln(this.j,this):(this.o=!1,ze(this)))}else(function(e){const t={};e=(e.g&&2<=qt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(m(e[r]))continue;var n=x(e[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.s=3,Ie(12)):(this.s=0,Ie(13)),We(this),He(this)}}}catch(e){}},Pe.prototype.cancel=function(){this.J=!0,We(this)},Pe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Te(),Ie(17)),We(this),this.s=2,He(this)):$e(this,this.S-e)};var Xe=class{constructor(e,t){this.g=e,this.map=t}};function Ye(e){this.l=e||10,e=i.PerformanceNavigationTiming?0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Je(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Qe(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(o(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(o(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(o(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}Ye.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ot(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof ot){this.h=e.h,st(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new wt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,st(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),lt(this,t[4]),this.l=dt(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new wt(null,this.h))}function at(e){return new ot(e)}function st(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof wt?(e.i=t,function(e,t){t&&!e.j&&(xt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(St(this,t),Et(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ht(t,vt)),e.i=new wt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function pt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ht(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,mt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function mt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ot.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ht(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ht(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ht(n,"/"==n.charAt(0)?_t:yt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ht(n,bt)),e.join("")};var ft,gt=/[#\/\?@]/g,yt=/[#\?:]/g,_t=/[#\?]/g,vt=/[#\?@]/g,bt=/#/g;function wt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function xt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function St(e,t){xt(e),t=It(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Tt(e,t){return xt(e),t=It(e,t),e.g.has(t)}function Et(e,t,n){St(e,t),0<n.length&&(e.i=null,e.g.set(It(e,t),d(n)),e.h+=n.length)}function It(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function kt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(e){}}function jt(){this.g=new he}function At(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;a(e)&&(i=pe(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function Ct(e){this.l=e.Ub||null,this.j=e.eb||!1}function Ot(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Mt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Nt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Rt(e)}function Rt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Pt(e){let t="";return _(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Dt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Pt(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Lt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=wt.prototype).add=function(e,t){xt(this),this.i=null,e=It(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){xt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){xt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){xt(this);let t=[];if("string"==typeof e)Tt(this,e)&&(t=t.concat(this.g.get(It(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return xt(this),this.i=null,Tt(this,e=It(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var i=o;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")},p(Ct,me),Ct.prototype.g=function(){return new Ot(this.l,this.j)},Ct.prototype.i=(ft={},function(){return ft}),p(Ot,ne),(e=Ot.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Rt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Nt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Rt(this)),this.g&&(this.readyState=3,Rt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Mt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Nt(this):Rt(this),3==this.readyState&&Mt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Nt(this))},e.Qa=function(e){this.g&&(this.response=e,Nt(this))},e.ga=function(){this.g&&Nt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ot.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),p(Lt,ne);var Ft=/^https?$/i,Bt=["POST","PUT"];function Ut(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Vt(e),zt(e)}function Vt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Gt(e){if(e.h&&void 0!==r&&(!e.v[1]||4!=qt(e)||2!=e.Z()))if(e.u&&4==qt(e))oe(e.Ea,0,e);else if(re(e,"readystatechange"),4==qt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var o;if(o=0===r){var a=String(e.D).match(it)[1]||null;!a&&i.self&&i.self.location&&(a=i.self.location.protocol.slice(0,-1)),o=!Ft.test(a?a.toLowerCase():"")}n=o}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var s=2<qt(e)?e.g.statusText:""}catch(e){s=""}e.l=s+" ["+e.Z()+"]",Vt(e)}}finally{zt(e)}}}function zt(e,t){if(e.g){$t(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function $t(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function qt(e){return e.g?e.g.readyState:0}function Ht(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Wt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Kt(e){this.Aa=0,this.i=[],this.j=new Ae,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wt("baseRetryDelayMs",5e3,e),this.cb=Wt("retryDelaySeedMs",1e4,e),this.Wa=Wt("forwardChannelMaxRetries",2,e),this.wa=Wt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ye(e&&e.concurrentRequestLimit),this.Da=new jt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Xt(e){if(Jt(e),3==e.G){var t=e.U++,n=at(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new Pe(e,e.j,t)).L=2,t.v=pt(at(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(e){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=hn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),ze(t)}pn(e)}function Yt(e){e.g&&(on(e),e.g.cancel(),e.g=null)}function Jt(e){Yt(e),e.u&&(i.clearTimeout(e.u),e.u=null),sn(e),e.h.cancel(),e.s&&("number"==typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Qt(e){if(!Je(e.h)&&!e.s){e.s=!0;var t=e.Ga;k||C(),j||(k(),j=!0),A.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=at(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&Dt(r,e.m,e.o),n=new Pe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Be(n,r,t)}function en(e,t){e.H&&_(e.H,(function(e,n){ut(t,n,e)})),e.l&&rt({},(function(e,n){ut(t,n,e)}))}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const s=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),o=!1;else try{At(s,e,"req"+n+"_")}catch(e){r&&r(s)}}if(o){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;k||C(),j||(k(),j=!0),A.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v||(e.Y++,e.u=je(c(e.Fa,e),cn(e,e.v)),e.v++,0))}function on(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function an(e){e.g=new Pe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=at(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Dt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=pt(at(t)),n.m=null,n.P=!0,Ue(n,e)}function sn(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){sn(e),on(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=xe(),new ke(r,n)),Qt(e)}else nn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Qe(e.h)>=e.h.j-(e.s?1:0)||(e.s?(e.i=t.D.concat(e.i),0):1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa)||(e.s=je(c(e.Ga,e,t),cn(e,e.B)),e.B++,0)))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new ot(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||st(r,"https"),pt(r),t?function(e,t){const n=new Ae;if(i.Image){const r=new Image;r.onload=u(kt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(kt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(kt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(kt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ae;const n=new AbortController,r=setTimeout((()=>{n.abort(),kt(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?kt(0,0,!0,t):kt(0,0,!1,t)})).catch((()=>{clearTimeout(r),kt(0,0,!1,t)}))}(r.toString(),n)}else Ie(2);e.G=0,e.l&&e.l.sa(t),pn(e),Jt(e)}function pn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(h(e.ka,t),h(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var r=n instanceof ot?at(n):new ot(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var o=i.location;r=o.protocol,t=t?t+"."+o.hostname:o.hostname,o=+o.port;var a=new ot(null);r&&st(a,r),t&&(a.g=t),o&&lt(a,o),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function hn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Lt(new Ct({eb:n})):new Lt(e.pa)).Ha(e.J),t}function mn(){}function fn(){}function gn(e,t){ne.call(this),this.g=new Kt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!m(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!m(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new vn(this)}function yn(e){_e.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function _n(){ve.call(this),this.status=1}function vn(e){this.g=e}(e=Lt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Oe.g(),this.v=this.o?fe(this.o):fe(Oe),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(e){return void Ut(this,e)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)n.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),o=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Bt,t,void 0))||r||o||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[e,t]of n)this.g.setRequestHeader(e,t);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$t(this),this.u=!0,this.g.send(e),this.u=!1}catch(e){Ut(this,e)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),zt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zt(this,!0)),Lt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Gt(this):this.bb())},e.bb=function(){Gt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<qt(this)?this.g.status:-1}catch(e){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(e=Kt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ie(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=dn(this,null,this.W),Qt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Pe(this,this.j,e);let o=this.o;if(this.S&&(o?(o=v(o),w(o,this.S)):o=this.S),null!==this.m||this.O||(i.H=o,o=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,i,t),ut(n=at(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(Pt(o)))+"&"+t:this.m&&Dt(n,this.m,o)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Be(i,n,null)):Be(i,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Je(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,an(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=je(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ie(10),Yt(this),an(this))},e.Za=function(){null!=this.C&&(this.C=null,Yt(this),rn(this),Ie(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ie(2)):(this.j.info("Failed to ping google.com"),Ie(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=mn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},fn.prototype.g=function(e,t){return new gn(e,t)},p(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Xt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=pe(e),e=n);t.i.push(new Xe(t.Ya++,e)),3==t.G&&Qt(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Xt(this.g),delete this.g,gn.aa.N.call(this)},p(yn,_e),p(_n,ve),p(vn,mn),vn.prototype.ua=function(){re(this.g,"a")},vn.prototype.ta=function(e){re(this.g,new yn(e))},vn.prototype.sa=function(e){re(this.g,new _n)},vn.prototype.ra=function(){re(this.g,"b")},fn.prototype.createWebChannel=fn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,Kr=Yr.createWebChannelTransport=function(){return new fn},Wr=Yr.getStatEventTarget=function(){return xe()},Hr=Yr.Event=be,qr=Yr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Me.NO_ERROR=0,Me.TIMEOUT=8,Me.HTTP_ERROR=6,$r=Yr.ErrorCode=Me,Ne.COMPLETE="complete",zr=Yr.EventType=Ne,ge.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Gr=Yr.WebChannel=ge,Yr.FetchXmlHttpFactory=Ct,Lt.prototype.listenOnce=Lt.prototype.L,Lt.prototype.getLastError=Lt.prototype.Ka,Lt.prototype.getLastErrorCode=Lt.prototype.Ba,Lt.prototype.getStatus=Lt.prototype.Z,Lt.prototype.getResponseJson=Lt.prototype.Oa,Lt.prototype.getResponseText=Lt.prototype.oa,Lt.prototype.send=Lt.prototype.ea,Lt.prototype.setWithCredentials=Lt.prototype.Ha,Vr=Yr.XhrIo=Lt}).apply(void 0!==Xr?Xr:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});const Jr="@firebase/firestore";class Qr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qr.UNAUTHENTICATED=new Qr(null),Qr.GOOGLE_CREDENTIALS=new Qr("google-credentials-uid"),Qr.FIRST_PARTY=new Qr("first-party-uid"),Qr.MOCK_USER=new Qr("mock-user");let Zr="10.14.0";const ei=new on("@firebase/firestore");function ti(){return ei.logLevel}function ni(e,...t){if(ei.logLevel<=Zt.DEBUG){const n=t.map(oi);ei.debug(`Firestore (${Zr}): ${e}`,...n)}}function ri(e,...t){if(ei.logLevel<=Zt.ERROR){const n=t.map(oi);ei.error(`Firestore (${Zr}): ${e}`,...n)}}function ii(e,...t){if(ei.logLevel<=Zt.WARN){const n=t.map(oi);ei.warn(`Firestore (${Zr}): ${e}`,...n)}}function oi(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function ai(e="Unexpected state"){const t=`FIRESTORE (${Zr}) INTERNAL ASSERTION FAILED: `+e;throw ri(t),new Error(t)}function si(e,t){e||ai()}function li(e,t){return e}const ci={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ui extends Pt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class pi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class di{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hi{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Qr.UNAUTHENTICATED)))}shutdown(){}}class mi{constructor(e){this.t=e,this.currentUser=Qr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){si(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new pi;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new pi,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},a=e=>{ni("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((e=>a(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(ni("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new pi)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(ni("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(si("string"==typeof t.accessToken),new di(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return si(null===e||"string"==typeof e),new Qr(e)}}class fi{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Qr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class gi{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new fi(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Qr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class yi{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _i{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){si(void 0===this.o);const n=e=>{null!=e.error&&ni("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,ni("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{ni("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):ni("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(si("string"==typeof e.token),this.R=e.token,new yi(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function vi(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}class bi{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=vi(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function wi(e,t){return e<t?-1:e>t?1:0}function xi(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Si(e){return e+"\0"}class Ti{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ui(ci.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ui(ci.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ui(ci.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ui(ci.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ti.fromMillis(Date.now())}static fromDate(e){return Ti.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Ti(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?wi(this.nanoseconds,e.nanoseconds):wi(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ei{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ei(e)}static min(){return new Ei(new Ti(0,0))}static max(){return new Ei(new Ti(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ii{constructor(e,t,n){void 0===t?t=0:t>e.length&&ai(),void 0===n?n=e.length-t:n>e.length-t&&ai(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Ii.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ii?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ki extends Ii{construct(e,t,n){return new ki(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new ui(ci.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new ki(t)}static emptyPath(){return new ki([])}}const ji=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ai extends Ii{construct(e,t,n){return new Ai(e,t,n)}static isValidIdentifier(e){return ji.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ai.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ai(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new ui(ci.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new ui(ci.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new ui(ci.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new ui(ci.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ai(t)}static emptyPath(){return new Ai([])}}class Ci{constructor(e){this.path=e}static fromPath(e){return new Ci(ki.fromString(e))}static fromName(e){return new Ci(ki.fromString(e).popFirst(5))}static empty(){return new Ci(ki.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ki.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ki.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ci(new ki(e.slice()))}}class Oi{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function Mi(e){return e.fields.find((e=>2===e.kind))}function Ni(e){return e.fields.filter((e=>2!==e.kind))}Oi.UNKNOWN_ID=-1;class Ri{constructor(e,t){this.fieldPath=e,this.kind=t}}class Pi{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Pi(0,Li.min())}}function Di(e){return new Li(e.readTime,e.key,-1)}class Li{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Li(Ei.min(),Ci.empty(),-1)}static max(){return new Li(Ei.max(),Ci.empty(),-1)}}function Fi(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Ci.comparator(e.documentKey,t.documentKey),0!==n?n:wi(e.largestBatchId,t.largestBatchId))}const Bi="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ui{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Vi(e){if(e.code!==ci.FAILED_PRECONDITION||e.message!==Bi)throw e;ni("LocalStore","Unexpectedly lost primary lease")}class Gi{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ai(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Gi(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Gi?t:Gi.resolve(t)}catch(e){return Gi.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Gi.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Gi.reject(t)}static resolve(e){return new Gi(((t,n)=>{t(e)}))}static reject(e){return new Gi(((t,n)=>{n(e)}))}static waitFor(e){return new Gi(((t,n)=>{let r=0,i=0,o=!1;e.forEach((e=>{++r,e.next((()=>{++i,o&&i===r&&t()}),(e=>n(e)))})),o=!0,i===r&&t()}))}static or(e){let t=Gi.resolve(!1);for(const n of e)t=t.next((e=>e?Gi.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Gi(((n,r)=>{const i=e.length,o=new Array(i);let a=0;for(let s=0;s<i;s++){const l=s;t(e[l]).next((e=>{o[l]=e,++a,a===i&&n(o)}),(e=>r(e)))}}))}static doWhile(e,t){return new Gi(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class zi{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new pi,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Wi(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=Qi(t.target.error);this.V.reject(new Wi(e,n))}}static open(e,t,n,r){try{return new zi(t,e.transaction(r,n))}catch(e){throw new Wi(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ni("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Xi(t)}}class $i{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===$i.S(Ot())&&ri("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ni("SimpleDb","Removing database:",e),Yi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Rt())return!1;if($i.v())return!0;const e=Ot(),t=$i.S(e),n=0<t&&t<10,r=qi(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static v(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.C)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(ni("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Wi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new ui(ci.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new ui(ci.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Wi(e,r))},r.onupgradeneeded=e=>{ni("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.O(t,r.transaction,e.oldVersion,this.version).next((()=>{ni("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=e=>this.N(e)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let o=0;for(;;){++o;try{this.db=await this.M(e);const t=zi.open(this.db,e,i?"readonly":"readwrite",n),o=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),Gi.reject(e)))).toPromise();return o.catch((()=>{})),await t.m,o}catch(e){const t=e,n="FirebaseError"!==t.name&&o<3;if(ni("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function qi(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Hi{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Yi(this.B.delete())}}class Wi extends ui{constructor(e,t){super(ci.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ki(e){return"IndexedDbTransactionError"===e.name}class Xi{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(ni("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(ni("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Yi(n)}add(e){return ni("SimpleDb","ADD",this.store.name,e,e),Yi(this.store.add(e))}get(e){return Yi(this.store.get(e)).next((t=>(void 0===t&&(t=null),ni("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return ni("SimpleDb","DELETE",this.store.name,e),Yi(this.store.delete(e))}count(){return ni("SimpleDb","COUNT",this.store.name),Yi(this.store.count())}U(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new Gi(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.W(e,((e,n)=>{t.push(n)})).next((()=>t))}}G(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new Gi(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}j(e,t){ni("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.H=!1;const r=this.cursor(n);return this.W(r,((e,t,n)=>n.delete()))}J(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.W(r,t)}Y(e){const t=this.cursor({});return new Gi(((n,r)=>{t.onerror=e=>{const t=Qi(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}W(e,t){const n=[];return new Gi(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const o=new Hi(i),a=t(i.primaryKey,i.value,o);if(a instanceof Gi){const e=a.catch((e=>(o.done(),Gi.reject(e))));n.push(e)}o.isDone?r():null===o.K?i.continue():i.continue(o.K)}})).next((()=>Gi.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Yi(e){return new Gi(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Qi(e.target.error);n(t)}}))}let Ji=!1;function Qi(e){const t=$i.S(Ot());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new ui("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ji||(Ji=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Zi{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){ni("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{ni("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(e){Ki(e)?ni("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await Vi(e)}await this.X(6e4)}))}}class eo{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.te(t,e)))}te(e,t){const n=new Set;let r=t,i=!0;return Gi.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return ni("IndexBackfiller",`Processing collection: ${t}`),this.ne(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}ne(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.re(r,n))).next((n=>(ni("IndexBackfiller",`Updating offset: ${n}`),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}re(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=Di(t);Fi(r,n)>0&&(n=r)})),new Li(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class to{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function no(e){return null==e}function ro(e){return 0===e&&1/e==-1/0}function io(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=ao(t)),t=oo(e.get(n),t);return ao(t)}function oo(e,t){let n=t;const r=e.length;for(let t=0;t<r;t++){const r=e.charAt(t);switch(r){case"\0":n+="";break;case"":n+="";break;default:n+=r}}return n}function ao(e){return e+""}function so(e){const t=e.length;if(si(t>=2),2===t)return si(""===e.charAt(0)&&""===e.charAt(1)),ki.emptyPath();const n=t-2,r=[];let i="";for(let o=0;o<t;){const t=e.indexOf("",o);switch((t<0||t>n)&&ai(),e.charAt(t+1)){case"":const n=e.substring(o,t);let a;0===i.length?a=n:(i+=n,a=i,i=""),r.push(a);break;case"":i+=e.substring(o,t),i+="\0";break;case"":i+=e.substring(o,t+1);break;default:ai()}o=t+2}return new ki(r)}to.oe=-1;const lo=["userId","batchId"];function co(e,t){return[e,io(t)]}function uo(e,t,n){return[e,io(t),n]}const po={},ho=["prefixPath","collectionGroup","readTime","documentId"],mo=["prefixPath","collectionGroup","documentId"],fo=["collectionGroup","readTime","prefixPath","documentId"],go=["canonicalId","targetId"],yo=["targetId","path"],_o=["path","targetId"],vo=["collectionId","parent"],bo=["indexId","uid"],wo=["uid","sequenceNumber"],xo=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],So=["indexId","uid","orderedDocumentKey"],To=["userId","collectionPath","documentId"],Eo=["userId","collectionPath","largestBatchId"],Io=["userId","collectionGroup","largestBatchId"],ko=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],jo=[...ko,"documentOverlays"],Ao=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Co=Ao,Oo=[...Co,"indexConfiguration","indexState","indexEntries"],Mo=Oo,No=[...Oo,"globals"];class Ro extends Ui{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Po(e,t){const n=li(e);return $i.F(n._e,t)}function Do(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Lo(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Fo(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Bo{constructor(e,t){this.comparator=e,this.root=t||Vo.EMPTY}insert(e,t){return new Bo(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vo.BLACK,null,null))}remove(e){return new Bo(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vo.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uo(this.root,e,this.comparator,!0)}}class Uo{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vo{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Vo.RED,this.left=null!=r?r:Vo.EMPTY,this.right=null!=i?i:Vo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Vo(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Vo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Vo.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ai();if(this.right.isRed())throw ai();const e=this.left.check();if(e!==this.right.check())throw ai();return e+(this.isRed()?0:1)}}Vo.EMPTY=null,Vo.RED=!0,Vo.BLACK=!1,Vo.EMPTY=new class{constructor(){this.size=0}get key(){throw ai()}get value(){throw ai()}get color(){throw ai()}get left(){throw ai()}get right(){throw ai()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Vo(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Go{constructor(e){this.comparator=e,this.data=new Bo(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new zo(this.data.getIterator())}getIteratorFrom(e){return new zo(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Go))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Go(this.comparator);return t.data=e,t}}class zo{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function $o(e){return e.hasNext()?e.getNext():void 0}class qo{constructor(e){this.fields=e,e.sort(Ai.comparator)}static empty(){return new qo([])}unionWith(e){let t=new Go(Ai.comparator);for(const e of this.fields)t=t.add(e);for(const n of e)t=t.add(n);return new qo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return xi(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Ho extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Wo{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Ho("Invalid base64 string: "+e):e}}(e);return new Wo(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Wo(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return wi(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wo.EMPTY_BYTE_STRING=new Wo("");const Ko=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xo(e){if(si(!!e),"string"==typeof e){let t=0;const n=Ko.exec(e);if(si(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Yo(e.seconds),nanos:Yo(e.nanos)}}function Yo(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Jo(e){return"string"==typeof e?Wo.fromBase64String(e):Wo.fromUint8Array(e)}function Qo(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Zo(e){const t=e.mapValue.fields.__previous_value__;return Qo(t)?Zo(t):t}function ea(e){const t=Xo(e.mapValue.fields.__local_write_time__.timestampValue);return new Ti(t.seconds,t.nanos)}class ta{constructor(e,t,n,r,i,o,a,s,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=s,this.useFetchStreams=l}}class na{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new na("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof na&&e.projectId===this.projectId&&e.database===this.database}}const ra={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ia={nullValue:"NULL_VALUE"};function oa(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Qo(e)?4:wa(e)?9007199254740991:va(e)?10:11:ai()}function aa(e,t){if(e===t)return!0;const n=oa(e);if(n!==oa(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ea(e).isEqual(ea(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Xo(e.timestampValue),r=Xo(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Jo(e.bytesValue).isEqual(Jo(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Yo(e.geoPointValue.latitude)===Yo(t.geoPointValue.latitude)&&Yo(e.geoPointValue.longitude)===Yo(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Yo(e.integerValue)===Yo(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Yo(e.doubleValue),r=Yo(t.doubleValue);return n===r?ro(n)===ro(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return xi(e.arrayValue.values||[],t.arrayValue.values||[],aa);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Do(n)!==Do(r))return!1;for(const e in n)if(n.hasOwnProperty(e)&&(void 0===r[e]||!aa(n[e],r[e])))return!1;return!0}(e,t);default:return ai()}}function sa(e,t){return void 0!==(e.values||[]).find((e=>aa(e,t)))}function la(e,t){if(e===t)return 0;const n=oa(e),r=oa(t);if(n!==r)return wi(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return wi(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Yo(e.integerValue||e.doubleValue),r=Yo(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ca(e.timestampValue,t.timestampValue);case 4:return ca(ea(e),ea(t));case 5:return wi(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Jo(e),r=Jo(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let e=0;e<n.length&&e<r.length;e++){const t=wi(n[e],r[e]);if(0!==t)return t}return wi(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=wi(Yo(e.latitude),Yo(t.latitude));return 0!==n?n:wi(Yo(e.longitude),Yo(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return ua(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,o;const a=e.fields||{},s=t.fields||{},l=null===(n=a.value)||void 0===n?void 0:n.arrayValue,c=null===(r=s.value)||void 0===r?void 0:r.arrayValue,u=wi((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(o=null==c?void 0:c.values)||void 0===o?void 0:o.length)||0);return 0!==u?u:ua(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===ra.mapValue&&t===ra.mapValue)return 0;if(e===ra.mapValue)return 1;if(t===ra.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let e=0;e<r.length&&e<o.length;++e){const t=wi(r[e],o[e]);if(0!==t)return t;const a=la(n[r[e]],i[o[e]]);if(0!==a)return a}return wi(r.length,o.length)}(e.mapValue,t.mapValue);default:throw ai()}}function ca(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return wi(e,t);const n=Xo(e),r=Xo(t),i=wi(n.seconds,r.seconds);return 0!==i?i:wi(n.nanos,r.nanos)}function ua(e,t){const n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){const t=la(n[e],r[e]);if(t)return t}return wi(n.length,r.length)}function pa(e){return da(e)}function da(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Xo(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Jo(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Ci.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=da(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${da(e.fields[i])}`;return n+"}"}(e.mapValue):ai()}function ha(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function ma(e){return!!e&&"integerValue"in e}function fa(e){return!!e&&"arrayValue"in e}function ga(e){return!!e&&"nullValue"in e}function ya(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function _a(e){return!!e&&"mapValue"in e}function va(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ba(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Lo(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=ba(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ba(e.arrayValue.values[n]);return t}return Object.assign({},e)}function wa(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}const xa={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Sa(e){return"nullValue"in e?ia:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?ha(na.empty(),Ci.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?va(e)?xa:{mapValue:{}}:ai()}function Ta(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?ha(na.empty(),Ci.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?xa:"mapValue"in e?va(e)?{mapValue:{}}:ra:ai()}function Ea(e,t){const n=la(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Ia(e,t){const n=la(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class ka{constructor(e){this.value=e}static empty(){return new ka({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!_a(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ba(t)}setAll(e){let t=Ai.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=ba(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());_a(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return aa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];_a(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Lo(t,((t,n)=>e[t]=n));for(const t of n)delete e[t]}clone(){return new ka(ba(this.value))}}function ja(e){const t=[];return Lo(e.fields,((e,n)=>{const r=new Ai([e]);if(_a(n)){const e=ja(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new qo(t)}class Aa{constructor(e,t,n,r,i,o,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Aa(e,0,Ei.min(),Ei.min(),Ei.min(),ka.empty(),0)}static newFoundDocument(e,t,n,r){return new Aa(e,1,t,Ei.min(),n,r,0)}static newNoDocument(e,t){return new Aa(e,2,t,Ei.min(),Ei.min(),ka.empty(),0)}static newUnknownDocument(e,t){return new Aa(e,3,t,Ei.min(),Ei.min(),ka.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ei.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ka.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ka.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ei.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Aa&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Aa(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ca{constructor(e,t){this.position=e,this.inclusive=t}}function Oa(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],a=e.position[i];if(r=o.field.isKeyField()?Ci.comparator(Ci.fromName(a.referenceValue),n.key):la(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function Ma(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!aa(e.position[n],t.position[n]))return!1;return!0}class Na{constructor(e,t="asc"){this.field=e,this.dir=t}}function Ra(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Pa{}class Da extends Pa{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Ha(e,t,n):"array-contains"===t?new Ya(e,n):"in"===t?new Ja(e,n):"not-in"===t?new Qa(e,n):"array-contains-any"===t?new Za(e,n):new Da(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Wa(e,n):new Ka(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(la(t,this.value)):null!==t&&oa(this.value)===oa(t)&&this.matchesComparison(la(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ai()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class La extends Pa{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new La(e,t)}matches(e){return Fa(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Fa(e){return"and"===e.op}function Ba(e){return"or"===e.op}function Ua(e){return Va(e)&&Fa(e)}function Va(e){for(const t of e.filters)if(t instanceof La)return!1;return!0}function Ga(e){if(e instanceof Da)return e.field.canonicalString()+e.op.toString()+pa(e.value);if(Ua(e))return e.filters.map((e=>Ga(e))).join(",");{const t=e.filters.map((e=>Ga(e))).join(",");return`${e.op}(${t})`}}function za(e,t){return e instanceof Da?function(e,t){return t instanceof Da&&e.op===t.op&&e.field.isEqual(t.field)&&aa(e.value,t.value)}(e,t):e instanceof La?function(e,t){return t instanceof La&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&za(n,t.filters[r])),!0)}(e,t):void ai()}function $a(e,t){const n=e.filters.concat(t);return La.create(n,e.op)}function qa(e){return e instanceof Da?function(e){return`${e.field.canonicalString()} ${e.op} ${pa(e.value)}`}(e):e instanceof La?function(e){return e.op.toString()+" {"+e.getFilters().map(qa).join(" ,")+"}"}(e):"Filter"}class Ha extends Da{constructor(e,t,n){super(e,t,n),this.key=Ci.fromName(n.referenceValue)}matches(e){const t=Ci.comparator(e.key,this.key);return this.matchesComparison(t)}}class Wa extends Da{constructor(e,t){super(e,"in",t),this.keys=Xa(0,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Ka extends Da{constructor(e,t){super(e,"not-in",t),this.keys=Xa(0,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Xa(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Ci.fromName(e.referenceValue)))}class Ya extends Da{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return fa(t)&&sa(t.arrayValue,this.value)}}class Ja extends Da{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&sa(this.value.arrayValue,t)}}class Qa extends Da{constructor(e,t){super(e,"not-in",t)}matches(e){if(sa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!sa(this.value.arrayValue,t)}}class Za extends Da{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!fa(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>sa(this.value.arrayValue,e)))}}class es{constructor(e,t=null,n=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function ts(e,t=null,n=[],r=[],i=null,o=null,a=null){return new es(e,t,n,r,i,o,a)}function ns(e){const t=li(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Ga(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),no(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>pa(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>pa(e))).join(",")),t.ue=e}return t.ue}function rs(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Ra(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!za(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ma(e.startAt,t.startAt)&&Ma(e.endAt,t.endAt)}function is(e){return Ci.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function os(e,t){return e.filters.filter((e=>e instanceof Da&&e.field.isEqual(t)))}function as(e,t,n){let r=ia,i=!0;for(const n of os(e,t)){let e=ia,t=!0;switch(n.op){case"<":case"<=":e=Sa(n.value);break;case"==":case"in":case">=":e=n.value;break;case">":e=n.value,t=!1;break;case"!=":case"not-in":e=ia}Ea({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];Ea({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function ss(e,t,n){let r=ra,i=!0;for(const n of os(e,t)){let e=ra,t=!0;switch(n.op){case">=":case">":e=Ta(n.value),t=!1;break;case"==":case"in":case"<=":e=n.value;break;case"<":e=n.value,t=!1;break;case"!=":case"not-in":e=ra}Ia({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];Ia({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class ls{constructor(e,t=null,n=[],r=[],i=null,o="F",a=null,s=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function cs(e){return new ls(e)}function us(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function ps(e){return null!==e.collectionGroup}function ds(e){const t=li(e);if(null===t.ce){t.ce=[];const e=new Set;for(const n of t.explicitOrderBy)t.ce.push(n),e.add(n.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Go(Ai.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new Na(r,n))})),e.has(Ai.keyField().canonicalString())||t.ce.push(new Na(Ai.keyField(),n))}return t.ce}function hs(e){const t=li(e);return t.le||(t.le=function(e,t){if("F"===e.limitType)return ts(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Na(e.field,t)}));const n=e.endAt?new Ca(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Ca(e.startAt.position,e.startAt.inclusive):null;return ts(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}(t,ds(e))),t.le}function ms(e,t){const n=e.filters.concat([t]);return new ls(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function fs(e,t,n){return new ls(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function gs(e,t){return rs(hs(e),hs(t))&&e.limitType===t.limitType}function ys(e){return`${ns(hs(e))}|lt:${e.limitType}`}function _s(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>qa(e))).join(", ")}]`),no(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>pa(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>pa(e))).join(",")),`Target(${t})`}(hs(e))}; limitType=${e.limitType})`}function vs(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ci.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of ds(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Oa(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,ds(e),t)||e.endAt&&!function(e,t,n){const r=Oa(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,ds(e),t))}(e,t)}function bs(e){return(t,n)=>{let r=!1;for(const i of ds(e)){const e=ws(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function ws(e,t,n){const r=e.field.isKeyField()?Ci.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?la(r,i):ai()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ai()}}class xs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[t,r]of n)if(this.equalsFn(t,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Lo(this.inner,((t,n)=>{for(const[t,r]of n)e(t,r)}))}isEmpty(){return Fo(this.inner)}size(){return this.innerSize}}const Ss=new Bo(Ci.comparator);function Ts(){return Ss}const Es=new Bo(Ci.comparator);function Is(...e){let t=Es;for(const n of e)t=t.insert(n.key,n);return t}function ks(e){let t=Es;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function js(){return Cs()}function As(){return Cs()}function Cs(){return new xs((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Os=new Bo(Ci.comparator),Ms=new Go(Ci.comparator);function Ns(...e){let t=Ms;for(const n of e)t=t.add(n);return t}const Rs=new Go(wi);function Ps(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ro(t)?"-0":t}}function Ds(e){return{integerValue:""+e}}function Ls(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!ro(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}(t)?Ds(t):Ps(e,t)}class Fs{constructor(){this._=void 0}}function Bs(e,t,n){return e instanceof Gs?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Qo(t)&&(t=Zo(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof zs?$s(e,t):e instanceof qs?Hs(e,t):function(e,t){const n=Vs(e,t),r=Ks(n)+Ks(e.Pe);return ma(n)&&ma(e.Pe)?Ds(r):Ps(e.serializer,r)}(e,t)}function Us(e,t,n){return e instanceof zs?$s(e,t):e instanceof qs?Hs(e,t):n}function Vs(e,t){return e instanceof Ws?function(e){return ma(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Gs extends Fs{}class zs extends Fs{constructor(e){super(),this.elements=e}}function $s(e,t){const n=Xs(t);for(const t of e.elements)n.some((e=>aa(e,t)))||n.push(t);return{arrayValue:{values:n}}}class qs extends Fs{constructor(e){super(),this.elements=e}}function Hs(e,t){let n=Xs(t);for(const t of e.elements)n=n.filter((e=>!aa(e,t)));return{arrayValue:{values:n}}}class Ws extends Fs{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Ks(e){return Yo(e.integerValue||e.doubleValue)}function Xs(e){return fa(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Ys{constructor(e,t){this.field=e,this.transform=t}}class Js{constructor(e,t){this.version=e,this.transformResults=t}}class Qs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Qs}static exists(e){return new Qs(void 0,e)}static updateTime(e){return new Qs(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zs(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class el{}function tl(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new pl(e.key,Qs.none()):new al(e.key,e.data,Qs.none());{const n=e.data,r=ka.empty();let i=new Go(Ai.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new sl(e.key,r,new qo(i.toArray()),Qs.none())}}function nl(e,t,n){e instanceof al?function(e,t,n){const r=e.value.clone(),i=cl(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof sl?function(e,t,n){if(!Zs(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=cl(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(ll(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function rl(e,t,n,r){return e instanceof al?function(e,t,n,r){if(!Zs(e.precondition,t))return n;const i=e.value.clone(),o=ul(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof sl?function(e,t,n,r){if(!Zs(e.precondition,t))return n;const i=ul(e.fieldTransforms,r,t),o=t.data;return o.setAll(ll(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Zs(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function il(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Vs(r.transform,e||null);null!=i&&(null===n&&(n=ka.empty()),n.set(r.field,i))}return n||null}function ol(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&xi(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof zs&&t instanceof zs||e instanceof qs&&t instanceof qs?xi(e.elements,t.elements,aa):e instanceof Ws&&t instanceof Ws?aa(e.Pe,t.Pe):e instanceof Gs&&t instanceof Gs}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class al extends el{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class sl extends el{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ll(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function cl(e,t,n){const r=new Map;si(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],a=o.transform,s=t.data.field(o.field);r.set(o.field,Us(a,s,n[i]))}return r}function ul(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,Bs(e,o,t))}return r}class pl extends el{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dl extends el{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class hl{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){const r=this.mutations[t];r.key.isEqual(e.key)&&nl(r,e,n[t])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=rl(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=rl(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=As();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=t.has(r.key)?null:a;const s=tl(o,a);null!==s&&n.set(r.key,s),o.isValidDocument()||o.convertToNoDocument(Ei.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ns())}isEqual(e){return this.batchId===e.batchId&&xi(this.mutations,e.mutations,((e,t)=>ol(e,t)))&&xi(this.baseMutations,e.baseMutations,((e,t)=>ol(e,t)))}}class ml{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){si(e.mutations.length===n.length);let r=Os;const i=e.mutations;for(let e=0;e<i.length;e++)r=r.insert(i[e].key,n[e].version);return new ml(e,t,n,r)}}class fl{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class gl{constructor(e,t){this.count=e,this.unchangedNames=t}}var yl,_l;function vl(e){if(void 0===e)return ri("GRPC error has no .code"),ci.UNKNOWN;switch(e){case yl.OK:return ci.OK;case yl.CANCELLED:return ci.CANCELLED;case yl.UNKNOWN:return ci.UNKNOWN;case yl.DEADLINE_EXCEEDED:return ci.DEADLINE_EXCEEDED;case yl.RESOURCE_EXHAUSTED:return ci.RESOURCE_EXHAUSTED;case yl.INTERNAL:return ci.INTERNAL;case yl.UNAVAILABLE:return ci.UNAVAILABLE;case yl.UNAUTHENTICATED:return ci.UNAUTHENTICATED;case yl.INVALID_ARGUMENT:return ci.INVALID_ARGUMENT;case yl.NOT_FOUND:return ci.NOT_FOUND;case yl.ALREADY_EXISTS:return ci.ALREADY_EXISTS;case yl.PERMISSION_DENIED:return ci.PERMISSION_DENIED;case yl.FAILED_PRECONDITION:return ci.FAILED_PRECONDITION;case yl.ABORTED:return ci.ABORTED;case yl.OUT_OF_RANGE:return ci.OUT_OF_RANGE;case yl.UNIMPLEMENTED:return ci.UNIMPLEMENTED;case yl.DATA_LOSS:return ci.DATA_LOSS;default:return ai()}}(_l=yl||(yl={}))[_l.OK=0]="OK",_l[_l.CANCELLED=1]="CANCELLED",_l[_l.UNKNOWN=2]="UNKNOWN",_l[_l.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_l[_l.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_l[_l.NOT_FOUND=5]="NOT_FOUND",_l[_l.ALREADY_EXISTS=6]="ALREADY_EXISTS",_l[_l.PERMISSION_DENIED=7]="PERMISSION_DENIED",_l[_l.UNAUTHENTICATED=16]="UNAUTHENTICATED",_l[_l.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_l[_l.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_l[_l.ABORTED=10]="ABORTED",_l[_l.OUT_OF_RANGE=11]="OUT_OF_RANGE",_l[_l.UNIMPLEMENTED=12]="UNIMPLEMENTED",_l[_l.INTERNAL=13]="INTERNAL",_l[_l.UNAVAILABLE=14]="UNAVAILABLE",_l[_l.DATA_LOSS=15]="DATA_LOSS";const bl=new Lr([4294967295,4294967295],0);function wl(e){const t=(new TextEncoder).encode(e),n=new Fr;return n.update(t),new Uint8Array(n.digest())}function xl(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Lr([n,r],0),new Lr([i,o],0)]}class Sl{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Tl(`Invalid padding: ${t}`);if(n<0)throw new Tl(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Tl(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Tl(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Lr.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(Lr.fromNumber(n)));return 1===r.compare(bl)&&(r=new Lr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=wl(e),[n,r]=xl(t);for(let e=0;e<this.hashCount;e++){const t=this.Ee(n,r,e);if(!this.de(t))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Sl(i,r,t);return n.forEach((e=>o.insert(e))),o}insert(e){if(0===this.Ie)return;const t=wl(e),[n,r]=xl(t);for(let e=0;e<this.hashCount;e++){const t=this.Ee(n,r,e);this.Ae(t)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Tl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class El{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Il.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new El(Ei.min(),r,new Bo(wi),Ts(),Ns())}}class Il{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Il(n,t,Ns(),Ns(),Ns())}}class kl{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class jl{constructor(e,t){this.targetId=e,this.me=t}}class Al{constructor(e,t,n=Wo.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Cl{constructor(){this.fe=0,this.ge=Nl(),this.pe=Wo.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ns(),t=Ns(),n=Ns();return this.ge.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ai()}})),new Il(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=Nl()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,si(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Ol{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ts(),this.qe=Ml(),this.Qe=new Bo(wi)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:ai()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.ze(n)&&t(n)}))}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(is(i))if(0===n){const e=new Ci(i.path);this.Ue(t,e,Aa.newNoDocument(e,Ei.min()))}else si(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,a;try{o=Jo(n).toUint8Array()}catch(e){if(e instanceof Ho)return ii("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new Sl(o,r,i)}catch(e){return ii(e instanceof Tl?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.Ie?null:a}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.tt(),o=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(o)||(this.Ue(t,n,null),r++)})),r}rt(e){const t=new Map;this.Be.forEach(((n,r)=>{const i=this.Je(r);if(i){if(n.current&&is(i.target)){const t=new Ci(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,Aa.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}}));let n=Ns();this.qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const r=new El(e,t,this.Qe,this.ke,n);return this.ke=Ts(),this.qe=Ml(),this.Qe=new Bo(wi),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Cl,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Go(wi),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||ni("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Cl),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Ml(){return new Bo(Ci.comparator)}function Nl(){return new Bo(Ci.comparator)}const Rl={asc:"ASCENDING",desc:"DESCENDING"},Pl={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Dl={and:"AND",or:"OR"};class Ll{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Fl(e,t){return e.useProto3Json||no(t)?t:{value:t}}function Bl(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ul(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Vl(e,t){return Bl(e,t.toTimestamp())}function Gl(e){return si(!!e),Ei.fromTimestamp(function(e){const t=Xo(e);return new Ti(t.seconds,t.nanos)}(e))}function zl(e,t){return $l(e,t).canonicalString()}function $l(e,t){const n=function(e){return new ki(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function ql(e){const t=ki.fromString(e);return si(dc(t)),t}function Hl(e,t){return zl(e.databaseId,t.path)}function Wl(e,t){const n=ql(t);if(n.get(1)!==e.databaseId.projectId)throw new ui(ci.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ui(ci.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ci(Jl(n))}function Kl(e,t){return zl(e.databaseId,t)}function Xl(e){const t=ql(e);return 4===t.length?ki.emptyPath():Jl(t)}function Yl(e){return new ki(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Jl(e){return si(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Ql(e,t,n){return{name:Hl(e,t),fields:n.value.mapValue.fields}}function Zl(e,t){let n;if(t instanceof al)n={update:Ql(e,t.key,t.value)};else if(t instanceof pl)n={delete:Hl(e,t.key)};else if(t instanceof sl)n={update:Ql(e,t.key,t.data),updateMask:pc(t.fieldMask)};else{if(!(t instanceof dl))return ai();n={verify:Hl(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Gs)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof zs)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof qs)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ws)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw ai()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Vl(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ai()}(e,t.precondition)),n}function ec(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Qs.updateTime(Gl(e.updateTime)):void 0!==e.exists?Qs.exists(e.exists):Qs.none()}(t.currentDocument):Qs.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)si("REQUEST_TIME"===t.setToServerValue),n=new Gs;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new zs(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new qs(e)}else"increment"in t?n=new Ws(e,t.increment):ai();const r=Ai.fromServerFormat(t.fieldPath);return new Ys(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Wl(e,t.update.name),o=new ka({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new qo(t.map((e=>Ai.fromServerFormat(e))))}(t.updateMask);return new sl(i,o,e,n,r)}return new al(i,o,n,r)}if(t.delete){const r=Wl(e,t.delete);return new pl(r,n)}if(t.verify){const r=Wl(e,t.verify);return new dl(r,n)}return ai()}function tc(e,t){return{documents:[Kl(e,t.path)]}}function nc(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Kl(e,i);const o=function(e){if(0!==e.length)return uc(La.create(e,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const a=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:lc(e.field),direction:oc(e.dir)}}(e)))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const s=Fl(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function rc(e){let t=Xl(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){si(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=ic(e);return t instanceof La&&Ua(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map((e=>function(e){return new Na(cc(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t="object"==typeof e?e.value:e,no(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Ca(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Ca(n,t)}(n.endAt)),function(e,t,n,r,i,o,a,s){return new ls(e,t,n,r,i,o,a,s)}(t,i,a,o,s,"F",l,c)}function ic(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=cc(e.unaryFilter.field);return Da.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=cc(e.unaryFilter.field);return Da.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=cc(e.unaryFilter.field);return Da.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=cc(e.unaryFilter.field);return Da.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ai()}}(e):void 0!==e.fieldFilter?function(e){return Da.create(cc(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ai()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return La.create(e.compositeFilter.filters.map((e=>ic(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return ai()}}(e.compositeFilter.op))}(e):ai()}function oc(e){return Rl[e]}function ac(e){return Pl[e]}function sc(e){return Dl[e]}function lc(e){return{fieldPath:e.canonicalString()}}function cc(e){return Ai.fromServerFormat(e.fieldPath)}function uc(e){return e instanceof Da?function(e){if("=="===e.op){if(ya(e.value))return{unaryFilter:{field:lc(e.field),op:"IS_NAN"}};if(ga(e.value))return{unaryFilter:{field:lc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ya(e.value))return{unaryFilter:{field:lc(e.field),op:"IS_NOT_NAN"}};if(ga(e.value))return{unaryFilter:{field:lc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:lc(e.field),op:ac(e.op),value:e.value}}}(e):e instanceof La?function(e){const t=e.getFilters().map((e=>uc(e)));return 1===t.length?t[0]:{compositeFilter:{op:sc(e.op),filters:t}}}(e):ai()}function pc(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function dc(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class hc{constructor(e,t,n,r,i=Ei.min(),o=Ei.min(),a=Wo.EMPTY_BYTE_STRING,s=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=s}withSequenceNumber(e){return new hc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new hc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class mc{constructor(e){this.ct=e}}function fc(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:gc(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Hl(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Bl(e,t.version.toTimestamp()),createTime:Bl(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:yc(t.version)};else{if(!t.isUnknownDocument())return ai();r.unknownDocument={path:n.path.toArray(),version:yc(t.version)}}return r}function gc(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function yc(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function _c(e){const t=new Ti(e.seconds,e.nanoseconds);return Ei.fromTimestamp(t)}function vc(e,t){const n=(t.baseMutations||[]).map((t=>ec(e.ct,t)));for(let e=0;e<t.mutations.length-1;++e){const n=t.mutations[e];if(e+1<t.mutations.length&&void 0!==t.mutations[e+1].transform){const r=t.mutations[e+1];n.updateTransforms=r.transform.fieldTransforms,t.mutations.splice(e+1,1),++e}}const r=t.mutations.map((t=>ec(e.ct,t))),i=Ti.fromMillis(t.localWriteTimeMs);return new hl(t.batchId,i,n,r)}function bc(e){const t=_c(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?_c(e.lastLimboFreeSnapshotVersion):Ei.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return si(1===e.documents.length),hs(cs(Xl(e.documents[0])))}(e.query):function(e){return hs(rc(e))}(e.query),new hc(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Wo.fromBase64String(e.resumeToken))}function wc(e,t){const n=yc(t.snapshotVersion),r=yc(t.lastLimboFreeSnapshotVersion);let i;i=is(t.target)?tc(e.ct,t.target):nc(e.ct,t.target)._t;const o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:ns(t.target),readTime:n,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function xc(e){const t=rc({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?fs(t,t.limit,"L"):t}function Sc(e,t){return new fl(t.largestBatchId,ec(e.ct,t.overlayMutation))}function Tc(e,t){const n=t.path.lastSegment();return[e,io(t.path.popLast()),n]}function Ec(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:yc(r.readTime),documentKey:io(r.documentKey.path),largestBatchId:r.largestBatchId}}class Ic{getBundleMetadata(e,t){return kc(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:_c(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return kc(e).put(function(e){return{bundleId:e.id,createTime:yc(Gl(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return jc(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:xc(e.bundledQuery),readTime:_c(e.readTime)}}(e)}))}saveNamedQuery(e,t){return jc(e).put(function(e){return{name:e.name,readTime:yc(Gl(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function kc(e){return Po(e,"bundles")}function jc(e){return Po(e,"namedQueries")}class Ac{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new Ac(e,n)}getOverlay(e,t){return Cc(e).get(Tc(this.userId,t)).next((e=>e?Sc(this.serializer,e):null))}getOverlays(e,t){const n=js();return Gi.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const o=new fl(t,i);r.push(this.ht(e,o))})),Gi.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(io(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(Cc(e).j("collectionPathOverlayIndex",r))})),Gi.waitFor(i)}getOverlaysForCollection(e,t,n){const r=js(),i=io(t),o=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Cc(e).U("collectionPathOverlayIndex",o).next((e=>{for(const t of e){const e=Sc(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=js();let o;const a=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Cc(e).J({index:"collectionGroupOverlayIndex",range:a},((e,t,n)=>{const a=Sc(this.serializer,t);i.size()<r||a.largestBatchId===o?(i.set(a.getKey(),a),o=a.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return Cc(e).put(function(e,t,n){const[r,i,o]=Tc(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:o,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Zl(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function Cc(e){return Po(e,"documentOverlays")}class Oc{Pt(e){return Po(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next((e=>{const t=null==e?void 0:e.value;return t?Wo.fromUint8Array(t):Wo.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class Mc{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Yo(e.integerValue));else if("doubleValue"in e){const n=Yo(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),ro(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=Xo(n)),t.Rt(`${n.seconds||""}`),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Jo(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?wa(e)?this.dt(t,Number.MAX_SAFE_INTEGER):va(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):ai()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const e of Object.keys(n))this.Vt(e,t),this.Tt(n[e],t)}wt(e,t){var n,r;const i=e.fields||{};this.dt(t,53);const o="value",a=(null===(r=null===(n=i[o].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(Yo(a)),this.Vt(o,t),this.Tt(i[o],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const e of n)this.Tt(e,t)}yt(e,t){this.dt(t,37),Ci.fromName(e).path.forEach((e=>{this.dt(t,60),this.Dt(e,t)}))}dt(e,t){e.At(t)}ft(e){e.At(2)}}function Nc(e){if(0===e)return 8;let t=0;return!(e>>4)&&(t+=4,e<<=4),!(e>>6)&&(t+=2,e<<=2),!(e>>7)&&(t+=1),t}function Rc(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=Nc(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Mc.vt=new Mc;class Pc{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ft(n.value),n=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ot(n.value),n=t.next();this.Nt()}Lt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ft(e);else if(e<2048)this.Ft(960|e>>>6),this.Ft(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e);else{const e=t.codePointAt(0);this.Ft(240|e>>>18),this.Ft(128|63&e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e)}}this.Mt()}Bt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ot(e);else if(e<2048)this.Ot(960|e>>>6),this.Ot(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ot(480|e>>>12),this.Ot(128|63&e>>>6),this.Ot(128|63&e);else{const e=t.codePointAt(0);this.Ot(240|e>>>18),this.Ot(128|63&e>>>12),this.Ot(128|63&e>>>6),this.Ot(128|63&e)}}this.Nt()}kt(e){const t=this.qt(e),n=Rc(t);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let e=t.length-n;e<t.length;++e)this.buffer[this.position++]=255&t[e]}Kt(e){const t=this.qt(e),n=Rc(t);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let e=t.length-n;e<t.length;++e)this.buffer[this.position++]=~(255&t[e])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let e=1;e<t.length;++e)t[e]^=n?255:0;return t}Ft(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Dc{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class Lc{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Fc{constructor(){this.jt=new Pc,this.Ht=new Dc(this.jt),this.Jt=new Lc(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return 0===e?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class Bc{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Zt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Bc(this.indexId,this.documentKey,this.arrayValue,n)}}function Uc(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=Vc(e.arrayValue,t.arrayValue),0!==n?n:(n=Vc(e.directionalValue,t.directionalValue),0!==n?n:Ci.comparator(e.documentKey,t.documentKey)))}function Vc(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class Gc{constructor(e){this.Xt=new Go(((e,t)=>Ai.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const e=t;e.isInequality()?this.Xt=this.Xt.add(e):this.tn.push(e)}}get nn(){return this.Xt.size>1}rn(e){if(si(e.collectionGroup===this.collectionId),this.nn)return!1;const t=Mi(e);if(void 0!==t&&!this.sn(t))return!1;const n=Ni(e);let r=new Set,i=0,o=0;for(;i<n.length&&this.sn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Xt.size>0){const e=this.Xt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.on(e,t)||!this._n(this.en[o++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(o>=this.en.length||!this._n(this.en[o++],e))return!1}return!0}an(){if(this.nn)return null;let e=new Go(Ai.comparator);const t=[];for(const n of this.tn)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new Ri(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Ri(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Ri(n.field,"asc"===n.dir?0:1)));return new Oi(Oi.UNKNOWN_ID,this.collectionId,t,Pi.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function zc(e){var t,n;if(si(e instanceof Da||e instanceof La),e instanceof Da){if(e instanceof Ja){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>Da.create(e.field,"==",t))))||[];return La.create(r,"or")}return e}const r=e.filters.map((e=>zc(e)));return La.create(r,e.op)}function $c(e){if(0===e.getFilters().length)return[];const t=Kc(zc(e));return si(Wc(t)),qc(t)||Hc(t)?[t]:t.getFilters()}function qc(e){return e instanceof Da}function Hc(e){return e instanceof La&&Ua(e)}function Wc(e){return qc(e)||Hc(e)||function(e){if(e instanceof La&&Ba(e)){for(const t of e.getFilters())if(!qc(t)&&!Hc(t))return!1;return!0}return!1}(e)}function Kc(e){if(si(e instanceof Da||e instanceof La),e instanceof Da)return e;if(1===e.filters.length)return Kc(e.filters[0]);const t=e.filters.map((e=>Kc(e)));let n=La.create(t,e.op);return n=Jc(n),Wc(n)?n:(si(n instanceof La),si(Fa(n)),si(n.filters.length>1),n.filters.reduce(((e,t)=>Xc(e,t))))}function Xc(e,t){let n;return si(e instanceof Da||e instanceof La),si(t instanceof Da||t instanceof La),n=e instanceof Da?t instanceof Da?function(e,t){return La.create([e,t],"and")}(e,t):Yc(e,t):t instanceof Da?Yc(t,e):function(e,t){if(si(e.filters.length>0&&t.filters.length>0),Fa(e)&&Fa(t))return $a(e,t.getFilters());const n=Ba(e)?e:t,r=Ba(e)?t:e,i=n.filters.map((e=>Xc(e,r)));return La.create(i,"or")}(e,t),Jc(n)}function Yc(e,t){if(Fa(t))return $a(t,e.getFilters());{const n=t.filters.map((t=>Xc(e,t)));return La.create(n,"or")}}function Jc(e){if(si(e instanceof Da||e instanceof La),e instanceof Da)return e;const t=e.getFilters();if(1===t.length)return Jc(t[0]);if(Va(e))return e;const n=t.map((e=>Jc(e))),r=[];return n.forEach((t=>{t instanceof Da?r.push(t):t instanceof La&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:La.create(r,e.op)}class Qc{constructor(){this.un=new Zc}addToCollectionParentIndex(e,t){return this.un.add(t),Gi.resolve()}getCollectionParents(e,t){return Gi.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return Gi.resolve()}deleteFieldIndex(e,t){return Gi.resolve()}deleteAllFieldIndexes(e){return Gi.resolve()}createTargetIndexes(e,t){return Gi.resolve()}getDocumentsMatchingTarget(e,t){return Gi.resolve(null)}getIndexType(e,t){return Gi.resolve(0)}getFieldIndexes(e,t){return Gi.resolve([])}getNextCollectionGroupToUpdate(e){return Gi.resolve(null)}getMinOffset(e,t){return Gi.resolve(Li.min())}getMinOffsetFromCollectionGroup(e,t){return Gi.resolve(Li.min())}updateCollectionGroup(e,t,n){return Gi.resolve()}updateIndexEntries(e,t){return Gi.resolve()}}class Zc{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Go(ki.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Go(ki.comparator)).toArray()}}const eu=new Uint8Array(0);class tu{constructor(e,t){this.databaseId=t,this.cn=new Zc,this.ln=new xs((e=>ns(e)),((e,t)=>rs(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.cn.add(t)}));const i={collectionId:n,parent:io(r)};return nu(e).put(i)}return Gi.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Si(t),""],!1,!0);return nu(e).U(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(so(r.parent))}return n}))}addFieldIndex(e,t){const n=iu(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=ou(e);return i.next((e=>{n.put(Ec(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=iu(e),r=ou(e),i=ru(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=iu(e),n=ru(e),r=ou(e);return t.j().next((()=>n.j())).next((()=>r.j()))}createTargetIndexes(e,t){return Gi.forEach(this.hn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new Gc(t).an();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=ru(e);let r=!0;const i=new Map;return Gi.forEach(this.hn(t),(t=>this.Pn(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=Ns();const r=[];return Gi.forEach(i,((i,o)=>{ni("IndexedDbIndexManager",`Using index ${function(e){return`id=${e.indexId}|cg=${e.collectionGroup}|f=${e.fields.map((e=>`${e.fieldPath}:${e.kind}`)).join(",")}`}(i)} to execute ${ns(t)}`);const a=function(e,t){const n=Mi(t);if(void 0===n)return null;for(const t of os(e,n.fieldPath))switch(t.op){case"array-contains-any":return t.value.arrayValue.values||[];case"array-contains":return[t.value]}return null}(o,i),s=function(e,t){const n=new Map;for(const r of Ni(t))for(const t of os(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(o,i),l=function(e,t){const n=[];let r=!0;for(const i of Ni(t)){const t=0===i.kind?as(e,i.fieldPath,e.startAt):ss(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Ca(n,r)}(o,i),c=function(e,t){const n=[];let r=!0;for(const i of Ni(t)){const t=0===i.kind?ss(e,i.fieldPath,e.endAt):as(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Ca(n,r)}(o,i),u=this.In(i,o,l),p=this.In(i,o,c),d=this.Tn(i,o,s),h=this.En(i.indexId,a,u,l.inclusive,p,c.inclusive,d);return Gi.forEach(h,(i=>n.G(i,t.limit).next((t=>{t.forEach((t=>{const n=Ci.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return Gi.resolve(null)}))}hn(e){let t=this.ln.get(e);return t||(t=0===e.filters.length?[e]:$c(La.create(e.filters,"and")).map((t=>ts(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.ln.set(e,t),t)}En(e,t,n,r,i,o,a){const s=(null!=t?t.length:1)*Math.max(n.length,i.length),l=s/(null!=t?t.length:1),c=[];for(let u=0;u<s;++u){const s=t?this.dn(t[u/l]):eu,p=this.An(e,s,n[u%l],r),d=this.Rn(e,s,i[u%l],o),h=a.map((t=>this.An(e,s,t,!0)));c.push(...this.createRange(p,d,h))}return c}An(e,t,n,r){const i=new Bc(e,Ci.empty(),t,n);return r?i:i.Zt()}Rn(e,t,n,r){const i=new Bc(e,Ci.empty(),t,n);return r?i.Zt():i}Pn(e,t){const n=new Gc(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.rn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.hn(t);return Gi.forEach(r,(t=>this.Pn(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new Go(Ai.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const n of e.orderBy)n.field.isKeyField()||(t=t.add(n.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}Vn(e,t){const n=new Fc;for(const r of Ni(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Yt(r.kind);Mc.vt.It(e,i)}return n.zt()}dn(e){const t=new Fc;return Mc.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const n=new Fc;return Mc.vt.It(ha(this.databaseId,t),n.Yt(function(e){const t=Ni(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.zt()}Tn(e,t,n){if(null===n)return[];let r=[];r.push(new Fc);let i=0;for(const o of Ni(e)){const e=n[i++];for(const n of r)if(this.fn(t,o.fieldPath)&&fa(e))r=this.gn(r,o,e);else{const t=n.Yt(o.kind);Mc.vt.It(e,t)}}return this.pn(r)}In(e,t,n){return this.Tn(e,t,n.position)}pn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].zt();return t}gn(e,t,n){const r=[...e],i=[];for(const e of n.arrayValue.values||[])for(const n of r){const r=new Fc;r.seed(n.zt()),Mc.vt.It(e,r.Yt(t.kind)),i.push(r)}return i}fn(e,t){return!!e.filters.find((e=>e instanceof Da&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=iu(e),r=ou(e);return(t?n.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.U()).next((e=>{const t=[];return Gi.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new Pi(t.sequenceNumber,new Li(_c(t.readTime),new Ci(so(t.documentKey)),t.largestBatchId)):Pi.empty(),r=e.fields.map((([e,t])=>new Ri(Ai.fromServerFormat(e),t)));return new Oi(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:wi(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=iu(e),i=ou(e);return this.yn(e).next((e=>r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>Gi.forEach(t,(t=>i.put(Ec(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return Gi.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?Gi.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),Gi.forEach(i,(n=>this.wn(e,t,n).next((t=>{const i=this.Sn(r,n);return t.isEqual(i)?Gi.resolve():this.bn(e,r,n,t,i)})))))))}))}Dn(e,t,n,r){return ru(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.mn(n,t.key),documentKey:t.key.path.toArray()})}vn(e,t,n,r){return ru(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.mn(n,t.key),t.key.path.toArray()])}wn(e,t,n){const r=ru(e);let i=new Go(Uc);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,t)])},((e,r)=>{i=i.add(new Bc(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}Sn(e,t){let n=new Go(Uc);const r=this.Vn(t,e);if(null==r)return n;const i=Mi(t);if(null!=i){const o=e.data.field(i.fieldPath);if(fa(o))for(const i of o.arrayValue.values||[])n=n.add(new Bc(t.indexId,e.key,this.dn(i),r))}else n=n.add(new Bc(t.indexId,e.key,eu,r));return n}bn(e,t,n,r,i){ni("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(e,t,n,r,i){const o=e.getIterator(),a=t.getIterator();let s=$o(o),l=$o(a);for(;s||l;){let e=!1,t=!1;if(s&&l){const r=n(s,l);r<0?t=!0:r>0&&(e=!0)}else null!=s?t=!0:e=!0;e?(r(l),l=$o(a)):t?(i(s),s=$o(o)):(s=$o(o),l=$o(a))}}(r,i,Uc,(r=>{o.push(this.Dn(e,t,n,r))}),(r=>{o.push(this.vn(e,t,n,r))})),Gi.waitFor(o)}yn(e){let t=1;return ou(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>Uc(e,t))).filter(((e,t,n)=>!t||0!==Uc(e,n[t-1])));const r=[];r.push(e);for(const i of n){const n=Uc(i,e),o=Uc(i,t);if(0===n)r[0]=e.Zt();else if(n>0&&o<0)r.push(i),r.push(i.Zt());else if(o>0)break}r.push(t);const i=[];for(let e=0;e<r.length;e+=2){if(this.Cn(r[e],r[e+1]))return[];const t=[r[e].indexId,this.uid,r[e].arrayValue,r[e].directionalValue,eu,[]],n=[r[e+1].indexId,this.uid,r[e+1].arrayValue,r[e+1].directionalValue,eu,[]];i.push(IDBKeyRange.bound(t,n))}return i}Cn(e,t){return Uc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(au)}getMinOffset(e,t){return Gi.mapArray(this.hn(t),(t=>this.Pn(e,t).next((e=>e||ai())))).next(au)}}function nu(e){return Po(e,"collectionParents")}function ru(e){return Po(e,"indexEntries")}function iu(e){return Po(e,"indexConfiguration")}function ou(e){return Po(e,"indexState")}function au(e){si(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;Fi(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Li(t.readTime,t.documentKey,n)}const su={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class lu{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new lu(e,lu.DEFAULT_COLLECTION_PERCENTILE,lu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function cu(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),o=[],a=IDBKeyRange.only(n.batchId);let s=0;const l=r.J({range:a},((e,t,n)=>(s++,n.delete())));o.push(l.next((()=>{si(1===s)})));const c=[];for(const e of n.mutations){const r=uo(t,e.key.path,n.batchId);o.push(i.delete(r)),c.push(e.key)}return Gi.waitFor(o).next((()=>c))}function uu(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw ai();t=e.noDocument}return JSON.stringify(t).length}lu.DEFAULT_COLLECTION_PERCENTILE=10,lu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,lu.DEFAULT=new lu(41943040,lu.DEFAULT_COLLECTION_PERCENTILE,lu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),lu.DISABLED=new lu(-1,0,0);class pu{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Fn={}}static lt(e,t,n,r){si(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new pu(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return hu(e).J({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=mu(e),o=hu(e);return o.add({}).next((a=>{si("number"==typeof a);const s=new hl(a,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>Zl(e.ct,t))),i=n.mutations.map((t=>Zl(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,s),c=[];let u=new Go(((e,t)=>wi(e.canonicalString(),t.canonicalString())));for(const e of r){const t=uo(this.userId,e.key.path,a);u=u.add(e.key.path.popLast()),c.push(o.put(l)),c.push(i.put(t,po))}return u.forEach((t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Fn[a]=s.keys()})),Gi.waitFor(c).next((()=>s))}))}lookupMutationBatch(e,t){return hu(e).get(t).next((e=>e?(si(e.userId===this.userId),vc(this.serializer,e)):null))}Mn(e,t){return this.Fn[t]?Gi.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Fn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return hu(e).J({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(si(t.batchId>=n),i=vc(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return hu(e).J({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return hu(e).U("userMutationsIndex",t).next((e=>e.map((e=>vc(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=co(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return mu(e).J({range:r},((n,r,o)=>{const[a,s,l]=n,c=so(s);if(a===this.userId&&t.path.isEqual(c))return hu(e).get(l).next((e=>{if(!e)throw ai();si(e.userId===this.userId),i.push(vc(this.serializer,e))}));o.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Go(wi);const r=[];return t.forEach((t=>{const i=co(this.userId,t.path),o=IDBKeyRange.lowerBound(i),a=mu(e).J({range:o},((e,r,i)=>{const[o,a,s]=e,l=so(a);o===this.userId&&t.path.isEqual(l)?n=n.add(s):i.done()}));r.push(a)})),Gi.waitFor(r).next((()=>this.xn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=co(this.userId,n),o=IDBKeyRange.lowerBound(i);let a=new Go(wi);return mu(e).J({range:o},((e,t,i)=>{const[o,s,l]=e,c=so(s);o===this.userId&&n.isPrefixOf(c)?c.length===r&&(a=a.add(l)):i.done()})).next((()=>this.xn(e,a)))}xn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(hu(e).get(t).next((e=>{if(null===e)throw ai();si(e.userId===this.userId),n.push(vc(this.serializer,e))})))})),Gi.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return cu(e._e,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.On(t.batchId)})),Gi.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Gi.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return mu(e).J({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=so(e[1]);r.push(t)}else n.done()})).next((()=>{si(0===r.length)}))}))}containsKey(e,t){return du(e,this.userId,t)}Nn(e){return fu(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function du(e,t,n){const r=co(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let a=!1;return mu(e).J({range:o,H:!0},((e,n,r)=>{const[o,s,l]=e;o===t&&s===i&&(a=!0),r.done()})).next((()=>a))}function hu(e){return Po(e,"mutations")}function mu(e){return Po(e,"documentMutations")}function fu(e){return Po(e,"mutationQueues")}class gu{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new gu(0)}static kn(){return new gu(-1)}}class yu{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next((t=>{const n=new gu(t.highestTargetId);return t.highestTargetId=n.next(),this.Qn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.qn(e).next((e=>Ei.fromTimestamp(new Ti(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.qn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.qn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Qn(e,r))))}addTargetData(e,t){return this.Kn(e,t).next((()=>this.qn(e).next((n=>(n.targetCount+=1,this.$n(t,n),this.Qn(e,n))))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>_u(e).delete(t.targetId))).next((()=>this.qn(e))).next((t=>(si(t.targetCount>0),t.targetCount-=1,this.Qn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return _u(e).J(((o,a)=>{const s=bc(a);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r++,i.push(this.removeTargetData(e,s)))})).next((()=>Gi.waitFor(i))).next((()=>r))}forEachTarget(e,t){return _u(e).J(((e,n)=>{const r=bc(n);t(r)}))}qn(e){return vu(e).get("targetGlobalKey").next((e=>(si(null!==e),e)))}Qn(e,t){return vu(e).put("targetGlobalKey",t)}Kn(e,t){return _u(e).put(wc(this.serializer,t))}$n(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=ns(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return _u(e).J({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const o=bc(n);rs(t,o.target)&&(i=o,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=bu(e);return t.forEach((t=>{const o=io(t.path);r.push(i.put({targetId:n,path:o})),r.push(this.referenceDelegate.addReference(e,n,t))})),Gi.waitFor(r)}removeMatchingKeys(e,t,n){const r=bu(e);return Gi.forEach(t,(t=>{const i=io(t.path);return Gi.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=bu(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=bu(e);let i=Ns();return r.J({range:n,H:!0},((e,t,n)=>{const r=so(e[1]),o=new Ci(r);i=i.add(o)})).next((()=>i))}containsKey(e,t){const n=io(t.path),r=IDBKeyRange.bound([n],[Si(n)],!1,!0);let i=0;return bu(e).J({index:"documentTargetsIndex",H:!0,range:r},(([e,t],n,r)=>{0!==e&&(i++,r.done())})).next((()=>i>0))}ot(e,t){return _u(e).get(t).next((e=>e?bc(e):null))}}function _u(e){return Po(e,"targets")}function vu(e){return Po(e,"targetGlobal")}function bu(e){return Po(e,"targetDocuments")}function wu([e,t],[n,r]){const i=wi(e,n);return 0===i?wi(t,r):i}class xu{constructor(e){this.Un=e,this.buffer=new Go(wu),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();wu(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Su{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){ni("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Ki(e)?ni("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Vi(e)}await this.Hn(3e5)}))}}class Tu{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Gi.resolve(to.oe);const n=new xu(t);return this.Jn.forEachTarget(e,(e=>n.zn(e.sequenceNumber))).next((()=>this.Jn.Zn(e,(e=>n.zn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.Jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ni("LruGarbageCollector","Garbage collection skipped; disabled"),Gi.resolve(su)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(ni("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),su):this.Xn(e,t)))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let n,r,i,o,a,s,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(ni("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,a=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,s=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),ti()<=Zt.DEBUG&&ni("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-c}ms\n\tDetermined least recently used ${r} in `+(a-o)+"ms\n"+`\tRemoved ${i} targets in `+(s-a)+"ms\n"+`\tRemoved ${e} documents in `+(l-s)+"ms\n"+`Total Duration: ${l-c}ms`),Gi.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}class Eu{constructor(e,t){this.db=e,this.garbageCollector=function(e,t){return new Tu(e,t)}(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}er(e){let t=0;return this.Zn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,((e,n)=>t(n)))}addReference(e,t,n){return Iu(e,n)}removeReference(e,t,n){return Iu(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Iu(e,t)}nr(e,t){return function(e,t){let n=!1;return fu(e).Y((r=>du(e,r,t).next((e=>(e&&(n=!0),Gi.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.tr(e,((o,a)=>{if(a<=t){const t=this.nr(e,o).next((t=>{if(!t)return i++,n.getEntry(e,o).next((()=>(n.removeEntry(o,Ei.min()),bu(e).delete(function(e){return[0,io(e.path)]}(o)))))}));r.push(t)}})).next((()=>Gi.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Iu(e,t)}tr(e,t){const n=bu(e);let r,i=to.oe;return n.J({index:"documentTargetsIndex"},(([e,n],{path:o,sequenceNumber:a})=>{0===e?(i!==to.oe&&t(new Ci(so(r)),i),i=a,r=o):i=to.oe})).next((()=>{i!==to.oe&&t(new Ci(so(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Iu(e,t){return bu(e).put(function(e,t){return{targetId:0,path:io(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class ku{constructor(){this.changes=new xs((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Aa.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Gi.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ju{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Mu(e).put(n)}removeEntry(e,t,n){return Mu(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],gc(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.rr(e,n))))}getEntry(e,t){let n=Aa.newInvalidDocument(t);return Mu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Nu(t))},((e,r)=>{n=this.ir(t,r)})).next((()=>n))}sr(e,t){let n={size:0,document:Aa.newInvalidDocument(t)};return Mu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Nu(t))},((e,r)=>{n={document:this.ir(t,r),size:uu(r)}})).next((()=>n))}getEntries(e,t){let n=Ts();return this._r(e,t,((e,t)=>{const r=this.ir(e,t);n=n.insert(e,r)})).next((()=>n))}ar(e,t){let n=Ts(),r=new Bo(Ci.comparator);return this._r(e,t,((e,t)=>{const i=this.ir(e,t);n=n.insert(e,i),r=r.insert(e,uu(t))})).next((()=>({documents:n,ur:r})))}_r(e,t,n){if(t.isEmpty())return Gi.resolve();let r=new Go(Pu);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(Nu(r.first()),Nu(r.last())),o=r.getIterator();let a=o.getNext();return Mu(e).J({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=Ci.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;a&&Pu(a,i)<0;)n(a,null),a=o.getNext();a&&a.isEqual(i)&&(n(a,t),a=o.hasNext()?o.getNext():null),a?r.$(Nu(a)):r.done()})).next((()=>{for(;a;)n(a,null),a=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),gc(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],s=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Mu(e).U(IDBKeyRange.bound(a,s,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=Ts();for(const i of e){const e=this.ir(Ci.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(vs(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=Ts();const o=Ru(t,n),a=Ru(t,Li.max());return Mu(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},((e,t,n)=>{const o=this.ir(Ci.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(o.key,o),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new Cu(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return Ou(e).get("remoteDocumentGlobalKey").next((e=>(si(!!e),e)))}rr(e,t){return Ou(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const e=function(e,t){let n;if(t.document)n=function(e,t,n){const r=Wl(e,t.name),i=Gl(t.updateTime),o=t.createTime?Gl(t.createTime):Ei.min(),a=new ka({mapValue:{fields:t.fields}}),s=Aa.newFoundDocument(r,i,o,a);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Ci.fromSegments(t.noDocument.path),r=_c(t.noDocument.readTime);n=Aa.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return ai();{const e=Ci.fromSegments(t.unknownDocument.path),r=_c(t.unknownDocument.version);n=Aa.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new Ti(e[0],e[1]);return Ei.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Ei.min()))return e}return Aa.newInvalidDocument(e)}}function Au(e){return new ju(e)}class Cu extends ku{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new xs((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new Go(((e,t)=>wi(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,o)=>{const a=this.lr.get(i);if(t.push(this.cr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const s=fc(this.cr.serializer,o);r=r.add(i.path.popLast());const l=uu(s);n+=l-a.size,t.push(this.cr.addEntry(e,i,s))}else if(n-=a.size,this.trackRemovals){const n=fc(this.cr.serializer,o.convertToNoDocument(Ei.min()));t.push(this.cr.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.cr.updateMetadata(e,n)),Gi.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next((e=>(this.lr.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.cr.ar(e,t).next((({documents:e,ur:t})=>(t.forEach(((t,n)=>{this.lr.set(t,{size:n,readTime:e.get(t).readTime})})),e)))}}function Ou(e){return Po(e,"remoteDocumentGlobal")}function Mu(e){return Po(e,"remoteDocumentsV14")}function Nu(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Ru(e,t){const n=t.documentKey.path.toArray();return[e,gc(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Pu(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let e=0;e<n.length-2&&e<r.length-2;++e)if(i=wi(n[e],r[e]),i)return i;return i=wi(n.length,r.length),i||(i=wi(n[n.length-2],r[r.length-2]),i||wi(n[n.length-1],r[r.length-1]))}class Du{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Lu{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&rl(n.mutation,e,qo.empty(),Ti.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Ns()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=Ns()){const r=js();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Is();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=js();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Ns())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Ts();const o=Cs(),a=Cs();return t.forEach(((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof sl)?i=i.insert(t.key,t):void 0!==a?(o.set(t.key,a.mutation.getFieldMask()),rl(a.mutation,t,a.mutation.getFieldMask(),Ti.now())):o.set(t.key,qo.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>o.set(e,t))),t.forEach(((e,t)=>{var n;return a.set(e,new Du(t,null!==(n=o.get(e))&&void 0!==n?n:null))})),a)))}recalculateAndSaveOverlays(e,t){const n=Cs();let r=new Bo(((e,t)=>e-t)),i=Ns();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const o=t.get(e);if(null===o)return;let a=n.get(e)||qo.empty();a=i.applyToLocalView(o,a),n.set(e,a);const s=(r.get(i.batchId)||Ns()).add(e);r=r.insert(i.batchId,s)}))})).next((()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),s=r.key,l=r.value,c=As();l.forEach((e=>{if(!i.has(e)){const r=tl(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),o.push(this.documentOverlayCache.saveOverlays(e,s,c))}return Gi.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Ci.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ps(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Gi.resolve(js());let a=-1,s=i;return o.next((t=>Gi.forEach(t,((t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?Gi.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{s=s.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,s,t,Ns()))).next((e=>({batchId:a,changes:ks(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ci(t)).next((e=>{let t=Is();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=Is();return this.indexManager.getCollectionParents(e,i).next((a=>Gi.forEach(a,(a=>{const s=function(e,t){return new ls(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next((e=>{e.forEach(((e,t)=>{o=o.insert(e,t)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Aa.newInvalidDocument(r)))}));let n=Is();return e.forEach(((e,r)=>{const o=i.get(e);void 0!==o&&rl(o.mutation,r,qo.empty(),Ti.now()),vs(t,r)&&(n=n.insert(e,r))})),n}))}}class Fu{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return Gi.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Gl(e.createTime)}}(t)),Gi.resolve()}getNamedQuery(e,t){return Gi.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:xc(e.bundledQuery),readTime:Gl(e.readTime)}}(t)),Gi.resolve()}}class Bu{constructor(){this.overlays=new Bo(Ci.comparator),this.Ir=new Map}getOverlay(e,t){return Gi.resolve(this.overlays.get(t))}getOverlays(e,t){const n=js();return Gi.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),Gi.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Ir.delete(n)),Gi.resolve()}getOverlaysForCollection(e,t,n){const r=js(),i=t.length+1,o=new Ci(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const e=a.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Gi.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Bo(((e,t)=>e-t));const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=js(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=js(),s=i.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach(((e,t)=>a.set(e,t))),!(a.size()>=r)););return Gi.resolve(a)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new fl(t,n));let i=this.Ir.get(t);void 0===i&&(i=Ns(),this.Ir.set(t,i)),this.Ir.set(t,i.add(n.key))}}class Uu{constructor(){this.sessionToken=Wo.EMPTY_BYTE_STRING}getSessionToken(e){return Gi.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Gi.resolve()}}class Vu{constructor(){this.Tr=new Go(Gu.Er),this.dr=new Go(Gu.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new Gu(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Vr(new Gu(e,t))}mr(e,t){e.forEach((e=>this.removeReference(e,t)))}gr(e){const t=new Ci(new ki([])),n=new Gu(t,e),r=new Gu(t,e+1),i=[];return this.dr.forEachInRange([n,r],(e=>{this.Vr(e),i.push(e.key)})),i}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Ci(new ki([])),n=new Gu(t,e),r=new Gu(t,e+1);let i=Ns();return this.dr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Gu(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Gu{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Ci.comparator(e.key,t.key)||wi(e.wr,t.wr)}static Ar(e,t){return wi(e.wr,t.wr)||Ci.comparator(e.key,t.key)}}class zu{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Go(Gu.Er)}checkEmpty(e){return Gi.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new hl(i,t,n,r);this.mutationQueue.push(o);for(const t of r)this.br=this.br.add(new Gu(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return Gi.resolve(o)}lookupMutationBatch(e,t){return Gi.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),i=r<0?0:r;return Gi.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Gi.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return Gi.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Gu(t,0),r=new Gu(t,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,r],(e=>{const t=this.Dr(e.wr);i.push(t)})),Gi.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Go(wi);return t.forEach((e=>{const t=new Gu(e,0),r=new Gu(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],(e=>{n=n.add(e.wr)}))})),Gi.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Ci.isDocumentKey(i)||(i=i.child(""));const o=new Gu(new Ci(i),0);let a=new Go(wi);return this.br.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.wr)),!0)}),o),Gi.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach((e=>{const n=this.Dr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){si(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return Gi.forEach(t.mutations,(r=>{const i=new Gu(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,t){const n=new Gu(t,0),r=this.br.firstAfterOrEqual(n);return Gi.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Gi.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class $u{constructor(e){this.Mr=e,this.docs=new Bo(Ci.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Gi.resolve(n?n.document.mutableCopy():Aa.newInvalidDocument(t))}getEntries(e,t){let n=Ts();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Aa.newInvalidDocument(e))})),Gi.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Ts();const o=t.path,a=new Ci(o.child("")),s=this.docs.getIteratorFrom(a);for(;s.hasNext();){const{key:e,value:{document:a}}=s.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||Fi(Di(a),n)<=0||(r.has(a.key)||vs(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return Gi.resolve(i)}getAllFromCollectionGroup(e,t,n,r){ai()}Or(e,t){return Gi.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new qu(this)}getSize(e){return Gi.resolve(this.size)}}class qu extends ku{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)})),Gi.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class Hu{constructor(e){this.persistence=e,this.Nr=new xs((e=>ns(e)),rs),this.lastRemoteSnapshotVersion=Ei.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Vu,this.targetCount=0,this.kr=gu.Bn()}forEachTarget(e,t){return this.Nr.forEach(((e,n)=>t(n))),Gi.resolve()}getLastRemoteSnapshotVersion(e){return Gi.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Gi.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Gi.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),Gi.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new gu(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,Gi.resolve()}updateTargetData(e,t){return this.Kn(t),Gi.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,Gi.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Nr.forEach(((o,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)})),Gi.waitFor(i).next((()=>r))}getTargetCount(e){return Gi.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return Gi.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),Gi.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Gi.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),Gi.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return Gi.resolve(n)}containsKey(e,t){return Gi.resolve(this.Br.containsKey(t))}}class Wu{constructor(e,t){this.qr={},this.overlays={},this.Qr=new to(0),this.Kr=!1,this.Kr=!0,this.$r=new Uu,this.referenceDelegate=e(this),this.Ur=new Hu(this),this.indexManager=new Qc,this.remoteDocumentCache=function(e){return new $u(e)}((e=>this.referenceDelegate.Wr(e))),this.serializer=new mc(t),this.Gr=new Fu(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Bu,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new zu(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){ni("MemoryPersistence","Starting transaction:",e);const r=new Ku(this.Qr.next());return this.referenceDelegate.zr(),n(r).next((e=>this.referenceDelegate.jr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Hr(e,t){return Gi.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,t))))}}class Ku extends Ui{constructor(e){super(),this.currentSequenceNumber=e}}class Xu{constructor(e){this.persistence=e,this.Jr=new Vu,this.Yr=null}static Zr(e){return new Xu(e)}get Xr(){if(this.Yr)return this.Yr;throw ai()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),Gi.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),Gi.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),Gi.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((e=>this.Xr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Xr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Gi.forEach(this.Xr,(n=>{const r=Ci.fromPath(n);return this.ei(e,r).next((e=>{e||t.removeEntry(r,Ei.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return Gi.or([()=>Gi.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class Yu{constructor(e){this.serializer=e}O(e,t,n,r){const i=new zi("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",lo,{unique:!0}),e.createObjectStore("documentMutations")}(e),Ju(e),function(e){e.createObjectStore("remoteDocuments")}(e));let o=Gi.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Ju(e)),o=o.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ei.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(o=o.next((()=>function(e,t){return t.store("mutations").U().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",lo,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return Gi.waitFor(i)}))}(e,i)))),o=o.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((()=>this.ni(i)))),n<6&&r>=6&&(o=o.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ri(i))))),n<7&&r>=7&&(o=o.next((()=>this.ii(i)))),n<8&&r>=8&&(o=o.next((()=>this.si(e,i)))),n<9&&r>=9&&(o=o.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((()=>this.oi(i)))),n<11&&r>=11&&(o=o.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:To});t.createIndex("collectionPathOverlayIndex",Eo,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Io,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:ho});t.createIndex("documentKeyIndex",mo),t.createIndex("collectionGroupIndex",fo)}(e))).next((()=>this._i(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(o=o.next((()=>this.ai(e,i)))),n<15&&r>=15&&(o=o.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:bo}).createIndex("sequenceNumberIndex",wo,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:xo}).createIndex("documentKeyIndex",So,{unique:!1})}(e)))),n<16&&r>=16&&(o=o.next((()=>{t.objectStore("indexState").clear()})).next((()=>{t.objectStore("indexEntries").clear()}))),n<17&&r>=17&&(o=o.next((()=>{!function(e){e.createObjectStore("globals",{keyPath:"name"})}(e)}))),o}ri(e){let t=0;return e.store("remoteDocuments").J(((e,n)=>{t+=uu(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}ni(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.U().next((t=>Gi.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",r).next((n=>Gi.forEach(n,(n=>{si(n.userId===t.userId);const r=vc(this.serializer,n);return cu(e,t.userId,r).next((()=>{}))}))))}))))}ii(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.J(((n,i)=>{const o=new ki(n),a=function(e){return[0,io(e)]}(o);r.push(t.get(a).next((n=>n?Gi.resolve():(n=>t.put({targetId:0,path:io(n),sequenceNumber:e.highestListenSequenceNumber}))(o))))})).next((()=>Gi.waitFor(r)))}))}si(e,t){e.createObjectStore("collectionParents",{keyPath:vo});const n=t.store("collectionParents"),r=new Zc,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:io(r)})}};return t.store("remoteDocuments").J({H:!0},((e,t)=>{const n=new ki(e);return i(n.popLast())})).next((()=>t.store("documentMutations").J({H:!0},(([e,t,n],r)=>{const o=so(t);return i(o.popLast())}))))}oi(e){const t=e.store("targets");return t.J(((e,n)=>{const r=bc(n),i=wc(this.serializer,r);return t.put(i)}))}_i(e,t){const n=t.store("remoteDocuments"),r=[];return n.J(((e,n)=>{const i=t.store("remoteDocumentsV14"),o=function(e){return e.document?new Ci(ki.fromString(e.document.name).popFirst(5)):e.noDocument?Ci.fromSegments(e.noDocument.path):e.unknownDocument?Ci.fromSegments(e.unknownDocument.path):ai()}(n).path.toArray(),a={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(a))})).next((()=>Gi.waitFor(r)))}ai(e,t){const n=t.store("mutations"),r=Au(this.serializer),i=new Wu(Xu.Zr,this.serializer.ct);return n.U().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:Ns();vc(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),Gi.forEach(n,((e,n)=>{const o=new Qr(n),a=Ac.lt(this.serializer,o),s=i.getIndexManager(o),l=pu.lt(o,this.serializer,s,i.referenceDelegate);return new Lu(r,l,a,s).recalculateAndSaveOverlaysForDocumentKeys(new Ro(t,to.oe),e).next()}))}))}}function Ju(e){e.createObjectStore("targetDocuments",{keyPath:yo}).createIndex("documentTargetsIndex",_o,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",go,{unique:!0}),e.createObjectStore("targetGlobal")}const Qu="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Zu{constructor(e,t,n,r,i,o,a,s,l,c,u=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.ui=i,this.window=o,this.document=a,this.ci=l,this.li=c,this.hi=u,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=e=>Promise.resolve(),!Zu.D())throw new ui(ci.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Eu(this,r),this.Ai=t+"main",this.serializer=new mc(s),this.Ri=new $i(this.Ai,this.hi,new Yu(this.serializer)),this.$r=new Oc,this.Ur=new yu(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Au(this.serializer),this.Gr=new Ic,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===c&&ri("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ui(ci.FAILED_PRECONDITION,Qu);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Ur.getHighestSequenceNumber(e)))})).then((e=>{this.Qr=new to(e,this.ci)})).then((()=>{this.Kr=!0})).catch((e=>(this.Ri&&this.Ri.close(),Promise.reject(e))))}yi(e){return this.di=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>tp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.wi(e).next((e=>{e||(this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))))}))})).next((()=>this.Si(e))).next((t=>this.isPrimary&&!t?this.bi(e).next((()=>!1)):!!t&&this.Di(e).next((()=>!0)))))).catch((e=>{if(Ki(e))return ni("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ni("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ui.enqueueRetryable((()=>this.di(e))),this.isPrimary=e}))}wi(e){return ep(e).get("owner").next((e=>Gi.resolve(this.vi(e))))}Ci(e){return tp(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=Po(e,"clientMetadata");return t.U().next((e=>{const n=this.xi(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return Gi.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.Vi)for(const t of e)this.Vi.removeItem(this.Oi(t.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.Fi())).then((()=>this.pi()))))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Gi.resolve(!0):ep(e).get("owner").next((t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new ui(ci.FAILED_PRECONDITION,Qu);return!1}}return!(!this.networkEnabled||!this.inForeground)||tp(e).U().next((e=>void 0===this.xi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&ni("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new Ro(e,to.oe);return this.bi(t).next((()=>this.Ci(t)))})),this.Ri.close(),this.qi()}xi(e,t){return e.filter((e=>this.Mi(e.updateTimeMs,t)&&!this.Ni(e.clientId)))}Qi(){return this.runTransaction("getActiveClients","readonly",(e=>tp(e).U().next((e=>this.xi(e,18e5).map((e=>e.clientId))))))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return pu.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new tu(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Ac.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,n){ni("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 17===e?No:16===e?Mo:15===e?Oo:14===e?Co:13===e?Ao:12===e?jo:11===e?ko:void ai()}(this.hi);let o;return this.Ri.runTransaction(e,r,i,(r=>(o=new Ro(r,this.Qr?this.Qr.next():to.oe),"readwrite-primary"===t?this.wi(o).next((e=>!!e||this.Si(o))).next((t=>{if(!t)throw ri(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))),new ui(ci.FAILED_PRECONDITION,Bi);return n(o)})).next((e=>this.Di(o).next((()=>e)))):this.Ki(o).next((()=>n(o)))))).then((e=>(o.raiseOnCommittedEvent(),e)))}Ki(e){return ep(e).get("owner").next((e=>{if(null!==e&&this.Mi(e.leaseTimestampMs,5e3)&&!this.Ni(e.ownerId)&&!this.vi(e)&&!(this.li||this.allowTabSynchronization&&e.allowTabSynchronization))throw new ui(ci.FAILED_PRECONDITION,Qu)}))}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ep(e).put("owner",t)}static D(){return $i.D()}bi(e){const t=ep(e);return t.get("owner").next((e=>this.vi(e)?(ni("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Gi.resolve()))}Mi(e,t){const n=Date.now();return!(e<n-t||e>n&&(ri(`Detected an update time that is in the future: ${e} > ${n}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.mi())))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Pi=()=>{this.Li();const e=/(?:Version|Mobile)\/1[456]/;Nt()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const n=null!==(null===(t=this.Vi)||void 0===t?void 0:t.getItem(this.Oi(e)));return ni("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return ri("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){ri("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch(e){}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ep(e){return Po(e,"owner")}function tp(e){return Po(e,"clientMetadata")}class np{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=Ns(),r=Ns();for(const e of t.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:r=r.add(e.doc.key)}return new np(e,t.fromCache,n,r)}}class rp{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class ip{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=Nt()?8:qi(Ot())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.Yi(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Zi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new rp;return this.Xi(e,t,n).next((r=>{if(i.result=r,this.zi)return this.es(e,t,n,r.size)}))})).next((()=>i.result))}es(e,t,n,r){return n.documentReadCount<this.ji?(ti()<=Zt.DEBUG&&ni("QueryEngine","SDK will not create cache indexes for query:",_s(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Gi.resolve()):(ti()<=Zt.DEBUG&&ni("QueryEngine","Query:",_s(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(ti()<=Zt.DEBUG&&ni("QueryEngine","The SDK decides to create cache indexes for query:",_s(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hs(t))):Gi.resolve())}Yi(e,t){if(us(t))return Gi.resolve(null);let n=hs(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=fs(t,null,"F"),n=hs(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Ns(...r);return this.Ji.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const o=this.ts(t,r);return this.ns(t,o,i,n.readTime)?this.Yi(e,fs(t,null,"F")):this.rs(e,o,t,n)}))))})))))}Zi(e,t,n,r){return us(t)||r.isEqual(Ei.min())?Gi.resolve(null):this.Ji.getDocuments(e,n).next((i=>{const o=this.ts(t,i);return this.ns(t,o,n,r)?Gi.resolve(null):(ti()<=Zt.DEBUG&&ni("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),_s(t)),this.rs(e,o,t,function(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Ei.fromTimestamp(1e9===r?new Ti(n+1,0):new Ti(n,r));return new Li(i,Ci.empty(),t)}(r,-1)).next((e=>e)))}))}ts(e,t){let n=new Go(bs(e));return t.forEach(((t,r)=>{vs(e,r)&&(n=n.add(r))})),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Xi(e,t,n){return ti()<=Zt.DEBUG&&ni("QueryEngine","Using full collection scan to execute query:",_s(t)),this.Ji.getDocumentsMatchingQuery(e,t,Li.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class op{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new Bo(wi),this._s=new xs((e=>ns(e)),rs),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Lu(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function ap(e,t,n,r){return new op(e,t,n,r)}async function sp(e,t){const n=li(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.ls(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],o=[];let a=Ns();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next((e=>({hs:e,removedBatchIds:i,addedBatchIds:o})))}))}))}function lp(e){const t=li(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Ur.getLastRemoteSnapshotVersion(e)))}function cp(e,t){const n=li(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}async function up(e,t,n){const r=li(e),i=r.os.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Ki(e))throw e;ni("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.os=r.os.remove(t),r._s.delete(i.target)}function pp(e,t,n){const r=li(e);let i=Ei.min(),o=Ns();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=li(e),i=r._s.get(n);return void 0!==i?Gi.resolve(r.os.get(i)):r.Ur.getTargetData(t,n)}(r,e,hs(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next((e=>{o=e}))})).next((()=>r.ss.getDocumentsMatchingQuery(e,t,n?i:Ei.min(),n?o:Ns()))).next((e=>(function(e,t,n){let r=e.us.get(t)||Ei.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.us.set(t,r)}(r,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,Ts:o})))))}class dp{constructor(){this.activeTargetIds=Rs}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class hp{constructor(){this.so=new dp,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new dp,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class mp{_o(e){}shutdown(){}}class fp{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ni("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ni("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let gp=null;function yp(){return null===gp?gp=268435456+Math.round(2147483648*Math.random()):gp++,"0x"+gp.toString(16)}const _p={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vp{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const bp="WebChannelConnection";class wp extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo=`projects/${n}/databases/${r}`,this.Co="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get Fo(){return!1}Mo(e,t,n,r,i){const o=yp(),a=this.xo(e,t.toUriEncodedString());ni("RestConnection",`Sending RPC '${e}' ${o}:`,a,n);const s={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(s,r,i),this.No(e,a,s,n).then((t=>(ni("RestConnection",`Received RPC '${e}' ${o}: `,t),t)),(t=>{throw ii("RestConnection",`RPC '${e}' ${o} failed with error: `,t,"url: ",a,"request:",n),t}))}Lo(e,t,n,r,i,o){return this.Mo(e,t,n,r,i)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Zr,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}xo(e,t){const n=_p[e];return`${this.Do}/v1/${t}:${n}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const i=yp();return new Promise(((o,a)=>{const s=new Vr;s.setWithCredentials(!0),s.listenOnce(zr.COMPLETE,(()=>{try{switch(s.getLastErrorCode()){case $r.NO_ERROR:const t=s.getResponseJson();ni(bp,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),o(t);break;case $r.TIMEOUT:ni(bp,`RPC '${e}' ${i} timed out`),a(new ui(ci.DEADLINE_EXCEEDED,"Request time out"));break;case $r.HTTP_ERROR:const n=s.getStatus();if(ni(bp,`RPC '${e}' ${i} failed with status:`,n,"response text:",s.getResponseText()),n>0){let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(ci).indexOf(t)>=0?t:ci.UNKNOWN}(t.status);a(new ui(e,t.message))}else a(new ui(ci.UNKNOWN,"Server responded with status "+s.getStatus()))}else a(new ui(ci.UNAVAILABLE,"Connection failed."));break;default:ai()}}finally{ni(bp,`RPC '${e}' ${i} completed.`)}}));const l=JSON.stringify(r);ni(bp,`RPC '${e}' ${i} sending request:`,r),s.send(t,"POST",l,n,15)}))}Bo(e,t,n){const r=yp(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Kr(),a=Wr(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(s.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(s.useFetchStreams=!0),this.Oo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;const c=i.join("");ni(bp,`Creating RPC '${e}' stream ${r}: ${c}`,s);const u=o.createWebChannel(c,s);let p=!1,d=!1;const h=new vp({Io:t=>{d?ni(bp,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(p||(ni(bp,`Opening RPC '${e}' stream ${r} transport.`),u.open(),p=!0),ni(bp,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},To:()=>u.close()}),m=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return m(u,Gr.EventType.OPEN,(()=>{d||(ni(bp,`RPC '${e}' stream ${r} transport opened.`),h.yo())})),m(u,Gr.EventType.CLOSE,(()=>{d||(d=!0,ni(bp,`RPC '${e}' stream ${r} transport closed`),h.So())})),m(u,Gr.EventType.ERROR,(t=>{d||(d=!0,ii(bp,`RPC '${e}' stream ${r} transport errored:`,t),h.So(new ui(ci.UNAVAILABLE,"The operation could not be completed")))})),m(u,Gr.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];si(!!i);const o=i,a=o.error||(null===(n=o[0])||void 0===n?void 0:n.error);if(a){ni(bp,`RPC '${e}' stream ${r} received error:`,a);const t=a.status;let n=function(e){const t=yl[e];if(void 0!==t)return vl(t)}(t),i=a.message;void 0===n&&(n=ci.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),d=!0,h.So(new ui(n,i)),u.close()}else ni(bp,`RPC '${e}' stream ${r} received:`,i),h.bo(i)}})),m(a,Hr.STAT_EVENT,(t=>{t.stat===qr.PROXY?ni(bp,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===qr.NOPROXY&&ni(bp,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{h.wo()}),0),h}}function xp(){return"undefined"!=typeof document?document:null}function Sp(e){return new Ll(e,!0)}class Tp{constructor(e,t,n=1e3,r=1.5,i=6e4){this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&ni("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class Ep{constructor(e,t,n,r,i,o,a,s){this.ui=e,this.Ho=n,this.Jo=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=s,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Tp(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===ci.RESOURCE_EXHAUSTED?(ri(t.toString()),ri("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===ci.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.Yo===t&&this.P_(e,n)}),(t=>{e((()=>{const e=new ui(ci.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)}))}))}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((e=>{n((()=>this.I_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.e_?this.E_(e):this.onNext(e)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return ni("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(ni("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Ip extends Ep{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:ai()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(si(void 0===t||"string"==typeof t),Wo.fromBase64String(t||"")):(si(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Wo.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,s=a&&function(e){const t=void 0===e.code?ci.UNKNOWN:vl(e.code);return new ui(t,e.message||"")}(a);n=new Al(r,i,o,s||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Wl(e,r.document.name),o=Gl(r.document.updateTime),a=r.document.createTime?Gl(r.document.createTime):Ei.min(),s=new ka({mapValue:{fields:r.document.fields}}),l=Aa.newFoundDocument(i,o,a,s),c=r.targetIds||[],u=r.removedTargetIds||[];n=new kl(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Wl(e,r.document),o=r.readTime?Gl(r.readTime):Ei.min(),a=Aa.newNoDocument(i,o),s=r.removedTargetIds||[];n=new kl([],s,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Wl(e,r.document),o=r.removedTargetIds||[];n=new kl([],o,i,null)}else{if(!("filter"in t))return ai();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new gl(r,i),a=e.targetId;n=new jl(a,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Ei.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Ei.min():t.readTime?Gl(t.readTime):Ei.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=Yl(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=is(r)?{documents:tc(e,r)}:{query:nc(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Ul(e,t.resumeToken);const r=Fl(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Ei.min())>0){n.readTime=Bl(e,t.snapshotVersion.toTimestamp());const r=Fl(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ai()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=Yl(this.serializer),t.removeTarget=e,this.a_(t)}}class kp extends Ep{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return si(!!e.streamToken),this.lastStreamToken=e.streamToken,si(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){si(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(si(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Gl(e.updateTime):Gl(t);return n.isEqual(Ei.min())&&(n=Gl(t)),new Js(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Gl(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=Yl(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Zl(this.serializer,e)))};this.a_(t)}}class jp extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new ui(ci.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Mo(e,$l(t,n),r,i,o))).catch((e=>{throw"FirebaseError"===e.name?(e.code===ci.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ui(ci.UNKNOWN,e.toString())}))}Lo(e,t,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Lo(e,$l(t,n),r,o,a,i))).catch((e=>{throw"FirebaseError"===e.name?(e.code===ci.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ui(ci.UNKNOWN,e.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class Ap{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ri(t),this.D_=!1):ni("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class Cp{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o((e=>{n.enqueueAndForget((async()=>{Bp(this)&&(ni("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=li(e);t.L_.add(4),await Mp(t),t.q_.set("Unknown"),t.L_.delete(4),await Op(t)}(this))}))})),this.q_=new Ap(n,r)}}async function Op(e){if(Bp(e))for(const t of e.B_)await t(!0)}async function Mp(e){for(const t of e.B_)await t(!1)}function Np(e,t){const n=li(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),Fp(n)?Lp(n):rd(n).r_()&&Pp(n,t))}function Rp(e,t){const n=li(e),r=rd(n);n.N_.delete(t),r.r_()&&Dp(n,t),0===n.N_.size&&(r.r_()?r.o_():Bp(n)&&n.q_.set("Unknown"))}function Pp(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ei.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}rd(e).A_(t)}function Dp(e,t){e.Q_.xe(t),rd(e).R_(t)}function Lp(e){e.Q_=new Ol({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),rd(e).start(),e.q_.v_()}function Fp(e){return Bp(e)&&!rd(e).n_()&&e.N_.size>0}function Bp(e){return 0===li(e).L_.size}function Up(e){e.Q_=void 0}async function Vp(e){e.q_.set("Online")}async function Gp(e){e.N_.forEach(((t,n)=>{Pp(e,t)}))}async function zp(e,t){Up(e),Fp(e)?(e.q_.M_(t),Lp(e)):e.q_.set("Unknown")}async function $p(e,t,n){if(e.q_.set("Online"),t instanceof Al&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(n){ni("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await qp(e,n)}else if(t instanceof kl?e.Q_.Ke(t):t instanceof jl?e.Q_.He(t):e.Q_.We(t),!n.isEqual(Ei.min()))try{const t=await lp(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.N_.get(r);i&&e.N_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(Wo.EMPTY_BYTE_STRING,r.snapshotVersion)),Dp(e,t);const i=new hc(r.target,t,n,r.sequenceNumber);Pp(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){ni("RemoteStore","Failed to raise snapshot:",t),await qp(e,t)}}async function qp(e,t,n){if(!Ki(t))throw t;e.L_.add(1),await Mp(e),e.q_.set("Offline"),n||(n=()=>lp(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{ni("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await Op(e)}))}function Hp(e,t){return t().catch((n=>qp(e,n,t)))}async function Wp(e){const t=li(e),n=id(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;Kp(t);)try{const e=await cp(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,Xp(t,e)}catch(e){await qp(t,e)}Yp(t)&&Jp(t)}function Kp(e){return Bp(e)&&e.O_.length<10}function Xp(e,t){e.O_.push(t);const n=id(e);n.r_()&&n.V_&&n.m_(t.mutations)}function Yp(e){return Bp(e)&&!id(e).n_()&&e.O_.length>0}function Jp(e){id(e).start()}async function Qp(e){id(e).p_()}async function Zp(e){const t=id(e);for(const n of e.O_)t.m_(n.mutations)}async function ed(e,t,n){const r=e.O_.shift(),i=ml.from(r,t,n);await Hp(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Wp(e)}async function td(e,t){t&&id(e).V_&&await async function(e,t){if(function(e){return function(e){switch(e){default:return ai();case ci.CANCELLED:case ci.UNKNOWN:case ci.DEADLINE_EXCEEDED:case ci.RESOURCE_EXHAUSTED:case ci.INTERNAL:case ci.UNAVAILABLE:case ci.UNAUTHENTICATED:return!1;case ci.INVALID_ARGUMENT:case ci.NOT_FOUND:case ci.ALREADY_EXISTS:case ci.PERMISSION_DENIED:case ci.FAILED_PRECONDITION:case ci.ABORTED:case ci.OUT_OF_RANGE:case ci.UNIMPLEMENTED:case ci.DATA_LOSS:return!0}}(e)&&e!==ci.ABORTED}(t.code)){const n=e.O_.shift();id(e).s_(),await Hp(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Wp(e)}}(e,t),Yp(e)&&Jp(e)}async function nd(e,t){const n=li(e);n.asyncQueue.verifyOperationInProgress(),ni("RemoteStore","RemoteStore received new credentials");const r=Bp(n);n.L_.add(3),await Mp(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await Op(n)}function rd(e){return e.K_||(e.K_=function(e,t,n){const r=li(e);return r.w_(),new Ip(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:Vp.bind(null,e),Ro:Gp.bind(null,e),mo:zp.bind(null,e),d_:$p.bind(null,e)}),e.B_.push((async t=>{t?(e.K_.s_(),Fp(e)?Lp(e):e.q_.set("Unknown")):(await e.K_.stop(),Up(e))}))),e.K_}function id(e){return e.U_||(e.U_=function(e,t,n){const r=li(e);return r.w_(),new kp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Qp.bind(null,e),mo:td.bind(null,e),f_:Zp.bind(null,e),g_:ed.bind(null,e)}),e.B_.push((async t=>{t?(e.U_.s_(),await Wp(e)):(await e.U_.stop(),e.O_.length>0&&(ni("RemoteStore",`Stopping write stream with ${e.O_.length} pending writes`),e.O_=[]))}))),e.U_}class od{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new pi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,a=new od(e,t,o,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ui(ci.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ad(e,t){if(ri("AsyncQueue",`${t}: ${e}`),Ki(e))return new ui(ci.UNAVAILABLE,`${t}: ${e}`);throw e}class sd{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ci.comparator(t.key,n.key):(e,t)=>Ci.comparator(e.key,t.key),this.keyedMap=Is(),this.sortedSet=new Bo(this.comparator)}static emptySet(e){return new sd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof sd))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new sd;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class ld{constructor(){this.W_=new Bo(Ci.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):ai():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class cd{constructor(e,t,n,r,i,o,a,s,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach((e=>{o.push({type:0,doc:e})})),new cd(e,t,sd.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gs(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}}class ud{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class pd{constructor(){this.queries=dd(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=li(e),r=n.queries;n.queries=dd(),r.forEach(((e,n)=>{for(const e of n.j_)e.onError(t)}))}(this,new ui(ci.ABORTED,"Firestore shutting down"))}}function dd(){return new xs((e=>ys(e)),gs)}async function hd(e,t){const n=li(e);let r=3;const i=t.query;let o=n.queries.get(i);o?!o.H_()&&t.J_()&&(r=2):(o=new ud,r=t.J_()?0:1);try{switch(r){case 0:o.z_=await n.onListen(i,!0);break;case 1:o.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=ad(e,`Initialization of query '${_s(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,o),o.j_.push(t),t.Z_(n.onlineState),o.z_&&t.X_(o.z_)&&yd(n)}async function md(e,t){const n=li(e),r=t.query;let i=3;const o=n.queries.get(r);if(o){const e=o.j_.indexOf(t);e>=0&&(o.j_.splice(e,1),0===o.j_.length?i=t.J_()?0:1:!o.H_()&&t.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function fd(e,t){const n=li(e);let r=!1;for(const e of t){const t=e.query,i=n.queries.get(t);if(i){for(const t of i.j_)t.X_(e)&&(r=!0);i.z_=e}}r&&yd(n)}function gd(e,t,n){const r=li(e),i=r.queries.get(t);if(i)for(const e of i.j_)e.onError(n);r.queries.delete(t)}function yd(e){e.Y_.forEach((e=>{e.next()}))}var _d,vd;(vd=_d||(_d={})).ea="default",vd.Cache="cache";class bd{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new cd(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=cd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==_d.Cache}}class wd{constructor(e){this.key=e}}class xd{constructor(e){this.key=e}}class Sd{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ns(),this.mutatedKeys=Ns(),this.Aa=bs(e),this.Ra=new sd(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new ld,r=t?t.Ra:this.Ra;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const s="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=vs(this.query,t)?t:null,p=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let h=!1;c&&u?c.data.isEqual(u.data)?p!==d&&(n.track({type:3,doc:u}),h=!0):this.ga(c,u)||(n.track({type:2,doc:u}),h=!0,(s&&this.Aa(u,s)>0||l&&this.Aa(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),h=!0):c&&!u&&(n.track({type:1,doc:c}),h=!0,(s||l)&&(a=!0)),h&&(u?(o=o.add(u),i=d?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ra:o,fa:n,ns:a,mutatedKeys:i}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ai()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc))),this.pa(n),r=null!=r&&r;const a=t&&!r?this.ya():[],s=0===this.da.size&&this.current&&!r?1:0,l=s!==this.Ea;return this.Ea=s,0!==o.length||l?{snapshot:new cd(this.query,e.Ra,i,o,e.mutatedKeys,0===s,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new ld,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((e=>this.Ta=this.Ta.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Ta=this.Ta.delete(e))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ns(),this.Ra.forEach((e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))}));const t=[];return e.forEach((e=>{this.da.has(e)||t.push(new xd(e))})),this.da.forEach((n=>{e.has(n)||t.push(new wd(n))})),t}ba(e){this.Ta=e.Ts,this.da=Ns();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return cd.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class Td{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Ed{constructor(e){this.key=e,this.va=!1}}class Id{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new xs((e=>ys(e)),gs),this.Ma=new Map,this.xa=new Set,this.Oa=new Bo(Ci.comparator),this.Na=new Map,this.La=new Vu,this.Ba={},this.ka=new Map,this.qa=gu.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function kd(e,t,n=!0){const r=Wd(e);let i;const o=r.Fa.get(t);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=await Ad(r,t,n,!0),i}async function jd(e,t){const n=Wd(e);await Ad(n,t,!0,!1)}async function Ad(e,t,n,r){const i=await function(e,t){const n=li(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Ur.getTargetData(e,t).next((i=>i?(r=i,Gi.resolve(r)):n.Ur.allocateTargetId(e).next((i=>(r=new hc(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e}))}(e.localStore,hs(t)),o=i.targetId,a=e.sharedClientState.addLocalQueryTarget(o,n);let s;return r&&(s=await async function(e,t,n,r,i){e.Ka=(t,n,r)=>async function(e,t,n,r){let i=t.view.ma(n);i.ns&&(i=await pp(e.localStore,t.query,!1).then((({documents:e})=>t.view.ma(e,i))));const o=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),s=t.view.applyChanges(i,e.isPrimaryClient,o,a);return Vd(e,t.targetId,s.wa),s.snapshot}(e,t,n,r);const o=await pp(e.localStore,t,!0),a=new Sd(t,o.Ts),s=a.ma(o.documents),l=Il.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=a.applyChanges(s,e.isPrimaryClient,l);Vd(e,n,c.wa);const u=new Td(t,n,a);return e.Fa.set(t,u),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),c.snapshot}(e,t,o,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&Np(e.remoteStore,i),s}async function Cd(e,t,n){const r=li(e),i=r.Fa.get(t),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter((e=>!gs(e,t)))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await up(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Rp(r.remoteStore,i.targetId),Bd(r,i.targetId)})).catch(Vi)):(Bd(r,i.targetId),await up(r.localStore,i.targetId,!0))}async function Od(e,t){const n=li(e),r=n.Fa.get(t),i=n.Ma.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Rp(n.remoteStore,r.targetId))}async function Md(e,t){const n=li(e);try{const e=await function(e,t){const n=li(e),r=t.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];t.targetChanges.forEach(((o,s)=>{const l=i.get(s);if(!l)return;a.push(n.Ur.removeMatchingKeys(e,o.removedDocuments,s).next((()=>n.Ur.addMatchingKeys(e,o.addedDocuments,s))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?c=c.withResumeToken(Wo.EMPTY_BYTE_STRING,Ei.min()).withLastLimboFreeSnapshotVersion(Ei.min()):o.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(o.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,o)&&a.push(n.Ur.updateTargetData(e,c))}));let s=Ts(),l=Ns();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push(function(e,t,n){let r=Ns(),i=Ns();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Ts();return n.forEach(((n,o)=>{const a=e.get(n);o.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(Ei.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):ni("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)})),{Ps:r,Is:i}}))}(e,o,t.documentUpdates).next((e=>{s=e.Ps,l=e.Is}))),!r.isEqual(Ei.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next((t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r)));a.push(t)}return Gi.waitFor(a).next((()=>o.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,s,l))).next((()=>s))})).then((e=>(n.os=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Na.get(t);r&&(si(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?si(r.va):e.removedDocuments.size>0&&(si(r.va),r.va=!1))})),await $d(n,e,t)}catch(e){await Vi(e)}}function Nd(e,t,n){const r=li(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach(((n,r)=>{const i=r.view.Z_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=li(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const e of n.j_)e.Z_(t)&&(r=!0)})),r&&yd(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Rd(e,t,n){const r=li(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Na.get(t),o=i&&i.key;if(o){let e=new Bo(Ci.comparator);e=e.insert(o,Aa.newNoDocument(o,Ei.min()));const n=Ns().add(o),i=new El(Ei.min(),new Map,new Bo(wi),e,n);await Md(r,i),r.Oa=r.Oa.remove(o),r.Na.delete(t),zd(r)}else await up(r.localStore,t,!1).then((()=>Bd(r,t,n))).catch(Vi)}async function Pd(e,t){const n=li(e),r=t.batch.batchId;try{const e=await function(e,t){const n=li(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let a=Gi.resolve();return o.forEach((e=>{a=a.next((()=>r.getEntry(t,e))).next((t=>{const o=n.docVersions.get(e);si(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),a.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Ns();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Fd(n,r,null),Ld(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await $d(n,e)}catch(e){await Vi(e)}}async function Dd(e,t,n){const r=li(e);try{const e=await function(e,t){const n=li(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(si(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Fd(r,t,n),Ld(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await $d(r,e)}catch(n){await Vi(n)}}function Ld(e,t){(e.ka.get(t)||[]).forEach((e=>{e.resolve()})),e.ka.delete(t)}function Fd(e,t,n){const r=li(e);let i=r.Ba[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Ba[r.currentUser.toKey()]=i}}function Bd(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach((t=>{e.La.containsKey(t)||Ud(e,t)}))}function Ud(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(Rp(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),zd(e))}function Vd(e,t,n){for(const r of n)r instanceof wd?(e.La.addReference(r.key,t),Gd(e,r)):r instanceof xd?(ni("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||Ud(e,r.key)):ai()}function Gd(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(ni("SyncEngine","New document in limbo: "+n),e.xa.add(r),zd(e))}function zd(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new Ci(ki.fromString(t)),r=e.qa.next();e.Na.set(r,new Ed(n)),e.Oa=e.Oa.insert(n,r),Np(e.remoteStore,new hc(hs(cs(n.path)),r,"TargetPurposeLimboResolution",to.oe))}}async function $d(e,t,n){const r=li(e),i=[],o=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach(((e,s)=>{a.push(r.Ka(s,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(s.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(s.targetId,i?"current":"not-current")}if(e){i.push(e);const t=np.Wi(s.targetId,e);o.push(t)}})))})),await Promise.all(a),r.Ca.d_(i),await async function(e,t){const n=li(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Gi.forEach(t,(t=>Gi.forEach(t.$i,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Gi.forEach(t.Ui,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Ki(e))throw e;ni("LocalStore","Failed to update sequence numbers: "+e)}for(const e of t){const t=e.targetId;if(!e.fromCache){const e=n.os.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(t,i)}}}(r.localStore,o))}async function qd(e,t){const n=li(e);if(!n.currentUser.isEqual(t)){ni("SyncEngine","User change. New user:",t.toKey());const e=await sp(n.localStore,t);n.currentUser=t,function(e){e.ka.forEach((e=>{e.forEach((e=>{e.reject(new ui(ci.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.ka.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await $d(n,e.hs)}}function Hd(e,t){const n=li(e),r=n.Na.get(t);if(r&&r.va)return Ns().add(r.key);{let e=Ns();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}function Wd(e){const t=li(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Md.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Hd.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Rd.bind(null,t),t.Ca.d_=fd.bind(null,t.eventManager),t.Ca.$a=gd.bind(null,t.eventManager),t}function Kd(e){const t=li(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Pd.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Dd.bind(null,t),t}class Xd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Sp(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return ap(this.persistence,new ip,e.initialUser,this.serializer)}Ga(e){return new Wu(Xu.Zr,this.serializer)}Wa(e){return new hp}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xd.provider={build:()=>new Xd};class Yd extends Xd{constructor(e,t,n){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await Kd(this.Ja.syncEngine),await Wp(this.Ja.remoteStore),await this.persistence.yi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}za(e){return ap(this.persistence,new ip,e.initialUser,this.serializer)}ja(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new Su(n,e.asyncQueue,t)}Ha(e,t){const n=new eo(t,this.persistence);return new Zi(e.asyncQueue,n)}Ga(e){const t=function(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?lu.withCacheSize(this.cacheSizeBytes):lu.DEFAULT;return new Zu(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,"undefined"!=typeof window?window:null,xp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new hp}}class Jd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Nd(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=qd.bind(null,this.syncEngine),await async function(e,t){const n=li(e);t?(n.L_.delete(2),await Op(n)):t||(n.L_.add(2),await Mp(n),n.q_.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new pd}createDatastore(e){const t=Sp(e.databaseInfo.databaseId),n=function(e){return new wp(e)}(e.databaseInfo);return function(e,t,n,r){return new jp(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Cp(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Nd(this.syncEngine,e,0)),fp.D()?new fp:new mp)}createSyncEngine(e,t){return function(e,t,n,r,i,o,a){const s=new Id(e,t,n,r,i,o);return a&&(s.Qa=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=li(e);ni("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await Mp(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Jd.provider={build:()=>new Jd};class Qd{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ri("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class Zd{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Qr.UNAUTHENTICATED,this.clientId=bi.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{ni("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(ni("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=ad(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function eh(e,t){e.asyncQueue.verifyOperationInProgress(),ni("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await sp(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function th(e,t){e.asyncQueue.verifyOperationInProgress();const n=await async function(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ni("FirestoreClient","Using user provided OfflineComponentProvider");try{await eh(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===ci.FAILED_PRECONDITION||e.code===ci.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;ii("Error using user provided cache. Falling back to memory cache: "+n),await eh(e,new Xd)}}else ni("FirestoreClient","Using default OfflineComponentProvider"),await eh(e,new Xd);return e._offlineComponents}(e);ni("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>nd(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>nd(t.remoteStore,n))),e._onlineComponents=t}async function nh(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ni("FirestoreClient","Using user provided OnlineComponentProvider"),await th(e,e._uninitializedComponentsProvider._online)):(ni("FirestoreClient","Using default OnlineComponentProvider"),await th(e,new Jd))),e._onlineComponents}async function rh(e){const t=await nh(e),n=t.eventManager;return n.onListen=kd.bind(null,t.syncEngine),n.onUnlisten=Cd.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=jd.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Od.bind(null,t.syncEngine),n}function ih(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const oh=new Map;function ah(e,t,n){if(!n)throw new ui(ci.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function sh(e){if(!Ci.isDocumentKey(e))throw new ui(ci.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function lh(e){if(Ci.isDocumentKey(e))throw new ui(ci.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function ch(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":ai()}function uh(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ui(ci.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ch(e);throw new ui(ci.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class ph{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new ui(ci.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ui(ci.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new ui(ci.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")})(0,e.experimentalForceLongPolling,0,e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ih(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new ui(ci.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new ui(ci.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new ui(ci.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dh{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ph({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ui(ci.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ui(ci.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ph(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new hi;switch(e.type){case"firstParty":return new gi(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ui(ci.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=oh.get(e);t&&(ni("ComponentProvider","Removing Datastore"),oh.delete(e),t.terminate())}(this),Promise.resolve()}}class hh{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new hh(this.firestore,e,this._query)}}class mh{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fh(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mh(this.firestore,e,this._key)}}class fh extends hh{constructor(e,t,n){super(e,t,cs(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mh(this.firestore,null,new Ci(e))}withConverter(e){return new fh(this.firestore,e,this._path)}}function gh(e,t,...n){if(e=Wt(e),ah("collection","path",t),e instanceof dh){const r=ki.fromString(t,...n);return lh(r),new fh(e,null,r)}{if(!(e instanceof mh||e instanceof fh))throw new ui(ci.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ki.fromString(t,...n));return lh(r),new fh(e.firestore,null,r)}}function yh(e,t,...n){if(e=Wt(e),1===arguments.length&&(t=bi.newId()),ah("doc","path",t),e instanceof dh){const r=ki.fromString(t,...n);return sh(r),new mh(e,null,new Ci(r))}{if(!(e instanceof mh||e instanceof fh))throw new ui(ci.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ki.fromString(t,...n));return sh(r),new mh(e.firestore,e instanceof fh?e.converter:null,new Ci(r))}}class _h{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Tp(this,"async_queue_retry"),this.Vu=()=>{const e=xp();e&&ni("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=xp();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=xp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new pi;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ki(e))throw e;ni("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw ri("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.du=!1,e))))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=od.createAndSchedule(this,e,t,n,(e=>this.yu(e)));return this.Tu.push(r),r}fu(){this.Eu&&ai()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class vh extends dh{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new _h,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _h(e),this._firestoreClient=void 0,await e}}}function bh(e){if(e._terminated)throw new ui(ci.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||function(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new ta(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,ih(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Zd(e._authCredentials,e._appCheckCredentials,e._queue,o,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}(e),e._firestoreClient}class wh{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wh(Wo.fromBase64String(e))}catch(e){throw new ui(ci.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new wh(Wo.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class xh{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ui(ci.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ai(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Sh{constructor(e){this._methodName=e}}class Th{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ui(ci.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ui(ci.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return wi(this._lat,e._lat)||wi(this._long,e._long)}}class Eh{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const Ih=/^__.*__$/;class kh{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new sl(e,this.data,this.fieldMask,t,this.fieldTransforms):new al(e,this.data,t,this.fieldTransforms)}}function jh(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ai()}}class Ah{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Ah(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Gh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(jh(this.Cu)&&Ih.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Ch{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Sp(e)}Qu(e,t,n,r=!1){return new Ah({Cu:e,methodName:t,qu:n,path:Ai.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Oh(e){const t=e._freezeSettings(),n=Sp(e._databaseId);return new Ch(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Mh(e,t,n,r,i,o={}){const a=e.Qu(o.merge||o.mergeFields?2:0,t,n,i);Fh("Data must be an object, but it was:",a,r);const s=Dh(r,a);let l,c;if(o.merge)l=new qo(a.fieldMask),c=a.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=Bh(t,r,n);if(!a.contains(i))throw new ui(ci.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);zh(e,i)||e.push(i)}l=new qo(e),c=a.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=a.fieldTransforms;return new kh(new ka(s),l,c)}class Nh extends Sh{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new Ws(e.serializer,Ls(e.serializer,this.$u));return new Ys(e.path,t)}isEqual(e){return e instanceof Nh&&this.$u===e.$u}}function Rh(e,t,n,r=!1){return Ph(n,e.Qu(r?4:3,t))}function Ph(e,t){if(Lh(e=Wt(e)))return Fh("Unsupported field value:",t,e),Dh(e,t);if(e instanceof Sh)return function(e,t){if(!jh(t.Cu))throw t.Bu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Bu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Ph(i,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Wt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ls(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Ti.fromDate(e);return{timestampValue:Bl(t.serializer,n)}}if(e instanceof Ti){const n=new Ti(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Bl(t.serializer,n)}}if(e instanceof Th)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof wh)return{bytesValue:Ul(t.serializer,e._byteString)};if(e instanceof mh){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:zl(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Eh)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return Ps(t.serializer,e)}))}}}}}}(e,t);throw t.Bu(`Unsupported field value: ${ch(e)}`)}(e,t)}function Dh(e,t){const n={};return Fo(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Lo(e,((e,r)=>{const i=Ph(r,t.Mu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Lh(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ti||e instanceof Th||e instanceof wh||e instanceof mh||e instanceof Sh||e instanceof Eh)}function Fh(e,t,n){if(!Lh(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=ch(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}}function Bh(e,t,n){if((t=Wt(t))instanceof xh)return t._internalPath;if("string"==typeof t)return Vh(e,t);throw Gh("Field path arguments must be of type string or ",e,!1,void 0,n)}const Uh=new RegExp("[~\\*/\\[\\]]");function Vh(e,t,n){if(t.search(Uh)>=0)throw Gh(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new xh(...t.split("."))._internalPath}catch(r){throw Gh(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Gh(e,t,n,r,i){const o=r&&!r.isEmpty(),a=void 0!==i;let s=`Function ${t}() called with invalid data`;n&&(s+=" (via `toFirestore()`)"),s+=". ";let l="";return(o||a)&&(l+=" (found",o&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new ui(ci.INVALID_ARGUMENT,s+e+l)}function zh(e,t){return e.some((e=>e.isEqual(t)))}class $h{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new mh(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new qh(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Hh("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class qh extends $h{data(){return super.data()}}function Hh(e,t){return"string"==typeof t?Vh(e,t):t instanceof xh?t._internalPath:t._delegate._internalPath}class Wh{}class Kh extends Wh{}function Xh(e,t,...n){let r=[];t instanceof Wh&&r.push(t),r=r.concat(n),function(e){const t=e.filter((e=>e instanceof Jh)).length,n=e.filter((e=>e instanceof Yh)).length;if(t>1||t>0&&n>0)throw new ui(ci.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const t of r)e=t._apply(e);return e}class Yh extends Kh{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Yh(e,t,n)}_apply(e){const t=this._parse(e);return im(e._query,t),new hh(e.firestore,e.converter,ms(e._query,t))}_parse(e){const t=Oh(e.firestore),n=function(e,t,n,r,i,o,a){let s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new ui(ci.INVALID_ARGUMENT,`Invalid Query. You can't perform '${o}' queries on documentId().`);if("in"===o||"not-in"===o){rm(a,o);const t=[];for(const n of a)t.push(nm(r,e,n));s={arrayValue:{values:t}}}else s=nm(r,e,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||rm(a,o),s=Rh(n,"where",a,"in"===o||"not-in"===o);return Da.create(i,o,s)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class Jh extends Wh{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Jh(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:La.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const e of r)im(n,e),n=ms(n,e)}(e._query,t),new hh(e.firestore,e.converter,ms(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Qh extends Kh{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Qh(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new ui(ci.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new ui(ci.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Na(t,n)}(e._query,this._field,this._direction);return new hh(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new ls(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class Zh extends Kh{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Zh(e,t,n)}_apply(e){return new hh(e.firestore,e.converter,fs(e._query,this._limit,this._limitType))}}function em(e){return function(e,t){if(t<=0)throw new ui(ci.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}("limit",e),Zh._create("limit",e,"F")}class tm extends Kh{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new tm(e,t,n)}_apply(e){const t=function(e,t,n,r){if(n[0]=Wt(n[0]),n[0]instanceof $h)return function(e,t,n,r,i){if(!r)throw new ui(ci.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const o=[];for(const n of ds(e))if(n.field.isKeyField())o.push(ha(t,r.key));else{const e=r.data.field(n.field);if(Qo(e))throw new ui(ci.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+n.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=n.field.canonicalString();throw new ui(ci.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}o.push(e)}return new Ca(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=Oh(e.firestore);return function(e,t,n,r,i,o){const a=e.explicitOrderBy;if(i.length>a.length)throw new ui(ci.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const s=[];for(let o=0;o<i.length;o++){const l=i[o];if(a[o].field.isKeyField()){if("string"!=typeof l)throw new ui(ci.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof l}`);if(!ps(e)&&-1!==l.indexOf("/"))throw new ui(ci.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${r}() must be a plain document ID, but '${l}' contains a slash.`);const n=e.path.child(ki.fromString(l));if(!Ci.isDocumentKey(n))throw new ui(ci.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new Ci(n);s.push(ha(t,i))}else{const e=Rh(n,r,l);s.push(e)}}return new Ca(s,o)}(e._query,e.firestore._databaseId,i,t,n,r)}}(e,this.type,this._docOrFields,this._inclusive);return new hh(e.firestore,e.converter,function(e,t){return new ls(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}function nm(e,t,n){if("string"==typeof(n=Wt(n))){if(""===n)throw new ui(ci.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ps(t)&&-1!==n.indexOf("/"))throw new ui(ci.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ki.fromString(n));if(!Ci.isDocumentKey(r))throw new ui(ci.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ha(e,new Ci(r))}if(n instanceof mh)return ha(e,n._key);throw new ui(ci.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ch(n)}.`)}function rm(e,t){if(!Array.isArray(e)||0===e.length)throw new ui(ci.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function im(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new ui(ci.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ui(ci.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class om{convertValue(e,t="none"){switch(oa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yo(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Jo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ai()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Lo(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((e=>Yo(e.doubleValue)));return new Eh(i)}convertGeoPoint(e){return new Th(Yo(e.latitude),Yo(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Zo(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ea(e));default:return null}}convertTimestamp(e){const t=Xo(e);return new Ti(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ki.fromString(e);si(dc(n));const r=new na(n.get(1),n.get(3)),i=new Ci(n.popFirst(5));return r.isEqual(t)||ri(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function am(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class sm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lm extends $h{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new cm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Hh("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class cm extends lm{data(e={}){return super.data(e)}}class um{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new sm(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new cm(this._firestore,this._userDataWriter,n.key,n,new sm(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ui(ci.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new cm(e._firestore,e._userDataWriter,n.doc.key,n.doc,new sm(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new cm(e._firestore,e._userDataWriter,t.doc.key,t.doc,new sm(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:pm(t.type),doc:r,oldIndex:i,newIndex:o}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function pm(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ai()}}function dm(e){e=uh(e,mh);const t=uh(e.firestore,vh);return function(e,t,n={}){const r=new pi;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new Qd({next:s=>{o.Za(),t.enqueueAndForget((()=>md(e,a)));const l=s.docs.has(n);!l&&s.fromCache?i.reject(new ui(ci.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&s.fromCache&&r&&"server"===r.source?i.reject(new ui(ci.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),a=new bd(cs(n.path),o,{includeMetadataChanges:!0,_a:!0});return hd(e,a)}(await rh(e),e.asyncQueue,t,n,r))),r.promise}(bh(t),e._key).then((n=>function(e,t,n){const r=n.docs.get(t._key),i=new hm(e);return new lm(e,i,t._key,r,new sm(n.hasPendingWrites,n.fromCache),t.converter)}(t,e,n)))}class hm extends om{constructor(e){super(),this.firestore=e}convertBytes(e){return new wh(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mh(this.firestore,null,t)}}function mm(e){e=uh(e,hh);const t=uh(e.firestore,vh),n=bh(t),r=new hm(t);return function(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ui(ci.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(e._query),function(e,t,n={}){const r=new pi;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new Qd({next:n=>{o.Za(),t.enqueueAndForget((()=>md(e,a))),n.fromCache&&"server"===r.source?i.reject(new ui(ci.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new bd(n,o,{includeMetadataChanges:!0,_a:!0});return hd(e,a)}(await rh(e),e.asyncQueue,t,n,r))),r.promise}(n,e._query).then((n=>new um(t,r,e,n)))}function fm(e,t,n){e=uh(e,mh);const r=uh(e.firestore,vh),i=am(e.converter,t,n);return ym(r,[Mh(Oh(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Qs.none())])}function gm(e,t){const n=uh(e.firestore,vh),r=yh(e),i=am(e.converter,t);return ym(n,[Mh(Oh(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Qs.exists(!1))]).then((()=>r))}function ym(e,t){return function(e,t){const n=new pi;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Kd(e);try{const e=await function(e,t){const n=li(e),r=Ti.now(),i=t.reduce(((e,t)=>e.add(t.key)),Ns());let o,a;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let s=Ts(),l=Ns();return n.cs.getEntries(e,i).next((e=>{s=e,s.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,s))).next((i=>{o=i;const a=[];for(const e of t){const t=il(e,o.get(e.key).overlayedDocument);null!=t&&a.push(new sl(e.key,t,ja(t.value.mapValue),Qs.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)})).next((t=>{a=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:a.batchId,changes:ks(o)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new Bo(wi)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await $d(r,e.changes),await Wp(r.remoteStore)}catch(e){const t=ad(e,"Failed to persist write");n.reject(t)}}(await function(e){return nh(e).then((e=>e.syncEngine))}(e),t,n))),n.promise}(bh(e),t)}class _m{constructor(e){let t;this.kind="persistent",(null==e?void 0:e.tabManager)?(e.tabManager._initialize(e),t=e.tabManager):(t=new bm(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function vm(e){return new _m(e)}class bm{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Jd.provider,this._offlineComponentProvider={build:t=>new Yd(t,null==e?void 0:e.cacheSizeBytes,this.forceOwnership)}}}function wm(e){return new Nh("increment",e)}new WeakMap,function(e,t=!0){!function(e){Zr=e}(mr),or(new Kt("firestore",((e,{instanceIdentifier:n,options:r})=>{const i=e.getProvider("app").getImmediate(),o=new vh(new mi(e.getProvider("auth-internal")),new _i(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ui(ci.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new na(e.options.projectId,t)}(i,n),i);return r=Object.assign({useFetchStreams:t},r),o._setSettings(r),o}),"PUBLIC").setMultipleInstances(!0)),br(Jr,"4.7.3",e),br(Jr,"4.7.3","esm2017")}(),br("firebase","10.14.1","app");var xm={dt:1/60,slop:.01,baumgarteCoefficientJointsV:2,baumgarteCoefficientJointsP:.7,baumgarteCoefficientFJointAV:2,baumgarteCoefficientRJointLimitAV:5,baumgarteCoefficientCollision:.2,jointStiffness:.6,clipPosition:15,clipVelocity:100,clipAngularVelocity:50,baseMotorSpeed:6,baseMotorPower:900,baseThrusterPower:10,motorDecayCoefficient:.1,motorJointLimit:.1,baseFriction:.4,pixelsPerUnit:100,numUnits:5,maxTimesteps:5,denseRewardScale:1,numShapeRoles:4},Sm={numPolygons:12,numCircles:4,numJoints:6,numThrusters:2,maxPolygonVertices:4,numSolverIterations:10,solverBatchSize:16,doWarmStarting:!0,numStaticFixatedPolys:4,screenDim:vt.array([500,500]),maxShapeSize:2,numMotorBindings:4,numThrusterBindings:2,frameSkip:1,downscale:1},Tm=function(e){console.assert(1==e.shape.length)},Em=function(e){console.assert(2==e.shape.length)};function Im(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}function km(e,t){return Tm(e),Tm(t),console.assert(2==e.shape[0]),e.get(0)*t.get(0)+e.get(1)*t.get(1)}function jm(e,t){return Tm(e),Tm(t),console.assert(2==e.shape[0]),e.get(0)*t.get(1)-e.get(1)*t.get(0)}function Am(e,t){return vt.array([-e*t.get(1),e*t.get(0)])}function Cm(e,t){return vt.array([t*e.get(1),-t*e.get(0)])}function Om(e,t){return Tm(t),Em(e),console.assert(2==e.shape[0]&&2==e.shape[1]&&2==t.shape[0]),vt.array([e.get(0,0)*t.get(0)+e.get(0,1)*t.get(1),e.get(1,0)*t.get(0)+e.get(1,1)*t.get(1)])}function Mm(e){return Math.sqrt(Nm(e))}function Nm(e){return km(e,e)}function Rm(e,t,n){return Math.min(Math.max(e,t),n)}function Pm(e,t,n){console.assert(Im(e.shape,t.shape)&&Im(e.shape,n.shape)&&1==e.shape.length);for(var r=e.clone(),i=0;i<e.shape[0];i++)r.set(i,Rm(e.get(i),t.get(i),n.get(i)));return r}function Dm(e){var t=Math.cos(e),n=Math.sin(e);return vt.array([[t,-n],[n,t]])}function Lm(e,t,n){Tm(e);for(var r=n,i=-1,o=0;o<e.shape[0];o++)t(e.get(o),r)&&(r=e.get(o),i=o);return i}function Fm(e){return 0==e?1:e}function Bm(e,t,n,r,i,o,a,s){var l=a.subtract(t),c=a.subtract(i),u=e.add(Am(n,l)),p=r.add(Am(o,c));return vt.array([km(p.subtract(u),s)])}function Um(e,t,n){var r=t.position.subtract(e.position),i=Mm(r),o=e.radius+t.radius,a=i<o&&e.active&&t.active;if(!a)return n.active=!1,n.accImpulseNormal=0,n.accImpulseTangent=0,n;var s=o-i,l=r.divide(i),c=e.position.add(l.multiply(e.radius)),u=Bm(e.velocity,e.position,e.angularVelocity,t.velocity,t.position,t.angularVelocity,c,l);console.assert(1==u.shape[0]);var p=u.get(0)*Math.min(e.restitution,t.restitution);return{normal:l,penetration:s,collisionPoint:c,active:a,accImpulseNormal:n.active&&a?n.accImpulseNormal:0,accImpulseTangent:n.active&&a?n.accImpulseTangent:0,restitutionVelocityTarget:p}}function Vm(e,t){var n=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var i=r[n];Em(i),t.push(i.T)}return vt.concatenate(t).T}([e.slice(1),e.slice([null,1])]);return n.set(t-1,0,e.get(0,0)),n.set(t-1,1,e.get(0,1)),n}function Gm(e,t){for(var n=Dm(e.rotation),r=Dm(t.rotation),i=vt.stack([Om(r,t.vertices.pick(0)).add(t.position),Om(r,t.vertices.pick(1)).add(t.position),Om(r,t.vertices.pick(2)).add(t.position),Om(r,t.vertices.pick(3)).add(t.position)],0),o=vt.stack([Om(n.transpose([1,0]),i.pick(0).subtract(e.position)),Om(n.transpose([1,0]),i.pick(1).subtract(e.position)),Om(n.transpose([1,0]),i.pick(2).subtract(e.position)),Om(n.transpose([1,0]),i.pick(3).subtract(e.position))],0),a=e.vertices,s=Dm(Math.PI/2),l=Vm(e.vertices,e.nVertices),c=-99999,u=-1,p=[0,0],d=function(n){var r=Wm(s,l.pick(n),e.vertices.pick(n)),i=(vt.array([-.2,0]),function(e,t){for(var n=[],i=0;i<t;i++)n.push(km(r,e.pick(i)));return vt.array(n)}),d=i(a,e.nVertices),h=i(o,t.nVertices),m=h.min()-d.max();if(m>c){c=m,u=n;var f=h.tolist().map((function(e,t){return[e,t]})).sort().map((function(e){return e[0],e[1]}));p=[f[0],f[1]]}},h=0;h<e.nVertices;h++)d(h);var m=vt.stack([i.pick(p[0]),i.pick(p[1])],0);return{highest_separation:c,highest_sep_axis_index:u,highest_sep_incident_face:m,v_world_space:i}}function zm(e,t){return 2==e.collisionMode||2==t.collisionMode||e.collisionMode*t.collisionMode>0}function $m(e,t,n){var r=Dm(t.rotation),i=Om(r.transpose([1,0]),e.position.subtract(t.position)),o=function(e,t,n){var r=function(e,t,n){return(t.get(0)-e.get(0))*(n.get(1)-e.get(1))-(t.get(1)-e.get(1))*(n.get(0)-e.get(0))}(e,t,n),i=n.subtract(t),o=Mm(i),a=Rm(km(i=i.divide(o),e.subtract(t)),0,o),s=t.add(i.multiply(a));return[r<0,s,Nm(s.subtract(e))]},a=Vm(t.vertices,t.nVertices),s=o(i,t.vertices.pick(0),a.pick(0)),l=s[0],c=s[1],u=s[2],p=o(i,t.vertices.pick(1),a.pick(1)),d=p[0],h=p[1],m=p[2],f=o(i,t.vertices.pick(2),a.pick(2)),g=f[0],y=f[1],_=f[2],v=o(i,t.vertices.pick(3),a.pick(3)),b=v[0],w=v[1],x=v[2],S=vt.stack([c,h,y,w]),T=[u,m,_];4==t.nVertices&&T.push(x);var E=function(e){return Lm(e,(function(e,t){return e<t}),1/0)}(vt.array(T)),I=S.pick(E),k=l&&d&&g&&(b||3==t.nVertices),j=I,A=i.subtract(j),C=Mm(A),O=e.radius,M=(C<=O||k)&&e.active&&t.active&&zm(t,e),N=Mm(A=Om(r,A).multiply(k?-1:1));A=A.divide(N).multiply(-1);var R=Om(r,j).add(t.position),P=Bm(e.velocity,e.position,e.angularVelocity,t.velocity,t.position,t.angularVelocity,R,A);console.assert(1==P.shape[0]);var D=P.get(0)*Math.min(e.restitution,t.restitution);return{normal:A,penetration:k?O:O-C,collisionPoint:R,active:M,accImpulseNormal:n.active&&M?n.accImpulseNormal:0,accImpulseTangent:n.active&&M?n.accImpulseTangent:0,restitutionVelocityTarget:D}}function qm(e,t,n,r){var i=n.collisionPoint.subtract(e.position),o=n.collisionPoint.subtract(t.position),a=Cm(n.normal,1),s=n.normal.multiply(n.accImpulseNormal).add(a.multiply(n.accImpulseTangent)),l=s.multiply(-e.inverseMass),c=s.multiply(t.inverseMass),u=-e.inverseInertia*jm(i,s),p=t.inverseInertia*jm(o,s);return n.active&&(0!=e.inverseMass||0!=t.inverseMass)&&r&&e.active&&t.active?{a_dv:l,a_drv:u,b_dv:c,b_drv:p,isColliding:!0}:{a_dv:vt.zeros(2),a_drv:0,b_dv:vt.zeros(2),b_drv:0,isColliding:!1}}function Hm(e,t,n,r,i){var o=n.collisionPoint.subtract(e.position),a=n.collisionPoint.subtract(t.position),s=e.velocity.add(Am(e.angularVelocity,o)),l=t.velocity.add(Am(t.angularVelocity,a)).subtract(s),c=km(l,n.normal),u=km(o,n.normal),p=km(a,n.normal),d=Nm(o),h=Nm(a),m=e.inverseMass+t.inverseMass,f=(e.inverseInertia,t.inverseInertia,m+e.inverseInertia*(d-u*u)+t.inverseInertia*(h-p*p)),g=-i.baumgarteCoefficientCollision/i.dt*Math.min(0,-n.penetration+i.slop),y=-1*(n.restitutionVelocityTarget+(c-g))/f,_=Rm(n.accImpulseNormal+y,0,Number.MAX_VALUE);y=_-n.accImpulseNormal;var v=n.normal.multiply(y),b=v.multiply(-e.inverseMass),w=v.multiply(t.inverseMass),x=-e.inverseInertia*jm(o,v),S=t.inverseInertia*jm(a,v);l=t.velocity.add(w).add(Am(t.angularVelocity+S,a)).subtract(e.velocity.add(b)).subtract(Am(e.angularVelocity+x,o));var T=Cm(n.normal,1),E=km(l,T),I=km(o,T),k=km(a,T),j=-E/(e.inverseMass+t.inverseMass+e.inverseInertia*(d-I*I)+t.inverseInertia*(h-k*k)),A=_*Math.sqrt(Math.pow(e.friction*i.baseFriction,2)+Math.pow(t.friction*i.baseFriction,2)),C=Rm(n.accImpulseTangent+j,-1*A,A),O=C-n.accImpulseTangent,M=T.multiply(O);b=b.subtract(M.multiply(e.inverseMass)),x-=e.inverseInertia*jm(o,M),w=w.add(M.multiply(t.inverseMass)),S+=t.inverseInertia*jm(a,M);var N=r&&e.active&&t.active&&n.active&&m>0;return{isColliding:N,a_dv:N?b:vt.zeros(2),a_drv:N?x:0,b_dv:N?w:vt.zeros(2),b_drv:N?S:0,newAccImpulseNormal:N?_:0*n.accImpulseNormal,newAccImpulseTangent:N?C:0*n.accImpulseTangent}}function Wm(e,t,n){Tm(n),Tm(t),Em(e);var r=t.subtract(n).clone(),i=Mm(r);return Om(e,r).divide(i)}function Km(e,t,n){Em(n),Em(t),Em(e);for(var r=[],i=0;i<t.shape[0];++i)r.push(Wm(e,t.pick(i),n.pick(i)));return vt.stack(r)}function Xm(e){for(var t=0;t<e.thruster.length;t++){var n=M(e,e.thruster[t].objectIndex);e.thruster[t].globalPosition=Om(Dm(n.rotation),e.thruster[t].relativePosition).add(n.position)}for(t=0;t<e.joint.length;t++)n=M(e,e.joint[t].aIndex),e.joint[t].globalPosition=Om(Dm(n.rotation),e.joint[t].aRelativePos).add(n.position);return e}function Ym(e,t,n,r){var i=Om(Dm(e.rotation),n),o=Om(Dm(t.rotation),r),a=i.add(e.position),s=o.add(t.position),l=Fm(e.inverseMass),c=Fm(t.inverseMass),u=a.divide(l).add(s.divide(c)).divide(1/l+1/c);return 0==e.inverseMass?u=a:0==t.inverseMass&&(u=s),{joint_point:u,a_point:a,b_point:s,r_a:i,r_b:o}}function Jm(e,t,n,r){if(0==e.inverseMass&&0==t.inverseMass||!n.active||!e.active||!t.active)return{a_dv:vt.zeros(2),b_dv:vt.zeros(2),a_drv:0,b_drv:0,a_dp:vt.zeros(2),b_dp:vt.zeros(2),jointPoint:vt.zeros(2),accImpulse:vt.zeros(2),accRImpulse:0};var i=Fm(e.inverseMass+t.inverseMass),o=Fm(e.inverseInertia+t.inverseInertia),a=Ym(e,t,n.aRelativePos,n.bRelativePos),s=a.joint_point,l=a.a_point,c=a.b_point,u=a.r_a,p=a.r_b,d=e.velocity.add(Am(e.angularVelocity,s.subtract(e.position))),h=t.velocity.add(Am(t.angularVelocity,s.subtract(t.position))).subtract(d),m=h;m=m.divide(Fm(Mm(m)));var f=h.add(c.subtract(l).multiply(r.baumgarteCoefficientJointsV)).divide(i+Math.pow(jm(u,m),2)*e.inverseInertia+Math.pow(jm(p,m),2)*t.inverseInertia).multiply(r.jointStiffness),g=f.multiply(e.inverseMass),y=jm(u,f)*e.inverseInertia,_=f.multiply(-1).multiply(t.inverseMass),v=-jm(p,f)*t.inverseInertia,b=c.subtract(l).divide(i),w=b.multiply(e.inverseMass*r.baumgarteCoefficientJointsP),x=b.multiply(t.inverseMass*r.baumgarteCoefficientJointsP).multiply(-1),S=t.rotation-e.rotation-n.rotation,T=Rm(S,n.minRotation,n.maxRotation),E=(S-T)*r.baumgarteCoefficientRJointLimitAV,I=(t.rotation-e.rotation-n.rotation)*r.baumgarteCoefficientFJointAV,k=t.angularVelocity+v-e.angularVelocity-y,j=(n.isFixedJoint?k+I:Math.sign(k)==Math.sign(E)?k+E:0)/o;n.isFixedJoint||n.motorHasJointLimits&&T!=S||(j=0),y+=j*e.inverseInertia,v-=j*t.inverseInertia;var A=0;return n.isFixedJoint&&(A=j+n.accRImpulse),{a_dv:g,b_dv:_,a_drv:y,b_drv:v,a_dp:w,b_dp:x,jointPoint:s,accImpulse:f.add(n.accImpulse),accRImpulse:A}}function Qm(e,t,n){if(0==e.inverseMass&&0==t.inverseMass||!n.active||!e.active||!t.active)return{a_dv:vt.zeros(2),b_dv:vt.zeros(2),a_drv:0,b_drv:0};var r=n.accImpulse,i=Om(Dm(e.rotation),n.aRelativePos),o=Om(Dm(t.rotation),n.bRelativePos),a=r.multiply(e.inverseMass),s=r.multiply(-1).multiply(t.inverseMass),l=jm(i,r)*e.inverseInertia,c=-jm(o,r)*t.inverseInertia,u=n.accRImpulse;return{a_dv:a,b_dv:s,a_drv:l+=u*e.inverseInertia,b_drv:c-=u*t.inverseInertia}}function Zm(e,t,n,r,i,o,a,s,l){var c=function(e,t,n){return{arr1:t.aIndex<n.numPolygons?e.polygon:e.circle,arr2:t.bIndex<n.numPolygons?e.polygon:e.circle,ia:t.aIndex<n.numPolygons?t.aIndex:t.aIndex-n.numPolygons,ib:t.bIndex<n.numPolygons?t.bIndex:t.bIndex-n.numPolygons}}(e,t,n),u=c.arr1,p=c.arr2,d=c.ia,h=c.ib;return u[d].velocity.add(r,!1),u[d].angularVelocity+=i,null!=s&&u[d].position.add(s,!1),p[h].velocity.add(o,!1),p[h].angularVelocity+=a,null!=l&&p[h].position.add(l,!1),e}function ef(e,t,n){for(var r=0;r<n.numJoints;++r){var i=e.joint[r];if(i.active){var o=Jm(M(e,i.aIndex),M(e,i.bIndex),i,t),a=o.a_dv,s=o.b_dv,l=o.a_drv,c=o.b_drv,u=o.a_dp,p=o.b_dp,d=o.jointPoint,h=o.accImpulse,m=o.accRImpulse;e.joint[r].accImpulse=h,e.joint[r].accRImpulse=m,e.joint[r].globalPosition=d,e=Zm(e,i,n,a,l,s,c,u,p)}}return e}function tf(e,t,n,r,i){if(!(e.active&&t.active&&n.active&&n.motorOn)||n.isFixedJoint||0==r)return{a_drv:0,b_drv:0};var o=1/Fm(e.inverseInertia+t.inverseInertia),a=i.baseMotorPower*n.motorPower*i.dt*o,s=t.angularVelocity-e.angularVelocity-n.motorSpeed*r*i.baseMotorSpeed,l=Math.tanh(s*i.motorDecayCoefficient);if(!n.isFixedJoint&&n.motorHasJointLimits){var c=t.rotation-e.rotation-n.rotation,u=c-Rm(c,n.minRotation+i.motorJointLimit,n.maxRotation-i.motorJointLimit);a*=Math.max(0!=u&&n.motorHasJointLimits?Math.max(0,1-Math.abs(u/i.motorJointLimit)):1,Math.sign(u)!=Math.sign(r)?1:0)}return{a_drv:a*l*e.inverseInertia,b_drv:-a*l*t.inverseInertia}}var nf=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};function rf(e,t){for(var n=0;n<e.length;n++)e[n].active&&(e[n]=t(e[n]));return e}var of=function(e,t,n){return e.velocity.add(t,!1),e.angularVelocity+=n,e};function af(e,t,n,r,i){for(var o=r?e.polygon:e.circle,a=i?e.polygon:e.circle,s=[],l=0;l<t.length;l++){var c=t[l];(u=qm(o[c.indexA],a[c.indexB],c.manifold,1==e.collisionMatrix.get(sf(c.indexA,r,n),sf(c.indexB,i,n)))).isColliding&&s.push({indexA:c.indexA,indexB:c.indexB,ret:u})}for(l=0;l<s.length;l++){var u=s[l],p=r?e.polygon:e.circle,d=i?e.polygon:e.circle;of(p[u.indexA],u.ret.a_dv,u.ret.a_drv),of(d[u.indexB],u.ret.b_dv,u.ret.b_drv)}return e}function sf(e,t,n){return t?e:e+n.numPolygons}function lf(e,t,n,r,i,o,a){var s=r?e.polygon:e.circle,l=i?e.polygon:e.circle,c=r&&i,u=[],p=function(e,t){for(var a=[],c=0;c<t.length;c++){var p=t[c];if(null!=p&&p.manifold.active){var d=Hm(s[p.indexA],l[p.indexB],p.manifold,1==e.collisionMatrix.get(sf(p.indexA,r,n),sf(p.indexB,i,n)),o);p.manifold.accImpulseNormal=d.newAccImpulseNormal,p.manifold.accImpulseTangent=d.newAccImpulseTangent,u.push(p),d.isColliding&&a.push({indexA:p.indexA,indexB:p.indexB,ret:d})}}for(var h=0,m=a;h<m.length;h++){d=m[h];var f=r?e.polygon:e.circle,g=i?e.polygon:e.circle;of(f[d.indexA],d.ret.a_dv,d.ret.a_drv),of(g[d.indexB],d.ret.b_dv,d.ret.b_drv)}return e},d=[];if(c){for(var h=[],m=0;m<t.length;m++)0==t[m].manifoldSecondaryIndex?h.push(t[m]):d.push(t[m]);t=h}var f=[];for(m=0;m<a-t.length;m++)f.push(null);var g=f.concat(t),y=f.concat(d),_=[];for(m=0;m<g.length;m++)null==g[m]?_.push(!1):c?_.push(g[m].manifold.active||y[m].manifold.active):_.push(g[m].manifold.active);var v=_.map((function(e,t){return[e,t]})).sort().map((function(e){return e[0],e[1]})),b=n.solverBatchSize,w=Math.ceil(g.length/b);for(m=0;m<w*b-g.length;m++)v.push(-1);var x=vt.array(v).reshape(b,w).T,S=function(e,t){for(var n=0;n<w;++n){for(var r=[],i=0;i<b;++i){var o=x.get(n,i);r.push(-1==o?null:t[o])}e=p(e,r)}return e};return e=S(e,g),c&&(e=S(e,y)),e}function cf(e){for(var t=0,n=[],r=[],i=[],o=0;o<e.numCircles;o++)for(var a=o+1;a<e.numCircles;a++)t++,n.push([o,a]);var s=t;for(t=0,o=0;o<e.numPolygons;o++)for(a=o+1;a<e.numPolygons;a++)o<e.numStaticFixatedPolys&&a<e.numStaticFixatedPolys||(t++,r.push([o,a]));var l=t;for(t=0,o=0;o<e.numCircles;o++)for(a=0;a<e.numPolygons;a++)t++,i.push([o,a]);return{ncc:s,ncp:t,npp:l,ccIndices:n,cpIndices:i,ppIndices:r}}var uf=function(){function e(e,t){this.staticEnvParams=e,this.envParams=t}return e.prototype.step=function(e,t){var n=this;console.assert(t.shape[0]==this.staticEnvParams.numThrusters+this.staticEnvParams.numJoints);var r=t.slice([0,this.staticEnvParams.numJoints]),i=t.slice(this.staticEnvParams.numJoints),o=function(t){return t.velocity.add(e.gravity.multiply(0==t.inverseMass?0:n.envParams.dt),!1),t},a=function(e){return function(e){return e.velocity=vt.clip(e.velocity,-n.envParams.clipVelocity,n.envParams.clipVelocity),e}(e=function(e){return e.rotation+=e.angularVelocity*n.envParams.dt,e}(e=function(e){return e.position.add(e.velocity.multiply(0==e.inverseMass?0:n.envParams.dt),!1),e}(e)))};e.polygon=rf(e.polygon,o),e.circle=rf(e.circle,o);for(var s=[],l=[],c=[],u=cf(this.staticEnvParams),p=u.ncc,d=u.ncp,h=u.npp,m=u.ccIndices,f=u.cpIndices,g=u.ppIndices,y=0;y<p;y++){var _=m[y],v=_[0],b=_[1],w=e.circle[v],x=e.circle[b];w.active&&x.active&&(T=Um(w,x,e.accCCManifolds[y])).active&&s.push({indexA:v,indexB:b,manifold:T,manifoldIndex:y,manifoldSecondaryIndex:0})}var S=function(t){var n=g[t],r=n[0],i=n[1],o=e.polygon[r],a=e.polygon[i];if(!o.active||!a.active)return"continue";var s=function(e,t,n){var r=Gm(e,t),i=r.highest_separation,o=r.highest_sep_axis_index,a=r.highest_sep_incident_face,s=r.v_world_space,l=Gm(t,e),c=l.highest_separation,u=l.highest_sep_axis_index,p=l.highest_sep_incident_face,d=l.v_world_space,h=i+.01<c,m=Math.max(i,c),f=m<0&&e.active&&t.active&&zm(e,t);if(!f)return n.cm1.active=!1,n.cm2.active=!1,n;var g,y,_=Dm(e.rotation),v=Dm(t.rotation);h?(g=vt.stack([s.pick(u),s.pick((u+1)%t.nVertices)]),y=p):(g=vt.stack([d.pick(o),d.pick((o+1)%e.nVertices)]),y=a);var b,w=Dm(Math.PI+Math.atan2(g.pick(0).subtract(g.pick(1)).get(0),g.pick(0).subtract(g.pick(1)).get(1))),x=Mm(g.pick(0).subtract(g.pick(1))),S=vt.stack([Om(w,y.pick(0).subtract(g.pick(0))),Om(w,y.pick(1).subtract(g.pick(0)))]),T=vt.stack([Pm(S.pick(0),vt.array([-99999,0]),vt.array([999999,x])),Pm(S.pick(1),vt.array([-99999,0]),vt.array([999999,x]))]),E=function(e){return Lm(e,(function(e,t){return e>t}),-1/0)}(T.pick(null,0)),I=T.pick(null,0).min()>0,k=T.pick(E),j=T.pick(1-E),A=Om(w.transpose([1,0]),k).add(g.pick(0)),C=Om(w.transpose([1,0]),j).add(g.pick(0)),O=Dm(Math.PI/2),M=Vm(e.vertices,e.nVertices),N=Vm(t.vertices,t.nVertices),R=Km(O,M,e.vertices),P=Km(O,N,t.vertices);b=h?Om(v,P.pick(u)).multiply(-1):Om(_,R.pick(o));var D=Bm(e.velocity,e.position,e.angularVelocity,t.velocity,t.position,t.angularVelocity,A,b);console.assert(1==D.shape[0]);var L=D.get(0)*Math.min(e.restitution,t.restitution),F=Bm(e.velocity,e.position,e.angularVelocity,t.velocity,t.position,t.angularVelocity,C,b);console.assert(1==F.shape[0]);var B=F.get(0)*Math.min(e.restitution,t.restitution);return{cm1:{normal:b,penetration:-m,collisionPoint:A,accImpulseNormal:n.cm1.active&&f?n.cm1.accImpulseNormal:0,accImpulseTangent:n.cm1.active&&f?n.cm1.accImpulseTangent:0,active:f,restitutionVelocityTarget:L},cm2:{normal:b,penetration:-m,collisionPoint:C,accImpulseNormal:n.cm2.active&&f&&I?n.cm2.accImpulseNormal:0,accImpulseTangent:n.cm2.active&&f&&I?n.cm2.accImpulseTangent:0,active:f&&I,restitutionVelocityTarget:B}}}(o,a,e.accRRManifolds[t]),c=function(e,n){return{manifold:e,indexA:r,indexB:i,manifoldIndex:t,manifoldSecondaryIndex:n}};(s.cm1.active||s.cm2.active)&&(l.push(c(s.cm1,0)),l.push(c(s.cm2,1)))};for(y=0;y<h;y++)S(y);for(y=0;y<d;y++){var T,E=f[y],I=(v=E[0],b=E[1],e.circle[v]),k=e.polygon[b];I.active&&k.active&&(T=$m(I,k,e.accCRManifolds[y])).active&&c.push({indexA:v,indexB:b,manifold:T,manifoldIndex:y,manifoldSecondaryIndex:0})}var j=[];for(v=0;v<this.staticEnvParams.numJoints;v++)if((b=e.joint[v]).active){var A=tf(R=M(e,b.aIndex),P=M(e,b.bIndex),b,r.get(v),this.envParams),C=A.a_drv,O=A.b_drv;j.push({a_drv:C,b_drv:O,aIndex:b.aIndex,bIndex:b.bIndex})}for(v=0;v<j.length;v++){var N=j[v],R=M(e,N.aIndex),P=M(e,N.bIndex);R.angularVelocity+=N.a_drv,P.angularVelocity+=N.b_drv}var D=[];for(v=0;v<this.staticEnvParams.numThrusters;++v){var L=e.thruster[v];if(L.active){var F=i.get(v),B=M(e,L.objectIndex),U=Om(Dm(B.rotation),L.relativePosition);if(L.globalPosition=U.add(B.position),0!=F){var V=B.rotation+L.rotation,G=vt.array([Math.cos(V),Math.sin(V)]),z=L.power*this.envParams.baseThrusterPower*this.envParams.dt*F,$=B.inverseInertia*jm(U,G)*z,q=G.multiply(z*B.inverseMass);D.push({index:L.objectIndex,dv:q,drv:$})}}}for(v=0;v<D.length;v++){N=D[v];var H=M(e,N.index);H.velocity.add(N.dv,!1),H.angularVelocity+=N.drv}this.staticEnvParams.doWarmStarting&&(e=af(e,l,this.staticEnvParams,!0,!0),e=af(e,c,this.staticEnvParams,!1,!0),e=function(e,t){for(var n=0;n<t.numJoints;++n){var r=e.joint[n],i=Qm(M(e,r.aIndex),M(e,r.bIndex),r),o=i.a_dv,a=i.b_dv;e=Zm(e,r,t,o,i.a_drv,a,i.b_drv,null,null)}return e}(e=af(e,s,this.staticEnvParams,!1,!1),this.staticEnvParams));var W=function(e,t,r,i){e=lf(e,r,n.staticEnvParams,!0,!0,n.envParams,h),e=lf(e,i,n.staticEnvParams,!1,!0,n.envParams,d),e=lf(e,t,n.staticEnvParams,!1,!1,n.envParams,p);for(var o=0;o<t.length;o++){var a=t[o].manifoldIndex;e.accCCManifolds[a]=t[o].manifold}for(o=0;o<i.length;o++)a=i[o].manifoldIndex,e.accCRManifolds[a]=i[o].manifold;for(o=0;o<r.length;o++)a=r[o].manifoldIndex,0==r[o].manifoldSecondaryIndex?e.accRRManifolds[a].cm1=r[o].manifold:e.accRRManifolds[a].cm2=r[o].manifold;return e};for(v=0;v<this.staticEnvParams.numSolverIterations;v++)e=W(e=ef(e,this.envParams,this.staticEnvParams),s,l,c);return e.polygon=rf(e.polygon,a),e.circle=rf(e.circle,a),(e=Xm(e)).terminal=function(e,t,n,r){for(var i=function(e,t,n){var r=t[e.indexA],i=n[e.indexB],o=r.role*i.role;return!(!(e.manifold.active&&r.active&&i.active)||2!=o&&3!=o)},o=0,a=t;o<a.length;o++)if(i(a[o],e.circle,e.circle))return!0;for(var s=0,l=n;s<l.length;s++)if(i(l[s],e.polygon,e.polygon))return!0;for(var c=0,u=r;c<u.length;c++)if(i(u[c],e.circle,e.polygon))return!0;return!1}(e,s,l,c),e},e}();function pf(e,t){for(var n=e.numPolygons+e.numCircles,r=vt.ones([n,n]).subtract(vt.identity(n)),i=0;i<e.numJoints;++i)for(var o=0;o<e.numJoints;++o){var a=t[o];if(a.active){var s=a.aIndex,l=a.bIndex;r.set(s,l,0),r.set(l,s,0);for(var c=0;c<n;++c)0==r.get(s,c)&&r.set(c,l,0),0==r.get(l,c)&&r.set(c,s,0),0==r.get(c,s)&&r.set(l,c,0),0==r.get(c,l)&&r.set(s,c,0)}}return r}function df(e){var t=e.numPolygons,n=e.numCircles;function r(){return{normal:vt.zeros(2,"float32"),penetration:0,collisionPoint:vt.zeros(2,"float32"),active:!1,restitutionVelocityTarget:0,accImpulseNormal:0,accImpulseTangent:0}}e.numJoints,e.numThrusters;var i=t*(t-1)/2-e.numStaticFixatedPolys*(e.numStaticFixatedPolys-1)/2,o=Math.round(n*(n-1)/2);return{accRRManifolds:nf([],Array(i),!0).map((function(){return{cm1:r(),cm2:r()}})),accCRManifolds:nf([],Array(n*t),!0).map(r),accCCManifolds:nf([],Array(o),!0).map(r)}}function hf(e,t,n){return e/n.numUnits*t.screenDim.get(0)}function mf(e,t,n){return e/t.screenDim.get(0)*n.numUnits}function ff(e,t,n){return(e=(e=e.divide(n.numUnits)).multiply(t.screenDim)).set(1,t.screenDim.get(1)-e.get(1)),e}function gf(e,t,n,r){void 0===r&&(r=!0);var i=e.clone();return r&&i.set(1,t.screenDim.get(1)-i.get(1)),(i=i.divide(t.screenDim)).multiply(n.numUnits)}function yf(e){var t=function(e,t,n){function r(e,t,n){var r=Mm(t.subtract(e));r=0==r?1:r;var i=t.subtract(e).divide(r),o=e.add(i.multiply(km(n.subtract(e),i)));return.5*r*Mm(n.subtract(o))}for(var i=t-2,o=0,a=vt.zeros(2,"float32"),s=0;s<i;++s)o+=r(e.pick(0),e.pick(s+1),e.pick(s+2));for(s=0;s<t;++s)a.add(e.pick(s),!1);return{inverseMass:1/(o*=n),com:a=a.divide(t)}}(e.vertices,e.nVertices,e.density),n=t.inverseMass,r=t.com;if(0==e.inverseMass)return e;e.position.add(r,!1);for(var i=0;i<e.nVertices;++i){var o=e.vertices.pick(i).subtract(r);e.vertices.set(i,0,o.get(0)),e.vertices.set(i,1,o.get(1))}var a=function(e,t,n){for(var r=0,i=0;i<t;i++)r+=(o=e.pick(i),a=e.pick((i+1)%t),s=void 0,s=.25*jm(o,a)/3*(o.get(0)*o.get(0)+a.get(0)*o.get(0)+a.get(0)*a.get(0)+(o.get(1)*o.get(1)+a.get(1)*o.get(1)+a.get(1)*a.get(1))),Math.abs(s));var o,a,s;return 1/(r*n)}(e.vertices,e.nVertices,e.density);return e.inverseMass=n,e.inverseInertia=a,e}function _f(e){return 0==e.inverseMass||(e.inverseMass=(t=e.radius,n=e.density,1/(t*t*Math.PI*n)),e.inverseInertia=function(e,t){return 1/(Math.PI*Math.pow(e,4)/4*t)}(e.radius,e.density)),e;var t,n}function vf(e){return{position:vt.zeros(2,"float32"),velocity:vt.zeros(2,"float32"),angularVelocity:0,rotation:0,inverseMass:0,inverseInertia:0,restitution:0,friction:0,vertices:vt.zeros([e.maxPolygonVertices,2],"float32"),nVertices:0,radius:0,collisionMode:1,active:!1,density:1,highlighted:!1,role:0,transparent:!1}}function bf(){return{aIndex:0,bIndex:0,aRelativePos:vt.zeros(2,"float32"),bRelativePos:vt.zeros(2,"float32"),globalPosition:vt.zeros(2,"float32"),active:!1,accImpulse:vt.zeros(2,"float32"),accRImpulse:0,motorSpeed:0,motorPower:0,motorOn:!1,motorHasJointLimits:!1,minRotation:0,maxRotation:0,isFixedJoint:!1,rotation:0,motorBinding:0,highlighted:!1,transparent:!1}}function wf(){return{objectIndex:0,relativePosition:vt.zeros(2,"float32"),rotation:0,power:0,globalPosition:vt.zeros(2,"float32"),active:!1,thrusterBinding:0,highlighted:!1,transparent:!1}}function xf(e,t){var n=e.numCircles,r=e.numPolygons,i=e.numJoints,o=e.numThrusters,a=df(e);function s(t){return nf([],Array(t),!0).map((function(){return vf(e)}))}var l,c={polygon:s(r),circle:s(n),joint:(l=i,nf([],Array(l),!0).map(bf)),thruster:function(e){return nf([],Array(e),!0).map(wf)}(o),collisionMatrix:vt.zeros([r+n,r+n],"int8"),accRRManifolds:a.accRRManifolds,accCRManifolds:a.accCRManifolds,accCCManifolds:a.accCCManifolds,gravity:vt.array([0,-9.81]),terminal:!1};c.collisionMatrix=pf(e,c.joint);var u=function(e,t){var n;0==t?n=vt.array([[2.5,5.2],[2.5,-5.2],[-2.5,-5.2],[-2.5,5.2]]):1==t?n=vt.array([[-5,5],[-0,5],[-0,0],[-5,0]]):2==t?n=vt.array([[5,5],[10,5],[10,0],[5,0]]):3==t&&(n=vt.array([[2.5,5.2],[2.5,-5.2],[-2.5,-5.2],[-2.5,5.2]])),c.polygon[t]=Object.assign(c.polygon[t],{position:e,active:!0,vertices:n,nVertices:4,inverseMass:0,inverseInertia:0,restitution:0,friction:1})};return u(vt.array([2.5,-4.8]),0),u(vt.array([0,0]),1),u(vt.array([0,0]),2),u(vt.array([2.5,10.2]),3),(c=Xm(c=function(e){for(var t=0;t<e.polygon.length;++t)e.polygon[t]=yf(e.polygon[t]);for(t=0;t<e.circle.length;++t)e.circle[t]=_f(e.circle[t]);return e}(c))).collisionMatrix=pf(e,c.joint),c}function Sf(e,t,n,r){var i=C(Sm);return i.numPolygons=e,i.numCircles=t,i.numJoints=n,i.numThrusters=r,i}var Tf={s:Sf(5,2,1,1),m:Sf(6,3,2,2),l:Sf(12,4,6,2)},Ef=["numUnits","highlighted","transparent","terminal","downscale"];function If(e){if(e.hasOwnProperty("0")){if(e[0].hasOwnProperty("0")){var t=[];for(var n in e){var r=[];for(var i in e[n]){var o=e[n][i];r.push(0==o?0:1==o?1:o)}t.push(r)}return vt.array(t)}for(var a in t=[],e)t.push(e[a]);return vt.array(t)}return e}var kf=function(e){var t,n={};for(var r in e)n[(t=void 0,-1!=(t=r.replace(/([-_][a-z])/gi,(function(e){return e.toUpperCase().replace("-","").replace("_","")}))).indexOf("Av")&&(t=t.replace("Av","AV")),-1!=t.indexOf("Rjoint")&&(t=t.replace("Rjoint","RJoint")),-1!=t.indexOf("Fjoint")&&(t=t.replace("Fjoint","FJoint")),t)]=If(e[r]);return n};function jf(e,t,n,r){var i,o;void 0===r&&(r=!1),r?(i=function(e){return"full"==e.type?kf(e.params):C(xm)}(n.env_params),o=function(e){return"full"==e.type?(console.assert(!1),kf(e.params)):(console.assert(Tf.hasOwnProperty(e.size)),C(Tf[e.size]))}(n.static_env_params)):(i=kf(n.env_params),o=kf(n.static_env_params));for(var a=xf(o),s=0;s<o.numPolygons;s++){var l=kf(n.env_state.polygon[s]);a.polygon[s]=l}for(s=0;s<o.numCircles;++s){var c=kf(n.env_state.circle[s]);a.circle[s]=c}for(s=0;s<o.numJoints;++s){var u=kf(n.env_state.joint[s]);a.joint[s]=u}for(s=0;s<o.numThrusters;++s){var p=kf(n.env_state.thruster[s]);a.thruster[s]=p}for(console.assert(a.accRRManifolds.length%2==0),s=0;s<a.accRRManifolds.length;s+=2)a.accRRManifolds[s/2].cm1=kf(n.env_state.acc_rr_manifolds[s]),a.accRRManifolds[s/2].cm2=kf(n.env_state.acc_rr_manifolds[s+1]);for(s=0;s<a.accCRManifolds.length;++s)a.accCRManifolds[s]=kf(n.env_state.acc_cr_manifolds[s]);for(s=0;s<a.accCCManifolds.length;++s)a.accCCManifolds[s]=kf(n.env_state.acc_cc_manifolds[s]);a.gravity=If(n.env_state.gravity),a.collisionMatrix=If(n.env_state.collision_matrix),i.numUnits=o.screenDim.get(0)/i.pixelsPerUnit,o.screenDim=vt.array([e,t]);var d=xm,h=Sm,m=function(e,t){for(var n in e)if(!Ef.includes(n)&&!t.hasOwnProperty(n))return console.assert(!1,"Key not found in object B: "+n),!1;return!0},f=function(e,t){return m(e,t)&&m(t,e)};return console.assert(f(i,d)),console.assert(f(o,h)),{env_state:a,env_params:i,static_env_params:o}}var Af=function(e,t){if(void 0===t&&(t=!1),0==e.shape.length)return t?0!=e.get()&&(1==e.get()||e.get()):e.get(0);for(var n={},r=0;r<e.shape[0];r++)e.pick(r)instanceof vt.NdArray?n[r.toString()]=Af(e.pick(r),t):(n[r.toString()]=e.get(r),t&&(console.log("SHOULD MAKE BOOLEAN",e.get(r),0==e.get(r),1==e.get(r),e.get(r)),n[r.toString()]=0!=e.get(r)&&(1==e.get(r)||e.get(r))));return n},Cf=function(e){var t,n={};for(var r in e)if(!Ef.includes(r)){var i="accRImpulse"===(t=r)?"acc_r_impulse":t.replace(/[\w]([A-Z])/g,(function(e){return e[0]+"_"+e[1]})).toLowerCase(),o=e[r];"screenDim"==r&&(o=vt.array([500,500])),o instanceof vt.NdArray&&(o=Af(o)),n[i]=o}return n};function Of(e,t,n,r){void 0===r&&(r=!1);for(var i,o,a=[],s=0,l=e.accRRManifolds;s<l.length;s++){var c=l[s];a.push(Cf(c.cm1)),a.push(Cf(c.cm2))}r?(i={type:"size",size:"s",params:null},o=function(e){for(var t=0,n=Object.keys(Tf);t<n.length;t++){var r=n[t];if(i=Tf[r],o=e,i.numPolygons===o.numPolygons&&i.numCircles===o.numCircles&&i.numJoints===o.numJoints&&i.numThrusters===o.numThrusters)return{type:"size",size:r,params:null}}var i,o;return{type:"full",size:null,params:Cf(e)}}(n)):(i=Cf(t),o=Cf(n));var u={env_state:{polygon:e.polygon.map((function(e){return Cf(e)})),circle:e.circle.map((function(e){return Cf(e)})),joint:e.joint.map((function(e){return Cf(e)})),thruster:e.thruster.map((function(e){return Cf(e)})),collision_matrix:Af(e.collisionMatrix,!0),acc_rr_manifolds:a,acc_cr_manifolds:e.accCRManifolds.map(Cf),acc_cc_manifolds:e.accCCManifolds.map(Cf),gravity:Af(e.gravity)},env_params:i,static_env_params:o,version:"1.0.0"};return u}function Mf(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;const Nf=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Rf=new Dt("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Pf=new on("@firebase/auth");function Df(e,...t){Pf.logLevel<=Zt.ERROR&&Pf.error(`Auth (${mr}): ${e}`,...t)}function Lf(e,...t){throw Vf(e,...t)}function Ff(e,...t){return Vf(e,...t)}function Bf(e,t,n){const r=Object.assign(Object.assign({},Nf()),{[t]:n});return new Dt("auth","Firebase",r).create(t,{appName:e.name})}function Uf(e){return Bf(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Vf(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return Rf.create(e,...t)}function Gf(e,t,...n){if(!e)throw Vf(t,...n)}function zf(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Df(t),new Error(t)}function $f(e,t){e||zf(t)}function qf(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Hf(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Wf(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===Hf()||"https:"===Hf()||function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Kf{constructor(e,t){this.shortDelay=e,this.longDelay=t,$f(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ot())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return Wf()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Xf(e,t){$f(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Yf{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void zf("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void zf("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void zf("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Jf={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Qf=new Kf(3e4,6e4);function Zf(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function eg(e,t,n,r,i={}){return tg(e,i,(async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const a=Vt(Object.assign({key:e.config.apiKey},o)).slice(1),s=await e._getAdditionalHeaders();s["Content-Type"]="application/json",e.languageCode&&(s["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:s},i);return"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),Yf.fetch()(rg(e,e.config.apiHost,n,a),l)}))}async function tg(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Jf),t);try{const t=new og(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw ag(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw ag(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw ag(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw ag(e,"user-disabled",o);const s=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Bf(e,s,a);Lf(e,s)}}catch(t){if(t instanceof Pt)throw t;Lf(e,"network-request-failed",{message:String(t)})}}async function ng(e,t,n,r,i={}){const o=await eg(e,t,n,r,i);return"mfaPendingCredential"in o&&Lf(e,"multi-factor-auth-required",{_serverResponse:o}),o}function rg(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?Xf(e.config,i):`${e.config.apiScheme}://${i}`}function ig(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class og{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Ff(this.auth,"network-request-failed"))),Qf.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function ag(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ff(e,t,r);return i.customData._tokenResponse=n,i}function sg(e){return void 0!==e&&void 0!==e.enterprise}class lg{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ig(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function cg(e,t){return eg(e,"POST","/v1/accounts:lookup",t)}function ug(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function pg(e){return 1e3*Number(e)}function dg(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Df("JWT malformed, contained fewer than 3 sections"),null;try{const e=Tt(n);return e?JSON.parse(e):(Df("Failed to decode base64 JWT payload"),null)}catch(e){return Df("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}function hg(e){const t=dg(e);return Gf(t,"internal-error"),Gf(void 0!==t.exp,"internal-error"),Gf(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function mg(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof Pt&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class fg{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class gg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ug(this.lastLoginAt),this.creationTime=ug(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function yg(e){var t;const n=e.auth,r=await e.getIdToken(),i=await mg(e,cg(n,{idToken:r}));Gf(null==i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const a=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?_g(o.providerUserInfo):[],s=(l=e.providerData,c=a,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,p=!(e.email&&o.passwordHash||(null==s?void 0:s.length)),d=!!u&&p,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new gg(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(e,h)}function _g(e){return e.map((e=>{var{providerId:t}=e,n=Mf(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class vg{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Gf(e.idToken,"internal-error"),Gf(void 0!==e.idToken,"internal-error"),Gf(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):hg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Gf(0!==e.length,"internal-error");const t=hg(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(Gf(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await tg(e,{},(async()=>{const n=Vt({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=rg(e,r,"/v1/token",`key=${i}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Yf.fetch()(o,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new vg;return n&&(Gf("string"==typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(Gf("string"==typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(Gf("number"==typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vg,this.toJSON())}_performRefresh(){return zf("not implemented")}}function bg(e,t){Gf("string"==typeof e||void 0===e,"internal-error",{appName:t})}class wg{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Mf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fg(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new gg(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await mg(this,this.stsTokenManager.getToken(this.auth,e));return Gf(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=Wt(e),r=await n.getIdToken(t),i=dg(r);Gf(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"==typeof i.firebase?i.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:ug(pg(i.auth_time)),issuedAtTime:ug(pg(i.iat)),expirationTime:ug(pg(i.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Wt(e);await yg(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Gf(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new wg(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Gf(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await yg(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(cr(this.auth.app))return Promise.reject(Uf(this.auth));const e=await this.getIdToken();return await mg(this,async function(e,t){return eg(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,a,s,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,p=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,h=null!==(o=t.photoURL)&&void 0!==o?o:void 0,m=null!==(a=t.tenantId)&&void 0!==a?a:void 0,f=null!==(s=t._redirectEventId)&&void 0!==s?s:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:_,emailVerified:v,isAnonymous:b,providerData:w,stsTokenManager:x}=t;Gf(_&&x,e,"internal-error");const S=vg.fromJSON(this.name,x);Gf("string"==typeof _,e,"internal-error"),bg(u,e.name),bg(p,e.name),Gf("boolean"==typeof v,e,"internal-error"),Gf("boolean"==typeof b,e,"internal-error"),bg(d,e.name),bg(h,e.name),bg(m,e.name),bg(f,e.name),bg(g,e.name),bg(y,e.name);const T=new wg({uid:_,auth:e,email:p,emailVerified:v,displayName:u,isAnonymous:b,photoURL:h,phoneNumber:d,tenantId:m,stsTokenManager:S,createdAt:g,lastLoginAt:y});return w&&Array.isArray(w)&&(T.providerData=w.map((e=>Object.assign({},e)))),f&&(T._redirectEventId=f),T}static async _fromIdTokenResponse(e,t,n=!1){const r=new vg;r.updateFromServerResponse(t);const i=new wg({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await yg(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Gf(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?_g(r.providerUserInfo):[],o=!(r.email&&r.passwordHash||(null==i?void 0:i.length)),a=new vg;a.updateFromIdToken(n);const s=new wg({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new gg(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash||(null==i?void 0:i.length))};return Object.assign(s,l),s}}const xg=new Map;function Sg(e){$f(e instanceof Function,"Expected a class definition");let t=xg.get(e);return t?($f(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,xg.set(e,t),t)}class Tg{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Tg.type="NONE";const Eg=Tg;function Ig(e,t,n){return`firebase:${e}:${t}:${n}`}class kg{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Ig(this.userKey,r.apiKey,i),this.fullPersistenceKey=Ig("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?wg._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new kg(Sg(Eg),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Sg(Eg);const o=Ig(n,e.config.apiKey,e.name);let a=null;for(const n of t)try{const t=await n._get(o);if(t){const r=wg._fromJSON(e,t);n!==i&&(a=r),i=n;break}}catch(e){}const s=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&s.length?(i=s[0],a&&await i._set(o,a.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(o)}catch(e){}}))),new kg(i,e,n)):new kg(i,e,n)}}function jg(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Mg(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ag(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Rg(t))return"Blackberry";if(Pg(t))return"Webos";if(Cg(t))return"Safari";if((t.includes("chrome/")||Og(t))&&!t.includes("edge/"))return"Chrome";if(Ng(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function Ag(e=Ot()){return/firefox\//i.test(e)}function Cg(e=Ot()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Og(e=Ot()){return/crios\//i.test(e)}function Mg(e=Ot()){return/iemobile/i.test(e)}function Ng(e=Ot()){return/android/i.test(e)}function Rg(e=Ot()){return/blackberry/i.test(e)}function Pg(e=Ot()){return/webos/i.test(e)}function Dg(e=Ot()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Lg(e=Ot()){return Dg(e)||Ng(e)||Pg(e)||Rg(e)||/windows phone/i.test(e)||Mg(e)}function Fg(e,t=[]){let n;switch(e){case"Browser":n=jg(Ot());break;case"Worker":n=`${jg(Ot())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${mr}/${r}`}class Bg{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(e){r(e)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(const e of t)try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==e?void 0:e.message})}}}class Ug{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,a;const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=null===(t=s.meetsMinPasswordLength)||void 0===t||t),s.isValid&&(s.isValid=null===(n=s.meetsMaxPasswordLength)||void 0===n||n),s.isValid&&(s.isValid=null===(r=s.containsLowercaseLetter)||void 0===r||r),s.isValid&&(s.isValid=null===(i=s.containsUppercaseLetter)||void 0===i||i),s.isValid&&(s.isValid=null===(o=s.containsNumericCharacter)||void 0===o||o),s.isValid&&(s.isValid=null===(a=s.containsNonAlphanumericCharacter)||void 0===a||a),s}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Vg{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zg(this),this.idTokenSubscription=new zg(this),this.beforeStateQueue=new Bg(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Rf,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Sg(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await kg.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await cg(this,{idToken:e}),n=await wg._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(cr(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null==r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==o||!(null==a?void 0:a.user)||(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(e){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(e)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Gf(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await yg(e)}catch(e){if("auth/network-request-failed"!==(null==e?void 0:e.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(cr(this.app))return Promise.reject(Uf(this));const t=e?Wt(e):null;return t&&Gf(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Gf(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return cr(this.app)?Promise.reject(Uf(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return cr(this.app)?Promise.reject(Uf(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(Sg(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e,t={}){return eg(e,"GET","/v2/passwordPolicy",Zf(e,t))}(this),t=new Ug(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Dt("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return eg(e,"POST","/v2/accounts:revokeToken",Zf(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Sg(e)||this._popupRedirectResolver;Gf(t,this,"argument-error"),this.redirectPersistenceManager=await kg.create(this,[Sg(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Gf(a,this,"internal-error"),a.then((()=>{o||i(this.currentUser)})),"function"==typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Gf(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Fg(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){Pf.logLevel<=Zt.WARN&&Pf.warn(`Auth (${mr}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function Gg(e){return Wt(e)}class zg{constructor(e){this.auth=e,this.observer=null,this.addObserver=$t((e=>this.observer=e))}get next(){return Gf(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let $g={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qg(e){return $g.loadJS(e)}function Hg(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Wg{constructor(e){this.type="recaptcha-enterprise",this.auth=Gg(e)}async verify(e="verify",t=!1){function n(t,n,r){const i=window.grecaptcha;sg(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{(async function(e,t){return eg(e,"GET","/v2/recaptchaConfig",Zf(e,t))})(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new lg(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&sg(window.grecaptcha))n(i,e,r);else{if("undefined"==typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=$g.recaptchaEnterpriseScript;0!==t.length&&(t+=i),qg(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Kg(e,t,n,r=!1){const i=new Wg(e);let o;try{o=await i.verify(n)}catch(e){o=await i.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Xg(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Kg(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await Kg(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function Yg(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Jg(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Qg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return zf("not implemented")}_getIdTokenResponse(e){return zf("not implemented")}_linkToIdToken(e,t){return zf("not implemented")}_getReauthenticationResolver(e){return zf("not implemented")}}async function Zg(e,t){return eg(e,"POST","/v1/accounts:signUp",t)}async function ey(e,t){return ng(e,"POST","/v1/accounts:signInWithPassword",Zf(e,t))}class ty extends Qg{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new ty(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new ty(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Xg(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",ey);case"emailLink":return async function(e,t){return ng(e,"POST","/v1/accounts:signInWithEmailLink",Zf(e,t))}(e,{email:this._email,oobCode:this._password});default:Lf(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Xg(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Zg);case"emailLink":return async function(e,t){return ng(e,"POST","/v1/accounts:signInWithEmailLink",Zf(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Lf(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ny(e,t){return ng(e,"POST","/v1/accounts:signInWithIdp",Zf(e,t))}class ry extends Qg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ry(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Lf("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Mf(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new ry(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return ny(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,ny(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ny(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Vt(t)}return e}}const iy={USER_NOT_FOUND:"user-not-found"};class oy extends Qg{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new oy({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new oy({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return ng(e,"POST","/v1/accounts:signInWithPhoneNumber",Zf(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await ng(e,"POST","/v1/accounts:signInWithPhoneNumber",Zf(e,t));if(n.temporaryProof)throw ag(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return ng(e,"POST","/v1/accounts:signInWithPhoneNumber",Zf(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),iy)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new oy({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class ay{constructor(e){var t,n,r,i,o,a;const s=Gt(zt(e)),l=null!==(t=s.apiKey)&&void 0!==t?t:null,c=null!==(n=s.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=s.mode)&&void 0!==r?r:null);Gf(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=s.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=s.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=Gt(zt(e)).link,n=t?Gt(zt(t)).deep_link_id:null,r=Gt(zt(e)).deep_link_id;return(r?Gt(zt(r)).link:null)||r||n||t||e}(e);try{return new ay(t)}catch(e){return null}}}class sy{constructor(){this.providerId=sy.PROVIDER_ID}static credential(e,t){return ty._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=ay.parseLink(t);return Gf(n,"argument-error"),ty._fromEmailAndCode(e,n.code,n.tenantId)}}sy.PROVIDER_ID="password",sy.EMAIL_PASSWORD_SIGN_IN_METHOD="password",sy.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ly{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class cy extends ly{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class uy extends cy{constructor(){super("facebook.com")}static credential(e){return ry._fromParams({providerId:uy.PROVIDER_ID,signInMethod:uy.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return uy.credentialFromTaggedObject(e)}static credentialFromError(e){return uy.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return uy.credential(e.oauthAccessToken)}catch(e){return null}}}uy.FACEBOOK_SIGN_IN_METHOD="facebook.com",uy.PROVIDER_ID="facebook.com";class py extends cy{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ry._fromParams({providerId:py.PROVIDER_ID,signInMethod:py.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return py.credentialFromTaggedObject(e)}static credentialFromError(e){return py.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return py.credential(t,n)}catch(e){return null}}}py.GOOGLE_SIGN_IN_METHOD="google.com",py.PROVIDER_ID="google.com";class dy extends cy{constructor(){super("github.com")}static credential(e){return ry._fromParams({providerId:dy.PROVIDER_ID,signInMethod:dy.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return dy.credentialFromTaggedObject(e)}static credentialFromError(e){return dy.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return dy.credential(e.oauthAccessToken)}catch(e){return null}}}dy.GITHUB_SIGN_IN_METHOD="github.com",dy.PROVIDER_ID="github.com";class hy extends cy{constructor(){super("twitter.com")}static credential(e,t){return ry._fromParams({providerId:hy.PROVIDER_ID,signInMethod:hy.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return hy.credentialFromTaggedObject(e)}static credentialFromError(e){return hy.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return hy.credential(t,n)}catch(e){return null}}}hy.TWITTER_SIGN_IN_METHOD="twitter.com",hy.PROVIDER_ID="twitter.com";class my{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await wg._fromIdTokenResponse(e,n,r),o=fy(n);return new my({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=fy(n);return new my({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function fy(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class gy extends Pt{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,gy.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new gy(e,t,n,r)}}function yy(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw gy._fromErrorAndOperation(e,n,t,r);throw n}))}new WeakMap;const _y="__sak";class vy{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(_y,"1"),this.storage.removeItem(_y),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class by extends vy{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Lg(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);!function(){const e=Ot();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()||10!==document.documentMode||i===e.newValue||e.newValue===e.oldValue?r():setTimeout(r,10)}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}by.type="LOCAL";const wy=by;class xy extends vy{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}xy.type="SESSION";const Sy=xy;class Ty{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Ty(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(null==o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(o).map((async e=>e(t.origin,i))),s=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}})))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:s})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ey(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}Ty.receivers=[];class Iy{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise(((a,s)=>{const l=Ey("",20);r.port1.start();const c=setTimeout((()=>{s(new Error("unsupported_event"))}),n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),s(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{o&&this.removeMessageHandler(o)}))}}function ky(){return window}function jy(){return void 0!==ky().WorkerGlobalScope&&"function"==typeof ky().importScripts}const Ay="firebaseLocalStorageDb",Cy="firebaseLocalStorage",Oy="fbase_key";class My{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Ny(e,t){return e.transaction([Cy],t?"readwrite":"readonly").objectStore(Cy)}function Ry(){const e=indexedDB.open(Ay,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Cy,{keyPath:Oy})}catch(e){n(e)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Cy)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Ay);return new My(e).toPromise()}(),t(await Ry()))}))}))}async function Py(e,t,n){const r=Ny(e,!0).put({[Oy]:t,value:n});return new My(r).toPromise()}function Dy(e,t){const n=Ny(e,!0).delete(t);return new My(n).toPromise()}class Ly{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Ry()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jy()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ty._getInstance(jy()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Iy(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ry();return await Py(e,_y,"1"),await Dy(e,_y),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Py(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Ny(e,!1).get(t),r=await new My(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Dy(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Ny(e,!1).getAll();return new My(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Ly.type="LOCAL";const Fy=Ly;Hg("rcb"),new Kf(3e4,6e4);class By{constructor(e){this.providerId=By.PROVIDER_ID,this.auth=Gg(e)}verifyPhoneNumber(e,t){return async function(e,t,n){var r;const i=await n.verify();try{let o;if(Gf("string"==typeof i,e,"argument-error"),Gf("recaptcha"===n.type,e,"argument-error"),o="string"==typeof t?{phoneNumber:t}:t,"session"in o){const t=o.session;if("phoneNumber"in o){Gf("enroll"===t.type,e,"internal-error");const n=await function(e,t){return eg(e,"POST","/v2/accounts/mfaEnrollment:start",Zf(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Gf("signin"===t.type,e,"internal-error");const n=(null===(r=o.multiFactorHint)||void 0===r?void 0:r.uid)||o.multiFactorUid;Gf(n,e,"missing-multi-factor-info");const a=await function(e,t){return eg(e,"POST","/v2/accounts/mfaSignIn:start",Zf(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return eg(e,"POST","/v1/accounts:sendVerificationCode",Zf(e,t))}(e,{phoneNumber:o.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}(this.auth,e,Wt(t))}static credential(e,t){return oy._fromVerification(e,t)}static credentialFromResult(e){const t=e;return By.credentialFromTaggedObject(t)}static credentialFromError(e){return By.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?oy._fromTokenResponse(t,n):null}}function Uy(e,t){return t?Sg(t):(Gf(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}By.PROVIDER_ID="phone",By.PHONE_SIGN_IN_METHOD="phone";class Vy extends Qg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ny(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ny(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ny(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Gy(e){return async function(e,t,n=!1){if(cr(e.app))return Promise.reject(Uf(e));const r="signIn",i=await yy(e,r,t),o=await my._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}(e.auth,new Vy(e),e.bypassAuthState)}function zy(e){const{auth:t,user:n}=e;return Gf(n,t,"internal-error"),async function(e,t,n=!1){const{auth:r}=e;if(cr(r.app))return Promise.reject(Uf(r));const i="reauthenticate";try{const o=await mg(e,yy(r,i,t,e),n);Gf(o.idToken,r,"internal-error");const a=dg(o.idToken);Gf(a,r,"internal-error");const{sub:s}=a;return Gf(e.uid===s,r,"user-mismatch"),my._forOperation(e,i,o)}catch(e){throw"auth/user-not-found"===(null==e?void 0:e.code)&&Lf(r,"user-mismatch"),e}}(n,new Vy(e),e.bypassAuthState)}async function $y(e){const{auth:t,user:n}=e;return Gf(n,t,"internal-error"),async function(e,t,n=!1){const r=await mg(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return my._forOperation(e,"link",r)}(n,new Vy(e),e.bypassAuthState)}class qy{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:a}=e;if(o)return void this.reject(o);const s={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(s))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Gy;case"linkViaPopup":case"linkViaRedirect":return $y;case"reauthViaPopup":case"reauthViaRedirect":return zy;default:Lf(this.auth,"internal-error")}}resolve(e){$f(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$f(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Hy=new Kf(2e3,1e4);async function Wy(e,t,n){if(cr(e.app))return Promise.reject(Ff(e,"operation-not-supported-in-this-environment"));const r=Gg(e);!function(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Lf(e,"argument-error"),Bf(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(e,t,ly);const i=Uy(r,n);return new Ky(r,"signInViaPopup",t,i).executeNotNull()}class Ky extends qy{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Ky.currentPopupAction&&Ky.currentPopupAction.cancel(),Ky.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Gf(e,this.auth,"internal-error"),e}async onExecution(){$f(1===this.filter.length,"Popup operations only handle one event");const e=Ey();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Ff(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Ff(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ky.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Ff(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Hy.get())};e()}}Ky.currentPopupAction=null;const Xy=new Map;class Yy extends qy{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Xy.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return Ig("pendingRedirect",e.config.apiKey,e.name)}(t),r=function(e){return Sg(e._redirectPersistence)}(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}Xy.set(this.auth._key(),e)}return this.bypassAuthState||Xy.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Jy(e,t){Xy.set(e._key(),t)}async function Qy(e,t,n=!1){if(cr(e.app))return Promise.reject(Uf(e));const r=Gg(e),i=Uy(r,t),o=new Yy(r,i,n),a=await o.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class Zy{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return t_(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!t_(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ff(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(e_(e))}saveEventToCache(e){this.cachedEventUids.add(e_(e)),this.lastProcessedEventTime=Date.now()}}function e_(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function t_({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}const n_=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,r_=/^https?/;function i_(e){const t=qf(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!r_.test(n))return!1;if(n_.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const o_=new Kf(3e4,6e4);function a_(){const e=ky().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}function s_(e){return new Promise(((t,n)=>{var r,i,o;function a(){a_(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{a_(),n(Ff(e,"network-request-failed"))},timeout:o_.get()})}if(null===(i=null===(r=ky().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=ky().gapi)||void 0===o?void 0:o.load)){const t=Hg("iframefcb");return ky()[t]=()=>{gapi.load?a():n(Ff(e,"network-request-failed"))},qg(`${$g.gapiScript}?onload=${t}`).catch((e=>n(e)))}a()}})).catch((e=>{throw l_=null,e}))}let l_=null;const c_=new Kf(5e3,15e3),u_={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},p_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function d_(e){const t=e.config;Gf(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Xf(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:mr},i=p_.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Vt(r).slice(1)}`}const h_={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class m_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}const f_=encodeURIComponent("fac");async function g_(e,t,n,r,i,o){Gf(e.config.authDomain,e,"auth-domain-config-required"),Gf(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:mr,eventId:i};if(t instanceof ly){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))a[e]=t}if(t instanceof cy){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const s=a;for(const e of Object.keys(s))void 0===s[e]&&delete s[e];const l=await e._getAppCheckToken(),c=l?`#${f_}=${encodeURIComponent(l)}`:"";return`${function({config:e}){return e.emulator?Xf(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${Vt(s).slice(1)}${c}`}const y_="webStorageSupport",__=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Sy,this._completeRedirectFn=Qy,this._overrideRedirectResult=Jy}async _openPopup(e,t,n,r){var i;return $f(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()"),function(e,t,n,r=500,i=600){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let s="";const l=Object.assign(Object.assign({},h_),{width:r.toString(),height:i.toString(),top:o,left:a}),c=Ot().toLowerCase();n&&(s=Og(c)?"_blank":n),Ag(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=Ot()){var t;return Dg(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(c)&&"_self"!==s)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new m_(null);const p=window.open(t||"",s,u);Gf(p,e,"popup-blocked");try{p.focus()}catch(e){}return new m_(p)}(e,await g_(e,t,n,qf(),r),Ey())}async _openRedirect(e,t,n,r){return await this._originValidation(e),i=await g_(e,t,n,qf(),r),ky().location.href=i,new Promise((()=>{}));var i}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):($f(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await function(e){return l_=l_||s_(e),l_}(e),n=ky().gapi;return Gf(n,e,"internal-error"),t.open({where:document.body,url:d_(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:u_,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Ff(e,"network-request-failed"),o=ky().setTimeout((()=>{r(i)}),c_.get());function a(){ky().clearTimeout(o),n(t)}t.ping(a).then(a,(()=>{r(i)}))}))))}(e),n=new Zy(e);return t.register("authEvent",(t=>(Gf(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:n.onEvent(t.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(y_,{type:y_},(n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r[y_];void 0!==i&&t(!!i),Lf(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return eg(e,"GET","/v1/projects",t)}(e);for(const e of t)try{if(i_(e))return}catch(e){}Lf(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Lg()||Cg()||Dg()}};var v_="@firebase/auth",b_="1.7.9";class w_{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Gf(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const x_=At("authIdTokenMaxAge")||300;let S_=null;function T_(e=yr()){const t=ar(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=ar(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Bt(n.getOptions(),null!=t?t:{}))return e;Lf(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:__,persistence:[Fy,wy,Sy]}),r=At("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>x_)return;const r=null==t?void 0:t.token;S_!==r&&(S_=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){Wt(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e){Wt(e).onIdTokenChanged((e=>t(e)),void 0,void 0)}(n)}}var i;const o=(a="auth",null===(l=null===(s=kt())||void 0===s?void 0:s.emulatorHosts)||void 0===l?void 0:l[a]);var a,s,l;return o&&function(e,t,n){const r=Gg(e);Gf(r._canInitEmulator,r,"emulator-config-failed"),Gf(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),o=Yg(t),{host:a,port:s}=function(e){const t=Yg(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Jg(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Jg(t)}}}(t),l=null===s?"":`:${s}`;r.config.emulator={url:`${o}//${a}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:s,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(n,`http://${o}`),n}var E_;$g={loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");var i,o;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Ff("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(o=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==o?o:document).appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},E_="Browser",or(new Kt("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=n.options;Gf(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const s={apiKey:o,authDomain:a,clientPlatform:E_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Fg(E_)},l=new Vg(n,r,i,s);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Sg);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(l,t),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),or(new Kt("auth-internal",(e=>{return t=Gg(e.getProvider("auth").getImmediate()),new w_(t);var t}),"PRIVATE").setInstantiationMode("EXPLICIT")),br(v_,b_,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(E_)),br(v_,b_,"esm2017");var I_=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},k_=function(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},j_=function(){return T_().currentUser},A_=function(e){var t=document.getElementById("loginButton"),n=document.getElementById("signoutButton"),r=document.getElementById("usernameP"),i=document.getElementById("loginImage");null==e?(r.innerText="Not logged in",t.style.display="block",n.style.display="none",i.src="./assets/person.png"):(r.innerText=e.displayName,t.style.display="none",n.style.display="block",i.src=e.photoURL)},C_=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},O_=function(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},M_=function(e){void 0===e&&(e=null);var t=fr({apiKey:"AIzaSyAJN8uqtiu0-EhDWeUw9X0KVnFtgwtbgkI",authDomain:"kinetix-4fbe8.firebaseapp.com",projectId:"kinetix-4fbe8",storageBucket:"kinetix-4fbe8.appspot.com",messagingSenderId:"30123591509",appId:"1:30123591509:web:7c62f10ca69515a0a111dc"});return{app:t,db:function(e,t,n){n||(n="(default)");const r=ar(e,"firestore");if(r.isInitialized(n)){const e=r.getImmediate({identifier:n});if(Bt(r.getOptions(n),t))return e;throw new ui(ci.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(void 0!==t.cacheSizeBytes&&void 0!==t.localCache)throw new ui(ci.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(void 0!==t.cacheSizeBytes&&-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ui(ci.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}(t,{localCache:vm({})}),addAuthCallback:function(e){void 0===e&&(e=null);var t=[];e&&t.push(e);var n=function(e){t.forEach((function(t){return t(e)}))},r=T_();return r.setPersistence(wy),r.authStateReady().then((function(){var e=r.currentUser;A_(e),n(e),r.onAuthStateChanged((function(e){A_(e),n(e)}))})),{addAuthCallback:function(e){t.push(e)}}}(e).addAuthCallback}},N_=function(e,t,n,r){return C_(void 0,void 0,void 0,(function(){var i,o,a,s,l;return O_(this,(function(c){switch(c.label){case 0:return i=e.db,console.log("HEYO",Dr,Dr.firestore),o=yh(i,"levels",t),a=wm(n),s=wm(r),fm(o,{rankingData:{upvotes:a,downvotes:s}},{merge:!0}),[4,dm(o)];case 1:return[2,{upvotes:(l=c.sent().data()).rankingData.upvotes,downvotes:l.rankingData.downvotes}]}}))}))},R_=function(e){var t=window.location.protocol+window.location.hostname+":"+window.location.port;return"".concat(t,"?level=").concat(e)},P_=[[255,255,0],[255,0,255],[0,255,255],[255,153,51],[120,120,120]],D_=function(e){var t={};return t.edit=e.loadImage("assets/edit.png"),t.play=e.loadImage("assets/play.png"),t.circle=e.loadImage("assets/circle.png"),t.square=e.loadImage("assets/square.png"),t.triangle=e.loadImage("assets/square.png"),t.rjoint=e.loadImage("assets/rjoint3.png"),t.fjoint=e.loadImage("assets/fjoint2.png"),t.thruster=e.loadImage("assets/thruster6.png"),t.hand=e.loadImage("assets/hand.png"),t.thumbsup=e.loadImage("assets/thumbsup.png"),t.thumbsdown=e.loadImage("assets/thumbsdown.png"),t},L_=function(e,t,n){var r=n.rjoint;r.loadPixels();for(var i=0;i<=1;i++)for(var o=0;o<5;++o){(s=e.createImage(r.width,r.height)).loadPixels();for(var a=0;a<s.pixels.length;a+=4)s.pixels[a]=Math.round(r.pixels[a]/255*(P_[o][0]/255)*255),s.pixels[a+1]=Math.round(r.pixels[a+1]/255*(P_[o][1]/255)*255),s.pixels[a+2]=Math.round(r.pixels[a+2]/255*(P_[o][2]/255)*255),s.pixels[a+3]=r.pixels[a+3]*(0==i?1:.5);s.updatePixels(),n[0==i?"rjoint_".concat(o):"rjoint_".concat(o,"_alpha")]=s}for((r=n.thruster).loadPixels(),i=0;i<=1;i++)for(o=0;o<5;++o){var s;for((s=e.createImage(r.width,r.height)).loadPixels(),a=0;a<s.pixels.length;a+=4)Math.floor(a/4/r.width)<18&&(s.pixels[a]=Math.round(r.pixels[a]/255*(P_[o][0]/255)*255),s.pixels[a+1]=Math.round(r.pixels[a+1]/255*(P_[o][1]/255)*255),s.pixels[a+2]=Math.round(r.pixels[a+2]/255*(P_[o][2]/255)*255)),s.pixels[a+3]=r.pixels[a+3]*(0==i?1:.5);s.updatePixels(),n["thruster_".concat(o).concat(0==i?"":"_alpha")]=s}return n};function F_(e,t,n,r,i){e.push(),e.clip((function(){return e.rect(0,0,n.screenDim.get(0),n.screenDim.get(1))})),e.push(),e.fill("#F9F6F0"),e.rect(0,0,n.screenDim.get(0),n.screenDim.get(1)),e.pop();var o=[[160,160,160],[0,204,0],[0,102,204],[255,102,102]];e.rectMode(e.CENTER);var a=function(e){for(var t=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([],o[e.role],!0),n=0;n<t.length;n++)t[n]*=0===e.inverseMass?.5:1;return t.push(e.transparent?128:255),t};e.push();for(var s=0;s<n.numPolygons;++s){var l=t.polygon[s];if(null!=l&&l.active){var c=ff(l.position,n,r);e.stroke(l.highlighted?"red":"black"),e.push(),e.fill(a(l)),e.beginShape();for(var u=Dm(l.rotation),p=0;p<l.nVertices;++p){var d=ff(Om(u,l.vertices.pick(p)).add(l.position),n,r);e.vertex(d.get(0),d.get(1))}e.endShape(e.CLOSE),e.pop()}}for(s=0;s<n.numCircles;++s){var h=t.circle[s];if(null!=h&&h.active){e.stroke(h.highlighted?"red":"black"),c=ff(h.position,n,r),e.push(),e.fill(a(h)),e.ellipse(c.get(0),c.get(1),hf(2*h.radius,n,r)),e.pop();var m=vt.array([1,0]),f=ff(Om(Dm(h.rotation),m).multiply(h.radius).add(h.position),n,r);e.line(c.get(0),c.get(1),f.get(0),f.get(1))}}for(s=0;s<n.numThrusters;++s){var g=t.thruster[s];if(null!=g&&g.active){var y=M(t,g.objectIndex),_=16,v=ff(g.globalPosition,n,r);e.push(),e.imageMode(e.CENTER),e.translate(v.get(0),v.get(1)),e.rotate(-y.rotation-g.rotation-Math.PI/2),g.highlighted&&(e.push(),e.fill(255,0,0),e.rect(0,0,_,_),e.pop());var b=g.thrusterBinding%P_.length;e.image(i["thruster_".concat(b).concat(g.transparent?"_alpha":"")],0,0,1.5*_,1.5*_),e.pop()}}for(s=0;s<n.numJoints;++s)null!=(p=t.joint[s])&&p.active&&(_=16,v=ff(p.globalPosition,n,r),e.push(),e.imageMode(e.CENTER),e.translate(v.get(0),v.get(1)),e.rotate(-p.rotation-Math.PI/2),p.highlighted&&(e.push(),e.fill(255,0,0),p.isFixedJoint?e.rect(0,0,_/1.5,_/1.5):e.ellipse(0,0,_/1.2,_/1.2),e.pop()),b=p.motorBinding%P_.length,e.image(i[p.isFixedJoint?"fjoint":p.transparent?"rjoint_".concat(b,"_alpha"):"rjoint_".concat(b)],0,0,1.5*_,1.5*_),e.pop());e.pop(),e.pop()}var B_,U_,V_,G_=r(8465),z_=r.n(G_),$_=function(e,t,n,r){return function(i){var o=document.documentElement.clientWidth,a=window.innerHeight,s={};Sm.screenDim=vt.array([o,a]);var l=[],c=null,u=0,p=!0,d=!1,h=2,m=2,f=0,g=[],y=!0,_={},v={};i.preload=function(){s=D_(i)},i.setup=function(){return e=void 0,t=void 0,l=function(){var e,t,n;return function(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}(this,(function(l){return i.createCanvas(o,a,document.getElementById("canvasGallery")),s=L_(i,0,s),n=O(),m=n[0],h=n[1],b(m,h),C(),e=document.getElementById("bottom-panel"),t=document.getElementById("loginDiv"),document.getElementById("allItems").style.height=window.innerHeight-t.clientHeight-e.clientHeight+"px",document.getElementById("allItems").style.top=t.clientHeight+"px",E(0),document.getElementById("loginDiv").style.width=Math.min(o,500)+"px",r.addAuthCallback((function(e){R(!0),D()})),[2]}))},new((n=void 0)||(n=Promise))((function(r,i){function o(e){try{s(l.next(e))}catch(e){i(e)}}function a(e){try{s(l.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}s((l=l.apply(e,t||[])).next())}));var e,t,n,l},i.draw=function(){var e=y;if(y=t()){if(e||(R(!0),document.getElementById("loginDiv").style.width=Math.min(o,500)+"px"),null!=n.getNewLevelsSavedToCloud()){var r=n.getNewLevelsSavedToCloud();l=r.concat(l),n.setNewLevelsSavedToCloud(null)}if(d)return R(!1),void F();i.clear()}},i.windowResized=function(){var e;t()&&(o=document.documentElement.clientWidth,a=window.innerHeight,i.resizeCanvas(o,a),e=O(),m=e[0],h=e[1],b(m,h),R(!0),j(),E(m*h-1))};var b=function(t,n){for(var r=!1,i=function(t){r=!0,g.push(document.createElement("div")),g[t].classList.add("divGalleryLevelInfo"),g[t].classList.add("card"),g[t].classList.add("text-center"),g[t].innerHTML=L(null,t),document.getElementById("allItems").appendChild(g[t]),g[t].onclick=function(n){var r=t+u;console.assert(r<l.length);var i=l[r];R(!1),e(i)}},o=g.length;o<n*t;++o)i(o);r&&A()},w=function(){return m*h},x=function(){return u>0&&!d},S=function(){return(u+w()<l.length||p)&&!d},T=function(){d=!1,I()},E=function(e){var t,n;d||(e<l.length?T():(d=!0,d=!0,j(),(t=r,n=c,C_(void 0,void 0,void 0,(function(){var e,r,i;return O_(this,(function(o){switch(o.label){case 0:return i=function(e,t="asc"){const n=t,r=Hh("orderBy","metaData.date");return Qh._create(r,n)}(0,"desc"),null!=n?[3,2]:[4,mm(Xh(gh(t.db,"levels"),i,em(25)))];case 1:return e=o.sent(),[3,4];case 2:return[4,mm(Xh(gh(t.db,"levels"),i,function(...e){return tm._create("startAfter",e,!1)}(n),em(25)))];case 3:e=o.sent(),o.label=4;case 4:return r=e.docs[e.docs.length-1],console.log("last",r),[2,{levels:e.docs.map((function(e){var t=e.data(),n=jf(500,500,t.levelAndParams,!0),r=null==t.rankingData?{upvotes:0,downvotes:0}:t.rankingData,i={level:n,metaData:t.metaData,rankingData:r,levelID:e.id};return i.metaData.date=i.metaData.date.toDate(),i})),lastVisible:r,areAnyMoreAvailable:25==e.docs.length}]}}))}))).then((function(e){var t=e.levels;c=e.lastVisible,p=e.areAnyMoreAvailable,l=l.concat(t),T()}))))},I=function(){R(!0),j(),k()},k=function(){for(var e=0;e<m;++e)for(var t=0;t<h;++t){var n=e*h+t,r=n+u;if(r>=l.length)break;var i=l[r];i.levelID in v||(v[i.levelID]=B(i)),document.getElementById("myImage".concat(n)).src=v[i.levelID],g[n].style.width="212.5px",g[n].style.maxHeight="300px",P(n,i),M(n,i.rankingData,i.levelID)}},j=function(){var e=document.getElementById("arrow-right"),t=document.getElementById("arrow-left");if(e&&t){var n=function(e){e.classList.remove("arrow-enabled"),e.classList.add("arrow-disabled"),e.setAttribute("disabled","true")},r=function(e){e.classList.remove("arrow-disabled"),e.classList.add("arrow-enabled"),e.removeAttribute("disabled")};x()?r(t):n(t),S()?r(e):n(e);var i=p?"+":"",o=document.getElementById("bottomPanelText");o&&(o.innerHTML="L".concat(u," - L").concat(Math.min(l.length,u+w())," / ").concat(l.length).concat(i))}},A=function(){for(var e=function(e){var t=document.getElementById("btnThumbsUp"+e),i=document.getElementById("btnThumbsDown"+e);document.getElementById("btnShare"+e).onclick=function(t){var n=R_(l[e+u].levelID);navigator.clipboard.writeText(n),z_().fire({toast:!0,icon:"success",title:"Copied to clipboard!",position:"top-start",showConfirmButton:!1,timer:1500,timerProgressBar:!0,background:"#f0f9ff",color:"#333"}),t.stopPropagation()},t.onclick=function(t){if(null!=n.getCurrentUser()){var i=e+u,o=l[i].levelID,a=0,s=1;o in _?1==_[o]?(s=-1,delete _[o]):-1==_[o]&&(a=-1,s=1,_[o]=1):_[o]=1,N_(r,o,s,a).then((function(e){l[i].rankingData=e,M(i-u,l[i].rankingData,l[i].levelID)})),t.stopPropagation()}},i.onclick=function(t){if(null!=n.getCurrentUser()){var i=e+u,o=l[i].levelID,a=0,s=1;o in _?-1==_[o]?(s=-1,delete _[o]):1==_[o]&&(s=1,a=-1,_[o]=-1):_[o]=-1,N_(r,o,a,s).then((function(e){l[i].rankingData=e,M(i-u,l[i].rankingData,l[i].levelID)})),t.stopPropagation()}}},t=0;t<m*h;++t)e(t)},C=function(){document.getElementById("arrow-left").onclick=function(){if(x()){var e=u-w();x()&&e<0&&(e=0),e>=0&&(u=e),E(e)}},document.getElementById("arrow-right").onclick=function(){if(S()){var e=u+w();u=e,E(e)}}},O=function(){m=2,h=2;var e=function(e,t,n){return void 0===t&&(t=212.5),void 0===n&&(n=50),Math.floor((e+n)/(t+n))};h=e(document.getElementById("allItems").clientWidth,212.5,50);var t=document.getElementById("bottom-panel"),n=document.getElementById("loginDiv");return m=e(window.innerHeight-n.clientHeight-t.clientHeight,300,0),m=Math.max(1,m),h=Math.max(1,h),[m,h]},M=function(e,t,n){document.getElementById("spanBtnThumbsUp".concat(e)).innerText=t.upvotes.toString(),document.getElementById("spanBtnThumbsDown".concat(e)).innerText=t.downvotes.toString(),N(e,n)},N=function(e,t){var n=document.getElementById("btnThumbsDown".concat(e)),r=document.getElementById("btnThumbsUp".concat(e));null!=n&&null!=r&&(n.classList.remove("btnThumbsActive"),r.classList.remove("btnThumbsActive"),t in _&&(1==_[t]&&r.classList.add("btnThumbsActive"),-1==_[t]&&n.classList.add("btnThumbsActive")))},R=function(e){for(var t=e?"block":"none",r=0,i=0,o=Array.from(document.getElementsByClassName("divGalleryLevelInfo"));i<o.length;i++){var a=o[i];a.style.display=t,e&&r+u>=l.length&&(a.style.display="none"),(r+=1)>m*h&&(a.style.display="none")}if(e){for(var s=0;s<m*h&&!(u+s>=l.length);++s);for(var c=n.getCurrentUser(),p=0;p<m*h;++p){var d=document.getElementById("btnThumbsUp".concat(p)),f=document.getElementById("btnThumbsDown".concat(p)),g=[d,f];if(null==d||null==f)break;if(null!=c)for(var y=0,_=g;y<_.length;y++)(w=_[y]).classList.add("btnThumbs-notDisabled"),w.classList.remove("btnThumbs-disabled"),w.removeAttribute("disabled");else for(var v=0,b=g;v<b.length;v++){var w;(w=b[v]).classList.remove("btnThumbs-notDisabled"),w.classList.add("btnThumbs-disabled"),w.setAttribute("disabled","true")}}}},P=function(e,t){document.getElementById("divInfoOfLevel".concat(e)).innerHTML="".concat(t.metaData.levelName),document.getElementById("htmlTitleBottom".concat(e)).innerHTML="".concat(t.metaData.userName)},D=function(){for(var e=function(e){if(null==e)return!1;var t=j_();return console.log("USER",t),null!=t&&(console.log("USER UID",t.uid),"tJDoL6npyLS8i7Pf2upqUe1TO1D2"==t.uid)}(r),t=function(t){var n="btnDelete".concat(t);if(document.getElementById(n)?e||(document.getElementById(n).style.display="none"):e&&(document.getElementById(n).style.display="block"),!e)return"continue"},n=0;n<m*h;++n)t(n)},L=function(e,t){var n=null==e?0:e.rankingData.upvotes,r=null==e?0:e.rankingData.downvotes;console.log("IN HERE COEN");var i='<div id="divInfoOfLevel'.concat(t,'" class="divOfLevelInfo">').concat("TEMP","</div>"),o='  <div style="display: flex; flex-wrap: wrap; gap: 10px;" id="divBtnContainer'.concat(t,'">\n                                <button id="btnThumbsUp').concat(t,'" class="btn btn-light btnThumbs btnThumbs-disabled" style="flex-grow: 1; min-width: ').concat(25,"px; min-height: ").concat(25,"px; align-items: center; justify-content: center; display: inline-flex; padding: ").concat(5,'px;">\n                                    <img width="20px" src=\'./assets/thumbsup.png\' style="margin-right: ').concat(5,'px;">\n                                    <span id="spanBtnThumbsUp').concat(t,'">').concat(n,'</span>\n                                </button>\n                                <button id="btnThumbsDown').concat(t,'" class="btn btn-light btnThumbs btnThumbs-disabled" style="flex-grow: 1; min-width: ').concat(25,"px; min-height: ").concat(25,"px; align-items: center; justify-content: center; display: inline-flex; padding: ").concat(5,'px;">\n                                    <img width="20px" src=\'./assets/thumbsdown.png\' style="margin-right: ').concat(5,'px;">\n                                    <span id="spanBtnThumbsDown').concat(t,'">').concat(r,'</span>\n                                </button>\n                                    \n                                <button id="btnShare').concat(t,'" class="btn btn-light btnThumbs" style="flex-grow: 1; min-width: ').concat(25,"px; min-height: ").concat(25,"px; align-items: center; justify-content: center; display: inline-flex; padding: ").concat(5,'px;">\n                                    <img width="20px" src=\'./assets/clipboard.png\' style="margin-right: ').concat(5,'px;">\n                                </button>\n\n                                <button id="btnDelete').concat(t,'" class="btn btn-light btnThumbs" style="flex-grow: 1; min-width: ').concat(25,"px; min-height: ").concat(25,"px; align-items: center; justify-content: center; display: inline-flex; padding: ").concat(5,'px; display=none">\n                                    <img width="20px" src=\'./assets/trashcan.png\' style="margin-right: ').concat(5,'px;">\n                                </button>\n                                </div>');return'\n                    <div class="card-header">\n                    '.concat(i,'\n                    </div>\n                    <div class="card-body">\n                    \x3c!-- Put the rendering here --\x3e\n                    <img width="').concat(125,'px" id="myImage').concat(t,'">\n                    <div class="divToRenderIn"></div>\n                    \x3c!-- Buttons here --\x3e\n                    ').concat(o,'\n                    </div>\n                    <div class="card-footer text-body-secondary" id="htmlTitleBottom').concat(t,'">\n                    2 days ago\n                    </div>\n                    ')},F=function(){i.push(),i.background(255),i.fill(0,100,200),i.strokeCap(i.ROUND),i.translate(o/2,a/2),i.rotate(f);for(var e=i.TWO_PI/12,t=0;t<12;t++){var n=i.map(t,0,12,50,255);i.stroke(40,n);var r=50*i.cos(t*e+f),s=50*i.sin(t*e+f),l=70*i.cos(t*e+f),c=70*i.sin(t*e+f);i.line(r,s,l,c)}(f+=.05)>i.TWO_PI&&(f=0),i.pop()},B=function(e){var t=i.createGraphics(500,500);return F_(t,e.level.env_state,e.level.static_env_params,e.level.env_params,s),t.canvas.toDataURL()}}},q_=function(){function e(e,t,n,r){void 0===r&&(r=!1),this.pos=e,this.snap_line=t,this.snap_point=n,this.dashedLine=r}return e.prototype.addDrawToBuffer=function(){return this.draw.bind(this)},e.prototype.draw=function(e,t,n){this.snap_line?(this.dashedLine&&(e.push(),e.drawingContext.setLineDash([5,5])),e.line(ff(this.snap_line[0],t,n).get(0),ff(this.snap_line[0],t,n).get(1),ff(this.snap_line[1],t,n).get(0),ff(this.snap_line[1],t,n).get(1)),this.dashedLine&&e.pop()):this.snap_point&&(e.push(),e.fill(255,100),e.ellipse(ff(this.snap_point,t,n).get(0),ff(this.snap_point,t,n).get(1),10),e.pop())},e}(),H_=r(4213);!function(e){e[e.EDIT=0]="EDIT",e[e.PLAY=1]="PLAY"}(B_||(B_={})),function(e){e[e.ADD_CIRCLE=0]="ADD_CIRCLE",e[e.ADD_RECTANGLE=1]="ADD_RECTANGLE",e[e.ADD_JOINT=2]="ADD_JOINT",e[e.ADD_THRUSTER=3]="ADD_THRUSTER",e[e.SELECT=4]="SELECT"}(U_||(U_={})),function(e){e[e.CIRCLE=0]="CIRCLE",e[e.RECTANGLE=1]="RECTANGLE",e[e.JOINT=2]="JOINT",e[e.THRUSTER=3]="THRUSTER"}(V_||(V_={}));var W_=["None","Green","Blue","Red"];function K_(e){return"inverseMass"in e}function X_(e){return"aIndex"in e}function Y_(e){return"objectIndex"in e}function J_(e){for(var t=0;t<e.length;t++)if(!e[t].active)return t;return e.length-1}var Q_=function(){function e(e,t,n,r,i,o,a,s,l){void 0===l&&(l=null);var c=this;this.SNAP_DIST=.05,this.currentMode=U_.SELECT,this.oldMode=U_.ADD_RECTANGLE,this.addingShapeIndex=-1,this.isAddingShape=!1,this.currentlySelectedShapeIndex=-1,this.currentlySelectedShapeType=V_.CIRCLE,this.mouseDown=!1,this.mouseRightClick=!1,this.uiMapping={rigidBody:{},joint:{},thruster:{}},this.multipleClickCounter=0,this.multipleClickPreviousPosition=vt.array([0,0]),this.shouldTriggerUnselect=!1,this.shouldReset=!1,this.shouldLoad=!1,this.hasChangedParams=!1,this.shouldDeleteShape=!1,this.isBusyMultiSelect=!1,this.hasMultiSelected=!1,this.multiSelectStartPoint=null,this.multiSelectShapeIndices=[],this.isCurrentlyPlacingJoint=!1,this.isCurrentlyPlacingThruster=!1,this.shouldDeleteTempJoint=-1,this.shouldDeleteTempThruster=-1,this.drawCalls=[],this.shouldSaveFileLocal=!1,this.fileSaveName="kinetix-level.json",this.copyPasteObject={shouldTriggerPaste:!1,itemToCopy:null,shapeType:V_.CIRCLE},this.levelsSaved=[],this.shouldSaveFileCloud=!1,this.shouldHaveCloudButton=!0,this.modalIsActive=!1,this.allowSavingToCloud=!1,this.pageLoadStateReference=s,this.firebaseApp=l,this.p=e,this.staticEnvParams=t,this.envParams=n,this.images=r,this.qs=i,this.initGUI(o),this.isActive=a,e.mousePressed=function(e){return c.mousePressed(e,c)},e.mouseWheel=function(e){return c.mouseScroll(e,c)}}return e.prototype.edit=function(e){var t=this;if(this.drawCalls=[],this.shouldTriggerUnselect&&(this.shouldTriggerUnselect=!1,e=this._triggerUnselect(e)),this.shouldReset)return e=xf(this.staticEnvParams,this.envParams),this.shouldReset=!1,e;if(this.shouldLoad){this.shouldLoad=!1;var n=jf(this.staticEnvParams.screenDim.get(0),this.staticEnvParams.screenDim.get(1),this.contentShouldLoad);e=n.env_state,this.envParams=n.env_params,this.staticEnvParams=n.static_env_params,this.hasChangedParams=!0}else this.hasChangedParams=!1;if(e=this._checkIfShouldIncreaseEnvSize(e),this.shouldSaveFileLocal){this.shouldSaveFileLocal=!1;var r=Of(e=this.stopEditing(e),this.envParams,this.staticEnvParams);(0,H_.saveAs)(new Blob([JSON.stringify(r)]),this.fileSaveName),e=this.startEditing(e)}else this.shouldSaveFileCloud&&this.shouldHaveCloudButton&&this.firebaseApp&&this.allowSavingToCloud&&(console.log("Want to save to cloud"),this.shouldSaveFileCloud=!1,this.modalIsActive=!0,z_().fire({title:"Save Level",html:'\n                    <label for="swal-input-levelname" class="swal2-input-label">Level Name</label>\n                    <input id="swal-input-levelname" class="swal2-input">\n                        ',focusConfirm:!1,preConfirm:function(){var e=document.getElementById("swal-input-levelname").value;return e?{levelName:e,userName:t.pageLoadStateReference.getCurrentUser().displayName,userID:t.pageLoadStateReference.getCurrentUser().uid}:(z_().showValidationMessage("Missing Values!"),!1)}}).then((function(n){if(t.modalIsActive=!1,n.isConfirmed){var r=n.value,i=Of(e=t.stopEditing(e),t.envParams,t.staticEnvParams,!0),o=t._getMetaData(r.levelName,r.userName,r.userID),a={level:{env_state:O(e),env_params:C(t.envParams),static_env_params:C(t.staticEnvParams)},metaData:o,rankingData:{upvotes:0,downvotes:0},levelID:"-1"};a.level.env_params.numUnits=5,a.level.static_env_params.screenDim=vt.array([500,500]),document.getElementById("btnSaveCloud").setAttribute("disabled","true"),t.qs[6].disableControl("Back To Gallery"),function(e,t,n){return C_(void 0,void 0,void 0,(function(){var r,i,o,a;return O_(this,(function(s){switch(s.label){case 0:r=e.db,i={levelAndParams:t,metaData:n},s.label=1;case 1:return s.trys.push([1,3,,4]),[4,gm(gh(r,"levels"),i)];case 2:return o=s.sent(),console.log("Document written with ID: ",o.id),[2,o.id];case 3:return a=s.sent(),console.error("Error adding document: ",a),[3,4];case 4:return[2,null]}}))}))}(t.firebaseApp,i,o).then((function(e){console.log("Saved level to the DB"),z_().fire({icon:"success",title:"Successfully Saved",text:"Saved level successfully",showCancelButton:!0,confirmButtonText:'<img width="20px" src=\'./assets/clipboard.png\' style="margin-right: 5px;"> Copy Link',cancelButtonText:"Close",customClass:{confirmButton:"swal2-confirm-copy"}}).then((function(t){if(t.isConfirmed){var n=R_(e);console.log("COPIED LINK",n),navigator.clipboard.writeText(n)}})),a.levelID=e,t.levelsSaved.push(a),document.getElementById("btnSaveCloud").removeAttribute("disabled"),t.qs[6].enableControl("Back To Gallery")})),e=t.startEditing(e)}})));if(this.shouldDeleteShape&&(this.shouldDeleteShape=!1,-1!==this.shouldDeleteShapeIndex)){var i=this.shouldDeleteShapeType,o=this.shouldDeleteShapeIndex;i===V_.CIRCLE||i===V_.RECTANGLE?e=this._deleteRigidBody(e,o,i):i===V_.JOINT?e=this._deleteJoint(e,o):i===V_.THRUSTER&&(e=this._deleteThruster(e,o)),this.currentlySelectedShapeIndex=-1,this.shouldDeleteShapeIndex=-1,this.shouldDeleteShapeType=V_.CIRCLE,this._hideAllUIs()}switch(this._checkMode(e),e=this._cleanupJointsAndThrusters(e),this.currentMode!==U_.ADD_CIRCLE&&this.currentMode!==U_.ADD_RECTANGLE||(this.mouseDown?(e=this.isAddingShape?this.addShapeEnd(e):this.addShapeStart(e),this.mouseDown=!1):this.isAddingShape&&(e=this.addShapeMiddle(e))),this.mouseRightClick&&(this.mouseRightClick=!1,this.currentMode!=U_.SELECT&&(e=this._handleRightClick(e))),e=this._handleKeyboardPress(e),this.currentMode!==U_.SELECT&&(e=this._clearHighlighted(e)),this.currentMode){case U_.ADD_JOINT:e=this.addJoint(e);break;case U_.SELECT:e=this.select(e);break;case U_.ADD_THRUSTER:e=this.addThruster(e)}return this._updateButtonStatuses(e),e},e.prototype._checkIfShouldIncreaseEnvSize=function(e){var t=!this._hasAnyInactives(e.circle),n=!this._hasAnyInactives(e.polygon),r=!this._hasAnyInactives(e.thruster),i=!this._hasAnyInactives(e.joint),o=t||n||r||i;if(o&&console.log("Checking if should increase env size",{shouldIncreaseCircles:t,shouldIncreasePolys:n,shouldIncreaseThrusters:r,shouldIncreaseJoints:i}),!o)return e;var a=this.staticEnvParams.numCircles,s=a,l=this.staticEnvParams.numPolygons,c=l,u=this.staticEnvParams.numThrusters,p=u,d=this.staticEnvParams.numJoints,h=d;t&&(s*=2,this.staticEnvParams.numCircles=s),n&&(c*=2,this.staticEnvParams.numPolygons=c),r&&(p*=2,this.staticEnvParams.numThrusters=p),i&&(h*=2,this.staticEnvParams.numJoints=h);for(var m=s-a,f=c-l,g=p-u,y=h-d,_=0;_<m;_++)e.circle.push(vf(this.staticEnvParams));for(_=0;_<f;_++)e.polygon.push(vf(this.staticEnvParams));for(_=0;_<e.joint.length;_++){var v=e.joint[_];v.active&&(v.aIndex>=l&&(v.aIndex+=f),v.bIndex>=l&&(v.bIndex+=f))}for(_=0;_<e.thruster.length;_++){var b=e.thruster[_];b.active&&b.objectIndex>=l&&(b.objectIndex+=f)}for(_=0;_<y;++_)e.joint.push(bf());for(_=0;_<g;++_)e.thruster.push(wf());if(o){this.hasChangedParams=!0;var w=df(this.staticEnvParams);e.collisionMatrix=pf(this.staticEnvParams,e.joint),e.accRRManifolds=w.accRRManifolds,e.accCRManifolds=w.accCRManifolds,e.accCCManifolds=w.accCCManifolds,console.log("\tIncreased env size",this.staticEnvParams)}return e},e.prototype._getMetaData=function(e,t,n){return{userName:t,date:new Date,levelName:e,userID:n}},e.prototype.select=function(e){if(console.log("mousedown",this.p.mouseIsPressed),this.isBusyMultiSelect){var t=vt.array([this.p.mouseX,this.p.mouseY]),n=ff(this.multiSelectStartPoint,this.staticEnvParams,this.envParams);Mm(t.subtract(n))<this.envParams.pixelsPerUnit&&!this.p.mouseIsPressed?this.isBusyMultiSelect=!1:this.drawCalls.push((function(e,r,i){e.push(),e.stroke(0),e.fill(0,0,0,20),e.rect(n.get(0),n.get(1),t.get(0)-n.get(0),t.get(1)-n.get(1)),e.pop()}))}if(this.isBusyMultiSelect&&!this.p.mouseIsPressed){this.multiSelectShapeIndices=[],this.mouseDown=!1,this.isBusyMultiSelect=!1,this.hasMultiSelected=!0;for(var r=gf(vt.array([this.p.mouseX,this.p.mouseY]),this.staticEnvParams,this.envParams),i=[Math.min(this.multiSelectStartPoint.get(0),r.get(0)),Math.min(this.multiSelectStartPoint.get(1),r.get(1)),Math.max(this.multiSelectStartPoint.get(0),r.get(0)),Math.max(this.multiSelectStartPoint.get(1),r.get(1))],o=function(e,t){return e.get(0)>t[0]&&e.get(0)<t[2]&&e.get(1)>t[1]&&e.get(1)<t[3]},a=0;a<this.staticEnvParams.numCircles;++a)o(e.circle[a].position,i)&&(e.circle[a].highlighted=!0,this.multiSelectShapeIndices.push(a+this.staticEnvParams.numPolygons));for(a=0;a<this.staticEnvParams.numPolygons;++a)for(var s=0;s<e.polygon[a].nVertices;++s)if(o(Om(Dm(e.polygon[a].rotation),e.polygon[a].vertices.pick(s)).add(e.polygon[a].position),i)){e.polygon[a].highlighted=!0,this.multiSelectShapeIndices.push(a);break}if(0===this.multiSelectShapeIndices.length)this.hasMultiSelected=!1;else if(1===this.multiSelectShapeIndices.length){var l=M(e,this.multiSelectShapeIndices[0]);this.currentlySelectedShapeIndex=this.multiSelectShapeIndices[0]-(this.multiSelectShapeIndices[0]<this.staticEnvParams.numPolygons?0:this.staticEnvParams.numPolygons),this.currentlySelectedShapeType=this.multiSelectShapeIndices[0]<this.staticEnvParams.numPolygons?V_.RECTANGLE:V_.CIRCLE,this.hasMultiSelected=!1,this.multiSelectShapeIndices=[],this._triggerSelectEntity(e,l,this.currentlySelectedShapeType,this.currentlySelectedShapeIndex)}}if(this.mouseDown){this.mouseDown=!1,Mm(this.multipleClickPreviousPosition.subtract(vt.array([this.p.mouseX,this.p.mouseY])))<5?this.multipleClickCounter++:this.multipleClickCounter=0,this.multipleClickPreviousPosition=vt.array([this.p.mouseX,this.p.mouseY]),this._hideAllUIs(),e=this._clearHighlighted(e);var c=this._checkWhatIsClicked(e);e=c.envState,c.clicked||(this.hasMultiSelected&&(this.hasMultiSelected=!1,this.multiSelectShapeIndices=[]),this.p.mouseIsPressed&&(console.log("Should start multi select"),this.isBusyMultiSelect=!0,this.multiSelectStartPoint=gf(vt.array([this.p.mouseX,this.p.mouseY]),this.staticEnvParams,this.envParams)))}return-1===this.currentlySelectedShapeIndex||(this.currentlySelectedShapeType==V_.CIRCLE||this.currentlySelectedShapeType==V_.RECTANGLE?e=this._duringSelectRigidBody(e):this.currentlySelectedShapeType==V_.JOINT?e=this._duringSelectJoint(e):this.currentlySelectedShapeType==V_.THRUSTER&&(e=this._duringSelectThruster(e))),e},e.prototype.render=function(e){var t;e==B_.EDIT?this.p.image(this.images.edit,8,8,24,24):this.p.image(this.images.play,8,8,24,24);var n=(t={},t[U_.ADD_CIRCLE]="circle",t[U_.ADD_RECTANGLE]="square",t[U_.ADD_JOINT]="rjoint",t[U_.SELECT]="hand",t[U_.ADD_THRUSTER]="thruster",t)[this.currentMode];this.p.image(this.images[n],48,8,24,24);for(var r=0,i=this.drawCalls;r<i.length;r++)(0,i[r])(this.p,this.staticEnvParams,this.envParams)},e.prototype.addShapeStart=function(e){this.isAddingShape=!0,this.startPressLocation=gf(vt.array([this.p.mouseX,this.p.mouseY]),this.staticEnvParams,this.envParams);var t=this.currentMode==U_.ADD_CIRCLE?e.circle:e.polygon;return this.addingShapeIndex=J_(t),t[this.addingShapeIndex]=vf(this.staticEnvParams),t[this.addingShapeIndex].active=!0,t[this.addingShapeIndex].position=this.startPressLocation,t[this.addingShapeIndex].friction=1,t[this.addingShapeIndex].density=1,t[this.addingShapeIndex].inverseInertia=1,t[this.addingShapeIndex].inverseMass=1,this.addShapeMiddle(e)},e.prototype.addShapeMiddle=function(e){var t=gf(vt.array([this.p.mouseX,this.p.mouseY]),this.staticEnvParams,this.envParams);if(this.currentMode==U_.ADD_CIRCLE){var n=t.subtract(this.startPressLocation);e.circle[this.addingShapeIndex].radius=Math.min(Math.max(.1,Mm(n)),this.staticEnvParams.maxShapeSize/2),e.circle[this.addingShapeIndex]=_f(e.circle[this.addingShapeIndex])}else{var r=t.subtract(this.startPressLocation).divide(2),i=this.staticEnvParams.maxShapeSize/2/Math.sqrt(2);r=vt.clip(r,-i,i);var o=vt.abs(r),a=function(e,t){var n=vt.array([e/2,t/2]);return vt.stack([n.multiply(vt.array([1,1])),n.multiply(vt.array([1,-1])),n.multiply(vt.array([-1,-1])),n.multiply(vt.array([-1,1]))])}(2*(o=vt.clip(o,this.envParams.numUnits/this.envParams.pixelsPerUnit)).get(0),2*o.get(1));e.polygon[this.addingShapeIndex].vertices=a,e.polygon[this.addingShapeIndex].nVertices=a.shape[0],e.polygon[this.addingShapeIndex].position=this.startPressLocation.add(r),e.polygon[this.addingShapeIndex]=yf(e.polygon[this.addingShapeIndex])}return e},e.prototype.addShapeEnd=function(e){return this.isAddingShape=!1,e=this._afterCreateEntity(e,this.currentMode==U_.ADD_CIRCLE?V_.CIRCLE:V_.RECTANGLE,this.addingShapeIndex),this.addingShapeIndex=-1,e},e.prototype._snapToLine=function(e,t,n){var r=t.subtract(e),i=n.subtract(e),o=Mm(r),a=(Mm(i),r.divide(o)),s=km(i,a);return e.add(a.multiply(s))},e.prototype._getBestPosition=function(e,t){for(var n=!0,r=0,i=null;n&&!(++r>10);){n=!1;for(var o=0,a=e;o<a.length;o++){var s=a[o],l=s;s.snap_line&&(l.pos=this._snapToLine(s.snap_line[0],s.snap_line[1],t)),Mm(l.pos.subtract(t))<this.SNAP_DIST&&Mm(l.pos.subtract(t))>.01&&(t=l.pos,this.drawCalls.push(l.addDrawToBuffer()),n=!0,i=l)}}return i},e.prototype._snapPositionToRectangle=function(e,t){var n=Dm(e.rotation),r=function(e){return Om(n,e)},i=r(e.vertices.pick(0).add(e.vertices.pick(3)).divide(2)).add(e.position),o=r(e.vertices.pick(1).add(e.vertices.pick(2)).divide(2)).add(e.position),a=r(e.vertices.pick(0).add(e.vertices.pick(1)).divide(2)).add(e.position),s=r(e.vertices.pick(2).add(e.vertices.pick(3)).divide(2)).add(e.position),l=this._snapToLine(i,o,t),c=this._snapToLine(a,s,t),u=function(t){var n=r(e.vertices.pick(t)).add(e.position);return new q_(n,null,n)},p=(e.position,[new q_(l,[i,o],null),new q_(c,[a,s],null),new q_(i,null,i),new q_(o,null,o),new q_(a,null,a),new q_(s,null,s),u(0),u(1),u(2),u(3)]);return this._getBestPosition(p,t)},e.prototype._snapPositionToAllRectangles=function(e,t,n){void 0===n&&(n=[]);for(var r=[],i=this.staticEnvParams.numStaticFixatedPolys;i<this.staticEnvParams.numPolygons;i++){var o=e.polygon[i];if(o.active&&!n.includes(i)){var a=this._snapPositionToRectangle(o,t);a&&r.push(a)}}for(var s=null,l=0,c=r;l<c.length;l++){var u=c[l];(null==s||Mm(u.pos.subtract(t))<Mm(s.pos.subtract(t)))&&(s=u)}return null==s?t:(this.drawCalls.push(s.addDrawToBuffer()),s.pos)},e.prototype._snapPositionToCircle=function(e,t){return Mm(t.subtract(e.position))<this.SNAP_DIST?new q_(e.position,null,e.position):null},e.prototype._snapPositionToAllCircles=function(e,t,n){var r;void 0===n&&(n=[]);for(var i=0;i<e.circle.length;i++){var o=e.circle[i];if(o.active&&!n.includes(i)){var a=this._snapPositionToCircle(o,t);(null==r||Mm(a.pos.subtract(t))<Mm(r.pos.subtract(t)))&&(r=a)}}return r?(this.drawCalls.push(r.addDrawToBuffer()),r.pos):t},e.prototype._snapPositionToAllShapes=function(e,t,n,r,i){void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=null);var o=[],a=[];if(null!==r&&o.push(r),null!==n&&a.push(n),null!==i)for(var s=0;s<e.collisionMatrix.shape[0];s++)0==e.collisionMatrix.get(s,i)&&(s<this.staticEnvParams.numPolygons?o.push(s):a.push(s-this.staticEnvParams.numPolygons));return t=this._snapPositionToAllRectangles(e,t,o),this._snapPositionToAllCircles(e,t,a)},e.prototype._snapPosition=function(e,t,n,r,i){var o=this;void 0===i&&(i=!0);var a=M(e,n),s=[n<this.staticEnvParams.numPolygons?this._snapPositionToRectangle(a,t):this._snapPositionToCircle(a,t)];if(r>=0){var l=M(e,r),c=r<this.staticEnvParams.numPolygons?this._snapPositionToRectangle(l,t):this._snapPositionToCircle(l,t);s.push(c)}return function(e,t){for(var n=null,r=0,a=t;r<a.length;r++){var s=a[r];null!==s&&(null==n||Mm(s.pos.subtract(e))<Mm(n.pos.subtract(e)))&&(n=s)}return i&&n&&o.drawCalls.push(n.addDrawToBuffer()),null==n?e:n.pos}(t,s)},e.prototype.addJoint=function(e){var t=this;if(console.log("IS TRIGGERING ADD JOINT"),!this._getShapeOnMouse(e))return e;if(!this._isModeAvailable(U_.ADD_JOINT,e))return this._showStatus("No joints left to add"),e;var n=function(e,n){void 0===n&&(n=null),-1==n&&(n=null);var r=t._getCircleOnMouse(e).reverse(),i=t._getPolygonOnMouse(e).reverse();if(r.length+i.length<2)return null!==n&&(e.joint[n].active=!1),{envState:e,index:-1};var o,a,s=i.length>=1,l=i.length>=2;o=s?i[0]:r[0]+t.staticEnvParams.numPolygons,a=l?i[1]:r[s?0:1]+t.staticEnvParams.numPolygons;var c=M(e,o),u=M(e,a),p=gf(vt.array([t.p.mouseX,t.p.mouseY]),t.staticEnvParams,t.envParams);p=t._snapPosition(e,p,o,a,!1);var d=null===n?J_(e.joint):n;return e.joint[d]=bf(),e.joint[d].active=!0,e.joint[d].aIndex=o,e.joint[d].bIndex=a,e.joint[d].globalPosition=p,e.joint[d].rotation=u.rotation-c.rotation,e.joint[d].aRelativePos=Om(Dm(c.rotation).transpose([1,0]),p.subtract(c.position)),e.joint[d].bRelativePos=Om(Dm(u.rotation).transpose([1,0]),p.subtract(u.position)),e.joint[d].motorHasJointLimits=!1,e.joint[d].motorOn=!0,e.joint[d].motorPower=1,e.joint[d].motorSpeed=1,e.joint[d].isFixedJoint=!1,e.collisionMatrix=pf(t.staticEnvParams,e.joint),{envState:e,index:d}};if(this.mouseDown)this.mouseDown=!1,-1!=(r=n(e,this.addingShapeIndex)).index&&((e=r.envState).joint[this.addingShapeIndex].transparent=!1,this.isCurrentlyPlacingJoint=!1,e=this._afterCreateEntity(e,V_.JOINT,this.addingShapeIndex),this.addingShapeIndex=-1);else if(this.isCurrentlyPlacingJoint&&-1!==this.addingShapeIndex){var r=n(e,this.addingShapeIndex);e.joint[this.addingShapeIndex].transparent=!0,e=r.envState,-1===r.index&&(e.joint[this.addingShapeIndex].transparent=!1,e.joint[this.addingShapeIndex].active=!1,this.addingShapeIndex=-1,this.isCurrentlyPlacingJoint=!1)}else this.isCurrentlyPlacingJoint=!0,e=(r=n(e)).envState,this.addingShapeIndex=r.index;return e},e.prototype.addTriangle=function(e){return e},e.prototype._hasAnyInactives=function(e){for(var t=0,n=e;t<n.length;t++)if(!n[t].active)return!0;return!1},e.prototype.hasAnyThrustersLeft=function(e){return this._hasAnyInactives(e.thruster)},e.prototype.hasAnyJointsLeft=function(e){return this._hasAnyInactives(e.joint)},e.prototype.hasAnyCirclesLeft=function(e){return this._hasAnyInactives(e.circle)},e.prototype.hasAnyPolygonsLeft=function(e){return this._hasAnyInactives(e.polygon)},e.prototype._isModeAvailable=function(e,t){switch(e){case U_.ADD_CIRCLE:return this.hasAnyCirclesLeft(t);case U_.ADD_RECTANGLE:return this.hasAnyPolygonsLeft(t);case U_.ADD_JOINT:return this.hasAnyJointsLeft(t)||this.isAddingShape||this.isCurrentlyPlacingJoint;case U_.ADD_THRUSTER:return this.hasAnyThrustersLeft(t)||this.isAddingShape||this.isCurrentlyPlacingThruster}return!0},e.prototype.addThruster=function(e){var t=this;if(!this._isModeAvailable(U_.ADD_THRUSTER,e))return this._showStatus("No thrusters left to add"),e;var n=this._getShapeOnMouse(e);if(!n&&!this.isAddingShape)return this.isCurrentlyPlacingThruster&&-1!==this.addingShapeIndex&&(e.thruster[this.addingShapeIndex].active=!1,this.addingShapeIndex=-1,this.isCurrentlyPlacingThruster=!1),e;var r=function(e,r){void 0===r&&(r=null),-1==r&&(r=null);var i=gf(vt.array([t.p.mouseX,t.p.mouseY]),t.staticEnvParams,t.envParams),o=t.currentlySelectedShapeIndex+(t.currentlySelectedShapeType===V_.CIRCLE?t.staticEnvParams.numPolygons:0);i=t._snapPosition(e,i,o,-1);for(var a=null===r?J_(e.thruster):r,s=Om(Dm(n.rotation).transpose([1,0]),i.subtract(n.position)),l=0,c=0;c<e.thruster.length;c++)e.thruster[c].active&&l==e.thruster[c].thrusterBinding&&!e.thruster[c].transparent&&c!==r&&(l=(l+1)%t.staticEnvParams.numThrusterBindings);return e.thruster[a]=wf(),e.thruster[a].active=!0,e.thruster[a].relativePosition=s,e.thruster[a].globalPosition=i,e.thruster[a].objectIndex=o,e.thruster[a].thrusterBinding=l,console.log("HEYA",n.inverseMass,n.density,n),e.thruster[a].power=0==n.inverseMass?1:2.5/n.inverseMass,e.thruster[a].rotation=0,{envState:e,index:a}};if(this.mouseDown)this.mouseDown=!1,this.isAddingShape?(this.isAddingShape=!1,e.thruster[this.addingShapeIndex].transparent=!1,console.log("At this point binding = ",e.thruster[this.addingShapeIndex].thrusterBinding),this._afterCreateEntity(e,V_.THRUSTER,this.addingShapeIndex),this.addingShapeIndex=-1):(e=(y=r(e,this.addingShapeIndex)).envState,this.isCurrentlyPlacingThruster=!1,this.isAddingShape=!0,this.addingShapeIndex=y.index);else if(this.isAddingShape){var i=gf(vt.array([this.p.mouseX,this.p.mouseY]),this.staticEnvParams,this.envParams),o=M(e,e.thruster[this.addingShapeIndex].objectIndex),a=Om(Dm(o.rotation),e.thruster[this.addingShapeIndex].relativePosition).add(o.position),s=e.thruster[this.addingShapeIndex].relativePosition,l=Math.PI+Math.atan2(s.get(1),s.get(0)),c=i.subtract(a),u=Math.PI+Math.atan2(c.get(1),c.get(0)),p=Math.PI/4,d=Mm(e.thruster[this.addingShapeIndex].relativePosition)>.01,h=l+Math.PI,m=new q_(null,[o.position,a],null,!0);if(d)this.drawCalls.push(m.addDrawToBuffer()),u=Math.abs(u-l)<Math.abs(u-h)?l:h;else{var f=function(e,t){void 0===t&&(t=.5);var n=e/p,r=Math.round(n);return function(e,t,n){return void 0===n&&(n=.5),Math.abs((e-t+2*Math.PI)%(2*Math.PI))<n}(r,n)?{angle:r*p,snapped:!0}:{angle:e,snapped:!1}}(u),g=f.angle;f.snapped,u=g}e.thruster[this.addingShapeIndex].rotation=u}else if(this.isCurrentlyPlacingThruster&&-1!==this.addingShapeIndex){var y=r(e,this.addingShapeIndex);e.thruster[this.addingShapeIndex].transparent=!0,e=y.envState,-1===y.index&&(e.thruster[this.addingShapeIndex].transparent=!1,e.thruster[this.addingShapeIndex].active=!1,this.addingShapeIndex=-1,this.isCurrentlyPlacingThruster=!1)}else this.isCurrentlyPlacingThruster=!0,e=(y=r(e)).envState,this.addingShapeIndex=y.index;return e},e.prototype._afterCreateEntity=function(e,t,n){var r;this.changeMode(U_.SELECT),this._hideAllUIs(),this.currentlySelectedShapeIndex=n,this.currentlySelectedShapeType=t,this.mouseDown=!1,e=this._clearHighlighted(e);var i=(r={},r[V_.CIRCLE]=e.circle,r[V_.RECTANGLE]=e.polygon,r[V_.JOINT]=e.joint,r[V_.THRUSTER]=e.thruster,r)[t];return this._triggerSelectEntity(e,i[n],t,n)},e.prototype._nthItemOnMouse=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=null);var r=this._getJointsOnMouse(e),i=this._getThrustersOnMouse(e),o=this._getCircleOnMouse(e),a=this._getPolygonOnMouse(e),s=r.length,l=s+i.length,c=l+o.length,u=c+a.length;t>=u&&(t%=u);var p,d,h=function(e){return null===n||n===e},m=-1;return t<s&&h(V_.JOINT)?(m=r[t],p=e.joint,d=V_.JOINT):s<=t&&t<l&&h(V_.THRUSTER)?(m=i[t-s],p=e.thruster,d=V_.THRUSTER):l<=t&&t<c&&h(V_.CIRCLE)?(d=V_.CIRCLE,m=o[t-l],p=e.circle):c<=t&&t<u&&h(V_.RECTANGLE)&&(m=a[t-c],p=e.polygon,d=V_.RECTANGLE),{entity:m>=0?p[m]:null,idx:m,type:d,array:p}},e.prototype._triggerSelectEntity=function(e,t,n,r){switch(this.qs[3].hide(),n){case V_.CIRCLE:case V_.RECTANGLE:return this._onSelectRigidBody(e,t,r);case V_.JOINT:return this._onSelectJoint(e,t,r);case V_.THRUSTER:return this._onSelectThruster(e,t,r)}},e.prototype._checkWhatIsClicked=function(e){var t=this._nthItemOnMouse(e,this.multipleClickCounter),n=t.entity,r=(t.array,t.type),i=t.idx;if(-1==i)return{envState:e,clicked:!1};if(this.currentlySelectedShapeType=r,this.hasMultiSelected)if(this.multiSelectShapeIndices.includes(i)&&r==V_.RECTANGLE||this.multiSelectShapeIndices.includes(i+this.staticEnvParams.numPolygons)&&r==V_.CIRCLE){console.log("MULTI SELECT INDEX",this.multiSelectShapeIndices.length),1==this.multiSelectShapeIndices.length&&(this.hasMultiSelected=!1,this.multiSelectShapeIndices=[]);for(var o=0,a=this.multiSelectShapeIndices;o<a.length;o++)M(e,a[o]).highlighted=!0}else this.hasMultiSelected=!1,this.multiSelectShapeIndices=[];return{envState:this._triggerSelectEntity(e,n,r,i),clicked:!0}},e.prototype._onSelectThruster=function(e,t,n){return void 0===n&&(n=null),null!==n&&(this.currentlySelectedShapeType=V_.THRUSTER,this.currentlySelectedShapeIndex=n),this.qs[2].show(),t.highlighted=!0,this.populateEntityFields(t),e},e.prototype._duringSelectThruster=function(e){console.assert(this.currentlySelectedShapeType===V_.THRUSTER);var t=e.thruster[this.currentlySelectedShapeIndex];return this.putUIFieldsInsideEntity(t,e).envState},e.prototype._onSelectJoint=function(e,t,n){return void 0===n&&(n=null),null!==n&&(this.currentlySelectedShapeType=V_.JOINT,this.currentlySelectedShapeIndex=n),this.qs[1].show(),t.highlighted=!0,this.populateEntityFields(t),e},e.prototype._duringSelectJoint=function(e){console.assert(this.currentlySelectedShapeType===V_.JOINT);var t=e.joint[this.currentlySelectedShapeIndex];return this.putUIFieldsInsideEntity(t,e).envState},e.prototype._onSelectRigidBody=function(e,t,n){return void 0===n&&(n=null),null!==n&&(this.currentlySelectedShapeIndex=n),this.hasMultiSelected||this.qs[0].show(),t.highlighted=!0,this.populateEntityFields(t),this.mouseDragStartPos=vt.array([this.p.mouseX,this.p.mouseY]),this.mouseDragStartRBPos=t.position,e},e.prototype._moveRigidBody=function(e,t,n,r,i){void 0===r&&(r=null),void 0===i&&(i=null);for(var o=M(e,t),a=n.subtract(o.position),s=null===r?0:r-o.rotation,l=[],c=0;c<e.collisionMatrix.shape[0];c++)0==e.collisionMatrix.get(c,t)&&l.push(c);if(null!==i)for(var u=0,p=i;u<p.length;u++)c=p[u],l.includes(c)||l.push(c);for(var d=0,h=l;d<h.length;d++)if(!((c=h[d])<this.staticEnvParams.numStaticFixatedPolys)){var m=M(e,c);m.position=m.position.add(a),m.rotation+=s}if(0!=s)for(var f=0;f<e.joint.length;f++)for(var g=0;g<e.joint.length;g++){var y=e.joint[g];if(y.active&&l.includes(y.aIndex)){var _=M(e,y.aIndex),v=M(e,y.bIndex);if(y.aIndex<this.staticEnvParams.numStaticFixatedPolys||y.bIndex<this.staticEnvParams.numStaticFixatedPolys)continue;var b=Ym(_,v,y.aRelativePos,y.bRelativePos),w=b.a_point,x=b.b_point.subtract(w);console.log("diff",x.tolist());var S=x;t!=y.aIndex&&_.position.add(S,!1),t!=y.bIndex&&v.position.subtract(S,!1)}}return e},e.prototype._duringSelectRigidBody=function(e){var t=this.currentlySelectedShapeType===V_.CIRCLE,n=t?e.circle:e.polygon,r=n[this.currentlySelectedShapeIndex];if(!this.p.mouseIsPressed||!this.mouseDragStartPos||this.currentlySelectedShapeType===V_.RECTANGLE&&this.currentlySelectedShapeIndex<this.staticEnvParams.numStaticFixatedPolys)this.mouseDragStartPos=null,r.transparent=!1;else{var i=vt.array([this.p.mouseX,this.p.mouseY]).subtract(this.mouseDragStartPos);i=gf(i,this.staticEnvParams,this.envParams,!1);var o=this.mouseDragStartRBPos.add(i.multiply(vt.array([1,-1]))),a=this.currentlySelectedShapeIndex+(t?this.staticEnvParams.numPolygons:0);o=this._snapPositionToAllShapes(e,o,null,null,a),e=this._moveRigidBody(e,a,o,null,this.hasMultiSelected?this.multiSelectShapeIndices:null),Mm(i)>.01&&(r.transparent=!0),this.populateEntityFields(r)}return e=Xm(e=this.putUIFieldsInsideEntity(r,e,this.currentlySelectedShapeType,this.currentlySelectedShapeIndex).envState),n[this.currentlySelectedShapeIndex]=t?_f(r):yf(r),e},e.prototype.onResumeFocus=function(){this.levelsSaved=[]},e.prototype.stopEditing=function(e){console.log("STOP EDITING",document.getElementById("divMode").style.visibility);for(var t=0,n=this.qs;t<n.length;t++)n[t].hide();return this.qs[6].show(),document.getElementById("divMode").style.visibility="hidden",document.getElementById("divMode").parentElement.parentElement.style.visibility="hidden",console.log("\tSTOP EDITING",document.getElementById("divMode").style.visibility),this.drawCalls=[],this._discardBusyWithThrustersAndJoints(),e=this._cleanupJointsAndThrusters(e),this.mouseDown=!1,this.currentlySelectedShapeIndex=-1,this._clearHighlighted(e)},e.prototype.startEditing=function(e){return console.log("START EDITING"),this.qs[3].show(),this.qs[5].show(),this.qs[6].show(),document.getElementById("divMode").style.visibility="visible",document.getElementById("divMode").parentElement.parentElement.style.visibility="visible",e},e.prototype._clearHighlighted=function(e){for(var t=0;t<e.circle.length;t++)e.circle[t].highlighted=!1;for(t=0;t<e.polygon.length;t++)e.polygon[t].highlighted=!1;for(t=0;t<e.joint.length;t++)e.joint[t].highlighted=!1;for(t=0;t<e.thruster.length;t++)e.thruster[t].highlighted=!1;return e},e.prototype.drawSnapLines=function(e,t,n){var r=this;if(void 0===t&&(t=null),void 0===n&&(n=null),this.p.push(),this.p.drawingContext.setLineDash([5,5]),t){var i=gf(vt.array([this.p.mouseX,this.p.mouseY]),this.staticEnvParams,this.envParams).subtract(t.position);i=i.divide(Fm(Mm(i))).multiply(t.radius);var o=vt.array([i.get(1),-i.get(0)]),a=function(e,t){var n=ff(e,r.staticEnvParams,r.envParams),i=ff(t,r.staticEnvParams,r.envParams);r.p.line(n.get(0),n.get(1),i.get(0),i.get(1))};a(t.position.subtract(i),t.position.add(i)),a(t.position.subtract(o),t.position.add(o))}this.p.pop()},e.prototype.markForDeletion=function(){this.shouldDeleteShape=!0,this.shouldDeleteShapeIndex=this.currentlySelectedShapeIndex,this.shouldDeleteShapeType=this.currentlySelectedShapeType},e.prototype.mousePressed=function(e,t){t.p.mouseX<0||t.p.mouseX>t.p.width||t.p.mouseY<0||t.p.mouseY>t.p.height||(document.getElementsByTagName("canvas")[0],this.isActive()&&(this.modalIsActive||(e.preventDefault(),e.stopPropagation(),0==e.button?this.mouseDown=!this.mouseDown:this.mouseRightClick=!0)))},e.prototype._discardBusyWithThrustersAndJoints=function(){console.log("in here",this.isCurrentlyPlacingJoint,this.isCurrentlyPlacingThruster),this.isCurrentlyPlacingJoint&&(this.isCurrentlyPlacingJoint=!1,this.shouldDeleteTempJoint=this.addingShapeIndex),this.isCurrentlyPlacingThruster&&(this.isCurrentlyPlacingThruster=!1,this.shouldDeleteTempThruster=this.addingShapeIndex)},e.prototype._cleanupJointsAndThrusters=function(e){return-1!==this.shouldDeleteTempJoint&&(e.joint[this.shouldDeleteTempJoint].active=!1,this.shouldDeleteTempJoint=-1),-1!==this.shouldDeleteTempThruster&&(e.thruster[this.shouldDeleteTempThruster].active=!1,this.shouldDeleteTempThruster=-1),e},e.prototype._checkMode=function(e){var t=Math.sign(this.currentMode-this.oldMode);for(t=0==t?1:t,0==this.oldMode&&this.currentMode>1&&(t=-1),0==this.currentMode&&this.oldMode>1&&(t=1);!this._isModeAvailable(this.currentMode,e);)this.changeMode((this.currentMode+t+5)%5)},e.prototype.changeMode=function(e){var t=this.currentMode;this.currentMode=e,this.isAddingShape=!1,t!=this.currentMode&&(this.oldMode=t,this._hideAllUIs(),this._discardBusyWithThrustersAndJoints(),this.currentlySelectedShapeIndex=-1)},e.prototype.mouseScroll=function(e,t){if(!(t.p.mouseX<0||t.p.mouseX>t.p.width||t.p.mouseY<0||t.p.mouseY>t.p.height)&&this.isActive()&&!this.modalIsActive){var n=(t.currentMode+1*Math.sign(e.deltaY)+5)%5;n!=t.currentMode&&t.changeMode(n)}},e.prototype._handleRightClick=function(e){var t;this.multipleClickCounter=0;var n=((t={})[U_.ADD_CIRCLE]=V_.CIRCLE,t[U_.ADD_RECTANGLE]=V_.RECTANGLE,t[U_.ADD_JOINT]=V_.JOINT,t[U_.ADD_THRUSTER]=V_.THRUSTER,t);if(!(this.currentMode in n))return e;var r=this._nthItemOnMouse(e,0,n[this.currentMode]),i=(r.entity,r.array,r.type),o=r.idx;if(-1==o)return e;switch(i){case V_.CIRCLE:case V_.RECTANGLE:return this._deleteRigidBody(e,o,i);case V_.JOINT:return this._deleteJoint(e,o);case V_.THRUSTER:return this._deleteThruster(e,o)}return e},e.prototype._deleteJoint=function(e,t){return e.joint[t].active=!1,e.collisionMatrix=pf(this.staticEnvParams,e.joint),e},e.prototype._deleteThruster=function(e,t){return e.thruster[t].active=!1,e},e.prototype._deleteRigidBody=function(e,t,n){var r=n===V_.CIRCLE?e.circle:e.polygon,i=t+(n===V_.CIRCLE?this.staticEnvParams.numPolygons:0);r[t].active=!1;for(var o=0;o<e.joint.length;++o){var a=e.joint[o];a.aIndex!=i&&a.bIndex!=i||(e=this._deleteJoint(e,o))}for(o=0;o<e.thruster.length;++o)e.thruster[o].objectIndex==i&&(e=this._deleteThruster(e,o));return e},e.prototype._getShapeOnMouse=function(e){this.currentlySelectedShapeIndex=-1;for(var t=this._getCircleOnMouse(e),n=this._getPolygonOnMouse(e),r=0;r<t.length;r++){var i=t[r];return this.currentlySelectedShapeIndex=i,this.currentlySelectedShapeType=V_.CIRCLE,e.circle[i]}for(r=0;r<n.length;r++)return i=n[r],this.currentlySelectedShapeIndex=i,this.currentlySelectedShapeType=V_.RECTANGLE,e.polygon[i]},e.prototype._getThrusterOnMouse=function(e){for(var t=this._getThrustersOnMouse(e),n=0;n<t.length;n++){var r=t[n];return this.currentlySelectedShapeIndex=r,this.currentlySelectedShapeType=V_.THRUSTER,e.thruster[r]}},e.prototype._getThrustersOnMouse=function(e){for(var t=[],n=0;n<e.thruster.length;n++){var r=e.thruster[n];if(r.active){var i=mf(8,this.staticEnvParams,this.envParams),o=gf(vt.array([this.p.mouseX,this.p.mouseY]),this.staticEnvParams,this.envParams);Mm(r.globalPosition.subtract(o))<i&&t.push(n)}}return t},e.prototype._getJointOnMouse=function(e){for(var t=this._getJointsOnMouse(e),n=0;n<t.length;n++){var r=t[n];return this.currentlySelectedShapeIndex=r,this.currentlySelectedShapeType=V_.JOINT,e.joint[r]}},e.prototype._getJointsOnMouse=function(e){for(var t=[],n=0;n<e.joint.length;n++){var r=e.joint[n];if(r.active){var i=mf(8,this.staticEnvParams,this.envParams),o=gf(vt.array([this.p.mouseX,this.p.mouseY]),this.staticEnvParams,this.envParams);Mm(r.globalPosition.subtract(o))<i&&t.push(n)}}return t},e.prototype._getCircleOnMouse=function(e){for(var t=[],n=0;n<e.circle.length;n++){var r=e.circle[n];if(r.active){var i=gf(vt.array([this.p.mouseX,this.p.mouseY]),this.staticEnvParams,this.envParams);Mm(r.position.subtract(i))<r.radius&&t.push(n)}}return t},e.prototype._getPolygonOnMouse=function(e){for(var t=[],n=0;n<e.polygon.length;n++){var r=e.polygon[n];if(r.active){for(var i=gf(vt.array([this.p.mouseX,this.p.mouseY]),this.staticEnvParams,this.envParams),o=Om(Dm(r.rotation).transpose([1,0]),i.subtract(r.position)),a=!0,s=0;s<r.nVertices;s++){var l=r.vertices.pick(s),c=r.vertices.pick((s+1)%r.nVertices).subtract(l),u=vt.array([c.get(1),-c.get(0)]);if(km(o.subtract(l),u)<0){a=!1;break}}a&&t.push(n)}}return t},e.prototype._triggerUnselect=function(e){return e=this._clearHighlighted(e),this._hideAllUIs(),this.currentlySelectedShapeIndex=-1,this.changeMode(U_.SELECT),e},e.prototype.keyPressed=function(e){if(this.p.keyCode==this.p.DELETE||this.p.keyCode==this.p.BACKSPACE)this.markForDeletion();else if(this.p.keyCode==this.p.ESCAPE)e=this._triggerUnselect(e);else if(this.p.keyIsDown(this.p.CONTROL)&&this.p.keyIsDown(67))if(this.currentMode==U_.SELECT&&-1!=this.currentlySelectedShapeIndex){var t=(n=this.currentlySelectedShapeType==V_.CIRCLE?e.circle:e.polygon)[this.currentlySelectedShapeIndex];this.copyPasteObject.itemToCopy=C(t),this.copyPasteObject.shapeType=this.currentlySelectedShapeType}else this.copyPasteObject.itemToCopy=null;else if(this.p.keyIsDown(this.p.CONTROL)&&this.p.keyIsDown(86)&&null!=this.copyPasteObject.itemToCopy){var n,r=J_(n=this.copyPasteObject.shapeType==V_.CIRCLE?e.circle:e.polygon);n[r]=C(this.copyPasteObject.itemToCopy),n[r].position=gf(vt.array([this.p.mouseX,this.p.mouseY]),this.staticEnvParams,this.envParams),n[r].transparent=!1,n[r].highlighted=!1,e=this._afterCreateEntity(e,this.copyPasteObject.shapeType,r)}return e},e.prototype._handleKeyboardPress=function(e){return e},e.prototype.populateEntityFields=function(e){var t,n,r=this,i=function(e,t,n){for(var r in n){var i=n[r],o=void 0;"string"==typeof i?(o=e[i],-1!==i.toLowerCase().indexOf("rotation")&&(o=180*o/Math.PI)):o=e[i.name].get(i.index),t.setValue(r,o)}};K_(e)?(t=e,n=r.qs[0],i(t,n,r.uiMapping.rigidBody),n.setValue("Fixed",0===t.inverseMass),n.setValue("Role",{value:W_[t.role],index:t.role}),r.currentlySelectedShapeType===V_.RECTANGLE?(n.disableControl("Radius"),n.hideControl("Radius")):(n.enableControl("Radius"),n.showControl("Radius")),n._titleBar.children[0].children[0].innerText=(r.currentlySelectedShapeType===V_.CIRCLE?"Circle":"Rectangle")+" Index "+r.currentlySelectedShapeIndex):X_(e)?function(e){var t=r.qs[1];i(e,t,r.uiMapping.joint),t._titleBar.innerText="Joint Index "+r.currentlySelectedShapeIndex}(e):Y_(e)&&function(e){var t=r.qs[2];i(e,t,r.uiMapping.thruster),t.setValue("Thruster Binding",e.thrusterBinding+1),t._titleBar.innerText="Thruster Index "+r.currentlySelectedShapeIndex}(e)},e.prototype.putUIFieldsInsideEntity=function(e,t,n,r){var i=this;void 0===n&&(n=null),void 0===r&&(r=null);var o,a,s=function(e,t,o){for(var a in o){var s=o[a],l=t.getValue(a);if("string"==typeof s)-1!==s.toLowerCase().indexOf("rotation")&&(l=l*Math.PI/180),e[s]=l;else{if(n===V_.RECTANGLE&&r<i.staticEnvParams.numStaticFixatedPolys&&"position"==s.name)continue;var c=e[s.name].get(s.index);if(Math.abs(c-l)<.01&&"position"==s.name)continue;e[s.name].set(s.index,l)}}return e};return K_(e)?(console.assert(n===V_.CIRCLE||n===V_.RECTANGLE),console.assert(null!=r),o=function(e){n===V_.RECTANGLE&&r<i.staticEnvParams.numStaticFixatedPolys?(i.qs[0].hideControl("PositionX"),i.qs[0].hideControl("PositionY"),i.qs[0].disableControl("PositionX"),i.qs[0].disableControl("PositionY"),i.qs[0].hideControl("Delete")):(i.qs[0].showControl("PositionX"),i.qs[0].showControl("PositionY"),i.qs[0].enableControl("PositionX"),i.qs[0].enableControl("PositionY"),i.qs[0].showControl("Delete"));var o=i.qs[0].getValue("Role").index,a=e.role,l=0;if(a!=o){console.assert(null!==t);for(var c=0;c<i.staticEnvParams.numPolygons;c++)c==r&&n==V_.RECTANGLE||!t.polygon[c].active||(l+=t.polygon[c].role==o?1:0);for(c=0;c<i.staticEnvParams.numCircles;c++)c==r&&n==V_.CIRCLE||!t.circle[c].active||(l+=t.circle[c].role==o?1:0)}var u=e.position.clone(),p=e.rotation;(e=s(e,i.qs[0],i.uiMapping.rigidBody)).role=o;var d=e.position.clone(),h=e.rotation;return e.position=u,e.rotation=p,t=i._moveRigidBody(t,r+(n==V_.CIRCLE?i.staticEnvParams.numPolygons:0),d,h),l>0&&0!=o&&(e.role=a,i.qs[0].setValue("Role",{value:W_[a],index:a})),i.qs[0].getValue("Fixed")?(e.inverseMass=0,e.inverseInertia=0):(e.inverseMass=1,e.inverseInertia=1),e}(e)):X_(e)?o=function(e){e=s(e,i.qs[1],i.uiMapping.joint);for(var t=["Min Joint Lt","Max Joint Lt"],n=0,r=t.concat(["Joint Limits","Motor On","Motor Power","Motor Speed","Joint Binding"]);n<r.length;n++){var o=r[n];e.isFixedJoint?(i.qs[1].disableControl(o),i.qs[1].hideControl(o)):(i.qs[1].enableControl(o),i.qs[1].showControl(o))}for(var a=0,l=t;a<l.length;a++)o=l[a],e.isFixedJoint||(e.motorHasJointLimits?(i.qs[1].enableControl(o),i.qs[1].showControl(o)):(i.qs[1].disableControl(o),i.qs[1].hideControl(o)));return e}(e):Y_(e)?((a=s(e,i.qs[2],i.uiMapping.thruster)).thrusterBinding=i.qs[2].getValue("Thruster Binding")-1,o=a):console.assert(!1,"Should not reach here"),{entity:o,envState:t}},e.prototype.initGUI=function(e){var t,n,r=this,i=function(e){return function(t,n,r,i){void 0===i&&(i=!1),r(n),i||(e[n]=t)}},o=function(e,t){e("delete","Delete",(function(e){return t.addButton(e,(function(){r.markForDeletion()}))}),!0)};!function(){for(var e=i(r.uiMapping.rigidBody),t=r.qs[0],n=0;n<2;++n)e({name:"position",index:n},"Position"+(0===n?"X":"Y"),(function(e){return t.addRange(e,0,r.envParams.numUnits,2.5,.01)}));for(n=0;n<2;++n)e({name:"velocity",index:n},"Velocity"+(0===n?"X":"Y"),(function(e){return t.addRange(e,-10,10,0,.1)}));e("rotation","Rotation",(function(e){return t.addRange(e,0,360,0,15)})),e("angularVelocity","AngularVelocity",(function(e){return t.addRange(e,-10,10,0,.1)})),e("friction","Friction",(function(e){return t.addRange(e,0,1,0,.1)})),e("restitution","Restitution",(function(e){return t.addRange(e,0,1,0,.1)})),e("density","Density",(function(e){return t.addRange(e,.1,1,0,.1)})),e("radius","Radius",(function(e){return t.addRange(e,.1,1,1,.1)})),e("role","Role",(function(e){return t.addDropDown(e,W_)}),!0),e("fixed","Fixed",(function(e){return t.addBoolean(e,!1)}),!0),o(e,t),t._titleBar.innerHTML='<div><span id=\'rbTitle\'>Circle Index 0</span><button id="btnCloseSelect" style="float: right; font-size: 16px; background: none; border: none; cursor: pointer; color:red">&times;</button></div>',t.hide()}(),t=r.qs[1],(n=i(r.uiMapping.joint))("isFixedJoint","Fixed Joint",(function(e){return t.addBoolean(e,!1,(function(){console.log("Toggling")}))})),n("motorSpeed","Motor Speed",(function(e){return t.addRange(e,0,10,0,.1)})),n("motorPower","Motor Power",(function(e){return t.addRange(e,0,10,0,.1)})),n("rotation","Rotation",(function(e){return t.addRange(e,0,360,0,15)})),n("motorOn","Motor On",(function(e){return t.addBoolean(e,!1)})),n("motorHasJointLimits","Joint Limits",(function(e){return t.addBoolean(e,!1)}),!1),n("minRotation","Min Joint Lt",(function(e){return t.addRange(e,0,360,0,15)})),n("maxRotation","Max Joint Lt",(function(e){return t.addRange(e,0,360,0,15)})),n("motorBinding","Joint Binding",(function(e){return t.addRange(e,0,r.staticEnvParams.numMotorBindings-1,0,1)})),o(n,t),t.hide(),function(){var e=r.qs[2],t=i(r.uiMapping.thruster);t("power","ThrusterPower",(function(t){return e.addRange(t,0,10,0,.1)})),t("rotation","ThrusterRotation",(function(t){return e.addRange(t,0,360,0,15)})),t("thrusterBinding","Thruster Binding",(function(t){return e.addRange(t,1,r.staticEnvParams.numThrusterBindings,1,1)}),!0),o(t,e),e.hide()}(),function(){var e=r.qs[3],t=50,n=25;r.qs[4].addHTML("Status","<strong>XX</strong>"),r.qs[4].disableControl("Status"),r.qs[4]._titleBar.innerText="",e.addBoolean("Let Agent Play",!1),e.hideControl("Let Agent Play"),e.addFileChooser("Load File","Load File","",(function(e){return t=r,n=void 0,o=function(){var t,n=this;return function(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}(this,(function(r){return console.log("Loading file",e,e),(t=new FileReader).addEventListener("load",(function(e){var t=JSON.parse(e.target.result);console.log("loaded with file a",t),n.shouldLoad=!0,n.contentShouldLoad=t})),t.readAsText(e),[2]}))},new((i=void 0)||(i=Promise))((function(e,r){function a(e){try{l(o.next(e))}catch(e){r(e)}}function s(e){try{l(o.throw(e))}catch(e){r(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(a,s)}l((o=o.apply(t,n||[])).next())}));var t,n,i,o}));var i=r.shouldHaveCloudButton?'<button id="btnSaveCloud" style="flex-grow: 1; min-width: '.concat(t,"px; min-height: ").concat(n,"px; align-items: center; justify-content: center; display: none; padding: ").concat(5,"px;\">\n                        <img src='./assets/cloud.png' style=\"margin-right: ").concat(5,'px;">Save to Cloud\n                    </button>\n\n                    \n                    '):"";e.addHTML("Saving",'<div style="display: flex; flex-wrap: wrap; gap: 10px;" id="divSaving">\n                    <button id="btnSaveLocal" style="flex-grow: 1; min-width: '.concat(t,"px; min-height: ").concat(n,"px; align-items: center; justify-content: center; display: inline-flex; padding: ").concat(5,"px;\">\n                        <img src='./assets/download.png' style=\"margin-right: ").concat(5,'px;">Download\n                    </button>\n                    ').concat(i,"\n                </div>")),e._titleBar.innerText="",e.show(),r.qs[6].addHTML("Mode",'<div style="display: flex; flex-wrap: wrap; gap: 10px;" id="divMode">\n                                    <button id="btnModeCircle" style="flex-grow: 1; min-width: '.concat(t,"px; min-height: ").concat(n,"px; align-items: center; justify-content: center; display: inline-flex; padding: ").concat(5,"px;\">\n                                        <img src='./assets/circle.png' style=\"margin-right: ").concat(5,'px;">Circle\n                                    </button>\n                                    <button id="btnModeRectangle" style="flex-grow: 1; min-width: ').concat(t,"px; min-height: ").concat(n,"px; align-items: center; justify-content: center; display: inline-flex; padding: ").concat(5,"px;\">\n                                        <img src='./assets/square.png' style=\"margin-right: ").concat(5,'px;">Rectangle\n                                    </button>\n                                    <button id="btnModeJoint" style="flex-grow: 1; min-width: ').concat(t,"px; min-height: ").concat(n,"px; align-items: center; justify-content: center; display: inline-flex; padding: ").concat(5,"px;\">\n                                        <img src='./assets/rjoint3.png' style=\"margin-right: ").concat(5,'px;">Joint\n                                    </button>\n                                    <button id="btnModeThruster" style="flex-grow: 1; min-width: ').concat(t,"px; min-height: ").concat(n,"px; align-items: center; justify-content: center; display: inline-flex; padding: ").concat(5,"px;\">\n                                        <img src='./assets/thruster5.png' style=\"margin-right: ").concat(5,'px;">Thruster\n                                    </button>\n                                    <button id="btnModeSelect" style="flex-grow: 1; min-width: ').concat(t,"px; min-height: ").concat(n,"px; align-items: center; justify-content: center; display: inline-flex; padding: ").concat(5,"px;\">\n                                        <img src='./assets/hand.png' style=\"margin-right: ").concat(5,'px;">Select\n                                    </button>\n                                </div>\n                                ')),r.qs[6].addHTML("Actions",'<div style="display: flex; flex-wrap: wrap; gap: 10px;" id="divActions">\n                                    <button id="btnActionPlayHuman" style="flex-grow: 1; min-width: '.concat(t,"px; min-height: ").concat(n,"px; align-items: center; justify-content: center; display: inline-flex; padding: ").concat(5,"px;\">\n                                        <img src='./assets/play_human.png' style=\"margin-right: ").concat(5,'px;" width="32px">Human\n                                    </button>\n                                    <button id="btnActionPlayAgent" style="flex-grow: 1; min-width: ').concat(t,"px; min-height: ").concat(n,"px; align-items: center; justify-content: center; display: inline-flex; padding: ").concat(5,"px;\">\n                                        <img src='./assets/play_robot.png' style=\"margin-right: ").concat(5,'px;" width="32px">Agent\n                                    </button>\n                                    <button id="btnActionPause" style="flex-grow: 1; min-width: ').concat(t,"px; min-height: ").concat(n,"px; align-items: center; justify-content: center; display: inline-flex; padding: ").concat(5,"px;\">\n                                        <img src='./assets/stop.png' style=\"margin-right: ").concat(5,'px;">Stop\n                                    </button>\n                                    <button id="btnActionNew" style="flex-grow: 1; min-width: ').concat(t,"px; min-height: ").concat(n,"px; align-items: center; justify-content: center; display: inline-flex; padding: ").concat(5,"px;\">\n                                        <img src='./assets/plus.png' style=\"margin-right: ").concat(5,'px;">New\n                                    </button>\n                                </div>\n                                ')),r.qs[6]._titleBar.innerText="",r.qs[6].show()}(),r.qs[5].addHTML("Instructions",'\n                <div>\n                    <div>\n                        <strong>Controls</strong>\n                        <ul>\n                            <li>Space: Switch between play and edit mode</li>\n                        </ul>\n                    </div>\n                    <div>\n                        <strong>Level Rules</strong>\n                        <ul>\n                            <li>There may be at most one of the red, blue, green shapes</li>\n                        </ul>\n                    </div>\n                \n                    <div>\n                        <strong>Edit Mode</strong>\n                        <ul>\n                            <li>In Edit mode, you can place shapes, or joints (which connect shapes) and thrusters using left click.</li>\n                            <li>When on the appropriate mode, right click can delete objects.</li>\n                            <li>You can tick the "Agent Playing" checkbox and press space to see the agent play the level.</li>\n                            <li>Choose the hand to edit existing entities</li>\n                            <li>You can also save files and share them with your friends</li>\n                        </ul>\n                    </div>\n                    <br>\n                    <div>\n                        <strong>Play Mode</strong>\n                        <ul>\n                            <li>The goal is to make the green shape (role = 1) touch the blue shape (role = 2) without touching the red one (role = 3)</li>\n                            <li>Arrows: Control joints (left/right controls yellow joints and up/down controls pink ones)</li>\n                            <li>WASD: Control joints (W/S controls blue joints and A/D controls orange ones)</li>\n                            <li>Numbers: 1 and 2 control yellow and pink thrusters, respectively</li>\n                        </ul>\n                    </div>\n                </div>\n                '),setTimeout((function(){document.getElementById("btnModeCircle").addEventListener("click",(function(){r.changeMode(U_.ADD_CIRCLE)})),document.getElementById("btnModeRectangle").addEventListener("click",(function(){r.changeMode(U_.ADD_RECTANGLE)})),document.getElementById("btnModeJoint").addEventListener("click",(function(){r.changeMode(U_.ADD_JOINT)})),document.getElementById("btnModeThruster").addEventListener("click",(function(){r.changeMode(U_.ADD_THRUSTER)})),document.getElementById("btnModeSelect").addEventListener("click",(function(){r.changeMode(U_.SELECT)})),document.getElementById("btnSaveLocal").addEventListener("click",(function(){r.shouldSaveFileLocal=!0})),r.shouldHaveCloudButton&&document.getElementById("btnSaveCloud").addEventListener("click",(function(){r.shouldSaveFileCloud=!0})),document.getElementById("btnActionNew").addEventListener("click",(function(){r.shouldReset=!0})),r.qs[5].show(),r.qs[5]._titleBar.innerText="Instructions V".concat("1.0.23"),r.qs[5].hideTitle("Instructions");for(var t=0,n=r.qs;t<n.length;t++)n[t].setCollapsible(!1);document.getElementById("btnCloseSelect").addEventListener("click",(function(){r.shouldTriggerUnselect=!0})),e()}),0)},e.prototype._hideAllUIs=function(){for(var e=0,t=this.qs;e<t.length;e++)t[e].hide();this.qs[5].show(),this.qs[3].show(),this.qs[6].show()},e.prototype._showStatus=function(e){this.qs[4].show(),this.qs[4].setValue("Status","<span style='color:red'>"+e+"</span>")},e.prototype._updateButtonStatuses=function(e){for(var t=0,n=[{id:"btnModeThruster",mode:U_.ADD_THRUSTER},{id:"btnModeJoint",mode:U_.ADD_JOINT},{id:"btnModeCircle",mode:U_.ADD_CIRCLE},{id:"btnModeRectangle",mode:U_.ADD_RECTANGLE},{id:"btnModeSelect",mode:U_.SELECT}];t<n.length;t++){var r=n[t],i=r.id,o=r.mode;o!=U_.SELECT&&(this._isModeAvailable(o,e)?document.getElementById(i).removeAttribute("disabled"):document.getElementById(i).setAttribute("disabled","true")),this.currentMode==o?document.getElementById(i).classList.add("active-button"):document.getElementById(i).classList.remove("active-button")}},e.prototype._showHideCloudSaveButton=function(e){for(var t=0,n=["btnSaveCloud"];t<n.length;t++){var r=n[t];document.getElementById(r).style.display=e?"inline-flex":"none"}this.allowSavingToCloud=!!e},e.prototype.showRatings=function(e){},e}(),Z_=r(4841),ev=r.n(Z_);let tv;function nv(){if(null==tv){let e;if("undefined"!=typeof window)e=window;else if(void 0!==r.g)e=r.g;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}tv=e}return tv}function rv(e,t){const n=function(){const e=nv();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);{const r=t();return n.set(e,r),n.get(e)}}function iv(e,t,n){return Math.max(e,Math.min(t,n))}function ov(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function av(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function sv(e,t,n=""){av(cv(e,t),(()=>n+` Shapes ${e} and ${t} must match`))}function lv(e){if(0===e.length)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function cv(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function uv(e){return e%1==0}function pv(e){const t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function dv(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function hv(e,t=e=>0,n,r){return new Promise(((i,o)=>{let a=0;const s=()=>{if(e())return void i();a++;const l=t(a);null!=n&&a>=n?o():null!=r?r(s,l):setTimeout(s,l)};s()}))}function mv(e,t){let n=1,r=-1;for(let t=0;t<e.length;++t)if(e[t]>=0)n*=e[t];else if(-1===e[t]){if(-1!==r)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${t}`);r=t}else if(e[t]<0)throw Error(`Shapes can not be < 0. Found ${e[t]} at dim ${t}`);if(-1===r){if(t>0&&t!==n)throw Error(`Size(${t}) must match the product of shape ${e}`);return e}if(0===n)throw Error(`Cannot infer the missing size in [${e}] when there are 0 elements`);if(t%n!=0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${n}`);const i=e.slice();return i[r]=t/n,i}function fv(e,t){const n=t.length;return av((e=null==e?t.map(((e,t)=>t)):[].concat(e)).every((e=>e>=-n&&e<n)),(()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${e}`)),av(e.every((e=>uv(e))),(()=>`All values in axis param must be integers but got axis ${e}`)),e.map((e=>e<0?n+e:e))}function gv(e,t){const n=[],r=[],i=null!=t&&Array.isArray(t)&&0===t.length,o=null==t||i?null:fv(t,e).sort();let a=0;for(let t=0;t<e.length;++t){if(null!=o){if(o[a]===t&&1!==e[t])throw new Error(`Can't squeeze axis ${t} since its dim '${e[t]}' is not 1`);(null==o[a]||o[a]>t)&&1===e[t]&&(n.push(e[t]),r.push(t)),o[a]<=t&&a++}1!==e[t]&&(n.push(e[t]),r.push(t))}return{newShape:n,keptDims:r}}function yv(e,t){return _v(e,t)}function _v(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error(`Unknown data type ${e}`);n=new Array(t)}return n}function vv(e,t){return!("complex64"===t||"float32"===t&&"complex64"!==e||"int32"===t&&"float32"!==e&&"complex64"!==e||"bool"===t&&"bool"===e)}function bv(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error(`Unknown dtype ${e}`)}function wv(e){return"string"==typeof e||e instanceof String}function xv(e){return Array.isArray(e)?xv(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":"number"==typeof e?"float32":wv(e)?"string":"boolean"==typeof e?"bool":"float32"}function Sv(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Tv(e,t){for(let n=t;n<e;++n)if(e%n==0)return n;return e}function Ev(e){const t=e.length;if(t<2)return[];const n=new Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function Iv(e,t,n,r=!1){const i=new Array;if(1===t.length){const o=t[0]*(r?2:1);for(let t=0;t<o;t++)i[t]=n[e+t]}else{const o=t[0],a=t.slice(1),s=a.reduce(((e,t)=>e*t))*(r?2:1);for(let t=0;t<o;t++)i[t]=Iv(e+t*s,a,n,r)}return i}function kv(e,t,n=!1){if(0===e.length)return t[0];const r=e.reduce(((e,t)=>e*t))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}${n?" for a complex tensor":""}.`);return Iv(0,e,t,n)}function jv(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error(`Unknown data type ${t}`)}function Av(e){e.forEach((t=>{av(Number.isInteger(t)&&t>=0,(()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`))}))}function Cv(e,t,n){if(0===t)return 0;if(1===t)return e[0];let r=e[e.length-1];for(let t=0;t<e.length-1;++t)r+=n[t]*e[t];return r}function Ov(e,t,n){if(0===t)return[];if(1===t)return[e];const r=new Array(t);for(let t=0;t<r.length-1;++t)r[t]=Math.floor(e/n[t]),e-=r[t]*n[t];return r[r.length-1]=e,r}function Mv(e){return e&&e.then&&"function"==typeof e.then}const Nv="tfjsflags";class Rv{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Pv,this.populateURLFlags()}setPlatform(e,t){null!=this.platform&&(Dv().getBool("IS_TEST")||Dv().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){const t=this.urlFlags[e];Dv().getBool("IS_TEST")||Dv().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${t}.`),this.set(e,t)}}async getAsync(e){return e in this.flags||(this.flags[e]=await this.evaluateFlag(e)),this.flags[e]}get(e){if(e in this.flags)return this.flags[e];const t=this.evaluateFlag(e);if(Mv(t))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(null==this.flagRegistry[e])throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(null==this.flagRegistry[e])throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(void 0===this.global||void 0===this.global.location||void 0===this.global.location.search)return;const e=this.getQueryParams(this.global.location.search);Nv in e&&e[Nv].split(",").forEach((e=>{const[t,n]=e.split(":");this.urlFlags[t]=function(e,t){const n=t.toLowerCase();return"true"===n||"false"===n?"true"===n:""+ +n===n?+n:t}(0,n)}))}}function Pv(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,((e,...n)=>(function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,n[0],n[1]),n.join("=")))),t}function Dv(){return Lv}let Lv=null;function Fv(...e){Dv().getBool("IS_TEST")||Dv().getBool("PROD")||console.warn(...e)}function Bv(...e){Dv().getBool("IS_TEST")||Dv().getBool("PROD")||console.log(...e)}const Uv=rv("kernelRegistry",(()=>new Map)),Vv=rv("gradRegistry",(()=>new Map));function Gv(e,t){const n=Hv(e,t);return Uv.get(n)}function zv(e){return Vv.get(e)}function $v(e){const t=Uv.entries(),n=[];for(;;){const{done:r,value:i}=t.next();if(r)break;const[o,a]=i,[s]=o.split("_");s===e&&n.push(a)}return n}function qv(e){const{kernelName:t,backendName:n}=e,r=Hv(t,n);Uv.has(r)&&Fv(`The kernel '${t}' for backend '${n}' is already registered`),Uv.set(r,e)}function Hv(e,t){return`${t}_${e}`}class Wv{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class Kv{refCount(e){return Xv("refCount")}incRef(e){return Xv("incRef")}timerAvailable(){return!0}time(e){return Xv("time")}read(e){return Xv("read")}readSync(e){return Xv("readSync")}readToGPU(e,t){return Xv("readToGPU")}numDataIds(){return Xv("numDataIds")}disposeData(e,t){return Xv("disposeData")}write(e,t,n){return Xv("write")}move(e,t,n,r,i){return Xv("move")}createTensorFromGPUData(e,t,n){return Xv("createTensorFromGPUData")}memory(){return Xv("memory")}floatPrecision(){return Xv("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return Xv("dispose")}}function Xv(e){throw new Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}const Yv="Add",Jv="AddN",Qv="BatchMatMul",Zv="Cast",eb="Concat",tb="RealDiv",nb="Einsum",rb="Equal",ib="Exp",ob="ExpandDims",ab="GatherV2",sb="GatherNd",lb="GreaterEqual",cb="Identity",ub="Less",pb="LogicalAnd",db="Max",hb="Maximum",mb="Minimum",fb="Multinomial",gb="Multiply",yb="Neg",_b="Pack",vb="Reciprocal",bb="Relu",wb="Reshape",xb="Relu6",Sb="Rsqrt",Tb="TensorScatterUpdate",Eb="Select",Ib="Slice",kb="Sigmoid",jb="Sum",Ab="Square",Cb="StridedSlice",Ob="Sub",Mb="Tanh",Nb="Tile",Rb="Transpose",Pb="_FusedMatMul";function Db(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}var Lb=r(8570);const Fb=r.n(Lb)()||Lb;function Bb(e){return Fb.fromString(e,!0,16)}const Ub=Bb("c3a5c85c97cb3127"),Vb=Bb("b492b66fbe98f273"),Gb=Bb("9ae16a3b2f90404f");function zb(e){return e.xor(e.shru(47))}function $b(e,t,n){const r=e.slice(t,t+n);return Fb.fromBytes(Array.from(r),!0,!0)}function qb(e,t){return $b(e,t,8)}function Hb(e,t){return $b(e,t,4)}function Wb(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function Kb(e,t,n=Bb("9ddfea08eb382d69")){let r=e.xor(t).mul(n);r=r.xor(r.shru(47));let i=t.xor(r).mul(n);return i=i.xor(i.shru(47)),i=i.mul(n),i}function Xb(e,t,n,r){return function(e,t,n,r,i,o){i=i.add(e),o=Wb(o.add(i).add(r),21);const a=i;return i=(i=i.add(t)).add(n),o=o.add(Wb(i,44)),[i.add(r),o.add(a)]}(qb(e,t),qb(e,t+8),qb(e,t+16),qb(e,t+24),n,r)}function Yb(e,t=e.length){const n=Fb.fromNumber(81,!0);if(t<=32)return t<=16?function(e,t=e.length){if(t>=8){const n=Gb.add(2*t),r=qb(e,0).add(Gb),i=qb(e,t-8);return Kb(Wb(i,37).mul(n).add(r),Wb(r,25).add(i).mul(n),n)}if(t>=4){const n=Gb.add(2*t);return Kb(Hb(e,0).shl(3).add(t),Hb(e,t-4),n)}if(t>0){const n=e[0]+(e[t>>1]<<8),r=t+(e[t-1]<<2);return zb(Gb.mul(n).xor(Ub.mul(r))).mul(Gb)}return Gb}(e,t):function(e,t=e.length){const n=Gb.add(2*t),r=qb(e,0).mul(Vb),i=qb(e,8),o=qb(e,t-8).mul(n),a=qb(e,t-16).mul(Gb);return Kb(Wb(r.add(i),43).add(Wb(o,30)).add(a),r.add(Wb(i.add(Gb),18)).add(o),n)}(e,t);if(t<=64)return function(e,t=e.length){const n=Gb.add(2*t),r=qb(e,0).mul(Gb),i=qb(e,8),o=qb(e,t-8).mul(n),a=qb(e,t-16).mul(Gb),s=Wb(r.add(i),43).add(Wb(o,30)).add(a),l=Kb(s,r.add(Wb(i.add(Gb),18)).add(o),n),c=qb(e,16).mul(n),u=qb(e,24),p=s.add(qb(e,t-32)).mul(n),d=l.add(qb(e,t-24)).mul(n);return Kb(Wb(c.add(u),43).add(Wb(p,30)).add(d),c.add(Wb(u.add(r),18)).add(p),n)}(e,t);let r=n,i=n.mul(Vb).add(113),o=zb(i.mul(Gb).add(113)).mul(Gb),a=[Fb.UZERO,Fb.UZERO],s=[Fb.UZERO,Fb.UZERO];r=r.mul(Gb).add(qb(e,0));let l=0;const c=64*(t-1>>6),u=c+(t-1&63)-63;do{r=Wb(r.add(i).add(a[0]).add(qb(e,l+8)),37).mul(Vb),i=Wb(i.add(a[1]).add(qb(e,l+48)),42).mul(Vb),r=r.xor(s[1]),i=i.add(a[0]).add(qb(e,l+40)),o=Wb(o.add(s[0]),33).mul(Vb),a=Xb(e,l,a[1].mul(Vb),r.add(s[0])),s=Xb(e,l+32,o.add(s[1]),i.add(qb(e,l+16))),[o,r]=[r,o],l+=64}while(l!==c);const p=Vb.add(o.and(255).shl(1));return l=u,s[0]=s[0].add(t-1&63),a[0]=a[0].add(s[0]),s[0]=s[0].add(a[0]),r=Wb(r.add(i).add(a[0]).add(qb(e,l+8)),37).mul(p),i=Wb(i.add(a[1]).add(qb(e,l+48)),42).mul(p),r=r.xor(s[1].mul(9)),i=i.add(a[0].mul(9).add(qb(e,l+40))),o=Wb(o.add(s[0]),33).mul(p),a=Xb(e,l,a[1].mul(p),r.add(s[0])),s=Xb(e,l+32,o.add(s[1]),i.add(qb(e,l+16))),[o,r]=[r,o],Kb(Kb(a[0],s[0],p).add(zb(i).mul(Ub)).add(o),Kb(a[1],s[1],p).add(r),p)}function Jb(e,t){return"string"===t?ew(e):Qb([e],t)}function Qb(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=rw(e)),Dv().getBool("DEBUG")&&function(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${t} being uploaded contains ${r}.`)}}(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){const t=new Uint8Array(e.length);for(let n=0;n<t.length;++n)0!==Math.round(e[n])&&(t[n]=1);return t}throw new Error(`Unknown data type ${t}`)}function Zb(){return Dv().platform.now()}function ew(e,t="utf-8"){return t=t||"utf-8",Dv().platform.encode(e,t)}function tw(e,t="utf-8"){return t=t||"utf-8",Dv().platform.decode(e,t)}function nw(e){return null!=Dv().platform.isTypedArray?Dv().platform.isTypedArray(e):Db(e)}function rw(e,t=[],n=!1){if(null==t&&(t=[]),"boolean"==typeof e||"number"==typeof e||"string"==typeof e||Mv(e)||null==e||nw(e)&&n)t.push(e);else if(Array.isArray(e)||nw(e))for(let r=0;r<e.length;++r)rw(e[r],t,n);else{let r=-1;for(const t of Object.keys(e))/^([1-9]+[0-9]*|0)$/.test(t)&&(r=Math.max(r,Number(t)));for(let i=0;i<=r;i++)rw(e[i],t,n)}return t}class iw{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new aw)}profileKernel(e,t,n){let r;const i=()=>{r=n()};let o;const a=Zb();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(i);else{i();for(const e of r)e.dataSync();o=Promise.resolve({kernelMs:Zb()-a})}if(Dv().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let t=0;t<r.length;t++){const n=r[t];n.data().then((t=>{ow(t,n.dtype,e)}))}return{kernelName:e,outputs:r,inputs:t,timeMs:o.then((e=>e.kernelMs)),extraInfo:o.then((e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""))}}logKernelProfile(e){const{kernelName:t,outputs:n,timeMs:r,inputs:i,extraInfo:o}=e;n.forEach((e=>{Promise.all([e.data(),r,o]).then((n=>{this.logger.logKernelProfile(t,e,n[0],n[1],i,n[2])}))}))}}function ow(e,t,n){if("float32"!==t)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(isNaN(r)||!isFinite(r))return console.warn(`Found ${r} in the result of '${n}'`),!0}return!1}class aw{logKernelProfile(e,t,n,r,i,o){const a="number"==typeof r?dv(`${r}ms`,9):r.error,s=dv(e,25),l=t.rank,c=t.size,u=dv(t.shape.toString(),14);let p="";for(const e in i){const n=i[e];if(null!=n){const r=n.shape||t.shape,i=r.length;p+=`${e}: ${i}D ${i>0?r:""} `}}console.log(`%c${s}\t%c${a}\t%c${l}D ${u}\t%c${c}\t%c${p}\t%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}function sw(e,t,n,r){const i=Ev(t),o=function(e,t,n,r){const i=lv(t),o=r[r.length-1],a=new Array(o).fill(0),s=t.length,l="complex64"===n?pw(e):e;if(s>1)for(let e=0;e<i/o;e++){const t=e*o;for(let e=0;e<o;e++)a[e]=Math.max(a[e],lw(l[t+e],0,n).length)}return a}(e,t,n,i),a=t.length,s=uw(e,t,n,i,o),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${a}`),l.push(`  shape: [${t}]`),l.push("  values:")),l.push(s.map((e=>"    "+e)).join("\n")),l.join("\n")}function lw(e,t,n){let r;return r=Array.isArray(e)?`${parseFloat(e[0].toFixed(7))} + ${parseFloat(e[1].toFixed(7))}j`:wv(e)?`'${e}'`:"bool"===n?cw(e):parseFloat(e.toFixed(7)).toString(),dv(r,t)}function cw(e){return 0===e?"false":"true"}function uw(e,t,n,r,i,o=!0){const a="complex64"===n?2:1,s=t[0],l=t.length;if(0===l)return"complex64"===n?[lw(pw(e)[0],0,n)]:"bool"===n?[cw(e[0])]:[e[0].toString()];if(1===l){if(s>20){const t=3*a;let r=Array.from(e.slice(0,t)),o=Array.from(e.slice((s-3)*a,s*a));return"complex64"===n&&(r=pw(r),o=pw(o)),["["+r.map(((e,t)=>lw(e,i[t],n))).join(", ")+", ..., "+o.map(((e,t)=>lw(e,i[s-3+t],n))).join(", ")+"]"]}return["["+("complex64"===n?pw(e):Array.from(e)).map(((e,t)=>lw(e,i[t],n))).join(", ")+"]"]}const c=t.slice(1),u=r.slice(1),p=r[0]*a,d=[];if(s>20){for(let t=0;t<3;t++){const r=t*p,o=r+p;d.push(...uw(e.slice(r,o),c,n,u,i,!1))}d.push("...");for(let t=s-3;t<s;t++){const r=t*p,o=r+p;d.push(...uw(e.slice(r,o),c,n,u,i,t===s-1))}}else for(let t=0;t<s;t++){const r=t*p,o=r+p;d.push(...uw(e.slice(r,o),c,n,u,i,t===s-1))}const h=2===l?",":"";d[0]="["+(s>0?d[0]+h:"");for(let e=1;e<d.length-1;e++)d[e]=" "+d[e]+h;let m=",\n";for(let e=2;e<l;e++)m+="\n";return d[d.length-1]=" "+d[d.length-1]+"]"+(o?"":m),d}function pw(e){const t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}class dw{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=lv(e),null!=n){const e=n.length;av(e===this.size,(()=>`Length of values '${e}' does not match the size inferred by the shape '${this.size}'.`))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||_v(t,this.size),this.strides=Ev(e)}set(e,...t){0===t.length&&(t=[0]),av(t.length===this.rank,(()=>`The number of provided coordinates (${t.length}) must match the rank (${this.rank})`));const n=this.locToIndex(t);this.values[n]=e}get(...e){0===e.length&&(e=[0]);let t=0;for(const n of e){if(n<0||n>=this.shape[t]){const t=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(t)}t++}let n=e[e.length-1];for(let t=0;t<e.length-1;++t)n+=this.strides[t]*e[t];return this.values[n]}locToIndex(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(0===this.rank)return[];if(1===this.rank)return[e];const t=new Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return hw().makeTensor(this.values,this.shape,this.dtype)}}let hw=null,mw=null,fw=null;class gw{constructor(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=lv(e),this.strides=Ev(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return mw.buffer(this.shape,this.dtype,e)}bufferSync(){return mw.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return kv(this.shape,e,"complex64"===this.dtype)}arraySync(){return kv(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();const e=hw().read(this.dataId);if("string"===this.dtype){const t=await e;try{return t.map((e=>tw(e)))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),hw().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=hw().readSync(this.dataId);if("string"===this.dtype)try{return e.map((e=>tw(e)))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await hw().read(this.dataId);return"string"===this.dtype?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),hw().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return mw.print(this,e)}clone(){return this.throwIfDisposed(),mw.clone(this)}toString(e=!1){return sw(this.dataSync(),this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),mw.cast(this,e)}variable(e=!0,t,n){return this.throwIfDisposed(),hw().makeVariable(this,e,t,n)}}function yw(){return rv("Tensor",(()=>gw))}Object.defineProperty(gw,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}),yw();class _w extends gw{constructor(e,t,n,r){super(e.shape,e.dtype,e.dataId,r),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!cv(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);hw().disposeTensor(this),this.dataId=e.dataId,hw().incRef(this,null)}dispose(){hw().disposeVariable(this),this.isDisposedInternal=!0}}var vw,bw,ww,xw,Sw;Object.defineProperty(_w,Symbol.hasInstance,{value:e=>e instanceof gw&&null!=e.assign&&e.assign instanceof Function}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(vw||(vw={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(bw||(bw={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(ww||(ww={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(xw||(xw={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(Sw||(Sw={}));const Tw={float32:xw,int32:bw,bool:ww,complex64:Sw};function Ew(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error(`Can not upcast ${e} with ${t}`)}return Tw[e][t]}function Iw(e){return null!=e&&"object"==typeof e&&"texture"in e&&e.texture instanceof WebGLTexture}function kw(e){return"undefined"!=typeof GPUBuffer&&null!=e&&"object"==typeof e&&"buffer"in e&&e.buffer instanceof GPUBuffer}function jw(e,t){if(e.dtype===t.dtype)return[e,t];const n=Ew(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function Aw(e){const t=[];return Cw(e,t,new Set),t}function Cw(e,t,n){if(null==e)return;if(e instanceof gw)return void t.push(e);if(r=e,!Array.isArray(r)&&"object"!=typeof r)return;var r;const i=e;for(const e in i){const r=i[e];n.has(r)||(n.add(r),Cw(r,t,n))}}function Ow(e){return null!=e.kernelName}class Mw{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((e=>e.name))))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class Nw{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Mw}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then((()=>{}));if(null!=this.backendInstance)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t];if(await this.initializeBackend(n).success)return void await this.setBackend(n)}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(null==this.backendInstance){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{const{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,n=1){return e in this.registryFactory?(Fv(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;const{success:t,asyncInit:n}=this.initializeBackend(e);if(!(n?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new iw(this.backendInstance),!0}setupRegisteredKernels(){$v(this.backendName).forEach((e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)}))}disposeRegisteredKernels(e){$v(e).forEach((t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])}))}initializeBackend(e){const t=this.registryFactory[e];if(null==t)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const n=t.factory();if(!n||n instanceof Kv||"function"!=typeof n.then)return this.registry[e]=n,{success:!0,asyncInit:!1};{const t=++this.pendingBackendInitId,r=n.then((n=>!(t<this.pendingBackendInitId||(this.registry[e]=n,this.pendingBackendInit=null,0)))).catch((n=>(t<this.pendingBackendInitId||(this.pendingBackendInit=null,Fv(`Initialization of backend ${e} failed`),Fv(n.stack||n.message)),!1)));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}}catch(t){return Fv(`Initialization of backend ${e} failed`),Fv(t.stack||t.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority))}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t],{success:r,asyncInit:i}=this.initializeBackend(n);if(i||r)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const n=this.state.tensorInfo.get(t),r=n.backend,i=this.readSync(t),o=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,i,n.shape,n.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n,r=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}return this.scopedRun((()=>this.startScope(r)),(()=>this.endScope(n)),(()=>(n=t(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n)))}scopedRun(e,t,n){e();try{const e=n();return t(),e}catch(e){throw t(),e}}nextTensorId(){return Nw.nextTensorId++}nextVariableId(){return Nw.nextVariableId++}clone(e){const t=Pw.runKernel(cb,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(e=>({x:()=>{const t={x:e};return Pw.runKernel(Zv,t,{dtype:"float32"})}})),[],{}),t}runKernel(e,t,n){if(null==this.backendName&&this.backend,null==Gv(e,this.backendName))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){const r=this.backend.numDataIds();let i=0;n.forEach((e=>{i+="complex64"===e.dtype?3:1}));const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=r-t-i-o;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${e}'`)}runKernelFunc(e){let t,n=[];const r=this.isTapeOn(),i=this.state.numBytes,o=this.state.numTensors;let a,s;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;const l=Ow(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(Ow(e)){const{kernelName:t,inputs:i,attrs:o}=e;null==this.backendName&&this.backend;const l=Gv(t,this.backendName);av(null!=l,(()=>`Cannot find registered kernel '${t}' for backend '${this.backendName}'`)),a=()=>{const e=this.backend.numDataIds();s=l.kernelFunc({inputs:i,attrs:o,backend:this.backend});const a=Array.isArray(s)?s:[s];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(t,e,a);const c=a.map((e=>null!=e.rank?e:this.makeTensorFromTensorInfo(e)));if(r){const e=this.getTensorsForGradient(t,i,c);n=this.saveTensorsForBackwardMode(e)}return c}}else{const{forwardFunc:t}=e,i=e=>{r&&(n=e.map((e=>this.keep(this.clone(e)))))};a=()=>{const e=this.backend.numDataIds();s=this.tidy((()=>t(this.backend,i)));const n=Array.isArray(s)?s:[s];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,e,n),n}}const{inputs:c,attrs:u}=e,p=Ow(e)?null:e.backwardsFunc;let d;return this.scopedRun((()=>this.state.kernelDepth++),(()=>this.state.kernelDepth--),(()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(d=this.profiler.profileKernel(l,c,(()=>a())),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(d),t=d.outputs):t=a()})),r&&this.addTapeNode(l,c,t,p,n,u),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map((e=>null!=c[e]?c[e].shape:null)),outputShapes:t.map((e=>e.shape)),kernelTimeMs:d.timeMs,extraInfo:d.extraInfo}),Array.isArray(s)?t:t[0]}saveTensorsForBackwardMode(e){const t=e.map((e=>this.keep(this.clone(e))));return t}getTensorsForGradient(e,t,n){const r=zv(e);if(null!=r){const e=r.inputsToSave||[],i=r.outputsToSave||[];let o;r.saveAllInputs?(av(Array.isArray(t),(()=>"saveAllInputs is true, expected inputs to be an array.")),o=Object.keys(t).map((e=>t[e]))):o=e.map((e=>t[e]));const a=n.filter(((e,t)=>i[t]));return o.concat(a)}return[]}makeTensor(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;let i=e;"string"===n&&wv(e[0])&&(i=e.map((e=>ew(e))));const o=r.write(i,t,n),a=new gw(t,n,o,this.nextTensorId());if(this.trackTensor(a,r),"string"===n){const e=this.state.tensorInfo.get(o),t=function(e){if(null==e)return 0;let t=0;return e.forEach((e=>t+=e.length)),t}(i);this.state.numBytes+=t-e.bytes,e.bytes=t}return a}makeTensorFromDataId(e,t,n,r){const i={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(i,r)}makeTensorFromTensorInfo(e,t){const{dataId:n,shape:r,dtype:i}=e,o=new gw(r,i,n,this.nextTensorId());return this.trackTensor(o,t),o}makeVariable(e,t=!0,n,r){n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));const i=new _w(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[i.name])throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*bv(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof _w||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){const t=e.size*bv(e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map((e=>e.totalBytesSnapshot))),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n;for(const e of this.state.activeProfile.kernels)e.kernelTimeMs=await e.kernelTimeMs,e.extraInfo=await e.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,n,r,i,o){const a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:i},s=zv(e);null!=s&&(r=s.gradFunc),null!=r&&(a.gradient=e=>(e=e.map(((e,t)=>{if(null==e){const e=n[t],r=jv(e.size,e.dtype);return this.makeTensor(r,e.shape,e.dtype)}return e})),r(e.length>1?e:e[0],i,o))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=Aw(e),n=new Set(t.map((e=>e.id)));for(let e=0;e<this.state.activeScope.track.length;e++){const t=this.state.activeScope.track[e];t.kept||n.has(t.id)||t.dispose()}const r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach((e=>{e.kept||e.scopeId!==r.id||this.track(e)}))}gradients(e,t,n,r=!1){if(av(t.length>0,(()=>"gradients() received an empty list of xs.")),null!=n&&"float32"!==n.dtype)throw new Error(`dy must have 'float32' dtype, but has '${n.dtype}'`);const i=this.scopedRun((()=>this.startTape()),(()=>this.endTape()),(()=>this.tidy("forward",e)));av(i instanceof gw,(()=>"The result y returned by f() must be a tensor."));const o=function(e,t,n){const r={},i={};for(let e=0;e<t.length;e++)r[t[e].id]=!0;for(let n=0;n<e.length;n++){const o=e[n],a=o.inputs;for(const e in a){const n=a[e];let s=!1;for(let e=0;e<t.length;e++)if(r[n.id]){o.outputs.forEach((e=>r[e.id]=!0)),s=!0,i[o.id]=!0;break}if(s)break}}const o={};o[n.id]=!0;const a={};for(let t=e.length-1;t>=0;t--){const n=e[t],r=n.inputs;for(let e=0;e<n.outputs.length;e++)if(o[n.outputs[e].id]){for(const e in r)o[r[e].id]=!0,a[n.id]=!0;break}}const s=[];for(let t=0;t<e.length;t++){const n=e[t];if(i[n.id]&&a[n.id]){const e={};for(const t in n.inputs){const i=n.inputs[t];r[i.id]&&(e[t]=i)}const t=Object.assign({},n);t.inputs=e,t.outputs=n.outputs,s.push(t)}}return s}(this.state.activeTape,t,i);if(!r&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(()=>{const e={};e[i.id]=null==n?function(e){const t=function(e,t){const n=jv(e,t);for(let e=0;e<n.length;e++)n[e]=1;return n}(lv(e),"float32");return Pw.makeTensor(t,e,"float32")}(i.shape):n,function(e,t,n,r){for(let i=t.length-1;i>=0;i--){const o=t[i],a=[];if(o.outputs.forEach((t=>{const n=e[t.id];null!=n?a.push(n):a.push(null)})),null==o.gradient)throw new Error(`Cannot compute gradient: gradient function not found for ${o.kernelName}.`);const s=o.gradient(a);for(const t in o.inputs){if(!(t in s))throw new Error(`Cannot backprop through input ${t}. Available gradients found: ${Object.keys(s)}.`);const i=n((()=>s[t]()));if("float32"!==i.dtype)throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input ${t} must have 'float32' dtype, but has '${i.dtype}'`);const a=o.inputs[t];if(!cv(i.shape,a.shape))throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input '${t}' has shape '${i.shape}', which does not match the shape of the input '${a.shape}'`);if(null==e[a.id])e[a.id]=i;else{const t=e[a.id];e[a.id]=r(t,i),t.dispose()}}}}(e,o,(e=>this.tidy(e)),Dw);const r=t.map((t=>e[t.id]));return 0===this.state.gradientDepth&&(this.state.activeTape.forEach((e=>{for(const t of e.saved)t.dispose()})),this.state.activeTape=null),{value:i,grads:r}}))}customGrad(e){return av(Sv(e),(()=>"The f passed in customGrad(f) must be a function.")),(...t)=>{let n;av(t.every((e=>e instanceof gw)),(()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors"));const r={};return t.forEach(((e,t)=>{r[t]=e})),this.runKernelFunc({forwardFunc:(r,i)=>(n=e(...t,i),av(n.value instanceof gw,(()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor")),av(Sv(n.gradFunc),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function.")),n.value),backwardsFunc:(e,r)=>{const i=n.gradFunc(e,r),o=Array.isArray(i)?i:[i];av(o.length===t.length,(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...).")),av(o.every((e=>e instanceof gw)),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."));const a={};return o.forEach(((e,t)=>{a[t]=()=>e})),a},inputs:r})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){const t=Zb(),n=await this.backend.time(e);return n.wallMs=Zb()-t,n}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Mw;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function Rw(){const e=nv();if(null==e._tfengine){const t=new Rv(e);e._tfengine=new Nw(t)}var t;return t=e._tfengine.ENV,Lv=t,hw=()=>e._tfengine,e._tfengine}Nw.nextTensorId=0,Nw.nextVariableId=0;const Pw=Rw();function Dw(e,t){const n={a:e,b:t};return Pw.runKernel(Yv,n)}function Lw(e){if(e||"undefined"!=typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;const t=e.userAgent||e.vendor||("undefined"!=typeof window?window.opera:"");if(!t){const t=e;return t.userAgentData&&t.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function Fw(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}const Bw=Dv();function Uw(e,t){let n=e;if(nw(e))return"string"===t?[]:[e.length];if(Iw(e)){const t=e.channels||"RGBA";return[e.height,e.width*t.length]}if(kw(e))return[e.buffer.size/(null==t?4:bv(t))];if(!Array.isArray(e))return[];const r=[];for(;Array.isArray(n)||nw(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&Dv().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&Vw(e,r,[]),r}function Vw(e,t,n){if(n=n||[],!Array.isArray(e)&&!nw(e))return void av(0===t.length,(()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`));av(t.length>0,(()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${e.length} elements`)),av(e.length===t[0],(()=>`Element arr[${n.join("][")}] should have ${t[0]} elements, but has ${e.length} elements`));const r=t.slice(1);for(let t=0;t<e.length;++t)Vw(e[t],r,n.concat(t))}function Gw(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error(`Argument '${n}' passed to '${r}' must be ${e} tensor, but got ${t} tensor`)}}function zw(e,t,n,r="numeric"){if(e instanceof yw())return Gw(r,e.dtype,t,n),e;let i=xv(e);if("string"!==i&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),Gw(r,i,t,n),null==e||!nw(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){const r=null==e?"null":e.constructor.name;throw new Error(`Argument '${t}' passed to '${n}' must be a Tensor or TensorLike, but got '${r}'`)}const o=Uw(e,i);nw(e)||Array.isArray(e)||(e=[e]);const a="string"!==i?Qb(e,i):rw(e,[],!0);return Pw.makeTensor(a,o,i)}function $w(e,t,n,r="numeric"){if(!Array.isArray(e))throw new Error(`Argument ${t} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return e.map(((e,i)=>zw(e,`${t}[${i}]`,n,r)))}function qw(e){const t=Object.keys(e);if(1!==t.length)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let n=t[0];const r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+="__op";const i=(...e)=>{Pw.startScope(n);try{const t=r(...e);return Mv(t)&&console.error("Cannot return a Promise inside of tidy."),Pw.endScope(t),t}catch(e){throw Pw.endScope(null),e}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}Bw.registerFlag("DEBUG",(()=>!1),(e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),Bw.registerFlag("IS_BROWSER",(()=>Fw())),Bw.registerFlag("IS_NODE",(()=>"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node)),Bw.registerFlag("IS_CHROME",(()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor))),Bw.registerFlag("IS_SAFARI",(()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor))),Bw.registerFlag("PROD",(()=>!1)),Bw.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(()=>Bw.getBool("DEBUG"))),Bw.registerFlag("DEPRECATION_WARNINGS_ENABLED",(()=>!0)),Bw.registerFlag("IS_TEST",(()=>!1)),Bw.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(()=>Bw.getBool("DEBUG"))),Bw.registerFlag("WRAP_TO_IMAGEBITMAP",(()=>!1)),Bw.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",(()=>!1)),Bw.registerFlag("USE_SETTIMEOUTCUSTOM",(()=>!1));const Hw=qw({complex_:function(e,t){const n=zw(e,"real","complex"),r=zw(t,"imag","complex");sv(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const i={real:n,imag:r};return Pw.runKernel("Complex",i)}});function Ww(e,t,n,r){if(null==r)r=xv(e);else if("complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(kw(e)||Iw(e)){if("float32"!==r&&"int32"!==r)throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return Pw.backend.createTensorFromGPUData(e,t||n,r)}if(!nw(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){Av(t);const e=lv(t),r=lv(n);av(e===r,(()=>`Based on the provided shape, [${t}], the tensor should have ${e} values but has ${r}`));for(let e=0;e<n.length;++e){const r=n[e],i=e!==n.length-1||r!==lv(t.slice(e));av(n[e]===t[e]||!i,(()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${t}). `))}}return nw(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?Qb(e,r):rw(e,[],!0),Pw.makeTensor(e,t,r)}function Kw(e,t,n){return Ww(e,t,Uw(e,n),n)}const Xw={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class Yw{static join(e){return new Yw(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,null==e)return;if(e instanceof Array||(e=[e]),0===(e=e.map((e=>nw(e)?e.buffer:e))).length)return;this.bufferUniformSize=e[0].byteLength;let t=0;for(let n=0;n<e.length;n++){const r=e[n];n!==e.length-1&&r.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const i=t+r.byteLength;this.shards.push({buffer:r,start:t,end:i}),t=i}0===this.shards.length&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,t=this.byteLength){if(0===this.shards.length)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,t=isNaN(Number(t))?0:t,e=Math.max(0,e),(t=Math.min(this.byteLength,t))<=e)return new ArrayBuffer(0);const n=this.findShardForByte(e);if(-1===n)throw new Error(`Could not find start shard for byte ${e}`);const r=new ArrayBuffer(t-e),i=new Uint8Array(r);let o=0;for(let r=n;r<this.shards.length;r++){const n=this.shards[r],a=e+o-n.start,s=o,l=Math.min(t,n.end)-n.start,c=new Uint8Array(n.buffer,a,l-a);if(i.set(c,s),o+=c.length,t<n.end)break}return r}findShardForByte(e){if(0===this.shards.length||e<0||e>=this.byteLength)return-1;if(null!=this.bufferUniformSize)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function t(t){return e<t.start?-1:e>=t.end?1:0}if(0===t(this.shards[this.previousShardIndex]))return this.previousShardIndex;const n=function(e,t){let n=0,r=e.length;for(;n<=r;){const i=Math.floor((r-n)/2)+n,o=t(e[i]);if(0===o)return i;o<0?r=i:n=i+1}return-1}(this.shards,t);return-1===n?-1:(this.previousShardIndex=n,this.previousShardIndex)}}function Jw(){return Pw}function Qw(e,t){return Pw.tidy(e,t)}function Zw(e){return Pw.keep(e)}function ex(e,t,n=1){return Pw.registerBackend(e,t,n)}fw=function(e){Dv().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")};const tx=4;async function nx(e,t){const n=[],r=[],i=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);for(let o=0;o<i.length;++o){const a=i[o],s=Array.isArray(e)?e[o].tensor:e[a];if("float32"!==s.dtype&&"int32"!==s.dtype&&"bool"!==s.dtype&&"string"!==s.dtype&&"complex64"!==s.dtype)throw new Error(`Unsupported dtype in weight '${a}': ${s.dtype}`);const l={name:a,shape:s.shape,dtype:s.dtype};if("string"===s.dtype){const e=new Promise((async e=>{const t=await s.bytes(),n=t.reduce(((e,t)=>e+t.length),0)+tx*t.length,r=new Uint8Array(n);let i=0;for(let e=0;e<t.length;e++){const n=t[e],o=new Uint8Array(new Uint32Array([n.length]).buffer);r.set(o,i),i+=tx,r.set(n,i),i+=n.length}e(r)}));r.push(e)}else r.push(s.data());null!=t&&(l.group=t),n.push(l)}return{data:cx(await Promise.all(r)),specs:n}}function rx(e,t){const n=new Yw(e),r={};let i=0;for(const e of t){const t=ix(e,((e,t)=>n.slice(i+e,i+t)));r[e.name]=ax(e,n.slice(i,i+t)),i+=t}return r}function ix(e,t){const n=lv(e.shape);let r;if("quantization"in e){const t=e.quantization;r=Xw[t.dtype]}else{if("string"===e.dtype){let e=0;for(let r=0;r<n;r++)e+=tx+new Uint32Array(t(e,e+tx))[0];return e}r=Xw[e.dtype]}return n*r}async function ox(e,t){const n=lv(e.shape);let r;if("quantization"in e){const t=e.quantization;r=Xw[t.dtype]}else{if("string"===e.dtype){let e=0;for(let r=0;r<n;r++)e+=tx+new Uint32Array(await t(e,e+tx))[0];return e}r=Xw[e.dtype]}return n*r}function ax(e,t){const n=e.name,r=e.dtype,i=e.shape,o=lv(i);let a,s=0;if("quantization"in e){const i=e.quantization;if("uint8"===i.dtype||"uint16"===i.dtype){if(!("min"in i)||!("scale"in i))throw new Error(`Weight ${e.name} with quantization ${i.dtype} doesn't have corresponding metadata min and scale.`)}else{if("float16"!==i.dtype)throw new Error(`Weight ${e.name} has unknown quantization dtype ${i.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);if("float32"!==r)throw new Error(`Weight ${e.name} is quantized with ${i.dtype} which only supports weights of type float32 not ${r}.`)}const l=Xw[i.dtype],c="uint8"===i.dtype?new Uint8Array(t):new Uint16Array(t);if("float32"===r)if("uint8"===i.dtype||"uint16"===i.dtype){a=new Float32Array(c.length);for(let e=0;e<c.length;e++){const t=c[e];a[e]=t*i.scale+i.min}}else{if("float16"!==i.dtype)throw new Error(`Unsupported quantization type ${i.dtype} for weight type float32.`);{const e=function(){const e=function(){const e=e=>{let t=e<<13,n=0;for(;!(8388608&t);)n-=8388608,t<<=1;return t&=-8388609,n+=947912704,t|n},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let e=1024;e<2048;e++)t[e]=939524096+(e-1024<<13);return t}(),t=function(){const e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}(),n=function(){const e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return r=>{const i=new ArrayBuffer(4*r.length),o=new Uint32Array(i);for(let i=0;i<r.length;i++){const a=r[i],s=e[n[a>>10]+(1023&a)]+t[a>>10];o[i]=s}return new Float32Array(i)}}();a=e(c)}}else{if("int32"!==r)throw new Error(`Unsupported dtype in weight '${n}': ${r}`);if("uint8"!==i.dtype&&"uint16"!==i.dtype)throw new Error(`Unsupported quantization type ${i.dtype} for weight type int32.`);a=new Int32Array(c.length);for(let e=0;e<c.length;e++){const t=c[e];a[e]=Math.round(t*i.scale+i.min)}}s+=o*l}else if("string"===r){const n=lv(e.shape);a=[];for(let e=0;e<n;e++){const e=new Uint32Array(t.slice(s,s+tx))[0];s+=tx;const n=new Uint8Array(t.slice(s,s+e));a.push(n),s+=e}}else{const e=Xw[r];if("float32"===r)a=new Float32Array(t);else if("int32"===r)a=new Int32Array(t);else{if("bool"!==r){if("complex64"===r){a=new Float32Array(t);const e=new Float32Array(a.length/2),n=new Float32Array(a.length/2);for(let t=0;t<e.length;t++)e[t]=a[2*t],n[t]=a[2*t+1];const r=Kw(e,i,"float32"),o=Kw(n,i,"float32"),s=Hw(r,o);return r.dispose(),o.dispose(),s}throw new Error(`Unsupported dtype in weight '${n}': ${r}`)}a=new Uint8Array(t)}s+=o*e}return Kw(a,i,r)}async function sx(e,t,n){let r=new Uint8Array(t);for(;r.byteLength<n;){const{done:t,value:i}=await e.read();if(t&&null==i){const e=n-r.byteLength;throw new Error(`Reader is done but ${e} bytes are still expected`)}const o=new Uint8Array(r.length+i.byteLength);o.set(r,0),o.set(new Uint8Array(i),r.length),r=o}return r.buffer}async function lx(e,t){const n={},r=e.getReader();let i=new ArrayBuffer(0);for(const e of t){const t=await ox(e,(async(e,t)=>(i=await sx(r,i,t),i.slice(e,t))));i=await sx(r,i,t);const o=i.slice(0,t);i=i.slice(t);const a=ax(e,o);if(n[e.name]=a,"webgpu"===Pw.backendName){const e=Pw.backend;"uploadToGPU"in e&&lv(a.shape)>=Dv().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&e.uploadToGPU(a.dataId)}}return n}function cx(e){if(null===e)throw new Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0;const n=[];e.forEach((e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${e.constructor.name}`)}));const r=new Uint8Array(t);let i=0;return n.forEach((e=>{r.set(new Uint8Array(e.buffer),i),i+=e.byteLength})),r.buffer}const ux="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function px(e){return ux?Buffer.byteLength(e,"utf8"):new Blob([e]).size}function dx(e){return Yw.join(e)}function hx(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);const t=e.split("/");return t[t.length-1]}function mx(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(n.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function fx(e,t,n){const r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(r.trainingConfig=e.trainingConfig),null!=e.weightsManifest){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return null!=e.signature&&(r.signature=e.signature),null!=e.userDefinedMetadata&&(r.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(r.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(r.initializerSignature=e.initializerSignature),r}async function gx(e,t){let n,r;return null!=e.weightsManifest&&([n,r]=await t(e.weightsManifest)),fx(e,n,r)}function yx(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:px(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:px(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:new Yw(e.weightData).byteLength}}function _x(e){const t=[];for(const n of e)t.push(...n.weights);return t}class vx{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==vx.instance&&(vx.instance=new vx),vx.instance}static registerSaveRouter(e){vx.getInstance().saveRouters.push(e)}static registerLoadRouter(e){vx.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return vx.getHandlers(e,"save")}static getLoadHandlers(e,t){return vx.getHandlers(e,"load",t)}static getHandlers(e,t,n){const r=[];return("load"===t?vx.getInstance().loadRouters:vx.getInstance().saveRouters).forEach((t=>{const i=t(e,n);null!==i&&r.push(i)})),r}}const bx=e=>vx.registerSaveRouter(e),wx=e=>vx.registerLoadRouter(e),xx=e=>vx.getSaveHandlers(e),Sx=(e,t)=>vx.getLoadHandlers(e,t),Tx="tensorflowjs",Ex="models_store",Ix="model_info_store";function kx(){if(!Dv().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e="undefined"==typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function jx(e){const t=e.result;t.createObjectStore(Ex,{keyPath:"modelPath"}),t.createObjectStore(Ix,{keyPath:"modelPath"})}class Ax{constructor(e){if(this.indexedDB=kx(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise(((e,n)=>{const r=this.indexedDB.open(Tx,1);r.onupgradeneeded=()=>jx(r),r.onsuccess=()=>{const i=r.result;if(null==t){const t=i.transaction(Ex,"readonly"),r=t.objectStore(Ex).get(this.modelPath);r.onsuccess=()=>{if(null==r.result)return i.close(),n(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));e(r.result.modelArtifacts)},r.onerror=e=>(i.close(),n(r.error)),t.oncomplete=()=>i.close()}else{t.weightData=Yw.join(t.weightData);const r=yx(t),o=i.transaction(Ix,"readwrite");let a,s,l=o.objectStore(Ix);try{a=l.put({modelPath:this.modelPath,modelArtifactsInfo:r})}catch(e){return n(e)}a.onsuccess=()=>{s=i.transaction(Ex,"readwrite");const a=s.objectStore(Ex);let c;try{c=a.put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:r})}catch(e){return n(e)}c.onsuccess=()=>e({modelArtifactsInfo:r}),c.onerror=e=>{l=o.objectStore(Ix);const t=l.delete(this.modelPath);t.onsuccess=()=>(i.close(),n(c.error)),t.onerror=e=>(i.close(),n(c.error))}},a.onerror=e=>(i.close(),n(a.error)),o.oncomplete=()=>{null==s?i.close():s.oncomplete=()=>i.close()}}},r.onerror=e=>n(r.error)}))}}Ax.URL_SCHEME="indexeddb://";const Cx=e=>{return Dv().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Ax.URL_SCHEME)?(t=e.slice(Ax.URL_SCHEME.length),new Ax(t)):null;var t};vx.registerSaveRouter(Cx),vx.registerLoadRouter(Cx);class Ox{constructor(){this.indexedDB=kx()}async listModels(){return new Promise(((e,t)=>{const n=this.indexedDB.open(Tx,1);n.onupgradeneeded=()=>jx(n),n.onsuccess=()=>{const r=n.result,i=r.transaction(Ix,"readonly"),o=i.objectStore(Ix).getAll();o.onsuccess=()=>{const t={};for(const e of o.result)t[e.modelPath]=e.modelArtifactsInfo;e(t)},o.onerror=e=>(r.close(),t(o.error)),i.oncomplete=()=>r.close()},n.onerror=e=>t(n.error)}))}async removeModel(e){var t;return e=(t=e).startsWith(Ax.URL_SCHEME)?t.slice(Ax.URL_SCHEME.length):t,new Promise(((t,n)=>{const r=this.indexedDB.open(Tx,1);r.onupgradeneeded=()=>jx(r),r.onsuccess=()=>{const i=r.result,o=i.transaction(Ix,"readwrite"),a=o.objectStore(Ix),s=a.get(e);let l;s.onsuccess=()=>{if(null==s.result)return i.close(),n(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const r=a.delete(e),o=()=>{l=i.transaction(Ex,"readwrite");const r=l.objectStore(Ex).delete(e);r.onsuccess=()=>t(s.result.modelArtifactsInfo),r.onerror=e=>n(s.error)};r.onsuccess=o,r.onerror=e=>(o(),i.close(),n(s.error))}},s.onerror=e=>(i.close(),n(s.error)),o.oncomplete=()=>{null==l?i.close():l.oncomplete=()=>i.close()}},r.onerror=e=>n(r.error)}))}}const Mx="/",Nx="tensorflowjs_models",Rx="info",Px="model_topology",Dx="weight_specs",Lx="weight_data",Fx="model_metadata";function Bx(e){return{info:[Nx,e,Rx].join(Mx),topology:[Nx,e,Px].join(Mx),weightSpecs:[Nx,e,Dx].join(Mx),weightData:[Nx,e,Lx].join(Mx),modelMetadata:[Nx,e,Fx].join(Mx)}}function Ux(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}function Vx(e){const t=e.split(Mx);if(t.length<3)throw new Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join(Mx)}class Gx{constructor(e){if(!Dv().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=Bx(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=yx(e),i=Yw.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(e){if(ux)return Buffer.from(e).toString("base64");const t=new Uint8Array(e);let n="";for(let e=0,r=t.length;e<r;e++)n+=String.fromCharCode(t[e]);return btoa(n)}(i));const o={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:null!=e.signature?e.signature:void 0,userDefinedMetadata:null!=e.userDefinedMetadata?e.userDefinedMetadata:void 0,modelInitializer:null!=e.modelInitializer?e.modelInitializer:void 0,initializerSignature:null!=e.initializerSignature?e.initializerSignature:void 0,trainingConfig:null!=e.trainingConfig?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:r}}catch(e){throw Ux(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${r.modelTopologyBytes}, weightSpecsBytes=${r.weightSpecsBytes}, weightDataBytes=${r.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);t.modelTopology=n;const r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);t.weightSpecs=r;const i=this.LS.getItem(this.keys.modelMetadata);if(null!=i){const e=JSON.parse(i);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(t.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(t.trainingConfig=e.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(null==o)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return t.weightData=function(e){if(ux){const t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}const t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;++e)n.set([t.charCodeAt(e)],e);return n.buffer}(o),t}}Gx.URL_SCHEME="localstorage://";const zx=e=>{return Dv().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Gx.URL_SCHEME)?(t=e.slice(Gx.URL_SCHEME.length),new Gx(t)):null;var t};vx.registerSaveRouter(zx),vx.registerLoadRouter(zx);class $x{constructor(){av(Dv().getBool("IS_BROWSER"),(()=>"Current environment is not a web browser")),av("undefined"==typeof window||void 0!==window.localStorage,(()=>"Current browser does not appear to support localStorage")),this.LS=window.localStorage}async listModels(){const e={},t=Nx+Mx,n=Mx+Rx;for(let r=0;r<this.LS.length;++r){const i=this.LS.key(r);i.startsWith(t)&&i.endsWith(n)&&(e[Vx(i)]=JSON.parse(this.LS.getItem(i)))}return e}async removeModel(e){var t;const n=Bx(e=(t=e).startsWith(Gx.URL_SCHEME)?t.slice(Gx.URL_SCHEME.length):t);if(null==this.LS.getItem(n.info))throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return Ux(n),r}}const qx="://";class Hx{constructor(){this.managers={}}static getInstance(){return null==Hx.instance&&(Hx.instance=new Hx),Hx.instance}static registerManager(e,t){av(null!=e,(()=>"scheme must not be undefined or null.")),e.endsWith(qx)&&(e=e.slice(0,e.indexOf(qx))),av(e.length>0,(()=>"scheme must not be an empty string."));const n=Hx.getInstance();av(null==n.managers[e],(()=>`A model store manager is already registered for scheme '${e}'.`)),n.managers[e]=t}static getManager(e){const t=Hx.getInstance().managers[e];if(null==t)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(Hx.getInstance().managers)}}function Wx(e){if(-1===e.indexOf(qx))throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Hx.getSchemes().join(",")}`);return{scheme:e.split(qx)[0],path:e.split(qx)[1]}}async function Kx(e,t,n=!1){av(e!==t,(()=>`Old path and new path are the same: '${e}'`));const r=vx.getLoadHandlers(e);av(r.length>0,(()=>`Copying failed because no load handler is found for source URL ${e}.`)),av(r.length<2,(()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${e}.`));const i=r[0],o=vx.getSaveHandlers(t);av(o.length>0,(()=>`Copying failed because no save handler is found for destination URL ${t}.`)),av(o.length<2,(()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${t}.`));const a=o[0],s=Wx(e).scheme,l=Wx(e).path,c=s===Wx(e).scheme,u=await i.load();n&&c&&await Hx.getManager(s).removeModel(l);const p=await a.save(u);return n&&!c&&await Hx.getManager(s).removeModel(l),p.modelArtifactsInfo}async function Xx(){const e=Hx.getSchemes(),t={};for(const n of e){const e=await Hx.getManager(n).listModels();for(const r in e)t[n+qx+r]=e[r]}return t}async function Yx(e){const t=Wx(e);return Hx.getManager(t.scheme).removeModel(t.path)}async function Jx(e,t){return Kx(e,t,!1)}async function Qx(e,t){return Kx(e,t,!0)}class Zx{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error(`Browser's encoder only supports utf-8, but got ${t}`);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}setTimeoutCustom(e,t){"undefined"!=typeof window&&Dv().getBool("USE_SETTIMEOUTCUSTOM")?(this.functionRefs.push(e),setTimeout((()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")}),t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",(e=>{e.source===window&&e.data.name===this.messageName&&(e.stopPropagation(),(0,this.functionRefs[e.data.index])(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0))}),!0))):setTimeout(e,t)}isTypedArray(e){return Db(e)}}if(Dv().get("IS_BROWSER")){Dv().setPlatform("browser",new Zx);try{Hx.registerManager(Gx.URL_SCHEME,new $x)}catch(e){}try{Hx.registerManager(Ax.URL_SCHEME,new Ox)}catch(e){}}let eS;function tS(e,t="float32",n){return t=t||"float32",Av(e),new dw(e,t,n)}Dv().get("IS_NODE")&&!Dv().get("IS_BROWSER")&&Dv().setPlatform("node",new class{constructor(){this.util=r(8590),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return null!=Dv().global.fetch?Dv().global.fetch(e,t):(null==eS&&(eS=r(5817)),eS(e,t))}now(){const e=process.hrtime();return 1e3*e[0]+e[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error(`Node built-in encoder only supports utf-8, but got ${t}`);return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}});const nS=qw({cast_:function(e,t){const n=zw(e,"x","cast");if(!function(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");const r={x:n},i={dtype:t};return Pw.runKernel(Zv,r,i)}}),rS=qw({clone_:function(e){const t={x:zw(e,"x","clone","string_or_numeric")};return Pw.runKernel(cb,t)}});Rw();const iS={buffer:tS,cast:nS,clone:rS,print:function(e,t=!1){console.log(e.toString(t))}};function oS(e){return new Promise((e=>setTimeout(e))).then(e)}mw=iS;class aS{constructor(e){if(!Dv().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(aS.URL_SCHEME)&&(e=e.slice(aS.URL_SCHEME.length)),null!=e&&0!==e.length||(e="model"),this.modelJsonFileName=e+".json",this.weightDataFileName=e+".weights.bin"}async save(e){if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=Yw.join(e.weightData),n=window.URL.createObjectURL(new Blob([t],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const t=mx(e,[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}]),r=window.URL.createObjectURL(new Blob([JSON.stringify(t)],{type:"application/json"})),i=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor;if(i.download=this.modelJsonFileName,i.href=r,await oS((()=>i.dispatchEvent(new MouseEvent("click")))),null!=e.weightData){const e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=n,await oS((()=>e.dispatchEvent(new MouseEvent("click"))))}return{modelArtifactsInfo:yx(e)}}}}aS.URL_SCHEME="downloads://";class sS{constructor(e){if(null==e||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise(((e,t)=>{const n=new FileReader;n.onload=n=>{const r=JSON.parse(n.target.result),i=r.modelTopology;if(null==i)return void t(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));if(null==r.weightsManifest)return void t(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));if(0===this.weightsFiles.length)return void e({modelTopology:i});const o=gx(r,(e=>this.loadWeights(e)));e(o)},n.onerror=e=>t(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),n.readAsText(this.jsonFile)}))}loadWeights(e){const t=[],n=[];for(const r of e)t.push(...r.weights),n.push(...r.paths);const r=this.checkManifestAndWeightFiles(e),i=n.map((e=>this.loadWeightsFile(e,r[e])));return Promise.all(i).then((e=>[t,e]))}loadWeightsFile(e,t){return new Promise(((n,r)=>{const i=new FileReader;i.onload=e=>{const t=e.target.result;n(t)},i.onerror=t=>r(`Failed to weights data from file of path '${e}'.`),i.readAsArrayBuffer(t)}))}checkManifestAndWeightFiles(e){const t=[],n=this.weightsFiles.map((e=>hx(e.name))),r={};for(const i of e)i.paths.forEach((e=>{const i=hx(e);if(-1!==t.indexOf(i))throw new Error(`Duplicate file basename found in weights manifest: '${i}'`);if(t.push(i),-1===n.indexOf(i))throw new Error(`Weight file with basename '${i}' is not provided.`);r[e]=this.weightsFiles[n.indexOf(i)]}));if(t.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${t.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return r}}function lS(e){return new sS(e)}function cS(e,t,n,r){!function(e){av(null!=e&&Array.isArray(e)&&e.length>0,(()=>"promises must be a none empty array"))}(e),function(e,t){av(e>=0&&e<=1,(()=>`Progress fraction must be in range [0, 1], but got startFraction ${e}`)),av(t>=0&&t<=1,(()=>`Progress fraction must be in range [0, 1], but got endFraction ${t}`)),av(t>=e,(()=>`startFraction must be no more than endFraction, but got startFraction ${e} and endFraction ${t}`))}(n=null==n?0:n,r=null==r?1:r);let i=0;return Promise.all(e.map((o=>(o.then((o=>{const a=n+ ++i/e.length*(r-n);return t(a),o})),o))))}async function uS(e,t){null==t&&(t={});const n=null==t.fetchFunc?Dv().platform.fetch:t.fetchFunc,r=e.map((e=>n(e,t.requestInit,{isBinary:!0}))),i=(null==t.onProgress?await Promise.all(r):await cS(r,t.onProgress,0,.5)).map((e=>e.arrayBuffer()));return null==t.onProgress?await Promise.all(i):await cS(i,t.onProgress,.5,1)}async function pS(e,t="",n,r){return dS((e=>uS(e,{requestInit:r})))(e,t,n)}function dS(e){return async(t,n="",r)=>{const i=t.map((()=>!1)),o={},a=null!=r?r.map((()=>!1)):[],s=[];if(t.forEach(((e,t)=>{let n=0;e.weights.forEach((e=>{const l="quantization"in e?e.quantization.dtype:e.dtype,c=Xw[l]*lv(e.shape),u=()=>{i[t]=!0,null==o[t]&&(o[t]=[]),o[t].push({manifestEntry:e,groupOffset:n,sizeBytes:c})};null!=r?r.forEach(((t,n)=>{t===e.name&&(u(),a[n]=!0)})):u(),s.push(e.name),n+=c}))})),!a.every((e=>e))){const e=r.filter(((e,t)=>!a[t]));throw new Error(`Could not find weights in manifest with names: ${e.join(", ")}. \nManifest JSON has weights with names: ${s.join(", ")}.`)}const l=i.reduce(((e,t,n)=>(t&&e.push(n),e)),[]),c=[];l.forEach((e=>{t[e].paths.forEach((e=>{const t=n+(n.endsWith("/")?"":"/")+e;c.push(t)}))}));const u=await e(c),p={};let d=0;return l.forEach((e=>{const n=t[e].paths.length,r=new Yw(u.slice(d,d+n));o[e].forEach((e=>{const t=rx(r.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(const e in t)p[e]=t[e]})),d+=n})),p}}vx.registerSaveRouter((e=>Dv().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(aS.URL_SCHEME)?function(e="model"){return new aS(e)}(e.slice(aS.URL_SCHEME.length)):null));class hS{constructor(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?(av("function"==typeof t.fetchFunc,(()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)")),this.fetch=t.fetchFunc):this.fetch=Dv().platform.fetch,av(null!=e&&e.length>0,(()=>"URL path for http must not be null, undefined or empty.")),Array.isArray(e)&&av(2===e.length,(()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`)),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{},this.loadOptions=t}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const n=mx(e,[{paths:["./model.weights.bin"],weights:e.weightSpecs}]);if(t.body.append("model.json",new Blob([JSON.stringify(n)],{type:"application/json"}),"model.json"),null!=e.weightData){const n=Yw.join(e.weightData);t.body.append("model.weights.bin",new Blob([n],{type:"application/octet-stream"}),"model.weights.bin")}const r=await this.fetch(this.path,t);if(r.ok)return{modelArtifactsInfo:yx(e),responses:[r]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${r.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let t;try{t=await e.json()}catch(e){let t=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?t+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":t+=" Please make sure the server is serving valid JSON for this request.",new Error(t)}const n=t.modelTopology,r=t.weightsManifest;if(null==n&&null==r)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return t}async load(){return this.loadOptions.streamWeights?this.loadStream():gx(await this.loadModelJSON(),(e=>this.loadWeights(e)))}async loadStream(){const e=await this.loadModelJSON(),t=await this.getWeightUrls(e.weightsManifest),n=_x(e.weightsManifest);return Object.assign(Object.assign({},e),{weightSpecs:n,getWeightStream:()=>function(e,t){var n;const r=null==t.fetchFunc?Dv().platform.fetch:t.fetchFunc;let i,o=0;return null===(n=t.onProgress)||void 0===n||n.call(t,0),new ReadableStream({pull:async n=>{for(var a;o<e.length;){if(!i){const n=(await r(e[o],t.requestInit,{isBinary:!0})).body;i=n.getReader()}const{done:s,value:l}=await i.read();if(!s)return void n.enqueue(l);o++,i=void 0,null===(a=t.onProgress)||void 0===a||a.call(t,o/e.length)}n.close()}})}(t,this.loadOptions)})}async getWeightUrls(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=function(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}(t),i=this.weightPathPrefix||n,o=[],a=[];for(const t of e)for(const e of t.paths)null!=this.weightUrlConverter?a.push(this.weightUrlConverter(e)):o.push(i+e+r);return this.weightUrlConverter&&o.push(...await Promise.all(a)),o}async loadWeights(e){const t=await this.getWeightUrls(e);return[_x(e),await uS(t,this.loadOptions)]}}function mS(e){return null!=e.match(hS.URL_SCHEME_REGEX)}hS.URL_SCHEME_REGEX=/^https?:\/\//;const fS=(e,t)=>{if("undefined"==typeof fetch&&(null==t||null==t.fetchFunc))return null;{let n=!0;if(n=Array.isArray(e)?e.every((e=>mS(e))):mS(e),n)return gS(e,t)}return null};function gS(e,t){return new hS(e,t)}function yS(e,t){return gS(e,t)}vx.registerSaveRouter(fS),vx.registerLoadRouter(fS);class _S{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class vS{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class bS{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=t=>Promise.resolve(e.save(t)))}}function wS(e,t,n,r){return new bS(xS(...arguments))}function xS(e,t,n,r){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new _S(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new _S({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new _S({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))}function SS(e){return new vS(e)}function TS(e){return new vS(e)}function ES(e,t){const n=e.length,r=[];for(let i=0;i<n;i++){const o=n-1-i,a=e[o]||1;(t[t.length-1-i]||1)>1&&1===a&&r.unshift(o)}return r}function IS(e,t){const n=[];for(let r=0;r<t.length;r++){const i=e[e.length-r-1],o=t.length-r-1,a=t[o];(null==i||1===i&&a>1)&&n.unshift(o)}return n}function kS(e,t){const n=Math.max(e.length,t.length),r=new Array(n);for(let i=0;i<n;i++){let o=e[e.length-i-1];null==o&&(o=1);let a=t[t.length-i-1];if(null==a&&(a=1),1===o)r[n-i-1]=a;else if(1===a)r[n-i-1]=o;else{if(o!==a)throw Error(`Operands could not be broadcast together with shapes ${e} and ${t}.`);r[n-i-1]=o}}return r}const jS=-2,AS=-1;function CS(e,t,n){const r=e.shape.length;av(r===t.length,(()=>`Error in slice${r}D: Length of begin ${t} must match the rank of the array (${r}).`)),av(r===n.length,(()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`));for(let i=0;i<r;++i)av(t[i]+n[i]<=e.shape[i],(()=>`Error in slice${r}D: begin[${i}] + size[${i}] (${t[i]+n[i]}) would overflow input.shape[${i}] (${e.shape[i]})`))}function OS(e){const t=[];let n=0;for(;e>0;)1&e&&t.push(n),e/=2,n++;return t}function MS(e,t,n){const r=[];for(let i=0;i<e.length;i++)r[i]=Math.ceil((t[i]-e[i])/n[i]);return r}function NS(e,t,n,r){const i=[...e];for(let e=i.length;e<r.length;e++)i.push(1);for(let e=0;e<n;e++)0===e?i[t]=1:(i.splice(t,0,1),i.pop());return i}function RS(e,t,n){return n<=e?n:n-(t-1)}function PS(e,t){const n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function DS(e,t,n,r,i,o,a,s,l){const c=e.length;let u=new Array(c),p=new Array(c),d=new Array(c);if(t.length&&n>0){const l=t[0],c=n+1;u=LS(a,l,c,r,e),p=FS(s,l,c,i,e),d=NS(o,l,c,e)}else for(let t=0;t<c;t++)u[t]=US(a,r,o,e,t,l),p[t]=VS(s,i,o,e,t,l),d[t]=BS(o,t,l);return{begin:u,end:p,strides:d}}function LS(e,t,n,r,i){const o=[...i],a=PS(n,t);for(let i=0;i<o.length;i++)if(a.indexOf(i)>-1)o[i]=0;else{const a=RS(t,n,i);let s=r[a];e&1<<a&&(s=0),o[i]=s}return o}function FS(e,t,n,r,i){const o=[...i],a=PS(n,t);for(let i=0;i<o.length;i++)if(a.indexOf(i)>-1)o[i]=Number.MAX_SAFE_INTEGER;else{const a=RS(t,n,i);let s=r[a];e&1<<a&&(s=Number.MAX_SAFE_INTEGER),o[i]=s}for(let e=0;e<o.length;e++){const t=i[e];o[e]<0&&(o[e]+=t),o[e]=iv(0,o[e],i[e])}return o}function BS(e,t,n){let r=e[t];return(n&1<<t||null==r)&&(r=1),r}function US(e,t,n,r,i,o){let a=t[i];const s=n[i]||1;(e&1<<i||o&1<<i||null==a)&&(a=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const l=r[i];return a<0&&(a+=l),a=iv(0,a,l-1),a}function VS(e,t,n,r,i,o){let a=t[i];const s=n[i]||1;(e&1<<i||o&1<<i||null==a)&&(a=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const l=r[i];return a<0&&(a+=l),a=s>0?iv(0,a,l):iv(-1,a,l-1),a}function GS(e,t,n){let r=n.length;for(let e=0;e<n.length;e++)if(n[e]>1){r=e;break}for(let i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function zS(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function $S(e,t,n){let r;const i=e.shape.length;let o;return r="number"==typeof t?[t,...new Array(i-1).fill(0)]:t.length<i?t.concat(new Array(i-t.length).fill(0)):t.slice(),r.forEach((e=>{av(-1!==e,(()=>"slice() does not support negative begin indexing."))})),o=null==n?new Array(i).fill(-1):"number"==typeof n?[n,...new Array(i-1).fill(-1)]:n.length<i?n.concat(new Array(i-n.length).fill(-1)):n,o=o.map(((t,n)=>t>=0?t:(av(-1===t,(()=>`Negative size values should be exactly -1 but got ${t} for the slice() size at index ${n}.`)),e.shape[n]-r[n]))),[r,o]}function qS(e,t,n,r,i,o,a,s,l){let c;if(null==r?(c=new Array(t.length),c.fill(1)):c=r,null!=a&&a&a-1)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const p={dims:c.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:c.slice(),beginMask:i,endMask:o,ellipsisMask:a,newAxisMask:s,shrinkAxisMask:l};for(let e=0;e<p.dims;e++)u&&1<<e&s&&p.numAddAxisAfterEllipsis++,1<<e&a&&(u=!0);u||(p.ellipsisMask|=1<<p.dims,p.dims++);const d={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask){const i=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<i;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(jS),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${t.dims} dims, ${t.begin.length}.`);null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(AS),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(p,d);let h=!0,m=!0,f=!0;const g=[],y=[];for(let t=0;t<e.length;++t){if(0===d.strides[t])throw Error(`strides[${t}] must be non-zero`);const n=!!(d.shrinkAxisMask&1<<t),r=e[t];if(-1===r){g.push(n?1:-1);continue}const i=[d.beginMask&1<<t,d.endMask&1<<t],o=[d.strides[t]>0?0:-1,d.strides[t]>0?r:r-1];if(n&&d.strides[t]<=0)throw Error("only stride 1 allowed on non-range indexing.");f=f&&1===d.strides[t];const a=!!(d.beginMask&1<<t&&d.endMask&1<<t);if(d.beginValid&&d.endValid){if(n){const e=d.begin[t]<0?r+d.begin[t]:d.begin[t];if(d.begin[t]=e,d.end[t]=d.begin[t]+1,e<0||e>=r)throw Error(`slice index ${d.begin[t]} of dimension ${t} out of bounds.`)}else d.begin[t]=HS(d.begin[t],0,d.strides[t],r,i,o),d.end[t]=HS(d.end[t],1,d.strides[t],r,i,o);const e=1===d.strides[t]&&0===d.begin[t]&&d.end[t]===r;h=h&&e,m=m&&(0===t&&1===d.strides[t]||e)}else h=h&&1===d.strides[t]&&a,m=m&&(0===t&&1===d.strides[t]||a);let s,l=!1;if(d.beginValid&&d.endValid?(s=d.end[t]-d.begin[t],l=!0):n?(s=1,l=!0):a&&r>=0&&(s=d.strides[t]<0?-r:r,l=!0),l){let e;e=0===s||s<0!=d.strides[t]<0?0:Math.trunc(s/d.strides[t])+(s%d.strides[t]!=0?1:0),g.push(e)}else g.push(-1)}for(let e=0;e<d.finalShapeGatherIndices.length;++e){const t=d.finalShapeGatherIndices[e];t>=0?y.push(g[t]):t===jS&&y.push(1)}return{finalShapeSparse:y.filter(((e,t)=>d.finalShapeGatherIndices[t]!==jS)),finalShape:y,isIdentity:h,sliceDim0:m,isSimpleSlice:f,begin:d.begin,end:d.end,strides:d.strides}}function HS(e,t,n,r,i,o){if(i[t])return n>0?o[t]:o[t+1&1];{const t=e<0?r+e:e;return t<o[0]?o[0]:t>o[1]?o[1]:t}}const WS=qw({reshape_:function(e,t){const n={x:zw(e,"x","reshape","string_or_numeric")},r={shape:t};return Pw.runKernel(wb,n,r)}}),KS=qw({broadcastTo_:function(e,t){let n=zw(e,"broadcastTo","x");const r=n.shape;if(Av(t),t.length<n.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${n.rank}.`);if(t.length>n.rank){const e=n.shape.slice();for(;e.length<t.length;)e.unshift(1);n=WS(n,e)}const i=n.shape,o=Array.from(t);for(let e=t.length-1;e>=0;e--)if(i[e]===t[e])o[e]=1;else if(1!==n.shape[e])throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${t}].`);if(0===o.map(((e,t)=>e>1?t:-1)).filter((e=>e>=0)).length)return rS(n);const a={x:n},s={reps:o};return Pw.runKernel(Nb,a,s)}}),XS=qw({concat_:function(e,t=0){av(e.length>=1,(()=>"Pass at least one tensor to concat"));const n=$w(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((e=>{if("complex64"!==e.dtype)throw new Error(`Cannot concatenate complex64 tensors with a tensor\n          with dtype ${e.dtype}. `)})),1===n.length)return rS(n[0]);const r=n,i={axis:t};return Pw.runKernel(eb,r,i)}}),YS=qw({multinomial_:function(e,t,n,r=!1){const i=zw(e,"logits","multinomial"),o=i.size,a=i.rank;if(o<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${o}.`);if(a>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${a}`);n=n||Math.random();const s={logits:1===a?WS(i,[1,-1]):i},l={numSamples:t,seed:n,normalized:r},c=Pw.runKernel(fb,s,l);return 1===a?WS(c,[c.size]):c}});function JS(e,t){if((nw(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&nw(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Ww(e,[],[],t)}const QS=qw({slice_:function(e,t,n){const r=zw(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");const i={x:r},o={begin:t,size:n};return Pw.runKernel(Ib,i,o)}}),ZS=qw({stack_:function(e,t=0){const n=$w(e,"tensors","stack","string_or_numeric");av(n.length>=1,(()=>"Pass at least one tensor to tf.stack")),n.length>0&&av(t<=n[0].rank,(()=>"Axis must be <= rank of the tensor"));const r=n,i={axis:t};return Pw.runKernel(_b,r,i)}}),eT=qw({unstack_:function(e,t=0){const n=zw(e,"x","unstack","string_or_numeric");av(t>=-n.shape.length&&t<n.shape.length,(()=>`Axis = ${t} is not in [-${n.shape.length}, ${n.shape.length})`));const r={value:n},i={axis:t};return Pw.runKernel("Unpack",r,i)}});function tT(e,t="float32"){if(Av(e),"complex64"===t){const t=tT(e,"float32"),n=tT(e,"float32");return Hw(t,n)}const n=jv(lv(e),t);return Pw.makeTensor(n,e,t)}const nT=qw({imag_:function(e){const t={input:zw(e,"input","imag")};return Pw.runKernel("Imag",t)}}),rT=qw({neg_:function(e){const t={x:zw(e,"x","neg")};return Pw.runKernel(yb,t)}}),iT=qw({real_:function(e){const t={input:zw(e,"input","real")};return Pw.runKernel("Real",t)}}),oT=qw({transpose_:function(e,t,n){const r=zw(e,"x","transpose");if(null==t&&(t=r.shape.map(((e,t)=>t)).reverse()),av(r.rank===t.length,(()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${t}.`)),t.forEach((e=>{av(e>=0&&e<r.rank,(()=>"All entries in 'perm' must be between 0 and "+(r.rank-1)+` but got ${t}`))})),r.rank<=1)return r.clone();const i={x:r},o={perm:t};return"complex64"===r.dtype?Qw((()=>{let e=iT(r),t=nT(r);return e=Pw.runKernel(Rb,{x:e},o),t=Pw.runKernel(Rb,{x:t},o),n&&(t=rT(t)),Hw(e,t)})):Pw.runKernel(Rb,i,o)}}),aT=qw({mul_:function(e,t){let n=zw(e,"a","mul"),r=zw(t,"b","mul");[n,r]=jw(n,r);const i={a:n,b:r};return Pw.runKernel(gb,i)}});function sT(e,t){av(null!=e,(()=>"The input to the tensor constructor must be a non-null value."));const n=Uw(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Ww(e,null,n,t)}const lT=qw({einsum_:function(e,...t){const n=t.map(((e,t)=>zw(e,`tensors${t}`,"einsum"))),r={equation:e};return Pw.runKernel(nb,n,r)}}),cT=qw({expandDims_:function(e,t=0){const n=zw(e,"x","expandDims","string_or_numeric");av(t<=n.rank,(()=>"Axis must be <= rank of the tensor"));const r={input:n},i={dim:t};return Pw.runKernel(ob,r,i)}}),uT=qw({sum_:function(e,t=null,n=!1){let r=zw(e,"x","sum");"bool"===r.dtype&&(r=nS(r,"int32"));const i={x:r},o={axis:t,keepDims:n};return Pw.runKernel(jb,i,o)}}),pT=qw({add_:function(e,t){let n=zw(e,"a","add"),r=zw(t,"b","add");[n,r]=jw(n,r);const i={a:n,b:r};return Pw.runKernel(Yv,i)}}),dT=qw({floorDiv_:function(e,t){let n=zw(e,"a","floorDiv"),r=zw(t,"b","floorDiv");[n,r]=jw(n,r);const i={a:n,b:r};return Pw.runKernel("FloorDiv",i)}}),hT=qw({div_:function(e,t){let n=zw(e,"a","div"),r=zw(t,"b","div");if([n,r]=jw(n,r),"int32"===n.dtype&&"int32"===r.dtype)return dT(n,r);const i={a:n,b:r};return Pw.runKernel(tb,i,{})}}),mT=qw({sub_:function(e,t){let n=zw(e,"a","sub"),r=zw(t,"b","sub");[n,r]=jw(n,r);const i={a:n,b:r};return Pw.runKernel(Ob,i)}}),fT=qw({where_:function(e,t,n){const r=zw(t,"a","where"),i=zw(n,"b","where"),o=zw(e,"condition","where","bool"),a=kS(kS(o.shape,r.shape),i.shape),s={condition:KS(o,a),t:KS(r,a),e:KS(i,a)};return Pw.runKernel(Eb,s)}}),gT=qw({greaterEqual_:function(e,t){let n=zw(e,"a","greaterEqual","string_or_numeric"),r=zw(t,"b","greaterEqual","string_or_numeric");[n,r]=jw(n,r),kS(n.shape,r.shape);const i={a:n,b:r};return Pw.runKernel(lb,i)}}),yT=qw({less_:function(e,t){let n=zw(e,"a","less","string_or_numeric"),r=zw(t,"b","less","string_or_numeric");[n,r]=jw(n,r),kS(n.shape,r.shape);const i={a:n,b:r};return Pw.runKernel(ub,i)}}),_T=qw({logicalAnd_:function(e,t){const n=zw(e,"a","logicalAnd","bool"),r=zw(t,"b","logicalAnd","bool");kS(n.shape,r.shape);const i={a:n,b:r};return Pw.runKernel(pb,i)}}),vT=qw({minimum_:function(e,t){let n=zw(e,"a","minimum"),r=zw(t,"b","minimum");[n,r]=jw(n,r),"bool"===n.dtype&&(n=nS(n,"int32"),r=nS(r,"int32")),kS(n.shape,r.shape);const i={a:n,b:r};return Pw.runKernel(mb,i)}});function bT(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function wT(e,t,n){const r=e.length+t.length,i=[];let o=0,a=0;for(let s=0;s<r;s++)-1===n.indexOf(s)?i.push(e[o++]):i.push(t[a++]);return i}function xT(e,t){const n=[],r=e.length;for(let i=0;i<r;i++)-1===t.indexOf(i)&&n.push(e[i]);return[n,t.map((t=>e[t]))]}function ST(e,t){return wT(e,t.map((e=>1)),t)}function TT(e,t,n){av(bT(t,n),(()=>`${e} supports only inner-most axes for now. Got axes ${t} and rank-${n} input.`))}function ET(e,t){if(bT(e,t))return null;const n=[];for(let r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((e=>n.push(e))),n}function IT(e){return e.map(((e,t)=>[t,e])).sort(((e,t)=>e[1]-t[1])).map((e=>e[0]))}function kT(e,t){const n=[];for(let r=t-e;r<t;++r)n.push(r);return n}const jT=qw({max_:function(e,t=null,n=!1){const r={x:zw(e,"x","max")},i={reductionIndices:t,keepDims:n};return Pw.runKernel(db,r,i)}}),AT=qw({square_:function(e){const t=zw(e,"x","square");return Pw.runKernel("Square",{x:t},{})}}),CT=qw({squeeze_:function(e,t){const n=zw(e,"x","squeeze","string_or_numeric");return WS(n,gv(n.shape,t).newShape)}}),OT=qw({matMul_:function(e,t,n=!1,r=!1){let i=zw(e,"a","matMul"),o=zw(t,"b","matMul");[i,o]=jw(i,o);const a={a:i,b:o},s={transposeA:n,transposeB:r};return Pw.runKernel(Qv,a,s)}});var MT;!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(MT||(MT={}));const NT=qw({relu_:function(e){const t={x:zw(e,"x","relu")};return Pw.runKernel(bb,t)}}),RT=qw({exp_:function(e){const t={x:zw(e,"x","exp")};return Pw.runKernel(ib,t)}});function PT(e){return Pw.customGrad(e)}const DT="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate?setImmediate:e=>e();function LT(e,t){const n=e[0].length;e.forEach(((e,t)=>{av(e.length===n,(()=>`Error in concat${n}D: rank of tensors[${t}] must be the same as the rank of the rest (${n})`))})),av(t>=0&&t<n,(()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`));const r=e[0];e.forEach(((e,i)=>{for(let o=0;o<n;o++)av(o===t||e[o]===r[o],(()=>`Error in concat${n}D: Shape of tensors[${i}] (${e}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`))}))}function FT(e,t){const n=e[0].slice();for(let r=1;r<e.length;r++)n[t]+=e[r][t];return n}function BT(e,t,n,r,i="NHWC",o){return GT(e,[...t,e[3]],n,o,r,null,null,QT(i))}function UT(e,t,n,r,i,o,a="channelsLast"){const[s,l]=qT(t);let c;if("channelsLast"===a)c=[s,l,e[3],e[3]];else{if("channelsFirst"!==a)throw new Error(`Unknown dataFormat ${a}`);c=[s,l,e[1],e[1]]}return GT(e,c,n,r,i,o,!1,a)}function VT(e,t,n,r,i,o,a="NDHWC"){const[s,l,c]=HT(t);let u,p;if("NDHWC"===a)p="channelsLast",u=[s,l,c,e[4],e[4]];else{if("NCDHW"!==a)throw new Error(`Unknown dataFormat ${a}`);p="channelsFirst",u=[s,l,c,e[1],e[1]]}return zT(e,u,n,r,i,!1,p,o)}function GT(e,t,n,r,i,o,a=!1,s="channelsLast"){let[l,c,u,p]=[-1,-1,-1,-1];if("channelsLast"===s)[l,c,u,p]=e;else{if("channelsFirst"!==s)throw new Error(`Unknown dataFormat ${s}`);[l,p,c,u]=e}const[d,h,,m]=t,[f,g]=qT(n),[y,_]=qT(r),v=WT(d,y),b=WT(h,_),{padInfo:w,outHeight:x,outWidth:S}=function(e,t,n,r,i,o,a,s,l){let c,u,p;if("number"==typeof e){c={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};const i=function(e,t,n,r,i){null==r&&(r=$T(e,t,n));const o=e[1];return[KT((e[0]-t+2*r)/n+1,i),KT((o-t+2*r)/n+1,i)]}([t,n],o,r,e,s);u=i[0],p=i[1]}else if("same"===e){u=Math.ceil(t/r),p=Math.ceil(n/i);const e=Math.max(0,(u-1)*r+o-t),s=Math.max(0,(p-1)*i+a-n),l=Math.floor(e/2),d=e-l,h=Math.floor(s/2);c={top:l,bottom:d,left:h,right:s-h,type:"SAME"}}else if("valid"===e)c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((t-o+1)/r),p=Math.ceil((n-a+1)/i);else{if("object"!=typeof e)throw Error(`Unknown padding parameter: ${e}`);{const d="channelsLast"===l?e[1][0]:e[2][0],h="channelsLast"===l?e[1][1]:e[2][1],m="channelsLast"===l?e[2][0]:e[3][0],f="channelsLast"===l?e[2][1]:e[3][1];c={top:d,bottom:h,left:m,right:f,type:0===d&&0===h&&0===m&&0===f?"VALID":"EXPLICIT"},u=KT((t-o+d+h)/r+1,s),p=KT((n-a+m+f)/i+1,s)}}return{padInfo:c,outHeight:u,outWidth:p}}(i,c,u,f,g,v,b,o,s),T=a?m*p:m;let E;return"channelsFirst"===s?E=[l,T,x,S]:"channelsLast"===s&&(E=[l,x,S,T]),{batchSize:l,dataFormat:s,inHeight:c,inWidth:u,inChannels:p,outHeight:x,outWidth:S,outChannels:T,padInfo:w,strideHeight:f,strideWidth:g,filterHeight:d,filterWidth:h,effectiveFilterHeight:v,effectiveFilterWidth:b,dilationHeight:y,dilationWidth:_,inShape:e,outShape:E,filterShape:t}}function zT(e,t,n,r,i,o=!1,a="channelsLast",s){let[l,c,u,p,d]=[-1,-1,-1,-1,-1];if("channelsLast"===a)[l,c,u,p,d]=e;else{if("channelsFirst"!==a)throw new Error(`Unknown dataFormat ${a}`);[l,d,c,u,p]=e}const[h,m,f,,g]=t,[y,_,v]=HT(n),[b,w,x]=HT(r),S=WT(h,b),T=WT(m,w),E=WT(f,x),{padInfo:I,outDepth:k,outHeight:j,outWidth:A}=function(e,t,n,r,i,o,a,s,l,c,u){let p,d,h,m;if("valid"===e&&(e=0),"number"==typeof e){p={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};const f=function(e,t,n,r,i,o){null==i&&(i=$T(e,t[0],r[0]));const a=[0,0,0,1];for(let n=0;n<3;n++)e[n]+2*i>=t[n]&&(a[n]=KT((e[n]-t[n]+2*i)/r[n]+1,o));return a}([t,n,r,1],[s,l,c],0,[i,o,a],e,u);d=f[0],h=f[1],m=f[2]}else{if("same"!==e)throw Error(`Unknown padding parameter: ${e}`);{d=Math.ceil(t/i),h=Math.ceil(n/o),m=Math.ceil(r/a);const e=(d-1)*i+s-t,u=(h-1)*o+l-n,f=(m-1)*a+c-r,g=Math.floor(e/2),y=e-g,_=Math.floor(u/2),v=u-_,b=Math.floor(f/2);p={top:_,bottom:v,left:b,right:f-b,front:g,back:y,type:"SAME"}}}return{padInfo:p,outDepth:d,outHeight:h,outWidth:m}}(i,c,u,p,y,_,v,S,T,E,s),C=o?g*d:g;let O;return"channelsFirst"===a?O=[l,C,k,j,A]:"channelsLast"===a&&(O=[l,k,j,A,C]),{batchSize:l,dataFormat:a,inDepth:c,inHeight:u,inWidth:p,inChannels:d,outDepth:k,outHeight:j,outWidth:A,outChannels:C,padInfo:I,strideDepth:y,strideHeight:_,strideWidth:v,filterDepth:h,filterHeight:m,filterWidth:f,effectiveFilterDepth:S,effectiveFilterHeight:T,effectiveFilterWidth:E,dilationDepth:b,dilationHeight:w,dilationWidth:x,inShape:e,outShape:O,filterShape:t}}function $T(e,t,n,r=1){const i=WT(t,r);return Math.floor((e[0]*(n-1)-n+i)/2)}function qT(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function HT(e){return"number"==typeof e?[e,e,e]:e}function WT(e,t){return t<=1?e:e+(e-1)*(t-1)}function KT(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error(`Unknown roundingMode ${t}`)}}function XT(e){const[t,n,r]=qT(e);return 1===t&&1===n&&1===r}function YT(e,t){return XT(e)||XT(t)}function JT(e){return qT(e).every((e=>e>0))}function QT(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error(`Unknown dataFormat ${e}`)}function ZT(e,t,n){if(null!=n){if("string"==typeof t)throw Error(`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);if("number"==typeof t)av(uv(t),(()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`));else{if("object"!=typeof t)throw Error(`Error in ${e}: Unknown padding parameter: ${t}`);t.forEach((t=>{t.forEach((t=>{av(uv(t),(()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`))}))}))}}}const eE=qw({elu_:function(e){const t={x:zw(e,"x","elu","float32")};return Pw.runKernel("Elu",t)}}),tE=qw({leakyRelu_:function(e,t=.2){const n={x:zw(e,"x","leakyRelu")},r={alpha:t};return Pw.runKernel("LeakyRelu",n,r)}}),nE=qw({prelu_:function(e,t){const n={x:zw(e,"x","prelu"),alpha:zw(t,"alpha","prelu")};return Pw.runKernel("Prelu",n)}}),rE=qw({relu6_:function(e){const t={x:zw(e,"x","relu6")};return Pw.runKernel(xb,t)}}),iE=qw({sigmoid_:function(e){const t={x:zw(e,"x","sigmoid","float32")};return Pw.runKernel(kb,t)}}),oE=qw({step_:function(e,t=0){const n={x:zw(e,"x","step")},r={alpha:t};return Pw.runKernel("Step",n,r)}});function aE(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return aT(e,oE(t));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function sE(e,t){let n=t;const r=IS(e.shape,t.shape);return r.length>0&&(n=uT(n,r)),WS(n,e.shape)}function lE(e,t,n,r){if("linear"===t)return e;if("relu"===t)return NT(e);if("elu"===t)return eE(e);if("relu6"===t)return rE(e);if("prelu"===t)return nE(e,n);if("leakyrelu"===t)return tE(e,r);if("sigmoid"===t)return iE(e);throw new Error(`Unknown fused activation ${t}.`)}const cE=(e,t)=>!(e>0)||"linear"===t;var uE;function pE(e,t,n){let r=new Array;if(null==n&&null==t)return r;if(null==t)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(null==n)return r;if(e+n.length!==r.length)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.rank = ${e+n.length}, but shape.rank = ${r.length}`);for(let i=1;i<n.length;++i){const o=n[i],a=r[r.length-n.length+i],s=r[a];if(o>=0)if(s>=0){if(s!==o)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.shape[${i+e}] = ${o} but shape[${i+e}] = ${s}`)}else r[a]=o}return r}function dE(e){const t={FIRST_DIM_SIZE:uE.FIRST_DIM_SIZE,VALUE_ROWIDS:uE.VALUE_ROWIDS,ROW_LENGTHS:uE.ROW_LENGTHS,ROW_SPLITS:uE.ROW_SPLITS,ROW_LIMITS:uE.ROW_LIMITS,ROW_STARTS:uE.ROW_STARTS},n=[];for(const r of e){if(!(r in t))break;n.push(t[r])}return n}function hE(e){return 0===e.length?0:e[0]===uE.FIRST_DIM_SIZE?e.length-1:e.length}function mE(e,t){if(null==e||null==t)return;const n=e.length,r=t.length;if(n>=r)throw new Error(`defaultValue.shape=${e} and ragged tensor flatValues.shape=${t}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let i=0;i<Math.min(n,r-1);++i){const n=e[i],r=t[i+1];if(n>=0&&r>=0&&1!==n&&n!==r)throw new Error(`defaultValue.shape=${e}, and ragged tensor input flatValues.shape=${t} are incompatible: defaultValue.shape[${i-e.length}] = ${n} but ragged tensor input.flatValues.shape[${i-e.length}] = ${r}`)}}!function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"}(uE||(uE={}));const fE=30;function gE(e){return e<=fE?e:Tv(e,Math.floor(Math.sqrt(e)))}function yE(e,t,n){return[n*("number"==typeof e?e:e[0]),t*("number"==typeof e?e:e[1])]}function _E(e,t,n,r=!0){let i=[];if(r)i=i.concat(t.slice(0)),i.push(e[0]/n),i=i.concat(e.slice(1));else{i=i.concat(e[0]);const n=t.length;for(let r=0;r<n;++r)i=i.concat([e[r+1]/t[r],t[r]]);i=i.concat(e.slice(n+1))}return i}function vE(e,t,n=!0){const r=[];if(n){r.push(t);for(let n=t+1;n<e;++n)n<=2*t?(r.push(n),r.push(n-(t+1))):r.push(n)}else{const n=[],i=[];for(let r=1;r<e;++r)r>=2*t+1||r%2==1?i.push(r):n.push(r);r.push(...n),r.push(0),r.push(...i)}return r}function bE(e,t,n,r=!0){const i=[];r?i.push(e[0]/n):i.push(e[0]*n);for(let n=1;n<e.length;++n)n<=t.length?r?i.push(t[n-1]*e[n]):i.push(e[n]/t[n-1]):i.push(e[n]);return i}function wE(e,t){const n=[0];for(let r=0;r<t;++r)n.push(e[r][0]);return n}function xE(e,t,n){const r=e.slice(0,1);for(let i=0;i<n;++i)r.push(e[i+1]-t[i][0]-t[i][1]);return r}function SE(e,t){const n=e.shape.length,r=t.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if("int32"!==t.dtype)throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[r-1]} vs. ${n}`);if(0===lv(e.shape))throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);const i=t.shape,o=i[i.length-1];let a=1;for(let e=0;e<i.length-1;++e)a*=i[e];const s=e.shape,l=i.slice();l.pop();let c=1;for(let e=o;e<n;++e)c*=s[e],l.push(s[e]);const u=[...Ev(e.shape).map((e=>e/c)),1].slice(0,o);return[l,a,c,u]}function TE(e,t,n){const r=t.rank>1?t.shape[t.rank-1]:1,i=t.rank>1?t.rank-1:1,o=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${t.shape}, shape: ${e}, sliceDim: ${r}, and batchDim: ${i}.`;if(n.rank<i)throw new Error(o+` update.rank < ${i}. `);if(e.length<r+(n.rank-i))throw new Error(o+` Output shape length < ${r+(n.rank-i)}`);if(n.rank!==i+e.length-r)throw new Error(o+" update.rank != "+(i+e.length-r));for(let e=0;e<i;++e)if(n.shape[e]!==t.shape[e])throw new Error(o+` updates.shape[${e}] (${n.shape[e]}) != indices.shape[${e}] (${t.shape[e]}).`);for(let t=0;t<n.rank-i;++t)if(n.shape[t+i]!==e[t+r])throw new Error(o+` updates.shape[${t+i}] (${n.shape[t+i]}) != shape[${t+i}] (${e[t+i]})`)}function EE(e,t,n){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if("int32"!==t.dtype)throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(0===n.length){if(0===t.size)throw new Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(0===e.size)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}TE(n,t,e)}function IE(e,t,n){const r=t.shape.length,i=r>1?t.shape[r-1]:1,o=n.length;let a=1;for(let e=i;e<o;++e)a*=n[e];const s=i<1?1:i;return{sliceRank:i,numUpdates:lv(t.shape)/s,sliceSize:a,strides:[...Ev(n.slice(0,i)),1],outputSize:lv(n)}}const kE=1.7580993408473768,jE=1.0507009873554805,AE=.3275911,CE=.254829592,OE=-.284496736,ME=1.421413741,NE=-1.453152027,RE=1.061405429;function PE(e,t){if(e.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${e.length}, imag: ${t.length}.`);const n=new Float32Array(2*e.length);for(let r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function DE(e){const t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function LE(e){const t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let t=0;t<e.length;t+=4)n[Math.floor(t/4)]=e[t],r[Math.floor(t/4)]=e[t+1];return{real:n,imag:r}}function FE(e){const t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let t=2;t<e.length;t+=4)n[Math.floor(t/4)]=e[t],r[Math.floor(t/4)]=e[t+1];return{real:n,imag:r}}function BE(e,t){return{real:e[2*t],imag:e[2*t+1]}}function UE(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function VE(e,t){const n=new Float32Array(e/2),r=new Float32Array(e/2);for(let i=0;i<Math.ceil(e/2);i++){const o=(t?2:-2)*Math.PI*(i/e);n[i]=Math.cos(o),r[i]=Math.sin(o)}return{real:n,imag:r}}function GE(e,t,n){const r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}const zE="->",$E=/->/g,qE=",",HE="...";function WE(e,t){const n=((e=e.replace(/\s/g,"")).length-e.replace($E,"").length)/zE.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${zE}").`);const[r,i]=e.split(zE);av(-1===r.indexOf(HE),(()=>`The ellipsis notation ("${HE}") is not supported yet.`));const o=r.split(qE),a=o.length;if(t!==a)throw new Error(`Expected ${a} input tensors, received ${t}`);if(a>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const s=[];for(let e=0;e<i.length;++e){const t=i[e];if(!o.some((e=>-1!==e.indexOf(t))))throw new Error(`Output subscripts contain the label ${t} not present in the input subscripts.`);-1===s.indexOf(t)&&s.push(t)}for(let e=0;e<r.length;++e){const t=r[e];-1===s.indexOf(t)&&t!==qE&&s.push(t)}const l=new Array(o.length);for(let e=0;e<a;++e){if(new Set(o[e].split("")).size!==o[e].length)throw new Error(`Found duplicate axes in input component ${o[e]}. Support for duplicate axes in input is not implemented yet.`);l[e]=[];for(let t=0;t<o[e].length;++t)l[e].push(s.indexOf(o[e][t]))}const c=s.length,u=[];for(let e=i.length;e<c;++e)u.push(e);return{allDims:s,summedDims:u,idDims:l}}function KE(e,t){let n=new Array(e);n.fill(-1);for(let e=0;e<t.length;++e)n[t[e]]=e;const r=[];for(let t=0;t<e;++t)-1===n[t]&&r.push(t);return n=n.filter((e=>-1!==e)),{permutationIndices:n,expandDims:r}}function XE(e,t,n){const r=new Array(e);for(let e=0;e<n.length;++e){const i=n[e].shape;for(let n=0;n<t[e].length;++n)void 0===r[t[e][n]]?r[t[e][n]]=i[n]:av(r[t[e][n]]===i[n],(()=>`Expected dimension ${r[t[e][n]]} at axis ${n} of input shaped ${JSON.stringify(i)}, but got dimension ${i[n]}`))}}function YE(e,t){const n=e,r=[];let i=0;0===e.length&&n.push(-1),i=e.length+1;for(let e=0;e<i;++e)r.push([]);const o=[];for(let e=0;e<n.length;++e){const i=QE(t,n[e]);for(const t of i)-1===o.indexOf(t)&&(r[e].push(t),o.push(t))}return{path:n,steps:r}}function JE(e){return e.every(((e,t)=>e===t))}function QE(e,t){const n=[];for(let r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function ZE(e,t,n=0){let r=[];if("number"==typeof t)av(e.shape[n]%t==0,(()=>"Number of splits must evenly divide the axis.")),r=new Array(t).fill(e.shape[n]/t);else{av(t.reduce(((e,t)=>(-1===t&&(e+=1),e)),0)<=1,(()=>"There should be only one negative value in split array."));const i=t.indexOf(-1);if(-1!==i){const r=t.reduce(((e,t)=>t>0?e+t:e));t[i]=e.shape[n]-r}av(e.shape[n]===t.reduce(((e,t)=>e+t)),(()=>"The sum of sizes must match the size of the axis dimension.")),r=t}return r}function eI(e){return`Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ${e}`}function tI(e,t){return`indices(${e}, 0) is invalid: ${t} < 0`}function nI(e,t,n){return`indices(${e}, 0) is invalid: ${t} >= ${n}`}function rI(e,t){return`only one output dimension may be -1, not both ${e} and ${t}`}function iI(e,t){return`size ${e} must be non-negative, not ${t}`}function oI(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function aI(e,t){return`Input to reshape is a SparseTensor with ${lv(e)}\n  dense values, but the requested shape requires a multiple of ${lv(t)}. inputShape=${e} outputShape= ${t}`}function sI(e,t){return`Input to reshape is a tensor with ${lv(e)} dense values, but the requested shape has ${lv(t)}. inputShape=${e} outputShape=${t}`}function lI(){return"segment ids must be >= 0"}function cI(){return"segment ids are not increasing"}function uI(e,t){return`Segment id ${e} out of range [0, ${t}), possibly because segmentIds input is not sorted.`}function pI(e,t,n){return`Bad: indices[${e}] == ${t} out of range [0, ${n})`}function dI(e,t){let n,r=!1;for(e<=fE?(n=e,r=!0):n=Tv(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=Tv(e,n+1);return n}function hI(e,t,n){const r=[],i=e.length;for(let o=0;o<i;o++)o!==t?r.push(e[o]):r.push(n);return r}function mI(e,t,n,r){const i=t.shape.length,o=e.shape.length;if(0!==r&&(r<-i||r>i))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${r}`);if(r<0&&(r+=i),r>o)throw new Error(`batchDims (${r}) must be less than rank(x) (\n    ${o}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let n=0;n<r;++n)if(e.shape[n]!==t.shape[n])throw new Error(`x.shape[${n}]: ${e.shape[n]} should be equal to indices.shape[${n}]: ${t.shape[n]}.`);const a=e.shape[n],s=[];let l=1,c=1,u=1;for(let t=0;t<r;++t)s.push(e.shape[t]),l*=e.shape[t];for(let t=r;t<n;t++)s.push(e.shape[t]),c*=e.shape[t];for(let e=r;e<i;e++)s.push(t.shape[e]);for(let t=n+1;t<o;t++)s.push(e.shape[t]),u*=e.shape[t];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:a,outputShape:s}}function fI(e){try{return e.map((e=>tw(e)))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function gI(e){return e.map((e=>ew(e)))}function yI(e,t){const n=[];for(let e=0;e<t.length;e++)t[e]&&n.push(e);const r=tS(e,"int32"),i=tS([n.length,e.length],"int32");for(let t=0;t<n.length;t++){const o=r.indexToLoc(n[t]),a=t*e.length;i.values.set(o,a)}return i.toTensor()}var _I,vI;Dv().registerFlag("KEEP_INTERMEDIATE_TENSORS",(()=>!1),(e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(_I||(_I={})),function(e){let t;!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(t=e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(vI||(vI={}));const bI={};function wI(e){return bI[e]}function xI(e,t,n,r,i){const o=t.inputParams[e];if(o&&void 0!==o.inputIndexStart){const e=o.inputIndexStart,a=0===o.inputIndexEnd?void 0:void 0===o.inputIndexEnd?e+1:o.inputIndexEnd,s=e<0?t.inputNames.length+e:e;if("tensor"===o.type)return SI(t.inputNames[s],n,r,i);if("tensors"===o.type){const o=t.inputs.slice(e,a);return t.inputNames.slice(e,a).filter(((e,t)=>{var n;return"NoOp"!==(null===(n=o[t])||void 0===n?void 0:n.op)})).map((e=>SI(e,n,r,i)))}const l=SI(t.inputNames[s],n,r,i),c=l.dataSync();return"number"===o.type?c[0]:kv(l.shape,c)}const a=t.attrParams[e];return a&&a.value}function SI(e,t,n,r){const[i,o]=kI(e,n);if(null!=r){const e=r.getHashTableHandleByName(i);if(null!=e)return e}const a=n.currentContextIds.find((e=>!!t[II(i,e)]));return void 0!==a?t[II(i,a)][o]:void 0}function TI(e,t,n){return t[II(e,n.currentContextId)]}function EI(e,t){const[n,r,i]=kI(e,t);return[II(n,t&&t.currentContextId),r,i]}function II(e,t){return t?`${e}-${t}`:e}function kI(e,t){if(""===e)return["",0,void 0];const n=null!=t&&null!=t.parseNodeNameCache;if(n){const n=t.parseNodeNameCache.get(e);if(null!=n)return n}const r=e.split(":");let i;if(1===r.length)i=[e,0,void 0];else{const e=r[0],t=3===r.length?r[1]:void 0;i=[e,Number(r[r.length-1]),t]}return n&&t.parseNodeNameCache.set(e,i),i}function jI(e,t,n){let r=xI("pad",e,t,n);if("explicit"===r){r=xI("explicitPaddings",e,t,n);const i=[[0,0],[0,0],[0,0],[0,0]];for(let e=0;e<4;e++)i[e][0]=r[2*e],i[e][1]=r[2*e+1];return i}return r}function AI(e){return e.kept?e:rS(e)}const CI=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],OI=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],MI=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],NI=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],RI=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],PI=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],DI=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],LI=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],FI=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],BI=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],UI=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],VI=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],GI=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],zI=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],$I=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],qI=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],HI=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],WI=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],KI=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}];class XI{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[].concat(...[l,c,u,p,d,h,m,f,g,y,_,v,b,w,x,S,T,E,I].map((e=>e.json)));this.opMappers=e.reduce(((e,t)=>(e[t.tfOpName]=t,e)),{})}transformGraph(e,t={}){const n=e.node,r=[],i=[],o=[],a=n.reduce(((e,t)=>(e[t.name]=this.mapNode(t),t.op.startsWith("Placeholder")?r.push(e[t.name]):"Const"===t.op?i.push(e[t.name]):null!=t.input&&0!==t.input.length||o.push(e[t.name]),e)),{});let s=[];const l=[];let c={},u={};null!=t&&(c=this.mapSignatureEntries(t.inputs),u=this.mapSignatureEntries(t.outputs));const p=Object.keys(a);p.forEach((e=>{const t=a[e];t.inputNames.forEach(((e,n)=>{const[r,,i]=EI(e),o=a[r];if(null!=o.outputs){const e=o.outputs.indexOf(i);if(-1!==e){const i=`${r}:${e}`;t.inputNames[n]=i}}t.inputs.push(o),o.children.push(t)}))})),0===Object.keys(u).length?p.forEach((e=>{const t=a[e];0===t.children.length&&l.push(t)})):Object.keys(u).forEach((e=>{const[t]=EI(e),n=a[t];null!=n&&(n.signatureKey=u[e],l.push(n))})),Object.keys(c).length>0?Object.keys(c).forEach((e=>{const[t]=EI(e),n=a[t];n&&(n.signatureKey=c[e],s.push(n))})):s=r;let d={};null!=e.library&&null!=e.library.function&&(d=e.library.function.reduce(((e,t)=>(e[t.signature.name]=this.mapFunction(t),e)),{}));const h={nodes:a,inputs:s,outputs:l,weights:i,placeholders:r,signature:t,functions:d};return o.length>0&&(h.initNodes=o),h}mapSignatureEntries(e){return Object.keys(e||{}).reduce(((t,n)=>(t[e[n].name]=n,t)),{})}mapNode(e){const t=wI(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});const n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((e=>e.startsWith("^")?e.slice(1):e)),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce(((e,t)=>(e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e)),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce(((t,n)=>{const r=n.type;let i;switch(n.type){case"string":i=JI(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=JI(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":i=sk(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=sk(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":i=ZI(e.attr,n.tfName,n.defaultValue||0),void 0===i&&n.tfDeprecatedName&&(i=ZI(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":i=ak(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=ak(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":i=QI(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=QI(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":i=ck(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=ck(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":i=ok(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=ok(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":i=lk(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=lk(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":i=nk(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=nk(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":i=rk(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=rk(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":i=tk(e.attr,n.tfName,n.defaultValue),void 0===i&&n.tfDeprecatedName&&(i=tk(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${n.type} for op: ${e.op}`)}return t[n.name]={value:i,type:r},t}),{})),n}mapFunction(e){const t=e.nodeDef,n=[];let r={};null!=t&&(r=t.reduce(((e,t)=>(e[t.name]=this.mapNode(t),"Const"===t.op&&n.push(e[t.name]),e)),{}));const i=[],o=[];e.signature.inputArg.forEach((e=>{const[t]=EI(e.name),n={name:t,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:ek(e.type),type:"dtype"}},children:[]};n.signatureKey=e.name,i.push(n),r[t]=n})),Object.keys(r).forEach((e=>{const t=r[e];t.inputNames.forEach(((e,n)=>{const[i,,o]=EI(e),a=r[i];if(null!=a.outputs){const e=a.outputs.indexOf(o);if(-1!==e){const r=`${i}:${e}`;t.inputNames[n]=r}}t.inputs.push(a),a.children.push(t)}))}));const a=e.ret;e.signature.outputArg.forEach((e=>{const[t,n]=EI(a[e.name]),i=r[t];null!=i&&(i.defaultOutput=n,o.push(i))}));const s=this.mapArgsToSignature(e);return{nodes:r,inputs:i,outputs:o,weights:n,placeholders:[],signature:s}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce(((e,t)=>(e[t.name]=this.mapArgToTensorInfo(t),e)),{}),outputs:e.signature.outputArg.reduce(((t,n)=>(t[n.name]=this.mapArgToTensorInfo(n,e.ret),t)),{})}}mapArgToTensorInfo(e,t){let n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}function YI(e,t){const n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){const t=Dv().global;if(void 0!==t.atob)return t.atob(e);if("undefined"!=typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function JI(e,t,n,r=!1){const i=e[t];return null!=i?YI(i.s,r):n}function QI(e,t,n){const r=e[t];return r?r.b:n}function ZI(e,t,n){const r=e[t]||{},i=null!=r.i?r.i:null!=r.f?r.f:n;return"number"==typeof i?i:parseInt(i,10)}function ek(e){switch("string"==typeof e&&(e=_I[e]),e){case _I.DT_FLOAT:case _I.DT_HALF:return"float32";case _I.DT_INT32:case _I.DT_INT64:case _I.DT_INT8:case _I.DT_UINT8:return"int32";case _I.DT_BOOL:return"bool";case _I.DT_DOUBLE:return"float32";case _I.DT_STRING:return"string";case _I.DT_COMPLEX64:case _I.DT_COMPLEX128:return"complex64";default:return null}}function tk(e,t,n){const r=e[t];return r&&r.func?r.func.name:n}function nk(e,t,n){const r=e[t];return r&&r.type?ek(r.type):n}function rk(e,t,n){const r=e[t];return r&&r.list&&r.list.type?r.list.type.map((e=>ek(e))):n}function ik(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((e=>"number"==typeof e.size?e.size:parseInt(e.size,10))):[]}function ok(e,t,n){const r=e[t];return r&&r.shape?ik(r.shape):n}function ak(e,t,n){const r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((e=>"number"==typeof e?e:parseInt(e,10))):n}function sk(e,t,n,r=!1){const i=e[t];return i&&i.list&&i.list.s?i.list.s.map((e=>YI(e,r))):n}function lk(e,t,n){const r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map((e=>ik(e))):n}function ck(e,t,n){const r=e[t];return r&&r.list&&r.list.b?r.list.b:n}class uk{constructor(e,t,n){this.node=e,this.tensorMap=t,this.context=n,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map((e=>this.getInput(e))),null!=e.rawAttrs&&(this.attrs=Object.keys(e.rawAttrs).reduce(((e,t)=>(e[t]=this.getAttr(t),e)),{}))}getInput(e){return SI(e,this.tensorMap,this.context)}getAttr(e,t){const n=this.node.rawAttrs[e];if(null!=n.tensor)return SI(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return ZI(this.node.rawAttrs,e,t);if(null!=n.s)return JI(this.node.rawAttrs,e,t);if(null!=n.b)return QI(this.node.rawAttrs,e,t);if(null!=n.shape)return ok(this.node.rawAttrs,e,t);if(null!=n.type)return nk(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return ak(this.node.rawAttrs,e,t);if(null!=n.list.s)return sk(this.node.rawAttrs,e,t);if(null!=n.list.shape)return lk(this.node.rawAttrs,e,t);if(null!=n.list.b)return ck(this.node.rawAttrs,e,t);if(null!=n.list.type)return rk(this.node.rawAttrs,e,t)}return t}}const pk=qw({fusedMatMul_:function({a:e,b:t,transposeA:n=!1,transposeB:r=!1,bias:i,activation:o="linear",preluActivationWeights:a,leakyreluAlpha:s=.2}){if(!1===cE(Pw.state.gradientDepth,o)){let l=OT(e,t,n,r);return null!=i&&(l=pT(l,i)),lE(l,o,a,s)}let l=zw(e,"a","fused matMul"),c=zw(t,"b","fused matMul");[l,c]=jw(l,c);const u=n?l.shape[l.rank-2]:l.shape[l.rank-1],p=r?c.shape[c.rank-1]:c.shape[c.rank-2],d=n?l.shape[l.rank-1]:l.shape[l.rank-2],h=r?c.shape[c.rank-2]:c.shape[c.rank-1],m=l.shape.slice(0,-2),f=c.shape.slice(0,-2),g=lv(m),y=lv(f);av(u===p,(()=>`Error in fused matMul: inner shapes (${u}) and (${p}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${n} and transposeB=${r} must match.`));const _=kS(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([d,h]),v=WS(l,n?[g,u,d]:[g,d,u]),b=WS(c,r?[y,h,p]:[y,p,h]);let w,x;null!=i&&(w=zw(i,"bias","fused matMul"),[w]=jw(w,l),kS(_,w.shape)),null!=a&&(x=zw(a,"prelu weights","fused matMul"));const S=(e,t)=>{const[a,s,l,c]=t,u=aE(WS(e,l.shape),l,o);let p,d;return n||r?!n&&r?(p=OT(u,s,!1,!1),d=OT(u,a,!0,!1)):n&&!r?(p=OT(s,u,!1,!0),d=OT(a,u,!1,!1)):(p=OT(s,u,!0,!0),d=OT(u,a,!0,!0)):(p=OT(u,s,!1,!0),d=OT(a,u,!0,!1)),null!=i?[p,d,sE(c,u)]:[p,d]},T={a:v,b,bias:w,preluActivationWeights:x},E={transposeA:n,transposeB:r,activation:o,leakyreluAlpha:s};if(null==i){const e=PT(((e,t,n)=>{const r=Pw.runKernel(Pb,T,E);return n([e,t,r]),{value:WS(r,_),gradFunc:S}}));return e(v,b)}{const e=PT(((e,t,n,r)=>{const i=Pw.runKernel(Pb,T,E);return r([e,t,i,n]),{value:WS(i,_),gradFunc:S}}));return e(v,b,w)}}}),dk=qw({stridedSlice_:function(e,t,n,r,i=0,o=0,a=0,s=0,l=0){const c={x:zw(e,"x","stridedSlice","string_or_numeric")},u={begin:t,end:n,strides:r,beginMask:i,endMask:o,ellipsisMask:a,newAxisMask:s,shrinkAxisMask:l};return Pw.runKernel(Cb,c,u)}}),hk=qw({addN_:function(e){av(Array.isArray(e),(()=>"The argument passed to tf.addN() must be a list of tensors")),av(e.length>=1,(()=>`Must pass at least one tensor to tf.addN(), but got ${e.length}`));const t=e.map(((e,t)=>zw(e,`tensors${t}`,"addN"))),n=t[0];t.forEach((e=>{if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((e=>{if(!cv(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));const r=t;return Pw.runKernel(Jv,r)}}),mk=qw({equal_:function(e,t){let n=zw(e,"a","equal","string_or_numeric"),r=zw(t,"b","equal","string_or_numeric");[n,r]=jw(n,r),kS(n.shape,r.shape);const i={a:n,b:r};return Pw.runKernel(rb,i)}}),fk=qw({maximum_:function(e,t){let n=zw(e,"a","maximum"),r=zw(t,"b","maximum");[n,r]=jw(n,r),"bool"===n.dtype&&(n=nS(n,"int32"),r=nS(r,"int32")),kS(n.shape,r.shape);const i={a:n,b:r};return Pw.runKernel(hb,i)}}),gk=qw({tensorScatterUpdate_:function(e,t,n){const r=zw(e,"tensor","tensorScatterupdate"),i=zw(t,"indices","tensorScatterupdate","int32"),o=zw(n,"updates","tensorScatterupdate");if(EE(o,i,r.shape),r.dtype!==o.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${o.dtype}.`);const a={tensor:r,indices:i,updates:o};return Pw.runKernel(Tb,a,{})}}),yk=qw({rsqrt_:function(e){const t={x:zw(e,"x","rsqrt","float32")};return Pw.runKernel(Sb,t)}}),_k=qw({reciprocal_:function(e){const t={x:zw(e,"x","reciprocal")};return Pw.runKernel(vb,t)}}),vk=qw({gather_:function(e,t,n=0,r=0){const i={x:zw(e,"x","gather"),indices:zw(t,"indices","gather","int32")},o={axis:n,batchDims:r};return Pw.runKernel(ab,i,o)}}),bk=qw({gatherND_:function(e,t){const n=zw(t,"indices","gatherND","int32"),r={params:zw(e,"x","gatherND","string_or_numeric"),indices:n};return Pw.runKernel(sb,r)}}),wk=qw({tanh_:function(e){const t={x:zw(e,"x","tanh","float32")};return Pw.runKernel(Mb,t)}}),xk={matMul:pk};function Sk(e,t,n=""){if("number"!=typeof e&&"number"!=typeof t){av(e.length===t.length,(()=>n+` Shapes ${e} and ${t} must match`));for(let r=0;r<e.length;r++){const i=e[r],o=t[r];av(i<0||o<0||i===o,(()=>n+` Shapes ${e} and ${t} must match`))}}}function Tk(e){return"number"!=typeof e&&!e.some((e=>e<0))}function Ek(e,t,n){let r=Ik(e,n);const i=!Tk(r);if(i&&0===t.length)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(i&&t.forEach((e=>{r=Ik(e.shape,r)})),!Tk(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function Ik(e,t){if("number"==typeof e)return t;if("number"==typeof t)return e;if(e.length!==t.length)throw new Error(`Incompatible ranks during merge: ${e} vs. ${t}`);const n=[];for(let r=0;r<e.length;++r){const i=e[r],o=t[r];if(i>=0&&o>=0&&i!==o)throw new Error(`Incompatible shape during merge: ${e} vs. ${t}`);n[r]=i>=0?i:o}return n}class kk{constructor(e,t,n,r,i,o,a){this.name=e,this.dtype=t,this.maxSize=n,this.elementShape=r,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=a,this.tensors=[],this.closed_=!1,this.idTensor=JS(0),Zw(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach((t=>{null!=e&&e.has(t.tensor.id)||t.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const t=this.tensors[e];if(t.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map((e=>this.read(e)))}write(e,t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},\n          because the value dtype is ${t.dtype}, but TensorArray dtype is ${this.dtype}.`);if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),Sk(this.elementShape,t.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),n.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(n.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);n.tensor=t,Zw(t),n.written=!0,this.tensors[e]=n}writeMany(e,t){if(e.length!==t.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${t.length}.`);e.forEach(((e,n)=>this.write(e,t[n])))}gather(e,t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${t}`);if(e)e=e.slice(0,this.size());else{e=[];for(let t=0;t<this.size();t++)e.push(t)}if(0===e.length)return Kw([],[0].concat(this.elementShape));const n=this.readMany(e);return Sk(this.elementShape,n[0].shape,"TensorArray shape mismatch: "),ZS(n,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(0===this.size())return Kw([],[0].concat(this.elementShape));const t=[];for(let e=0;e<this.size();e++)t.push(e);const n=this.readMany(t);return Sk(this.elementShape,n[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${n[0].shape})`),XS(n,0)}scatter(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const n=Math.max(...e);if(!this.dynamicSize&&n>=this.maxSize)throw new Error(`Max index must be < array size (${n}  vs. ${this.maxSize})`);this.writeMany(e,eT(t,0))}split(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);let n=0;const r=e.map((e=>(n+=e,n)));if(n!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${n}, and tensor's shape is: ${t.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const i=0===n?0:t.size/n,o=[];Qw((()=>{t=WS(t,[1,n,i]);for(let n=0;n<e.length;++n){const a=[0,0===n?0:r[n-1],0],s=[1,e[n],i];o[n]=WS(QS(t,a,s),this.elementShape)}return o}));const a=[];for(let t=0;t<e.length;t++)a[t]=t;this.writeMany(a,o)}}class jk{get id(){return this.idTensor.id}constructor(e,t,n,r=-1){this.tensors=e,this.elementShape=t,this.elementDtype=n,null!=e&&e.forEach((e=>{if(n!==e.dtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${e.dtype}`);Sk(t,e.shape,"TensorList shape mismatch: "),Zw(e)})),this.idTensor=JS(0),this.maxNumElements=r,Zw(this.idTensor)}copy(){return new jk([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach((t=>{null!=e&&e.has(t.id)||t.dispose()})),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,t,n=-1){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(-1!==n&&this.tensors.length!==n)throw new Error(`Operation expected a list with ${n} elements but got a list with ${this.tensors.length} elements.`);Sk(e,this.elementShape,"TensorList shape mismatch: ");const r=Ek(this.elementShape,this.tensors,e);return Qw((()=>{const e=this.tensors.map((e=>WS(e,r)));return ZS(e,0)}))}popBack(e,t){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(0===this.size())throw new Error("Trying to pop from an empty list.");const n=Ek(this.elementShape,this.tensors,e),r=this.tensors.pop();return r.kept=!1,Sk(r.shape,e,"TensorList shape mismatch: "),WS(r,n)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(Sk(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Zw(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(-1!==this.maxNumElements&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const t=new jk([],this.elementShape,this.elementDtype,this.maxNumElements);t.tensors.length=e;for(let n=0;n<Math.min(this.tensors.length,e);++n)t.tensors[n]=this.tensors[n];return t}getItem(e,t,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(null==this.tensors[e])throw new Error(`element at index ${e} is null.`);Sk(this.tensors[e].shape,t,"TensorList shape mismatch: ");const r=Ek(this.elementShape,this.tensors,t);return WS(this.tensors[e],r)}setItem(e,t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);Sk(this.elementShape,t.shape,"TensorList shape mismatch: "),Zw(t),null!=this.tensors[e]&&(this.tensors[e].kept=!1),this.tensors[e]=t}gather(e,t,n){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);Sk(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());const r=Ek(this.elementShape,this.tensors,n);return 0===e.length?Kw([],[0].concat(r)):Qw((()=>{const t=e.map((e=>WS(this.tensors[e],r)));return ZS(t,0)}))}concat(e,t){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);Sk(this.elementShape,t,"TensorList shape mismatch: ");const n=Ek(this.elementShape,this.tensors,t);return 0===this.size()?Kw([],[0].concat(n)):Qw((()=>{const e=this.tensors.map((e=>WS(e,n)));return XS(e,0)}))}}function Ak(e,t,n){const[r,i]=xI("fusedOps",e,t,n),o="biasadd"===r,a=!o,s="prelu"===i,l="fusedbatchnorm"===r,c=xI("numArgs",e,t,n);if(o){if(s&&2!==c)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&o&&1!==c)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const u=xI("strides",e,t,n),p=jI(e,t,n),d=xI("dataFormat",e,t,n).toUpperCase(),h=xI("dilations",e,t,n);let[m,f]=xI("args",e,t,n);return a&&(f=m,m=void 0),{stride:u,pad:p,dataFormat:d,dilations:h,biasArg:m,preluArg:f,activationFunc:i,leakyreluAlpha:xI("leakyreluAlpha",e,t,n)}}function Ck(e,t,n){return{boxes:xI("boxes",e,t,n),scores:xI("scores",e,t,n),maxOutputSize:xI("maxOutputSize",e,t,n),iouThreshold:xI("iouThreshold",e,t,n),scoreThreshold:xI("scoreThreshold",e,t,n),softNmsSigma:xI("softNmsSigma",e,t,n)}}class Ok{get id(){return this.handle.id}constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=JS(0),this.tensorMap=new Map,Zw(this.handle)}clearAndClose(){this.tensorMap.forEach((e=>e.dispose())),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return JS(this.size(),"int32")}async import(e,t){this.checkKeyAndValueTensor(e,t);const n=await e.data();return this.tensorMap.forEach((e=>e.dispose())),this.tensorMap.clear(),Qw((()=>{const e=eT(t),r=n.length,i=e.length;av(r===i,(()=>`The number of elements doesn't match, keys has ${r} elements, the values has ${i} elements.`));for(let t=0;t<r;t++){const r=n[t],i=e[t];Zw(i),this.tensorMap.set(r,i)}return this.handle}))}async find(e,t){this.checkKeyAndValueTensor(e,t);const n=await e.data();return Qw((()=>{const e=[];for(let r=0;r<n.length;r++){const i=n[r],o=this.findWithDefault(i,t);e.push(o)}return ZS(e)}))}findWithDefault(e,t){const n=this.tensorMap.get(e);return null!=n?n:t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(t.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${t.dtype}`)}}function Mk(e,t,n,r,i=Qw){const o=((e,t,n)=>{switch(e.category){case"arithmetic":return i((()=>((e,t,n,r=k)=>{switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(xI("a",e,t,n),xI("b",e,t,n))];case"AddN":return[r.addN(xI("tensors",e,t,n))];case"FloorMod":case"Mod":return[r.mod(xI("a",e,t,n),xI("b",e,t,n))];case"Mul":return[r.mul(xI("a",e,t,n),xI("b",e,t,n))];case"RealDiv":case"Div":return[r.div(xI("a",e,t,n),xI("b",e,t,n))];case"DivNoNan":return[r.divNoNan(xI("a",e,t,n),xI("b",e,t,n))];case"FloorDiv":return[r.floorDiv(xI("a",e,t,n),xI("b",e,t,n))];case"Sub":return[r.sub(xI("a",e,t,n),xI("b",e,t,n))];case"Minimum":return[r.minimum(xI("a",e,t,n),xI("b",e,t,n))];case"Maximum":return[r.maximum(xI("a",e,t,n),xI("b",e,t,n))];case"Pow":return[r.pow(xI("a",e,t,n),xI("b",e,t,n))];case"SquaredDifference":return[r.squaredDifference(xI("a",e,t,n),xI("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"basic_math":return i((()=>((e,t,n,r=k)=>{switch(e.op){case"Abs":case"ComplexAbs":return[r.abs(xI("x",e,t,n))];case"Acos":return[r.acos(xI("x",e,t,n))];case"Acosh":return[r.acosh(xI("x",e,t,n))];case"Asin":return[r.asin(xI("x",e,t,n))];case"Asinh":return[r.asinh(xI("x",e,t,n))];case"Atan":return[r.atan(xI("x",e,t,n))];case"Atan2":return[r.atan2(xI("x",e,t,n),xI("y",e,t,n))];case"Atanh":return[r.atanh(xI("x",e,t,n))];case"Ceil":return[r.ceil(xI("x",e,t,n))];case"Complex":return[r.complex(xI("real",e,t,n),xI("imag",e,t,n))];case"Cos":return[r.cos(xI("x",e,t,n))];case"Cosh":return[r.cosh(xI("x",e,t,n))];case"Elu":return[r.elu(xI("x",e,t,n))];case"Erf":return[r.erf(xI("x",e,t,n))];case"Exp":return[r.exp(xI("x",e,t,n))];case"Expm1":return[r.expm1(xI("x",e,t,n))];case"Floor":return[r.floor(xI("x",e,t,n))];case"Log":return[r.log(xI("x",e,t,n))];case"Log1p":return[r.log1p(xI("x",e,t,n))];case"Imag":return[r.imag(xI("x",e,t,n))];case"Neg":return[r.neg(xI("x",e,t,n))];case"Reciprocal":return[r.reciprocal(xI("x",e,t,n))];case"Real":return[r.real(xI("x",e,t,n))];case"Relu":return[r.relu(xI("x",e,t,n))];case"Round":return[r.round(xI("x",e,t,n))];case"Selu":return[r.selu(xI("x",e,t,n))];case"Sigmoid":return[r.sigmoid(xI("x",e,t,n))];case"Sin":return[r.sin(xI("x",e,t,n))];case"Sign":return[r.sign(xI("x",e,t,n))];case"Sinh":return[r.sinh(xI("x",e,t,n))];case"Softplus":return[r.softplus(xI("x",e,t,n))];case"Sqrt":return[r.sqrt(xI("x",e,t,n))];case"Square":return[r.square(xI("x",e,t,n))];case"Tanh":return[r.tanh(xI("x",e,t,n))];case"Tan":return[r.tan(xI("x",e,t,n))];case"ClipByValue":return[r.clipByValue(xI("x",e,t,n),xI("clipValueMin",e,t,n),xI("clipValueMax",e,t,n))];case"Relu6":return[r.relu6(xI("x",e,t,n))];case"Rsqrt":return[r.rsqrt(SI(e.inputNames[0],t,n))];case"LeakyRelu":return[r.leakyRelu(xI("x",e,t,n),xI("alpha",e,t,n))];case"Prelu":return[r.prelu(xI("x",e,t,n),xI("alpha",e,t,n))];case"IsNan":return[r.isNaN(SI(e.inputNames[0],t,n))];case"IsInf":return[r.isInf(SI(e.inputNames[0],t,n))];case"IsFinite":return[r.isFinite(SI(e.inputNames[0],t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"control":return(async(e,t,n)=>{switch(e.op){case"If":case"StatelessIf":{const r=xI("thenBranch",e,t,n),i=xI("elseBranch",e,t,n),o=xI("cond",e,t,n),a=xI("args",e,t,n);return(await o.data())[0]?n.functionMap[r].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap):n.functionMap[i].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=xI("body",e,t,n),i=xI("cond",e,t,n),o=xI("args",e,t,n),a=await n.functionMap[i].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap),s=o.map((e=>e.id));let l=await a[0].data();a.forEach((e=>{e.kept||-1!==s.indexOf(e.id)||e.dispose()}));let c=o;for(;l[0];){const e=c;c=await n.functionMap[r].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);const t=c.map((e=>e.id));e.forEach((e=>{e.kept||-1!==s.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()}));const o=await n.functionMap[i].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);l=await o[0].data(),o.forEach((e=>{e.kept||-1!==s.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()}))}return c}case"LoopCond":return[AI(xI("pred",e,t,n))];case"Switch":{const r=xI("pred",e,t,n);let i=xI("data",e,t,n);return i.kept||(i=AI(i)),(await r.data())[0]?[void 0,i]:[i,void 0]}case"Merge":{const r=e.inputNames.find((e=>void 0!==SI(e,t,n)));return r?[AI(SI(r,t,n))]:void 0}case"Enter":{const r=xI("frameName",e,t,n),i=xI("tensor",e,t,n);return n.enterFrame(r),[AI(i)]}case"Exit":{const r=xI("tensor",e,t,n);return n.exitFrame(),[AI(r)]}case"NextIteration":{const r=xI("tensor",e,t,n);return n.nextIteration(),[AI(r)]}case"TensorArrayV3":{const r=xI("size",e,t,n),i=xI("dtype",e,t,n),o=xI("elementShape",e,t,n),a=xI("dynamicSize",e,t,n),s=xI("clearAfterRead",e,t,n),l=xI("identicalElementShapes",e,t,n),c=xI("name",e,t,n),u=new kk(c,i,r,o,l,a,s);return n.addTensorArray(u),[u.idTensor,JS(1)]}case"TensorArrayWriteV3":{const r=xI("tensorArrayId",e,t,n),i=xI("index",e,t,n),o=xI("tensor",e,t,n),a=n.getTensorArray(r.id);return a.write(i,o),[a.idTensor]}case"TensorArrayReadV3":{const r=xI("tensorArrayId",e,t,n),i=xI("index",e,t,n);return[n.getTensorArray(r.id).read(i)]}case"TensorArrayGatherV3":{const r=xI("tensorArrayId",e,t,n),i=xI("indices",e,t,n),o=xI("dtype",e,t,n);return[n.getTensorArray(r.id).gather(i,o)]}case"TensorArrayScatterV3":{const r=xI("tensorArrayId",e,t,n),i=xI("indices",e,t,n),o=xI("tensor",e,t,n),a=n.getTensorArray(r.id);return a.scatter(i,o),[a.idTensor]}case"TensorArrayConcatV3":{const r=xI("tensorArrayId",e,t,n),i=n.getTensorArray(r.id),o=xI("dtype",e,t,n);return[i.concat(o)]}case"TensorArraySplitV3":{const r=xI("tensorArrayId",e,t,n),i=xI("tensor",e,t,n),o=xI("lengths",e,t,n),a=n.getTensorArray(r.id);return a.split(o,i),[a.idTensor]}case"TensorArraySizeV3":{const r=xI("tensorArrayId",e,t,n);return[JS(n.getTensorArray(r.id).size(),"int32")]}case"TensorArrayCloseV3":{const r=xI("tensorArrayId",e,t,n),i=n.getTensorArray(r.id);return i.clearAndClose(),[i.idTensor]}case"TensorListSetItem":{const r=xI("tensorListId",e,t,n),i=xI("index",e,t,n),o=xI("tensor",e,t,n),a=n.getTensorList(r.id);return a.setItem(i,o),[a.idTensor]}case"TensorListGetItem":{const r=xI("tensorListId",e,t,n),i=xI("index",e,t,n),o=xI("elementShape",e,t,n),a=xI("elementDType",e,t,n);return[n.getTensorList(r.id).getItem(i,o,a)]}case"TensorListScatterV2":case"TensorListScatter":{const r=xI("indices",e,t,n),i=function(e,t,n,r){if(t.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${e.shape[0]}`);const i=Math.max(...t);if(null!=r&&-1!==r&&i>=r)throw new Error(`Max index must be < array size (${i}  vs. ${r})`);const o=new jk([],n,e.dtype,r),a=eT(e,0);return t.forEach(((e,t)=>{o.setItem(e,a[t])})),o}(xI("tensor",e,t,n),r,xI("elementShape",e,t,n),xI("numElements",e,t,n));return n.addTensorList(i),[i.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=xI("elementShape",e,t,n),i=xI("elementDType",e,t,n);let o;o="TensorListReserve"===e.op?"numElements":"maxNumElements";const a=xI(o,e,t,n),s=function(e,t,n,r){return new jk([],e,t,r)}(r,i,0,"TensorListReserve"===e.op?-1:a);return n.addTensorList(s),[s.idTensor]}case"TensorListGather":{const r=xI("tensorListId",e,t,n),i=xI("indices",e,t,n),o=xI("elementShape",e,t,n),a=xI("elementDType",e,t,n);return[n.getTensorList(r.id).gather(i,a,o)]}case"TensorListStack":{const r=xI("tensorListId",e,t,n),i=xI("elementShape",e,t,n),o=xI("elementDType",e,t,n),a=xI("numElements",e,t,n);return[n.getTensorList(r.id).stack(i,o,a)]}case"TensorListFromTensor":{const r=function(e,t,n){const r=e.dtype;if(e.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${e.shape}`);if(e.dtype!==n)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${n}`);Sk(e.shape.slice(1),t,"TensorList shape mismatch: ");const i=eT(e);return new jk(i,t,r)}(xI("tensor",e,t,n),xI("elementShape",e,t,n),xI("elementDType",e,t,n));return n.addTensorList(r),[r.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=xI("tensorListId",e,t,n),i=n.getTensorList(r.id),o=xI("dtype",e,t,n),a=xI("elementShape",e,t,n);return[i.concat(o,a)]}case"TensorListPushBack":{const r=xI("tensorListId",e,t,n),i=xI("tensor",e,t,n),o=n.getTensorList(r.id);return o.pushBack(i),[o.idTensor]}case"TensorListPopBack":{const r=xI("tensorListId",e,t,n),i=xI("elementShape",e,t,n),o=xI("elementDType",e,t,n);return[n.getTensorList(r.id).popBack(i,o)]}case"TensorListSplit":{const r=xI("tensor",e,t,n),i=xI("elementShape",e,t,n),o=function(e,t,n){let r=0;const i=t.map((e=>(r+=e,r)));if(r!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${r}, and tensor's shape is: ${e.shape}`);const o=Ik(e.shape.slice(1),n),a=0===r?0:e.size/r,s=Qw((()=>{const n=[];e=WS(e,[1,r,a]);for(let r=0;r<t.length;++r){const s=[0,0===r?0:i[r-1],0],l=[1,t[r],a];n[r]=WS(QS(e,s,l),o)}return e.dispose(),n})),l=new jk([],n,e.dtype,t.length);for(let e=0;e<s.length;e++)l.setItem(e,s[e]);return l}(r,xI("lengths",e,t,n),i);return n.addTensorList(o),[o.idTensor]}case"TensorListLength":{const r=xI("tensorListId",e,t,n);return[JS(n.getTensorList(r.id).size(),"int32")]}case"TensorListResize":{const r=xI("tensorListId",e,t,n),i=xI("size",e,t,n),o=n.getTensorList(r.id).resize(i);return n.addTensorList(o),[o.idTensor]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n);case"convolution":return i((()=>((e,t,n,r=k)=>{switch(e.op){case"Conv1D":{const i=xI("stride",e,t,n),o=xI("pad",e,t,n),a=xI("dataFormat",e,t,n).toUpperCase(),s=xI("dilation",e,t,n);return[r.conv1d(xI("x",e,t,n),xI("filter",e,t,n),i,o,a,s)]}case"Conv2D":{const i=xI("strides",e,t,n),o=jI(e,t,n),a=xI("dataFormat",e,t,n).toUpperCase(),s=xI("dilations",e,t,n);return[r.conv2d(xI("x",e,t,n),xI("filter",e,t,n),[i[1],i[2]],o,a,[s[1],s[2]])]}case"_FusedConv2D":{const{stride:i,pad:o,dataFormat:a,dilations:s,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:p}=Ak(e,t,n);return[r.fused.conv2d({x:xI("x",e,t,n),filter:xI("filter",e,t,n),strides:[i[1],i[2]],pad:o,dataFormat:a,dilations:[s[1],s[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:p})]}case"FusedDepthwiseConv2dNative":{const{stride:i,pad:o,dataFormat:a,dilations:s,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:p}=Ak(e,t,n);return[r.fused.depthwiseConv2d({x:xI("x",e,t,n),filter:xI("filter",e,t,n),strides:[i[1],i[2]],pad:o,dataFormat:a,dilations:[s[1],s[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:p})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const i=xI("outputShape",e,t,n),o=xI("strides",e,t,n),a=jI(e,t,n);return[r.conv2dTranspose(xI("x",e,t,n),xI("filter",e,t,n),i,[o[1],o[2]],a)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const i=xI("strides",e,t,n),o=jI(e,t,n),a=xI("dilations",e,t,n),s=xI("dataFormat",e,t,n).toUpperCase();return[r.depthwiseConv2d(xI("input",e,t,n),xI("filter",e,t,n),[i[1],i[2]],o,s,[a[1],a[2]])]}case"Conv3D":{const i=xI("strides",e,t,n),o=xI("pad",e,t,n),a=xI("dataFormat",e,t,n).toUpperCase(),s=xI("dilations",e,t,n);return[r.conv3d(xI("x",e,t,n),xI("filter",e,t,n),[i[1],i[2],i[3]],o,a,[s[1],s[2],s[3]])]}case"AvgPool":{const i=xI("strides",e,t,n),o=xI("pad",e,t,n),a=xI("kernelSize",e,t,n);return[r.avgPool(xI("x",e,t,n),[a[1],a[2]],[i[1],i[2]],o)]}case"MaxPool":{const i=xI("strides",e,t,n),o=xI("pad",e,t,n),a=xI("kernelSize",e,t,n);return[r.maxPool(xI("x",e,t,n),[a[1],a[2]],[i[1],i[2]],o)]}case"MaxPoolWithArgmax":{const i=xI("strides",e,t,n),o=xI("pad",e,t,n),a=xI("kernelSize",e,t,n),s=xI("includeBatchInIndex",e,t,n),{result:l,indexes:c}=r.maxPoolWithArgmax(xI("x",e,t,n),[a[1],a[2]],[i[1],i[2]],o,s);return[l,c]}case"AvgPool3D":{const i=xI("strides",e,t,n),o=xI("pad",e,t,n),a=xI("kernelSize",e,t,n);return[r.avgPool3d(xI("x",e,t,n),[a[1],a[2],a[3]],[i[1],i[2],i[3]],o)]}case"MaxPool3D":{const i=xI("strides",e,t,n),o=xI("pad",e,t,n),a=xI("kernelSize",e,t,n);return[r.maxPool3d(xI("x",e,t,n),[a[1],a[2],a[3]],[i[1],i[2],i[3]],o)]}case"Dilation2D":{const i=xI("strides",e,t,n),o=xI("pad",e,t,n),a=xI("dilations",e,t,n),s=i[1],l=i[2],c=a[1],u=a[2];return[r.dilation2d(xI("x",e,t,n),xI("filter",e,t,n),[s,l],o,[c,u],"NHWC")]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"creation":return i((()=>((e,t,n,r=k)=>{switch(e.op){case"Fill":{const i=xI("shape",e,t,n),o=xI("dtype",e,t,n),a=xI("value",e,t,n);return[r.fill(i,a,o)]}case"LinSpace":{const i=xI("start",e,t,n),o=xI("stop",e,t,n),a=xI("num",e,t,n);return[r.linspace(i,o,a)]}case"Multinomial":{const i=xI("logits",e,t,n),o=xI("numSamples",e,t,n),a=xI("seed",e,t,n);return[r.multinomial(i,o,a)]}case"OneHot":{const i=xI("indices",e,t,n),o=xI("depth",e,t,n),a=xI("onValue",e,t,n),s=xI("offValue",e,t,n),l=xI("dtype",e,t,n);return[r.oneHot(i,o,a,s,l)]}case"Ones":return[r.ones(xI("shape",e,t,n),xI("dtype",e,t,n))];case"OnesLike":return[r.onesLike(xI("x",e,t,n))];case"RandomStandardNormal":return[r.randomStandardNormal(xI("shape",e,t,n),xI("dtype",e,t,n),xI("seed",e,t,n))];case"RandomUniform":return[r.randomUniform(xI("shape",e,t,n),xI("minval",e,t,n),xI("maxval",e,t,n),xI("dtype",e,t,n))];case"RandomUniformInt":return[r.randomUniformInt(xI("shape",e,t,n),xI("minval",e,t,n),xI("maxval",e,t,n),xI("seed",e,t,n))];case"Range":{const i=xI("start",e,t,n),o=xI("stop",e,t,n),a=xI("step",e,t,n);return[r.range(i,o,a,xI("dtype",e,t,n))]}case"TruncatedNormal":{const i=xI("shape",e,t,n),o=xI("mean",e,t,n),a=xI("stdDev",e,t,n),s=xI("seed",e,t,n);return[r.truncatedNormal(i,o,a,xI("dtype",e,t,n),s)]}case"Zeros":return[r.zeros(xI("shape",e,t,n),xI("dtype",e,t,n))];case"ZerosLike":return[r.zerosLike(xI("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"dynamic":return(async(e,t,n,r,i=k)=>{switch(e.op){case"NonMaxSuppressionV5":{const{boxes:r,scores:o,maxOutputSize:a,iouThreshold:s,scoreThreshold:l,softNmsSigma:c}=Ck(e,t,n),u=await i.image.nonMaxSuppressionWithScoreAsync(r,o,a,s,l,c);return[u.selectedIndices,u.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:r,scores:o,maxOutputSize:a,iouThreshold:s,scoreThreshold:l}=Ck(e,t,n),c=xI("padToMaxOutputSize",e,t,n),u=await i.image.nonMaxSuppressionPaddedAsync(r,o,a,s,l,c);return[u.selectedIndices,u.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:r,scores:o,maxOutputSize:a,iouThreshold:s,scoreThreshold:l}=Ck(e,t,n);return[await i.image.nonMaxSuppressionAsync(r,o,a,s,l)]}case"Where":{const r=i.cast(xI("condition",e,t,n),"bool"),o=[await i.whereAsync(r)];return r.dispose(),o}case"ListDiff":return i.setdiff1dAsync(xI("x",e,t,n),xI("y",e,t,n));default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n);case"evaluation":return i((()=>((e,t,n,r=k)=>{switch(e.op){case"LowerBound":{const i=xI("sortedSequence",e,t,n),o=xI("values",e,t,n);return[r.lowerBound(i,o)]}case"TopKV2":{const i=xI("x",e,t,n),o=xI("k",e,t,n),a=xI("sorted",e,t,n),s=r.topk(i,o,a);return[s.values,s.indices]}case"UpperBound":{const i=xI("sortedSequence",e,t,n),o=xI("values",e,t,n);return[r.upperBound(i,o)]}case"Unique":{const i=xI("x",e,t,n),o=r.unique(i);return[o.values,o.indices]}case"UniqueV2":{const i=xI("x",e,t,n),o=xI("axis",e,t,n),a=r.unique(i,o);return[a.values,a.indices]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"image":return i((()=>((e,t,n,r=k)=>{switch(e.op){case"ResizeBilinear":{const i=xI("images",e,t,n),o=xI("size",e,t,n),a=xI("alignCorners",e,t,n),s=xI("halfPixelCenters",e,t,n);return[r.image.resizeBilinear(i,[o[0],o[1]],a,s)]}case"ResizeNearestNeighbor":{const i=xI("images",e,t,n),o=xI("size",e,t,n),a=xI("alignCorners",e,t,n),s=xI("halfPixelCenters",e,t,n);return[r.image.resizeNearestNeighbor(i,[o[0],o[1]],a,s)]}case"CropAndResize":{const i=xI("image",e,t,n),o=xI("boxes",e,t,n),a=xI("boxInd",e,t,n),s=xI("cropSize",e,t,n),l=xI("method",e,t,n),c=xI("extrapolationValue",e,t,n);return[r.image.cropAndResize(i,o,a,s,l,c)]}case"ImageProjectiveTransformV3":{const i=xI("images",e,t,n),o=xI("transforms",e,t,n),a=xI("outputShape",e,t,n),s=xI("fillValue",e,t,n),l=xI("interpolation",e,t,n),c=xI("fillMode",e,t,n);return[r.image.transform(i,o,l.toLowerCase(),c.toLowerCase(),s,a)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"graph":return i((()=>((e,t,n,r=k)=>{switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":const i=xI("default",e,t,n);return[SI(e.name,t,n)||i];case"Placeholder":return[SI(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":case"Snapshot":return[AI(xI("x",e,t,n))];case"IdentityN":return xI("x",e,t,n).map((e=>AI(e)));case"Shape":return[r.tensor1d(xI("x",e,t,n).shape,"int32")];case"ShapeN":return xI("x",e,t,n).map((e=>r.tensor1d(e.shape)));case"Size":return[r.scalar(xI("x",e,t,n).size,"int32")];case"Rank":return[r.scalar(xI("x",e,t,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const o=xI("x",e,t,n),a=xI("data",e,t,n),s=xI("message",e,t,n),l=xI("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(s);for(let e=0;e<a.length;e++)console.log(Array.prototype.slice.call(a[e].dataSync()).slice(0,l));return[o];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"logical":return i((()=>((e,t,n,r=k)=>{switch(e.op){case"Equal":return[r.equal(xI("a",e,t,n),xI("b",e,t,n))];case"NotEqual":return[r.notEqual(xI("a",e,t,n),xI("b",e,t,n))];case"Greater":return[r.greater(xI("a",e,t,n),xI("b",e,t,n))];case"GreaterEqual":return[r.greaterEqual(xI("a",e,t,n),xI("b",e,t,n))];case"Less":return[r.less(xI("a",e,t,n),xI("b",e,t,n))];case"LessEqual":return[r.lessEqual(xI("a",e,t,n),xI("b",e,t,n))];case"LogicalAnd":return[r.logicalAnd(xI("a",e,t,n),xI("b",e,t,n))];case"LogicalNot":return[r.logicalNot(xI("a",e,t,n))];case"LogicalOr":return[r.logicalOr(xI("a",e,t,n),xI("b",e,t,n))];case"Select":case"SelectV2":return[r.where(xI("condition",e,t,n),xI("a",e,t,n),xI("b",e,t,n))];case"BitwiseAnd":return[r.bitwiseAnd(xI("a",e,t,n),xI("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"matrices":return i((()=>((e,t,n,r=k)=>{switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(xI("a",e,t,n),xI("b",e,t,n),xI("transposeA",e,t,n),xI("transposeB",e,t,n))];case"Einsum":return[r.einsum(xI("equation",e,t,n),...xI("tensors",e,t,n))];case"Transpose":return[r.transpose(xI("x",e,t,n),xI("perm",e,t,n))];case"_FusedMatMul":const[i,o]=xI("fusedOps",e,t,n),a="biasadd"===i,s="prelu"===o,l=xI("numArgs",e,t,n),c=xI("leakyreluAlpha",e,t,n);if(a){if(s&&2!==l)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&1!==l)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[u,p]=xI("args",e,t,n);return[r.fused.matMul({a:xI("a",e,t,n),b:xI("b",e,t,n),transposeA:xI("transposeA",e,t,n),transposeB:xI("transposeB",e,t,n),bias:u,activation:o,preluActivationWeights:p,leakyreluAlpha:c})];case"MatrixBandPart":return[r.linalg.bandPart(xI("a",e,t,n),xI("numLower",e,t,n),xI("numUpper",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"normalization":return i((()=>((e,t,n,r=k)=>{switch(e.op){case"EuclideanNorm":return[r.euclideanNorm(xI("x",e,t,n),xI("axis",e,t,n),xI("keepDims",e,t,n))];case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[r.batchNorm(xI("x",e,t,n),xI("mean",e,t,n),xI("variance",e,t,n),xI("offset",e,t,n),xI("scale",e,t,n),xI("epsilon",e,t,n))];case"LRN":return[r.localResponseNormalization(xI("x",e,t,n),xI("radius",e,t,n),xI("bias",e,t,n),xI("alpha",e,t,n),xI("beta",e,t,n))];case"Softmax":return[r.softmax(xI("x",e,t,n))];case"LogSoftmax":return[r.logSoftmax(xI("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"ragged":return i((()=>((e,t,n,r=k)=>{switch(e.op){case"RaggedGather":{const{outputNestedSplits:i,outputDenseValues:o}=r.raggedGather(xI("paramsNestedSplits",e,t,n),xI("paramsDenseValues",e,t,n),xI("indices",e,t,n),xI("outputRaggedRank",e,t,n));return i.concat(o)}case"RaggedRange":{const{rtNestedSplits:i,rtDenseValues:o}=r.raggedRange(xI("starts",e,t,n),xI("limits",e,t,n),xI("splits",e,t,n));return[i,o]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(xI("shape",e,t,n),xI("values",e,t,n),xI("defaultValue",e,t,n),xI("rowPartitionTensors",e,t,n),xI("rowPartitionTypes",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"reduction":return i((()=>((e,t,n,r=k)=>{switch(e.op){case"Max":{const i=xI("axis",e,t,n),o=xI("keepDims",e,t,n);return[r.max(xI("x",e,t,n),i,o)]}case"Mean":{const i=xI("axis",e,t,n),o=xI("keepDims",e,t,n);return[r.mean(xI("x",e,t,n),i,o)]}case"Min":{const i=xI("axis",e,t,n),o=xI("keepDims",e,t,n);return[r.min(xI("x",e,t,n),i,o)]}case"Sum":{const i=xI("axis",e,t,n),o=xI("keepDims",e,t,n);return[r.sum(xI("x",e,t,n),i,o)]}case"All":{const i=xI("axis",e,t,n),o=xI("keepDims",e,t,n);return[r.all(xI("x",e,t,n),i,o)]}case"Any":{const i=xI("axis",e,t,n),o=xI("keepDims",e,t,n);return[r.any(xI("x",e,t,n),i,o)]}case"ArgMax":{const i=xI("axis",e,t,n);return[r.argMax(xI("x",e,t,n),i)]}case"ArgMin":{const i=xI("axis",e,t,n);return[r.argMin(xI("x",e,t,n),i)]}case"Prod":{const i=xI("axis",e,t,n),o=xI("keepDims",e,t,n);return[r.prod(xI("x",e,t,n),i,o)]}case"Cumprod":{const i=xI("axis",e,t,n),o=xI("exclusive",e,t,n),a=xI("reverse",e,t,n);return[r.cumprod(xI("x",e,t,n),i,o,a)]}case"Cumsum":{const i=xI("axis",e,t,n),o=xI("exclusive",e,t,n),a=xI("reverse",e,t,n);return[r.cumsum(xI("x",e,t,n),i,o,a)]}case"Bincount":const i=xI("x",e,t,n),o=xI("weights",e,t,n),a=xI("size",e,t,n);return[r.bincount(i,o,a)];case"DenseBincount":{const i=xI("x",e,t,n),o=xI("weights",e,t,n),a=xI("size",e,t,n),s=xI("binaryOutput",e,t,n);return[r.denseBincount(i,o,a,s)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"slice_join":return i((()=>((e,t,n,r=k)=>{switch(e.op){case"ConcatV2":case"Concat":{const i=xI("n",e,t,n),o=xI("axis",e,t,n);let a=xI("tensors",e,t,n);return a=a.slice(0,i),[r.concat(a,o)]}case"Gather":{const i=xI("x",e,t,n),o=xI("indices",e,t,n);return[r.gather(i,r.cast(o,"int32"),0)]}case"GatherV2":{const i=xI("axis",e,t,n),o=xI("batchDims",e,t,n),a=xI("x",e,t,n),s=xI("indices",e,t,n);return[r.gather(a,r.cast(s,"int32"),i,o)]}case"Reverse":{const i=xI("dims",e,t,n),o=[];for(let e=0;e<i.length;e++)i[e]&&o.push(e);const a=xI("x",e,t,n);return[r.reverse(a,o)]}case"ReverseV2":{const i=xI("axis",e,t,n),o=xI("x",e,t,n);return[r.reverse(o,i)]}case"Slice":{const i=xI("begin",e,t,n),o=xI("size",e,t,n);return[r.slice(xI("x",e,t,n),i,o)]}case"StridedSlice":{const i=xI("begin",e,t,n),o=xI("end",e,t,n),a=xI("strides",e,t,n),s=xI("beginMask",e,t,n),l=xI("endMask",e,t,n),c=xI("ellipsisMask",e,t,n),u=xI("newAxisMask",e,t,n),p=xI("shrinkAxisMask",e,t,n),d=xI("x",e,t,n);return[r.stridedSlice(d,i,o,a,s,l,c,u,p)]}case"Pack":return Qw((()=>{const i=xI("axis",e,t,n),o=xI("tensors",e,t,n),a=o[0].shape,s=r.squeeze(o[0]).shape,l=o.map((e=>{const t=cv(e.shape,a);if(!t&&!cv(r.squeeze(e).shape,s))throw new Error("the input tensors shape does not match");return t?e:r.reshape(e,a)}));return[r.stack(l,i)]}));case"Unpack":{const i=xI("axis",e,t,n),o=xI("tensor",e,t,n);return r.unstack(o,i)}case"Tile":{const i=xI("reps",e,t,n);return[r.tile(xI("x",e,t,n),i)]}case"Split":case"SplitV":{const i=xI("axis",e,t,n),o=xI("numOrSizeSplits",e,t,n),a=xI("x",e,t,n);return r.split(a,o,i)}case"ScatterNd":{const i=xI("indices",e,t,n),o=xI("values",e,t,n),a=xI("shape",e,t,n);return[r.scatterND(i,o,a)]}case"GatherNd":{const i=xI("x",e,t,n),o=xI("indices",e,t,n);return[r.gatherND(i,o)]}case"SparseToDense":{const i=xI("sparseIndices",e,t,n),o=xI("outputShape",e,t,n),a=xI("sparseValues",e,t,n),s=xI("defaultValue",e,t,n);return[r.sparseToDense(i,a,o,a.dtype===s.dtype?s:r.cast(s,a.dtype))]}case"TensorScatterUpdate":{const i=xI("indices",e,t,n),o=xI("values",e,t,n),a=xI("tensor",e,t,n);return[r.tensorScatterUpdate(a,i,o)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"sparse":return i((()=>((e,t,n,r=k)=>{switch(e.op){case"SparseFillEmptyRows":{const{outputIndices:i,outputValues:o,emptyRowIndicator:a,reverseIndexMap:s}=r.sparse.sparseFillEmptyRows(xI("indices",e,t,n),xI("values",e,t,n),xI("denseShape",e,t,n),xI("defaultValue",e,t,n));return[i,o,a,s]}case"SparseReshape":{const{outputIndices:i,outputShape:o}=r.sparse.sparseReshape(xI("inputIndices",e,t,n),xI("inputShape",e,t,n),xI("newShape",e,t,n));return[i,o]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(xI("data",e,t,n),xI("indices",e,t,n),xI("segmentIds",e,t,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(xI("data",e,t,n),xI("indices",e,t,n),xI("segmentIds",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"spectral":return i((()=>((e,t,n,r=k)=>{switch(e.op){case"FFT":return[r.fft(xI("x",e,t,n))];case"IFFT":return[r.ifft(xI("x",e,t,n))];case"RFFT":return[r.rfft(xI("x",e,t,n))];case"IRFFT":return[r.irfft(xI("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"string":return i((()=>((e,t,n,r=k)=>{switch(e.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(xI("input",e,t,n),xI("pattern",e,t,n),xI("rewrite",e,t,n),xI("replaceGlobal",e,t,n))];case"StringNGrams":{const{nGrams:i,nGramsSplits:o}=r.string.stringNGrams(xI("data",e,t,n),xI("dataSplits",e,t,n),xI("separator",e,t,n),xI("nGramWidths",e,t,n),xI("leftPad",e,t,n),xI("rightPad",e,t,n),xI("padWidth",e,t,n),xI("preserveShortSequences",e,t,n));return[i,o]}case"StringSplit":{const{indices:i,values:o,shape:a}=r.string.stringSplit(xI("input",e,t,n),xI("delimiter",e,t,n),xI("skipEmpty",e,t,n));return[i,o,a]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(xI("input",e,t,n),xI("numBuckets",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"transformation":return i((()=>((e,t,n,r=k)=>{switch(e.op){case"Cast":return[r.cast(xI("x",e,t,n),xI("dtype",e,t,n))];case"ExpandDims":{const i=xI("axis",e,t,n);return[r.expandDims(xI("x",e,t,n),i)]}case"Squeeze":{const i=xI("axis",e,t,n);return[r.squeeze(xI("x",e,t,n),i)]}case"Reshape":return[r.reshape(xI("x",e,t,n),xI("shape",e,t,n))];case"EnsureShape":return[r.ensureShape(xI("x",e,t,n),xI("shape",e,t,n))];case"MirrorPad":return[r.mirrorPad(xI("x",e,t,n),xI("padding",e,t,n),xI("mode",e,t,n))];case"PadV2":case"Pad":return[r.pad(xI("x",e,t,n),xI("padding",e,t,n),xI("constantValue",e,t,n))];case"SpaceToBatchND":{const i=xI("blockShape",e,t,n),o=xI("paddings",e,t,n);return[r.spaceToBatchND(xI("x",e,t,n),i,o)]}case"BatchToSpaceND":{const i=xI("blockShape",e,t,n),o=xI("crops",e,t,n);return[r.batchToSpaceND(xI("x",e,t,n),i,o)]}case"DepthToSpace":{const i=xI("blockSize",e,t,n),o=xI("dataFormat",e,t,n).toUpperCase();return[r.depthToSpace(xI("x",e,t,n),i,o)]}case"BroadcastTo":return[r.broadcastTo(xI("x",e,t,n),xI("shape",e,t,n))];case"BroadcastArgs":return[r.broadcastArgs(xI("s0",e,t,n),xI("s1",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n)));case"hash_table":return(async(e,t,n,r)=>{switch(e.op){case"HashTable":case"HashTableV2":{const i=r.getHashTableHandleByName(e.name);if(null!=i)return[i];{const i=xI("keyDType",e,t,n),o=xI("valueDType",e,t,n),a=new Ok(i,o);return r.addHashTable(e.name,a),[a.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const i=xI("tableHandle",e,t,n,r),o=xI("keys",e,t,n),a=xI("values",e,t,n),s=r.getHashTableById(i.id);return[await s.import(o,a)]}case"LookupTableFind":case"LookupTableFindV2":{const i=xI("tableHandle",e,t,n,r),o=xI("keys",e,t,n),a=xI("defaultValue",e,t,n),s=r.getHashTableById(i.id);return[await s.find(o,a)]}case"LookupTableSize":case"LookupTableSizeV2":{const i=xI("tableHandle",e,t,n,r);return[r.getHashTableById(i.id).tensorSize()]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n,r);case"custom":const o=wI(e.op);if(o&&o.customExecutor)return o.customExecutor(new uk(e,t,n));throw TypeError(`Custom op ${e.op} is not registered.`);default:throw TypeError(`Unknown op '${e.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(e,t,n);return Mv(o)?o.then((e=>[].concat(e))):[].concat(o)}class Nk{constructor(e={},t={},n={},r={},i){this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=n,this.functionMap=r,this.parseNodeNameCache=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let t=0;t<this.contexts.length-1;t++){const n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map((e=>0===e.id&&0===e.iterationId?"":`${e.frameName}-${e.iterationId}`)).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}nextIteration(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");{this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(const t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)}}function Rk(e,t,n,r){const i=new Set,o=[];let a=null,s=null;const l=new Set,c=new Set(Object.keys(e).map((e=>kI(e)[0])));r=r||[];const u=new Set(r.map((e=>kI(e.name)[0]))),p=[...t];for(;p.length>0;){const e=p.pop();(Bk(e)||Uk(e)||Vk(e))&&null==a&&(a=e,s=a.children.map((e=>e.name)).filter((e=>i.has(e)))),i.add(e.name),null==n[e.name]&&(c.has(e.name)||u.has(e.name)||(0!==e.inputs.length?e.inputs.forEach((e=>{l.has(e.name)||(l.add(e.name),p.push(e))})):o.push(e.name)))}return{inputs:e,outputs:t,usedNodes:i,missingInputs:o,dynamicNode:a,syncInputs:s}}class Pk extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}}const Dk=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),Lk=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),Fk=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function Bk(e){return Dk.has(e.op)}function Uk(e){return Lk.has(e.op)}function Vk(e){return Fk.has(e.op)}class Gk{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const t=Object.keys(e).map((t=>e[t].map((e=>e.id))));this._weightIds=[].concat(...t),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map((e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0})))}get outputs(){return this._outputs.map((e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0})))}get inputNodes(){return this._inputs.map((e=>e.signatureKey||e.name))}get outputNodes(){return this._outputs.map((e=>{const t=e.signatureKey||e.name;return e.defaultOutput?`${t}:${e.defaultOutput}`:t}))}get functions(){return Object.keys(this._functions).reduce(((e,t)=>(e[t]=this._functions[t].signature,e)),{})}constructor(e,t){this.graph=e,this.parent=t,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,null!=e.functions&&Object.keys(e.functions).forEach((t=>{this._functionExecutorMap[t]=new Gk(e.functions[t],this)}))}getCompilationKey(e,t){const n=e.map((e=>e.name)).sort(),r=t.map((e=>e.name)).sort();return n.join(this.SEPARATOR)+"--"+r.join(this.SEPARATOR)}compile(e,t){const n=Rk(e,t,this.weightMap,this._initNodes),{missingInputs:r,dynamicNode:i,syncInputs:o}=n;if(null!=i)throw new Error(`This execution contains the node '${i.name}', which has the dynamic op '${i.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${o}]`);if(r.length>0){const n=t.map((e=>e.name)),i=Object.keys(e);throw new Error(`Cannot compute the outputs [${n}] from the provided inputs [${i}]. Missing the following inputs: [${r}]`)}const a=function(e,t){const{usedNodes:n,inputs:r}=t,i=Object.keys(r).map((e=>kI(e)[0])).map((t=>e.nodes[t])),o=e.initNodes||[],a=e=>n.has("string"==typeof e?e:e.name);function s(e){return[...new Map(e.map((e=>[e.name,e]))).values()]}const l=s([...i,...e.weights,...o]).filter(a),c=s([...l,...Object.values(e.nodes)]).filter(a),u=new Map(c.map((e=>[e.name,e]))),p={};for(const e of c){p[e.name]=p[e.name]||0;for(const t of e.children)a(t)||(p[t.name]=Number.POSITIVE_INFINITY),p[t.name]=(p[t.name]||0)+1}const d=Object.entries(p).filter((([,e])=>0===e)).map((([e])=>e)),h=[...d];for(;d.length>0;){const e=d.pop(),t=u.get(e);for(const e of t.children.filter(a))0==--p[e.name]&&(h.push(e.name),d.push(e.name))}const m=function(e,t){const n=new Map(e.map((e=>[e.name,e]))),r=t.map((e=>e.name)),i=new Set(r);for(;r.length>0;){const e=r.pop(),t=n.get(e);for(const e of t.children)n.has(e.name)&&!i.has(e.name)&&(i.add(e.name),r.push(e.name))}return e.filter((e=>i.has(e.name)))}(h.map((e=>u.get(e))),l);return function(e,t){const n=new Map(e.map(((e,t)=>[e.name,t]))),r=new Set(t.map((e=>e.name))),i=e=>r.has("string"==typeof e?e:e.name),o=new Set(e.map((e=>e.name))),a=e=>o.has("string"==typeof e?e:e.name);for(const t of e){for(const e of t.children.filter(a)){if(!n.has(e.name))throw new Pk(`Child ${e.name} of node ${t.name} is unreachable.`);if(n.get(t.name)>n.get(e.name))throw new Pk(`Node ${t.name} is scheduled to run after its child ${e.name}.`)}if(!i(t))for(const e of t.inputs){if(!n.has(e.name))throw new Pk(`Input ${e.name} of node ${t.name} is unreachable.`);if(n.get(e.name)>n.get(t.name))throw new Pk(`Node ${t.name} is scheduled to run before its input ${e.name}.`)}}}(m,l),m}(this.graph,n),s=function(e){const t=new Map(e.map(((e,t)=>[e.name,t]))),n=Number.MAX_SAFE_INTEGER,r=e.map(((e,t)=>Bk(e)?n:t)),i=e=>{const n=r[t.get(e.name)];return null==n?-1:n},o=e.map(((e,t)=>e.children.map(i).reduce(((e,t)=>Math.max(e,t)),r[t]))),a=new Map;for(let t=0;t<e.length;++t){const r=o[t];if(r===n)continue;const i=e[t],s=e[r];a.has(s.name)||a.set(s.name,[]),a.get(s.name).push(i)}return a}(a);return{orderedNodes:a,nodeLiveUntilMap:s}}cloneAndKeepTensor(e){if(null==e)return null;const t=e.clone();return Zw(t),t}cloneTensorList(e){if(!e)return null;const t=e.map((e=>this.cloneAndKeepTensor(e)));return t}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map((([e,t])=>[e,this.cloneTensorList(t)])))}execute(e,t){this.disposeIntermediateTensors(),e=this.mapInputs(e);const n=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);const r=n.map((e=>this.graph.nodes[kI(e)[0]])),i=t.map((e=>kI(e)[0])),o=new Set(i);let a=i.map((e=>this.graph.nodes[e]));0===a.length&&(a=this._outputs);const s=this.getCompilationKey(r,a);let l=this.compiledMap.get(s);null==l&&(l=this.compile(e,a),this.compiledMap.set(s,l));try{this.keepIntermediateTensors=Dv().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(e){this.keepIntermediateTensors=!1,console.warn(e.message)}const c={},u={};return Qw((()=>{const n=new Nk(this.weightMap,c,u,this.functionExecutorMap,this.parseNodeNameCache),r=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach((t=>{const[i,o]=kI(t,n),a=[];a[o]=e[t],r[i]=a,this.keepIntermediateTensors&&(this.clonedTensorsMap[i]=this.cloneTensorList(a))}));const i=this.getFrozenTensorIds(r),{orderedNodes:a,nodeLiveUntilMap:s}=l;for(const e of a){if(r[e.name])continue;const t=Mk(e,r,n,this._resourceManager);if(Mv(t))throw new Error(`The execution of the op '${e.op}' returned a promise. Please use model.executeAsync() instead.`);r[e.name]=t,this.keepIntermediateTensors&&(this.clonedTensorsMap[e.name]=this.cloneTensorList(t)),this.checkTensorForDisposalWithNodeLiveUntilInfo(e,r,n,i,o,s.get(e.name))}return null==this.parent&&n.dispose(i),t.map((e=>SI(e,r,n)))}))}getFrozenTensorIds(e){const t=[].concat.apply([],Object.keys(e).map((t=>e[t])).map((e=>e.map((e=>e.id)))));return new Set(t)}checkTensorForDisposal(e,t,n,r,i,o,a){if(!Bk(t)&&!o.has(e)){for(const r of n[e])null!=r&&(a[r.id]=(a[r.id]||0)+t.children.length);for(const e of t.inputs){if(Bk(e))continue;const t=TI(e.name,n,r);if(null!=t)for(const e of t){if(!e||e.kept||i.has(e.id))continue;const t=a[e.id];1===t?(e.dispose(),delete a[e.id]):null!=t&&a[e.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,t,n,r,i,o){function a(e){return Bk(e)||i.has(e.name)}if(!Bk(e)&&null!=o)for(const e of o){if(a(e))continue;const i=TI(e.name,t,n);for(const e of i)!e||e.kept||r.has(e.id)||e.dispose()}}async executeAsync(e,t){return this._executeAsync(e,t)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach((e=>{for(const t of e)t&&!t.isDisposed&&t.dispose()})),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,t,n=!1,r={},i={}){this.disposeIntermediateTensors(),n||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t));try{this.keepIntermediateTensors=Dv().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(e){this.keepIntermediateTensors=!1,console.warn(e.message)}const o=new Nk(this.weightMap,r,i,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const a=await this.executeWithControlFlow(e,o,t,n),s=t.map((e=>SI(e,a,o))),l=s.map((e=>e.id)),c=Object.keys(e).map((t=>e[t].id)),u=new Set([...l,...c,...this.weightIds]);return Object.values(a).forEach((e=>{e.forEach((e=>{!e||e.isDisposed||u.has(e.id)||e.dispose()}))})),null==this.parent&&o.dispose(u),s}async executeFunctionAsync(e,t,n){const r=e.reduce(((e,t,n)=>(e[this.inputs[n].name]=t,e)),{});return this._executeAsync(r,this.outputNodes,!0,t,n)}async executeWithControlFlow(e,t,n,r){const i=Object.keys(e),o=i.map((e=>this.graph.nodes[kI(e)[0]])),a=n.map((e=>kI(e)[0])),s=new Set(a);let l=a.map((e=>this.graph.nodes[e]));0===l.length&&(l=this._outputs);const{usedNodes:c,missingInputs:u,dynamicNode:p,syncInputs:d}=Rk(e,l,this.weightMap,this._initNodes),h=[...o,...this.graph.weights,...this._initNodes||[]].map((e=>({node:e,contexts:t.currentContext}))),m=Object.assign({},this.weightMap);Object.keys(e).forEach((t=>{const[n,r]=kI(t),i=[];i[r]=e[t],m[n]=i}));const f={},g=this.getFrozenTensorIds(m),y={};for(;h.length>0;){const e=this.processStack(o,h,t,m,y,g,s,f,c);await Promise.all(e)}null!=p||r||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const _=l.filter((e=>!Bk(e)&&!SI(e.name,m,t))).map((e=>e.name));if(_.length>0){let e="";throw null!=p&&(e=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${d}]`),new Error(`Cannot compute the outputs [${_}] from the provided inputs [${i}]. Consider providing the following inputs: [${u}]. ${e}`)}return m}processStack(e,t,n,r,i,o,a,s,l){const c=[];for(;t.length>0;){const e=t.pop();n.currentContext=e.contexts;let u="";if("Enter"===e.node.op&&xI("isConstant",e.node,r,n)&&([u]=EI(e.node.name,n)),null==r[e.node.name]){const p=Mk(e.node,r,n,this._resourceManager);u||([u]=EI(e.node.name,n));const d=n.currentContext;Mv(p)?c.push(p.then((c=>(r[u]=c,this.keepIntermediateTensors&&(this.clonedTensorsMap[u]=this.cloneTensorList(c)),n.currentContext=d,this.checkTensorForDisposal(u,e.node,r,n,o,a,s),this.processChildNodes(e.node,t,n,r,i,l),c)))):(r[u]=p,this.keepIntermediateTensors&&(this.clonedTensorsMap[u]=this.cloneTensorList(p)),this.checkTensorForDisposal(u,e.node,r,n,o,a,s),this.processChildNodes(e.node,t,n,r,i,l))}else this.processChildNodes(e.node,t,n,r,i,l)}return c}processChildNodes(e,t,n,r,i,o){e.children.forEach((e=>{const[a]=EI(e.name,n);!i[a]&&o.has(e.name)&&("Merge"===e.op?e.inputNames.some((e=>!!SI(e,r,n)))&&(i[a]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((e=>!!SI(e,r,n)))&&(i[a]=!0,t.push({contexts:n.currentContext,node:e})))}))}dispose(){Object.keys(this.weightMap).forEach((e=>this.weightMap[e].forEach((e=>e.dispose()))))}checkInputShapeAndType(e){Object.keys(e).forEach((t=>{const n=e[t],[r]=kI(t),i=this.graph.nodes[r];if(i.attrParams.shape&&i.attrParams.shape.value){const e=i.attrParams.shape.value;av(e.length===n.shape.length&&n.shape.every(((t,n)=>-1===e[n]||e[n]===t)),(()=>`The shape of dict['${i.name}'] provided in model.execute(dict) must be [${e}], but was [${n.shape}]`))}i.attrParams.dtype&&i.attrParams.dtype.value&&av(n.dtype===i.attrParams.dtype.value,(()=>`The dtype of dict['${i.name}'] provided in model.execute(dict) must be ${i.attrParams.dtype.value}, but was ${n.dtype}`))}))}mapInputs(e){var t,n;const r={};for(const i in e){const o=null===(n=null===(t=this._signature)||void 0===t?void 0:t.inputs)||void 0===n?void 0:n[i];null!=o?r[o.name]=e[i]:r[i]=e[i]}return r}checkInputs(e){const t=Object.keys(e).filter((e=>{const[t]=kI(e);return null==this.graph.nodes[t]}));if(t.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${t}] that are not part of graph`)}mapOutputs(e){return e.map((e=>{var t,n;const r=null===(n=null===(t=this._signature)||void 0===t?void 0:t.outputs)||void 0===n?void 0:n[e];return null!=r?r.name:e}),{})}checkOutputs(e){e.forEach((e=>{const[t]=kI(e);if(!this.graph.nodes[t])throw new Error(`The output '${e}' is not found in the graph`)}))}}class zk{constructor(e={},t={}){this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}class $k{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,t={},n=i){this.modelUrl=e,this.loadOptions=t,this.version="n/a",this.io=n,null==t&&(this.loadOptions={}),this.resourceManager=new zk}findIOHandler(){const e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const t=this.io.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error(`Found more than one (${t.length}) load handlers for URL '${[e]}'`);this.handler=t[0]}}load(){if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return Mv(e)?e.then((e=>null==e.getWeightStream?this.loadSync(e):this.loadStreaming(e))):this.loadSync(e)}loadSync(e){const t=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,t)}async loadStreaming(e){if(null==e.getWeightStream)throw new Error("Model artifacts missing streamWeights function");const t=await lx(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,t)}loadWithWeightMap(e,t){this.artifacts=e;const n=this.artifacts.modelTopology;let r=this.artifacts.signature;if(null!=this.artifacts.userDefinedMetadata){const e=this.artifacts.userDefinedMetadata;null!=e.signature&&(r=e.signature),null!=e.structuredOutputKeys&&(this.structuredOutputKeys=e.structuredOutputKeys)}if(this.signature=r,this.version=`${n.versions.producer}.${n.versions.minConsumer}`,this.executor=new Gk(XI.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(t),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){const t=XI.Instance.transformGraph(e.modelInitializer);this.initializer=new Gk(t),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,t){if("string"==typeof e){const t=this.io.getSaveHandlers(e);if(0===t.length)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(t.length>1)throw new Error(`Found more than one (${t.length}) save handlers for URL '${e}'`);e=t[0]}if(null==e.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const t={};return(e instanceof gw?[e]:e).forEach(((e,n)=>t[this.structuredOutputKeys[n]]=e)),t}return e}predict(e,t){const n=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(n)}async predictAsync(e,t){const n=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(n)}normalizeInputs(e){var t;if(!(e instanceof gw||Array.isArray(e))){const n=null===(t=this.signature)||void 0===t?void 0:t.inputs;if(null!=n)for(const t in n){const r=n[t];null!=r.resourceId&&(e[t]=this.resourceIdToCapturedInput[r.resourceId])}return e}e=Array.isArray(e)?e:[e];const n=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+n!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-n} non-resource placeholders, while there are ${e.length} input tensors provided.`);let r=0;return this.inputNodes.reduce(((t,n)=>{var i,o,a;const s=null===(a=null===(o=null===(i=this.signature)||void 0===i?void 0:i.inputs)||void 0===o?void 0:o[n])||void 0===a?void 0:a.resourceId;return t[n]=null!=s?this.resourceIdToCapturedInput[s]:e[r++],t}),{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const t=this.initializerSignature.outputs,n=Object.keys(t);for(let r=0;r<n.length;r++){const i=t[n[r]];this.resourceIdToCapturedInput[i.resourceId]=e[r]}}}execute(e,t){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const n=this.executor.execute(e,t);return n.length>1?n:n[0]}async executeAsync(e,t){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);const n=await this.executor.executeAsync(e,t);return n.length>1?n:n[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce(((t,n)=>(t[n]=[e[n]],t)),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&Aw(this.resourceIdToCapturedInput).forEach((e=>e.dispose()))),this.resourceManager.dispose()}}async function qk(e,t={},n=i){if(null==e)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==t&&(t={}),t.fromTFHub&&"string"==typeof e&&(e=function(e){return e.endsWith("/")||(e+="/"),`${e}model.json?tfjs-format=file`}(e));const r=new $k(e,t,n);return await r.load(),r}function Hk(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&av("complex64"!==e.dtype,(()=>`${t} does not support complex64 tensors in the CPU backend.`))}))}const Wk=yI;class Kk extends Kv{nextDataId(){return Kk.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new Wv(this,Jw())}write(e,t,n){this.firstUse&&(this.firstUse=!1,Dv().get("IS_NODE")&&Fv("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));const r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&wv(n[0])){const i=n.map((e=>ew(e)));r=this.write(i,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){this.data.get(e).refCount++}decRef(e){this.data.has(e)&&this.data.get(e).refCount--}move(e,t,n,r,i){this.data.set(e,{values:t,dtype:r,refCount:i})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:t,complexTensorInfos:n}=this.data.get(e);return"complex64"===t?PE(this.readSync(n.real.dataId),this.readSync(n.imag.dataId)):function(e,t){if(Array.isArray(e))return e;if("float32"===t)return e instanceof Float32Array?e:new Float32Array(e);if("int32"===t)return e instanceof Int32Array?e:new Int32Array(e);if("bool"===t||"string"===t)return Uint8Array.from(new Int32Array(e));throw new Error(`Unknown dtype ${t}`)}(this.data.get(e).values,t)}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const n=t.map((e=>tw(e)));return tS(e.shape,e.dtype,n)}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return tS(e.shape,e.dtype,t)}makeOutput(e,t,n){return Jw().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}disposeData(e,t=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:n}=this.data.get(e);null!=n&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const t=Zb();return e(),{kernelMs:Zb()-t}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){Hk([e],"where");const t=this.readSync(e.dataId);return Wk(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}function Xk(e,t,n,r,i){const o=t.length,a=lv(t),s=Ev(t),l=Ev(i),c=yv(n,lv(i));for(let t=0;t<a;++t){const n=Ov(t,o,s),i=new Array(n.length);for(let e=0;e<i.length;e++)i[e]=n[r[e]];c[Cv(i,o,l)]=e[t]}return c}function Yk(e){const{inputs:t,attrs:n,backend:r}=e,{x:i}=t,{perm:o}=n;Hk(i,"transpose");const a=i.shape.length,s=new Array(a);for(let e=0;e<s.length;e++)s[e]=i.shape[o[e]];const l=Xk(r.data.get(i.dataId).values,i.shape,i.dtype,o,s);return{dataId:r.write(l,s,i.dtype),shape:s,dtype:i.dtype}}Kk.nextDataId=0,ex("cpu",(()=>new Kk),1);const Jk={kernelName:Rb,backendName:"cpu",kernelFunc:Yk};function Qk(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{shape:o}=r,a=lv(i.shape),s=mv(o,a),l=lv(s);av(a===l,(()=>`The new shape (${s}) has ${l} elements and the old shape (${i.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`)),n.incRef(i.dataId);const c=n.data.get(i.dataId);if(null!=c.complexTensorInfos){const e=c.complexTensorInfos.real,t=c.complexTensorInfos.imag;e.shape=s,t.shape=s}return{dataId:i.dataId,shape:s,dtype:i.dtype}}const Zk={kernelName:wb,backendName:"cpu",kernelFunc:Qk};function ej(e){return(t,n,r,i,o)=>{const a=kS(t,n),s=a.length,l=Ev(a),c=yv(o,lv(a)),u=t.length,p=n.length,d=Ev(t),h=Ev(n),m=ES(t,a),f=ES(n,a);if(m.length+f.length===0)for(let t=0;t<c.length;++t)c[t]=e(r[t%r.length],i[t%i.length]);else for(let t=0;t<c.length;++t){const n=Ov(t,s,l),o=n.slice(-u);m.forEach((e=>o[e]=0));const a=Cv(o,u,d),g=n.slice(-p);f.forEach((e=>g[e]=0));const y=Cv(g,p,h);c[t]=e(r[a],i[y])}return[c,a]}}function tj(e){const{inputs:t,backend:n}=e,{real:r,imag:i}=t,o=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",o),imag:n.makeTensorInfo(i.shape,"float32",a)},s}function nj(e,t,n="float32"){if("complex64"===n)return tj({inputs:{real:nj(e,t,"float32"),imag:nj(e,t,"float32")},backend:e});const r=jv(lv(t),n);return e.makeTensorInfo(t,n,r)}function rj(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const ij={kernelName:cb,backendName:"cpu",kernelFunc:rj};function oj(e){const{inputs:t,backend:n}=e,{input:r}=t,i=n.data.get(r.dataId).complexTensorInfos.real,o=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,o)}function aj(e,t,n,r){if("int32"===r)return[t,"int32",Int32Array.from(e)];if("bool"===r){const r=Qb([0],n),[i,o]=ej(((e,t)=>e!==t?1:0))(t,[],e,r,"bool");return[o,"bool",i]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function sj(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dtype:o}=r;if("complex64"===o){if("complex64"===i.dtype)return rj({inputs:{x:i},backend:n});const e=nj(n,i.shape,i.dtype),t=sj({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),r=tj({inputs:{real:t,imag:e},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),r}if("complex64"===i.dtype){const e=oj({inputs:{input:i},backend:n}),t=sj({inputs:{x:e},backend:n,attrs:{dtype:o}});return n.disposeIntermediateTensorInfo(e),t}if(!vv(i.dtype,o)){const e=rj({inputs:{x:i},backend:n});return{dataId:e.dataId,shape:e.shape,dtype:o}}const a=n.data.get(i.dataId).values,[s,l,c]=aj(a,i.shape,i.dtype,o);return n.makeTensorInfo(s,l,c)}const lj={kernelName:Zv,backendName:"cpu",kernelFunc:sj};function cj(e,t,n,r){const i=_v(n,lv(t));if(r&&"string"!==n){let t=0;e.forEach((e=>{const n=lv(e.shape);i.set(e.vals,t),t+=n}))}else{let r=0;e.forEach((e=>{const o="string"===n?fI(e.vals):e.vals;let a=0;for(let n=0;n<e.shape[0];++n){const s=n*t[1]+r;for(let t=0;t<e.shape[1];++t)i[s+t]=o[a++]}r+=e.shape[1]}))}return i}function uj(e){const{inputs:t,backend:n,attrs:r}=e,{axis:i}=r,o=fv(i,t[0].shape)[0];LT(t.map((e=>e.shape)),o);let a=FT(t.map((e=>e.shape)),o);if(0===lv(a))return n.makeTensorInfo(a,t[0].dtype,[]);const s=t.filter((e=>lv(e.shape)>0));if(1===s.length)return rj({inputs:{x:s[0]},backend:n});if("complex64"===s[0].dtype){const e=s.map((e=>oj({inputs:{input:e},backend:n}))),t=s.map((e=>function(e){const{inputs:t,backend:n}=e,{input:r}=t,i=n.data.get(r.dataId).complexTensorInfos.imag,o=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,o)}({inputs:{input:e},backend:n}))),r=uj({inputs:e,backend:n,attrs:{axis:o}}),i=uj({inputs:t,backend:n,attrs:{axis:o}}),a=tj({inputs:{real:r,imag:i},backend:n});return e.forEach((e=>n.disposeIntermediateTensorInfo(e))),t.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),a}const l=s.map((e=>{const t=lv(e.shape.slice(o));return Qk({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),c=l.map((e=>({vals:n.data.get(e.dataId).values,shape:e.shape})));a=FT(l.map((e=>e.shape)),1);const u=1===l[0].shape[0],p=cj(c,a,t[0].dtype,u),d=FT(s.map((e=>e.shape)),o),h=n.makeTensorInfo(d,t[0].dtype,p);return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),h}const pj={kernelName:eb,backendName:"cpu",kernelFunc:uj};function dj(e){return(t,n,r)=>{const i=_v(n,t.length);for(let n=0;n<t.length;++n)i[n]=e(t[n],r);return i}}function hj(e,t,n){return mj(e,dj(t),n)}function mj(e,t,n){return({inputs:r,attrs:i,backend:o})=>{const{x:a}=r;Hk(a,e);const s=o,l=s.data.get(a.dataId).values;let c;if("string"===a.dtype){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=fI(l)}else c=l;const u=n||a.dtype,p=t(c,u,i);return s.makeTensorInfo(a.shape,u,p)}}const fj=hj("Elu",(e=>e>=0?e:Math.exp(e)-1));const gj=ej(((e,t)=>e<0?t*e:e));const yj=hj(bb,(e=>Math.max(0,e))),_j=hj(xb,(e=>Math.min(Math.max(0,e),6))),vj=dj((e=>1/(1+Math.exp(-e)))),bj=hj(kb,(e=>1/(1+Math.exp(-e)))),wj=hj(Mb,(e=>Math.tanh(e))),xj={kernelName:Mb,backendName:"cpu",kernelFunc:wj};function Sj(e,t,n,r){return null==n?({inputs:n,backend:i})=>{const{a:o,b:a}=n,s=i;Hk([o,a],e);const l=s.data.get(o.dataId).values,c=s.data.get(a.dataId).values,u="string"===o.dtype?fI(l):l,p="string"===o.dtype?fI(c):c,d=r||o.dtype,[h,m]=t(o.shape,a.shape,u,p,d);return s.makeTensorInfo(m,d,h)}:({inputs:e,backend:i})=>{const{a:o,b:a}=e,s=i;if("complex64"===o.dtype||"complex64"===a.dtype){const e=sj({inputs:{x:o},backend:s,attrs:{dtype:"complex64"}}),t=s.data.get(e.dataId),r=t.complexTensorInfos.real,i=t.complexTensorInfos.imag,l=s.data.get(r.dataId).values,c=s.data.get(i.dataId).values,u=sj({inputs:{x:a},backend:s,attrs:{dtype:"complex64"}}),p=s.data.get(u.dataId),d=p.complexTensorInfos.real,h=p.complexTensorInfos.imag,m=s.data.get(d.dataId).values,f=s.data.get(h.dataId).values,[g,y,_]=n(o.shape,a.shape,l,c,m,f),v=s.makeTensorInfo(_,"float32",g),b=s.makeTensorInfo(_,"float32",y),w=tj({inputs:{real:v,imag:b},backend:s});return s.disposeIntermediateTensorInfo(e),s.disposeIntermediateTensorInfo(u),s.disposeIntermediateTensorInfo(v),s.disposeIntermediateTensorInfo(b),w}{const e=s.data.get(o.dataId).values,n=s.data.get(a.dataId).values,i=r||o.dtype,[l,c]=t(o.shape,a.shape,e,n,i);return s.makeTensorInfo(c,i,l)}}}function Tj(e){return(t,n,r,i,o,a)=>{const s=kS(t,n),l=lv(s),c=s.length,u=Ev(s),p=yv("float32",l),d=yv("float32",l),h=ES(t,s),m=ES(n,s),f=PE(r,i),g=PE(o,a),y=t.length,_=Ev(t),v=n.length,b=Ev(n);if(h.length+m.length===0)for(let t=0;t<p.length;t++){const n=t%f.length,r=t%g.length,i=e(f[2*n],f[2*n+1],g[2*r],g[2*r+1]);p[t]=i.real,d[t]=i.imag}else for(let t=0;t<p.length;t++){const n=Ov(t,c,u),r=n.slice(-y);h.forEach((e=>r[e]=0));const i=Cv(r,y,_),o=n.slice(-v);m.forEach((e=>o[e]=0));const a=Cv(o,v,b),s=e(f[2*i],f[2*i+1],g[2*a],g[2*a+1]);p[t]=s.real,d[t]=s.imag}return[p,d,s]}}const Ej=ej(((e,t)=>e+t)),Ij=Tj(((e,t,n,r)=>({real:e+n,imag:t+r}))),kj=Sj(Yv,Ej,Ij),jj={kernelName:Yv,backendName:"cpu",kernelFunc:kj};function Aj(e){const{inputs:t,backend:n,attrs:r}=e,{a:i,b:o}=t,{transposeA:a,transposeB:s}=r;Hk([i,o],"matMul");const l=i.shape.length,c=o.shape.length,u=a?i.shape[l-2]:i.shape[l-1],p=s?o.shape[c-1]:o.shape[c-2],d=a?i.shape[l-1]:i.shape[l-2],h=s?o.shape[c-2]:o.shape[c-1],m=i.shape.slice(0,-2),f=o.shape.slice(0,-2),g=lv(m),y=lv(f),_=kS(i.shape.slice(0,-2),o.shape.slice(0,-2)).concat([d,h]);av(u===p,(()=>`Error in matMul: inner shapes (${u}) and (${p}) of Tensors with shapes ${i.shape} and ${o.shape} and transposeA=${a} and transposeB=${s} must match.`));const v=s?[y,h,p]:[y,p,h],b=Qk({inputs:{x:i},backend:n,attrs:{shape:a?[g,u,d]:[g,d,u]}}),w=Qk({inputs:{x:o},backend:n,attrs:{shape:v}}),x=a?b.shape[1]:b.shape[2],S=a?b.shape[2]:b.shape[1],T=s?w.shape[1]:w.shape[2],E=Math.max(g,y),I=n.data.get(b.dataId).values,k=n.data.get(w.dataId).values,j=Ev(b.shape),A=Ev(w.shape),[C,O,M]=a?[j[0],1,j[1]]:[j[0],j[1],1],[N,R,P]=s?[1,A[1],A[0]]:[A[1],1,A[0]],D=S*T,L=tS([E,S,T],b.dtype),F=L.values,B=n.blockSize;for(let e=0;e<E;e++){const t=e%g,n=e%y;for(let r=0;r<S;r+=B){const i=Math.min(r+B,S);for(let o=0;o<T;o+=B){const a=Math.min(o+B,T);for(let s=0;s<x;s+=B){const l=Math.min(s+B,x);for(let c=r;c<i;c++)for(let r=o;r<a;r++){let i=0;for(let e=s;e<l;e++)i+=I[t*C+c*O+e*M]*k[e*N+r*R+n*P];F[e*D+(c*T+r)]+=i}}}}}return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(w),n.makeTensorInfo(_,L.dtype,L.values)}const Cj={kernelName:Qv,backendName:"cpu",kernelFunc:Aj},Oj={kernelName:Pb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:i,b:o,bias:a,preluActivationWeights:s}=t,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:p}=r;let d,h,m;const f=[];d=Aj({inputs:{a:i,b:o},attrs:{transposeA:l,transposeB:c},backend:n}),a&&(h=kj({inputs:{a:d,b:a},backend:n}),f.push(d),d=h),u&&(m=function(e,t,n,r,i){if("linear"===n)return rj({inputs:{x:t},backend:e});if("relu"===n)return yj({inputs:{x:t},backend:e});if("elu"===n)return fj({inputs:{x:t},backend:e});if("relu6"===n)return _j({inputs:{x:t},backend:e});if("prelu"===n)return function(e){const{inputs:t,backend:n}=e,{x:r,alpha:i}=t;Hk([r,i],"prelu");const o=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,[s,l]=gj(r.shape,i.shape,o,a,"float32");return n.makeTensorInfo(l,"float32",s)}({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{alpha:o}=r;Hk([i],"leakyRelu");const a=lv(i.shape),s=n.data.get(i.dataId).values,l=yv("float32",a);for(let e=0;e<s.length;e++)l[e]=s[e]<0?o*s[e]:s[e];return n.makeTensorInfo(i.shape,"float32",l)}({inputs:{x:t},backend:e,attrs:{alpha:i}});if("sigmoid"===n)return bj({inputs:{x:t},backend:e});if("tanh"===n)return wj({inputs:{x:t},backend:e});throw new Error(`Activation ${n} has not been implemented for the CPU backend -- michael2.`)}(n,d,u,s,p),f.push(d),d=m);for(const e of f)n.disposeIntermediateTensorInfo(e);return d}},Mj=ej(((e,t)=>e<t?1:0)),Nj=Sj(ub,Mj,null,"bool"),Rj={kernelName:ub,backendName:"cpu",kernelFunc:Nj};function Pj(e,t,n,r,i){const o=GS(r,t,n),a=lv(n),s=Ev(r);if(o){const n=zS(t,s);return"string"===i?e.slice(n,n+a):e.subarray(n,n+a)}const l=tS(r,i,"string"===i?fI(e):e),c=tS(n,i);for(let e=0;e<c.size;++e){const n=c.indexToLoc(e),r=n.map(((e,n)=>e+t[n]));c.set(l.get(...r),...n)}return"string"===i?gI(c.values):c.values}function Dj(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:o,size:a}=r;Hk(i,"slice");const[s,l]=$S(i,o,a);CS(i,s,l);const c=Pj(n.data.get(i.dataId).values,s,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,c)}const Lj={kernelName:Ib,backendName:"cpu",kernelFunc:Dj};function Fj(e,t,n,r){const i=tS(e,t.dtype);for(let e=0;e<i.size;e++){const o=i.indexToLoc(e),a=new Array(o.length);for(let e=0;e<a.length;e++)a[e]=o[e]*n[e]+r[e];i.set(t.get(...a),...o)}return i}const Bj={kernelName:Cb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:o,end:a,strides:s,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:p,shrinkAxisMask:d}=r;Hk(i,"stridedSlice");const{finalShapeSparse:h,finalShape:m,isIdentity:f,sliceDim0:g,isSimpleSlice:y,begin:_,end:v,strides:b}=qS(i.shape,o,a,s,l,c,u,p,d);let w;if(f)w=Qk({inputs:{x:i},backend:n,attrs:{shape:m}});else if(g||y){av(i.shape.length>=1,(()=>`Input must have rank at least 1, got: ${i.shape.length}`));const e=MS(_,v,b),t=Dj({inputs:{x:i},backend:n,attrs:{begin:_,size:e}});w=Qk({inputs:{x:t},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(t)}else{const e=Fj(h,n.bufferSync(i),b,_);w=n.makeTensorInfo(m,e.dtype,e.values)}return w}},Uj=ej(((e,t)=>e===t?1:0)),Vj=Sj(rb,Uj,null,"bool"),Gj={kernelName:rb,backendName:"cpu",kernelFunc:Vj},zj=ej(((e,t)=>e>=t?1:0)),$j=Sj(lb,zj,null,"bool"),qj={kernelName:lb,backendName:"cpu",kernelFunc:$j};function Hj(e){const{inputs:t,backend:n,attrs:r}=e,{input:i}=t,{dim:o}=r,a=i.shape.length,s=i.shape.slice();let l=o;return o<0&&(av(-(a+1)<=o,(()=>`Axis must be in the interval [${-(a+1)}, ${a}]`)),l=a+o+1),s.splice(l,0,1),Qk({inputs:{x:i},backend:n,attrs:{shape:s}})}const Wj={kernelName:ob,backendName:"cpu",kernelFunc:Hj},Kj={kernelName:_b,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{axis:i}=r;if(1===t.length)return Hj({inputs:{input:t[0]},backend:n,attrs:{dim:i}});const o=t[0].shape,a=t[0].dtype;t.forEach((e=>{sv(o,e.shape,"All tensors passed to stack must have matching shapes"),av(a===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const s=[],l=uj({inputs:t.map((e=>{const t=Hj({inputs:{input:e},backend:n,attrs:{dim:i}});return s.push(t),t})),backend:n,attrs:{axis:i}});return s.forEach((e=>n.disposeIntermediateTensorInfo(e))),l}},Xj=ej(((e,t)=>e-t)),Yj=Tj(((e,t,n,r)=>({real:e-n,imag:t-r}))),Jj=Sj(Ob,Xj,Yj),Qj={kernelName:Ob,backendName:"cpu",kernelFunc:Jj},Zj=ej(((e,t)=>Math.min(e,t))),eA=Sj(mb,Zj),tA={kernelName:mb,backendName:"cpu",kernelFunc:eA},nA=ej(((e,t)=>Math.max(e,t))),rA=Sj(hb,nA),iA={kernelName:hb,backendName:"cpu",kernelFunc:rA};function oA(e,t){const n=new Array(e.rank);for(let r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];const r=tS(n,e.dtype);for(let t=0;t<r.values.length;++t){const n=r.indexToLoc(t),i=new Array(e.rank);for(let t=0;t<i.length;t++)i[t]=n[t]%e.shape[t];const o=e.locToIndex(i);r.values[t]=e.values[o]}return r}const aA={kernelName:Nb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reps:o}=r;Hk(i,"tile");const a=oA(n.bufferSync(i),o);return n.makeTensorInfo(a.shape,a.dtype,a.values)}};function sA(e,t,n,r,i,o,a,s,l,c){const u=[r/i,i],p=e.values,d=t.values;if(0===r)return tS(n,t.dtype);const h=l instanceof dw?l:tS(u,t.dtype);"string"==typeof l||"number"==typeof l?h.values.fill(l):"boolean"==typeof l&&h.values.fill(+l);for(let e=0;e<o;e++){const o=[];let l=0;for(let t=0;t<a;t++){const n=p[e*a+t];o.push(n),l+=n*s[t]}if(l<0||l>=r/i)throw new Error(`Invalid indices: ${o} does not index into ${n}`);for(let n=0;n<i;n++)c?h.values[l*i+n]+=d[e*i+n]:h.values[l*i+n]=0===t.rank?d[0]:d[e*i+n]}return h}const lA={kernelName:Tb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{tensor:r,indices:i,updates:o}=t,{sliceRank:a,numUpdates:s,sliceSize:l,strides:c,outputSize:u}=IE(0,i,r.shape),p=n.bufferSync(i),d=n.bufferSync(o),h=n.bufferSync(r),m=sA(p,d,r.shape,u,l,s,a,c,h,!1);return n.makeTensorInfo(r.shape,m.dtype,m.values)}},cA={kernelName:Jv,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,r=t;Hk(t,"addN");const i=r.map((e=>n.data.get(e.dataId).values)),o=tS(r[0].shape,r[0].dtype),a=o.values;for(let e=0;e<r.length;e++){const t=i[e];for(let e=0;e<a.length;e++)a[e]+=t[e]}return n.makeTensorInfo(o.shape,o.dtype,o.values)}};function uA(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r;let s;Hk(i,"sum"),s="bool"===i.dtype?sj({inputs:{x:i},backend:n,attrs:{dtype:"int32"}}):rj({inputs:{x:i},backend:n});const l=s.shape.length,c=fv(o,s.shape),u=ET(c,l);let p=c,d=s;null!=u&&(d=Yk({inputs:{x:s},backend:n,attrs:{perm:u}}),p=kT(p.length,l)),TT("sum",p,d.shape.length);const[h,m]=xT(d.shape,p);let f=nj(n,h,Ew(d.dtype,"int32"));const g=lv(m),y=n.data.get(f.dataId).values,_=n.data.get(d.dataId).values;for(let e=0;e<y.length;++e){const t=e*g;let n=0;for(let e=0;e<g;++e)n+=_[t+e];y[e]=n}if(a){const e=f;f=Qk({inputs:{x:f},backend:n,attrs:{shape:ST(f.shape,c)}}),n.disposeIntermediateTensorInfo(e)}return n.disposeIntermediateTensorInfo(s),null!=u&&n.disposeIntermediateTensorInfo(d),f}const pA={kernelName:jb,backendName:"cpu",kernelFunc:uA},dA={kernelName:Eb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:r,t:i,e:o}=t;Hk([r,i,o],"select");const a=r.shape.length,s=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values,u=Ew(i.dtype,o.dtype),p=jv(lv(i.shape),u);let d=0;const h=0===a||a>1||1===i.shape.length?1:lv(i.shape.slice(1));for(let e=0;e<s.length;e++)for(let t=0;t<h;t++)1===s[e]?p[d++]=l[e]:p[d++]=c[e];return n.makeTensorInfo(i.shape,u,p)}},hA=ej(((e,t)=>e&&t)),mA=Sj(pb,hA,null,"bool"),fA={kernelName:pb,backendName:"cpu",kernelFunc:mA},gA=ej(((e,t)=>e*t)),yA=Tj(((e,t,n,r)=>({real:e*n-t*r,imag:e*r+t*n}))),_A=Sj(gb,gA,yA),vA={kernelName:gb,backendName:"cpu",kernelFunc:_A},bA={kernelName:Ab,backendName:"cpu",kernelFunc:({inputs:e,backend:t})=>{const{x:n}=e,r=t;Hk(n,"square");const i=r.data.get(n.dataId).values,o=new Float32Array(i.length);for(let e=0;e<i.length;++e){const t=i[e];o[e]=t*t}return{dataId:r.write(o,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}},wA=dj((e=>1/Math.sqrt(e))),xA=mj(Sb,wA),SA={kernelName:Sb,backendName:"cpu",kernelFunc:xA},TA={kernelName:nb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{equation:i}=r,o=t,{allDims:a,summedDims:s,idDims:l}=WE(i,o.length);XE(a.length,l,o);const{path:c,steps:u}=YE(s,l),p=u.length;let d=null,h=a.length;const m=[];for(let e=0;e<p;++e){for(const t of u[e]){const{permutationIndices:e,expandDims:r}=KE(h,l[t]);let i;JE(e)?i=o[t]:(i=Yk({inputs:{x:o[t]},backend:n,attrs:{perm:e}}),m.push(i));const a=i.shape.slice();for(let e=0;e<r.length;++e)a.splice(r[e],0,1);cv(i.shape,a)||(i=Qk({inputs:{x:i},backend:n,attrs:{shape:a}}),m.push(i)),null===d?d=i:(d=_A({inputs:{a:i,b:d},backend:n}),m.push(d))}e<p-1&&(c[e]>=0&&(d=uA({inputs:{x:d},backend:n,attrs:{axis:c[e]-(a.length-h),keepDims:!1}}),m.push(d)),h--)}for(const e of m)e!==d&&n.disposeIntermediateTensorInfo(e);return d}};function EA(e,t,n,r){const i=yv(r,lv(n));for(let n=0;n<i.length;++n){const r=n*t;let o=e[r];for(let n=0;n<t;++n){const t=e[r+n];(Number.isNaN(t)||t>o)&&(o=t)}i[n]=o}return i}function IA(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reductionIndices:o,keepDims:a}=r,s=n;let l=i.shape;const c=l.length,u=fv(o,l);let p=u;const d=ET(p,c);let h=s.data.get(i.dataId).values;if(null!=d){const e=new Array(c);for(let t=0;t<e.length;t++)e[t]=l[d[t]];h=Xk(h,l,i.dtype,d,e),p=kT(p.length,c),l=e}Hk(i,"max"),TT("max",p,c);const[m,f]=xT(l,p),g=EA(h,lv(f),m,i.dtype),y=s.write(g,m,i.dtype);let _=m;return a&&(_=ST(m,u)),{dataId:y,shape:_,dtype:i.dtype}}const kA={kernelName:db,backendName:"cpu",kernelFunc:IA},jA=dj((e=>Math.exp(e))),AA=mj(ib,jA,"float32"),CA={kernelName:ib,backendName:"cpu",kernelFunc:AA},OA=ej(((e,t)=>e/t)),MA=Sj(tb,OA),NA={kernelName:tb,backendName:"cpu",kernelFunc:MA};function RA(e,t,n){const r=Jb(-1,n);return gA([],t,r,e,n)}const PA={kernelName:yb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;Hk(r,"neg");const i=n.data.get(r.dataId).values,[o,a]=RA(i,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,o)}},DA=hj(vb,(e=>1/e)),LA={kernelName:vb,backendName:"cpu",kernelFunc:DA};function FA(e,t,n){const r=tS(n,e.dtype);for(let n=0;n<r.size;++n){const i=r.indexToLoc(n).slice(),o=i[0],a=i[2],s=t.locToIndex([o,a]);i[2]=t.values[s];const l=e.locToIndex(i);0<=l&&l<e.values.length&&(r.values[n]=e.values[l])}return r}const BA={kernelName:ab,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,indices:o}=t,{axis:a,batchDims:s}=r;Hk([i,o],"gatherV2");const l=fv(a,i.shape)[0],c=n.data.get(o.dataId).values,u=i.shape[l];for(let e=0;e<c.length;++e){const t=c[e];av(t<=u-1&&t>=0,(()=>`GatherV2: the index value ${t} is not in [0, ${u-1}]`))}let p=s;null==s&&(p=0);const d=lv(o.shape),h=mI(i,o,l,p),m=Qk({inputs:{x:i},backend:n,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),f=Qk({inputs:{x:o},backend:n,attrs:{shape:[h.batchSize,d/h.batchSize]}}),g=[h.batchSize,h.outerSize,d/h.batchSize,h.sliceSize],y=n.bufferSync(f),_=FA(n.bufferSync(m),y,g);return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(f),n.makeTensorInfo(h.outputShape,_.dtype,_.values)}};function UA(e,t,n,r,i,o,a,s,l){const c=tS([r,o],n);for(let n=0;n<r;n++){const r=[];let u=0;for(let t=0;t<i;t++){const o=e[n*i+t];u+=o*a[t],r.push(o)}if(u<0||u>=l/o)throw new Error(`Invalid indices: ${r} does not index into ${s}`);for(let e=0;e<o;e++)c.values[n*o+e]=t.get(...t.indexToLoc(u*o+e))}return c}const VA={kernelName:sb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:r,indices:i}=t,o=lv(r.shape),a=i.shape,s=a[a.length-1],[l,c,u,p]=SE(r,i);if(0===c)return n.makeTensorInfo(l,r.dtype,[]);const d=UA(n.data.get(i.dataId).values,n.bufferSync(r),r.dtype,c,s,u,p,r.shape,o);return n.makeTensorInfo(l,r.dtype,d.values)}};var GA=r(7391);const zA={kernelName:fb,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{numSamples:o,seed:a,normalized:s}=r;Hk(i,"multinomial");const l=s?i:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{dim:o}=r,a=i.shape.length;let s=o;if(-1===s&&(s=a-1),s!==a-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${a} and dim was ${s}`);const l=fv([s],i.shape),c=IA({inputs:{x:i},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),u=ST(c.shape,l),p=Qk({inputs:{x:c},backend:n,attrs:{shape:u}}),d=Jj({inputs:{a:i,b:p},backend:n}),h=AA({inputs:{x:d},backend:n}),m=uA({inputs:{x:h},backend:n,attrs:{axis:l,keepDims:!1}}),f=Qk({inputs:{x:m},backend:n,attrs:{shape:u}}),g=MA({inputs:{a:h,b:f},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(f),g}({inputs:{logits:i},backend:n,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],p=n.data.get(l.dataId).values,d=[c,o],h=jv(lv(d),"int32");for(let e=0;e<c;++e){const t=e*u,n=new Float32Array(u-1);n[0]=p[t];for(let e=1;e<n.length;++e)n[e]=n[e-1]+p[t+e];const r=GA.alea(a.toString()),i=e*o;for(let e=0;e<o;++e){const t=r();h[i+e]=n.length;for(let r=0;r<n.length;r++)if(t<n[r]){h[i+e]=r;break}}}return s||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(d,"int32",h)}},$A={},qA={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function HA(e,t){if(!(e in $A)||null!=t){const n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=null==t?function(e){if(Dv().getBool("IS_SAFARI")||"undefined"==typeof OffscreenCanvas||2!==e){if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}return new OffscreenCanvas(300,150)}(e):t;return n.addEventListener("webglcontextlost",(t=>{t.preventDefault(),delete $A[e]}),!1),Dv().getBool("SOFTWARE_WEBGL_ENABLED")&&(qA.failIfMajorPerformanceCaveat=!1),1===e?n.getContext("webgl",qA)||n.getContext("experimental-webgl",qA):n.getContext("webgl2",qA)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;$A[e]=n}const n=$A[e];return null==n||n.isContextLost()?(delete $A[e],HA(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),$A[e])}var WA,KA,XA;function YA(e,t){return[t,e]}function JA(e){const t=lv(e);return pv(Math.ceil(t/4))}function QA(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function ZA(e,t){const n=e;let r,i,o,a,s,l,c,u,p,d;return 2===Dv().getNumber("WEBGL_VERSION")?(r=n.R32F,i=n.R16F,o=n.RGBA16F,a=n.RGBA32F,s=n.RED,c=4,u=1,p=n.HALF_FLOAT,d=n.FLOAT,l=n.RGBA8):(r=e.RGBA,i=e.RGBA,o=e.RGBA,a=n.RGBA,s=e.RGBA,c=4,u=4,p=null!=t?t.HALF_FLOAT_OES:null,d=e.FLOAT,l=e.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:a,textureFormatFloat:s,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:p,textureTypeFloat:d}}function eC(e,t){const n=t();return Dv().getBool("DEBUG")&&function(e){const t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${t}`}}(e,t))}(e),n}function tC(e){return!!(Dv().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function nC(e,t){return pC(e,(()=>e.getExtension(t)),'Extension "'+t+'" not supported on this browser.')}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(WA||(WA={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(KA||(KA={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(XA||(XA={}));const rC=/ERROR: [0-9]+:([0-9]+):/g;function iC(e,t){const n=rC.exec(t);if(null==n)return console.log(`Couldn't parse line number in error: ${t}`),void console.log(e);const r=+n[1],i=e.split("\n"),o=i.length.toString().length+2,a=i.map(((e,t)=>dv((t+1).toString(),o)+e));let s=0;for(let e=0;e<a.length;e++)s=Math.max(a[e].length,s);const l=a.slice(0,r-1),c=a.slice(r-1,r),u=a.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log(`%c ${dv(c[0],s)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join("\n"))}function oC(e,t){if(eC(e,(()=>e.validateProgram(t))),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function aC(e,t,n,r,i,o,a){const s=e.getAttribLocation(t,n);return-1!==s&&(eC(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,r))),eC(e,(()=>e.vertexAttribPointer(s,i,e.FLOAT,!1,o,a))),eC(e,(()=>e.enableVertexAttribArray(s))),!0)}function sC(e,t,n,r){eC(e,(()=>function(e,t,n){(function(e,t){const n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error(`textureUnit must be in [gl.TEXTURE0, gl.TEXTURE${n}].`)})(e,n),eC(e,(()=>e.activeTexture(e.TEXTURE0+n))),eC(e,(()=>e.bindTexture(e.TEXTURE_2D,t)))}(e,t,r))),eC(e,(()=>e.uniform1i(n,r)))}function lC(e,t,n){eC(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,n))),eC(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)))}function cC(e,t){eC(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,t))),eC(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)))}function uC(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${t}`}}(e,t))}function pC(e,t,n){const r=eC(e,(()=>t()));if(null==r)throw new Error(n);return r}function dC(e,t=2){return lv(e.slice(0,e.length-t))}function hC(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function mC(e){let t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[dC(e),...hC(e)]),t}function fC(e){return e%2==0}function gC(e,t){if(cv(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){const n=e[e.length-1],r=t[t.length-1];if(n===r)return!0;if(fC(n)&&fC(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&fC(e[0])&&fC(t[0])}let yC,_C;function vC(e,t){return null!=e.getExtension(t)}function bC(e){try{if(null!=HA(e))return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function wC(e){const t=ZA(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);const r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),i}const xC=Dv();function SC(){let e,t,n,r,i,o,a,s,l,c;return 2===Dv().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",i="texture",o="outputColor",a="out vec4 outputColor;",s=Dv().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",l="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",i="texture2D",o="gl_FragColor",a="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",l="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:i,output:o,defineOutput:a,defineSpecialNaN:s,defineSpecialInf:l,defineRound:c}}function TC(e,t,n="index"){const r=Ev(t);return r.map(((t,i)=>`int ${e[i]} = ${n} / ${t}; ${i===r.length-1?`int ${e[i+1]} = ${n} - ${e[i]} * ${t}`:`index -= ${e[i]} * ${t}`};`)).join("")}function EC(e,t,n="index"){const r=Ev(t);return r.map(((t,i)=>`int ${e[i]} = ${n} / outShapeStrides[${i}]; ${i===r.length-1?`int ${e[i+1]} = ${n} - ${e[i]} * outShapeStrides[${i}]`:`index -= ${e[i]} * outShapeStrides[${i}]`};`)).join("")}function IC(e){const t=Ev(e).map((e=>e.toString()));return`\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;\n  }\n`}xC.registerFlag("HAS_WEBGL",(()=>xC.getNumber("WEBGL_VERSION")>0)),xC.registerFlag("WEBGL_VERSION",(()=>bC(2)?2:bC(1)?1:0)),xC.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(()=>!1)),xC.registerFlag("WEBGL_BUFFER_SUPPORTED",(()=>2===xC.get("WEBGL_VERSION"))),xC.registerFlag("WEBGL_CPU_FORWARD",(()=>!0)),xC.registerFlag("WEBGL_FORCE_F16_TEXTURES",(()=>!1)),xC.registerFlag("WEBGL_PACK",(()=>xC.getBool("HAS_WEBGL"))),xC.registerFlag("WEBGL_PACK_NORMALIZATION",(()=>xC.getBool("WEBGL_PACK"))),xC.registerFlag("WEBGL_PACK_CLIP",(()=>xC.getBool("WEBGL_PACK"))),xC.registerFlag("WEBGL_PACK_DEPTHWISECONV",(()=>xC.getBool("WEBGL_PACK"))),xC.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(()=>xC.getBool("WEBGL_PACK"))),xC.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(()=>xC.getBool("WEBGL_PACK"))),xC.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(()=>xC.getBool("WEBGL_PACK"))),xC.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(()=>xC.getBool("WEBGL_PACK"))),xC.registerFlag("WEBGL_PACK_REDUCE",(()=>xC.getBool("WEBGL_PACK"))),xC.registerFlag("WEBGL_LAZILY_UNPACK",(()=>xC.getBool("WEBGL_PACK"))),xC.registerFlag("WEBGL_CONV_IM2COL",(()=>xC.getBool("WEBGL_PACK"))),xC.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",(()=>xC.getBool("WEBGL_PACK"))),xC.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(()=>function(e){if(null==yC){const t=HA(e);yC=t.getParameter(t.MAX_TEXTURE_SIZE)}return yC}(xC.getNumber("WEBGL_VERSION")))),xC.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(()=>function(e){if(null==_C){const t=HA(e);_C=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,_C)}(xC.getNumber("WEBGL_VERSION")))),xC.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(()=>{const e=xC.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;let t;const n=HA(e);return t=vC(n,"EXT_disjoint_timer_query_webgl2")&&2===e?2:vC(n,"EXT_disjoint_timer_query")?1:0,t}(e)})),xC.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(()=>xC.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!Lw())),xC.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(()=>function(e){if(0===e)return!1;const t=HA(e);if(1===e){if(!vC(t,"OES_texture_float"))return!1}else if(!vC(t,"EXT_color_buffer_float"))return!1;return wC(t)}(xC.getNumber("WEBGL_VERSION")))),xC.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(()=>!xC.getBool("WEBGL_FORCE_F16_TEXTURES")&&xC.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))),xC.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(()=>function(e){if(0===e)return!1;const t=HA(e);if(1!==e){if(vC(t,"EXT_color_buffer_float"))return wC(t);const e="EXT_color_buffer_half_float";if(vC(t,e)){const n=t.getExtension(e);return function(e,t){const n=ZA(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);const o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(i),o}(t,n)}return!1}return!!vC(t,"OES_texture_float")&&!!vC(t,"WEBGL_color_buffer_float")&&wC(t)}(xC.getNumber("WEBGL_VERSION")))),xC.registerFlag("WEBGL_FENCE_API_ENABLED",(()=>{return 2===(e=xC.getNumber("WEBGL_VERSION"))&&null!=HA(e).fenceSync;var e})),xC.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(()=>xC.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0)),xC.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(()=>-1),(e=>{if("number"!=typeof e)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${e}.`);if(e<0&&-1!==e)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${e}.`)})),xC.registerFlag("WEBGL_FLUSH_THRESHOLD",(()=>Lw()?1:-1),(e=>{if("number"!=typeof e)throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${e}.`);if(e<0&&-1!==e)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${e}.`)})),xC.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(()=>128)),xC.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(()=>!1)),xC.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(()=>1e5)),xC.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(()=>128)),xC.registerFlag("WEBGL_EXP_CONV",(()=>!1)),xC.registerFlag("SOFTWARE_WEBGL_ENABLED",(()=>xC.getBool("IS_TEST"))),xC.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",(()=>1/0)),xC.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",(()=>!1)),xC.registerFlag("WEBGL2_ISNAN_CUSTOM",(()=>!1)),xC.registerFlag("ENGINE_COMPILE_ONLY",(()=>!1));const kC="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",{getBroadcastDims:jC}=s;function AC(e,t,n){const r=[];if(e.forEach((e=>{const t=lv(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push(`uniform float ${e.name}${t>1?`[${t}]`:""};`):(r.push(`uniform sampler2D ${e.name};`),r.push(`uniform int offset${e.name};`)),n.enableShapeUniforms){const{uniformShape:t}=BC(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape);switch(t.length){case 1:r.push(`uniform int ${e.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${e.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${e.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${e.name}Shape;`)}r.push(`uniform ivec2 ${e.name}TexShape;`)}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((e=>{r.push(`uniform ${e.type} ${e.name}${e.arrayIndex?`[${e.arrayIndex}]`:""};`)}));const i=r.join("\n"),o=e.map((e=>function(e,t,n=!1,r){let i="";i+=n?OC(e,r):CC(e,r);const o=e.shapeInfo.logicalShape,a=t.logicalShape;return o.length<=a.length&&(i+=n?function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",o=e.shapeInfo.logicalShape.length,a=t.logicalShape.length,s=jC(e.shapeInfo.logicalShape,t.logicalShape),l=FC(a),c=a-o;let u;const p=["x","y","z","w","u","v"];u=0===o?"":a<2&&s.length>=1?"coords = 0;":s.map((e=>`coords.${p[e+c]} = 0;`)).join("\n");let d="";d=a<2&&o>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>`coords.${p[t+c]}`)).join(", ");let h="return outputValue;";const m=1===lv(e.shapeInfo.logicalShape),f=1===lv(t.logicalShape);if(1!==o||m||f){if(m&&!f)h=1===a?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(s.length){const e=o-2,t=o-1;s.indexOf(e)>-1&&s.indexOf(t)>-1?h="return vec4(outputValue.x);":s.indexOf(e)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":s.indexOf(t)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}}else h="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return`\n    vec4 ${i}() {\n      ${l} coords = getOutputCoords();\n      ${u}\n      vec4 outputValue = get${r}(${d});\n      ${h}\n    }\n  `}(e,t):function(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",o=t.texShape,a=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,l=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===l&&null==e.shapeInfo.flatOffset&&cv(a,o))return`\n      float ${i}() {\n        return sampleTexture(${n}, resultUV);\n      }\n    `;const c=FC(l),u=jC(e.shapeInfo.logicalShape,t.logicalShape),p=l-s;let d;const h=["x","y","z","w","u","v"];d=0===s?"":l<2&&u.length>=1?"coords = 0;":u.map((e=>`coords.${h[e+p]} = 0;`)).join("\n");let m="";return m=l<2&&s>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>`coords.${h[t+p]}`)).join(", "),`\n    float ${i}() {\n      ${c} coords = getOutputCoords();\n      ${d}\n      return get${r}(${m});\n    }\n  `}(e,t)),i}(e,t,n.packedInputs,n.enableShapeUniforms))).join("\n"),a=t.texShape,s=SC(),l=function(e){return`\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ${e.texture2D}(textureSampler, uv).r;\n    }\n  `}(s);let c,u,p=function(e){return`${e.version}\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ${e.varyingFs} vec2 resultUV;\n    ${e.defineOutput}\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ${e.defineSpecialNaN}\n    ${e.defineSpecialInf}\n    ${e.defineRound}\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ${MC}\n    ${NC}\n    ${RC}\n  `}(s);return t.isPacked?(c=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return 1===r[0]?n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ${r[1]}.0);\n      }\n    `:1===r[1]?n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ${r[0]}.0);\n      }\n    `:n?"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ":`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);\n    }\n  `}(0,t,n);case 2:return function(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(cv(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));\n      }\n    `;const i=Math.ceil(e[1]/2);return n?"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ":`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n      int r = 2 * (index / ${i});\n      int c = imod(index, ${i}) * 2;\n\n      return ivec2(r, c);\n    }\n  `}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],i=Math.ceil(e[2]/2),o=i*Math.ceil(e[1]/2);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n\n      int b = index / ${o};\n      index -= b * ${o};\n\n      int r = 2 * (index / ${i});\n      int c = imod(index, ${i}) * 2;\n\n      return ivec3(b, r, c);\n    }\n  `}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],i=Math.ceil(e[e.length-1]/2),o=i*Math.ceil(e[e.length-2]/2);let a=o,s="",l="b, r, c";for(let t=2;t<e.length-1;t++)a*=e[e.length-t-1],s=`\n      int b${t} = index / ${a};\n      index -= b${t} * ${a};\n    `+s,l=`b${t}, `+l;return`\n    ivec${e.length} getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n\n      ${s}\n\n      int b = index / ${o};\n      index -= b * ${o};\n\n      int r = 2 * (index / ${i});\n      int c = imod(index, ${i}) * 2;\n\n      return ivec${e.length}(${l});\n    }\n  `}(e,t,n)}}(t.logicalShape,a,n.enableShapeUniforms),u=function(e){return`\n    void setOutput(vec4 val) {\n      ${e.output} = val;\n    }\n  `}(s)):(c=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){return 1===t[0]?n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.x * ${t[1]}.0);\n      }\n    `:1===t[1]?n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.y * ${t[0]}.0);\n      }\n    `:n?"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ":`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      return resTexRC.x * ${t[1]} + resTexRC.y;\n    }\n  `}(0,t,n);case 2:return function(e,t,n){return cv(e,t)?n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));\n      }\n    `:1===e[1]?n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    `:1===e[0]?n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(0, index);\n      }\n    `:n?"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ":`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      int r = index / ${e[1]};\n      int c = index - r * ${e[1]};\n      return ivec2(r, c);\n    }\n  `}(e,t,n);case 3:return function(e,t,n){if(n)return`\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ${EC(["r","c","d"],e)}\n    return ivec3(r, c, d);\n  }\n`;const r=TC(["r","c","d"],e);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      ${r}\n      return ivec3(r, c, d);\n    }\n  `}(e,t,n);case 4:return function(e,t,n){if(n)return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ${EC(["r","c","d","d2"],e)}\n      return ivec4(r, c, d, d2);\n    }\n  `;const r=TC(["r","c","d","d2"],e);return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      ${r}\n      return ivec4(r, c, d, d2);\n    }\n  `}(e,t,n);case 5:return function(e,t){const n=TC(["r","c","d","d2","d3"],e);return`\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${t[0]},\n                             ${t[1]}));\n\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  `}(e,t);case 6:return function(e,t){const n=TC(["r","c","d","d2","d3","d4"],e);return`\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  `}(e,t);default:throw new Error(`${e.length}-D output sampling is not yet supported`)}}(t.logicalShape,a,n.enableShapeUniforms),u=function(e){return`\n    void setOutput(float val) {\n      ${e.output} = vec4(val, 0, 0, 0);\n    }\n  `}(s)),n.packedInputs&&(p+=PC),[p,l,u,i,c,o,n.userCode].join("\n")}function CC(e,t=!1){const n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[i,o]=e.shapeInfo.texShape;if(1===i&&1===o)return`\n      float ${r}() {\n        return sampleTexture(${n}, halfCR);\n      }\n    `;const a=DC(n);if(t)return`\n    float ${r}() {\n      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${a});\n      return sampleTexture(${n}, uv);\n    }\n  `;const[s,l]=e.shapeInfo.texShape;return`\n    float ${r}() {\n      vec2 uv = uvFromFlat(${s}, ${l}, ${a});\n      return sampleTexture(${n}, uv);\n    }\n  `}(e,t);case 1:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`\n      float ${r}(int index) {\n        ${LC(e)}\n      }\n    `;const i=e.shapeInfo.texShape,o=i[0],a=i[1];if(1===a&&1===o)return`\n      float ${r}(int index) {\n        return sampleTexture(${n}, halfCR);\n      }\n    `;const s=DC(n);return 1===a?t?`\n      float ${r}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / float(${n}TexShape[0]));\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n      float ${r}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / ${o}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `:1===o?t?`\n      float ${r}(int index) {\n        vec2 uv = vec2((float(index + ${s}) + 0.5) / float(${n}TexShape[1]), 0.5);\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n      float ${r}(int index) {\n        vec2 uv = vec2((float(index + ${s}) + 0.5) / ${a}.0, 0.5);\n        return sampleTexture(${n}, uv);\n      }\n    `:t?`\n    float ${r}(int index) {\n      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${s});\n      return sampleTexture(${n}, uv);\n    }\n  `:`\n    float ${r}(int index) {\n      vec2 uv = uvFromFlat(${o}, ${a}, index + ${s});\n      return sampleTexture(${n}, uv);\n    }\n  `}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape;if(null!=o&&cv(n,o)){if(t)return`\n      float ${i}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `;const e=o[0];return`\n    float ${i}(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(${o[1]}.0, ${e}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `}const{newShape:a,keptDims:s}=gv(n),l=a;if(l.length<n.length){const n=["row","col"];return`\n      ${CC(UC(e,l),t)}\n      float ${i}(int row, int col) {\n        return ${i}(${VC(n,s)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${i}(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));\n        ${LC(e)}\n      }\n    `;const c=o[0],u=o[1],p=DC(r);return 1===u?t?`\n      float ${i}(int row, int col) {\n        float index = dot(vec3(row, col, ${p}), vec3(${r}Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${i}(int row, int col) {\n      float index = dot(vec3(row, col, ${p}), vec3(${n[1]}, 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `:1===c?t?`\n      float ${i}(int row, int col) {\n        float index = dot(vec3(row, col, ${p}), vec3(${r}Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${i}(int row, int col) {\n      float index = dot(vec3(row, col, ${p}), vec3(${n[1]}, 1, 1));\n      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);\n      return sampleTexture(${r}, uv);\n    }\n  `:t?`\n      float ${i}(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${r}Shape[1] + col + ${p};\n        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n  float ${i}(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ${n[1]} + col + ${p};\n    vec2 uv = uvFromFlat(${c}, ${u}, index);\n    return sampleTexture(${r}, uv);\n  }\n`}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[1]*n[2],a=n[2],{newShape:s,keptDims:l}=gv(n),c=s;if(c.length<n.length){const n=["row","col","depth"];return`\n        ${CC(UC(e,c),t)}\n        float ${i}(int row, int col, int depth) {\n          return ${i}(${VC(n,l)});\n        }\n      `}if(e.shapeInfo.isUniform)return`\n      float ${i}(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(${o}, ${a}, 1)));\n        ${LC(e)}\n      }\n    `;const u=e.shapeInfo.texShape,p=u[0],d=u[1],h=e.shapeInfo.flatOffset;if(d===o&&null==h)return t?`\n      float ${i}(int row, int col, int depth) {\n        int stride1 = ${r}Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n        float ${i}(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(${a}, 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(${d}.0, ${p}.0);\n          return sampleTexture(${r}, uv);\n        }\n      `;if(d===a&&null==h)return t?`\n      float ${i}(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${i}(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${d}.0, ${p}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `;const m=DC(r);return t?`\n    float ${i}(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ${r}Shape[1] * ${r}Shape[2];\n      int stride1 = ${r}Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ${m};\n      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);\n      return sampleTexture(${r}, uv);\n    }\n    `:`\n      float ${i}(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${o} + col * ${a} + depth + ${m};\n        vec2 uv = uvFromFlat(${p}, ${d}, index);\n        return sampleTexture(${r}, uv);\n      }\n  `}(e,t);case 4:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[3],a=n[2]*o,s=n[1]*a,{newShape:l,keptDims:c}=gv(n);if(l.length<n.length){const n=["row","col","depth","depth2"];return`\n      ${CC(UC(e,l),t)}\n      float ${i}(int row, int col, int depth, int depth2) {\n        return ${i}(${VC(n,c)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${i}(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(${s}, ${a}, ${o}, 1)));\n        ${LC(e)}\n      }\n    `;const u=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,d=p[0],h=p[1],m=`int stride2 = ${r}Shape[3];`,f=`int stride1 = ${r}Shape[2] * stride2;`,g=`int stride0 = ${r}Shape[1] * stride1;`;if(h===s&&null==u)return t?`\n      float ${i}(int row, int col, int depth, int depth2) {\n        ${m}\n        ${f}\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n      float ${i}(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(${a}, ${o}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${h}.0, ${d}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `;if(h===o&&null==u)return t?`\n      float ${i}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n      float ${i}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${n[1]*n[2]}, ${n[2]}, 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${h}.0, ${d}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `;const y=DC(r);return t?`\n    float ${i}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ${m}\n      ${f}\n      ${g}\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${y});\n      return sampleTexture(${r}, uv);\n    }\n  `:`\n    float ${i}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${s} + col * ${a} +\n          depth * ${o} + depth2;\n      vec2 uv = uvFromFlat(${d}, ${h}, index + ${y});\n      return sampleTexture(${r}, uv);\n    }\n  `}(e,t);case 5:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t[4],o=t[3]*i,a=t[2]*o,s=t[1]*a,{newShape:l,keptDims:c}=gv(t);if(l.length<t.length){const t=["row","col","depth","depth2","depth3"];return`\n      ${CC(UC(e,l))}\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        return ${r}(${VC(t,c)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${s}, ${a}, ${o}, ${i})) +\n          depth3;\n        ${LC(e)}\n      }\n    `;const u=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,d=p[0],h=p[1];if(h===s&&null==u)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(${a}, ${o}, ${i}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${h}.0, ${d}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(h===i&&null==u)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]},\n               ${t[2]*t[3]}, ${t[3]}, 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${h}.0, ${d}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;return`\n    float ${r}(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${s} + col * ${a} + depth * ${o} +\n          depth2 * ${i} + depth3 + ${DC(n)};\n      vec2 uv = uvFromFlat(${d}, ${h}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}(e);case 6:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:i,keptDims:o}=gv(t);if(i.length<t.length){const t=["row","col","depth","depth2","depth3","depth4"];return`\n      ${CC(UC(e,i))}\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ${r}(${VC(t,o)});\n      }\n    `}const a=t[5],s=t[4]*a,l=t[3]*s,c=t[2]*l,u=t[1]*c;if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(${u}, ${c}, ${l}, ${s})) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(${a}, 1)));\n        ${LC(e)}\n      }\n    `;const p=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,h=d[0],m=d[1];if(m===u&&null==p)return`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(${c}, ${l}, ${s}, ${a})) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${m}.0, ${h}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(m===a&&null==p)return`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]*t[4]},\n               ${t[2]*t[3]*t[4]},\n               ${t[3]*t[4]},\n               ${t[4]})) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${m}.0, ${h}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;return`\n    float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${u} + col * ${c} + depth * ${l} +\n          depth2 * ${s} + depth3 * ${a} + depth4 + ${DC(n)};\n      vec2 uv = uvFromFlat(${h}, ${m}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}(e);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function OC(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){const t=e.name;return`\n    vec4 ${"get"+t.charAt(0).toUpperCase()+t.slice(1)}() {\n      return ${SC().texture2D}(${t}, halfCR);\n    }\n  `}(e);case 1:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e.shapeInfo.texShape,o=SC();if(t)return`\n    vec4 ${r}(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ${o.texture2D}(${n}, uv);\n    }\n  `;const a=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`\n    vec4 ${r}(int index) {\n      vec2 uv = packedUVfrom1D(\n        ${a[0]}, ${a[1]}, index);\n      return ${o.texture2D}(${n}, uv);\n    }\n  `}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,a=o[0],s=o[1],l=SC();if(null!=o&&cv(n,o))return t?`\n      vec4 ${i}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n\n        return ${l.texture2D}(${r}, uv);\n      }\n    `:`\n      vec4 ${i}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}.0, ${a}.0);\n\n        return ${l.texture2D}(${r}, uv);\n      }\n    `;if(t)return`\n    vec4 ${i}(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ${l.texture2D}(${r}, uv);\n    }\n  `;const c=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];return`\n    vec4 ${i}(int row, int col) {\n      vec2 uv = packedUVfrom2D(${Math.ceil(n[1]/2)}, ${c[0]}, ${c[1]}, row, col);\n      return ${l.texture2D}(${r}, uv);\n    }\n  `}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,a=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(1===n[0]){const r=[1,2],o=["b","row","col"];return`\n        ${OC(UC(e,n.slice(1)),t)}\n        vec4 ${i}(int b, int row, int col) {\n          return ${i}(${VC(o,r)});\n        }\n      `}const s=SC();if(t)return`\n    vec4 ${i}(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ${s.texture2D}(${r}, uv);\n    }\n  `;const l=a[0],c=a[1],u=Math.ceil(n[2]/2);return`\n    vec4 ${i}(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ${l}, ${c}, ${u*Math.ceil(n[1]/2)}, ${u}, b, row, col);\n      return ${s.texture2D}(${r}, uv);\n    }\n  `}(e,t);default:return function(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=SC();if(t)return`\n    vec4 ${r}(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ${n}Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${i.texture2D}(${n}, uv);\n    }\n  `;const o=e.shapeInfo.logicalShape,a=o.length,s=e.shapeInfo.texShape,l=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],c=l[0],u=l[1],p=Math.ceil(o[a-1]/2);let d=p*Math.ceil(o[a-2]/2),h="int b, int row, int col",m=`b * ${d} + (row / 2) * ${p} + (col / 2)`;for(let e=2;e<a-1;e++)h=`int b${e}, `+h,d*=o[a-e-1],m=`b${e} * ${d} + `+m;return`\n    vec4 ${r}(${h}) {\n      int index = ${m};\n      int texR = index / ${u};\n      int texC = index - texR * ${u};\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${c});\n      return ${i.texture2D}(${n}, uv);\n    }\n  `}(e,t)}}const MC="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",NC="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",RC="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",PC="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function DC(e){return`offset${e}`}function LC(e){const t=e.name,n=lv(e.shapeInfo.logicalShape);return n<2?`return ${t};`:`\n    for (int i = 0; i < ${n}; i++) {\n      if (i == index) {\n        return ${t}[i];\n      }\n    }\n  `}function FC(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function BC(e,t,n){const{newShape:r,keptDims:i}=gv(t),o=t.length,a=e&&3===o&&1===t[0],s=a?t.slice(1):r,l=!e&&o>1&&!cv(t,n)&&r.length<o||a;return{useSqueezeShape:l,uniformShape:l?s:t,keptDims:i}}function UC(e,t){const n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function VC(e,t){return t.map((t=>e[t])).join(", ")}function GC(e,t,n){const r=[],i=[];let o,a,s,l=null,c=null;c=e.getUniformLocation(n,"NAN",!1),1===Dv().getNumber("WEBGL_VERSION")&&(l=e.getUniformLocation(n,"INFINITY",!1));const u=!1;for(const i of t.variableNames){const o={name:i,uniform:e.getUniformLocation(n,i,u),offset:e.getUniformLocation(n,`offset${i}`,u)};t.enableShapeUniforms&&(o.shape=e.getUniformLocation(n,`${i}Shape`,u),o.texShape=e.getUniformLocation(n,`${i}TexShape`,u)),r.push(o)}if(t.enableShapeUniforms&&(o=e.getUniformLocation(n,"outShape",u),s=e.getUniformLocation(n,"outShapeStrides",u),a=e.getUniformLocation(n,"outTexShape",u)),t.customUniforms)for(const r of t.customUniforms)i.push(e.getUniformLocation(n,r.name,u));return{variablesLocations:r,customUniformLocations:i,infLoc:l,nanLoc:c,outShapeLocation:o,outShapeStridesLocation:s,outTexShapeLocation:a}}function zC(e,t){if(e.length!==t.length)throw Error(`Binary was compiled with ${e.length} inputs, but was executed with ${t.length} inputs`);e.forEach(((e,n)=>{const r=e.logicalShape,i=t[n],o=i.shape;if(!cv(r,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${r} and ${o} must match`);if(e.isUniform&&i.isUniform)return;const a=e.texShape,s=i.isUniform?null:i.texData.texShape;if(!cv(a,s))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${s} must match`)}))}function $C(e){return Dv().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}class qC{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=WA.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=SC();this.outputShape=e,this.enableShapeUniforms=$C(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?EC(["r","c","d"],e):TC(["r","c","d"],e)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ${t.output} = result;\n      }\n    `}}class HC{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=WA.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=SC();this.outputShape=e,this.enableShapeUniforms=$C(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?EC(["r","c","d"],e):TC(["r","c","d"],e)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ${t.output} = result;\n      }\n    `}}class WC{constructor(e){this.variableNames=["A"],this.outTexUsage=KA.DOWNLOAD;const t=SC();this.outputShape=e,this.userCode=`\n      ${kC}\n\n      void main() {\n        float x = getAAtOutCoords();\n        ${t.output} = encode_float(x);\n      }\n    `}}class KC{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=KA.DOWNLOAD;const t=SC();this.outputShape=e,this.userCode=`\n      ${kC}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ${t.output} = encode_float(x);\n      }\n    `}}const XC={R:0,G:1,B:2,A:3};class YC{constructor(e,t=!1,n="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=SC();this.outputShape=e,this.enableShapeUniforms=$C(this.outputShape.length);let i="result";t&&(i="floor(result * 255. + 0.5)");let o="";for(let e=0;e<n.length;e++){const t=n[e];o+=`\n          if(offset == ${e}) {\n            result = values[${XC[t]}];\n          }`}this.userCode=`\n      ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":IC(e)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ${n.length});\n\n        flatIndex = idiv(flatIndex, ${n.length}, 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ${r.texture2D}(A, uv);\n          ${o}\n        }\n        ${r.output} = vec4(${i}, 0., 0., 0.);\n      }\n    `}}class JC{constructor(e,t=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=SC();this.outputShape=e,this.enableShapeUniforms=$C(this.outputShape.length);let r="",i="result";t&&(i="floor(result * 255. + 0.5)");for(let t=0;t<=1;t++)for(let i=0;i<=1;i++){const o=2*t+i;r+=`\n          localCoords = coords;\n          if(localCoords[2] + ${i} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {\n          localCoords[2] += ${i};\n          if (localCoords[1] + ${t} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {\n            localCoords[1] += ${t};\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ${n.texture2D}(A, uv);\n\n            if (offset == 0) {\n              result[${o}] = values[0];\n            } else if (offset == 1) {\n              result[${o}] = values[1];\n            } else if (offset == 2) {\n              result[${o}] = values[2];\n            } else {\n              result[${o}] = values[3];\n            }\n          }\n        }\n        `}this.userCode=`\n        ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":IC(e)}\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ${r}\n\n          ${n.output} = ${i};\n        }\n    `}}function QC(e,t,n,r,i,o){!function(e,t){const n=Dv().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0)throw new Error(`Requested texture size [${e}x${t}] is invalid.`);if(e>n||t>n)throw new Error(`Requested texture size [${e}x${t}] greater than WebGL maximum on this browser / GPU [${n}x${n}].`)}(t,n);const a=function(e){return pC(e,(()=>e.createTexture()),"Unable to create WebGLTexture.")}(e),s=e.TEXTURE_2D;return eC(e,(()=>e.bindTexture(s,a))),eC(e,(()=>e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE))),eC(e,(()=>e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE))),eC(e,(()=>e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST))),eC(e,(()=>e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST))),1===Dv().getNumber("WEBGL_VERSION")?eC(e,(()=>e.texImage2D(s,0,r,t,n,0,i,o,null))):eC(e,(()=>e.texStorage2D(s,1,r,t,n))),eC(e,(()=>e.bindTexture(e.TEXTURE_2D,null))),{texture:a,texShape:[n,t]}}function ZC(e){return e.internalFormatFloat}function eO(e){return e.internalFormatHalfFloat}function tO(e){return e.downloadTextureFormat}function nO(e){return e.internalFormatPackedFloat}function rO(e){return e.internalFormatPackedHalfFloat}class iO{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const t=Dv().getNumber("WEBGL_VERSION");if(null!=e?(this.gl=e,function(e,t){$A[e]=t}(t,e)):this.gl=HA(t),e=this.gl,2===Dv().getNumber("WEBGL_VERSION")){const t=e;this.createVertexArray=()=>eC(t,(()=>t.createVertexArray())),this.bindVertexArray=e=>eC(t,(()=>t.bindVertexArray(e))),this.deleteVertexArray=e=>eC(t,(()=>t.deleteVertexArray(e))),this.getVertexArray=()=>eC(t,(()=>t.getParameter(t.VERTEX_ARRAY_BINDING)))}else if(null!=e){const t=e.getExtension("OES_vertex_array_object");if(null==t)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>eC(e,(()=>t.createVertexArrayOES())),this.bindVertexArray=n=>eC(e,(()=>t.bindVertexArrayOES(n))),this.deleteVertexArray=n=>eC(e,(()=>t.deleteVertexArrayOES(n))),this.getVertexArray=()=>eC(e,(()=>e.getParameter(t.VERTEX_ARRAY_BINDING_OES)))}let n="WEBGL_color_buffer_float";const r="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===Dv().getNumber("WEBGL_VERSION")){const e="OES_texture_float",t="OES_texture_half_float";if(this.textureFloatExtension=nC(this.gl,e),vC(this.gl,t))this.textureHalfFloatExtension=nC(this.gl,t);else if(Dv().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),vC(this.gl,r))this.colorBufferHalfFloatExtension=nC(this.gl,r);else if(Dv().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",vC(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!vC(this.gl,r))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(r)}this.vertexBuffer=function(e){return function(e,t){const n=pC(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return eC(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,n))),eC(e,(()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW))),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}(this.gl),this.indexBuffer=function(e){return function(e,t){const n=pC(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return eC(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n))),eC(e,(()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW))),n}(e,new Uint16Array([0,1,2,2,1,3]))}(this.gl),this.framebuffer=function(e){return pC(e,(()=>e.createFramebuffer()),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=ZA(this.gl,this.textureHalfFloatExtension)}get debug(){return Dv().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;eC(e,(()=>e.finish())),eC(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,null))),eC(e,(()=>e.deleteFramebuffer(this.framebuffer))),eC(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,null))),eC(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null))),eC(e,(()=>e.deleteBuffer(this.indexBuffer))),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[i,o]=YA(t,n);return QC(e,i,o,ZC(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[i,o]=YA(t,n);return QC(e,i,o,eO(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[i,o]=YA(t,n);return QC(e,i,o,tO(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),function(e,t,n){eC(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),n.data instanceof Uint8Array?2===Dv().getNumber("WEBGL_VERSION")?eC(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data))):eC(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data))):2===Dv().getNumber("WEBGL_VERSION")?eC(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n))):eC(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n))),eC(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,i,o){let a,s,l;eC(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),i instanceof Uint8Array?(a=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,l=e.RGBA):(a=new Float32Array(n*r*4),s=e.FLOAT,l=o.internalFormatPackedFloat),a.set(i),2===Dv().getNumber("WEBGL_VERSION")?eC(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,s,a))):eC(e,(()=>e.texImage2D(e.TEXTURE_2D,0,l,n,r,0,e.RGBA,s,a))),eC(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}(this.gl,e,t,n,r,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[i,o]=QA(t,n);return QC(e,i,o,rO(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){const[i,o]=QA(t,n);return QC(e,i,o,nO(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(cC(this.gl,this.framebuffer),this.outputTexture=null),eC(this.gl,(()=>this.gl.deleteTexture(e)))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,n){return this.downloadMatrixDriver(e,(()=>function(e,t,n,r){const[i,o]=YA(t,n),a=new Uint8Array(t*n*4);return eC(e,(()=>e.readPixels(0,0,i,o,r.downloadTextureFormat,e.UNSIGNED_BYTE,a))),new Float32Array(a.buffer)}(this.gl,t,n,this.textureConfig)))}downloadPackedMatrixFromBuffer(e,t,n,r,i,o){return function(e,t,n,r,i,o,a){const s=e,l=new Float32Array(function(e,t){const[n,r]=QA(e,t);return n*r*4}(o,a));return s.bindBuffer(s.PIXEL_PACK_BUFFER,t),s.getBufferSubData(s.PIXEL_PACK_BUFFER,0,l),s.bindBuffer(s.PIXEL_PACK_BUFFER,null),l}(this.gl,e,0,0,0,i,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return function(e,t,n){const r=e,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}(this.gl,e,t)}createBufferFromTexture(e,t,n){this.bindTextureToFrameBuffer(e);const r=function(e,t,n){const r=e.createBuffer();eC(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,r)));const i=16*t*n;return eC(e,(()=>e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ))),eC(e,(()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0))),eC(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null))),r}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,n;if(Dv().getBool("WEBGL_FENCE_API_ENABLED")){const r=e,i=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=()=>{const e=r.clientWaitSync(i,0,0);return e===r.ALREADY_SIGNALED||e===r.CONDITION_SATISFIED},t=i}else Dv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(t,Dv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:t,isFencePassed:n}}downloadMatrixFromPackedTexture(e,t,n){return this.downloadMatrixDriver(e,(()=>function(e,t,n){const r=new Float32Array(t*n*4);return eC(e,(()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r))),r}(this.gl,t,n)))}createProgram(e){this.throwIfDisposed();const t=this.gl;null==this.vertexShader&&(this.vertexShader=function(e){const t=SC();return function(e,t){const n=pC(e,(()=>e.createShader(e.VERTEX_SHADER)),"Unable to create vertex WebGLShader.");if(eC(e,(()=>e.shaderSource(n,t))),eC(e,(()=>e.compileShader(n))),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,`${t.version}\n    precision highp float;\n    ${t.attribute} vec3 clipSpacePos;\n    ${t.attribute} vec2 uv;\n    ${t.varyingVs} vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }`)}(t));const n=function(e){return pC(e,(()=>e.createProgram()),"Unable to create WebGLProgram.")}(t);eC(t,(()=>t.attachShader(n,this.vertexShader))),eC(t,(()=>t.attachShader(n,e))),function(e,t){if(eC(e,(()=>e.linkProgram(t))),!Dv().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(t,n);const r=Object.assign(n,{vao:this.createVertexArray()});return this.debug&&oC(t,r),r}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const t=this.gl;eC(t,(()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer))),function(e,t,n){eC(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,n))),aC(e,t,"clipSpacePos",n,3,20,0)&&aC(e,t,"uv",n,2,20,12)}(t,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&(eC(this.gl,(()=>this.gl.deleteProgram(e))),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&oC(this.gl,this.program),eC(this.gl,(()=>this.gl.useProgram(e)))}getUniformLocation(e,t,n=!0){return this.throwIfDisposed(),n?function(e,t,n){return pC(e,(()=>e.getUniformLocation(t,n)),'uniform "'+n+'" not present in program.')}(this.gl,e,t):function(e,t,n){return e.getUniformLocation(t,n)}(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),eC(this.gl,(()=>this.gl.getAttribLocation(e,t)))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),sC(this.gl,e,t,n)}setOutputMatrixTexture(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}setOutputPackedMatrixTexture(e,t,n){this.throwIfDisposed();const[r,i]=QA(t,n);this.setOutputMatrixTextureDriver(e,r,i)}setOutputMatrixWriteRegion(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}setOutputPackedMatrixWriteRegion(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&oC(this.gl,this.program),uC(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const e=this.getVertexArray();console.assert(e===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}eC(e,(()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),eC(this.gl,(()=>this.gl.finish()))}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=nC(this.gl,2===Dv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===Dv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}const e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(2===Dv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2();return void e.endQuery(t.TIME_ELAPSED_EXT)}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await hv((()=>this.disposed||this.isQueryAvailable(e,Dv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")))),this.getQueryTime(e,Dv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(0===t)return null;if(2===t){const t=this.gl;return t.getQueryParameter(e,t.QUERY_RESULT)/1e6}{const t=this.getQueryTimerExtensionWebGL1();return t.getQueryObjectEXT(e,t.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(0===t)return!0;if(2===t){const t=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),r&&!this.disjoint}{const t=this.getQueryTimerExtensionWebGL1(),n=t.getQueryObjectEXT(e,t.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(t.GPU_DISJOINT_EXT)),n&&!this.disjoint}}pollFence(e){return new Promise((t=>{this.addItemToPoll((()=>e.isFencePassed()),(()=>t()))}))}pollItems(){const e=function(e){let t=0;for(;t<e.length&&e[t]();++t);return t-1}(this.itemsToPoll.map((e=>e.isDoneFn)));for(let t=0;t<=e;++t){const{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1)return;let n;"setTimeoutCustom"in Dv().platform&&(n=Dv().platform.setTimeoutCustom.bind(Dv().platform)),hv((()=>(this.pollItems(),0===this.itemsToPoll.length)),(()=>0),null,n)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),lC(this.gl,e,this.framebuffer),this.debug&&uC(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(lC(this.gl,this.outputTexture,this.framebuffer),this.debug&&uC(this.gl)):cC(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);const n=t();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(e,t,n){this.throwIfDisposed();const r=this.gl;lC(r,e,this.framebuffer),this.debug&&uC(r),this.outputTexture=e,eC(r,(()=>r.viewport(0,0,t,n))),eC(r,(()=>r.scissor(0,0,t,n)))}setOutputMatrixWriteRegionDriver(e,t,n,r){this.throwIfDisposed(),eC(this.gl,(()=>this.gl.scissor(e,t,n,r)))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}function oO(e){const t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}function aO(e,t,n,r,i){const o=lv(r),a=jv(i,n);for(let n=0;n<e.length;n++){const r=e[n];if(r<0)throw new Error("Input x must be non-negative!");r>=i||(a[r]+=o>0?t[n]:1)}return a}function sO(e,t,n,r=!1){const i=e.shape[0],o=e.shape[1],a=tS([i,n],t.dtype);for(let s=0;s<i;s++)for(let i=0;i<o;i++){const o=e.get(s,i);if(o<0)throw new Error("Input x must be non-negative!");o>=n||(r?a.set(1,s,o):t.size>0?a.set(a.get(s,o)+t.get(s,i),s,o):a.set(a.get(s,o)+1,s,o))}return a}const lO=ej(((e,t)=>e&t)),cO=(Sj("BitwiseAnd",lO),dj((e=>Math.ceil(e)))),uO=(mj("Ceil",cO),dj((e=>Math.expm1(e)))),pO=(mj("Expm1",uO),dj((e=>Math.floor(e)))),dO=(mj("Floor",pO),ej(((e,t)=>e>t?1:0))),hO=(Sj("Greater",dO,null,"bool"),ej(((e,t)=>e<=t?1:0)));function mO(e,t,n){const r=(t-e)/(n-1),i=jv(n,"float32");i[0]=e;for(let e=1;e<i.length;e++)i[e]=i[e-1]+r;return i}Sj("LessEqual",hO,null,"bool");const fO=dj((e=>Math.log(e))),gO=(mj("Log",fO),ej(((e,t)=>e!==t?1:0)));function yO(e,t,n,r){const[i,o]=xT(e,r),a=Ew(t,"int32"),s=jv(lv(i),a),l=lv(o);for(let e=0;e<s.length;++e){const t=e*l;let r=1;for(let e=0;e<l;++e)r*=n[t+e];s[e]=r}return{outVals:s,outShape:i,outDtype:a}}function _O(e,t){const n=e.slice(0,t);for(;n.length<t;)n.push(1);for(let r=t;r<e.length;r++)n[t-1]*=e[r];return n}function vO(e,t,n,r,i,o,a,s){if(0===e.length)throw new Error("paramsNestedSplits must be non empty");if(0===t[0].length)throw new Error("Split tensors must not be scalars");if(function(e,t,n){e.forEach(((e,r)=>{if(e<0||e>=n){const i=Ov(r,t.length,Ev(t)).join(",");throw new Error(`indices[${i}] = ${e} is not in [0, ${n})`)}}))}(o,a,t[0][0]-1),0===r.length)throw new Error("params.rank must be nonzero");const l=r[0],{outSplits:c,valueSlices:u,numValues:p}=function(e,t,n,r){const i=[];let o=0;const a=t.length-1+n.length,s=new Array(a).fill(null).map((()=>[0]));!function(e,t){for(let n=0;n<e.length;++n){const r=e[n],i=n===e.length-1?t:e[n+1].length;if(0===r.length)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>i)throw new Error("Ragged splits must not point past values");for(let e=1;e<r.length;++e)if(r[e-1]>r[e])throw new Error("Ragged splits must be sorted in ascending order")}}(n,r);let l=1;for(let e=0;e<t.length-1;++e){l*=t[e];const n=t[e+1];for(let t=1;t<l+1;++t)s[e].push(t*n)}for(let r=0;r<e.length;++r){let a=e[r],l=e[r]+1;for(let e=0;e<n.length;++e){const r=n[e],i=e+t.length-1;if(i>=0){const e=s[i],t=e[e.length-1]-r[a];for(let e=a;e<l;++e)s[i].push(r[e+1]+t)}a=r[a],l=r[l]}l!==a&&(i.push([a,l]),o+=l-a)}return{outSplits:s,valueSlices:i,numValues:o}}(o,a,e,l),d=function(e){const t=[];for(let n=0;n<e.length;++n){const r=_v("int32",e[n].length);t.push(r),e[n].forEach(((e,t)=>r[t]=e))}return t}(c),h=function(e,t,n,r,i){const o=t.slice();o[0]=i;const a=_v(n,lv(o)),s=e.length;return function(e,t,n,r,i,o){const a=_O(t,2)[1],s=_O(o,2)[1];let l=0;for(const t of n)for(let n=t[0];n<t[1];++n){for(let t=0;t<r;++t)i[l*s+t]=e[n*a+t];++l}}(e,t,r,0===s?0:s/t[0],a,o),[a,o]}(n,r,i,u,p);return[d,h[0],h[1]]}Sj("NotEqual",gO,null,"bool");const bO=2147483647;function wO(e,t,n,r,i,o,a){if(t.length>1)throw new Error("starts must be a scalar or vector");if(i.length>1)throw new Error("limits must be a scalar or vector");if(a.length>1)throw new Error("deltas must be a scalar or vector");const s=0===t.length,l=0===i.length,c=0===a.length,u=[];s||u.push(t[0]),l||u.push(i[0]),c||u.push(a[0]);for(let e=1;e<u.length;++e)if(u[e]!==u[e-1])throw new Error("starts, limits, and deltas must have the same shape");const p=0===u.length?1:u[0],d=_v("int32",p+1);d[0]=0;for(let t=0;t<p;++t){const n=s?e[0]:e[t],i=l?r[0]:r[t],a=c?o[0]:o[t];if(0===a)throw new Error("Requires delta != 0");let u;if(a>0&&i<n||a<0&&i>n)u=0;else if(u=Math.ceil(Math.abs((i-n)/a)),u>bO)throw new Error(`Requires ((limit - start) / delta) <= ${bO}`);d[t+1]=d[t]+u}const h=_v(n,d[p]);let m=0;for(let t=0;t<p;++t){const n=d[t+1]-d[t];let r=s?e[0]:e[t];const i=c?o[0]:o[t];for(let e=0;e<n;++e)h[m++]=r,r+=i}return[d,h]}var xO=uE;class SO{constructor(e,t,n,r,i,o,a,s,l,c){this.shape=e,this.shapeShape=t,this.values=n,this.valuesShape=r,this.valuesDType=i,this.defaultValue=o,this.defaultValueShape=a,this.rowPartitionValues=s,this.rowPartitionValuesShapes=l,this.rowPartitionTypes=dE(c),this.raggedRank=hE(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===xO.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===xO.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const t=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case xO.VALUE_ROWIDS:return SO.getMaxWidthValueRowID(t);case xO.ROW_SPLITS:return SO.getMaxWidthRowSplit(t);default:throw new Error(`Cannot handle partition type ${xO[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const t=e.length;if(0===t||1===t)return 0;let n=0;for(let r=0;r<t-1;++r){const t=e[r+1]-e[r];t>n&&(n=t)}return n}static getMaxWidthValueRowID(e){const t=e.length;if(0===t)return 0;let n=0,r=e[0],i=0;for(let o=1;o<t;++o){const t=e[o];t!==r&&(r=t,i=Math.max(o-n,i),n=o)}return Math.max(t-n,i)}tensorShapeFromTensor(e,t,n=!0){if(0===t.length){if(-1===e[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return EO(e,n)}calculateOutputSize(e){const t=this.valuesShape;mE(this.defaultValueShape,t);const n=this.tensorShapeFromTensor(this.shape,this.shapeShape),r=pE(this.raggedRank,n,t);r[0]<0&&(r[0]=e);for(let e=1;e<=this.raggedRank;++e)r[e]<0&&(r[e]=this.getMaxWidth(e));return r}calculateFirstParentOutputIndex(e,t,n){const r=Math.min(e,n),i=[];let o=0;for(let e=0;e<r;++e,o+=t)i.push(o);for(let t=r;t<e;++t)i.push(-1);return av(i.length===e,(()=>"Final length of result must be equal to firstDimension.")),i}calculateOutputIndexRowSplit(e,t,n,r){const i=e.length,o=[];for(let a=0;a<i-1;++a){const i=e[a+1]-e[a];let s=Math.min(r,i),l=t[a];-1===l&&(s=0);for(let e=0;e<s;++e)o.push(l),l+=n;for(let e=0;e<i-s;++e)o.push(-1)}if(i>0&&o.length!==e[i-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,t,n,r){const i=e.length,o=[];if(0===i)return[];let a=0,s=e[0];if(s>=t.length)throw new Error(`Got currentValueRowId=${s}, which is not less than ${t.length}`);let l=t[s];o.push(l);for(let c=1;c<i;++c){const i=e[c];if(i===s)l>=0&&(++a,a<r?l+=n:l=-1);else{if(a=0,s=i,i>=t.length)throw new Error(`Got nextValueRowId=${i} which is not less than ${t.length}`);l=t[i]}o.push(l)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,t,n,r){const i=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case xO.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,t,n,r);case xO.ROW_SPLITS:if(i.length-1>t.length)throw new Error(`Row partition size is greater than output size: ${i.length-1} > ${t.length}`);return this.calculateOutputIndexRowSplit(i,t,n,r);default:throw new Error(`Unsupported partition type: ${xO[o]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");const t=this.rowPartitionTypes[0];switch(t){case xO.FIRST_DIM_SIZE:return e[0];case xO.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case xO.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${xO[t]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const e=this.getFirstDimensionSize(),t=this.calculateOutputSize(e),n=new Array(this.raggedRank+1);n[n.length-1]=1;for(let e=n.length-2;e>=0;--e)n[e]=n[e+1]*t[e+1];const r=EO(t,!1),i=_v(this.valuesDType,lv(r));if(n[0]*t[0]>0){let o=this.calculateFirstParentOutputIndex(e,n[0],t[0]);for(let e=1;e<=this.raggedRank;++e)o=this.calculateOutputIndex(e-1,o,n[e],t[e]);this.setOutput(this.raggedRank,o,i,r)}return[r,i]}setOutput(e,t,n,r){if(0===n.length)return;const i=this.values,o=n;let a=r.slice();a=a.slice(e+1);const s=lv(a),l=t.length;let c=this.defaultValue;if(c.length!==s&&1!==c.length){const e=this.defaultValueShape;Qw((()=>{const t=WS(c,e),n=KS(t,a);c=n.dataSync()}))}let u=0,p=0,d=0;for(let e=0;e<=l;++e){let r=e<l?t[e]:-1;if(r!==d){if(p<d){const e=i.subarray(u*s);TO(o.subarray(p*s),e,(d-p)*s)}if(e>=l){const e=n.length;r=Math.floor(e/s)}if(r>d)if(1===this.defaultValue.length)o.subarray(d*s,r*s).fill(this.defaultValue[0]),d=r;else for(;r>d;)TO(o.slice(d*s),c,s),++d;r<0?(u=e+1,p=d):(u=e,p=d,d=p+1)}else++d}}}function TO(e,t,n){for(let r=0;r<n;r++)e[r]=t[r]}function EO(e,t){const n=[];for(let r of e){if(r<0){if(!t)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function IO(e,t,n,r,i,o,a,s,l,c){return new SO(e,t,n,r,i,o,a,s,l,c).compute()}function kO(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return jv(0,r);const i=jv(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),i[0]=e;for(let e=1;e<i.length;e++)i[e]=i[e-1]+n;return i}function jO(e,t,n,r,i,o,a){const s=t[0],l=o[0],c=new Array(l),u=new Array(s),p=t[1];if(0===l){if(0!==s)throw new Error(eI(s));return[_v(n,0),[0,p],_v(i,0),c,u]}let d=!0,h=0;const m=new Array(l).fill(0);for(let t=0;t<s;++t){const n=e[t*p];if(n<0)throw new Error(tI(t,n));if(n>=l)throw new Error(nI(t,n,l));++m[n],d=d&&n>=h,h=n}let f=!0;for(let e=0;e<l;++e){const t=0===m[e];c[e]=t,f=f&&!t,m[e]=Math.max(m[e],1),e>0&&(m[e]+=m[e-1])}if(f&&d){const t=e,n=r;for(let e=0;e<s;++e)u[e]=e;return[t,[s,p],n,c,u]}{const t=m[l-1],o=_v(n,t*p),d=_v(i,t),h=new Array(l).fill(0);for(let t=0;t<s;++t){const n=e[t*p],i=h[n],a=(0===n?0:m[n-1])+i;h[n]++;for(let n=0;n<p;++n)o[a*p+n]=e[t*p+n];d[a]=r[t],u[t]=a}for(let e=0;e<l;++e)if(0===h[e]){const t=0===e?0:m[e-1];o[t*p+0]=e;for(let e=1;e<p;++e)o[t*p+e]=0;d[t]=a}return[o,[t,p],d,c,u]}}function AO(e,t,n,r,i){const o=lv(r),a=t[0],s=i.length,l=[];let c=1,u=-1;for(let e=0;e<s;++e){const t=i[e];if(-1===t){if(-1!==u)throw new Error(rI(u,e));u=e,l.push(1)}else{if(t<0)throw new Error(iI(e,t));c*=t,l.push(t)}}if(-1!==u){if(c<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");const e=Math.trunc(o/c);if(c*e!==o)throw new Error(aI(r,l));l[u]=e}if(lv(l)!==o)throw new Error(sI(r,l));const p=r.length,d=[];if(p>0){d[p-1]=1;for(let e=p-2;e>=0;--e)d[e]=d[e+1]*r[e+1]}const h=[];if(s>0){h[s-1]=1;for(let e=s-2;e>=0;--e)h[e]=h[e+1]*l[e+1]}const m=_v(n,a*s);for(let t=0;t<a;++t){let n=0;for(let r=0;r<p;++r)n+=e[t*p+r]*d[r];for(let e=0;e<s;++e)m[t*s+e]=Math.trunc(n/h[e]),n%=h[e]}return[m,[a,s],l]}function CO(e,t,n,r,i,o=!1,a=0){const s=r.length,l=[t[0],e.length/t[0]],c=l[1],u=s>0?i[s-1]+1:0;if(u<0)throw new Error("segment ids must be >= 0");const p=t.slice();p[0]=u;const d=_v(n,p.reduce(((e,t)=>e*t),1));if(0===s)return u>0&&d.fill(a),[d,p];if(u<=0)throw new Error("segment ids must be >= 0");let h=0,m=1,f=0,g=i[h];for(;;){let t=0;if(m<s){if(t=i[m],g===t){++m;continue}if(g>=t)throw new Error("segment ids are not increasing")}if(g<0||g>=u)throw new Error(uI(g,u));g>f&&d.fill(a,f*c,g*c);for(let t=h;t<m;++t){const n=r[t];if(n<0||n>=l[0])throw new Error(pI(t,r[t],l[0]));for(let t=0;t<c;t++)d[g*c+t]+=e[n*c+t]}if(o)for(let e=0;e<c;e++)d[g*c+e]/=m-h;if(h=m,++m,f=g+1,g=t,m>s)break}return f<u&&d.fill(a,f*c,u*c),[d,p]}const OO=dj((e=>Math.sqrt(e))),MO=(hj("Sqrt",(e=>Math.sqrt(e))),dj(((e,t)=>{const{pattern:n,replaceGlobal:r,rewrite:i}=t;return e.replace(new RegExp(n,r?"g":""),i)})));mj("StaticRegexReplace",MO);class NO{constructor(e,t,n,r,i,o){this.separator=ew(e),this.nGramWidths=t,this.leftPad=ew(n),this.rightPad=ew(r),this.padWidth=i,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){const n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}createNGrams(e,t,n,r,i,o){for(let a=0;a<i;++a){const s=this.getPadWidth(o),l=Math.max(0,s-a),c=Math.max(0,s-(i-(a+1))),u=o-(l+c),p=t+(l>0?0:a-s);let d=0;d+=l*this.leftPad.length;for(let t=0;t<u;++t)d+=e[p+t].length;d+=c*this.rightPad.length,d+=(l+c+u-1)*this.separator.length,n[r+a]=new Uint8Array(d);const h=n[r+a];let m=0;const f=e=>e.forEach((e=>h[m++]=e));for(let e=0;e<l;++e)f(this.leftPad),f(this.separator);for(let t=0;t<u-1;++t)f(e[p+t]),f(this.separator);if(u>0){f(e[p+u-1]);for(let e=0;e<c;++e)f(this.separator),f(this.rightPad)}else{for(let e=0;e<c-1;++e)f(this.rightPad),f(this.separator);f(this.rightPad)}}}compute(e,t){const n=e.length,r=t.length;if(r>0){let e=t[0];if(0!==e)throw new Error(`First split value must be 0, got ${e}`);for(let i=1;i<r;++i){let r=t[i]>=e;if(r=r&&t[i]<=n,!r)throw new Error(`Invalid split value ${t[i]}, must be in [${e}, ${n}]`);e=t[i]}if(e!==n)throw new Error(`Last split value must be data size. Expected ${n}, got ${e}`)}const i=r-1,o=_v("int32",r);if(0===n||0===r){const e=new Array(n);for(let e=0;e<=i;++e)o[e]=0;return[e,o]}o[0]=0;for(let e=1;e<=i;++e){const n=t[e]-t[e-1];let r=0;this.nGramWidths.forEach((e=>{r+=this.getNumNGrams(n,e)})),this.preserveShort&&n>0&&0===r&&(r=1),o[e]=o[e-1]+r}const a=new Array(o[i]);for(let n=0;n<i;++n){const r=t[n];let i=o[n];if(this.nGramWidths.forEach((o=>{const s=t[n+1]-t[n],l=this.getNumNGrams(s,o);this.createNGrams(e,r,a,i,l,o),i+=l})),this.preserveShort&&i===o[n]){const o=t[n+1]-t[n];if(0===o)continue;const s=o+2*this.padWidth,l=1;this.createNGrams(e,r,a,i,l,s)}}return[a,o]}}function RO(e,t,n,r,i,o,a,s){return new NO(n,r,i,o,a,s).compute(e,t)}function PO(e,t,n,r){if(!e.length)return;if(0===t.length){for(let t=0;t<e.length;++t)r.push(e.subarray(t,t+1));return}if(1===t.length){const i=t[0];let o=e.indexOf(i);for(;-1!==o;){const t=e.subarray(0,o);n&&0===t.length||r.push(t),o=(e=e.subarray(o+1)).indexOf(i)}return void(n&&0===e.length||r.push(e))}let i=0;for(let o=0;o<e.length+1;o++)if(o===e.length||-1!==t.indexOf(e[o])){const t=e.subarray(i,o);n&&0===t.length||r.push(t),i=o+1}}function DO(e,t,n){const r=e.length,i=[];let o=0,a=0;const s=new Array(r);for(let l=0;l<r;++l){const r=i.length;PO(e[l],t,n,i);const c=i.length-r;s[l]=c,o+=c,a=Math.max(a,c)}const l=_v("int32",2*o),c=new Array(o),u=[r,a];let p=0;for(let e=0;e<r;++e)for(let t=0;t<s[e];++t)l[2*p]=e,l[2*p+1]=t,c[p]=i[p],++p;return[l,c,u]}function LO(e,t){const n=_v("int32",e.length);for(let r=0;r<e.length;++r)n[r]=Yb(e[r]).modulo(t).getLowBitsUnsigned();return n}const FO=(e,t)=>{const n=t.value-e.value;return 0===n?e.index-t.index:n};function BO(e,t,n=0,r=e.length-1){for(;r>n;){if(r-n>600){const i=r-n+1,o=t-n+1,a=Math.log(i),s=.5*Math.exp(2*a/3),l=.5*Math.sqrt(a*s*(i-s)/i)*Math.sign(o-i/2);BO(e,t,Math.max(n,Math.floor(t-o*s/i+l)),Math.min(r,Math.floor(t+(i-o)*s/i+l)))}const i=e[t];let o=n,a=r;for(ov(e,n,t),FO(e[r],i)>0&&ov(e,n,r);o<a;){for(ov(e,o,a),o++,a--;FO(e[o],i)<0;)o+=1;for(;FO(e[a],i)>0;)a-=1}0===FO(e[n],i)?ov(e,n,a):(a+=1,ov(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}}function UO(e,t,n,r,i){const o=t[t.length-1],[a,s]=[e.length/o,o],l=yv(n,a*r),c=yv("int32",a*r);for(let t=0;t<a;t++){const n=t*s,o=e.subarray(n,n+s);let a=new Array(o.length);o.forEach(((e,t)=>a[t]={value:e,index:t})),r<a.length&&(BO(a,r),a=a.slice(0,r)),i&&a.sort(FO);const u=t*r,p=l.subarray(u,u+r),d=c.subarray(u,u+r);for(let e=0;e<r;e++)p[e]=a[e].value,d[e]=a[e].index}const u=t.slice();return u[u.length-1]=r,[tS(u,n,l),tS(u,"int32",c)]}function VO(e,t,n,r){const i=fv(t,n)[0],o=[1,n[0],1];for(let e=0;e<i;e++)o[0]*=n[e];o[1]=n[i];for(let e=i+1;e<n.length;e++)o[2]*=n[e];const a=new Map,s=new Int32Array(n[i]),l=new dw(o,r,e),c=[],u=1===o[0]&&1===o[2];for(let t=0;t<n[i];t++){let n;if(u)n=e[t].toString();else{const e=[];for(let n=0;n<o[0];n++)for(let r=0;r<o[2];r++)e.push(l.get(n,t,r));n=e.join(",")}const r=a.get(n);if(null!=r)s[t]=r;else{const e=a.size;a.set(n,e),s[t]=e,c.push(t)}}const p=o.slice();p[1]=a.size;const d=new dw(p,r);c.forEach(((e,t)=>{for(let n=0;n<o[0];n++)for(let r=0;r<o[2];r++)d.set(l.get(n,e,r),n,t,r)}));const h=n.slice();return h[i]=p[1],{outputValues:d.values,outputShape:h,indices:s}}const{mx:GO,XI:zO,Nk:$O,f6:qO,ct:HO,YG:WO,hH:KO,z3:XO,sG:YO,uM:JO,vS:QO,qB:ZO,GG:eM,rq:tM,lg:nM,WR:rM,cu:iM,GE:oM,px:aM,jC:sM,He:lM,hE:cM,BF:uM,Dk:pM,cl:dM,_B:hM,ub:mM,_f:fM,Ku:gM,qy:yM,Zy:_M,bu:vM,zv:bM,dH:wM,HS:xM,yH:SM,l3:TM,z9:EM,x6:IM,_m:kM,eW:jM,GK:AM,SP:CM,yr:OM,dl:MM,Dw:NM,xT:RM,_X:PM,wz:DM}=j;function LM(e,t){return["x","y","z","w","u","v"].slice(0,t).map((t=>`${e}.${t}`))}function FM(e,t){return 1===t?[e]:LM(e,t)}class BM{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=$C(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const e=FM("rc",this.rank),t=FC(this.rank),n=this.getOutOfBoundsCondition(e),r=this.getSetup(e),i=this.getOutput(e);this.userCode=`\n        void main() {\n          ${t} rc = getOutputCoords();\n\n          if(${n}) {\n            setOutput(vec4(0));\n          } else {\n            ${r}\n\n            setOutput(vec4(${i}));\n          }\n        }\n      `}}getSourceCoordsArr(e){const t=[];for(let n=0;n<=1;n++)for(let r=0;r<=1;r++){let i=`${0===n?"r":"rp1"}, ${0===r?"c":"cp1"}`;for(let t=2;t<this.rank;t++)i=`${e[e.length-1-t]},`+i;t.push(i)}return t}getOutOfBoundsCondition(e){if(1===this.rank)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let t="";for(let n=this.rank-2;n<this.rank;n++)t+=`${e[n]} >= ${this.enableShapeUniforms?`outShape[${n}]`:this.outputShape[n]}`,n<this.rank-1&&(t+="||");return t}getSetup(e){if(1===this.rank)return"";const t=e.slice(-2),n=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],r=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`\n      int r = ${t[0]};\n      int c = ${t[1]};\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ${n};\n      bool rEdge = rp1 >= ${r};\n    `}getOutput(e){const t=this.getSourceCoordsArr(e);return 1===this.rank?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${t[0]}),\n            cEdge ? 0. : getA(${t[1]}),\n            rEdge ? 0. : getA(${t[2]}),\n            rEdge || cEdge ? 0. : getA(${t[3]})`}}class UM{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=$C(this.outputShape.length);let n="";for(let e=0;e<4;e++){let t="thisRC = rc;";e%2==1&&(t+="thisRC.z += 1;"),e>1&&(t+="thisRC.y += 1;"),n+=`\n        ${t}\n        ${e>0?"if(thisRC.y < rows && thisRC.z < cols){":""}\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[${e}] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ${e>0?"}":""}\n      `}var r,i;this.userCode=`\n      ${r=t,i=this.enableShapeUniforms,`\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ${i?function(e,t,n="index"){const r=function(e,t){const n=e.length,r=e.map((e=>`${t}[${e}]`)),i=new Array(n-1);i[n-2]=r[n-1];for(let e=n-3;e>=0;--e)i[e]=`(${i[e+1]} * ${r[e+1]})`;return i}(e.map(((e,t)=>t)),t);return r.map(((t,i)=>`int ${e[i]} = ${n} / ${r[i]}; ${i===r.length-1?`int ${e[i+1]} = ${n} - ${e[i]} * ${r[i]}`:`index -= ${e[i]} * ${r[i]}`};`)).join("")}(["r","c","d"],"inputShape"):TC(["r","c","d"],r)}\n      return ivec3(r, c, d);\n    }\n  `}\n      ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":IC(e)}\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};\n        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};\n\n        ${n}\n\n        setOutput(result);\n      }\n    `}}class VM{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,t,n){const r=zM(t,n),i=$M(e,r,n);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);const o=GM(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const e=this.freeTextures[i].pop();return this.usedTextures[i].push(e),e}let a;return r===XA.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===XA.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===XA.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===XA.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===XA.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(a),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),a}releaseTexture(e,t,n,r){if(null==this.freeTextures)return;const i=zM(n,r),o=$M(t,i,r);o in this.freeTextures||(this.freeTextures[o]=[]);const a=GM(t,i,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=Dv().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=a):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const l=this.usedTextures[o],c=l&&l.indexOf(e);if(null==c||c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l[c]=l[l.length-1],l.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const t=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*t)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const e in this.freeTextures)this.freeTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e.texture)}));for(const e in this.usedTextures)this.usedTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function GM(e,t,n,r,i){const o=function(e,t){switch(e){case XA.PACKED_2X2_FLOAT32:return nO(t);case XA.PACKED_2X2_FLOAT16:return rO(t);case XA.UNPACKED_FLOAT32:return ZC(t);case XA.UNPACKED_FLOAT16:return eO(t);case XA.PACKED_4X1_UNSIGNED_BYTE:return tO(t);default:throw new Error(`Unknown physical texture type ${e}`)}}(t,r);let a;if(i){const[t,n]=QA(e[0],e[1]);a=t*n}else{const[t,n]=YA(e[0],e[1]);a=t*n}const s=function(e,t){const n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error(`Unknown internal format ${t}`)}(n,o);return a*s}function zM(e,t){if(e===KA.UPLOAD)return XA.PACKED_2X2_FLOAT32;if(e===KA.RENDER||null==e)return function(e){return Dv().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?XA.PACKED_2X2_FLOAT32:XA.UNPACKED_FLOAT32:e?XA.PACKED_2X2_FLOAT16:XA.UNPACKED_FLOAT16}(t);if(e===KA.DOWNLOAD||e===KA.PIXELS)return XA.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${e}`)}function $M(e,t,n){return`${e[0]}_${e[1]}_${t}_${n}`}class qM{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=$C(this.outputShape.length),this.userCode=`\n      float unaryOperation(float x) {\n        ${t}\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}const HM="if (isnan(x)) return x;",WM="return abs(x);",KM=HM+"\n  return (x < 0.0) ? 0.0 : x;\n",XM=HM+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",YM="return x;";class JM{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=$C(this.outputShape.length),this.userCode=`\n      vec4 unaryOperation(vec4 x) {\n        ${t}\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}class QM{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=$C(this.outputShape.length);const t=e.length,n=FM("rc",t),r=FC(t),i=function(e,t){if(1===e)return"rc";let n="";for(let r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),o=n.slice(-2),a=t<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`\n      void main() {\n        ${r} rc = getOutputCoords();\n        vec4 packedInput = getA(${i});\n\n        setOutput(getChannel(packedInput, ${a}));\n      }\n    `}}const ZM=yI,eN={},tN=Dv().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");class nN extends Kv{nextDataId(){return nN.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Dv().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let t;if(null!=e){if(e instanceof iO)t=e;else{const n=HA(Dv().getNumber("WEBGL_VERSION"),e);t=new iO(n)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const e=HA(Dv().getNumber("WEBGL_VERSION"));t=new iO(e),this.binaryCache=((n=Dv().getNumber("WEBGL_VERSION"))in eN||(eN[n]={}),eN[n]),this.gpgpuCreatedLocally=!0}var n;this.gpgpu=t,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new VM(this.gpgpu),this.numMBBeforeWarning=null==Dv().global.screen?1024:Dv().global.screen.height*Dv().global.screen.width*window.devicePixelRatio*600/1024/1024,this.texData=new Wv(this,Jw())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,t,n,r,i,o){const a=this.makeTensorInfo(t,n),s=this.texData.get(a.dataId);s.isPacked=!1,s.texture={texture:e,texShape:[r,i]},s.texShape=[r,i];const l=mC(t),c=new YC(l,!1,o),u=this.runWebGLProgram(c,[a],n,[[r,i]]);return u.shape=t,s.texture=null,this.disposeIntermediateTensorInfo(a),u.dataId}write(e,t,n){if((Dv().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Dv().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:KA.UPLOAD,refCount:1}),r}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){this.texData.get(e).refCount++}decRef(e){this.texData.has(e)&&this.texData.get(e).refCount--}move(e,t,n,r,i){if(Dv().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:KA.UPLOAD,refCount:i})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const t=this.texData.get(e),{values:n,dtype:r,complexTensorInfos:i,slice:o,shape:a,isPacked:s}=t;if(null!=o){let t;t=s?new JM(a,YM):new qM(a,YM);const n=this.runWebGLProgram(t,[{dataId:e,shape:a,dtype:r}],r),i=this.readSync(n.dataId);return this.disposeIntermediateTensorInfo(n),i}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;const l=null!=this.activeTimers;let c,u;return l&&(c=Zb()),u="complex64"===r?PE(this.readSync(i.real.dataId),this.readSync(i.imag.dataId)):this.getValuesFromTexture(e),l&&(this.downloadWaitMs+=Zb()-c),this.convertAndCacheOnCPU(e,u)}async read(e){if(this.pendingRead.has(e)){const t=this.pendingRead.get(e);return new Promise((e=>t.push(e)))}const t=this.texData.get(e),{values:n,shape:r,slice:i,dtype:o,complexTensorInfos:a,isPacked:s}=t;if(null!=i){let t;t=s?new JM(r,YM):new qM(r,YM);const n=this.runWebGLProgram(t,[{dataId:e,shape:r,dtype:o}],o),i=this.read(n.dataId);return this.disposeIntermediateTensorInfo(n),i}if(null!=n)return this.convertAndCacheOnCPU(e);if(Dv().getBool("DEBUG")&&!Dv().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===Dv().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let l,c,u=null;if("complex64"!==o&&Dv().get("WEBGL_BUFFER_SUPPORTED")){l=this.decode(e);const t=this.texData.get(l.dataId);u=this.gpgpu.createBufferFromTexture(t.texture.texture,...JA(r))}if(this.pendingRead.set(e,[]),"complex64"!==o&&await this.gpgpu.createAndWaitForFence(),"complex64"===o){const e=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]);c=PE(e[0],e[1])}else if(null==u)c=this.getValuesFromTexture(e);else{const e=lv(r);c=this.gpgpu.downloadFloat32MatrixFromBuffer(u,e)}if(null!=l&&this.disposeIntermediateTensorInfo(l),null!=u){const e=this.gpgpu.gl;eC(e,(()=>e.deleteBuffer(u)))}const p=this.convertAndCacheOnCPU(e,c),d=this.pendingRead.get(e);return this.pendingRead.delete(e),d.forEach((e=>e(p))),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Jw().removeDataId(e,this),this.pendingDeletes--),p}readToGPU(e,t={}){const n=this.texData.get(e),{values:r,shape:i,slice:o,dtype:a,isPacked:s,texture:l}=n;if("complex64"===a)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=o){let n;n=s?new JM(i,YM):new qM(i,YM);const r=this.runWebGLProgram(n,[{dataId:e,shape:i,dtype:a}],a),o=this.readToGPU(r,t);return this.disposeIntermediateTensorInfo(r),o}if(null==l)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(e,t.customTexShape),u=Jw().makeTensorFromTensorInfo(c),p=this.texData.get(c.dataId);return Object.assign({tensorRef:u},p.texture)}bufferSync(e){const t=this.readSync(e.dataId);if("string"===e.dtype)try{const n=t.map((e=>tw(e)));return tS(e.shape,e.dtype,n)}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return tS(e.shape,e.dtype,t)}checkNumericalProblems(e){if(null!=e)for(let t=0;t<e.length;t++){const n=e[t];if(!tC(n)){if(Dv().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error(`The value ${n} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`);throw Error(`The value ${n} cannot be represented on this device.`)}}}getValuesFromTexture(e){const{shape:t,dtype:n,isPacked:r}=this.texData.get(e),i=lv(t);if(Dv().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const n=this.decode(e),r=this.texData.get(n.dataId),o=this.gpgpu.downloadMatrixFromPackedTexture(r.texture.texture,...JA(t)).subarray(0,i);return this.disposeIntermediateTensorInfo(n),o}const o=Dv().getBool("WEBGL_PACK")&&!0===r,a=o?mC(t):t,s=o?new KC(a):new WC(a),l=this.runWebGLProgram(s,[{shape:a,dtype:n,dataId:e}],"float32"),c=this.texData.get(l.dataId),u=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(l),u}timerAvailable(){return Dv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const t=this.activeTimers,n=[];let r=!1;null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e();const i=rw(this.activeTimers.map((e=>e.query))).filter((e=>null!=e)),o=rw(this.activeTimers.map((e=>e.name))).filter((e=>null!=e));this.activeTimers=t,r&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(Dv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const e=await Promise.all(i);a.kernelMs=function(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}(e),a.getExtraProfileInfo=()=>e.map(((e,t)=>({name:o[t],ms:e}))).map((e=>`${e.name}: ${e.ms}`)).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Dv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Zb(),endMs:null}}endTimer(e){return Dv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Zb(),e)}async getQueryTime(e){if(Dv().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const t=e;return t.endMs-t.startMs}disposeData(e,t=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:n}=this.texData.get(e);return null!=n&&(this.disposeData(n.real.dataId,t),this.disposeData(n.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:t,dtype:n,texShape:r,usage:i,isPacked:o,slice:a}=this.texData.get(e),s=a&&a.origDataId||e,l=this.dataRefCount.get(s);l>1?this.dataRefCount.set(s,l-1):(this.dataRefCount.delete(s),null!=t&&(this.numBytesInGPU-=this.computeBytes(r,n),this.textureManager.releaseTexture(t,r,i,o)));const c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,t=tN){return Dv().getBool("WEBGL_CPU_FORWARD")&&e.every((e=>null==this.texData.get(e.dataId).texture&&lv(e.shape)<t))}getGPGPUContext(){return this.gpgpu}where(e){Fv("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const t=e.dataSync();return ZM(e.shape,t)}packedUnaryOp(e,t,n){const r=new JM(e.shape,t),i=this.compileAndRun(r,[e],n);return Jw().makeTensorFromTensorInfo(i)}abs(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){const t=wM(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(Dv().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,WM,e.dtype);const t=new qM(e.shape,WM),n=this.compileAndRun(t,[e]);return Jw().makeTensorFromTensorInfo(n)}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&wv(n[0])){const i=n.map((e=>ew(e)));r=this.write(i,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}makeOutput(e,t,n){return Jw().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}unpackTensor(e){const t=new QM(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new BM(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){const n=[dC(e.shape),...hC(e.shape)],r={dtype:e.dtype,shape:n,dataId:e.dataId},i=[dC(t),...hC(t)],o=new UM(i,n),a=[n],s=this.runWebGLProgram(o,[r],e.dtype,a,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}decode(e,t){const n=this.texData.get(e),{isPacked:r,shape:i,dtype:o}=n;null!=t&&av(lv(i)<=t[0]*t[1]*4,(()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."));const a=mC(i);let s;s=r?new HC(a):new qC(a);const l=[null!=t?t:JA(a)];return{dtype:o,shape:i,dataId:this.runWebGLProgram(s,[{shape:a,dtype:o,dataId:e}],o,l,!0,t).dataId}}runWebGLProgram(e,t,n,r,i=!1,o){const a=this.makeTensorInfo(e.outputShape,n),s=this.texData.get(a.dataId);if(e.packedOutput&&(s.isPacked=!0),e.outPackingScheme===WA.DENSE){const t=null!=o?o:JA(e.outputShape);s.texShape=t.map((e=>2*e))}if(null!=e.outTexUsage&&(s.usage=e.outTexUsage),0===lv(a.shape))return s.values=yv(a.dtype,0),a;const l=[],c=t.map((t=>{if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let n=this.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&lv(t.shape)<=Dv().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(this.uploadToGPU(t.dataId),!!n.isPacked!=!!e.packedInputs)t=n.isPacked?this.unpackTensor(t):this.packTensor(t),l.push(t),n=this.texData.get(t.dataId);else if(n.isPacked&&!gC(n.shape,t.shape)){const e=t,r=t.shape;t.shape=n.shape,t=this.packedReshape(t,r),l.push(t),n=this.texData.get(t.dataId),e.shape=r}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(a.dataId);const u={shape:a.shape,texData:s,isUniform:!1},p=function(e,t,n){let r="";t.concat(n).forEach((t=>{const i=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){const o=t.texData.texShape,{useSqueezeShape:a,uniformShape:s,keptDims:l}=BC(e.packedInputs,t.shape,o);let c="",u="",p="";if(1===s.length&&e.packedInputs){const e=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];c=`${e[0]>1}_${e[1]>1}`}else if(2!==s.length||e.packedInputs){if(s.length>2&&!e.packedInputs){const e=Ev(s);p=`${e[0]===o[1]}_${e[e.length-1]===o[1]}`}}else u=`${s[0]>1}_${s[1]>1}`;const d=t.shape.length,h=2===s.length&&cv(t.shape,o),m=1===lv(t.shape),f=ES(t.shape,n.shape),g=!e.packedInputs&&d===n.shape.length&&cv(o,n.texData.texShape),y=e.packedInputs||s.length>2?"":`${o[0]>1}_${o[1]>1}`;r+=`${d}_${g}_${a?l:""}_${s.length}_${m}_${f}_${h}_${c}_${u}_${p}_${y}_${i}`}else{const e=t.isUniform?"uniform":t.texData.texShape;r+=`${t.shape}_${e}_${i}`}}));const i=e.userCode;let o=e.constructor.name;return o+="_"+r+"_"+i+`${Dv().getNumber("WEBGL_VERSION")}`,o}(e,c,u),d=this.getAndSaveBinary(p,(()=>function(e,t,n,r){const i=n.map(((e,n)=>{const r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),o=i.map((e=>e.shapeInfo)),a={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=AC(i,a,t),l=function(e,t){const n=pC(e,(()=>e.createShader(e.FRAGMENT_SHADER)),"Unable to create fragment WebGLShader.");if(eC(e,(()=>e.shaderSource(n,t))),eC(e,(()=>e.compileShader(n))),Dv().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw iC(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}(e.gl,s),c=e.createProgram(l);return Dv().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:l,source:s,webGLProgram:c,inShapeInfos:o,outShapeInfo:a,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(e.buildVao(c),Object.assign({program:t,fragmentShader:l,source:s,webGLProgram:c,inShapeInfos:o,outShapeInfo:a},GC(e,t,c)))}(this.gpgpu,e,c,u))),h=null!=this.activeTimers;let m;h&&(m=this.startTimer()),Dv().get("ENGINE_COMPILE_ONLY")||function(e,t,n,r,i){t.program.enableShapeUniforms||(zC(t.inShapeInfos,n),zC([t.outShapeInfo],[r]));const o=r.texData.texture,a=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(o.texture,a[0],a[1]):e.setOutputMatrixTexture(o.texture,a[0],a[1]),e.setProgram(t.webGLProgram),e.bindVertexArray(t.webGLProgram.vao),1===Dv().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN);for(let r=0;r<n.length;++r){const i=n[r],{uniform:o,offset:a,shape:s,texShape:l}=t.variablesLocations[r];if(s){const{uniformShape:n}=BC(t.program.packedInputs,i.shape,i.texData.texShape);switch(n.length){case 1:e.gl.uniform1iv(s,new Int32Array(n));break;case 2:e.gl.uniform2iv(s,new Int32Array(n));break;case 3:e.gl.uniform3iv(s,new Int32Array(n));break;case 4:e.gl.uniform4iv(s,new Int32Array(n))}}if(l&&e.gl.uniform2i(l,i.texData.texShape[0],i.texData.texShape[1]),null!=o)if(i.isUniform)if(lv(i.shape)<2)e.gl.uniform1f(o,i.uniformValues[0]);else{let t=i.uniformValues;t instanceof Float32Array||(t=new Float32Array(t)),e.gl.uniform1fv(o,t)}else null!=i.texData.slice&&null!=a&&e.gl.uniform1i(a,i.texData.slice.flatOffset),e.setInputMatrixTexture(i.texData.texture.texture,o,r)}const s=t.outShapeLocation;if(s)switch(r.shape.length){case 1:e.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(s,new Int32Array(r.shape))}if(t.outShapeStridesLocation){const n=Ev(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(n));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(n));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(n))}}if(t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&i)for(let n=0;n<t.program.customUniforms.length;++n){const r=t.program.customUniforms[n],o=t.customUniformLocations[n],a=i[n];if("float"===r.type)e.gl.uniform1fv(o,a);else if("vec2"===r.type)e.gl.uniform2fv(o,a);else if("vec3"===r.type)e.gl.uniform3fv(o,a);else if("vec4"===r.type)e.gl.uniform4fv(o,a);else if("int"===r.type)e.gl.uniform1iv(o,a);else if("ivec2"===r.type)e.gl.uniform2iv(o,a);else if("ivec3"===r.type)e.gl.uniform3iv(o,a);else{if("ivec4"!==r.type)throw Error(`uniform type ${r.type} is not supported yet.`);e.gl.uniform4iv(o,a)}}e.executeProgram()}(this.gpgpu,d,c,u,r),l.forEach((e=>this.disposeIntermediateTensorInfo(e))),h&&(m=this.endTimer(m),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(m)}));const f=Dv().getNumber("WEBGL_FLUSH_THRESHOLD");if(f>0){const e=Zb();e-this.lastGlFlushTime>f&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=e)}if(!Dv().getBool("WEBGL_LAZILY_UNPACK")&&s.isPacked&&!1===i){const e=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),e}return a}compileAndRun(e,t,n,r,i=!1){return n=n||t[0].dtype,this.runWebGLProgram(e,t,n,r,i)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(Dv().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach((e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]})),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=Qw((()=>{if(!Dv().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=Dv().getBool("DEBUG");Dv().set("DEBUG",!1);const t=this.abs(JS(1e-8)).dataSync()[0];if(Dv().set("DEBUG",e),t>0)return 32}return 16}))),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}uploadToGPU(e){const t=this.texData.get(e),{shape:n,dtype:r,values:i,texture:o,usage:a,isPacked:s}=t;if(null!=o)return;const l=null!=this.activeTimers;let c;l&&(c=Zb());let u=t.texShape;if(null==u&&(u=function(e,t=!1){let n=Dv().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=Dv().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");if(r===1/0&&Dv().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),t&&(n*=2,r*=2,1===(e=e.map(((t,n)=>{return n>=e.length-2?(r=e[n])%2==0?r:r+1:e[n];var r}))).length&&(e=[2,e[0]])),2!==e.length){const t=gv(e);e=t.newShape}let i=lv(e),o=null;e.length<=1&&i<=n?o=[1,i]:2===e.length&&e[0]<=n&&e[1]<=n?o=e:3===e.length&&e[0]*e[1]<=n&&e[2]<=n?o=[e[0]*e[1],e[2]]:3===e.length&&e[0]<=n&&e[1]*e[2]<=n?o=[e[0],e[1]*e[2]]:4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n?o=[e[0]*e[1]*e[2],e[3]]:4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(o=[e[0],e[1]*e[2]*e[3]]);const a=null!=o&&Math.max(...o)>r&&Math.min(...o)<=(t?2:1)&&Math.min(...o)>0;if(null==o||a)if(t){const t=dC(e);let n=2,r=2;e.length&&([n,r]=hC(e)),i=t*(n/2)*(r/2),o=pv(i).map((e=>2*e))}else o=pv(i);return o}(n,s),t.texShape=u),null!=i){const e=mC(n);let o,a=u[1],p=u[0];const d=i instanceof Uint8Array||i instanceof Uint8ClampedArray;!s&&d||([a,p]=QA(u[0],u[1])),o=s?new JC(e,d):new YC(e,d);const h=d?[p,a]:u,m=this.makeTensorInfo(h,r),f=this.texData.get(m.dataId);f.usage=d?KA.PIXELS:KA.UPLOAD,f.texShape=h,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(m.dataId),a,p,i);const g=[[p,a]],y=!0,_=this.runWebGLProgram(o,[m],r,g,y),v=this.texData.get(_.dataId);t.texShape=v.texShape,t.isPacked=v.isPacked,t.usage=v.usage,Dv().get("ENGINE_COMPILE_ONLY")?this.disposeData(_.dataId):(t.texture=v.texture,t.values=null,this.texData.delete(_.dataId)),this.disposeIntermediateTensorInfo(m),l&&(this.uploadWaitMs+=Zb()-c)}else{const e=this.acquireTexture(u,a,r,s);t.texture=e}}convertAndCacheOnCPU(e,t){const n=this.texData.get(e),{dtype:r}=n;return null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){const n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length);for(let t=0;t<n.length;++t)n[t]=Math.round(e[t]);return n}throw new Error(`Unknown dtype ${t}`)}(t,r)),n.values}acquireTexture(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const e=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${e} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,t,r)}computeBytes(e,t){return e[0]*e[1]*bv(t)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,t]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(t));return Promise.all(e)}for(const[,t]of Object.entries(this.binaryCache)){const n=new Promise((e=>{try{this.checkCompletion_(t),e(!0)}catch(e){throw e}}));e.push(n)}return Promise.all(e)}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await new Promise((e=>DT((()=>e())))),this.checkCompletionAsync_(e))}checkCompletion_(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw iC(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:t,customUniformLocations:n,infLoc:r,nanLoc:i,outShapeLocation:o,outShapeStridesLocation:a,outTexShapeLocation:s}=GC(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=t,e.customUniformLocations=n,e.infLoc=r,e.nanLoc=i,e.outShapeLocation=o,e.outShapeStridesLocation=a,e.outTexShapeLocation=s}}createTensorFromGPUData(e,t,n){e.channels=e.channels||"RGBA";const{texture:r,height:i,width:o,channels:a}=e,s=Jw().backend;if(!s.gpgpu.gl.isTexture(r))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const l=s.writeTexture(r,t,n,i,o,a);return Jw().makeTensorFromDataId(l,t,n,s)}}nN.nextDataId=0,Fw()&&ex("webgl",(()=>new nN),2);class rN{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;const r=FC(this.rank),i=function(e){const t=e.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t);for(let t=0;t<e.length;t++)r[e[t]]=n[t];return r.join()}(t);this.userCode=`\n    void main() {\n      ${r} resRC = getOutputCoords();\n      setOutput(getA(${i}));\n    }\n    `}}class iN{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[t[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const r=FC(this.rank),i=LM("rc",this.rank),o=new Array(this.rank);for(let e=0;e<t.length;e++)o[t[e]]=i[e];const a=`vec2(${o.slice(-2).join()})`,s=`++${i[this.rank-1]} < ${n[this.rank-1]}`,l=`getChannel(getA(${o.join()}), ${a})`;this.userCode=`\n    void main() {\n      ${r} rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ${l};\n      if(${s}) {\n        result[1] = ${l};\n      }\n      --${i[this.rank-1]};\n      if(++${i[this.rank-2]} < ${n[this.rank-2]}) {\n        result[2] = ${l};\n        if(${s}) {\n          result[3] = ${l};\n        }\n      }\n      setOutput(result);\n    }\n    `}}function oN(e,t,n){const r=Dv().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new iN(e.shape,t):new rN(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function aN(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{perm:o}=r,a=n,s=i.shape.length,l=new Array(s);for(let e=0;e<l.length;e++)l[e]=i.shape[o[e]];let c;if(a.shouldExecuteOnCPU([i])){const e=a.texData.get(i.dataId).values,t=PM(e,i.shape,i.dtype,o,l);c=a.makeTensorInfo(l,i.dtype),a.texData.get(c.dataId).values=t}else c=oN(i,o,a);return c}const sN={kernelName:Rb,backendName:"webgl",kernelFunc:aN};function lN(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{shape:o}=r,a=n,s=lv(i.shape),l=mv(o,s),c=lv(l);av(s===c,(()=>`The new shape (${l}) has ${c} elements and the old shape (${i.shape}) has ${s} elements. The new shape and old shape must have the same number of elements.`));const u=a.texData.get(i.dataId);return!u.isPacked||gC(i.shape,l)||null!==u.texture&&gC(u.shape,l)?(a.incRef(i.dataId),{dataId:i.dataId,shape:l,dtype:i.dtype}):function(e,t,n){const r=[dC(e.shape),...hC(e.shape)],i={dtype:e.dtype,shape:r,dataId:e.dataId},o=[dC(t),...hC(t)],a=new UM(o,r),s=[r],l=n.runWebGLProgram(a,[i],e.dtype,s,!0);return{dataId:l.dataId,shape:t,dtype:l.dtype}}(i,l,a)}const cN={kernelName:wb,backendName:"webgl",kernelFunc:lN};function uN(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const pN={kernelName:cb,backendName:"webgl",kernelFunc:uN};function dN(e){const{inputs:t,backend:n}=e,{real:r,imag:i}=t,o=n.makeTensorInfo(r.shape,"complex64"),a=n.texData.get(o.dataId),s=uN({inputs:{x:r},backend:n}),l=uN({inputs:{x:i},backend:n});return a.complexTensorInfos={real:s,imag:l},o}const hN="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n";class mN{constructor(e,t,n){this.variableNames=["A","B"],this.outputShape=kS(t,n),this.enableShapeUniforms=$C(this.outputShape.length),this.userCode=`\n      float binaryOperation(float a, float b) {\n        ${e}\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    `}}const fN="\n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n";class gN{constructor(e,t,n,r=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=kS(t,n);const i=this.outputShape.length;this.enableShapeUniforms=$C(i);let o="";if(r)if(0===i||1===lv(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(o=`\n          ${FC(i)} coords = getOutputCoords();\n        `,1===i)this.enableShapeUniforms?o+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":o+=`\n            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          `;else{const e=FM("coords",i);this.enableShapeUniforms?o+=`\n            bool nextRowOutOfBounds =\n              (${e[i-2]} + 1) >= outShape[${i} - 2];\n            bool nextColOutOfBounds =\n              (${e[i-1]} + 1) >= outShape[${i} - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `:o+=`\n            bool nextRowOutOfBounds =\n              (${e[i-2]} + 1) >= ${this.outputShape[i-2]};\n            bool nextColOutOfBounds =\n              (${e[i-1]} + 1) >= ${this.outputShape[i-1]};\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `}this.userCode=`\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ${e}\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ${o}\n\n        setOutput(result);\n      }\n    `}}function yN({opSnippet:e,packedOpSnippet:t,cpuKernelImpl:n,dtype:r}){return({inputs:i,backend:o})=>{const{x:a}=i,s=o,l=r||a.dtype;if(s.shouldExecuteOnCPU([a])&&null!=n){const e=s.texData.get(a.dataId),t=n(e.values,l);return s.makeTensorInfo(a.shape,l,t)}let c;return c=Dv().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=t?new JM(a.shape,t):new qM(a.shape,e),s.runWebGLProgram(c,[a],l)}}function _N({opSnippet:e,packedOpSnippet:t,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:i,dtype:o}){return({inputs:a,backend:s})=>{const{a:l,b:c}=a,u=s;if(r&&"complex64"===l.dtype){const t=u.texData.get(l.dataId),n=u.texData.get(c.dataId),[r,i]=[[t.complexTensorInfos.real,n.complexTensorInfos.real],[t.complexTensorInfos.imag,n.complexTensorInfos.imag]].map((t=>{const[n,r]=t,i={dataId:n.dataId,dtype:n.dtype,shape:l.shape},o={dataId:r.dataId,dtype:r.dtype,shape:c.shape},a=new mN(e,l.shape,c.shape);return u.runWebGLProgram(a,[i,o],Ew(n.dtype,r.dtype))})),o=dN({inputs:{real:r,imag:i},backend:u});return u.disposeIntermediateTensorInfo(r),u.disposeIntermediateTensorInfo(i),o}const p=o||Ew(l.dtype,c.dtype);if(("string"===l.dtype||"string"===c.dtype||u.shouldExecuteOnCPU([l,c]))&&null!=i){const e=u.texData.get(l.dataId).values,t=u.texData.get(c.dataId).values,n="string"===l.dtype?fI(e):e,r="string"===l.dtype?fI(t):t,[o,a]=i(l.shape,c.shape,n,r,p),s=u.makeTensorInfo(a,p);return u.texData.get(s.dataId).values=o,s}let d;return d=Dv().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=t?new gN(t,l.shape,c.shape,n):new mN(e,l.shape,c.shape),u.runWebGLProgram(d,[l,c],p)}}const vN=_N({opSnippet:"return float(a != b);",cpuKernelImpl:dM,dtype:"bool"});function bN(e){const{inputs:t,backend:n}=e,{input:r}=t;return uN({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}const wN={kernelName:Zv,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r,attrs:i}=t,{x:o}=n,{dtype:a}=i;if("complex64"===a){if("complex64"===o.dtype)return uN({inputs:{x:o},backend:r});const t=tT(o.shape),n=e({inputs:{x:o},backend:r,attrs:{dtype:"float32"}}),i=dN({inputs:{real:n,imag:t},backend:r});return t.dispose(),r.disposeIntermediateTensorInfo(n),i}if("complex64"===o.dtype){const t=bN({inputs:{input:o},backend:r}),n=e({inputs:{x:t},backend:r,attrs:{dtype:a}});return r.disposeIntermediateTensorInfo(t),n}if(!vv(o.dtype,a)){const e=uN({inputs:{x:o},backend:r});return{dataId:e.dataId,shape:e.shape,dtype:a}}if(r.shouldExecuteOnCPU([o])){const e=r.texData.get(o.dataId).values,[t,n,i]=HO(e,o.shape,o.dtype,a);return r.makeTensorInfo(t,n,i)}if("int32"===a)return function(e,t){const n=new qM(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(o,r);if("bool"===a){const e=r.makeTensorInfo([],"bool",yv("bool",1)),t=vN({inputs:{a:o,b:e},backend:r});return r.disposeIntermediateTensorInfo(e),t}throw new Error(`Error in Cast: failed to cast ${o.dtype} to ${a}`)}};class xN{constructor(e){this.outputShape=[],this.outputShape=FT(e,1),this.variableNames=e.map(((e,t)=>`T${t}`));const t=new Array(e.length-1);t[0]=e[0][1];for(let n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1];const n=[`if (yC < ${t[0]}) setOutput(getT0(yR, yC));`];for(let e=1;e<t.length;e++){const r=t[e-1];n.push(`else if (yC < ${t[e]}) setOutput(getT${e}(yR, yC-${r}));`)}const r=t.length,i=t[t.length-1];n.push(`else setOutput(getT${r}(yR, yC-${i}));`),this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ${n.join("\n        ")}\n      }\n    `}}class SN{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=FT(e,t);const n=this.outputShape,r=n.length,i=FC(r),o=FM("coords",r),a=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map(((e,t)=>`T${t}`));const s=new Array(e.length-1);s[0]=e[0][t];for(let n=1;n<s.length;n++)s[n]=s[n-1]+e[n][t];const l=a[t],c=a.slice(-2),u=a.join();let p=`if (${l} < ${s[0]}) {\n        return getChannel(\n            getT0(${u}), vec2(${c.join()}));\n        }`;for(let e=1;e<s.length;e++){const t=s[e-1];p+=`\n        if (${l} < ${s[e]}  && ${l} >= ${s[e-1]}) {\n          return getChannel(\n            getT${e}(${TN(a,l,t)}),\n            vec2(${TN(c,l,t)}));\n        }`}const d=s.length,h=s[s.length-1];p+=`\n        return getChannel(\n          getT${d}(${TN(a,l,h)}),\n          vec2(${TN(c,l,h)}));`,this.userCode=`\n      float getValue(${a.map((e=>"int "+e))}) {\n        ${p}\n      }\n\n      void main() {\n        ${i} coords = getOutputCoords();\n        vec4 result = vec4(getValue(${o}), 0., 0., 0.);\n\n        ${o[r-1]} = ${o[r-1]} + 1;\n        if (${o[r-1]} < ${n[r-1]}) {\n          result.g = getValue(${o});\n        }\n\n        ${o[r-2]} = ${o[r-2]} + 1;\n        if (${o[r-2]} < ${n[r-2]}) {\n          result.a = getValue(${o});\n        }\n\n        ${o[r-1]} = ${o[r-1]} - 1;\n        if (${o[r-2]} < ${n[r-2]} &&\n            ${o[r-1]} < ${n[r-1]}) {\n          result.b = getValue(${o});\n        }\n        setOutput(result);\n      }\n    `}}function TN(e,t,n){const r=e.indexOf(t);return e.map(((e,t)=>t===r?`${e} - ${n}`:e)).join()}function EN(e,t,n){const r=e[0].dtype;if("complex64"===r){const r=e.map((e=>bN({inputs:{input:e},backend:n}))),i=e.map((e=>function(e){const{inputs:t,backend:n}=e,{input:r}=t;return uN({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}({inputs:{input:e},backend:n}))),o=EN(r,t,n),a=EN(i,t,n),s=dN({inputs:{real:o,imag:a},backend:n});return r.forEach((e=>n.disposeIntermediateTensorInfo(e))),i.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),s}let i=n.shouldExecuteOnCPU(e);if("string"===r&&(i=!0),i){const i=e.map((e=>{const r=lv(e.shape.slice(t));return lN({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),o=i.map((e=>({vals:n.readSync(e.dataId),shape:e.shape}))),a=FT(i.map((e=>e.shape)),1),s=1===i[0].shape[0],l=KO(o,a,r,s),c=FT(e.map((e=>e.shape)),t),u=n.makeTensorInfo(c,r,l);return i.forEach((e=>n.disposeIntermediateTensorInfo(e))),u}const o=e.filter((e=>lv(e.shape)>0)),a=Dv().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&o[0].shape.length>1;if(1===o.length){const t=a?new qM(e[0].shape,YM):new JM(e[0].shape,YM);return n.runWebGLProgram(t,e,r)}const s=Dv().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(o.length>s){const e=[];for(let r=0;r<o.length;r+=s){const i=o.slice(r,r+s);e.push(EN(i,t,n))}const r=EN(e,t,n);for(const t of e)n.disposeIntermediateTensorInfo(t);return r}if(a){const e=new SN(o.map((e=>e.shape)),t);return n.runWebGLProgram(e,o,r)}const{tensors2D:l,outShape:c}=function(e,t,n){const r=FT(e.map((e=>e.shape)),t),i=e.map((e=>lN({inputs:{x:e},attrs:{shape:[-1,lv(e.shape.slice(t))]},backend:n})));return{tensors2D:i,outShape:r}}(o,t,n),u=new xN(l.map((e=>e.shape))),p=n.runWebGLProgram(u,l,r);l.forEach((e=>n.disposeIntermediateTensorInfo(e)));const d=lN({inputs:{x:p},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(p),d}function IN(e){const{inputs:t,backend:n,attrs:r}=e,{axis:i}=r,o=fv(i,t[0].shape)[0];LT(t.map((e=>e.shape)),o);const a=FT(t.map((e=>e.shape)),o);if(0===lv(a))return n.makeTensorInfo(a,t[0].dtype,[]);const s=t.filter((e=>lv(e.shape)>0));return 1===s.length?uN({inputs:{x:s[0]},backend:n}):EN(s,o,n)}const kN={kernelName:eb,backendName:"webgl",kernelFunc:IN};class jN{constructor(e,t,n,r=!1,i=!1,o=!1,a=null,s=!1,l=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=$C(this.outputShape.length);const c=r?e[1]:e[2],u=Math.ceil(c/2),p=r?"i * 2, rc.y":"rc.y, i * 2",d=i?"rc.z, i * 2":"i * 2, rc.z",h=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let f="",g="";a&&(f=s?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${a}\n        }`:l?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${a}\n        }`:`vec4 activation(vec4 x) {\n          ${a}\n        }`,g="result = activation(result);");const y=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");let _="rc.x",v="rc.x";e[0]<t[0]?_=`imod(rc.x, ${e[0]})`:t[0]<e[0]&&(v=`imod(rc.x, ${t[0]})`),this.userCode=`\n      ${f}\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ${u}.0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        int batchA = ${_};\n        int batchB = ${v};\n        for (int i = 0; i < ${u}; i++) {\n          vec4 a = getMatrixA(batchA, ${p});\n          vec4 b = getMatrixB(batchB, ${d});\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (${h[0]} * ${m[0]});\n          result += (${h[1]} * ${m[1]});\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ${y}\n\n        ${g}\n\n        setOutput(result);\n      }\n    `}}class AN{constructor(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=kS(t,n),this.userCode=`\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ${e}\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    `}}const CN="return a * b;";function ON(e){const{inputs:t,backend:n}=e,{a:r,b:i}=t,o=Ew(r.dtype,i.dtype);if("complex64"===r.dtype){const e=n.texData.get(r.dataId),t=n.texData.get(i.dataId),o=new AN("return areal * breal - aimag * bimag;",r.shape,i.shape),a=new AN("return areal * bimag + aimag * breal;",r.shape,i.shape),s=[{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:r.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:i.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:i.shape}],l=n.runWebGLProgram(o,s,"float32"),c=n.runWebGLProgram(a,s,"float32"),u=dN({inputs:{real:l,imag:c},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),u}if(n.shouldExecuteOnCPU([r,i])){const e=n.texData.get(r.dataId),t=n.texData.get(i.dataId),[a,s]=uM(r.shape,i.shape,e.values,t.values,o),l=n.makeTensorInfo(s,o);return n.texData.get(l.dataId).values=a,l}let a;return a=Dv().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new gN(CN,r.shape,i.shape):new mN(CN,r.shape,i.shape),n.runWebGLProgram(a,[r,i],o)}const MN={kernelName:gb,backendName:"webgl",kernelFunc:ON};class NN{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:i,outSize:o}=e;this.outputShape=[r,o];const a=4*Math.floor(n/4),s=n%4;let l="sumValue += dot(values, ones);";if(null!=t){const e=1/t;l=`sumValue += dot(values * ${uv(e)?e.toPrecision(2):e}, ones);`}let c="";i%n>0&&(c=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return 0.0;\n        }\n      `),this.userCode=`\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${c}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${a}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${l}\n        }\n\n        int inIdx = inOffset + ${a};\n        if (${1===s}) {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ${l}\n        } else if (${2===s}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ${l}\n        } else if (${3===s}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ${l}\n        }\n        setOutput(sumValue);\n      }\n    `}}class RN{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:r,inSize:i,outSize:o}=e;this.outputShape=[r,o];let a="0.0",s="";"prod"===t?a="1.0":"min"===t?(a="1.0 / 1e-20",s="min"):"max"===t&&(a="-1.0 / 1e-20",s="max");let l=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"sum"===t?l="sumValue":"prod"===t?l="prodValue":"all"===t?l="allValue":"any"===t&&(l="anyValue");const c=4*Math.floor(n/4),u=n%4;let p=`\n      if (${"sum"===t}) {\n        sumValue += dot(values, ones);\n      } else if (${"prod"===t}) {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ${s}(values, minMaxValue);\n        if (${"min"===t} || ${"max"===t}) {\n          minMaxValue = ${s}(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    `,d="vec4";"all"===t?(a="1.0",p="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",d="bvec4"):"any"===t&&(a="0.0",p="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",d="bvec4");let h="";i%n>0&&(h=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return initializationValue;\n        }\n      `),this.userCode=`\n      const float initializationValue = ${a};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${h}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        vec4 minMaxValue = vec4(${a});\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ${c}; i += 4) {\n          int inIdx = inOffset + i;\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${p}\n        }\n\n        int inIdx = inOffset + ${c};\n        if (${1===u}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ${p}\n        } else if (${2===u}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ${p}\n        } else if (${3===u}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ${p}\n        }\n        setOutput(${l});\n      }\n    `}}function PN(e,t,n,r){const i=function(e){const t=[];for(;0===t.length||1!==t[t.length-1].outSize;){const n=t.length?t[t.length-1].outSize:e[1],r=gE(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape);let o=e;for(let a=0;a<i.length;a++){const{inSize:s,windowSize:l,outSize:c}=i[a];let u,p;u="mean"===n?0===a?new NN({windowSize:l,inSize:s,batchSize:e.shape[0],outSize:c},s):new NN({windowSize:l,inSize:s,batchSize:e.shape[0],outSize:c}):new RN({windowSize:l,inSize:s,batchSize:e.shape[0],outSize:c},n),p=o,o=r.runWebGLProgram(u,[o],t),p.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(p)}return o}function DN(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r;return function(e,t,n,r){const i=t,o=e.shape.length,a=fv(i,e.shape);let s=a;const l=ET(s,o),c=null!=l;let u=e;c&&(u=oN(e,l,r),s=kT(s.length,o)),TT("sum",s,o);const[p,d]=xT(u.shape,s);let h=p;n&&(h=ST(p,a));const m=lv(d),f=lN({inputs:{x:u},attrs:{shape:[lv(e.shape)/m,m]},backend:r}),g=PN(f,Ew(e.dtype,"int32"),"sum",r),y=lN({inputs:{x:g},attrs:{shape:h},backend:r});return r.disposeIntermediateTensorInfo(f),r.disposeIntermediateTensorInfo(g),c&&r.disposeIntermediateTensorInfo(u),y}(i,o,a,n)}const LN={kernelName:jb,backendName:"webgl",kernelFunc:DN};function FN({a:e,b:t,transposeA:n,transposeB:r,backend:i,bias:o=null,preluActivationWeights:a=null,leakyreluAlpha:s=0,activation:l=null}){const c=e.shape.length,u=t.shape.length,p=n?e.shape[c-2]:e.shape[c-1],d=r?t.shape[u-1]:t.shape[u-2],h=n?e.shape[c-1]:e.shape[c-2],m=r?t.shape[u-2]:t.shape[u-1],f=e.shape.slice(0,-2),g=t.shape.slice(0,-2),y=lv(f),_=lv(g),v=kS(e.shape.slice(0,-2),t.shape.slice(0,-2)).concat([h,m]);av(p===d,(()=>`Error in matMul: inner shapes (${p}) and (${d}) of Tensors with shapes ${e.shape} and ${t.shape} and transposeA=${n} and transposeB=${r} must match.`));const b=n?[y,p,h]:[y,h,p],w=r?[_,m,d]:[_,d,m],x=lN({inputs:{x:e},backend:i,attrs:{shape:b}}),S=lN({inputs:{x:t},backend:i,attrs:{shape:w}}),T=[x,S],E=Math.max(y,_),I=n?x.shape[1]:x.shape[2],k=null!=o,j=null!=a,A="leakyrelu"===l,C=null!=l?function(e,t=!1){if("linear"===e)return"return x;";if("relu"===e)return t?"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":KM;if("elu"===e)return t?"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n":"return (x >= 0.0) ? x : (exp(x) - 1.0);";if("relu6"===e)return t?"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":XM;if("prelu"===e)return t?"\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n":"return (a < 0.) ? b * a : a;";if("leakyrelu"===e)return t?"\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n":"return (a < 0.) ? b * a : a;";if("sigmoid"===e)return"return 1.0 / (1.0 + exp(-1.0 * x));";if("tanh"===e)return"return tanh(x);";throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}(l,!0):null;let O;if((1===h||1===m)&&I>1e3&&!1===(k||j||A||null!=C)){let e=x,t=S;n&&(e=aN({inputs:{x},backend:i,attrs:{perm:[0,2,1]}}),T.push(e)),r&&(t=aN({inputs:{x:S},backend:i,attrs:{perm:[0,2,1]}}),T.push(t));const o=1===m;let a=e;1!==m&&(a=lN({inputs:{x:e},backend:i,attrs:{shape:[E,I,1]}}),T.push(a));const s=1===m?2:1;let l=t;o&&(l=lN({inputs:{x:t},backend:i,attrs:{shape:[E,1,I]}}),T.push(l));const c=ON({inputs:{a,b:l},backend:i});O=DN({inputs:{x:c},backend:i,attrs:{axis:s,keepDims:!0}}),T.push(c)}else{const l=Ew(e.dtype,t.dtype),c=new jN(b,w,[E,h,m],n,r,k,C,j,A),u=[x,S];if(null!=o&&u.push(o),j&&u.push(a),A){const e=i.makeTensorInfo([],"float32",Jb(s,"float32"));u.push(e),T.push(e)}O=i.runWebGLProgram(c,u,l)}const M=lN({inputs:{x:O},backend:i,attrs:{shape:v}});T.push(O);for(const e of T)i.disposeIntermediateTensorInfo(e);return M}const BN={kernelName:Pb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:i,b:o,bias:a,preluActivationWeights:s}=t,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:p}=r;return FN({a:i,b:o,transposeA:l,transposeB:c,backend:n,bias:a,preluActivationWeights:s,leakyreluAlpha:p,activation:u})}},UN="return a + b;",VN=_N({opSnippet:UN,packedOpSnippet:UN,supportsComplex:!0,cpuKernelImpl:GO}),GN={kernelName:Yv,backendName:"webgl",kernelFunc:VN},zN=_N({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:rM,dtype:"bool"}),$N={kernelName:ub,backendName:"webgl",kernelFunc:zN};class qN{constructor(e,t,n){this.variableNames=["x"],this.outputShape=n;const r=n.length,i=FC(n.length),o=FC(n.length);let a="";if(1===r)a="coords * strides + begin";else{let e=0;a=n.map(((t,r)=>(e++,1===n.length?`coords * strides[${r}] + begin[${r}]`:`coords[${e-1}] * strides[${r}] + begin[${r}]`))).join(",")}this.userCode=`\n      ${i} begin = ${i}(${e});\n      ${i} strides = ${i}(${t});\n\n      void main() {\n        ${o} coords = getOutputCoords();\n        setOutput(getX(${a}));\n      }\n    `}}class HN{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const t=FC(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=function(e){if(1===e)return"sourceLoc";if(e<=6)return WN.slice(0,e).map((e=>"sourceLoc."+e)).join(",");throw Error(`Slicing for rank ${e} is not yet supported`)}(this.rank);let r;r=`\n        ${t} sourceLoc;\n        ${t} coords = getOutputCoords();\n        ${e.map(((e,t)=>`sourceLoc.${WN[t]} = start[${t}] + coords.${WN[t]};`)).join("\n")}\n      `,this.userCode=`\n      void main() {\n        ${r}\n        setOutput(getSource(${n}));\n      }\n    `}}const WN=["x","y","z","w","u","v"];class KN{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const t=FC(this.rank),n=FM("coords",this.rank),r=FM("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":`vec2(${r.slice(-2).join()})`,o=`getChannel(getSource(${r.join()}), ${i})`,a=`\n      result.x = ${o};\n      if (++${n[this.rank-1]} < ${e[this.rank-1]}) {\n        ++${r[this.rank-1]};\n        result.y = ${o};\n        --${r[this.rank-1]};\n      }\n    `,s=1===this.rank?"":`\n      --${n[this.rank-1]};\n      if (++${n[this.rank-2]} < ${e[this.rank-2]}) {\n        ++${r[this.rank-2]};\n        result.z = ${o};\n        if (++${n[this.rank-1]} < ${e[this.rank-1]}) {\n          ++${r[this.rank-1]};\n          result.w = ${o};\n        }\n      }\n    `,l=this.rank<=4?`sourceLoc = coords +\n            ${t}(${e.map(((e,t)=>`start[${t}]`)).join()});`:e.map(((e,t)=>`${r[t]} = ${n[t]} + start[${t}];`)).join("\n");this.userCode=`\n      void main() {\n        ${t} coords = getOutputCoords();\n        ${t} sourceLoc;\n        ${l}\n        vec4 result = vec4(0.);\n        ${a}\n        ${s}\n        setOutput(result);\n      }\n    `}}function XN(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:o,size:a}=r,[s,l]=$S(i,o,a);if(CS(i,s,l),0===lv(l))return n.makeTensorInfo(l,i.dtype,[]);if(n.shouldExecuteOnCPU([i])||"string"===i.dtype){const e=n.texData.get(i.dataId),t=xM(e.values,s,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,t)}const{isPacked:c}=n.texData.get(i.dataId),u=GS(i.shape,s,l);if(c||!u){const e=Dv().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new KN(l):new HN(l),t=[s];return n.runWebGLProgram(e,[i],i.dtype,t)}return n.uploadToGPU(i.dataId),function(e,t,n,r){const i=r.texData.get(e.dataId),o=r.makeTensorInfo(n,e.dtype),a=r.texData.get(o.dataId);Object.assign(a,i),a.refCount=1,a.shape=n,a.dtype=e.dtype;let s=zS(t,Ev(e.shape));i.slice&&(s+=i.slice.flatOffset),a.slice={flatOffset:s,origDataId:i.slice&&i.slice.origDataId||e.dataId};const l=r.dataRefCount.get(a.slice.origDataId)||1;return r.dataRefCount.set(a.slice.origDataId,l+1),o}(i,s,l,n)}const YN={kernelName:Ib,backendName:"webgl",kernelFunc:XN},JN={kernelName:Cb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:o,end:a,strides:s,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:p,shrinkAxisMask:d}=r,{finalShapeSparse:h,finalShape:m,isIdentity:f,sliceDim0:g,isSimpleSlice:y,begin:_,end:v,strides:b}=qS(i.shape,o,a,s,l,c,u,p,d);let w;if(f)w=lN({inputs:{x:i},backend:n,attrs:{shape:m}});else if(g||y){av(i.shape.length>=1,(()=>`Input must have rank at least 1, got: ${i.shape.length}`));const e=MS(_,v,b),t=XN({inputs:{x:i},backend:n,attrs:{begin:_,size:e}});w=lN({inputs:{x:t},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(t)}else if(n.shouldExecuteOnCPU([i])){const e=n.readSync(i.dataId),t=tS(i.shape,i.dtype,e),r=jM(h,t,b,_);w=n.makeTensorInfo(m,i.dtype,r.values)}else{const e=new qN(_,b,h);w=n.runWebGLProgram(e,[i],i.dtype)}const x=lN({inputs:{x:w},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(w),x}},QN=_N({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:XO}),ZN={kernelName:rb,backendName:"webgl",kernelFunc:QN},eR=_N({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:nM}),tR={kernelName:lb,backendName:"webgl",kernelFunc:eR};function nR(e){const{inputs:t,attrs:n,backend:r}=e,{dim:i}=n,{input:o}=t,a=o.shape.length,s=o.shape.slice();let l=i;return i<0&&(av(-(a+1)<=i,(()=>`Axis must be in the interval [${-(a+1)}, ${a}]`)),l=a+i+1),s.splice(l,0,1),lN({inputs:{x:o},backend:r,attrs:{shape:s}})}const rR={kernelName:ob,backendName:"webgl",kernelFunc:nR},iR={kernelName:_b,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{axis:i}=r;if(1===t.length)return nR({inputs:{input:t[0]},backend:n,attrs:{dim:i}});const o=t[0].shape,a=t[0].dtype;t.forEach((e=>{sv(o,e.shape,"All tensors passed to stack must have matching shapes"),av(a===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const s=[],l=IN({inputs:t.map((e=>{const t=nR({inputs:{input:e},backend:n,attrs:{dim:i}});return s.push(t),t})),backend:n,attrs:{axis:i}});return s.forEach((e=>n.disposeIntermediateTensorInfo(e))),l}},oR="return a - b;",aR=_N({opSnippet:oR,packedOpSnippet:oR,supportsComplex:!0,cpuKernelImpl:MM}),sR={kernelName:Ob,backendName:"webgl",kernelFunc:aR},lR=_N({opSnippet:hN+"\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+fN+"\n  return result;\n",cpuKernelImpl:cM}),cR={kernelName:mb,backendName:"webgl",kernelFunc:lR},uR=_N({opSnippet:hN+"\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+fN+"\n  return result;\n",cpuKernelImpl:lM}),pR={kernelName:hb,backendName:"webgl",kernelFunc:uR};class dR{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;const r=FC(this.rank),i=function(e){const t=e.length;if(t>5)throw Error(`Tile for rank ${t} is not yet supported`);if(1===t)return`imod(resRC, ${e[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let t=0;t<e.length;t++)r.push(`imod(${n[t]}, ${e[t]})`);return r.join()}(e);this.userCode=`\n      void main() {\n        ${r} resRC = getOutputCoords();\n        setOutput(getA(${i}));\n      }\n    `}}const hR={kernelName:Nb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reps:o}=r;if("string"===i.dtype||i.shape.length>5){const e=n.readSync(i.dataId),t="string"===i.dtype?e.map((e=>tw(e))):e,r=tS(i.shape,i.dtype,t),a=NM(r,o);return n.makeTensorInfo(a.shape,a.dtype,a.values)}const a=new dR(i.shape,o);return n.runWebGLProgram(a,[i],i.dtype)}};class mR{constructor(e,t,n,r,i,o,a=!0,s=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const l=FC(i.length),c=FC(o.length);let u="";1===n?u="i":2===n&&(u="i, j");const p=`getIndices(${u})`;let d="";1===r?d="i":2===r&&(d="i, coords[1]");const h=`getUpdates(${d})`;let m="";s&&(m="coords[0], coords[1]");const f=`getDefaultValue(${m})`,g=t>1?"strides[j]":"strides";this.userCode=`\n        ${l} strides = ${l}(${i});\n\n        void main() {\n          ${c} coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ${e}; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ${t}; j++) {\n              int index = round(${p});\n              flattenedIndex += index * ${g};\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ${h};\n              found = true;\n            }\n          }\n          setOutput(mix(${f}, sum, float(found)));\n        }\n      `}}const fR={kernelName:Tb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{tensor:i,indices:o,updates:a}=t,{}=r,{sliceRank:s,numUpdates:l,sliceSize:c,strides:u,outputSize:p}=IE(0,o,i.shape),d=[p/c,c];if(0===p)return n.makeTensorInfo(i.shape,o.dtype);const h=lN({inputs:{x:o},backend:n,attrs:{shape:[l,s]}}),m=lN({inputs:{x:a},backend:n,attrs:{shape:[l,c]}}),f=lN({inputs:{x:i},backend:n,attrs:{shape:d}}),g=new mR(l,s,h.shape.length,m.shape.length,u,d,!1,!0),y=n.runWebGLProgram(g,[m,h,f],f.dtype),_=lN({inputs:{x:y},backend:n,attrs:{shape:i.shape}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(y),_}};class gR{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map(((e,t)=>`T${t}`));const n=[];this.variableNames.forEach((e=>{n.push(`float v${e} = get${e}AtOutCoords();`)}));const r=this.variableNames.map((e=>`v${e}`)).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        float result = ${r};\n        setOutput(result);\n      }\n    `}}class yR{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map(((e,t)=>`T${t}`));const n=[];this.variableNames.forEach((e=>{n.push(`vec4 v${e} = get${e}AtOutCoords();`)}));const r=this.variableNames.map((e=>`v${e}`)).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        vec4 result = ${r};\n        setOutput(result);\n      }\n    `}}const _R={kernelName:Jv,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:r}=t,i=n;if(1===i.length)return uN({inputs:{x:i[0]},backend:r});if(i.length>Dv().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const t=Math.floor(i.length/2),n=e({inputs:i.slice(0,t),backend:r}),o=e({inputs:i.slice(t),backend:r});return e({inputs:[n,o],backend:r})}const o=i.map((e=>e.dtype)).reduce(((e,t)=>Ew(e,t))),a=i.map((e=>e.shape)),s=Dv().getBool("WEBGL_PACK")?new yR(i[0].shape,a):new gR(i[0].shape,a);return r.runWebGLProgram(s,i,o)}};class vR{constructor(e,t,n){let r,i;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error(`Where for rank ${n} is not yet supported`);if(1===n)i="resRC",r="resRC";else{const n=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],a=[];for(let r=0;r<t.length;r++)a.push(`${n[r]}`),r<e&&o.push(`${n[r]}`);r=o.join(),i=a.join()}const o=FC(n);this.userCode=`\n      void main() {\n        ${o} resRC = getOutputCoords();\n        float cVal = getC(${r});\n        if (cVal >= 1.0) {\n          setOutput(getA(${i}));\n        } else {\n          setOutput(getB(${i}));\n        }\n      }\n    `}}const bR={kernelName:Eb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:r,t:i,e:o}=t,a=new vR(r.shape.length,i.shape,i.shape.length);return n.runWebGLProgram(a,[r,i,o],Ew(i.dtype,o.dtype))}},wR=_N({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),xR={kernelName:pb,backendName:"webgl",kernelFunc:wR},SR={kernelName:Qv,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{a:i,b:o}=t,{transposeA:a,transposeB:s}=r;return FN({a:i,b:o,transposeA:a,transposeB:s,backend:n})}},TR={kernelName:Ab,backendName:"webgl",kernelFunc:yN({opSnippet:"return x * x;"})},ER=yN({opSnippet:"return inversesqrt(x);",cpuKernelImpl:_M}),IR={kernelName:Sb,backendName:"webgl",kernelFunc:ER},kR={kernelName:nb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{equation:i}=r,o=t,{allDims:a,summedDims:s,idDims:l}=WE(i,o.length);XE(a.length,l,o);const{path:c,steps:u}=YE(s,l),p=u.length;let d=null,h=a.length;const m=[];for(let e=0;e<p;++e){for(const t of u[e]){const{permutationIndices:e,expandDims:r}=KE(h,l[t]);let i;JE(e)?i=o[t]:(i=aN({inputs:{x:o[t]},backend:n,attrs:{perm:e}}),m.push(i));const a=i.shape.slice();for(let e=0;e<r.length;++e)a.splice(r[e],0,1);cv(i.shape,a)||(i=lN({inputs:{x:i},backend:n,attrs:{shape:a}}),m.push(i)),null===d?d=i:(d=ON({inputs:{a:i,b:d},backend:n}),m.push(d))}e<p-1&&(c[e]>=0&&(d=DN({inputs:{x:d},backend:n,attrs:{axis:c[e]-(a.length-h),keepDims:!1}}),m.push(d)),h--)}for(const e of m)e!==d&&n.disposeIntermediateTensorInfo(e);return d}};function jR(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reductionIndices:o,keepDims:a}=r,s=i.shape.length,l=fv(o,i.shape);let c=l;const u=ET(c,s),p=null!=u,d=n.shouldExecuteOnCPU([i]);let h=i;if(p){if(d){const e=n.texData.get(h.dataId).values,t=new Array(s);for(let e=0;e<t.length;e++)t[e]=i.shape[u[e]];const r=PM(e,i.shape,i.dtype,u,t);h=n.makeTensorInfo(t,i.dtype),n.texData.get(h.dataId).values=r}else h=oN(i,u,n);c=kT(c.length,s)}TT("max",c,s);const[m,f]=xT(h.shape,c);let g,y=m;if(a&&(y=ST(m,l)),d){const e=n.texData.get(h.dataId).values,t=sM(e,lv(f),y,i.dtype);g=n.makeTensorInfo(y,i.dtype),n.texData.get(g.dataId).values=t}else g=function(e,t,n,r){const i=lv(t),o=lN({inputs:{x:e},attrs:{shape:[lv(e.shape)/i,i]},backend:r}),a=PN(o,e.dtype,"max",r),s=lN({inputs:{x:a},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(a),s}(h,f,y,n);return p&&n.disposeIntermediateTensorInfo(h),g}const AR={kernelName:db,backendName:"webgl",kernelFunc:jR},CR=yN({opSnippet:"if (isnan(x)) return x;\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:YO,dtype:"float32"}),OR={kernelName:ib,backendName:"webgl",kernelFunc:CR},MR=_N({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),NR={kernelName:tb,backendName:"webgl",kernelFunc:MR},RR=HM+"\n  return -x;\n",PR={kernelName:yb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])){const e=n.texData.get(r.dataId),[t,i]=pM(e.values,r.shape,r.dtype);return n.makeTensorInfo(i,r.dtype,t)}let i;return i=Dv().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new JM(r.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new qM(r.shape,RR),n.runWebGLProgram(i,[r],r.dtype)}},DR=yN({opSnippet:"return 1.0 / x;"}),LR={kernelName:vb,backendName:"webgl",kernelFunc:DR};class FR{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;const n=FC(this.rank),r=function(e){const t=["resRC.x","resRC.y","resRC.z","resRC.w"],n=[];for(let r=0;r<e.length;r++)2===r?n.push("index"):n.push(`${t[r]}`);return n.join()}(e);this.userCode=`\n      void main() {\n        ${n} resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;\n        setOutput(inBounds * getA(${r}));\n      }\n    `}}const BR={kernelName:ab,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i,indices:o}=t,{axis:a,batchDims:s}=r,l=fv(a,i.shape)[0];if(Dv().get("DEBUG")){const e=n.readSync(o.dataId),t=i.shape[l];for(let n=0;n<e.length;++n){const r=e[n];av(r<=t-1&&r>=0,(()=>`GatherV2: the index value ${r} is not in [0, ${t-1}]`))}}const c=mI(i,o,l,s),u=lv(o.shape),p=[],d=lN({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),h=lN({inputs:{x:o},backend:n,attrs:{shape:[c.batchSize,u/c.batchSize]}});p.push(d),p.push(h);const m=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([i,o])||"string"===i.dtype){const e=n.bufferSync(h),t=n.bufferSync(d),r=eM(t,e,m);return p.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(c.outputShape,r.dtype,r.values)}const f=new FR(d.shape,m),g=n.runWebGLProgram(f,[d,h],d.dtype);p.push(g);const y=lN({inputs:{x:g},backend:n,attrs:{shape:c.outputShape}});return p.forEach((e=>n.disposeIntermediateTensorInfo(e))),y}};class UR{constructor(e,t,n,r){this.sliceDim=e,this.strides=t,this.paramsShape=r,this.variableNames=["x","indices"],this.outputShape=n;const i=FC(n.length);let o="\n    int index;";for(let e=0;e<this.sliceDim;e++)o+=`\n          index = round(getIndices(coords[0], ${e}));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[e]};\n          flattenIndex += index * ${this.strides[e]};`;this.userCode=`\n         void main() {\n          ${i} coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ${o}\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      `}}const VR={kernelName:sb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:r,indices:i}=t,o=i.shape,a=o[o.length-1],s=lv(r.shape),[l,c,u,p]=SE(r,i),d=lN({inputs:{x:i},backend:n,attrs:{shape:[c,a]}}),h=lN({inputs:{x:r},backend:n,attrs:{shape:[lv(r.shape)/u,u]}});if(n.shouldExecuteOnCPU([r,i])||"string"===r.dtype){const e=n.readSync(i.dataId),t=n.bufferSync(r),o=ZO(e,t,r.dtype,c,a,u,p,r.shape,s);return n.makeTensorInfo(l,r.dtype,o.values)}const m=new UR(a,p,[c,u],r.shape),f=n.runWebGLProgram(m,[h,d],h.dtype),g=lN({inputs:{x:f},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),g}},GR=yN({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),zR={kernelName:Mb,backendName:"webgl",kernelFunc:GR};class $R{constructor(e,t,n){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,n],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ${t-1}; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(${t-1}));\n      }\n    `}}const qR={kernelName:fb,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{numSamples:o,seed:a,normalized:s}=r,l=s?i:function(e){const{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{dim:o}=r,a=fv([o],i.shape),s=jR({inputs:{x:i},backend:n,attrs:{reductionIndices:a,keepDims:!1}}),l=ST(s.shape,a),c=lN({inputs:{x:s},backend:n,attrs:{shape:l}}),u=aR({inputs:{a:i,b:c},backend:n}),p=CR({inputs:{x:u},backend:n}),d=DN({inputs:{x:p},backend:n,attrs:{axis:a,keepDims:!1}}),h=lN({inputs:{x:d},backend:n,attrs:{shape:l}}),m=MR({inputs:{a:p,b:h},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),m}({inputs:{logits:i},backend:n,attrs:{dim:i.shape.length-1}}),c=l.shape[0],u=l.shape[1],p=new $R(c,u,o),d=[[a]],h=n.runWebGLProgram(p,[l],"int32",d);return s||n.disposeIntermediateTensorInfo(l),h}};qv(Jk),qv(Zk),qv(lj),qv(ij),qv(pj),qv(Oj),qv(jj),qv(Rj),qv(Bj),qv(Gj),qv(qj),qv(Kj),qv(Wj),qv(Qj),qv(tA),qv(iA),qv(aA),qv(lA),qv(cA),qv(pA),qv(dA),qv(fA),qv(Cj),qv(vA),qv(bA),qv(SA),qv(TA),qv(kA),qv(CA),qv(NA),qv(PA),qv(LA),qv(BA),qv(Lj),qv(VA),qv(xj),qv(zA),qv(sN),qv(cN),qv(wN),qv(pN),qv(kN),qv(BN),qv(GN),qv($N),qv(JN),qv(ZN),qv(tR),qv(iR),qv(rR),qv(sR),qv(cR),qv(pR),qv(hR),qv(fR),qv(_R),qv(LN),qv(bR),qv(xR),qv(SR),qv(MN),qv(TR),qv(IR),qv(kR),qv(AR),qv(OR),qv(NR),qv(PR),qv(LR),qv(BR),qv(YN),qv(VR),qv(zR),qv(qR);function HR(e,t,n){Tm(t),console.assert(t.shape[0]==n.numMotorBindings+n.numThrusterBindings);for(var r=[],i=0;i<e.joint.length;i++){var o=e.joint[i];r.push(t.get(o.motorBinding))}for(i=0;i<e.thruster.length;++i){var a=e.thruster[i];r.push(t.get(a.thrusterBinding+n.numMotorBindings))}return console.assert(r.length==e.joint.length+e.thruster.length),vt.array(r)}function WR(e,t){var n=vt.zeros(t);return n.set(e,1),n}function KR(e,t){var n=Math.cos(e.rotation),r=Math.sin(e.rotation),i=WR(e.role,t.numShapeRoles).tolist();return[e.position.get(0),e.position.get(1),e.velocity.get(0),e.velocity.get(1),e.inverseMass,e.inverseInertia,e.density,Math.tanh(e.angularVelocity/10)].concat(i).concat([r,n,e.friction,e.restitution])}function XR(e,t,n,r){return e.concat([t.radius,1])}function YR(e,t,n,r){for(var i=[],o=0;o<r.maxPolygonVertices;o++)o<t.nVertices?(i.push(t.vertices.get(o,0)),i.push(t.vertices.get(o,1))):(i.push(-1),i.push(-1));return e.concat([0].concat(i).concat([t.nVertices<=3?1:0]))}function JR(e,t,n){function r(t){var r,i;0==t?(r=e.aRelativePos,i=e.bRelativePos):(r=e.bRelativePos,i=e.aRelativePos);var o=Math.sin(e.rotation),a=Math.cos(e.rotation),s=e.motorHasJointLimits?Math.sin(e.maxRotation):0,l=e.motorHasJointLimits?Math.cos(e.maxRotation):0,c=e.motorHasJointLimits?Math.sin(e.minRotation):0,u=e.motorHasJointLimits?Math.cos(e.minRotation):0,p=e.motorHasJointLimits?e.maxRotation-e.rotation:0,d=e.motorHasJointLimits?e.minRotation-e.rotation:0,h=[e.active?1:0,e.isFixedJoint?1:0,r.get(0),r.get(1),i.get(0),i.get(1),o,a],m=WR(e.motorBinding,n.numMotorBindings).tolist(),f=[e.motorSpeed,e.motorPower,e.motorOn?1:0,e.motorHasJointLimits?1:0].concat(m).concat([c,u,s,l,d,p]);if(e.isFixedJoint)for(var g=0;g<f.length;++g)f[g]*=0;return h.concat(f)}return{features:[r(0),r(1)],indexes:[[e.bIndex,e.aIndex],[e.aIndex,e.bIndex]],mask:[e.active,e.active]}}function QR(e,t,n){var r=Math.sin(e.rotation),i=Math.cos(e.rotation);return{features:[e.active?1:0,e.relativePosition.get(0),e.relativePosition.get(1)].concat(WR(e.thrusterBinding,n.numThrusterBindings).tolist()).concat([r,i,e.power]),indexes:e.objectIndex,mask:e.active}}function ZR(e,t,n){for(var r=[],i=[],o=[],a=[],s=[],l=[],c=[],u=[],p=[],d=0;d<n.numCircles;++d){var h=e.circle[d];r.push(XR(KR(h,t),h)),s.push(h.active)}for(d=0;d<n.numPolygons;++d)if(![1,2,3].includes(d)){var m=e.polygon[d];i.push(YR(KR(m,t),m,0,n)),l.push(m.active)}for(d=0;d<n.numJoints;++d){var f=e.joint[d],g=JR(f,0,n),y=WR(f.aIndex,n.numCircles+n.numPolygons).tolist(),_=WR(f.bIndex,n.numCircles+n.numPolygons).tolist();o.push(g.features[0].concat(y).concat(_)),c.push(g.mask[0])}for(d=0;d<n.numThrusters;++d){var v=e.thruster[d],b=QR(v,0,n);a.push(b.features.concat(WR(v.objectIndex,n.numCircles+n.numPolygons).tolist())),u.push(b.mask),p.push(b.indexes)}var w=function(e,t){for(var n=0;n<t.length;++n)if(!t[n])for(var r=0;r<e[n].length;++r)e[n][r]=0;return e},x=function(e){for(var t=[],n=0;n<e.length;++n)t.push.apply(t,e[n]);return t},S=x(w(i,l)).concat(x(w(r,s))).concat(x(w(o,c))).concat(x(w(a,u))).concat([e.gravity.get(1)/10]);for(d=0;d<S.length;++d)S[d]=S[d]<-10?-10:S[d]>10?10:S[d];return S}function eP(e,t){return n=this,r=void 0,o=function(){var n,r,i,o,a,s,l,c;return function(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}(this,(function(u){switch(u.label){case 0:for(n=function(e){return console.assert(e>=0&&e<=2),[0,1,-1][e]},r=function(e){return console.assert(e>=0&&e<=1,"Bad action: "+e.toString()),[0,1][e]},i=0,o=[],a=[],c=0;c<t.numMotorBindings;c++)s=e.slice(i,3),a.push(YS(s.as1D(),1).array()),i+=3;for(c=0;c<t.numThrusterBindings;c++)s=e.slice(i,2),a.push(YS(s.as1D(),1).array()),i+=2;return[4,Promise.all(a)];case 1:for(l=u.sent(),c=0;c<t.numMotorBindings;c++)o.push(n(l[c][0]));for(c=0;c<t.numThrusterBindings;c++)o.push(r(l[t.numMotorBindings+c][0]));return[2,vt.array(o)]}}))},new((i=void 0)||(i=Promise))((function(e,t){function a(e){try{l(o.next(e))}catch(e){t(e)}}function s(e){try{l(o.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(a,s)}l((o=o.apply(n,r||[])).next())}));var n,r,i,o}var tP=function(){return e=void 0,t=void 0,r=function(){var e,t;return function(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}(this,(function(n){switch(n.label){case 0:return gw.prototype.transpose=function(e){return oT(this,e)},gw.prototype.flatten=function(){return WS(this,[-1])},gw.prototype.asType=function(e){return nS(this,e)},gw.prototype.reshape=function(e){return WS(this,e)},gw.prototype.slice=function(e,t){return QS(this,e,t)},gw.prototype.as1D=function(){return WS(this,[-1])},Pw.setBackend("webgl"),[4,qk("./michael_export_clean_poly/tfjs_models/model.json")];case 1:return e=n.sent(),[4,qk("./michael_export_clean_poly_symbolic/tfjs_models/model.json")];case 2:return t=n.sent(),console.log("MODEL",t.inputNodes,t.inputs),t.inputs,[2,{symbolic:{model:t,isSymbolic:!0},entity:{model:e,isSymbolic:!1}}]}}))},new((n=void 0)||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}));var e,t,n,r},nP=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},rP=function(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},iP=function(e,t,n,r,i){return void 0===r&&(r=null),void 0===i&&(i=!1),function(o){var a=function(){var e=[],t=0,n=100,r=1;const i="p5.gui";function o(e,i,o){var a=ev().create(20,20,e,i);this.prototype=a,this.addGlobals=function(){a.bindGlobals(arguments)},this.addObject=function(){object=arguments[0];var e=[];arguments.length>1&&(e=(e=Array.prototype.slice.call(arguments)).slice(1)),0===e.length&&(e=Object.keys(object)),a.bindParams(object,e)},this.noLoop=function(){a.setGlobalChangeHandler(o._draw)},this.loop=function(){a.setGlobalChangeHandler(null)},this.show=function(){a.show()},this.hide=function(){a.hide()},this.toggleVisibility=function(){a.toggleVisibility()},this.setPosition=function(e,t){return a.setPosition(e,t),this},a.bindParams=function(e,i){for(var a=0;a<i.length;a++){var s=i[a],l=e[s],c=typeof l;if(!/^(.*min|.*max|.*step)$/i.test(s))switch(c){case"object":if(l instanceof Array&&3===l.length&&"number"==typeof l[0]){var u="#"+o.color(l[0],l[1],l[2]).levels.slice(0,3).map((function(e){return("0"+e.toString(16)).slice(-2)})).join("");this.bindColor(s,u,e)}else this.bindDropDown(s,l,e),e[s]=l[0];break;case"number":var p=e[s+"Min"]||e[s+"min"]||t,d=e[s+"Max"]||e[s+"max"]||n,h=e[s+"Step"]||e[s+"step"]||r;p=Math.min(l,p),d=Math.max(l,d),this.bindRange(s,p,d,l,h,e);break;case"string":/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i.test(l)?this.bindColor(s,l,e):this.bindText(s,l,e);break;case"boolean":this.bindBoolean(s,e[s],e)}}},a.bindGlobals=function(e){this.bindParams(window,e)},this.qs=a}function a(){var e=function(){};this.addGlobals=e,this.noLoop=e,this.addObject=e,this.show=e}return A.prototype.removeGui=function(e){},A.prototype.sliderRange=function(e,i,o){t=e,n=i,r=o},A.prototype.noLoop=function(){this._loop=!1;for(var t=0;t<e.length;t++)e[t].noLoop()},A.prototype.loop=function(){for(var t=0;t<e.length;t++)e[t].loop();this._loop=!0,this._draw()},function(t,n,r){if("string"==typeof t)return this.createGui(n,t,r);let s=document.body;void 0===t?(t=window,n=n||document.title||i):(s=t.canvas.parentElement,n=n||s.id||i),"color"in t||console.error(`${s.id}: You need to pass the p5 sketch to createGui in instance mode!`),r=r||"QuickSettings";for(let i=0;i<7;++i){var l;"QuickSettings"===r?ev()?(console.log("Creating p5.gui powered by QuickSettings."),l=new o(n,s,t)):(console.log("QuickSettings not found. Is the script included in your HTML?"),l=new a(n,s,t)):(console.log("Unknown GUI provider "+r),l=new a(n,s,t)),e.push(l)}return e}}(),s=document.documentElement.clientWidth,l=window.innerHeight,c=Math.abs(s-l);s=l=Math.min(s,l);var u=Sm;u.screenDim=vt.array([s,l]);var p,d,h=xm,m=xf(u),f=new uf(u,h),g=B_.EDIT,y=null,_=!0,v=!1,b=[],w=null,x=0,S=function(e){var t=document.getElementById("btnActionPlayHuman"),n=document.getElementById("btnActionPlayAgent"),r=document.getElementById("btnActionPause"),i=document.getElementById("btnActionNew"),o=function(e){for(var t=0,n=e;t<n.length;t++)n[t].removeAttribute("disabled")},a=function(e){for(var t=0,n=e;t<n.length;t++)n[t].setAttribute("disabled","true")};e?(o([t,n,i]),a([r])):(o([r]),a([t,n,i]))},T=function(){S(!1),m=p.stopEditing(m),d=O(m),g=B_.PLAY,p.qs[3].disableControl("Let Agent Play"),r&&i&&p.qs[6].disableControl("Back To Gallery"),r&&i&&p.qs[6].hideControl("Back To Gallery")},E=function(){S(!0),v=!1,g=B_.EDIT,m=O(d),m=p.startEditing(m),p.qs[3].enableControl("Let Agent Play"),r&&i&&p.qs[6].enableControl("Back To Gallery"),r&&i&&p.qs[6].showControl("Back To Gallery")},I=function(){m=p.stopEditing(m);for(var e=0,t=p.qs;e<t.length;e++)t[e].hide()},k=function(e){void 0===e&&(e=!0);for(var n=0;n<p.qs.length;n++)p.qs[n].setSize(c/2,null);p.qs[6].setSize(c/2,null),p.qs[6].setPosition(document.documentElement.clientWidth-c/2,null),t()&&(document.getElementById("loginDiv").style.width=c/2+"px"),p.qs[6]._panel.style.bottom="0px",p.qs[6]._panel.style.top=null;var r=document.getElementById("loginDiv").clientHeight,i=function(e){void 0===e&&(e=200);var t=document.getElementsByClassName("qs_main")[6].clientHeight;null==w&&(w=document.getElementsByClassName("qs_main")[5].clientHeight),p.qs[5].setSize(null,Math.min(w,u.screenDim.get(1)-t-r-e))};e?(document.getElementsByClassName("qs_main")[6].style.zIndex=1e4,i(-200),setTimeout((function(){return i(0)}),100)):i(0),p.qs[5].setPosition(document.documentElement.clientWidth-c/2,r),document.getElementsByClassName("qs_main")[3].clientHeight,p.qs[3].setPosition(0,null),p.qs[3]._panel.style.bottom="0px",p.qs[3]._panel.style.top=null,document.getElementsByClassName("qs_main")[4].clientHeight,p.qs[4].setPosition(0,null),p.qs[4]._panel.style.bottom="0px",p.qs[4]._panel.style.top=null},j=function(){_&&!function(e,t,n){return 679==ZR(e,t,n).length}(m,h,u)&&p.qs[3].setValue("Agent Type",{value:"Entity",index:1})},N=function(){document.getElementById("btnActionPlayHuman").addEventListener("click",(function(){console.log("Human play"),p.qs[3].setValue("Let Agent Play",!1),T()})),document.getElementById("btnActionPlayAgent").addEventListener("click",(function(){console.log("Agent play"),p.qs[3].setValue("Let Agent Play",!0),T()})),document.getElementById("btnActionPause").addEventListener("click",(function(){console.log("Pause"),E()})),S(!0),k(),r&&i&&p.qs[6].addButton("Back To Gallery",(function(){o.clear(),I(),e(p.levelsSaved)})),p.qs[3].addDropDown("Agent Type",["Symbolic","Entity"],(function(e){_="Symbolic"==e.value,j()})),t()||I()};o.windowResized=function(){s=document.documentElement.clientWidth,l=window.innerHeight,c=Math.abs(s-l),s=l=Math.min(s,l),u.screenDim=vt.array([s,l]),o.resizeCanvas(s,l),P(),k(!1)},o.keyPressed=function(){t()&&(" "===o.key?g==B_.EDIT?T():E():m=p.keyPressed(m))};var R={};o.preload=function(){R=D_(o)},o.setup=function(){R=L_(o,0,R),tP().then((function(e){y=e}));for(var e=a(o,"Hello").map((function(e){return e.qs})),i=0;i<e.length;i++)e[i].setSize(c/2,null),e[i].setPosition(0,0),e[i].hide();p=new Q_(o,u,h,R,e,N,t,n,r),o.createCanvas(s,l,document.getElementById("canvasEditor"))};var P=function(){h=p.envParams,u=p.staticEnvParams,f=new uf(u,h),j()},D=function(e){b.length<25||b.shift(),b.push(e)};function L(){return nP(this,void 0,void 0,(function(){var e,t,n,r,i,o,a,s,l,c,d,f,g,v;return rP(this,(function(b){switch(b.label){case 0:if(e=performance.now(),null==y)return[3,6];t=F(),n=function(e,t,n,r){return r?ZR(e,t,n):function(e,t,n){for(var r=[],i=[],o=[],a=[],s=[],l=[],c=[],u=[],p=[],d=[],h=0;h<n.numCircles;++h){var m=e.circle[h];r.push(XR(KR(m,t),m).concat([e.gravity.get(1)/10])),s.push(m.active)}for(h=0;h<n.numPolygons;++h){var f=e.polygon[h];i.push(YR(KR(f,t),f,0,n).concat([e.gravity.get(1)/10])),l.push(f.active)}for(h=0;h<n.numJoints;++h){var g=JR(S=e.joint[h],0,n);o.push(g.features),c.push(g.mask),d.push(g.indexes)}for(h=0;h<n.numThrusters;++h){var y=QR(e.thruster[h],0,n);a.push(y.features),u.push(y.mask),p.push(y.indexes)}var _=n.numCircles+n.numPolygons;function v(e){void 0===e&&(e=!0);for(var t=[],n=0;n<_;++n){for(var r=[],i=0;i<_;++i)r.push(e);t.push(r)}return t}function b(){for(var t=v(!1),r=0,i=0;i<n.numCircles;i++)for(var o=e.circle[i],a=i+1;a<n.numCircles;a++){var s=e.circle[a];r++,o.active&&s.active&&(p=e.accCCManifolds[r-1]).active&&(t[i+(d=n.numPolygons)][a+d]=!0,t[a+d][i+d]=!0)}for(r=0,i=0;i<n.numPolygons;i++){var l=e.polygon[i];for(a=i+1;a<n.numPolygons;a++){var c=e.polygon[a];i<n.numStaticFixatedPolys&&a<n.numStaticFixatedPolys||(r++,l.active&&c.active&&((p=e.accRRManifolds[r-1]).cm1.active||p.cm2.active)&&(t[i][a]=!0,t[a][i]=!0))}}for(r=0,i=0;i<n.numCircles;i++){var u=e.circle[i];for(a=0;a<n.numPolygons;a++){var p,d=e.polygon[a];if(r++,u.active&&d.active&&(p=e.accCRManifolds[r-1]).active){var h=n.numPolygons;t[i+h][a]=!0,t[a][i+h]=!0}}}return t}var w=function(){for(var t=v(!1),r=cf(n),i=r.ncc,o=r.ncp,a=r.npp,s=r.ccIndices,l=r.cpIndices,c=r.ppIndices,u=0;u<i;u++){var p=s[u],d=p[0],h=p[1];e.circle[d].active&&e.circle[h].active&&e.accCCManifolds[u].active&&(t[d+(f=n.numPolygons)][h+f]=!0,t[h+f][d+f]=!0)}for(u=0;u<a;u++){var m=c[u];d=m[0],h=m[1],e.polygon[d].active&&e.polygon[h].active&&(e.accRRManifolds[u].cm1.active||e.accRRManifolds[u].cm2.active)&&(t[d][h]=!0,t[h][d]=!0)}for(u=0;u<o;u++){var f,g=l[u];d=g[0],h=g[1],e.circle[d].active&&e.polygon[h].active&&e.accCRManifolds[u].active&&(t[d+(f=n.numPolygons)][h]=!0,t[h][d+f]=!0)}return t}(),x=b();for(h=0;h<w.length;++h)for(var S=0;S<w[h].length;++S)console.assert(w[h][S]==x[h][S]),console.log(w[h][S]==x[h][S]);function T(t){for(var n=0;n<t.length;++n)for(var r=0;r<t[n].length;++r){var i=M(e,n),o=M(e,r);i.active&&o.active||(t[n][r]=!1,t[r][n]=!1)}return t}console.log("GOOD");var E=[v(),function(){for(var t=[],n=0;n<_;++n){for(var r=[],i=0;i<_;++i)r.push(!(1==e.collisionMatrix.get(n,i)));t.push(r)}return t}(),function(){for(var t=v(!1),r=0;r<n.numJoints;++r){var i=e.joint[r];i.active&&(t[i.aIndex][i.bIndex]=!0,t[i.bIndex][i.aIndex]=!0)}return t[0][0]=!1,t}(),b()];for(h=0;h<E.length;++h)E[h]=T(E[h]);var I=n.numJoints;return{circles:Kw(r),polygons:Kw(i),joints:Kw(o).transpose([1,0,2]).reshape([2*I,-1]),thrusters:Kw(a),circle_mask:Kw(s),polygon_mask:Kw(l),joint_mask:Kw(c).transpose().flatten(),thruster_mask:Kw(u),attention_mask:Kw(E),joint_indexes:Kw(d).transpose([1,0,2]).reshape([2*I,2]).asType("int32"),thruster_indexes:Kw(p).asType("int32")}}(e,t,n)}(m,h,u,t.isSymbolic),r=function(e,t,n){var r=tT([1,256]),i=tT([1],"float32");return n?[r,i,Kw(t)]:[r,i,t.circles,t.polygons,t.joints,t.thrusters,t.circle_mask,t.polygon_mask,t.joint_mask,t.thruster_mask,t.attention_mask,t.joint_indexes,t.thruster_indexes]}(0,n,t.isSymbolic),i=function(e,t){for(var n=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([],t.map((function(e){return tT([1])})),!0),r=0;r<t.length;++r){var i=t[r].name,o=parseInt(i.split("_")[1]);n[r]=e[o]}return n}(r,t.model.inputs),o=performance.now(),a=performance.now(),s=void 0,b.label=1;case 1:return b.trys.push([1,3,,4]),[4,t.model.executeAsync(i)];case 2:return s=b.sent(),[3,4];case 3:return b.sent(),_&&(_=!1,j(),p.qs[3].setValue("Agent Type",{value:"Entity",index:1})),[3,4];case 4:return l=performance.now(),console.log("Time for obs",o-e,"Time for Forward",l-a),(c=s)[0],d=c[1],c[2],f=performance.now(),[4,eP(d,u)];case 5:return g=b.sent(),v=performance.now(),performance.now(),console.log("\tTOTAL TIME",v-f),[2,HR(m,g,u)];case 6:return[2]}}))}))}o.draw=function(){if(t()){if(n.getHasAuthStateChanged()&&(p._showHideCloudSaveButton(null!=n.getCurrentUser()),n.setHasAuthStateChanged(!1)),n.shouldLoadNewLevel()){p.allowSavingToCloud||null==n.getCurrentUser()||p._showHideCloudSaveButton(!0),document.getElementById("loginDiv").style.width=c/2+"px",n.setShouldLoadNewLevel(!1),p.onResumeFocus();var e=n.levelToLoad();console.log("Found level to load = ",e),p.showRatings(e.rankingData),console.assert(null!=e),m=e.level.env_state,h=C(e.level.env_params),(u=C(e.level.static_env_params)).screenDim=vt.array([s,l]),p.staticEnvParams=u,p.envParams=h,n.setLevelToNull(),m=p.startEditing(m),P()}F_(o,m,u,h,R),g==B_.EDIT?(m=p.edit(m),p.hasChangedParams&&P(),D(o.deltaTime)):v||(nP(void 0,void 0,void 0,(function(){var e,t,n,r,i,a,s;return rP(this,(function(l){switch(l.label){case 0:return e=performance.now(),v=!0,t=O(m),g!=B_.PLAY?[3,3]:(n=function(e){var t=vt.zeros(u.numMotorBindings+u.numThrusterBindings);t.set(0,o.keyIsDown(o.LEFT_ARROW)?1:o.keyIsDown(o.RIGHT_ARROW)?-1:0),t.set(1,o.keyIsDown(o.UP_ARROW)?1:o.keyIsDown(o.DOWN_ARROW)?-1:0),t.set(2,o.keyIsDown(87)?-1:o.keyIsDown(83)?1:0),t.set(3,o.keyIsDown(65)?1:o.keyIsDown(68)?-1:0);for(var n=0;n<u.numThrusterBindings;n++)t.set(u.numMotorBindings+n,o.keyIsDown(49+n)?1:0);return HR(e,t,u)}(t),r=1,p.qs[3].getValue("Let Agent Play")?[4,L()]:[3,2]);case 1:n=l.sent(),r=u.frameSkip,l.label=2;case 2:for(i=!1,a=0;a<r;a++)t=f.step(t,n),i=i||t.terminal;console.assert(function(e,t){if(e.numCircles!=t.circle.length)return console.assert(!1,"numCircles"),!1;if(e.numPolygons!=t.polygon.length)return console.assert(!1,"numPolygons"),!1;if(e.numJoints==t.joint.length){if(e.numThrusters==t.thruster.length)return!0;console.assert(!1,"numThrusters")}else console.assert(!1,"numJoints")}(u,t)),i&&(t=O(d)),l.label=3;case 3:return g==B_.PLAY&&(m=t),v=!1,s=performance.now(),x=s-e,[2]}}))})),p.qs[3].getValue("Let Agent Play")?D(x):D(o.deltaTime)),p.render(g);var r=b.reduce((function(e,t){return e+t}),0);o.text(Math.round(b.length/r*1e3)+" fps",50,50)}};var F=function(){return _?y.symbolic:y.entity}}},oP=function(){function e(){var e=this;this._levelToLoad=null,this._shouldLoadNewLevel=!1,this._newLevelsSavedToCloud=[],this._currentUser=null,this._hasAuthStateChanged=!1,this._onAuthStateCallback=function(t){e._currentUser=t,e._hasAuthStateChanged=!0}}return e.prototype.getAuthStateCallback=function(){return this._onAuthStateCallback},e.prototype.getHasAuthStateChanged=function(){return this._hasAuthStateChanged},e.prototype.setHasAuthStateChanged=function(e){this._hasAuthStateChanged=e},e.prototype.getCurrentUser=function(){return this._currentUser=j_(),this._currentUser},e.prototype.shouldLoadNewLevel=function(){return this._shouldLoadNewLevel},e.prototype.setShouldLoadNewLevel=function(e){this._shouldLoadNewLevel=e},e.prototype.levelToLoad=function(){return this._levelToLoad},e.prototype.switchLevel=function(e){this._levelToLoad=e},e.prototype.setLevelToNull=function(){this._levelToLoad=null},e.prototype.setNewLevelsSavedToCloud=function(e){this._newLevelsSavedToCloud=e},e.prototype.getNewLevelsSavedToCloud=function(){return this._newLevelsSavedToCloud},e}(),aP=function(e){var t=j_();A_(t),document.getElementById("signoutButton").onclick=function(){console.log("SIGNING OUT"),I_(void 0,void 0,void 0,(function(){return k_(this,(function(e){switch(e.label){case 0:return[4,T_().signOut()];case 1:return e.sent(),A_(null),[2]}}))}))},document.getElementById("loginButton").onclick=function(){(function(e){return I_(void 0,void 0,void 0,(function(){var t,n,r,i,o,a,s,l,c,u;return k_(this,(function(p){switch(p.label){case 0:if(t=new py,n=T_(),null!=(r=n.currentUser))return[3,4];p.label=1;case 1:return p.trys.push([1,3,,4]),[4,Wy(n,t)];case 2:return i=p.sent(),(u=py.credentialFromResult(i)).accessToken,o=i.user,function(e,t){C_(void 0,void 0,void 0,(function(){var n,r,i;return O_(this,(function(o){switch(o.label){case 0:return n=e.db,r=gh(n,"users"),[4,dm(i=yh(r,t.uid))];case 1:return o.sent().exists()?[3,3]:[4,fm(i,{name:t.displayName,email:t.email,firstLogin:new Date,lastLogin:new Date})];case 2:return o.sent(),[3,5];case 3:return[4,fm(i,{lastLogin:new Date},{merge:!0})];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}(e,o),[2,o];case 3:return a=p.sent(),s=a.code,l=a.message,c=a.customData.email,u=py.credentialFromError(a),console.log("ERROR",s,l,c,u),[2,null];case 4:return[2,r]}}))}))})(e).then((function(e){console.log("Michael has loaded a user V2",e),A_(e)}))}},sP=r(5072),lP=r.n(sP),cP=r(7825),uP=r.n(cP),pP=r(7659),dP=r.n(pP),hP=r(5056),mP=r.n(hP),fP=r(540),gP=r.n(fP),yP=r(1113),_P=r.n(yP),vP=r(1540),bP={};bP.styleTagTransform=_P(),bP.setAttributes=mP(),bP.insert=dP().bind(null,"head"),bP.domAPI=uP(),bP.insertStyleElement=gP(),lP()(vP.A,bP),vP.A&&vP.A.locals&&vP.A.locals;var wP=r(1017),xP={};xP.styleTagTransform=_P(),xP.setAttributes=mP(),xP.insert=dP().bind(null,"head"),xP.domAPI=uP(),xP.insertStyleElement=gP(),lP()(wP.A,xP),wP.A&&wP.A.locals&&wP.A.locals;var SP,TP,EP,IP,kP,jP,AP,CP,OP,MP=[{env_state:{polygon:[{position:{0:2.5,1:-4.800000190734863},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:2.5,1:5.199999809265137},1:{0:2.5,1:-5.199999809265137},2:{0:-2.5,1:-5.199999809265137},3:{0:-2.5,1:5.199999809265137}},radius:0,role:3,density:1,highlighted:!1},{position:{0:0,1:0},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:-5,1:5},1:{0:-.05000000074505806,1:5},2:{0:-.05000000074505806,1:0},3:{0:-5,1:0}},radius:0,role:0,density:1,highlighted:!1},{position:{0:0,1:0},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:5,1:5},1:{0:10,1:5},2:{0:10,1:0},3:{0:5,1:0}},radius:0,role:0,density:1,highlighted:!1},{position:{0:2.5,1:10.199999809265137},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:2.5,1:5.199999809265137},1:{0:2.5,1:-5.199999809265137},2:{0:-2.5,1:-5.199999809265137},3:{0:-2.5,1:5.199999809265137}},radius:0,role:0,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.755000114440918},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.755000114440918},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.755000114440918},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.755000114440918},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.755000114440918},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.755000114440918},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.755000114440918},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.755000114440918},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1}],circle:[{position:{0:1.5899999141693115,1:1.0549999475479126},rotation:2.0572593212127686,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:2.0268056392669678,inverse_inertia:51.62192153930664,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.39629536867141724,role:1,density:1,highlighted:!1},{position:{0:1.5749999284744263,1:.6949999928474426},rotation:5.3746232986450195,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:10.70849323272705,inverse_inertia:1441.0089111328125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.17240937054157257,role:0,density:1,highlighted:!1},{position:{0:1.5749999284744263,1:.6949999928474426},rotation:5.3746232986450195,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:10.70849323272705,inverse_inertia:1441.0089111328125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.17240937054157257,role:0,density:1,highlighted:!1},{position:{0:1.5749999284744263,1:.6949999928474426},rotation:5.3746232986450195,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:10.70849323272705,inverse_inertia:1441.0089111328125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.17240937054157257,role:0,density:1,highlighted:!1}],joint:[{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5749999284744263,1:.6949999928474426},active:!0,acc_impulse:{0:0,1:0},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5749999284744263,1:.6949999928474426},active:!0,acc_impulse:{0:0,1:0},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5749999284744263,1:.6949999928474426},active:!0,acc_impulse:{0:0,1:0},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5749999284744263,1:.6949999928474426},active:!0,acc_impulse:{0:0,1:0},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5749999284744263,1:.6949999928474426},active:!0,acc_impulse:{0:0,1:0},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5749999284744263,1:.6949999928474426},active:!0,acc_impulse:{0:0,1:0},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1}],thruster:[{object_index:6,relative_position:{0:0,1:0},rotation:.0793752670288086,power:.4192001223564148,global_position:{0:1.5749999284744263,1:.6949999928474426},active:!1,thruster_binding:3},{object_index:6,relative_position:{0:0,1:0},rotation:.0793752670288086,power:.4192001223564148,global_position:{0:1.5749999284744263,1:.6949999928474426},active:!1,thruster_binding:3}],collision_matrix:{0:{0:!1,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0},1:{0:!0,1:!1,2:!0,3:!0,4:!0,5:!0,6:!0},2:{0:!0,1:!0,2:!1,3:!0,4:!0,5:!0,6:!0},3:{0:!0,1:!0,2:!0,3:!1,4:!0,5:!0,6:!0},4:{0:!0,1:!0,2:!0,3:!0,4:!1,5:!0,6:!0},5:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!1,6:!1},6:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!1,6:!1}},acc_rr_manifolds:[{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0}],acc_cr_manifolds:[{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0}],acc_cc_manifolds:[{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0}],gravity:{0:0,1:-9.8100004196167}},env_params:{dt:.016666666666666666,slop:.01,baumgarte_coefficient_joints_v:2,baumgarte_coefficient_joints_p:.7,baumgarte_coefficient_fjoint_av:2,baumgarte_coefficient_rjoint_limit_av:5,baumgarte_coefficient_collision:.2,joint_stiffness:.6,clip_position:15,clip_velocity:100,clip_angular_velocity:50,base_motor_speed:6,base_motor_power:900,base_thruster_power:10,motor_decay_coefficient:.1,motor_joint_limit:.1,base_friction:.4,max_timesteps:256,pixels_per_unit:100,dense_reward_scale:.1,num_shape_roles:4},static_env_params:{num_polygons:12,num_circles:4,num_joints:6,num_thrusters:2,max_polygon_vertices:4,num_solver_iterations:10,solver_batch_size:16,do_warm_starting:!0,num_static_fixated_polys:4,screen_dim:{0:500,1:500},downscale:4,frame_skip:2,max_shape_size:2,num_motor_bindings:4,num_thruster_bindings:2}},{env_state:{polygon:[{position:{0:2.5,1:-4.800000190734863},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:2.5,1:5.199999809265137},1:{0:2.5,1:-5.199999809265137},2:{0:-2.5,1:-5.199999809265137},3:{0:-2.5,1:5.199999809265137}},radius:0,role:3,density:1,highlighted:!1},{position:{0:0,1:0},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:-5,1:5},1:{0:-.05000000074505806,1:5},2:{0:-.05000000074505806,1:0},3:{0:-5,1:0}},radius:0,role:0,density:1,highlighted:!1},{position:{0:0,1:0},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:5,1:5},1:{0:10,1:5},2:{0:10,1:0},3:{0:5,1:0}},radius:0,role:0,density:1,highlighted:!1},{position:{0:2.5,1:10.199999809265137},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:2.5,1:5.199999809265137},1:{0:2.5,1:-5.199999809265137},2:{0:-2.5,1:-5.199999809265137},3:{0:-2.5,1:5.199999809265137}},radius:0,role:0,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.746825218200684},rotation:0,velocity:{0:0,1:-.3270000219345093},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.746825218200684},rotation:0,velocity:{0:0,1:-.3270000219345093},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.746825218200684},rotation:0,velocity:{0:0,1:-.3270000219345093},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.746825218200684},rotation:0,velocity:{0:0,1:-.3270000219345093},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.746825218200684},rotation:0,velocity:{0:0,1:-.3270000219345093},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.746825218200684},rotation:0,velocity:{0:0,1:-.3270000219345093},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.746825218200684},rotation:0,velocity:{0:0,1:-.3270000219345093},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.746825218200684},rotation:0,velocity:{0:0,1:-.3270000219345093},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1}],circle:[{position:{0:1.5897140502929688,1:1.046836256980896},rotation:2.0622477531433105,velocity:{0:-.006692576687783003,1:-.32674112915992737},angular_velocity:.11675898730754852,inverse_mass:2.0268056392669678,inverse_inertia:51.62192153930664,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.39629536867141724,role:1,density:1,highlighted:!1},{position:{0:1.5765103101730347,1:.6867652535438538},rotation:5.1620869636535645,velocity:{0:.03535979241132736,1:-.32836782932281494},angular_velocity:-4.975042343139648,inverse_mass:10.70849323272705,inverse_inertia:1441.0089111328125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.17240937054157257,role:0,density:1,highlighted:!1},{position:{0:1.5765103101730347,1:.6867652535438538},rotation:5.1620869636535645,velocity:{0:.03535979241132736,1:-.32836782932281494},angular_velocity:-4.975042343139648,inverse_mass:10.70849323272705,inverse_inertia:1441.0089111328125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.17240937054157257,role:0,density:1,highlighted:!1},{position:{0:1.5765103101730347,1:.6867652535438538},rotation:5.1620869636535645,velocity:{0:.03535979241132736,1:-.32836782932281494},angular_velocity:-4.975042343139648,inverse_mass:10.70849323272705,inverse_inertia:1441.0089111328125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.17240937054157257,role:0,density:1,highlighted:!1}],joint:[{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5759209394454956,1:.6922380328178406},active:!0,acc_impulse:{0:.0018575269496068358,1:-8724755753064528e-20},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5759209394454956,1:.6922380328178406},active:!0,acc_impulse:{0:.0018575269496068358,1:-8724755753064528e-20},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5759209394454956,1:.6922380328178406},active:!0,acc_impulse:{0:.0018575269496068358,1:-8724755753064528e-20},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5759209394454956,1:.6922380328178406},active:!0,acc_impulse:{0:.0018575269496068358,1:-8724755753064528e-20},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5759209394454956,1:.6922380328178406},active:!0,acc_impulse:{0:.0018575269496068358,1:-8724755753064528e-20},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5759209394454956,1:.6922380328178406},active:!0,acc_impulse:{0:.0018575269496068358,1:-8724755753064528e-20},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1}],thruster:[{object_index:6,relative_position:{0:0,1:0},rotation:.0793752670288086,power:.4192001223564148,global_position:{0:1.5765103101730347,1:.6867652535438538},active:!1,thruster_binding:3},{object_index:6,relative_position:{0:0,1:0},rotation:.0793752670288086,power:.4192001223564148,global_position:{0:1.5765103101730347,1:.6867652535438538},active:!1,thruster_binding:3}],collision_matrix:{0:{0:!1,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0},1:{0:!0,1:!1,2:!0,3:!0,4:!0,5:!0,6:!0},2:{0:!0,1:!0,2:!1,3:!0,4:!0,5:!0,6:!0},3:{0:!0,1:!0,2:!0,3:!1,4:!0,5:!0,6:!0},4:{0:!0,1:!0,2:!0,3:!0,4:!1,5:!0,6:!0},5:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!1,6:!1},6:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!1,6:!1}},acc_rr_manifolds:[{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0}],acc_cr_manifolds:[{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0}],acc_cc_manifolds:[{normal:{0:-.03859081119298935,1:-.9992551207542419},penetration:.2083907127380371,collision_point:{0:1.5745322704315186,1:.6562820672988892},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:-.03859081119298935,1:-.9992551207542419},penetration:.2083907127380371,collision_point:{0:1.5745322704315186,1:.6562820672988892},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:-.03859081119298935,1:-.9992551207542419},penetration:.2083907127380371,collision_point:{0:1.5745322704315186,1:.6562820672988892},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:-.03859081119298935,1:-.9992551207542419},penetration:.2083907127380371,collision_point:{0:1.5745322704315186,1:.6562820672988892},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:-.03859081119298935,1:-.9992551207542419},penetration:.2083907127380371,collision_point:{0:1.5745322704315186,1:.6562820672988892},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:-.03859081119298935,1:-.9992551207542419},penetration:.2083907127380371,collision_point:{0:1.5745322704315186,1:.6562820672988892},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0}],gravity:{0:0,1:-9.8100004196167}},env_params:{dt:.016666666666666666,slop:.01,baumgarte_coefficient_joints_v:2,baumgarte_coefficient_joints_p:.7,baumgarte_coefficient_fjoint_av:2,baumgarte_coefficient_rjoint_limit_av:5,baumgarte_coefficient_collision:.2,joint_stiffness:.6,clip_position:15,clip_velocity:100,clip_angular_velocity:50,base_motor_speed:6,base_motor_power:900,base_thruster_power:10,motor_decay_coefficient:.1,motor_joint_limit:.1,base_friction:.4,max_timesteps:256,pixels_per_unit:100,dense_reward_scale:.1,num_shape_roles:4},static_env_params:{num_polygons:12,num_circles:4,num_joints:6,num_thrusters:2,max_polygon_vertices:4,num_solver_iterations:10,solver_batch_size:16,do_warm_starting:!0,num_static_fixated_polys:4,screen_dim:{0:500,1:500},downscale:4,frame_skip:2,max_shape_size:2,num_motor_bindings:4,num_thruster_bindings:2}},{env_state:{polygon:[{position:{0:2.5,1:-4.800000190734863},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:2.5,1:5.199999809265137},1:{0:2.5,1:-5.199999809265137},2:{0:-2.5,1:-5.199999809265137},3:{0:-2.5,1:5.199999809265137}},radius:0,role:3,density:1,highlighted:!1},{position:{0:0,1:0},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:-5,1:5},1:{0:-.05000000074505806,1:5},2:{0:-.05000000074505806,1:0},3:{0:-5,1:0}},radius:0,role:0,density:1,highlighted:!1},{position:{0:0,1:0},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:5,1:5},1:{0:10,1:5},2:{0:10,1:0},3:{0:5,1:0}},radius:0,role:0,density:1,highlighted:!1},{position:{0:2.5,1:10.199999809265137},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:2.5,1:5.199999809265137},1:{0:2.5,1:-5.199999809265137},2:{0:-2.5,1:-5.199999809265137},3:{0:-2.5,1:5.199999809265137}},radius:0,role:0,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.727750301361084},rotation:0,velocity:{0:0,1:-.6540000438690186},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.727750301361084},rotation:0,velocity:{0:0,1:-.6540000438690186},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.727750301361084},rotation:0,velocity:{0:0,1:-.6540000438690186},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.727750301361084},rotation:0,velocity:{0:0,1:-.6540000438690186},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.727750301361084},rotation:0,velocity:{0:0,1:-.6540000438690186},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.727750301361084},rotation:0,velocity:{0:0,1:-.6540000438690186},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.727750301361084},rotation:0,velocity:{0:0,1:-.6540000438690186},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.727750301361084},rotation:0,velocity:{0:0,1:-.6540000438690186},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1}],circle:[{position:{0:1.5894463062286377,1:1.0277705192565918},rotation:2.066920518875122,velocity:{0:-.007611490786075592,1:-.6537395715713501},angular_velocity:.1328061819076538,inverse_mass:2.0268056392669678,inverse_inertia:51.62192153930664,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.39629536867141724,role:1,density:1,highlighted:!1},{position:{0:1.5779249668121338,1:.6676415205001831},rotation:4.963005542755127,velocity:{0:.040214814245700836,1:-.6553760766983032},angular_velocity:-5.65826416015625,inverse_mass:10.70849323272705,inverse_inertia:1441.0089111328125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.17240937054157257,role:0,density:1,highlighted:!1},{position:{0:1.5779249668121338,1:.6676415205001831},rotation:4.963005542755127,velocity:{0:.040214814245700836,1:-.6553760766983032},angular_velocity:-5.65826416015625,inverse_mass:10.70849323272705,inverse_inertia:1441.0089111328125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.17240937054157257,role:0,density:1,highlighted:!1},{position:{0:1.5779249668121338,1:.6676415205001831},rotation:4.963005542755127,velocity:{0:.040214814245700836,1:-.6553760766983032},angular_velocity:-5.65826416015625,inverse_mass:10.70849323272705,inverse_inertia:1441.0089111328125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.17240937054157257,role:0,density:1,highlighted:!1}],joint:[{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5772547721862793,1:.6785644292831421},active:!0,acc_impulse:{0:.0004162613768130541,1:-24391552869929e-18},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5772547721862793,1:.6785644292831421},active:!0,acc_impulse:{0:.0004162613768130541,1:-24391552869929e-18},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5772547721862793,1:.6785644292831421},active:!0,acc_impulse:{0:.0004162613768130541,1:-24391552869929e-18},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5772547721862793,1:.6785644292831421},active:!0,acc_impulse:{0:.0004162613768130541,1:-24391552869929e-18},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5772547721862793,1:.6785644292831421},active:!0,acc_impulse:{0:.0004162613768130541,1:-24391552869929e-18},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5772547721862793,1:.6785644292831421},active:!0,acc_impulse:{0:.0004162613768130541,1:-24391552869929e-18},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1}],thruster:[{object_index:6,relative_position:{0:0,1:0},rotation:.0793752670288086,power:.4192001223564148,global_position:{0:1.5779249668121338,1:.6676415205001831},active:!1,thruster_binding:3},{object_index:6,relative_position:{0:0,1:0},rotation:.0793752670288086,power:.4192001223564148,global_position:{0:1.5779249668121338,1:.6676415205001831},active:!1,thruster_binding:3}],collision_matrix:{0:{0:!1,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0},1:{0:!0,1:!1,2:!0,3:!0,4:!0,5:!0,6:!0},2:{0:!0,1:!0,2:!1,3:!0,4:!0,5:!0,6:!0},3:{0:!0,1:!0,2:!0,3:!1,4:!0,5:!0,6:!0},4:{0:!0,1:!0,2:!0,3:!0,4:!1,5:!0,6:!0},5:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!1,6:!1},6:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!1,6:!1}},acc_rr_manifolds:[{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0}],acc_cr_manifolds:[{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0}],acc_cc_manifolds:[{normal:{0:-.034188270568847656,1:-.9994154572486877},penetration:.20839133858680725,collision_point:{0:1.5760245323181152,1:.6426025629043579},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:-.034188270568847656,1:-.9994154572486877},penetration:.20839133858680725,collision_point:{0:1.5760245323181152,1:.6426025629043579},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:-.034188270568847656,1:-.9994154572486877},penetration:.20839133858680725,collision_point:{0:1.5760245323181152,1:.6426025629043579},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:-.034188270568847656,1:-.9994154572486877},penetration:.20839133858680725,collision_point:{0:1.5760245323181152,1:.6426025629043579},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:-.034188270568847656,1:-.9994154572486877},penetration:.20839133858680725,collision_point:{0:1.5760245323181152,1:.6426025629043579},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:-.034188270568847656,1:-.9994154572486877},penetration:.20839133858680725,collision_point:{0:1.5760245323181152,1:.6426025629043579},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0}],gravity:{0:0,1:-9.8100004196167}},env_params:{dt:.016666666666666666,slop:.01,baumgarte_coefficient_joints_v:2,baumgarte_coefficient_joints_p:.7,baumgarte_coefficient_fjoint_av:2,baumgarte_coefficient_rjoint_limit_av:5,baumgarte_coefficient_collision:.2,joint_stiffness:.6,clip_position:15,clip_velocity:100,clip_angular_velocity:50,base_motor_speed:6,base_motor_power:900,base_thruster_power:10,motor_decay_coefficient:.1,motor_joint_limit:.1,base_friction:.4,max_timesteps:256,pixels_per_unit:100,dense_reward_scale:.1,num_shape_roles:4},static_env_params:{num_polygons:12,num_circles:4,num_joints:6,num_thrusters:2,max_polygon_vertices:4,num_solver_iterations:10,solver_batch_size:16,do_warm_starting:!0,num_static_fixated_polys:4,screen_dim:{0:500,1:500},downscale:4,frame_skip:2,max_shape_size:2,num_motor_bindings:4,num_thruster_bindings:2}},{env_state:{polygon:[{position:{0:2.5,1:-4.800000190734863},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:2.5,1:5.199999809265137},1:{0:2.5,1:-5.199999809265137},2:{0:-2.5,1:-5.199999809265137},3:{0:-2.5,1:5.199999809265137}},radius:0,role:3,density:1,highlighted:!1},{position:{0:0,1:0},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:-5,1:5},1:{0:-.05000000074505806,1:5},2:{0:-.05000000074505806,1:0},3:{0:-5,1:0}},radius:0,role:0,density:1,highlighted:!1},{position:{0:0,1:0},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:5,1:5},1:{0:10,1:5},2:{0:10,1:0},3:{0:5,1:0}},radius:0,role:0,density:1,highlighted:!1},{position:{0:2.5,1:10.199999809265137},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:2.5,1:5.199999809265137},1:{0:2.5,1:-5.199999809265137},2:{0:-2.5,1:-5.199999809265137},3:{0:-2.5,1:5.199999809265137}},radius:0,role:0,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.697775363922119},rotation:0,velocity:{0:0,1:-.9810000658035278},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.697775363922119},rotation:0,velocity:{0:0,1:-.9810000658035278},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.697775363922119},rotation:0,velocity:{0:0,1:-.9810000658035278},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.697775363922119},rotation:0,velocity:{0:0,1:-.9810000658035278},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.697775363922119},rotation:0,velocity:{0:0,1:-.9810000658035278},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.697775363922119},rotation:0,velocity:{0:0,1:-.9810000658035278},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.697775363922119},rotation:0,velocity:{0:0,1:-.9810000658035278},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.697775363922119},rotation:0,velocity:{0:0,1:-.9810000658035278},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1}],circle:[{position:{0:1.5891822576522827,1:.9978033900260925},rotation:2.0715270042419434,velocity:{0:-.007823171094059944,1:-.9807680249214172},angular_velocity:.1364864557981491,inverse_mass:2.0268056392669678,inverse_inertia:51.62192153930664,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.39629536867141724,role:1,density:1,highlighted:!1},{position:{0:1.5793200731277466,1:.6376251578330994},rotation:4.766743183135986,velocity:{0:.04133320972323418,1:-.9822252988815308},angular_velocity:-5.814974308013916,inverse_mass:10.70849323272705,inverse_inertia:1441.0089111328125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.17240937054157257,role:0,density:1,highlighted:!1},{position:{0:1.5793200731277466,1:.6376251578330994},rotation:4.766743183135986,velocity:{0:.04133320972323418,1:-.9822252988815308},angular_velocity:-5.814974308013916,inverse_mass:10.70849323272705,inverse_inertia:1441.0089111328125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.17240937054157257,role:0,density:1,highlighted:!1},{position:{0:1.5793200731277466,1:.6376251578330994},rotation:4.766743183135986,velocity:{0:.04133320972323418,1:-.9822252988815308},angular_velocity:-5.814974308013916,inverse_mass:10.70849323272705,inverse_inertia:1441.0089111328125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.17240937054157257,role:0,density:1,highlighted:!1}],joint:[{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5786312818527222,1:.6539956331253052},active:!0,acc_impulse:{0:9640513599151745e-20,1:-12076602615707088e-21},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5786312818527222,1:.6539956331253052},active:!0,acc_impulse:{0:9640513599151745e-20,1:-12076602615707088e-21},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5786312818527222,1:.6539956331253052},active:!0,acc_impulse:{0:9640513599151745e-20,1:-12076602615707088e-21},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5786312818527222,1:.6539956331253052},active:!0,acc_impulse:{0:9640513599151745e-20,1:-12076602615707088e-21},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5786312818527222,1:.6539956331253052},active:!0,acc_impulse:{0:9640513599151745e-20,1:-12076602615707088e-21},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5786312818527222,1:.6539956331253052},active:!0,acc_impulse:{0:9640513599151745e-20,1:-12076602615707088e-21},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1}],thruster:[{object_index:6,relative_position:{0:0,1:0},rotation:.0793752670288086,power:.4192001223564148,global_position:{0:1.5793200731277466,1:.6376251578330994},active:!1,thruster_binding:3},{object_index:6,relative_position:{0:0,1:0},rotation:.0793752670288086,power:.4192001223564148,global_position:{0:1.5793200731277466,1:.6376251578330994},active:!1,thruster_binding:3}],collision_matrix:{0:{0:!1,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0},1:{0:!0,1:!1,2:!0,3:!0,4:!0,5:!0,6:!0},2:{0:!0,1:!0,2:!1,3:!0,4:!0,5:!0,6:!0},3:{0:!0,1:!0,2:!0,3:!1,4:!0,5:!0,6:!0},4:{0:!0,1:!0,2:!0,3:!0,4:!1,5:!0,6:!0},5:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!1,6:!1},6:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!1,6:!1}},acc_rr_manifolds:[{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0}],acc_cr_manifolds:[{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0}],acc_cc_manifolds:[{normal:{0:-.029645398259162903,1:-.9995604753494263},penetration:.2083914875984192,collision_point:{0:1.5775643587112427,1:.6180285215377808},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:-.029645398259162903,1:-.9995604753494263},penetration:.2083914875984192,collision_point:{0:1.5775643587112427,1:.6180285215377808},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:-.029645398259162903,1:-.9995604753494263},penetration:.2083914875984192,collision_point:{0:1.5775643587112427,1:.6180285215377808},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:-.029645398259162903,1:-.9995604753494263},penetration:.2083914875984192,collision_point:{0:1.5775643587112427,1:.6180285215377808},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:-.029645398259162903,1:-.9995604753494263},penetration:.2083914875984192,collision_point:{0:1.5775643587112427,1:.6180285215377808},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:-.029645398259162903,1:-.9995604753494263},penetration:.2083914875984192,collision_point:{0:1.5775643587112427,1:.6180285215377808},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0}],gravity:{0:0,1:-9.8100004196167}},env_params:{dt:.016666666666666666,slop:.01,baumgarte_coefficient_joints_v:2,baumgarte_coefficient_joints_p:.7,baumgarte_coefficient_fjoint_av:2,baumgarte_coefficient_rjoint_limit_av:5,baumgarte_coefficient_collision:.2,joint_stiffness:.6,clip_position:15,clip_velocity:100,clip_angular_velocity:50,base_motor_speed:6,base_motor_power:900,base_thruster_power:10,motor_decay_coefficient:.1,motor_joint_limit:.1,base_friction:.4,max_timesteps:256,pixels_per_unit:100,dense_reward_scale:.1,num_shape_roles:4},static_env_params:{num_polygons:12,num_circles:4,num_joints:6,num_thrusters:2,max_polygon_vertices:4,num_solver_iterations:10,solver_batch_size:16,do_warm_starting:!0,num_static_fixated_polys:4,screen_dim:{0:500,1:500},downscale:4,frame_skip:2,max_shape_size:2,num_motor_bindings:4,num_thruster_bindings:2}},{env_state:{polygon:[{position:{0:2.5,1:-4.800000190734863},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:2.5,1:5.199999809265137},1:{0:2.5,1:-5.199999809265137},2:{0:-2.5,1:-5.199999809265137},3:{0:-2.5,1:5.199999809265137}},radius:0,role:3,density:1,highlighted:!1},{position:{0:0,1:0},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:-5,1:5},1:{0:-.05000000074505806,1:5},2:{0:-.05000000074505806,1:0},3:{0:-5,1:0}},radius:0,role:0,density:1,highlighted:!1},{position:{0:0,1:0},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:5,1:5},1:{0:10,1:5},2:{0:10,1:0},3:{0:5,1:0}},radius:0,role:0,density:1,highlighted:!1},{position:{0:2.5,1:10.199999809265137},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:2.5,1:5.199999809265137},1:{0:2.5,1:-5.199999809265137},2:{0:-2.5,1:-5.199999809265137},3:{0:-2.5,1:5.199999809265137}},radius:0,role:0,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.656900405883789},rotation:0,velocity:{0:0,1:-1.308000087738037},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.656900405883789},rotation:0,velocity:{0:0,1:-1.308000087738037},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.656900405883789},rotation:0,velocity:{0:0,1:-1.308000087738037},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.656900405883789},rotation:0,velocity:{0:0,1:-1.308000087738037},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.656900405883789},rotation:0,velocity:{0:0,1:-1.308000087738037},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.656900405883789},rotation:0,velocity:{0:0,1:-1.308000087738037},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.656900405883789},rotation:0,velocity:{0:0,1:-1.308000087738037},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.656900405883789},rotation:0,velocity:{0:0,1:-1.308000087738037},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1}],circle:[{position:{0:1.5889214277267456,1:.9569349884986877},rotation:2.0760765075683594,velocity:{0:-.007824105210602283,1:-1.3078036308288574},angular_velocity:.13648642599582672,inverse_mass:2.0268056392669678,inverse_inertia:51.62192153930664,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.39629536867141724,role:1,density:1,highlighted:!1},{position:{0:1.580697774887085,1:.59671550989151},rotation:4.572910785675049,velocity:{0:.04133814945816994,1:-1.3090379238128662},angular_velocity:-5.814974308013916,inverse_mass:10.70849323272705,inverse_inertia:1441.0089111328125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.17240937054157257,role:0,density:1,highlighted:!1},{position:{0:1.580697774887085,1:.59671550989151},rotation:4.572910785675049,velocity:{0:.04133814945816994,1:-1.3090379238128662},angular_velocity:-5.814974308013916,inverse_mass:10.70849323272705,inverse_inertia:1441.0089111328125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.17240937054157257,role:0,density:1,highlighted:!1},{position:{0:1.580697774887085,1:.59671550989151},rotation:4.572910785675049,velocity:{0:.04133814945816994,1:-1.3090379238128662},angular_velocity:-5.814974308013916,inverse_mass:10.70849323272705,inverse_inertia:1441.0089111328125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.17240937054157257,role:0,density:1,highlighted:!1}],joint:[{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.580008864402771,1:.6185328364372253},active:!0,acc_impulse:{0:-2.3656392045268149e-7,1:-8748079380893614e-21},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.580008864402771,1:.6185328364372253},active:!0,acc_impulse:{0:-2.3656392045268149e-7,1:-8748079380893614e-21},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.580008864402771,1:.6185328364372253},active:!0,acc_impulse:{0:-2.3656392045268149e-7,1:-8748079380893614e-21},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.580008864402771,1:.6185328364372253},active:!0,acc_impulse:{0:-2.3656392045268149e-7,1:-8748079380893614e-21},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.580008864402771,1:.6185328364372253},active:!0,acc_impulse:{0:-2.3656392045268149e-7,1:-8748079380893614e-21},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.580008864402771,1:.6185328364372253},active:!0,acc_impulse:{0:-2.3656392045268149e-7,1:-8748079380893614e-21},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1}],thruster:[{object_index:6,relative_position:{0:0,1:0},rotation:.0793752670288086,power:.4192001223564148,global_position:{0:1.580697774887085,1:.59671550989151},active:!1,thruster_binding:3},{object_index:6,relative_position:{0:0,1:0},rotation:.0793752670288086,power:.4192001223564148,global_position:{0:1.580697774887085,1:.59671550989151},active:!1,thruster_binding:3}],collision_matrix:{0:{0:!1,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0},1:{0:!0,1:!1,2:!0,3:!0,4:!0,5:!0,6:!0},2:{0:!0,1:!0,2:!1,3:!0,4:!0,5:!0,6:!0},3:{0:!0,1:!0,2:!0,3:!1,4:!0,5:!0,6:!0},4:{0:!0,1:!0,2:!0,3:!0,4:!1,5:!0,6:!0},5:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!1,6:!1},6:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!1,6:!1}},acc_rr_manifolds:[{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0}],acc_cr_manifolds:[{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0}],acc_cc_manifolds:[{normal:{0:-.025097543373703957,1:-.9996850490570068},penetration:.20839142799377441,collision_point:{0:1.5791058540344238,1:.5825613141059875},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:-.025097543373703957,1:-.9996850490570068},penetration:.20839142799377441,collision_point:{0:1.5791058540344238,1:.5825613141059875},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:-.025097543373703957,1:-.9996850490570068},penetration:.20839142799377441,collision_point:{0:1.5791058540344238,1:.5825613141059875},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:-.025097543373703957,1:-.9996850490570068},penetration:.20839142799377441,collision_point:{0:1.5791058540344238,1:.5825613141059875},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:-.025097543373703957,1:-.9996850490570068},penetration:.20839142799377441,collision_point:{0:1.5791058540344238,1:.5825613141059875},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:-.025097543373703957,1:-.9996850490570068},penetration:.20839142799377441,collision_point:{0:1.5791058540344238,1:.5825613141059875},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0}],gravity:{0:0,1:-9.8100004196167}},env_params:{dt:.016666666666666666,slop:.01,baumgarte_coefficient_joints_v:2,baumgarte_coefficient_joints_p:.7,baumgarte_coefficient_fjoint_av:2,baumgarte_coefficient_rjoint_limit_av:5,baumgarte_coefficient_collision:.2,joint_stiffness:.6,clip_position:15,clip_velocity:100,clip_angular_velocity:50,base_motor_speed:6,base_motor_power:900,base_thruster_power:10,motor_decay_coefficient:.1,motor_joint_limit:.1,base_friction:.4,max_timesteps:256,pixels_per_unit:100,dense_reward_scale:.1,num_shape_roles:4},static_env_params:{num_polygons:12,num_circles:4,num_joints:6,num_thrusters:2,max_polygon_vertices:4,num_solver_iterations:10,solver_batch_size:16,do_warm_starting:!0,num_static_fixated_polys:4,screen_dim:{0:500,1:500},downscale:4,frame_skip:2,max_shape_size:2,num_motor_bindings:4,num_thruster_bindings:2}},{env_state:{polygon:[{position:{0:2.5,1:-4.800000190734863},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:2.5,1:5.199999809265137},1:{0:2.5,1:-5.199999809265137},2:{0:-2.5,1:-5.199999809265137},3:{0:-2.5,1:5.199999809265137}},radius:0,role:3,density:1,highlighted:!1},{position:{0:0,1:0},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:-5,1:5},1:{0:-.05000000074505806,1:5},2:{0:-.05000000074505806,1:0},3:{0:-5,1:0}},radius:0,role:0,density:1,highlighted:!1},{position:{0:0,1:0},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:5,1:5},1:{0:10,1:5},2:{0:10,1:0},3:{0:5,1:0}},radius:0,role:0,density:1,highlighted:!1},{position:{0:2.5,1:10.199999809265137},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:2.5,1:5.199999809265137},1:{0:2.5,1:-5.199999809265137},2:{0:-2.5,1:-5.199999809265137},3:{0:-2.5,1:5.199999809265137}},radius:0,role:0,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.605125427246094},rotation:0,velocity:{0:0,1:-1.635000228881836},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.605125427246094},rotation:0,velocity:{0:0,1:-1.635000228881836},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.605125427246094},rotation:0,velocity:{0:0,1:-1.635000228881836},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.605125427246094},rotation:0,velocity:{0:0,1:-1.635000228881836},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.605125427246094},rotation:0,velocity:{0:0,1:-1.635000228881836},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.605125427246094},rotation:0,velocity:{0:0,1:-1.635000228881836},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.605125427246094},rotation:0,velocity:{0:0,1:-1.635000228881836},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.605125427246094},rotation:0,velocity:{0:0,1:-1.635000228881836},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1}],circle:[{position:{0:1.5891540050506592,1:.9213826656341553},rotation:2.082094669342041,velocity:{0:.02177801914513111,1:-.6617977619171143},angular_velocity:.2245994210243225,inverse_mass:2.0268056392669678,inverse_inertia:51.62192153930664,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.39629536867141724,role:1,density:1,highlighted:!1},{position:{0:1.5831981897354126,1:.5721763968467712},rotation:4.465475082397461,velocity:{0:.1086733415722847,1:-1.4901161193847656e-7},angular_velocity:-.6311730146408081,inverse_mass:10.70849323272705,inverse_inertia:1441.0089111328125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.17240937054157257,role:0,density:1,highlighted:!1},{position:{0:1.5831981897354126,1:.5721763968467712},rotation:4.465475082397461,velocity:{0:.1086733415722847,1:-1.4901161193847656e-7},angular_velocity:-.6311730146408081,inverse_mass:10.70849323272705,inverse_inertia:1441.0089111328125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.17240937054157257,role:0,density:1,highlighted:!1},{position:{0:1.5831981897354126,1:.5721763968467712},rotation:4.465475082397461,velocity:{0:.1086733415722847,1:-1.4901161193847656e-7},angular_velocity:-.6311730146408081,inverse_mass:10.70849323272705,inverse_inertia:1441.0089111328125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.17240937054157257,role:0,density:1,highlighted:!1}],joint:[{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.581386923789978,1:.5721763968467712},active:!0,acc_impulse:{0:.014605519361793995,1:.48007747530937195},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.581386923789978,1:.5721763968467712},active:!0,acc_impulse:{0:.014605519361793995,1:.48007747530937195},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.581386923789978,1:.5721763968467712},active:!0,acc_impulse:{0:.014605519361793995,1:.48007747530937195},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.581386923789978,1:.5721763968467712},active:!0,acc_impulse:{0:.014605519361793995,1:.48007747530937195},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.581386923789978,1:.5721763968467712},active:!0,acc_impulse:{0:.014605519361793995,1:.48007747530937195},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.581386923789978,1:.5721763968467712},active:!0,acc_impulse:{0:.014605519361793995,1:.48007747530937195},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1}],thruster:[{object_index:6,relative_position:{0:0,1:0},rotation:.0793752670288086,power:.4192001223564148,global_position:{0:1.5831981897354126,1:.5721763968467712},active:!1,thruster_binding:3},{object_index:6,relative_position:{0:0,1:0},rotation:.0793752670288086,power:.4192001223564148,global_position:{0:1.5831981897354126,1:.5721763968467712},active:!1,thruster_binding:3}],collision_matrix:{0:{0:!1,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0},1:{0:!0,1:!1,2:!0,3:!0,4:!0,5:!0,6:!0},2:{0:!0,1:!0,2:!1,3:!0,4:!0,5:!0,6:!0},3:{0:!0,1:!0,2:!0,3:!1,4:!0,5:!0,6:!0},4:{0:!0,1:!0,2:!0,3:!0,4:!1,5:!0,6:!0},5:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!1,6:!1},6:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!1,6:!1}},acc_rr_manifolds:[{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0}],acc_cr_manifolds:[{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:-0,1:-1},penetration:.00023348629474639893,collision_point:{0:1.581386923789978,1:.39999961853027344},active:!0,acc_impulse_normal:.6328481435775757,acc_impulse_tangent:.02089332789182663,restitution_velocity_target:-0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0}],acc_cc_manifolds:[{normal:{0:-.02054903283715248,1:-.9997888207435608},penetration:.2083914577960968,collision_point:{0:1.5806474685668945,1:.5362011194229126},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:-.02054903283715248,1:-.9997888207435608},penetration:.2083914577960968,collision_point:{0:1.5806474685668945,1:.5362011194229126},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:-.02054903283715248,1:-.9997888207435608},penetration:.2083914577960968,collision_point:{0:1.5806474685668945,1:.5362011194229126},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:-.02054903283715248,1:-.9997888207435608},penetration:.2083914577960968,collision_point:{0:1.5806474685668945,1:.5362011194229126},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:-.02054903283715248,1:-.9997888207435608},penetration:.2083914577960968,collision_point:{0:1.5806474685668945,1:.5362011194229126},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:-.02054903283715248,1:-.9997888207435608},penetration:.2083914577960968,collision_point:{0:1.5806474685668945,1:.5362011194229126},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0}],gravity:{0:0,1:-9.8100004196167}},env_params:{dt:.016666666666666666,slop:.01,baumgarte_coefficient_joints_v:2,baumgarte_coefficient_joints_p:.7,baumgarte_coefficient_fjoint_av:2,baumgarte_coefficient_rjoint_limit_av:5,baumgarte_coefficient_collision:.2,joint_stiffness:.6,clip_position:15,clip_velocity:100,clip_angular_velocity:50,base_motor_speed:6,base_motor_power:900,base_thruster_power:10,motor_decay_coefficient:.1,motor_joint_limit:.1,base_friction:.4,max_timesteps:256,pixels_per_unit:100,dense_reward_scale:.1,num_shape_roles:4},static_env_params:{num_polygons:12,num_circles:4,num_joints:6,num_thrusters:2,max_polygon_vertices:4,num_solver_iterations:10,solver_batch_size:16,do_warm_starting:!0,num_static_fixated_polys:4,screen_dim:{0:500,1:500},downscale:4,frame_skip:2,max_shape_size:2,num_motor_bindings:4,num_thruster_bindings:2}},{env_state:{polygon:[{position:{0:2.5,1:-4.800000190734863},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:2.5,1:5.199999809265137},1:{0:2.5,1:-5.199999809265137},2:{0:-2.5,1:-5.199999809265137},3:{0:-2.5,1:5.199999809265137}},radius:0,role:3,density:1,highlighted:!1},{position:{0:0,1:0},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:-5,1:5},1:{0:-.05000000074505806,1:5},2:{0:-.05000000074505806,1:0},3:{0:-5,1:0}},radius:0,role:0,density:1,highlighted:!1},{position:{0:0,1:0},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:5,1:5},1:{0:10,1:5},2:{0:10,1:0},3:{0:5,1:0}},radius:0,role:0,density:1,highlighted:!1},{position:{0:2.5,1:10.199999809265137},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:2.5,1:5.199999809265137},1:{0:2.5,1:-5.199999809265137},2:{0:-2.5,1:-5.199999809265137},3:{0:-2.5,1:5.199999809265137}},radius:0,role:0,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.542450428009033},rotation:0,velocity:{0:0,1:-1.9620003700256348},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.542450428009033},rotation:0,velocity:{0:0,1:-1.9620003700256348},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.542450428009033},rotation:0,velocity:{0:0,1:-1.9620003700256348},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.542450428009033},rotation:0,velocity:{0:0,1:-1.9620003700256348},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.542450428009033},rotation:0,velocity:{0:0,1:-1.9620003700256348},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.542450428009033},rotation:0,velocity:{0:0,1:-1.9620003700256348},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.542450428009033},rotation:0,velocity:{0:0,1:-1.9620003700256348},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.542450428009033},rotation:0,velocity:{0:0,1:-1.9620003700256348},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1}],circle:[{position:{0:1.5891051292419434,1:.9301719665527344},rotation:2.062041759490967,velocity:{0:-.008829031139612198,1:.32385629415512085},angular_velocity:-.820448100566864,inverse_mass:2.0268056392669678,inverse_inertia:51.62192153930664,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.39629536867141724,role:1,density:1,highlighted:!1},{position:{0:1.575769066810608,1:.564559280872345},rotation:4.510324954986572,velocity:{0:-.30778273940086365,1:2327561378479004e-20},angular_velocity:1.8703458309173584,inverse_mass:10.70849323272705,inverse_inertia:1441.0089111328125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.17240937054157257,role:0,density:1,highlighted:!1},{position:{0:1.575769066810608,1:.564559280872345},rotation:4.510324954986572,velocity:{0:-.30778273940086365,1:2327561378479004e-20},angular_velocity:1.8703458309173584,inverse_mass:10.70849323272705,inverse_inertia:1441.0089111328125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.17240937054157257,role:0,density:1,highlighted:!1},{position:{0:1.575769066810608,1:.564559280872345},rotation:4.510324954986572,velocity:{0:-.30778273940086365,1:2327561378479004e-20},angular_velocity:1.8703458309173584,inverse_mass:10.70849323272705,inverse_inertia:1441.0089111328125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.17240937054157257,role:0,density:1,highlighted:!1}],joint:[{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5808987617492676,1:.5645588636398315},active:!0,acc_impulse:{0:-.006860243156552315,1:.1827249675989151},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5808987617492676,1:.5645588636398315},active:!0,acc_impulse:{0:-.006860243156552315,1:.1827249675989151},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5808987617492676,1:.5645588636398315},active:!0,acc_impulse:{0:-.006860243156552315,1:.1827249675989151},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5808987617492676,1:.5645588636398315},active:!0,acc_impulse:{0:-.006860243156552315,1:.1827249675989151},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5808987617492676,1:.5645588636398315},active:!0,acc_impulse:{0:-.006860243156552315,1:.1827249675989151},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5808987617492676,1:.5645588636398315},active:!0,acc_impulse:{0:-.006860243156552315,1:.1827249675989151},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1}],thruster:[{object_index:6,relative_position:{0:0,1:0},rotation:.0793752670288086,power:.4192001223564148,global_position:{0:1.575769066810608,1:.564559280872345},active:!1,thruster_binding:3},{object_index:6,relative_position:{0:0,1:0},rotation:.0793752670288086,power:.4192001223564148,global_position:{0:1.575769066810608,1:.564559280872345},active:!1,thruster_binding:3}],collision_matrix:{0:{0:!1,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0},1:{0:!0,1:!1,2:!0,3:!0,4:!0,5:!0,6:!0},2:{0:!0,1:!0,2:!1,3:!0,4:!0,5:!0,6:!0},3:{0:!0,1:!0,2:!0,3:!1,4:!0,5:!0,6:!0},4:{0:!0,1:!0,2:!0,3:!0,4:!1,5:!0,6:!0},5:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!1,6:!1},6:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!1,6:!1}},acc_rr_manifolds:[{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0}],acc_cr_manifolds:[{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:-0,1:-.9999999403953552},penetration:.00952942669391632,collision_point:{0:1.5808864831924438,1:.39999961853027344},active:!0,acc_impulse_normal:.19800183176994324,acc_impulse_tangent:-.023119818419218063,restitution_velocity_target:-0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0}],acc_cc_manifolds:[{normal:{0:-.02309633605182171,1:-.9997333884239197},penetration:.20639550685882568,collision_point:{0:1.580101490020752,1:.528902530670166},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:-.02309633605182171,1:-.9997333884239197},penetration:.20639550685882568,collision_point:{0:1.580101490020752,1:.528902530670166},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:-.02309633605182171,1:-.9997333884239197},penetration:.20639550685882568,collision_point:{0:1.580101490020752,1:.528902530670166},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:-.02309633605182171,1:-.9997333884239197},penetration:.20639550685882568,collision_point:{0:1.580101490020752,1:.528902530670166},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:-.02309633605182171,1:-.9997333884239197},penetration:.20639550685882568,collision_point:{0:1.580101490020752,1:.528902530670166},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:-.02309633605182171,1:-.9997333884239197},penetration:.20639550685882568,collision_point:{0:1.580101490020752,1:.528902530670166},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0}],gravity:{0:0,1:-9.8100004196167}},env_params:{dt:.016666666666666666,slop:.01,baumgarte_coefficient_joints_v:2,baumgarte_coefficient_joints_p:.7,baumgarte_coefficient_fjoint_av:2,baumgarte_coefficient_rjoint_limit_av:5,baumgarte_coefficient_collision:.2,joint_stiffness:.6,clip_position:15,clip_velocity:100,clip_angular_velocity:50,base_motor_speed:6,base_motor_power:900,base_thruster_power:10,motor_decay_coefficient:.1,motor_joint_limit:.1,base_friction:.4,max_timesteps:256,pixels_per_unit:100,dense_reward_scale:.1,num_shape_roles:4},static_env_params:{num_polygons:12,num_circles:4,num_joints:6,num_thrusters:2,max_polygon_vertices:4,num_solver_iterations:10,solver_batch_size:16,do_warm_starting:!0,num_static_fixated_polys:4,screen_dim:{0:500,1:500},downscale:4,frame_skip:2,max_shape_size:2,num_motor_bindings:4,num_thruster_bindings:2}},{env_state:{polygon:[{position:{0:2.5,1:-4.800000190734863},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:2.5,1:5.199999809265137},1:{0:2.5,1:-5.199999809265137},2:{0:-2.5,1:-5.199999809265137},3:{0:-2.5,1:5.199999809265137}},radius:0,role:3,density:1,highlighted:!1},{position:{0:0,1:0},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:-5,1:5},1:{0:-.05000000074505806,1:5},2:{0:-.05000000074505806,1:0},3:{0:-5,1:0}},radius:0,role:0,density:1,highlighted:!1},{position:{0:0,1:0},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:5,1:5},1:{0:10,1:5},2:{0:10,1:0},3:{0:5,1:0}},radius:0,role:0,density:1,highlighted:!1},{position:{0:2.5,1:10.199999809265137},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:2.5,1:5.199999809265137},1:{0:2.5,1:-5.199999809265137},2:{0:-2.5,1:-5.199999809265137},3:{0:-2.5,1:5.199999809265137}},radius:0,role:0,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.468875408172607},rotation:0,velocity:{0:0,1:-2.2890005111694336},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.468875408172607},rotation:0,velocity:{0:0,1:-2.2890005111694336},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.468875408172607},rotation:0,velocity:{0:0,1:-2.2890005111694336},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.468875408172607},rotation:0,velocity:{0:0,1:-2.2890005111694336},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.468875408172607},rotation:0,velocity:{0:0,1:-2.2890005111694336},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.468875408172607},rotation:0,velocity:{0:0,1:-2.2890005111694336},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.468875408172607},rotation:0,velocity:{0:0,1:-2.2890005111694336},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.468875408172607},rotation:0,velocity:{0:0,1:-2.2890005111694336},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1}],circle:[{position:{0:1.5890321731567383,1:.9324700236320496},rotation:2.0527303218841553,velocity:{0:.0008311441633850336,1:.024214711040258408},angular_velocity:-.2334468811750412,inverse_mass:2.0268056392669678,inverse_inertia:51.62192153930664,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.39629536867141724,role:1,density:1,highlighted:!1},{position:{0:1.5721958875656128,1:.5719735622406006},rotation:4.348003387451172,velocity:{0:-.09556760638952255,1:-.0061516109853982925},angular_velocity:-6.253768444061279,inverse_mass:10.70849323272705,inverse_inertia:1441.0089111328125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.17240937054157257,role:0,density:1,highlighted:!1},{position:{0:1.5721958875656128,1:.5719735622406006},rotation:4.348003387451172,velocity:{0:-.09556760638952255,1:-.0061516109853982925},angular_velocity:-6.253768444061279,inverse_mass:10.70849323272705,inverse_inertia:1441.0089111328125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.17240937054157257,role:0,density:1,highlighted:!1},{position:{0:1.5721958875656128,1:.5719735622406006},rotation:4.348003387451172,velocity:{0:-.09556760638952255,1:-.0061516109853982925},angular_velocity:-6.253768444061279,inverse_mass:10.70849323272705,inverse_inertia:1441.0089111328125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.17240937054157257,role:0,density:1,highlighted:!1}],joint:[{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5737886428833008,1:.572076141834259},active:!0,acc_impulse:{0:-.003017377108335495,1:-.005589112639427185},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5737886428833008,1:.572076141834259},active:!0,acc_impulse:{0:-.003017377108335495,1:-.005589112639427185},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5737886428833008,1:.572076141834259},active:!0,acc_impulse:{0:-.003017377108335495,1:-.005589112639427185},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5737886428833008,1:.572076141834259},active:!0,acc_impulse:{0:-.003017377108335495,1:-.005589112639427185},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5737886428833008,1:.572076141834259},active:!0,acc_impulse:{0:-.003017377108335495,1:-.005589112639427185},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5737886428833008,1:.572076141834259},active:!0,acc_impulse:{0:-.003017377108335495,1:-.005589112639427185},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1}],thruster:[{object_index:6,relative_position:{0:0,1:0},rotation:.0793752670288086,power:.4192001223564148,global_position:{0:1.5721958875656128,1:.5719735622406006},active:!1,thruster_binding:3},{object_index:6,relative_position:{0:0,1:0},rotation:.0793752670288086,power:.4192001223564148,global_position:{0:1.5721958875656128,1:.5719735622406006},active:!1,thruster_binding:3}],collision_matrix:{0:{0:!1,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0},1:{0:!0,1:!1,2:!0,3:!0,4:!0,5:!0,6:!0},2:{0:!0,1:!0,2:!1,3:!0,4:!0,5:!0,6:!0},3:{0:!0,1:!0,2:!0,3:!1,4:!0,5:!0,6:!0},4:{0:!0,1:!0,2:!0,3:!0,4:!1,5:!0,6:!0},5:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!1,6:!1},6:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!1,6:!1}},acc_rr_manifolds:[{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0}],acc_cr_manifolds:[{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:-0,1:-1},penetration:.0031889230012893677,collision_point:{0:1.5727664232254028,1:.39999961853027344},active:!0,acc_impulse_normal:.009114242158830166,acc_impulse_tangent:.005155794322490692,restitution_velocity_target:-0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0}],acc_cc_manifolds:[{normal:{0:-.04520964249968529,1:-.9989774823188782},penetration:.2049461007118225,collision_point:{0:1.5712954998016357,1:.5367166996002197},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:-.04520964249968529,1:-.9989774823188782},penetration:.2049461007118225,collision_point:{0:1.5712954998016357,1:.5367166996002197},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:-.04520964249968529,1:-.9989774823188782},penetration:.2049461007118225,collision_point:{0:1.5712954998016357,1:.5367166996002197},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:-.04520964249968529,1:-.9989774823188782},penetration:.2049461007118225,collision_point:{0:1.5712954998016357,1:.5367166996002197},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:-.04520964249968529,1:-.9989774823188782},penetration:.2049461007118225,collision_point:{0:1.5712954998016357,1:.5367166996002197},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:-.04520964249968529,1:-.9989774823188782},penetration:.2049461007118225,collision_point:{0:1.5712954998016357,1:.5367166996002197},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0}],gravity:{0:0,1:-9.8100004196167}},env_params:{dt:.016666666666666666,slop:.01,baumgarte_coefficient_joints_v:2,baumgarte_coefficient_joints_p:.7,baumgarte_coefficient_fjoint_av:2,baumgarte_coefficient_rjoint_limit_av:5,baumgarte_coefficient_collision:.2,joint_stiffness:.6,clip_position:15,clip_velocity:100,clip_angular_velocity:50,base_motor_speed:6,base_motor_power:900,base_thruster_power:10,motor_decay_coefficient:.1,motor_joint_limit:.1,base_friction:.4,max_timesteps:256,pixels_per_unit:100,dense_reward_scale:.1,num_shape_roles:4},static_env_params:{num_polygons:12,num_circles:4,num_joints:6,num_thrusters:2,max_polygon_vertices:4,num_solver_iterations:10,solver_batch_size:16,do_warm_starting:!0,num_static_fixated_polys:4,screen_dim:{0:500,1:500},downscale:4,frame_skip:2,max_shape_size:2,num_motor_bindings:4,num_thruster_bindings:2}},{env_state:{polygon:[{position:{0:2.5,1:-4.800000190734863},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:2.5,1:5.199999809265137},1:{0:2.5,1:-5.199999809265137},2:{0:-2.5,1:-5.199999809265137},3:{0:-2.5,1:5.199999809265137}},radius:0,role:3,density:1,highlighted:!1},{position:{0:0,1:0},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:-5,1:5},1:{0:-.05000000074505806,1:5},2:{0:-.05000000074505806,1:0},3:{0:-5,1:0}},radius:0,role:0,density:1,highlighted:!1},{position:{0:0,1:0},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:5,1:5},1:{0:10,1:5},2:{0:10,1:0},3:{0:5,1:0}},radius:0,role:0,density:1,highlighted:!1},{position:{0:2.5,1:10.199999809265137},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:2.5,1:5.199999809265137},1:{0:2.5,1:-5.199999809265137},2:{0:-2.5,1:-5.199999809265137},3:{0:-2.5,1:5.199999809265137}},radius:0,role:0,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.384400367736816},rotation:0,velocity:{0:0,1:-2.6160006523132324},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.384400367736816},rotation:0,velocity:{0:0,1:-2.6160006523132324},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.384400367736816},rotation:0,velocity:{0:0,1:-2.6160006523132324},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.384400367736816},rotation:0,velocity:{0:0,1:-2.6160006523132324},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.384400367736816},rotation:0,velocity:{0:0,1:-2.6160006523132324},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.384400367736816},rotation:0,velocity:{0:0,1:-2.6160006523132324},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.384400367736816},rotation:0,velocity:{0:0,1:-2.6160006523132324},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.384400367736816},rotation:0,velocity:{0:0,1:-2.6160006523132324},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1}],circle:[{position:{0:1.5897750854492188,1:.9279946088790894},rotation:2.055111885070801,velocity:{0:.0181619543582201,1:-.21305470168590546},angular_velocity:.16062545776367188,inverse_mass:2.0268056392669678,inverse_inertia:51.62192153930664,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.39629536867141724,role:1,density:1,highlighted:!1},{position:{0:1.5740020275115967,1:.5680252909660339},rotation:4.215926170349121,velocity:{0:.07597237080335617,1:-.2158057987689972},angular_velocity:-7.790582180023193,inverse_mass:10.70849323272705,inverse_inertia:1441.0089111328125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.17240937054157257,role:0,density:1,highlighted:!1},{position:{0:1.5740020275115967,1:.5680252909660339},rotation:4.215926170349121,velocity:{0:.07597237080335617,1:-.2158057987689972},angular_velocity:-7.790582180023193,inverse_mass:10.70849323272705,inverse_inertia:1441.0089111328125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.17240937054157257,role:0,density:1,highlighted:!1},{position:{0:1.5740020275115967,1:.5680252909660339},rotation:4.215926170349121,velocity:{0:.07597237080335617,1:-.2158057987689972},angular_velocity:-7.790582180023193,inverse_mass:10.70849323272705,inverse_inertia:1441.0089111328125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.17240937054157257,role:0,density:1,highlighted:!1}],joint:[{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5727359056472778,1:.5716220736503601},active:!0,acc_impulse:{0:-.004935800563544035,1:.004882266279309988},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5727359056472778,1:.5716220736503601},active:!0,acc_impulse:{0:-.004935800563544035,1:.004882266279309988},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5727359056472778,1:.5716220736503601},active:!0,acc_impulse:{0:-.004935800563544035,1:.004882266279309988},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5727359056472778,1:.5716220736503601},active:!0,acc_impulse:{0:-.004935800563544035,1:.004882266279309988},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5727359056472778,1:.5716220736503601},active:!0,acc_impulse:{0:-.004935800563544035,1:.004882266279309988},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5727359056472778,1:.5716220736503601},active:!0,acc_impulse:{0:-.004935800563544035,1:.004882266279309988},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1}],thruster:[{object_index:6,relative_position:{0:0,1:0},rotation:.0793752670288086,power:.4192001223564148,global_position:{0:1.5740020275115967,1:.5680252909660339},active:!1,thruster_binding:3},{object_index:6,relative_position:{0:0,1:0},rotation:.0793752670288086,power:.4192001223564148,global_position:{0:1.5740020275115967,1:.5680252909660339},active:!1,thruster_binding:3}],collision_matrix:{0:{0:!1,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0},1:{0:!0,1:!1,2:!0,3:!0,4:!0,5:!0,6:!0},2:{0:!0,1:!0,2:!1,3:!0,4:!0,5:!0,6:!0},3:{0:!0,1:!0,2:!0,3:!1,4:!0,5:!0,6:!0},4:{0:!0,1:!0,2:!0,3:!0,4:!1,5:!0,6:!0},5:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!1,6:!1},6:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!1,6:!1}},acc_rr_manifolds:[{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0}],acc_cr_manifolds:[{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0}],acc_cc_manifolds:[{normal:{0:-.046516016125679016,1:-.9989176392555237},penetration:.20937788486480713,collision_point:{0:1.5710347890853882,1:.5355222225189209},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:-0},{normal:{0:-.046516016125679016,1:-.9989176392555237},penetration:.20937788486480713,collision_point:{0:1.5710347890853882,1:.5355222225189209},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:-0},{normal:{0:-.046516016125679016,1:-.9989176392555237},penetration:.20937788486480713,collision_point:{0:1.5710347890853882,1:.5355222225189209},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:-0},{normal:{0:-.046516016125679016,1:-.9989176392555237},penetration:.20937788486480713,collision_point:{0:1.5710347890853882,1:.5355222225189209},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:-0},{normal:{0:-.046516016125679016,1:-.9989176392555237},penetration:.20937788486480713,collision_point:{0:1.5710347890853882,1:.5355222225189209},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:-0},{normal:{0:-.046516016125679016,1:-.9989176392555237},penetration:.20937788486480713,collision_point:{0:1.5710347890853882,1:.5355222225189209},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:-0}],gravity:{0:0,1:-9.8100004196167}},env_params:{dt:.016666666666666666,slop:.01,baumgarte_coefficient_joints_v:2,baumgarte_coefficient_joints_p:.7,baumgarte_coefficient_fjoint_av:2,baumgarte_coefficient_rjoint_limit_av:5,baumgarte_coefficient_collision:.2,joint_stiffness:.6,clip_position:15,clip_velocity:100,clip_angular_velocity:50,base_motor_speed:6,base_motor_power:900,base_thruster_power:10,motor_decay_coefficient:.1,motor_joint_limit:.1,base_friction:.4,max_timesteps:256,pixels_per_unit:100,dense_reward_scale:.1,num_shape_roles:4},static_env_params:{num_polygons:12,num_circles:4,num_joints:6,num_thrusters:2,max_polygon_vertices:4,num_solver_iterations:10,solver_batch_size:16,do_warm_starting:!0,num_static_fixated_polys:4,screen_dim:{0:500,1:500},downscale:4,frame_skip:2,max_shape_size:2,num_motor_bindings:4,num_thruster_bindings:2}},{env_state:{polygon:[{position:{0:2.5,1:-4.800000190734863},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:2.5,1:5.199999809265137},1:{0:2.5,1:-5.199999809265137},2:{0:-2.5,1:-5.199999809265137},3:{0:-2.5,1:5.199999809265137}},radius:0,role:3,density:1,highlighted:!1},{position:{0:0,1:0},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:-5,1:5},1:{0:-.05000000074505806,1:5},2:{0:-.05000000074505806,1:0},3:{0:-5,1:0}},radius:0,role:0,density:1,highlighted:!1},{position:{0:0,1:0},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:5,1:5},1:{0:10,1:5},2:{0:10,1:0},3:{0:5,1:0}},radius:0,role:0,density:1,highlighted:!1},{position:{0:2.5,1:10.199999809265137},rotation:0,velocity:{0:0,1:0},angular_velocity:0,inverse_mass:0,inverse_inertia:0,friction:1,restitution:0,collision_mode:2,active:!0,n_vertices:4,vertices:{0:{0:2.5,1:5.199999809265137},1:{0:2.5,1:-5.199999809265137},2:{0:-2.5,1:-5.199999809265137},3:{0:-2.5,1:5.199999809265137}},radius:0,role:0,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.28902530670166},rotation:0,velocity:{0:0,1:-2.9430007934570312},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.28902530670166},rotation:0,velocity:{0:0,1:-2.9430007934570312},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.28902530670166},rotation:0,velocity:{0:0,1:-2.9430007934570312},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.28902530670166},rotation:0,velocity:{0:0,1:-2.9430007934570312},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.28902530670166},rotation:0,velocity:{0:0,1:-2.9430007934570312},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.28902530670166},rotation:0,velocity:{0:0,1:-2.9430007934570312},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.28902530670166},rotation:0,velocity:{0:0,1:-2.9430007934570312},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1},{position:{0:1.5899999141693115,1:4.28902530670166},rotation:0,velocity:{0:0,1:-2.9430007934570312},angular_velocity:0,inverse_mass:15.948962211608887,inverse_inertia:1319.9141845703125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.16499999165534973,1:.0950000137090683},1:{0:.16499999165534973,1:-.0950000137090683},2:{0:-.16499999165534973,1:-.0950000137090683},3:{0:-.16499999165534973,1:.0950000137090683}},radius:.20000000298023224,role:2,density:1,highlighted:!1}],circle:[{position:{0:1.591646671295166,1:.9255722165107727},rotation:2.0678577423095703,velocity:{0:.0671391412615776,1:-.01968550682067871},angular_velocity:.5519088506698608,inverse_mass:2.0268056392669678,inverse_inertia:51.62192153930664,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.39629536867141724,role:1,density:1,highlighted:!1},{position:{0:1.5804704427719116,1:.5658808350563049},rotation:4.176840782165527,velocity:{0:.26632848381996155,1:667329877614975e-19},angular_velocity:-1.60554838180542,inverse_mass:10.70849323272705,inverse_inertia:1441.0089111328125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.17240937054157257,role:0,density:1,highlighted:!1},{position:{0:1.5804704427719116,1:.5658808350563049},rotation:4.176840782165527,velocity:{0:.26632848381996155,1:667329877614975e-19},angular_velocity:-1.60554838180542,inverse_mass:10.70849323272705,inverse_inertia:1441.0089111328125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.17240937054157257,role:0,density:1,highlighted:!1},{position:{0:1.5804704427719116,1:.5658808350563049},rotation:4.176840782165527,velocity:{0:.26632848381996155,1:667329877614975e-19},angular_velocity:-1.60554838180542,inverse_mass:10.70849323272705,inverse_inertia:1441.0089111328125,friction:1,restitution:0,collision_mode:1,active:!0,n_vertices:4,vertices:{0:{0:.20000000298023224,1:.20000000298023224},1:{0:.20000000298023224,1:-.20000000298023224},2:{0:-.20000000298023224,1:-.20000000298023224},3:{0:-.20000000298023224,1:.20000000298023224}},radius:.17240937054157257,role:0,density:1,highlighted:!1}],joint:[{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5760316848754883,1:.565879762172699},active:!0,acc_impulse:{0:.011077954433858395,1:.14497947692871094},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5760316848754883,1:.565879762172699},active:!0,acc_impulse:{0:.011077954433858395,1:.14497947692871094},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5760316848754883,1:.565879762172699},active:!0,acc_impulse:{0:.011077954433858395,1:.14497947692871094},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5760316848754883,1:.565879762172699},active:!0,acc_impulse:{0:.011077954433858395,1:.14497947692871094},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5760316848754883,1:.565879762172699},active:!0,acc_impulse:{0:.011077954433858395,1:.14497947692871094},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1},{a_index:5,b_index:6,a_relative_pos:{0:-.3112245500087738,1:.18156062066555023},b_relative_pos:{0:0,1:0},global_position:{0:1.5760316848754883,1:.565879762172699},active:!0,acc_impulse:{0:.011077954433858395,1:.14497947692871094},acc_r_impulse:0,motor_speed:1,motor_power:1,motor_on:!0,motor_has_joint_limits:!1,min_rotation:0,max_rotation:1.5707963705062866,is_fixed_joint:!1,rotation:3.317363977432251,motor_binding:1}],thruster:[{object_index:6,relative_position:{0:0,1:0},rotation:.0793752670288086,power:.4192001223564148,global_position:{0:1.5804704427719116,1:.5658808350563049},active:!1,thruster_binding:3},{object_index:6,relative_position:{0:0,1:0},rotation:.0793752670288086,power:.4192001223564148,global_position:{0:1.5804704427719116,1:.5658808350563049},active:!1,thruster_binding:3}],collision_matrix:{0:{0:!1,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0},1:{0:!0,1:!1,2:!0,3:!0,4:!0,5:!0,6:!0},2:{0:!0,1:!0,2:!1,3:!0,4:!0,5:!0,6:!0},3:{0:!0,1:!0,2:!0,3:!1,4:!0,5:!0,6:!0},4:{0:!0,1:!0,2:!0,3:!0,4:!1,5:!0,6:!0},5:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!1,6:!1},6:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!1,6:!1}},acc_rr_manifolds:[{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0}],acc_cr_manifolds:[{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:-0,1:-1},penetration:.004381492733955383,collision_point:{0:1.576073169708252,1:.39999961853027344},active:!0,acc_impulse_normal:.16025397181510925,acc_impulse_tangent:.024343915283679962,restitution_velocity_target:-0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0},{normal:{0:0,1:0},penetration:0,collision_point:{0:0,1:0},active:!1,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:0}],acc_cc_manifolds:[{normal:{0:-.040381286293268204,1:-.9991844296455383},penetration:.21094653010368347,collision_point:{0:1.574517011642456,1:.5295215845108032},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:-0},{normal:{0:-.040381286293268204,1:-.9991844296455383},penetration:.21094653010368347,collision_point:{0:1.574517011642456,1:.5295215845108032},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:-0},{normal:{0:-.040381286293268204,1:-.9991844296455383},penetration:.21094653010368347,collision_point:{0:1.574517011642456,1:.5295215845108032},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:-0},{normal:{0:-.040381286293268204,1:-.9991844296455383},penetration:.21094653010368347,collision_point:{0:1.574517011642456,1:.5295215845108032},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:-0},{normal:{0:-.040381286293268204,1:-.9991844296455383},penetration:.21094653010368347,collision_point:{0:1.574517011642456,1:.5295215845108032},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:-0},{normal:{0:-.040381286293268204,1:-.9991844296455383},penetration:.21094653010368347,collision_point:{0:1.574517011642456,1:.5295215845108032},active:!0,acc_impulse_normal:0,acc_impulse_tangent:0,restitution_velocity_target:-0}],gravity:{0:0,1:-9.8100004196167}},env_params:{dt:.016666666666666666,slop:.01,baumgarte_coefficient_joints_v:2,baumgarte_coefficient_joints_p:.7,baumgarte_coefficient_fjoint_av:2,baumgarte_coefficient_rjoint_limit_av:5,baumgarte_coefficient_collision:.2,joint_stiffness:.6,clip_position:15,clip_velocity:100,clip_angular_velocity:50,base_motor_speed:6,base_motor_power:900,base_thruster_power:10,motor_decay_coefficient:.1,motor_joint_limit:.1,base_friction:.4,max_timesteps:256,pixels_per_unit:100,dense_reward_scale:.1,num_shape_roles:4},static_env_params:{num_polygons:12,num_circles:4,num_joints:6,num_thrusters:2,max_polygon_vertices:4,num_solver_iterations:10,solver_batch_size:16,do_warm_starting:!0,num_static_fixated_polys:4,screen_dim:{0:500,1:500},downscale:4,frame_skip:2,max_shape_size:2,num_motor_bindings:4,num_thruster_bindings:2}}];EP=new oP,IP=!1,kP=function(){return IP},jP=function(){return!IP},AP=function(e){return null==e?null:{level:{env_state:O(e.level.env_state),env_params:e.level.env_params,static_env_params:e.level.static_env_params},metaData:e.metaData,rankingData:e.rankingData,levelID:e.levelID}},CP=function(e,t){void 0===t&&(t=null),console.log("SWITCHING");var n=document.getElementById("canvasEditor"),r=[document.getElementById("canvasGallery"),document.getElementById("bottom-panel"),document.getElementById("allItems")];if(EP.setShouldLoadNewLevel(null!=e),EP.switchLevel(AP(e)),null!=t&&t.length>0&&EP.setNewLevelsSavedToCloud(t),IP){n.style.display="none";for(var i=0,o=r;i<o.length;i++)o[i].style.display=null;TP.loop(),SP.noLoop()}else{n.style.display="block";for(var a=0,s=r;a<s.length;a++)s[a].style.display="none";SP.loop()}IP=!IP},OP=function(){var e;e=function(e){var t=document.documentElement.clientWidth,n=window.innerHeight;t=n=Math.min(t,n);var r=Sm,i=Math.min(t,n);r.screenDim=vt.array([i,i]);var o,a=xm,s=(xf(r),{}),l=!1,c=[];e.preload=function(){s=D_(e)},e.setup=function(){fetch("/mike_test2.json").then((function(e){return e.json()})).then((function(e){console.log("RES",e);for(var t=0;t<e.env_states.length;t++){for(var n=[],r=0;r<e.env_states[t].length&&!(0==e.times[t][r]&&r>0);r++){var i=jf(500,500,e.env_states[t][r],!0).env_state;n.push(i)}c.push(n)}l=!0})),s=L_(e,0,s),o=e.createGraphics(t,n),e.createCanvas(t,n,document.getElementById("canvasEditor"))};var u=1,p=0;e.draw=function(){if(l){jf(500,500,MP[p%MP.length]).env_state;var i=o;i.clear(),o.clear(),i.background(255),i.push();var d=t,h=n;i.translate(t/2,n/2),u+=.01;var m=10*(u=Math.min(u,10));Math.round(u),i.scale(1/u),i.translate(8*-(d+m)/2-d/2,8*-(h+m)/2-d/2);for(var f=0,g=0;g<9;g++){for(var y=0,_=0;_<9;_++){var v=d+m,b=c[f%c.length],w=b[p%b.length];F_(o,w,r,a,s),i.translate(v,0),y+=v,++f}i.translate(0,h+m),i.translate(-y,0)}i.pop(),e.image(o,0,0,t,n),console.log(p,e.frameRate()),p<1e3&&o.save("all_canvases/canvas_v6_".concat(p.toString().padStart(3,"0"),".png")),p++}}},new A(e,document.body)},document.addEventListener("DOMContentLoaded",(function(){window.location.toString().endsWith("gallery.html")?function(){var e=M_();TP=new A($_(CP,jP,EP,e),document.body),(SP=new A(iP((function(e){return CP(null,e)}),kP,EP,e,!0),document.body)).noLoop();var t=document.getElementById("canvasEditor"),n=document.getElementById("canvasGallery");t.style.display="none",n.style.display="block",aP(e)}():window.location.toString().endsWith("animation.html")?OP():function(){var e=M_(EP.getAuthStateCallback()),t=function(){},n=new URLSearchParams(window.location.search),r=n.get("level");console.log("Search params here are",n,r);var i,o,a=function(){var n=iP(t,(function(){return!0}),EP,e);new A(n,document.body)};null!=r?(i=e,o=r,C_(void 0,void 0,void 0,(function(){var e,t,n,r;return O_(this,(function(a){switch(a.label){case 0:return[4,dm(yh(gh(i.db,"levels"),o))];case 1:if(!(e=a.sent()).exists())throw console.log("Document does not exist"),new Error("Document does not exist");return t=e.data(),n=jf(500,500,t.levelAndParams,!0),r=null==t.rankingData?{upvotes:0,downvotes:0}:t.rankingData,[2,{level:n,metaData:t.metaData,rankingData:r,levelID:o}]}}))}))).then((function(e){console.log("Got level here",e),EP.setShouldLoadNewLevel(!0),EP.switchLevel(AP(e)),a()})).catch((function(e){console.log("Failed with error",e),a()})):(console.log("Not Loading Level"),a()),aP(e)}()}))})()})();